if("undefined" == typeof I$) I$ = function() {
    var t = {},
        e = function() {
            return !1
        },
        i = {},
        n = function(e, i) {
            return t.toString.call(e) === "[object " + i + "]"
        };
    return function(t, r) {
        var a = i[t],
            s = n(r, "Function");
        if(null != r && !s) a = r;
        if(s) {
            for(var o = [], l = 2, c = arguments.length; l < c; l++) o.push(arguments.callee(arguments[l]));
            var u = {};
            o.push.call(o, u, {}, e, []);
            var d = r.apply(null, o) || u;
            if(!a || !n(d, "Object")) a = d;
            else if(Object.keys)
                for(var h, f = Object.keys(d), l = 0, c = f.length; l < c; l++) {
                    h = f[l];
                    a[h] = d[h]
                } else
                for(var h in d) a[h] = d[h]
        }
        if(null == a) a = {};
        i[t] = a;
        return a
    }
}();
I$(129, function(t, e, i, n) {
    var r = Function.prototype;
    r._$aop = function(t, e) {
        var e = e || i,
            t = t || i,
            r = this;
        return function() {
            var i = {
                args: n.slice.call(arguments, 0)
            };
            t(i);
            if(!i.stopped) {
                i.value = r.apply(this, i.args);
                e(i)
            }
            return i.value
        }
    };
    r._$bind = function() {
        var t = arguments,
            e = arguments[0],
            i = this;
        return function() {
            var r = n.slice.call(t, 1);
            n.push.apply(r, arguments);
            return i.apply(e || null, r)
        }
    };
    r._$bind2 = function() {
        var t = arguments,
            e = n.shift.call(t),
            i = this;
        return function() {
            n.push.apply(arguments, t);
            return i.apply(e || null, arguments)
        }
    };
    var r = String.prototype;
    if(!r.trim) r.trim = function() {
        var t = /(?:^\s+)|(?:\s+$)/g;
        return function() {
            return this.replace(t, "")
        }
    }();
    if(!this.console) this.console = {
        log: i,
        error: i
    };
    if(!0) {
        NEJ = this.NEJ || {};
        NEJ.copy = function(t, i) {
            t = t || {};
            i = i || e;
            for(var n in i)
                if(i.hasOwnProperty(n)) t[n] = i[n];
            return t
        };
        NEJ = NEJ.copy(NEJ, {
            O: e,
            R: n,
            F: i,
            P: function(t) {
                if(!t || !t.length) return null;
                for(var e = window, i = t.split("."), n = i.length, r = "window" == i[0] ? 1 : 0; r < n; e = e[i[r]] = e[i[r]] || {}, r++);
                return e
            }
        });
        return NEJ
    }
    return t
});
I$(296, function(t, e, i, n) {
    t.__forIn = function(t, e, i) {
        if(!t || !e) return null;
        for(var n, r, a = Object.keys(t), s = 0, o = a.length; s < o; s++) {
            n = a[s];
            r = e.call(i || null, t[n], n, t);
            if(r) return n
        }
        return null
    };
    t.__forEach = function(t, e, i) {
        t.forEach(e, i)
    };
    t.__col2array = function(t) {
        return n.slice.call(t, 0)
    };
    t.__str2time = function(t) {
        return Date.parse(t)
    };
    return t
});
I$(148, function(t, e, i, n, r) {
    var a = this.navigator.platform,
        s = this.navigator.userAgent,
        o = {
            mac: a,
            win: a,
            linux: a,
            ipad: s,
            ipod: s,
            iphone: a,
            android: s
        };
    e._$IS = o;
    for(var l in o) o[l] = new RegExp(l, "i").test(o[l]);
    o.ios = o.ipad || o.iphone || o.ipod;
    o.tablet = o.ipad;
    o.desktop = o.mac || o.win || o.linux && !o.android;
    e._$is = function(t) {
        return !!o[t]
    };
    var c = {
        engine: "unknow",
        release: "unknow",
        browser: "unknow",
        version: "unknow",
        prefix: {
            css: "",
            pro: "",
            clz: ""
        }
    };
    e._$KERNEL = c;
    if(/msie\s+(.*?);/i.test(s) || /trident\/.+rv:([\d\.]+)/i.test(s)) {
        c.engine = "trident";
        c.browser = "ie";
        c.version = RegExp.$1;
        c.prefix = {
            css: "ms",
            pro: "ms",
            clz: "MS",
            evt: "MS"
        };
        var u = {
            6: "2.0",
            7: "3.0",
            8: "4.0",
            9: "5.0",
            10: "6.0",
            11: "7.0"
        };
        c.release = u[document.documentMode] || u[parseInt(c.version)]
    } else if(/webkit\/?([\d.]+?)(?=\s|$)/i.test(s)) {
        c.engine = "webkit";
        c.release = RegExp.$1 || "";
        c.prefix = {
            css: "webkit",
            pro: "webkit",
            clz: "WebKit"
        }
    } else if(/rv\:(.*?)\)\s+gecko\//i.test(s)) {
        c.engine = "gecko";
        c.release = RegExp.$1 || "";
        c.browser = "firefox";
        c.prefix = {
            css: "Moz",
            pro: "moz",
            clz: "Moz"
        };
        if(/firefox\/(.*?)(?=\s|$)/i.test(s)) c.version = RegExp.$1 || ""
    } else if(/presto\/(.*?)\s/i.test(s)) {
        c.engine = "presto";
        c.release = RegExp.$1 || "";
        c.browser = "opera";
        c.prefix = {
            css: "O",
            pro: "o",
            clz: "O"
        };
        if(/version\/(.*?)(?=\s|$)/i.test(s)) c.version = RegExp.$1 || ""
    }
    if("unknow" == c.browser)
        for(var d, u = ["chrome", "maxthon", "safari"], h = 0, f = u.length; h < f; h++) {
            d = "safari" == u[h] ? "version" : u[h];
            if(new RegExp(d + "/(.*?)(?=\\s|$)", "i").test(s)) {
                c.browser = u[h];
                c.version = RegExp.$1.trim();
                break
            }
        }
    e._$SUPPORT = {};
    e._$support = function(t) {
        return !!e._$SUPPORT[t]
    };
    if(!0) t.copy(t.P("nej.p"), e);
    return e
}, 129);
I$(130, function(t, e, i, n, r, a) {
    if("trident" === e._$KERNEL.engine && e._$KERNEL.release <= "4.0") I$(295, function() {
        t.__forIn = function(t, e, i) {
            if(t && e) {
                var n;
                for(var r in t)
                    if(t.hasOwnProperty(r)) {
                        n = e.call(i, t[r], r, t);
                        if(n) return r
                    } else;
            }
        };
        t.__forEach = function(t, e, i) {
            for(var n = 0, r = t.length; n < r; n++) e.call(i, t[n], n, t)
        };
        t.__col2array = function(t) {
            var e = [];
            if(t && t.length)
                for(var i = 0, n = t.length; i < n; i++) e.push(t[i]);
            return e
        };
        t.__str2time = function() {
            var t = /-/g;
            return function(e) {
                return Date.parse(e.replace(t, "/").split(".")[0])
            }
        }()
    });
    return t
}, 296, 148);
I$(4, function(t, e, i, n, r, a) {
    var s = function(t, e) {
        try {
            e = e.toLowerCase();
            if(null === t) return "null" == e;
            if(void 0 === t) return "undefined" == e;
            else return n.toString.call(t).toLowerCase() == "[object " + e + "]"
        } catch(t) {
            return !1
        }
    };
    i._$isFunction = function(t) {
        return s(t, "function")
    };
    i._$isString = function(t) {
        return s(t, "string")
    };
    i._$isNumber = function(t) {
        return s(t, "number")
    };
    i._$isBoolean = function(t) {
        return s(t, "boolean")
    };
    i._$isDate = function(t) {
        return s(t, "date")
    };
    i._$isArray = function(t) {
        return s(t, "array")
    };
    i._$isObject = function(t) {
        return s(t, "object")
    };
    i._$length = function() {
        var t = /[^\x00-\xff]/g;
        return function(e) {
            return("" + (e || "")).replace(t, "**").length
        }
    }();
    i._$loop = function(t, n, r) {
        if(i._$isObject(t) && i._$isFunction(n)) return e.__forIn.apply(e, arguments);
        else return null
    };
    i._$indexOf = function(t, e) {
        var n = i._$isFunction(e) ? e : function(t) {
                return t === e
            },
            r = i._$forIn(t, n);
        return null != r ? r : -1
    };
    i._$binSearch = function() {
        var t, e = function(i, n, r) {
            if(n > r) return -1;
            var a = Math.ceil((n + r) / 2),
                s = t(i[a], a, i);
            if(0 == s) return a;
            if(s < 0) return e(i, n, a - 1);
            else return e(i, a + 1, r)
        };
        return function(i, n) {
            t = n || r;
            return e(i, 0, i.length - 1)
        }
    }();
    i._$reverseEach = function(t, e, n) {
        if(t && t.length && i._$isFunction(e))
            for(var r = t.length - 1; r >= 0; r--)
                if(e.call(n, t[r], r, t)) return r;
        return null
    };
    i._$forEach = function(t, n, r) {
        if(t && t.length && i._$isFunction(n))
            if(!t.forEach) i._$forIn.apply(i, arguments);
            else e.__forEach(t, n, r)
    };
    i._$forIn = function(t, e, n) {
        if(!t || !i._$isFunction(e)) return null;
        if(i._$isNumber(t.length)) {
            for(var r = 0, a = t.length; r < a; r++)
                if(e.call(n, t[r], r, t)) return r
        } else if(i._$isObject(t)) return i._$loop(t, e, n);
        return null
    };
    i._$encode = function(t, e) {
        e = "" + e;
        if(!t || !e) return e || "";
        else return e.replace(t.r, function(e) {
            var i = t[!t.i ? e.toLowerCase() : e];
            return null != i ? i : e
        })
    };
    i._$escape = function() {
        var t = /<br\/?>$/,
            e = {
                r: /\<|\>|\&|\r|\n|\s|\'|\"/g,
                "<": "&lt;",
                ">": "&gt;",
                "&": "&amp;",
                " ": "&nbsp;",
                '"': "&quot;",
                "'": "&#39;",
                "\n": "<br/>",
                "\r": ""
            };
        return function(n) {
            n = i._$encode(e, n);
            return n.replace(t, "<br/><br/>")
        }
    }();
    i._$unescape = function() {
        var t = {
            r: /\&(?:lt|gt|amp|nbsp|#39|quot)\;|\<br\/\>/gi,
            "&lt;": "<",
            "&gt;": ">",
            "&amp;": "&",
            "&nbsp;": " ",
            "&#39;": "'",
            "&quot;": '"',
            "<br/>": "\n"
        };
        return function(e) {
            return i._$encode(t, e)
        }
    }();
    i._$format = function() {
        var t = {
                i: !0,
                r: /\byyyy|yy|MM|cM|eM|M|dd|d|HH|H|mm|ms|ss|m|s|w|ct|et\b/g
            },
            e = ["上午", "下午"],
            n = ["A.M.", "P.M."],
            r = ["日", "一", "二", "三", "四", "五", "六"],
            a = ["一", "二", "三", "四", "五", "六", "七", "八", "九", "十", "十一", "十二"],
            s = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sept", "Oct", "Nov", "Dec"],
            o = function(t) {
                t = parseInt(t) || 0;
                return(t < 10 ? "0" : "") + t
            },
            l = function(t) {
                return t < 12 ? 0 : 1
            };
        return function(c, u, d) {
            if(!c || !u) return "";
            c = i._$var2date(c);
            t.yyyy = c.getFullYear();
            t.yy = ("" + t.yyyy).substr(2);
            t.M = c.getMonth() + 1;
            t.MM = o(t.M);
            t.eM = s[t.M - 1];
            t.cM = a[t.M - 1];
            t.d = c.getDate();
            t.dd = o(t.d);
            t.H = c.getHours();
            t.HH = o(t.H);
            t.m = c.getMinutes();
            t.mm = o(t.m);
            t.s = c.getSeconds();
            t.ss = o(t.s);
            t.ms = c.getMilliseconds();
            t.w = r[c.getDay()];
            var h = l(t.H);
            t.ct = e[h];
            t.et = n[h];
            if(d) t.H = t.H % 12;
            return i._$encode(t, u)
        }
    }();
    i._$var2date = function(t) {
        var n = t;
        if(i._$isString(t)) n = new Date(e.__str2time(t));
        if(!i._$isDate(n)) n = new Date(t);
        return n
    };
    i._$fixed = function(t, e) {
        return parseFloat(new Number(t).toFixed(e))
    };
    i._$absolute = function() {
        var t = /([^\/:])\/.*$/,
            e = /\/[^\/]+$/,
            i = /[#\?]/,
            n = location.href.split(/[?#]/)[0],
            r = document.createElement("a"),
            a = function(t) {
                return(t || "").indexOf("://") > 0
            },
            s = function(t) {
                return(t || "").split(i)[0].replace(e, "/")
            },
            o = function(e, i) {
                if(0 == e.indexOf("/")) return i.replace(t, "$1") + e;
                else return s(i) + e
            };
        n = s(n);
        return function(t, e) {
            t = (t || "").trim();
            if(!a(e)) e = n;
            if(!t) return e;
            if(a(t)) return t;
            t = o(t, e);
            r.href = t;
            t = r.href;
            return a(t) ? t : r.getAttribute("href", 4)
        }
    }();
    i._$url2origin = function() {
        var t = /^([\w]+?:\/\/.*?(?=\/|$))/i;
        return function(e) {
            if(t.test(e || "")) return RegExp.$1.toLowerCase();
            else return ""
        }
    }();
    i._$string2object = function(t, e) {
        var n = {};
        i._$forEach((t || "").split(e), function(t) {
            var e = t.split("=");
            if(e && e.length) {
                var i = e.shift();
                if(i) n[decodeURIComponent(i)] = decodeURIComponent(e.join("="))
            }
        });
        return n
    };
    i._$object2string = function(t, e, n) {
        if(!t) return "";
        var r = [];
        i._$loop(t, function(t, e) {
            if(!i._$isFunction(t)) {
                if(i._$isDate(t)) t = t.getTime();
                else if(i._$isArray(t)) t = t.join(",");
                else if(i._$isObject(t)) t = JSON.stringify(t);
                if(n) t = encodeURIComponent(t);
                r.push(encodeURIComponent(e) + "=" + t)
            }
        });
        return r.join(e || ",")
    };
    i._$query2object = function(t) {
        return i._$string2object(t, "&")
    };
    i._$object2query = function(t) {
        return i._$object2string(t, "&", !0)
    };
    i._$object2array = function(t) {
        return e.__col2array(t)
    };
    i._$array2object = function(t, e) {
        var n = {};
        i._$forEach(t, function(t) {
            var i = t;
            if(e) i = e(t);
            if(null != i) n[i] = t
        });
        return n
    };
    i._$number2string = function(t, e) {
        var i = ("" + t).length,
            n = Math.max(1, parseInt(e) || 0),
            r = n - i;
        if(r > 0) t = new Array(r + 1).join("0") + t;
        return "" + t
    };
    i._$safeDelete = function(t, e) {
        if(!i._$isArray(e)) try {
            delete t[e]
        } catch(i) {
            t[e] = void 0
        } else i._$forEach(e, function(e) {
            i._$safeDelete(t, e)
        })
    };
    i._$randString = function() {
        var t = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";
        return function(e) {
            e = e || 10;
            for(var i, n = [], r = 0; r < e; ++r) {
                i = Math.floor(Math.random() * t.length);
                n.push(t.charAt(i))
            }
            return n.join("")
        }
    }();
    i._$randNumber = function(t, e) {
        return Math.floor(Math.random() * (e - t) + t)
    };
    i._$randNumberString = function(t) {
        t = Math.max(0, Math.min(t || 8, 30));
        var e = Math.pow(10, t - 1),
            n = 10 * e;
        return i._$randNumber(e, n).toString()
    };
    i._$uniqueID = function() {
        var t = +new Date;
        return function() {
            return "" + t++
        }
    }();
    i._$query = function(t, e) {
        t = t || n;
        for(var i = (e || "").split("."), r = 0, a = i.length; r < a; r++) {
            t = t[i[r]];
            if(!t) break
        }
        return t
    };
    i._$merge = function() {
        var t = arguments.length - 1,
            e = arguments[t];
        if(i._$isFunction(e)) t -= 1;
        else e = r;
        for(var n = arguments[0] || {}, a = 1; a <= t; a++) i._$loop(arguments[a], function(t, i) {
            if(!e(t, i)) n[i] = t
        });
        return n
    };
    i._$fetch = function(t, e) {
        if(e) i._$loop(t, function(t, i, n) {
            var r = e[i];
            if(null != r) n[i] = r
        });
        return t
    };
    i._$hasProperty = function(t) {
        if(!t) return !1;
        if(null != t.length) return t.length > 0;
        var e = 0;
        i._$loop(t, function() {
            e++;
            return e > 0
        });
        return e > 0
    };
    if(!0) {
        t.Q = i._$query;
        t.X = i._$merge;
        t.EX = i._$fetch;
        t.copy(this.NEJ, t);
        t.copy(t.P("nej.u"), i)
    }
    return i
}, 129, 130);
I$(605, function(t, e, i, n, r, a) {
    var s = {};
    i.__url2host = function() {
        var t = /^([\w]+?:\/\/.*?(?=\/|$))/i;
        return function(e) {
            e = e || "";
            if(t.test(e)) return RegExp.$1;
            else return location.protocol + "//" + location.host
        }
    }();
    i.__set = function(t, e) {
        s[t] = e
    };
    i.__get = function(t) {
        return s[t]
    };
    var o = function() {
        var t = {
                portrait: {
                    name: "portrait",
                    dft: "portrait/"
                },
                "ajax.swf": {
                    name: "ajax",
                    dft: "nej_proxy_flash.swf"
                },
                "chart.swf": {
                    name: "chart",
                    dft: "nej_flex_chart.swf"
                },
                "audio.swf": {
                    name: "audio",
                    dft: "nej_player_audio.swf"
                },
                "video.swf": {
                    name: "video",
                    dft: "nej_player_video.swf"
                },
                "clipboard.swf": {
                    name: "clipboard",
                    dft: "nej_clipboard.swf"
                },
                "upload.image.swf": {
                    name: "uploadimage",
                    dft: "nej_upload_image.swf"
                }
            },
            r = function(t) {
                var e = {};
                if(!t || !t.length) return e;
                for(var n, r = 0, a = t.length; r < a; r++) {
                    n = t[r];
                    if(n.indexOf("://") > 0) e[i.__url2host(n)] = n
                }
                return e
            };
        return function(a) {
            i.__set("root", a.root || "/res/");
            var s = i.__get("root");
            e._$loop(t, function(t, e, n) {
                i.__set(e, a[t.name] || s + t.dft)
            });
            var o = a.p_csrf;
            if(o === !0) o = {
                cookie: "AntiCSRF",
                param: "AntiCSRF"
            };
            o = o || n;
            i.__set("csrf", {
                param: o.param || "",
                cookie: o.cookie || ""
            });
            i.__set("frames", r(a.p_frame));
            i.__set("flashs", r(a.p_flash))
        }
    }();
    o(this.NEJ_CONF || n);
    return i
}, 129, 4);
I$(468, function(t, e, i, n, r, a) {
    if("trident" === e._$KERNEL.engine) I$(606, function() {
        t.__set("storage.swf", (this.NEJ_CONF || n).storage || t.__get("root") + "nej_storage.swf")
    });
    if("trident" === e._$KERNEL.engine && e._$KERNEL.release <= "3.0") I$(607, function() {
        t.__set("blank.png", (this.NEJ_CONF || n).blank || t.__get("root") + "nej_blank.gif")
    });
    return t
}, 605, 148);
I$(304, function(t, e, i, n, r, a) {
    i._$getFrameProxy = function(t) {
        var n = e.__url2host(t);
        return i._$get("frames")[n] || n + "/res/nej_proxy_frame.html"
    };
    i._$getFlashProxy = function(t) {
        return i._$get("flashs")[e.__url2host(t)]
    };
    i._$get = function(t) {
        return e.__get(t)
    };
    if(!0) t.copy(t.P("nej.c"), i);
    return i
}, 129, 468);
I$(131, function(t, e, i, n, r, a) {
    var s = +new Date;
    i._$CODE_NOTFUND = 1e4 - s;
    i._$CODE_NOTASGN = 10001 - s;
    i._$CODE_NOTSPOT = 10002 - s;
    i._$CODE_TIMEOUT = 10003 - s;
    i._$CODE_ERREVAL = 10004 - s;
    i._$CODE_ERRCABK = 10005 - s;
    i._$CODE_ERRSERV = 10006 - s;
    i._$CODE_ERRABRT = 10007 - s;
    i._$HEAD_CT = "Content-Type";
    i._$HEAD_CT_PLAN = "text/plain";
    i._$HEAD_CT_FILE = "multipart/form-data";
    i._$HEAD_CT_FORM = "application/x-www-form-urlencoded";
    i._$BLANK_IMAGE = e._$get("blank.png") || "data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";
    if(!0) t.copy(t.P("nej.g"), i);
    return i
}, 129, 304);
I$(132, function(t, e) {
    var i = {};
    e._$merge = function(e) {
        t._$merge(i, e)
    };
    e._$dump = function() {
        return i
    };
    e._$clear = function() {
        i = {}
    };
    return e
}, 4);
I$(298, function(t, e, i, n, r, a) {
    i.__checkEvent = function() {
        var t = {
                touchstart: "mousedown",
                touchmove: "mousemove",
                touchend: "mouseup"
            },
            i = e._$KERNEL.prefix,
            n = {
                transitionend: "TransitionEnd",
                animationend: "AnimationEnd",
                animationstart: "AnimationStart",
                animationiteration: "AnimationIteration",
                visibilitychange: "visibilitychange"
            },
            r = {
                enter: function(t, e, i) {
                    var n = {
                        type: "keypress"
                    };
                    if(i) n.handler = function(e) {
                        if(13 === e.keyCode) i.call(t, e)
                    };
                    return n
                }
            },
            a = function(t) {
                return(i.evt || i.pro) + t
            };
        return function(e, i, s) {
            var o = {
                type: i,
                handler: s
            };
            if(!("on" + i in e)) {
                var l = t[i];
                if(l) {
                    o.type = l;
                    return o
                }
                var l = n[i];
                if(l) {
                    o.type = a(l);
                    return o
                }
                var c = r[i];
                if(c) return c.apply(null, arguments)
            }
            return o
        }
    }();
    i.__addEvent = function() {
        var t = arguments;
        if(!1)
            if(!("on" + t[1] in t[0])) console.log("not support event[" + t[1] + "] for " + t[0]);
        t[0].addEventListener(t[1], t[2], t[3])
    };
    i.__delEvent = function() {
        var t = arguments;
        t[0].removeEventListener(t[1], t[2], t[3])
    };
    i.__dispatchEvent = function(e, i, n) {
        var r = document.createEvent("Event");
        r.initEvent(i, !0, !0);
        t._$merge(r, n);
        e.dispatchEvent(r)
    };
    return i
}, 4, 148);
I$(134, function(t, e, i, n, r, a, s) {
    if("trident" === t._$KERNEL.engine && t._$KERNEL.release >= "6.0") I$(299, function() {
        e.__checkEvent = function() {
            var t = {
                touchcancel: "MSPointerCancel",
                touchstart: "MSPointerDown",
                touchmove: "MSPointerMove",
                touchend: "MSPointerUp"
            };
            return e.__checkEvent._$aop(function(e) {
                var i = e.args,
                    n = t[i[1]];
                if(n) {
                    e.stopped = !0;
                    e.value = {
                        type: n,
                        handler: i[2]
                    }
                }
            })
        }()
    });
    if("trident" === t._$KERNEL.engine && "5.0" == t._$KERNEL.release) I$(300, function() {
        e.__checkEvent = function() {
            var t = {},
                i = {
                    input: function(e, i, n) {
                        if(!n) return {
                            type: i
                        };
                        else return {
                            type: i,
                            handler: function(i) {
                                var r = e.id;
                                t[r] = e.value;
                                n.call(e, i)
                            },
                            link: [
                                [document, "selectionchange", function(i) {
                                    var r = e.id;
                                    if(e == document.activeElement) {
                                        if(t[r] !== e.value) {
                                            t[r] = e.value;
                                            n.call(e, i)
                                        }
                                    } else delete t[r]
                                }]
                            ]
                        }
                    }
                };
            return e.__checkEvent._$aop(function(t) {
                var e = t.args,
                    n = i[e[1]];
                if(n) {
                    t.stopped = !0;
                    t.value = n.apply(null, e)
                }
            })
        }()
    });
    if("trident" === t._$KERNEL.engine && t._$KERNEL.release >= "5.0") I$(301, function() {
        var t = {
            propertychange: 1
        };
        e.__addEvent = e.__addEvent._$aop(function(e) {
            var i = e.args;
            if(null != t[i[1]] && i[0].attachEvent) {
                e.stopped = !0;
                i[0].attachEvent("on" + i[1], i[2])
            }
        });
        e.__delEvent = e.__delEvent._$aop(function(e) {
            var i = e.args;
            t[i[1]];
            if(null != t[i[1]] && i[0].detachEvent) {
                e.stopped = !0;
                i[0].detachEvent("on" + i[1], i[2])
            }
        })
    });
    if("trident" === t._$KERNEL.engine && t._$KERNEL.release <= "4.0") I$(302, function() {
        e.__checkEvent = function() {
            var t = {},
                i = {
                    input: function(e, i, n) {
                        var r = {
                            type: "propertychange"
                        };
                        if(n) r.handler = function(i) {
                            if("value" in e && "value" == i.propertyName) {
                                var r = e.id;
                                if(t[r]) return;
                                t[r] = !0;
                                n.call(e, i);
                                delete t[r]
                            }
                        };
                        return r
                    },
                    load: function(t, e, i) {
                        var n = {
                            type: "readystatechange"
                        };
                        if(i) n.handler = function(e) {
                            if("loaded" == t.readyState || "complete" == t.readyState) i.call(t, e)
                        };
                        return n
                    }
                };
            return e.__checkEvent._$aop(function(t) {
                var e = t.args,
                    n = i[e[1]];
                if(n) {
                    t.stopped = !0;
                    t.value = n.apply(null, e)
                }
                if(e[2]) e[2] = e[2]._$bind(e[0])
            })
        }();
        e.__addEvent = function() {
            var t = arguments;
            if(!1)
                if(!("on" + t[1] in t[0])) console.log("not support event[" + t[1] + "] for " + t[0]);
            t[0].attachEvent("on" + t[1], t[2])
        };
        e.__delEvent = function() {
            var t = arguments;
            t[0].detachEvent("on" + t[1], t[2])
        };
        e.__dispatchEvent = function() {
            var t = {
                propertychange: {
                    propertyName: "value"
                }
            };
            return function(e, n, r) {
                var a = document.createEventObject();
                try {
                    i._$merge(a, t[n], r);
                    e.fireEvent("on" + n, a)
                } catch(t) {
                    console.error(t.message);
                    console.error(t.stack)
                }
            }
        }()
    });
    if("gecko" === t._$KERNEL.engine) I$(303, function() {
        e.__checkEvent = function() {
            var t = /^(?:transitionend|animationend|animationstart|animationiteration)$/i,
                i = {
                    mousewheel: function(t, e, i) {
                        var n = {
                            type: "MozMousePixelScroll"
                        };
                        if(i) n.handler = function(e) {
                            var n = e.detail;
                            e.wheelDelta = -n;
                            e.wheelDeltaY = -n;
                            e.wheelDeltaX = 0;
                            i.call(t, e)
                        };
                        return n
                    }
                };
            return e.__checkEvent._$aop(function(e) {
                var n = e.args;
                if(t.test(n[1])) {
                    e.stopped = !0;
                    e.value = {
                        type: n[1],
                        handler: n[2]
                    }
                }
                var r = i[n[1]];
                if(r) {
                    e.stopped = !0;
                    e.value = r.apply(null, n)
                }
            })
        }()
    });
    return e
}, 148, 298, 4);
I$(6, function(t, e, i, n, r, a, s, o, l) {
    var c = {},
        u = {},
        d = function() {
            var t = /[\s,;]+/;
            return function(e) {
                var e = (e || "").trim().toLowerCase();
                return !e ? null : e.split(t)
            }
        }(),
        h = function(t, i, n) {
            var r = "page" + i;
            return null != t[r] ? t[r] : t["client" + i] + e._$getPageBox()["scroll" + n]
        },
        f = function(t, e, i) {
            var n = "scroll" + i;
            _node = a._$getElement(t), _xret = h(t, e, i);
            for(; _node && _node != document.body && _node != document.documentElement;) {
                _xret += _node[n] || 0;
                _node = _node.parentNode
            }
            return _xret
        },
        p = function(t, n, r, a) {
            var s = {};
            t = e._$get(t);
            if(!t) return null;
            e._$id(t);
            s.element = t;
            if(!i._$isFunction(r)) return null;
            s.handler = r;
            var n = d(n);
            if(!n) return null;
            s.type = n;
            s.capture = !!a;
            return s
        };
    a._$addEvent = u._$addEvent = function() {
        var t = function(t, i, n) {
            var r = e._$id(i.element),
                a = c[r] || {},
                s = a[t] || [];
            s.push({
                type: n.type || t,
                func: n.handler || i.handler,
                sfun: i.handler,
                capt: i.capture,
                link: n.link
            });
            a[t] = s;
            c[r] = a
        };
        return function() {
            var n = p.apply(null, arguments);
            if(n) i._$forEach(n.type, function(a) {
                var s = r.__checkEvent(n.element, a, n.handler);
                r.__addEvent(n.element, s.type, s.handler, n.capture);
                i._$forIn(s.link, function(t) {
                    t[3] = !!t[3];
                    r.__addEvent.apply(r, t);
                    t[0] = e._$id(t[0])
                });
                t(a, n, s)
            })
        }
    }();
    a._$delEvent = u._$delEvent = function() {
        var t = function(t, n) {
            var r = e._$id(n.element),
                a = c[r] || s,
                o = a[t],
                l = i._$indexOf(o, function(t) {
                    return t.sfun === n.handler && t.capt === n.capture
                }),
                u = null;
            if(l >= 0) {
                var d = o.splice(l, 1)[0];
                u = [
                    [n.element, d.type, d.func, n.capture]
                ];
                if(d.link) u.push.apply(u, d.link);
                if(!o.length) delete a[t];
                if(!i._$hasProperty(a)) delete c[r]
            }
            return u
        };
        return function() {
            var e = p.apply(null, arguments);
            if(e) i._$forEach(e.type, function(n) {
                i._$forEach(t(n, e), function(t) {
                    r.__delEvent.apply(r, t)
                })
            })
        }
    }();
    a._$clearEvent = u._$clearEvent = function() {
        var t = function(t, e, n) {
            i._$reverseEach(n, function(i) {
                a._$delEvent(t, e, i.sfun, i.capt)
            })
        };
        return function(n, r) {
            var s = e._$id(n);
            if(s) {
                var o = c[s];
                if(o) {
                    r = d(r);
                    if(r) i._$forEach(r, function(e) {
                        t(s, e, o[e])
                    });
                    else i._$loop(o, function(t, e) {
                        a._$clearEvent(n, e)
                    })
                }
            }
        }
    }();
    a._$dispatchEvent = u._$dispatchEvent = function(t, n, a) {
        var t = e._$get(t);
        if(t) i._$forEach(d(n), function(e) {
            var i = r.__checkEvent(t, e);
            r.__dispatchEvent(t, i.type, a)
        })
    };
    a._$getElement = function() {
        var t, n = function(i, n) {
            var r = i.split(":");
            if(r.length > 1) {
                if(!t) t = {
                    a: e._$attr,
                    d: e._$dataset,
                    c: e._$hasClassName,
                    t: function(t, e) {
                        return(t.tagName || "").toLowerCase() === e
                    }
                };
                var a = t[r[0]];
                if(a) return !!a(n, r[1]);
                i = r[1]
            }
            return !!e._$attr(n, i) || !!e._$dataset(n, i) || e._$hasClassName(n, i)
        };
        return function(t) {
            if(!t) return null;
            var e = t.target || t.srcElement,
                r = arguments[1];
            if(!r) return e;
            if(i._$isString(r)) r = n._$bind(null, r);
            if(i._$isFunction(r)) {
                for(; e;) {
                    if(r(e)) return e;
                    e = e.parentNode
                }
                return null
            }
            return e
        }
    }();
    a._$stop = function(t) {
        a._$stopBubble(t);
        a._$stopDefault(t)
    };
    a._$stopBubble = function(t) {
        if(t) t.stopPropagation ? t.stopPropagation() : t.cancelBubble = !0
    };
    a._$stopDefault = function(t) {
        if(t) t.preventDefault ? t.preventDefault() : t.returnValue = !1
    };
    a._$page = function(t) {
        return {
            x: a._$pageX(t),
            y: a._$pageY(t)
        }
    };
    a._$pageX = function(t) {
        return f(t, "X", "Left")
    };
    a._$pageY = function(t) {
        return f(t, "Y", "Top")
    };
    a._$clientX = function(t) {
        return h(t, "X", "Left")
    };
    a._$clientY = function(t) {
        return h(t, "Y", "Top")
    };
    n._$merge(u);
    if(!0) t.copy(t.P("nej.v"), a);
    return a
}, 129, 3, 4, 132, 134);
I$(297, function(t, e, i, n, r, a) {
    i.__getElementById = function(t, e) {
        if(t.getElementById) return t.getElementById("" + e);
        try {
            return t.querySelector("#" + e)
        } catch(t) {
            return null
        }
    };
    i.__getChildren = function(e) {
        return t._$object2array(e.children)
    };
    i.__getElementsByClassName = function(e, i) {
        return t._$object2array(e.getElementsByClassName(i));
    };
    i.__nextSibling = function(t) {
        return t.nextElementSibling
    };
    i.__previousSibling = function(t) {
        return t.previousElementSibling
    };
    i.__dataset = function(t, e, i) {
        t.dataset = t.dataset || {};
        if(void 0 !== i) t.dataset[e] = i;
        return t.dataset[e]
    };
    i.__getAttribute = function(t, e) {
        return t.getAttribute(e)
    };
    i.__serializeDOM2XML = function(t) {
        return(new XMLSerializer).serializeToString(t) || ""
    };
    i.__parseDOMFromXML = function(t) {
        var e = (new DOMParser).parseFromString(t, "text/xml").documentElement;
        return "parsererror" == e.nodeName ? null : e
    };
    i.__fullScreen = function() {};
    i.__mask = function() {};
    i.__unmask = function() {};
    var s = e._$SUPPORT,
        o = e._$KERNEL.prefix;
    i.__isMatchedName = function() {
        var t = /^([a-z]+?)[A-Z]/;
        return function(e, i) {
            return !!(i[e] || t.test(e) && i[RegExp.$1])
        }
    }();
    i.__isNeedPrefixed = function() {
        var e = t._$array2object(["animation", "transform", "transition", "appearance", "userSelect", "box", "flex", "column"]);
        return function(t) {
            return i.__isMatchedName(t, e)
        }
    }();
    i.__fmtStyleName = function() {
        var t = /-([a-z])/g;
        return function(e) {
            e = e || "";
            return e.replace(t, function(t, e) {
                return e.toUpperCase()
            })
        }
    }();
    i.__getStyleName = function() {
        var t = /^[a-z]/,
            e = o.css || "";
        return function(n) {
            n = i.__fmtStyleName(n);
            if(!i.__isNeedPrefixed(n)) return n;
            else return e + n.replace(t, function(t) {
                    return t.toUpperCase()
                })
        }
    }();
    i.__getStyleValue = function(t, e) {
        var n = window.getComputedStyle(t, null);
        return n[i.__getStyleName(e)] || ""
    };
    i.__setStyleValue = function(t, e, n) {
        t.style[i.__getStyleName(e)] = n
    };
    i.__getCSSMatrix = function() {
        var e = /\((.*?)\)/,
            i = /\s*,\s*/,
            n = ["CSSMatrix", o.clz + "CSSMatrix"],
            r = ["m11", "m12", "m21", "m22", "m41", "m42"],
            a = function(n) {
                var a = {};
                if(e.test(n || "")) t._$forEach(RegExp.$1.split(i), function(t, e) {
                    a[r[e]] = t
                });
                return a
            };
        return function(e) {
            var i;
            t._$forIn(n, function(t) {
                if(this[t]) {
                    i = new this[t](e || "");
                    return !0
                }
            });
            return !i ? a(e) : i
        }
    }();
    i.__injectCSSText = function(t, e) {
        t.textContent = e
    };
    i.__processCSSText = function() {
        var e = /\$<(.*?)>/gi,
            r = /\{(.*?)\}/g,
            a = "-" + o.css.toLowerCase() + "-",
            l = {
                scale: "scale({x|1},{y|1})",
                rotate: "rotate({a})",
                translate: "translate({x},{y})",
                matrix: "matrix({m11},{m12},{m21},{m22},{m41},{m42})"
            },
            c = {
                scale: "scale3d({x|1},{y|1},{z|1})",
                rotate: "rotate3d({x},{y},{z},{a})",
                translate: "translate3d({x},{y},{z})",
                matrix: "matrix3d({m11},{m12},{m13},{m14},{m21},{m22},{m23},{m24},{m31},{m32},{m33|1},{m34},{m41},{m42},{m43},{m44|1})"
            },
            u = function(t, e) {
                e = e || n;
                return t.replace(r, function(t, i) {
                    var n = i.split("|");
                    return e[n[0]] || n[1] || "0"
                })
            };
        i.__processTransformValue = function(t, e) {
            var i = (!s.css3d ? l : c)[t.trim()];
            if(i) return u(i, e);
            else return ""
        };
        return function(n) {
            if(!n.replace) return n;
            else return n.replace(e, function(e, n) {
                if("vendor" === n) return a;
                var r = (n || "").split("|");
                return i.__processTransformValue(r[0], t._$query2object(r[1])) || e
            })
        }
    }();
    i.__appendCSSText = function(t, e) {
        var i = t.sheet,
            n = i.cssRules.length;
        i.insertRule(e, n);
        return i.cssRules[n]
    };
    i.__getClassList = function() {
        var t = /\s+/;
        return function(e) {
            e = (e || "").trim();
            return e ? e.split(t) : null
        }
    }();
    i.__processClassName = function(e, n, r) {
        if("replace" != n) t._$forEach(i.__getClassList(r), function(t) {
            e.classList[n](t)
        });
        else {
            i.__processClassName(e, "remove", r);
            i.__processClassName(e, "add", arguments[3])
        }
    };
    i.__hasClassName = function(e, n) {
        var r = e.classList;
        if(!r || !r.length) return !1;
        else return t._$indexOf(i.__getClassList(n), function(t) {
                return r.contains(t)
            }) >= 0
    };
    ! function() {
        if(!s.css3d) {
            var t = i.__getCSSMatrix();
            s.css3d = !!t && null != t.m41
        }
    }();
    return i
}, 4, 148);
I$(133, function(t, e, i, n, r, a, s) {
    if("trident" === e._$KERNEL.engine) I$(305, function() {
        t.__getChildren = t.__getChildren._$aop(function(t) {
            var e = t.args[0];
            if(!e.children) {
                t.stopped = !0;
                var n = [];
                i._$forEach(e.childNodes, function(t) {
                    if(1 == t.nodeType) n.push(t)
                });
                t.value = n
            }
        })
    });
    if("trident" === e._$KERNEL.engine && e._$KERNEL.release <= "6.0") I$(306, function() {
        t.__dataset = function() {
            var t = {},
                e = "data-",
                n = /\-(.{1})/gi,
                r = function(r) {
                    var a = r.id;
                    if(!t[a]) {
                        var s = {};
                        i._$forEach(r.attributes, function(t) {
                            var i = t.nodeName;
                            if(0 == i.indexOf(e)) {
                                i = i.replace(e, "").replace(n, function(t, e) {
                                    return e.toUpperCase()
                                });
                                s[i] = t.nodeValue || ""
                            }
                        });
                        t[a] = s
                    }
                };
            return function(e, i, n) {
                r(e);
                var a = t[e.id];
                if(void 0 !== n) a[i] = n;
                return a[i]
            }
        }()
    });
    if("trident" === e._$KERNEL.engine && e._$KERNEL.release <= "5.0") I$(307, function() {
        try {
            document.execCommand("BackgroundImageCache", !1, !0)
        } catch(t) {}
        t.__injectCSSText = function() {
            var e = 30;
            return t.__injectCSSText._$aop(function(t) {
                var i = t.args[0];
                if(i.styleSheet) {
                    t.stopped = !0;
                    var n = t.args[1],
                        r = document.styleSheets;
                    if(r.length > e) {
                        i = r[e];
                        n = i.cssText + n
                    } else i = i.styleSheet;
                    i.cssText = n
                }
            })
        }();
        t.__getClassRegExp = function() {
            var t = /\s+/g;
            return function(e) {
                e = (e || "").trim().replace(t, "|");
                return !e ? null : new RegExp("(\\s|^)(?:" + e + ")(?=\\s|$)", "g")
            }
        }();
        t.__processClassName = function(e, i, n) {
            n = n || "";
            var r = e.className || "",
                a = t.__getClassRegExp(n + " " + (arguments[3] || "")),
                s = r;
            if(a) s = s.replace(a, "");
            switch(i) {
                case "remove":
                    n = "";
                    break;
                case "replace":
                    n = arguments[3] || ""
            }
            s = (s + " " + n).trim();
            if(r != s) e.className = s
        };
        t.__hasClassName = function(e, i) {
            var n = t.__getClassRegExp(i);
            if(n) return n.test(e.className || "");
            else return !1
        }
    });
    if("trident" === e._$KERNEL.engine && e._$KERNEL.release <= "4.0") I$(308, function() {
        t.__getElementsByClassName = function(t, e) {
            var n = [],
                r = new RegExp("(\\s|^)(?:" + e.replace(/\s+/g, "|") + ")(?=\\s|$)");
            i._$forEach(t.getElementsByTagName("*"), function(t) {
                if(r.test(t.className)) n.push(t)
            });
            return n
        };
        t.__nextSibling = function(t) {
            for(; t = t.nextSibling;)
                if(1 == t.nodeType) return t
        };
        t.__previousSibling = function(t) {
            for(; t = t.previousSibling;)
                if(1 == t.nodeType) return t
        };
        t.__serializeDOM2XML = function(t) {
            return "xml" in t ? t.xml : t.outerHTML
        };
        t.__parseDOMFromXML = function() {
            var t = ["Msxml2.DOMDocument.6.0", "Msxml2.DOMDocument.3.0"],
                e = function() {
                    try {
                        for(var e = 0, i = t.length; e < i; e++) return new ActiveXObject(t[e])
                    } catch(t) {
                        return null
                    }
                };
            return function(t) {
                var i = e();
                if(i && i.loadXML(t) && !i.parseError.errorCode) return i.documentElement;
                else return null
            }
        }();
        t.__getStyleValue = function() {
            var e = /opacity\s*=\s*([\d]+)/i,
                i = {
                    opacity: function(t) {
                        var i = 0;
                        if(e.test(t.filter || "")) i = parseFloat(RegExp.$1) / 100;
                        return i
                    }
                };
            return function(e, n) {
                var r = e.currentStyle,
                    a = i[n];
                if(a) return a(r);
                else return r[t.__getStyleName(n)] || ""
            }
        }();
        t.__setStyleValue = function() {
            var e = {
                opacity: function(t, e) {
                    t.style.filter = "alpha(opacity=" + 100 * e + ")"
                }
            };
            return function(i, n, r) {
                var a = e[n];
                if(a) a(i, r);
                else i.style[t.__getStyleName(n)] = r
            }
        }();
        t.__appendCSSText = function(t, e) {
            var i = t.styleSheet,
                n = i.rules.length,
                r = e.split(/[\{\}]/);
            i.addRule(r[0], r[1], n);
            return i.rules[n]
        }
    });
    if("trident" === e._$KERNEL.engine && e._$KERNEL.release <= "3.0") I$(309, function() {
        t.__getAttribute = t.__getAttribute._$aop(null, function(t) {
            var e = t.args;
            if("maxlength" == e[1] && 2147483647 == t.value) t.value = null
        })
    });
    if("trident" === e._$KERNEL.engine && e._$KERNEL.release <= "2.0") I$(310, function() {
        t.__fullScreen = function(t, e) {
            var i = t.style;
            i.width = e.scrollWidth + "px";
            i.height = e.scrollHeight + "px"
        };
        t.__mask = function() {
            var e = {};
            t.__unmask = function(t) {
                var i = t.id,
                    n = e[i];
                if(n) {
                    delete e[i];
                    n.parentNode.removeChild(n)
                }
            };
            return function(t) {
                var i = t.id,
                    n = e[i];
                if(!n) {
                    n = document.createElement("iframe");
                    n.style.position = "absolute";
                    e[i] = n
                }
                var r = n.style,
                    a = t.style;
                r.top = (parseInt(a.top) || 0) + "px";
                r.left = (parseInt(a.left) || 0) + "px";
                r.width = t.offsetWidth + "px";
                r.height = t.offsetHeight + "px";
                t.insertAdjacentElement("beforeBegin", n);
                return n
            }
        }()
    });
    if("gecko" === e._$KERNEL.engine) I$(311, function() {
        if(!e._$SUPPORT.css3d) e._$SUPPORT.css3d = "MozPerspective" in document.body.style;
        if(!("insertAdjacentElement" in document.body)) HTMLElement.prototype.insertAdjacentElement = function(t, e) {
            if(t && e) switch(t) {
                case "beforeEnd":
                    this.appendChild(e);
                    return;
                case "beforeBegin":
                    this.parentNode.insertBefore(e, this);
                    return;
                case "afterBegin":
                    !this.firstChild ? this.appendChild(e) : this.insertBefore(e, this.firstChild);
                    return;
                case "afterEnd":
                    !this.nextSibling ? this.parentNode.appendChild(e) : this.parentNode.insertBefore(e, this.nextSibling);
                    return
            }
        };
        if(!("innerText" in document.body)) {
            HTMLElement.prototype["__defineGetter__"]("innerText", function() {
                return this.textContent
            });
            HTMLElement.prototype["__defineSetter__"]("innerText", function(t) {
                this.textContent = t
            })
        }
    });
    return t
}, 297, 148, 4);
I$(3, function(t, e, i, n, r, a, s, o, l, c) {
    var u, d = {},
        h = {},
        f = {},
        p = document.createDocumentFragment();
    if(!document.head) document.head = document.getElementsByTagName("head")[0] || document.body;
    s._$id = d._$id = function(t) {
        t = s._$get(t);
        if(t) {
            var e = t.id ? t.id : "auto-id-" + i._$uniqueID();
            if(!("id" in t)) h[e] = t;
            t.id = e;
            if(!s._$get(e)) f[e] = t;
            return e
        }
    };
    s._$get = function(t) {
        var e = h["" + t];
        if(e) return e;
        if(!i._$isString(t) && !i._$isNumber(t)) return t;
        var e = document.getElementById(t);
        if(!e) e = a.__getElementById(p, t);
        if(e) delete f[t];
        return e || f[t]
    };
    s._$getChildren = d._$getChildren = function(t, e) {
        t = s._$get(t);
        if(!t) return null;
        var n = a.__getChildren(t);
        if(e) i._$reverseEach(n, function(t, i, n) {
            if(!s._$hasClassName(t, e)) n.splice(i, 1)
        });
        return n
    };
    s._$getByClassName = d._$getByClassName = function(t, e) {
        t = s._$get(t);
        return !t ? null : a.__getElementsByClassName(t, e.trim())
    };
    s._$getSibling = d._$getSibling = function() {
        var t = function() {
            return !0
        };
        return function(e, n) {
            e = s._$get(e);
            if(!e) return null;
            var r = {
                backward: !1,
                filter: t
            };
            if(i._$isFunction(n)) r.filter = n;
            else r = i._$fetch(r, n);
            for(var o = r.backward ? a.__previousSibling : a.__nextSibling;
                (e = o(e)) && !r.filter(e););
            return e
        }
    }();
    s._$getScrollViewPort = function(t) {
        t = s._$get(t);
        if(t) {
            t = t.parentNode;
            for(; t && !(t.scrollHeight > t.clientHeight);) t = t.parentNode;
            if(t) return t
        }
        var e = document.body.scrollHeight,
            i = document.documentElement.scrollHeight;
        return i >= e ? document.documentElement : document.body
    };
    s._$getPageBox = function() {
        var t = function(t) {
                var e = 0;
                i._$forEach(t, function(t) {
                    if(t)
                        if(!e) e = t;
                        else e = Math.min(e, t)
                });
                return e
            },
            e = [{
                main: "scroll",
                sub: ["Top", "Left"],
                func: function(t, e, i) {
                    return Math.max(e["scroll" + t], i["scroll" + t])
                }
            }, {
                main: "client",
                sub: ["Width", "Height"],
                func: function(e, i, n) {
                    return t([i["client" + e], i["offset" + e], n["client" + e], n["offset" + e]])
                }
            }, {
                main: "scroll",
                sub: ["Width", "Height"],
                func: function(t, e, i, n) {
                    return Math.max(n["client" + t], e["scroll" + t], i["scroll" + t])
                }
            }];
        return function(t) {
            var n = {},
                r = t || document,
                a = r.body,
                s = r.documentElement;
            i._$forEach(e, function(t) {
                var e = t.main;
                i._$forEach(t.sub, function(i) {
                    n[e + i] = t.func(i, a, s, n)
                })
            });
            return n
        }
    }();
    s._$getMaxBox = function(t, e) {
        var n = i._$merge({}, t),
            r = e.width / e.height,
            a = t.width / t.height;
        if(r > a && t.height > e.height) {
            n.height = e.height;
            n.width = n.height * a
        }
        if(r < a && t.width > e.width) {
            n.width = e.width;
            n.height = n.width / a
        }
        return n
    };
    s._$scrollTo = d._$scrollTo = function(t) {
        var e = s._$offset(t);
        window.scrollTo(e.x, e.y)
    };
    s._$align = function() {
        var t = /\s+/,
            e = {
                left: function() {
                    return 0
                },
                center: function(t, e) {
                    return(t.width - e.width) / 2
                },
                right: function(t, e) {
                    return t.width - e.width
                },
                top: function() {
                    return 0
                },
                middle: function(t, e) {
                    return(t.height - e.height) / 2
                },
                bottom: function(t, e) {
                    return t.height - e.height
                }
            };
        return function(i, n, r) {
            var a = {},
                s = (r || "").split(t),
                o = e[s[1]] || e.middle,
                l = e[s[0]] || e.center;
            a.top = o(i, n);
            a.left = l(i, n);
            return a
        }
    }();
    s._$offset = d._$offset = function() {
        var t = function(t) {
            return t == document.body || t == document.documentElement
        };
        return function(e, i) {
            e = s._$get(e);
            if(!e) return null;
            i = s._$get(i) || null;
            for(var n, r, a, o = e, l = {
                x: 0,
                y: 0
            }; o && o != i;) {
                n = t(o) || o == e;
                r = n ? 0 : o.scrollLeft;
                a = parseInt(s._$getStyle(o, "borderLeftWidth")) || 0;
                l.x += o.offsetLeft + a - r;
                r = n ? 0 : o.scrollTop;
                a = parseInt(s._$getStyle(o, "borderTopWidth")) || 0;
                l.y += o.offsetTop + a - r;
                o = o.offsetParent
            }
            return l
        }
    }();
    s._$fullScreen = d._$fullScreen = function(t) {
        t = s._$get(t);
        if(t) a.__fullScreen(t, s._$getPageBox())
    };
    s._$mask = d._$mask = function(t) {
        t = s._$get(t);
        if(t) {
            s._$id(t);
            return a.__mask(t)
        }
        return null
    };
    s._$unmask = d._$unmask = function(t) {
        t = s._$get(t);
        if(t) {
            s._$id(t);
            return a.__unmask(t)
        }
        return null
    };
    s._$create = function() {
        var t = {
            a: {
                href: "#",
                hideFocus: !0
            },
            style: {
                type: "text/css"
            },
            link: {
                type: "text/css",
                rel: "stylesheet"
            },
            iframe: {
                frameBorder: 0
            },
            script: {
                defer: !0,
                type: "text/javascript"
            }
        };
        return function(e, n, r) {
            var a = document.createElement(e),
                o = t[e.toLowerCase()];
            i._$merge(a, o);
            if(n) a.className = n;
            r = s._$get(r);
            if(r) r.appendChild(a);
            else if(!o) p.appendChild(a);
            return a
        }
    }();
    s._$createXFrame = function() {
        var t = function() {
                if(location.hostname == document.domain) return "about:blank";
                else return 'javascript:(function(){document.open();document.domain="' + document.domain + '";document.close();})();'
            },
            e = function(t) {
                t = t.trim();
                if(!t) return s._$create("iframe");
                var e;
                try {
                    e = document.createElement('<iframe name="' + t + '"></iframe>');
                    e.frameBorder = 0
                } catch(i) {
                    e = s._$create("iframe");
                    e.name = t
                }
                return e
            };
        return function(r) {
            r = r || o;
            var a = e(r.name || "");
            if(!r.visible) a.style.display = "none";
            if(i._$isFunction(r.onload)) n._$addEvent(a, "load", function(t) {
                if(a.src) {
                    n._$clearEvent(a, "load");
                    r.onload(t)
                }
            });
            var l = r.parent;
            if(i._$isFunction(l)) try {
                l(a)
            } catch(t) {} else(s._$get(l) || document.body).appendChild(a);
            var c = r.src || t();
            window.setTimeout(function() {
                a.src = c
            }, 0);
            return a
        }
    }();
    s._$remove = d._$remove = function() {
        var t = {
                img: function(t) {
                    t.src = e._$BLANK_IMAGE
                },
                iframe: function(t) {
                    t.src = "about:blank"
                }
            },
            r = function(e, n) {
                if(n) {
                    if(e.getElementsByTagName) i._$forEach(e.getElementsByTagName(n), r)
                } else {
                    var a = (e.tagName || "").toLowerCase(),
                        s = t[a];
                    if(s) s(e)
                }
            };
        return function(t) {
            t = s._$get(t);
            if(t) {
                if(!arguments[1]) n._$clearEvent(t);
                r(t);
                r(t, "img");
                r(t, "iframe");
                if(t.parentNode) t.parentNode.removeChild(t)
            }
        }
    }();
    s._$removeByEC = d._$removeByEC = function(t) {
        t = s._$get(t);
        if(t) try {
            p.appendChild(t)
        } catch(t) {
            console.error(t)
        }
    };
    s._$clearChildren = d._$clearChildren = function(t) {
        t = s._$get(t);
        if(t) i._$reverseEach(t.childNodes, function(t) {
            s._$remove(t)
        })
    };
    s._$wrapInline = d._$wrapInline = function() {
        var t, e = /\s+/,
            i = function() {
                if(!t) {
                    t = s._$pushCSSText(".#<uispace>{position:relative;zoom:1;}.#<uispace>-show{position:absolute;top:0;left:100%;cursor:text;white-space:nowrap;overflow:hidden;}");
                    s._$dumpCSSText()
                }
            };
        return function(n, r) {
            n = s._$get(n);
            if(!n) return null;
            i();
            r = r || o;
            var a = n.parentNode;
            if(!s._$hasClassName(a, t)) {
                a = s._$create("span", t);
                n.insertAdjacentElement("beforeBegin", a);
                a.appendChild(n)
            }
            var l = r.nid || "",
                c = s._$getByClassName(a, l || t + "-show")[0];
            if(!c) {
                var u = ((r.clazz || "") + " " + l).trim();
                u = t + "-show" + (!u ? "" : " ") + u;
                c = s._$create(r.tag || "span", u);
                a.appendChild(c)
            }
            var u = r.clazz;
            if(u) {
                u = (u || "").trim().split(e)[0] + "-parent";
                s._$addClassName(a, u)
            }
            return c
        }
    }();
    s._$dataset = d._$dataset = function(t, e, n) {
        var r = s._$id(t);
        if(!r) return null;
        if(i._$isString(e)) return a.__dataset(s._$get(t), e, n);
        if(i._$isObject(e)) {
            var o = {};
            i._$forIn(e, function(t, e) {
                o[e] = s._$dataset(r, e, t)
            });
            return o
        }
        if(i._$isArray(e)) {
            var o = {};
            i._$forEach(e, function(t) {
                o[t] = s._$dataset(r, t)
            });
            return o
        }
        return null
    };
    s._$attr = d._$attr = function(t, e, i) {
        t = s._$get(t);
        if(!t) return "";
        if(void 0 !== i && t.setAttribute) t.setAttribute(e, i);
        return a.__getAttribute(t, e)
    };
    s._$html2node = function() {
        var t = /<(.*?)(?=\s|>)/i,
            e = {
                li: "ul",
                tr: "tbody",
                td: "tr",
                th: "tr",
                option: "select"
            };
        return function(i) {
            var n;
            if(t.test(i)) n = e[(RegExp.$1 || "").toLowerCase()] || "";
            var r = s._$create(n || "div");
            r.innerHTML = i;
            var a = s._$getChildren(r);
            return a.length > 1 ? r : a[0]
        }
    }();
    s._$dom2xml = d._$dom2xml = function(t) {
        t = s._$get(t);
        return !t ? "" : a.__serializeDOM2XML(t)
    };
    s._$xml2dom = function(t) {
        t = (t || "").trim();
        return !t ? null : a.__parseDOMFromXML(t)
    };
    s._$dom2object = d._$dom2object = function(t, e) {
        e = e || {};
        t = s._$get(t);
        if(!t) return e;
        var n = t.tagName.toLowerCase(),
            r = s._$getChildren(t);
        if(!r || !r.length) {
            e[n] = t.textContent || t.text || "";
            return e
        }
        var a = {};
        e[n] = a;
        i._$forEach(r, function(t) {
            s._$dom2object(t, a)
        });
        return e
    };
    s._$xml2object = function(t) {
        try {
            return s._$dom2object(s._$xml2dom(t))
        } catch(t) {
            return null
        }
    };
    s._$text2type = function() {
        var t = {
            xml: function(t) {
                return s._$xml2dom(t)
            },
            json: function(t) {
                try {
                    return JSON.parse(t)
                } catch(t) {
                    return null
                }
            },
            dft: function(t) {
                return t
            }
        };
        return function(e, i) {
            i = (i || "").toLowerCase();
            return(t[i] || t.dft)(e || "")
        }
    }();
    s._$style = d._$style = function(t, e) {
        t = s._$get(t);
        if(t) i._$loop(e, function(e, i) {
            s._$setStyle(t, i, e)
        })
    };
    s._$setStyle = d._$setStyle = function(t, e, i) {
        t = s._$get(t);
        if(t) a.__setStyleValue(t, e, a.__processCSSText(i))
    };
    s._$getStyle = d._$getStyle = function(t, e) {
        t = s._$get(t);
        return !t ? "" : a.__getStyleValue(t, e)
    };
    s._$addScript = function(t) {
        try {
            t = t.trim();
            if(t) return new Function(t)()
        } catch(t) {
            console.error(t.message);
            console.error(t.stack)
        }
    };
    s._$addStyle = function() {
        var t = /[\s\r\n]+/gi;
        return function(e) {
            e = (e || "").replace(t, " ").trim();
            var i = null;
            if(e) {
                i = s._$create("style");
                document.head.appendChild(i);
                a.__injectCSSText(i, a.__processCSSText(e))
            }
            return i
        }
    }();
    s._$pushCSSText = function() {
        var t = /#<(.*?)>/g; + new Date;
        return function(e, n) {
            if(!u) u = [];
            var r = "auto-" + i._$uniqueID(),
                a = i._$merge({
                    uispace: r
                }, n);
            u.push(e.replace(t, function(t, e) {
                return a[e] || t
            }));
            return r
        }
    }();
    s._$dumpCSSText = function() {
        if(u) {
            s._$addStyle(u.join(" "));
            u = null
        }
    };
    s._$appendCSSText = d._$appendCSSText = function(t, e) {
        t = s._$get(t);
        return !t ? null : a.__appendCSSText(t, a.__processCSSText(e))
    };
    s._$addClassName = d._$addClassName = function(t, e) {
        t = s._$get(t);
        if(t) a.__processClassName(t, "add", e)
    };
    s._$delClassName = d._$delClassName = function(t, e) {
        t = s._$get(t);
        if(t) a.__processClassName(t, "remove", e)
    };
    s._$replaceClassName = d._$replaceClassName = function(t, e, i) {
        t = s._$get(t);
        if(t) a.__processClassName(t, "replace", e, i)
    };
    s._$hasClassName = d._$hasClassName = function(t, e) {
        t = s._$get(t);
        if(t) return a.__hasClassName(t, e);
        else return !1
    };
    s._$matrix = function(t) {
        t = (t || "").trim();
        return a.__getCSSMatrix(t)
    };
    s._$css3d = d._$css3d = function(t, e, i) {
        t = s._$get(t);
        if(t) {
            var n = a.__processTransformValue(e, i);
            if(n) s._$setStyle(t, "transform", n)
        }
    };
    r._$merge(d);
    if(!0) t.copy(t.P("nej.e"), s);
    return s
}, 129, 131, 4, 6, 132, 133);
I$(1, function(t, e, i, n, r, a) {
    i._$klass = function() {
        var t = function() {
                return "[object Function]" !== n.toString.call(arguments[0])
            },
            i = function(t, i) {
                for(; i;) {
                    var n = i.prototype,
                        r = e.__forIn(n, function(e) {
                            return t === e
                        });
                    if(null != r) return {
                        name: r,
                        klass: i
                    };
                    i = i._$super
                }
            };
        return function() {
            var n = function() {
                return this.__init.apply(this, arguments)
            };
            n.prototype.__init = r;
            n._$extend = function(n, r) {
                if(!t(n)) {
                    var a = this;
                    if(r !== !1) e.__forIn(n, function(e, i) {
                        if(!t(e)) a[i] = e
                    });
                    this._$super = n;
                    var s = function() {};
                    s.prototype = n.prototype;
                    this.prototype = new s;
                    this.prototype.constructor = this;
                    var o = [],
                        l = {},
                        c = function(t, e) {
                            var n = i(t, e);
                            if(n) {
                                if(o[o.length - 1] != n.name) o.push(n.name);
                                l[n.name] = n.klass._$super;
                                return n.name
                            }
                        };
                    this.prototype.__super = function() {
                        var t = o[o.length - 1],
                            e = arguments.callee.caller;
                        if(!t) t = c(e, this.constructor);
                        else {
                            var i = l[t].prototype;
                            if(!i.hasOwnProperty(e) || e != i[t]) t = c(e, this.constructor);
                            else l[t] = l[t]._$super
                        }
                        var n = l[t].prototype[t].apply(this, arguments);
                        if(t == o[o.length - 1]) {
                            o.pop();
                            delete l[t]
                        }
                        return n
                    };
                    if(!0) {
                        var u = this.prototype;
                        u.__supInit = u.__super;
                        u.__supReset = u.__super;
                        u.__supDestroy = u.__super;
                        u.__supInitNode = u.__super;
                        u.__supDoBuild = u.__super;
                        u.__supOnShow = u.__super;
                        u.__supOnHide = u.__super;
                        u.__supOnRefresh = u.__super;
                        this._$supro = n.prototype
                    }
                    return this.prototype
                }
            };
            return n
        }
    }();
    if(!0) {
        t.C = i._$klass;
        t.copy(this.NEJ, t)
    }
    return i
}, 129, 130);
I$(19, function(t, e, i, n, r, a, s, o) {
    var l;
    r._$$EventTarget = e._$klass();
    l = r._$$EventTarget.prototype;
    r._$$EventTarget._$allocate = function(t) {
        t = t || {};
        var e = !!this.__pool && this.__pool.shift();
        if(!e) {
            e = new this(t);
            this.__inst__ = (this.__inst__ || 0) + 1
        }
        e.__reset(t);
        return e
    };
    r._$$EventTarget._$recycle = function() {
        var t = function(t, e, i) {
            t._$recycle();
            i.splice(e, 1)
        };
        return function(e) {
            if(!e) return null;
            if(!n._$isArray(e)) {
                if(!(e instanceof this)) {
                    var i = e.constructor;
                    if(i._$recycle) i._$recycle(e);
                    return null
                }
                if(e == this.__instance) delete this.__instance;
                if(e == this.__inctanse) delete this.__inctanse;
                e.__destroy();
                if(!this.__pool) this.__pool = [];
                if(n._$indexOf(this.__pool, e) < 0) this.__pool.push(e);
                return null
            }
            n._$reverseEach(e, t, this)
        }
    }();
    r._$$EventTarget._$getInstance = function(t) {
        if(!this.__instance) this.__instance = this._$allocate(t);
        return this.__instance
    };
    r._$$EventTarget._$getInstanceWithReset = function(t, e) {
        if(e && this.__inctanse) {
            this.__inctanse._$recycle();
            delete this.__inctanse
        }
        if(!this.__inctanse) this.__inctanse = this._$allocate(t);
        else this.__inctanse.__reset(t);
        return this.__inctanse
    };
    l.__init = function() {
        this.__events = {};
        this.__events_dom = {};
        this.id = n._$uniqueID()
    };
    l.__reset = function(t) {
        this._$batEvent(t)
    };
    l.__destroy = function() {
        this._$clearEvent();
        this.__doClearDomEvent()
    };
    l.__doInitDomEvent = function() {
        var t = function(t) {
            if(t && !(t.length < 3)) {
                this.__events_dom["de-" + n._$uniqueID()] = t;
                i._$addEvent.apply(i, t);
            }
        };
        return function(e) {
            n._$forEach(e, t, this)
        }
    }();
    l.__doClearDomEvent = function() {
        var t = function(t, e, n) {
            delete n[e];
            i._$delEvent.apply(i, t)
        };
        return function() {
            n._$loop(this.__events_dom, t)
        }
    }();
    l.__doClearComponent = function(t) {
        t = t || s;
        n._$loop(this, function(e, i, n) {
            if(e && e._$recycle && !t(e)) {
                delete n[i];
                e._$recycle()
            }
        })
    };
    l._$recycle = function() {
        this.constructor._$recycle(this)
    };
    l._$hasEvent = function(t) {
        var t = (t || "").toLowerCase(),
            e = this.__events[t];
        return !!e && e !== s
    };
    l._$delEvent = function(t, e) {
        var t = (t || "").toLowerCase(),
            i = this.__events[t];
        if(n._$isArray(i)) {
            n._$reverseEach(i, function(t, i, n) {
                if(t == e) n.splice(i, 1)
            });
            if(!i.length) delete this.__events[t]
        } else if(i == e) delete this.__events[t]
    };
    l._$setEvent = function(t, e) {
        if(t && n._$isFunction(e)) this.__events[t.toLowerCase()] = e
    };
    l._$batEvent = function() {
        var t = function(t, e) {
            this._$setEvent(e, t)
        };
        return function(e) {
            n._$loop(e, t, this)
        }
    }();
    l._$clearEvent = function() {
        var t = function(t, e) {
            this._$clearEvent(e)
        };
        return function(e) {
            var e = (e || "").toLowerCase();
            if(e) delete this.__events[e];
            else n._$loop(this.__events, t, this)
        }
    }();
    l._$addEvent = function(t, e) {
        if(t && n._$isFunction(e)) {
            t = t.toLowerCase();
            var i = this.__events[t];
            if(i) {
                if(!n._$isArray(i)) this.__events[t] = [i];
                this.__events[t].push(e)
            } else this.__events[t] = e
        }
    };
    l._$dispatchEvent = function(t) {
        var t = (t || "").toLowerCase(),
            e = this.__events[t];
        if(e) {
            var i = o.slice.call(arguments, 1);
            if(n._$isArray(e)) n._$forEach(e, function(t) {
                if(!1) t.apply(this, i);
                else try {
                    t.apply(this, i)
                } catch(t) {
                    console.error(t.message);
                    console.error(t.stack)
                }
            }, this);
            else e.apply(this, i)
        }
    };
    if(!0) {
        r._$$Event = r._$$EventTarget;
        t.copy(t.P("nej.ut"), r)
    }
    return r
}, 129, 1, 6, 4);
! function() {
    if("undefined" == typeof TrimPath) {
        TrimPath = {};
        if("undefined" != typeof exports) TrimPath = exports
    }
    var t, e, i, n = {},
        r = [],
        a = /\s+/g,
        s = +new Date,
        o = function() {
            var t = /^\s*[\[\{'"].*?[\]\}'"]\s*$/,
                e = /[\&\|\<\>\+\-\*\/\%\,\(\)\[\]\?\:\!\=\;]/,
                n = /^(?:defined|null|undefined|true|false|instanceof|new|this|typeof|\$v|[\d]+)$/i,
                r = /^new\s+/,
                a = /['"]/,
                s = function(e) {
                    if(!t.test(e)) {
                        e = e.split(".")[0].trim();
                        if(e && !a.test(e)) {
                            e = e.replace(r, "");
                            try {
                                if(n.test(e)) return;
                                i[e] = 1
                            } catch(t) {}
                        }
                    }
                };
            return function(i) {
                i = i || "";
                if(i && !t.test(i))
                    for(var n = i.split(e), r = 0, a = n.length; r < a; r++) s(n[r])
            }
        }(),
        l = function(t) {
            if("in" != t[2]) throw "bad for loop statement: " + t.join(" ");
            r.push(t[1]);
            o(t[3]);
            return "var __HASH__" + t[1] + " = " + t[3] + "," + t[1] + "," + t[1] + "_count=0;if (!!__HASH__" + t[1] + ")for(var " + t[1] + "_key in __HASH__" + t[1] + "){" + t[1] + " = __HASH__" + t[1] + "[" + t[1] + "_key];if (typeof(" + t[1] + ')=="function") continue;' + t[1] + "_count++;"
        },
        c = function() {
            var t = r[r.length - 1];
            return "}; if(!__HASH__" + t + "||!" + t + "_count){"
        },
        u = function() {
            r.pop();
            return "};"
        },
        d = function(t) {
            if("as" != t[2]) throw "bad for list loop statement: " + t.join(" ");
            var e = t[1].split("..");
            if(e.length > 1) {
                o(e[0]);
                o(e[1]);
                return "for(var " + t[3] + "," + t[3] + "_index=0," + t[3] + "_beg=" + e[0] + "," + t[3] + "_end=" + e[1] + "," + t[3] + "_length=parseInt(" + t[3] + "_end-" + t[3] + "_beg+1);" + t[3] + "_index<" + t[3] + "_length;" + t[3] + "_index++){" + t[3] + " = " + t[3] + "_beg+" + t[3] + "_index;"
            } else {
                o(t[1]);
                return "for(var __LIST__" + t[3] + " = " + t[1] + "," + t[3] + "," + t[3] + "_index=0," + t[3] + "_length=__LIST__" + t[3] + ".length;" + t[3] + "_index<" + t[3] + "_length;" + t[3] + "_index++){" + t[3] + " = __LIST__" + t[3] + "[" + t[3] + "_index];"
            }
        },
        h = function(t) {
            if(t && t.length) {
                t.shift();
                var e = t[0].split("(")[0];
                return "var " + e + " = function" + t.join("").replace(e, "") + "{var __OUT=[];"
            }
        },
        f = function(t) {
            if(!t[1]) throw "bad include statement: " + t.join(" ");
            return 'if (typeof inline == "function"){__OUT.push(inline('
        },
        p = function(t, e) {
            o(e.slice(1).join(" "));
            return t
        },
        _ = function(t) {
            return p("if(", t)
        },
        m = function(t) {
            return p("}else if(", t)
        },
        g = function(t) {
            return p("var ", t)
        };
    e = {
        blk: /^\{(cdata|minify|eval)/i,
        tag: "forelse|for|list|if|elseif|else|var|macro|break|notrim|trim|include",
        def: {
            if: {
                pfix: _,
                sfix: "){",
                pmin: 1
            },
            else: {
                pfix: "}else{"
            },
            elseif: {
                pfix: m,
                sfix: "){",
                pdft: "true"
            },
            "/if": {
                pfix: "}"
            },
            for: {
                pfix: l,
                pmin: 3
            },
            forelse: {
                pfix: c
            },
            "/for": {
                pfix: u
            },
            list: {
                pfix: d,
                pmin: 3
            },
            "/list": {
                pfix: "};"
            },
            break: {
                pfix: "break;"
            },
            var: {
                pfix: g,
                sfix: ";"
            },
            macro: {
                pfix: h
            },
            "/macro": {
                pfix: 'return __OUT.join("");};'
            },
            trim: {
                pfix: function() {
                    t = !0
                }
            },
            "/trim": {
                pfix: function() {
                    t = null
                }
            },
            inline: {
                pfix: f,
                pmin: 1,
                sfix: "));}"
            }
        },
        ext: {
            seed: function(t) {
                return(t || "") + "" + s
            },
            default: function(t, e) {
                return t || e
            }
        }
    };
    var v = function() {
            var t = /\\([\{\}])/g;
            return function(i, n) {
                i = i.replace(t, "$1");
                var r = i.slice(1, -1).split(a),
                    s = e.def[r[0]];
                if(s) {
                    if(s.pmin && s.pmin >= r.length) throw "Statement needs more parameters:" + i;
                    n.push(s.pfix && "string" != typeof s.pfix ? s.pfix(r) : s.pfix || "");
                    if(s.sfix) {
                        if(r.length <= 1) {
                            if(s.pdft) n.push(s.pdft)
                        } else
                            for(var o = 1, l = r.length; o < l; o++) {
                                if(o > 1) n.push(" ");
                                n.push(r[o])
                            }
                        n.push(s.sfix)
                    }
                } else b(i, n)
            }
        }(),
        y = function(t, e) {
            if(t && t.length)
                if(1 != t.length) {
                    var i = t.pop().split(":");
                    e.push("__MDF['" + i.shift() + "'](");
                    y(t, e);
                    if(i.length > 0) {
                        var n = i.join(":");
                        o(n);
                        e.push("," + n)
                    }
                    e.push(")")
                } else {
                    var r = t.pop();
                    o(r);
                    e.push("" == r ? '""' : r)
                }
        },
        b = function(e, i) {
            if(e) {
                var n = e.split("\n");
                if(n && n.length)
                    for(var r, a = 0, s = n.length; a < s; a++) {
                        r = n[a];
                        if(t) {
                            r = r.trim();
                            if(!r) continue
                        }
                        x(r, i);
                        if(t && a < s - 1) i.push("__OUT.push('\\n');")
                    }
            }
        },
        x = function() {
            var t = /\|\|/g,
                e = /#@@#/g;
            return function(i, n) {
                for(var r, a, s, o, l, c = "}", u = -1, d = i.length; u + c.length < d;) {
                    r = "${";
                    a = "}";
                    s = i.indexOf(r, u + c.length);
                    if(s < 0) break;
                    if("%" == i.charAt(s + 2)) {
                        r = "${%";
                        a = "%}"
                    }
                    o = i.indexOf(a, s + r.length);
                    if(o < 0) break;
                    $(i.substring(u + c.length, s), n);
                    l = i.substring(s + r.length, o).replace(t, "#@@#").split("|");
                    for(var h = 0, f = l.length; h < f; l[h] = l[h].replace(e, "||"), h++);
                    n.push("__OUT.push(");
                    y(l, n);
                    n.push(");");
                    c = a;
                    u = o
                }
                $(i.substring(u + c.length), n)
            }
        }(),
        $ = function() {
            var t = {
                    r: /\n|\\|\'/g,
                    "\n": "\\n",
                    "\\": "\\\\",
                    "'": "\\'"
                },
                e = function(e) {
                    return(e || "").replace(t.r, function(e) {
                        return t[e] || e
                    })
                };
            return function(t, i) {
                if(t) i.push("__OUT.push('" + e(t) + "');")
            }
        }(),
        w = function() {
            var t = /\t/g,
                n = /\n/g,
                r = /\r\n?/g,
                s = function(t, e) {
                    for(var i = t.indexOf("}", e + 1);
                        "\\" == t.charAt(i - 1);) i = t.indexOf("}", i + 1);
                    return i
                },
                o = function() {
                    var t = [],
                        e = arguments[0];
                    for(var i in e) {
                        i = (i || "").trim();
                        if(i) t.push(i + "=$v('" + i + "')");
                        else;
                    }
                    return t.length > 0 ? "var " + t.join(",") + ";" : ""
                };
            return function(l) {
                i = {};
                l = l.replace(r, "\n").replace(t, "    ");
                var c = ["if(!__CTX) return '';", ""];
                c.push("function $v(__NAME){var v = __CTX[__NAME];return v==null?window[__NAME]:v;};");
                c.push("var defined=function(__NAME){return __CTX[__NAME]!=null;},");
                c.push("__OUT=[];");
                for(var u, d, h, f, p, _, m, g, y = -1, x = l.length; y + 1 < x;) {
                    u = y;
                    u = l.indexOf("{", u + 1);
                    for(; u >= 0;) {
                        d = s(l, u);
                        h = l.substring(u, d);
                        f = h.match(e.blk);
                        if(f) {
                            p = f[1].length + 1;
                            _ = l.indexOf("}", u + p);
                            if(_ >= 0) {
                                m = _ - u - p <= 0 ? "{/" + f[1] + "}" : h.substr(p + 1);
                                p = l.indexOf(m, _ + 1);
                                if(p >= 0) {
                                    b(l.substring(y + 1, u), c);
                                    g = l.substring(_ + 1, p);
                                    switch(f[1]) {
                                        case "cdata":
                                            $(g, c);
                                            break;
                                        case "minify":
                                            $(g.replace(n, " ").replace(a, " "), c);
                                            break;
                                        case "eval":
                                            if(g) c.push("__OUT.push((function(){" + g + "})());")
                                    }
                                    u = y = p + m.length - 1
                                }
                            }
                        } else if("$" != l.charAt(u - 1) && "\\" != l.charAt(u - 1) && 0 == h.substr("/" == h.charAt(1) ? 2 : 1).search(e.tag)) break;
                        u = l.indexOf("{", u + 1)
                    }
                    if(u < 0) break;
                    d = s(l, u);
                    if(d < 0) break;
                    b(l.substring(y + 1, u), c);
                    v(l.substring(u, d + 1), c);
                    y = d
                }
                b(l.substring(y + 1), c);
                c.push(';return __OUT.join("");');
                c[1] = o(i);
                i = null;
                return new Function("__CTX", "__MDF", c.join(""))
            }
        }();
    TrimPath.seed = function() {
        return s
    };
    TrimPath.merge = function() {
        var t = {};
        TrimPath.dump = function() {
            return {
                func: t,
                text: n
            }
        };
        return function(i, r, a) {
            try {
                r = r || {};
                if(!t[i] && !n[i]) return "";
                if(!t[i]) {
                    t[i] = w(n[i]);
                    delete n[i]
                }
                if(a)
                    for(var s in e.ext)
                        if(!a[s]) a[s] = e.ext[s];
                return t[i](r, a || e.ext)
            } catch(t) {
                return t.message || ""
            }
        }
    }();
    TrimPath.parse = function() {
        var t = +new Date;
        return function(e, i) {
            if(!e) return "";
            i = i || "ck_" + t++;
            n[i] = e;
            return i
        }
    }()
}();
I$(15, function(t, e, i, n, r, a, s, o, l) {
    var c = {};
    a._$seed = TrimPath.seed;
    a._$get = function() {
        var t = function(t) {
            return !a._$getTextTemplate ? "" : a._$getTextTemplate(t)
        };
        return function(i, n, r) {
            n = n || {};
            n.inline = t;
            r = e._$merge({}, c, r);
            r.rand = e._$uniqueID;
            r.format = e._$format;
            r.escape = e._$escape;
            r.inline = t;
            return TrimPath.merge(i, n, r)
        }
    }();
    a._$add = function(t, e) {
        if(!t) return "";
        var n, r = i._$get(t);
        if(r) {
            n = r.id;
            t = r.value || r.innerText;
            if(!e) i._$remove(r)
        }
        return TrimPath.parse(t, n)
    };
    a._$addTemplate = function(t, e) {
        return TrimPath.parse(t, e)
    };
    a._$render = function(t, e, n, r) {
        t = i._$get(t);
        if(t) t.innerHTML = a._$get(e, n, r)
    };
    a._$extend = function(t) {
        e._$merge(c, t)
    };
    n._$merge({
        _$render: a._$render
    });
    if(!0) {
        var u = t.P("nej.e");
        u._$addHtmlTemplate = a._$add;
        u._$getHtmlTemplate = a._$get;
        u._$getHtmlTemplateSeed = a._$seed;
        u._$renderHtmlTemplate = a._$render;
        u._$registJSTExt = a._$extend
    }
    return a
}, 129, 4, 3, 132, 151);
I$(149, function(t, e, i, n, r, a, s, o, l, c) {
    var u;
    s._$$CustomEvent = e._$klass();
    u = s._$$CustomEvent._$extend(a._$$EventTarget);
    u.__init = function() {
        this.__cache = {};
        this.__super()
    };
    u.__reset = function(t) {
        this.__super(t);
        this.__element = i._$get(t.element) || window;
        this.__doEventInit(t.event);
        this.__doEventAPIEnhance();
        this._$dispatchEvent("oninit")
    };
    u.__destroy = function() {
        var t = function(t, e, i) {
            if(!r._$isArray(t)) r._$safeDelete(this.__element, e);
            delete i[e]
        };
        return function() {
            this.__super();
            r._$loop(this.__cache, t, this);
            delete this.__element
        }
    }();
    u.__isDelegate = function(t, e) {
        t = i._$get(t);
        return !(t !== this.__element || e && !this.__cache["on" + e])
    };
    u.__doEventInit = function(t) {
        if(!r._$isString(t)) {
            if(r._$isArray(t)) r._$forEach(t, this.__doEventInit, this)
        } else {
            var e = "on" + t;
            if(!this.__cache[e]) this.__cache[e] = this.__doEventDispatch._$bind(this, t);
            this.__doEventBind(t)
        }
    };
    u.__doEventBind = function(t) {
        var e = "on" + t,
            i = this.__element[e],
            n = this.__cache[e];
        if(i != n) {
            this.__doEventDelete(t);
            if(i && i != l) this.__doEventAdd(t, i);
            this.__element[e] = n
        }
    };
    u.__doEventAdd = function(t, e, i) {
        var n = this.__cache[t];
        if(!n) {
            n = [];
            this.__cache[t] = n
        }
        if(r._$isFunction(e)) !i ? n.push(e) : n.unshift(e)
    };
    u.__doEventDelete = function(t, e) {
        var i = this.__cache[t];
        if(i && i.length)
            if(e) r._$reverseEach(i, function(t, i, n) {
                if(e === t) {
                    n.splice(i, 1);
                    return !0
                }
            });
            else delete this.__cache[t]
    };
    u.__doEventDispatch = function(t, e) {
        e = e || {
                noargs: !0
            };
        if(e == o) e = {};
        e.type = t;
        this._$dispatchEvent("ondispatch", e);
        if(!e.stopped) r._$forEach(this.__cache[t], function(t) {
            if(!1) t(e);
            else try {
                t(e)
            } catch(t) {
                console.error(t.message);
                console.error(t.stack)
            }
        })
    };
    u.__doEventAPIEnhance = function() {
        var e = function(t) {
                var e = t.args,
                    i = e[1].toLowerCase();
                if(this.__isDelegate(e[0], i)) {
                    t.stopped = !0;
                    this.__doEventBind(i);
                    this.__doEventAdd(i, e[2], e[3]);
                    this._$dispatchEvent("oneventadd", {
                        type: i,
                        listener: e[2]
                    })
                }
            },
            i = function(t) {
                var e = t.args,
                    i = e[1].toLowerCase();
                if(this.__isDelegate(e[0], i)) {
                    t.stopped = !0;
                    this.__doEventDelete(i, e[2])
                }
            },
            a = function(t) {
                var e = t.args,
                    i = (e[1] || "").toLowerCase();
                if(this.__isDelegate(e[0])) {
                    if(i) {
                        this.__doEventDelete(i);
                        return
                    }
                    r._$loop(this.__cache, function(t, e) {
                        if(r._$isArray(t)) this.__doEventDelete(e)
                    }, this)
                }
            },
            s = function(t) {
                var e = t.args,
                    i = e[1].toLowerCase();
                if(this.__isDelegate(e[0], i)) {
                    t.stopped = !0;
                    e[0]["on" + i].apply(e[0], e.slice(2))
                }
            };
        return function() {
            if(!this.__enhanced) {
                this.__enhanced = !0;
                n._$addEvent = n._$addEvent._$aop(e._$bind(this));
                n._$delEvent = n._$delEvent._$aop(i._$bind(this));
                n._$clearEvent = n._$clearEvent._$aop(a._$bind(this));
                n._$dispatchEvent = n._$dispatchEvent._$aop(s._$bind(this));
                if(!0) t.copy(t.P("nej.v"), n)
            }
        }
    }();
    if(!0) t.copy(t.P("nej.ut"), s);
    return s
}, 129, 1, 3, 6, 4, 19);
I$(477, function(t, e, i, n, r, a, s, o, l, c) {
    var u, d = 6e4;
    s._$$LoaderAbstract = e._$klass();
    u = s._$$LoaderAbstract._$extend(a._$$EventTarget);
    u.__init = function() {
        this.__super();
        this.__qopt = {
            onerror: this.__onQueueError._$bind(this),
            onload: this.__onQueueLoaded._$bind(this)
        };
        if(!this.constructor.__cache) this.constructor.__cache = {
            loaded: {}
        }
    };
    u.__reset = function(t) {
        this.__super(t);
        this.__version = t.version;
        this.__timeout = t.timeout;
        this.__qopt.version = this.__version;
        this.__qopt.timeout = this.__timeout
    };
    u.__delLoadData = function(t) {
        delete this.constructor.__cache[t]
    };
    u.__getLoadData = function(t) {
        return this.constructor.__cache[t]
    };
    u.__setLoadData = function(t, e) {
        this.constructor.__cache[t] = e
    };
    u.__getRequest = l;
    u.__doClearRequest = function(t) {
        n._$clearEvent(t)
    };
    u.__doRequest = function(t) {
        t.src = this.__url;
        document.head.appendChild(t)
    };
    u.__doClear = function() {
        var t = this.__getLoadData(this.__url);
        if(t) {
            window.clearTimeout(t.timer);
            this.__doClearRequest(t.request);
            delete t.bind;
            delete t.timer;
            delete t.request;
            this.__delLoadData(this.__url);
            this.__getLoadData("loaded")[this.__url] = !0
        }
    };
    u.__doCallback = function(t) {
        var e = this.__getLoadData(this.__url);
        if(e) {
            var i = e.bind;
            this.__doClear();
            if(i && i.length > 0)
                for(var n; i.length;) {
                    n = i.shift();
                    try {
                        n._$dispatchEvent(t, arguments[1])
                    } catch(t) {
                        if(!1) throw t;
                        console.error(t.message);
                        console.error(t.stack)
                    }
                    n._$recycle()
                }
        }
    };
    u.__onError = function(t) {
        this.__doCallback("onerror", t)
    };
    u.__onLoaded = function() {
        this.__doCallback("onload")
    };
    u.__doLoadQueue = function(t) {
        this.constructor._$allocate(this.__qopt)._$load(t)
    };
    u.__onQueueCheck = function(t) {
        var e = this.__getLoadData(this.__key);
        if(e) {
            if(t) e.error++;
            e.loaded++;
            if(!(e.loaded < e.total)) {
                this.__delLoadData(this.__key);
                this._$dispatchEvent(e.error > 0 ? "onerror" : "onload")
            }
        }
    };
    u.__onQueueError = function(t) {
        this.__onQueueCheck(!0)
    };
    u.__onQueueLoaded = function() {
        this.__onQueueCheck()
    };
    u._$load = function(t) {
        t = r._$absolute(t);
        if(t) {
            this.__url = t;
            if(this.__version) this.__url += (this.__url.indexOf("?") < 0 ? "?" : "&") + this.__version;
            if(!this.__getLoadData("loaded")[this.__url]) {
                var e, a = this.__getLoadData(this.__url);
                if(a) {
                    a.bind.unshift(this);
                    a.timer = window.clearTimeout(a.timer)
                } else {
                    e = this.__getRequest();
                    a = {
                        request: e,
                        bind: [this]
                    };
                    this.__setLoadData(this.__url, a);
                    n._$addEvent(e, "load", this.__onLoaded._$bind(this));
                    n._$addEvent(e, "error", this.__onError._$bind(this, {
                        code: i._$CODE_ERRSERV,
                        message: "无法加载指定资源文件[" + this.__url + "]！"
                    }))
                }
                if(0 != this.__timeout) a.timer = window.setTimeout(this.__onError._$bind(this, {
                    code: i._$CODE_TIMEOUT,
                    message: "指定资源文件[" + this.__url + "]载入超时！"
                }), this.__timeout || d);
                if(e) this.__doRequest(e);
                this._$dispatchEvent("onloading")
            } else {
                try {
                    this._$dispatchEvent("onload")
                } catch(t) {
                    if(!1) throw t;
                    console.error(t.message);
                    console.error(t.stack)
                }
                this._$recycle()
            }
        } else this._$dispatchEvent("onerror", {
            code: i._$CODE_NOTASGN,
            message: "请指定要载入的资源地址！"
        })
    };
    u._$queue = function(t) {
        if(t && t.length) {
            this.__key = r._$uniqueID();
            var e = {
                error: 0,
                loaded: 0,
                total: t.length
            };
            this.__setLoadData(this.__key, e);
            r._$forEach(t, function(t, i) {
                if(t) this.__doLoadQueue(t);
                else e.total--
            }, this);
            this._$dispatchEvent("onloading")
        } else this._$dispatchEvent("onerror", {
            code: i._$CODE_NOTASGN,
            message: "请指定要载入的资源队列！"
        })
    };
    return s
}, 129, 1, 131, 6, 4, 19);
I$(611, function(t, e, i, n, r, a) {
    i._$cookie = function() {
        var t = new Date,
            i = +t,
            r = 864e5,
            a = function(t) {
                var e = document.cookie,
                    i = "\\b" + t + "=",
                    n = e.search(i);
                if(n < 0) return "";
                n += i.length - 2;
                var r = e.indexOf(";", n);
                if(r < 0) r = e.length;
                return e.substring(n, r) || ""
            };
        return function(s, o) {
            if(void 0 === o) return a(s);
            if(e._$isString(o)) {
                if(o) {
                    document.cookie = s + "=" + o + ";";
                    return o
                }
                o = {
                    expires: -100
                }
            }
            o = o || n;
            var l = s + "=" + (o.value || "") + ";";
            delete o.value;
            if(void 0 !== o.expires) {
                t.setTime(i + o.expires * r);
                o.expires = t.toGMTString()
            }
            l += e._$object2string(o, ";");
            document.cookie = l
        }
    }();
    if(!0) t.copy(t.P("nej.j"), i);
    return i
}, 129, 4);
! function() {
    var t = !0,
        e = null;
    ! function(i) {
        function n(i) {
            if("bug-string-char-index" == i) return "a" != "a" [0];
            var n, r = "json" == i;
            if(r || "json-stringify" == i || "json-parse" == i) {
                if("json-stringify" == i || r) {
                    var a = c.stringify,
                        l = "function" == typeof a && u;
                    if(l) {
                        (n = function() {
                            return 1
                        }).toJSON = n;
                        try {
                            l = "0" === a(0) && "0" === a(new Number) && '""' == a(new String) && a(o) === s && a(s) === s && a() === s && "1" === a(n) && "[1]" == a([n]) && "[null]" == a([s]) && "null" == a(e) && "[null,null,null]" == a([s, o, e]) && '{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}' == a({
                                    a: [n, t, !1, e, "\0\b\n\f\r\t"]
                                }) && "1" === a(e, n) && "[\n 1,\n 2\n]" == a([1, 2], e, 1) && '"-271821-04-20T00:00:00.000Z"' == a(new Date(-864e13)) && '"+275760-09-13T00:00:00.000Z"' == a(new Date(864e13)) && '"-000001-01-01T00:00:00.000Z"' == a(new Date(-621987552e5)) && '"1969-12-31T23:59:59.999Z"' == a(new Date(-1))
                        } catch(t) {
                            l = !1
                        }
                    }
                    if(!r) return l
                }
                if("json-parse" == i || r) {
                    i = c.parse;
                    if("function" == typeof i) try {
                        if(0 === i("0") && !i(!1)) {
                            n = i('{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}');
                            var d = 5 == n.a.length && 1 === n.a[0];
                            if(d) {
                                try {
                                    d = !i('"\t"')
                                } catch(t) {}
                                if(d) try {
                                    d = 1 !== i("01")
                                } catch(t) {}
                            }
                        }
                    } catch(t) {
                        d = !1
                    }
                    if(!r) return d
                }
                return l && d
            }
        }
        var r, a, s, o = {}.toString,
            l = "function" == typeof define && define.amd,
            c = "object" == typeof exports && exports;
        c || l ? "object" == typeof JSON && JSON ? c ? (c.stringify = JSON.stringify, c.parse = JSON.parse) : c = JSON : l && (c = i.JSON = {}) : c = i.JSON || (i.JSON = {});
        var u = new Date(-0xc782b5b800cec);
        try {
            u = -109252 == u.getUTCFullYear() && 0 === u.getUTCMonth() && 1 === u.getUTCDate() && 10 == u.getUTCHours() && 37 == u.getUTCMinutes() && 6 == u.getUTCSeconds() && 708 == u.getUTCMilliseconds()
        } catch(t) {}
        if(!n("json")) {
            var d = n("bug-string-char-index");
            if(!u) var h = Math.floor,
                f = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334],
                p = function(t, e) {
                    return f[e] + 365 * (t - 1970) + h((t - 1969 + (e = +(e > 1))) / 4) - h((t - 1901 + e) / 100) + h((t - 1601 + e) / 400)
                };
            if(!(r = {}.hasOwnProperty)) r = function(t) {
                var i, n = {};
                if((n.__proto__ = e, n.__proto__ = {
                        toString: 1
                    }, n).toString != o) r = function(t) {
                    var i = this.__proto__,
                        t = t in (this.__proto__ = e, this);
                    this.__proto__ = i;
                    return t
                };
                else {
                    i = n.constructor;
                    r = function(t) {
                        var e = (this.constructor || i).prototype;
                        return t in this && !(t in e && this[t] === e[t])
                    }
                }
                n = e;
                return r.call(this, t)
            };
            var _ = {
                boolean: 1,
                number: 1,
                string: 1,
                undefined: 1
            };
            a = function(t, i) {
                var n, a, s, l = 0;
                (n = function() {
                    this.valueOf = 0
                }).prototype.valueOf = 0;
                a = new n;
                for(s in a) r.call(a, s) && l++;
                n = a = e;
                if(l) l = 2 == l ? function(t, e) {
                    var i, n = {},
                        a = "[object Function]" == o.call(t);
                    for(i in t) !(a && "prototype" == i) && !r.call(n, i) && (n[i] = 1) && r.call(t, i) && e(i)
                } : function(t, e) {
                    var i, n, a = "[object Function]" == o.call(t);
                    for(i in t) !(a && "prototype" == i) && r.call(t, i) && !(n = "constructor" === i) && e(i);
                    (n || r.call(t, i = "constructor")) && e(i)
                };
                else {
                    a = ["valueOf", "toString", "toLocaleString", "propertyIsEnumerable", "isPrototypeOf", "hasOwnProperty", "constructor"];
                    l = function(t, e) {
                        var i, n, s = "[object Function]" == o.call(t);
                        if(n = !s)
                            if(n = "function" != typeof t.constructor) {
                                n = typeof t.hasOwnProperty;
                                n = "object" == n ? !!t.hasOwnProperty : !_[n]
                            }
                        n = n ? t.hasOwnProperty : r;
                        for(i in t) !(s && "prototype" == i) && n.call(t, i) && e(i);
                        for(s = a.length; i = a[--s]; n.call(t, i) && e(i));
                    }
                }
                l(t, i)
            };
            if(!n("json-stringify")) {
                var m = {
                        92: "\\\\",
                        34: '\\"',
                        8: "\\b",
                        12: "\\f",
                        10: "\\n",
                        13: "\\r",
                        9: "\\t"
                    },
                    g = function(t, e) {
                        return("000000" + (e || 0)).slice(-t)
                    },
                    v = function(t) {
                        var e, i = '"',
                            n = 0,
                            r = t.length,
                            a = r > 10 && d;
                        for(a && (e = t.split("")); n < r; n++) {
                            var s = t.charCodeAt(n);
                            switch(s) {
                                case 8:
                                case 9:
                                case 10:
                                case 12:
                                case 13:
                                case 34:
                                case 92:
                                    i += m[s];
                                    break;
                                default:
                                    if(s < 32) {
                                        i += "\\u00" + g(2, s.toString(16));
                                        break
                                    }
                                    i += a ? e[n] : d ? t.charAt(n) : t[n]
                            }
                        }
                        return i + '"'
                    },
                    y = function(i, n, l, c, u, d, f) {
                        var _, m, b, x, $, w, k, S, C, T = n[i];
                        try {
                            T = n[i]
                        } catch(t) {}
                        if("object" == typeof T && T) {
                            _ = o.call(T);
                            if("[object Date]" == _ && !r.call(T, "toJSON"))
                                if(T > -1 / 0 && T < 1 / 0) {
                                    if(p) {
                                        b = h(T / 864e5);
                                        for(_ = h(b / 365.2425) + 1970 - 1; p(_ + 1, 0) <= b; _++);
                                        for(m = h((b - p(_, 0)) / 30.42); p(_, m + 1) <= b; m++);
                                        b = 1 + b - p(_, m);
                                        x = (T % 864e5 + 864e5) % 864e5;
                                        $ = h(x / 36e5) % 24;
                                        w = h(x / 6e4) % 60;
                                        k = h(x / 1e3) % 60;
                                        x %= 1e3
                                    } else {
                                        _ = T.getUTCFullYear();
                                        m = T.getUTCMonth();
                                        b = T.getUTCDate();
                                        $ = T.getUTCHours();
                                        w = T.getUTCMinutes();
                                        k = T.getUTCSeconds();
                                        x = T.getUTCMilliseconds()
                                    }
                                    T = (_ <= 0 || _ >= 1e4 ? (_ < 0 ? "-" : "+") + g(6, _ < 0 ? -_ : _) : g(4, _)) + "-" + g(2, m + 1) + "-" + g(2, b) + "T" + g(2, $) + ":" + g(2, w) + ":" + g(2, k) + "." + g(3, x) + "Z"
                                } else T = e;
                            else if("function" == typeof T.toJSON && ("[object Number]" != _ && "[object String]" != _ && "[object Array]" != _ || r.call(T, "toJSON"))) T = T.toJSON(i)
                        }
                        l && (T = l.call(n, i, T));
                        if(T === e) return "null";
                        _ = o.call(T);
                        if("[object Boolean]" == _) return "" + T;
                        if("[object Number]" == _) return T > -1 / 0 && T < 1 / 0 ? "" + T : "null";
                        if("[object String]" == _) return v("" + T);
                        if("object" == typeof T) {
                            for(i = f.length; i--;)
                                if(f[i] === T) throw TypeError();
                            f.push(T);
                            S = [];
                            n = d;
                            d += u;
                            if("[object Array]" == _) {
                                m = 0;
                                for(i = T.length; m < i; C || (C = t), m++) {
                                    _ = y(m, T, l, c, u, d, f);
                                    S.push(_ === s ? "null" : _)
                                }
                                i = C ? u ? "[\n" + d + S.join(",\n" + d) + "\n" + n + "]" : "[" + S.join(",") + "]" : "[]"
                            } else {
                                a(c || T, function(e) {
                                    var i = y(e, T, l, c, u, d, f);
                                    i !== s && S.push(v(e) + ":" + (u ? " " : "") + i);
                                    C || (C = t)
                                });
                                i = C ? u ? "{\n" + d + S.join(",\n" + d) + "\n" + n + "}" : "{" + S.join(",") + "}" : "{}"
                            }
                            f.pop();
                            return i
                        }
                    };
                c.stringify = function(t, e, i) {
                    var n, r, a;
                    if("function" == typeof e || "object" == typeof e && e)
                        if("[object Function]" == o.call(e)) r = e;
                        else if("[object Array]" == o.call(e)) {
                            a = {};
                            for(var s, l = 0, c = e.length; l < c; s = e[l++], ("[object String]" == o.call(s) || "[object Number]" == o.call(s)) && (a[s] = 1));
                        }
                    if(i)
                        if("[object Number]" == o.call(i)) {
                            if((i -= i % 1) > 0) {
                                n = "";
                                for(i > 10 && (i = 10); n.length < i; n += " ");
                            }
                        } else "[object String]" == o.call(i) && (n = i.length <= 10 ? i : i.slice(0, 10));
                    return y("", (s = {}, s[""] = t, s), r, a, n, "", [])
                }
            }
            if(!n("json-parse")) {
                var b, x, $ = String.fromCharCode,
                    w = {
                        92: "\\",
                        34: '"',
                        47: "/",
                        98: "\b",
                        116: "\t",
                        110: "\n",
                        102: "\f",
                        114: "\r"
                    },
                    k = function() {
                        b = x = e;
                        throw SyntaxError()
                    },
                    S = function() {
                        for(var i, n, r, a, s, o = x, l = o.length; b < l;) {
                            s = o.charCodeAt(b);
                            switch(s) {
                                case 9:
                                case 10:
                                case 13:
                                case 32:
                                    b++;
                                    break;
                                case 123:
                                case 125:
                                case 91:
                                case 93:
                                case 58:
                                case 44:
                                    i = d ? o.charAt(b) : o[b];
                                    b++;
                                    return i;
                                case 34:
                                    i = "@";
                                    for(b++; b < l;) {
                                        s = o.charCodeAt(b);
                                        if(s < 32) k();
                                        else if(92 == s) {
                                            s = o.charCodeAt(++b);
                                            switch(s) {
                                                case 92:
                                                case 34:
                                                case 47:
                                                case 98:
                                                case 116:
                                                case 110:
                                                case 102:
                                                case 114:
                                                    i += w[s];
                                                    b++;
                                                    break;
                                                case 117:
                                                    n = ++b;
                                                    for(r = b + 4; b < r; b++) {
                                                        s = o.charCodeAt(b);
                                                        s >= 48 && s <= 57 || s >= 97 && s <= 102 || s >= 65 && s <= 70 || k()
                                                    }
                                                    i += $("0x" + o.slice(n, b));
                                                    break;
                                                default:
                                                    k()
                                            }
                                        } else {
                                            if(34 == s) break;
                                            s = o.charCodeAt(b);
                                            for(n = b; s >= 32 && 92 != s && 34 != s;) s = o.charCodeAt(++b);
                                            i += o.slice(n, b)
                                        }
                                    }
                                    if(34 == o.charCodeAt(b)) {
                                        b++;
                                        return i
                                    }
                                    k();
                                default:
                                    n = b;
                                    if(45 == s) {
                                        a = t;
                                        s = o.charCodeAt(++b)
                                    }
                                    if(s >= 48 && s <= 57) {
                                        for(48 == s && (s = o.charCodeAt(b + 1), s >= 48 && s <= 57) && k(); b < l && (s = o.charCodeAt(b), s >= 48 && s <= 57); b++);
                                        if(46 == o.charCodeAt(b)) {
                                            for(r = ++b; r < l && (s = o.charCodeAt(r), s >= 48 && s <= 57); r++);
                                            r == b && k();
                                            b = r
                                        }
                                        s = o.charCodeAt(b);
                                        if(101 == s || 69 == s) {
                                            s = o.charCodeAt(++b);
                                            (43 == s || 45 == s) && b++;
                                            for(r = b; r < l && (s = o.charCodeAt(r), s >= 48 && s <= 57); r++);
                                            r == b && k();
                                            b = r
                                        }
                                        return +o.slice(n, b)
                                    }
                                    a && k();
                                    if("true" == o.slice(b, b + 4)) {
                                        b += 4;
                                        return t
                                    }
                                    if("false" == o.slice(b, b + 5)) {
                                        b += 5;
                                        return !1
                                    }
                                    if("null" == o.slice(b, b + 4)) {
                                        b += 4;
                                        return e
                                    }
                                    k()
                            }
                        }
                        return "$"
                    },
                    C = function(e) {
                        var i, n;
                        "$" == e && k();
                        if("string" == typeof e) {
                            if("@" == (d ? e.charAt(0) : e[0])) return e.slice(1);
                            if("[" == e) {
                                for(i = [];; n || (n = t)) {
                                    e = S();
                                    if("]" == e) break;
                                    if(n)
                                        if("," == e) {
                                            e = S();
                                            "]" == e && k()
                                        } else k();
                                    "," == e && k();
                                    i.push(C(e))
                                }
                                return i
                            }
                            if("{" == e) {
                                for(i = {};; n || (n = t)) {
                                    e = S();
                                    if("}" == e) break;
                                    if(n)
                                        if("," == e) {
                                            e = S();
                                            "}" == e && k()
                                        } else k();
                                    ("," == e || "string" != typeof e || "@" != (d ? e.charAt(0) : e[0]) || ":" != S()) && k();
                                    i[e.slice(1)] = C(S())
                                }
                                return i
                            }
                            k()
                        }
                        return e
                    },
                    T = function(t, e, i) {
                        i = E(t, e, i);
                        i === s ? delete t[e] : t[e] = i
                    },
                    E = function(t, e, i) {
                        var n, r = t[e];
                        if("object" == typeof r && r)
                            if("[object Array]" == o.call(r))
                                for(n = r.length; n--;) T(r, n, i);
                            else a(r, function(t) {
                                T(r, t, i)
                            });
                        return i.call(t, e, r)
                    };
                c.parse = function(t, i) {
                    var n, r;
                    b = 0;
                    x = "" + t;
                    n = C(S());
                    "$" != S() && k();
                    b = x = e;
                    return i && "[object Function]" == o.call(i) ? E((r = {}, r[""] = n, r), "", i) : n
                }
            }
        }
        l && define(function() {
            return c
        })
    }(this);
    return JSON
}();
I$(719, function(_m, _p, _o, _f, _r) {
    if("trident" === _m._$KERNEL.engine && "2.0" == _m._$KERNEL.release) I$(806, function() {
        JSON.parse = function() {
            var _isSafeJSON = function(t) {
                return !/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(t.replace(/"(\\.|[^"\\])*"/g, ""))
            };
            return JSON.parse._$aop(function(_event) {
                var _str = _event.args[0] || "";
                if(_str.length >= 5e5) {
                    _event.stopped = !0;
                    _event.value = eval("(" + _str + ")")
                }
            })
        }()
    });
    return JSON
}, 148);
I$(612, function() {
    return JSON
}, 719);
I$(469, function(t, e, i, n, r, a, s, o, l, c, u, d) {
    var h;
    l._$$ProxyAbstract = t._$klass();
    h = l._$$ProxyAbstract._$extend(a._$$EventTarget);
    h.__reset = function(t) {
        this.__super(t);
        this.__request = e._$fetch({
            url: "",
            sync: !1,
            cookie: !1,
            type: "text",
            method: "GET",
            timeout: 6e4
        }, t);
        var i = n._$get("csrf");
        if(i.cookie && i.param) {
            var a = encodeURIComponent(i.param) + "=" + encodeURIComponent(s._$cookie(i.cookie) || ""),
                o = this.__request.url.indexOf("?") < 0 ? "?" : "&";
            this.__request.url += o + a
        }
        this.__headers = t.headers || {};
        var l = this.__headers[r._$HEAD_CT];
        if(null == l) this.__headers[r._$HEAD_CT] = r._$HEAD_CT_FORM
    };
    h.__destroy = function() {
        this.__super();
        delete this.__rkey;
        delete this.__request;
        delete this.__headers
    };
    h.__onLoadRequest = function(t) {
        var e = t.status;
        if(e != -1)
            if(0 == ("" + e).indexOf("2")) this._$dispatchEvent("onload", i._$text2type(t.result, this.__request.type));
            else this._$dispatchEvent("onerror", {
                data: e,
                result: t.result,
                code: r._$CODE_ERRSERV,
                message: "服务器返回异常状态[" + e + "]!"
            });
        else this._$dispatchEvent("onerror", {
            code: r._$CODE_TIMEOUT,
            message: "请求[" + this.__request.url + "]超时！"
        })
    };
    h.__doSendRequest = u;
    h.__getResponseHeader = u;
    h.__onAbort = function() {
        this._$dispatchEvent("onerror", {
            code: r._$CODE_ERRABRT,
            message: "客户端终止请求"
        })
    };
    h._$send = function(t) {
        var e = this.__request.url;
        if(e) try {
            this.__request.data = null == t ? null : t;
            var i = {
                request: this.__request,
                headers: this.__headers
            };
            try {
                this._$dispatchEvent("onbeforerequest", i)
            } catch(t) {
                console.error(t.message);
                console.error(t.stack)
            }
            this.__doSendRequest(i)
        } catch(t) {
            this._$dispatchEvent("onerror", {
                code: r._$CODE_ERRSERV,
                message: "请求[" + e + "]失败:" + t.message + "！"
            })
        } else this._$dispatchEvent("onerror", {
            code: r._$CODE_NOTASGN,
            message: "没有输入请求地址！"
        })
    };
    h._$abort = u;
    h._$header = function(t) {
        if(!e._$isArray(t)) return this.__getResponseHeader(t) || "";
        var i = {};
        e._$forEach(t, function(t) {
            i[t] = this._$header(t)
        }, this);
        return i
    };
    return l
}, 1, 4, 3, 304, 131, 19, 611, 612);
I$(610, function(t, e, i, n) {
    t.__getXMLHttpRequest = function() {
        return new XMLHttpRequest
    };
    t.__hasAbortEvent = function() {
        return !0
    };
    return t
});
I$(470, function(t, e, i, n, r, a, s) {
    if("trident" === t._$KERNEL.engine && t._$KERNEL.release <= "5.0") I$(608, function() {
        e.__hasAbortEvent = function() {
            return !1
        }
    });
    if("trident" === t._$KERNEL.engine && t._$KERNEL.release <= "2.0") I$(609, function() {
        e.__getXMLHttpRequest = function() {
            var t = ["Msxml2.XMLHTTP.6.0", "Msxml2.XMLHTTP.3.0", "Msxml2.XMLHTTP.4.0", "Msxml2.XMLHTTP.5.0", "MSXML2.XMLHTTP", "Microsoft.XMLHTTP"];
            return function() {
                var e = null;
                i._$forIn(t, function(t) {
                    try {
                        e = new ActiveXObject(t);
                        return !0
                    } catch(t) {}
                });
                return e
            }
        }()
    });
    return e
}, 148, 610, 4);
I$(314, function(t, e, i, n, r, a, s, o, l) {
    var c;
    a._$$ProxyXHR = i._$klass();
    c = a._$$ProxyXHR._$extend(t._$$ProxyAbstract);
    c.__destroy = function() {
        this.__super();
        window.clearTimeout(this.__timer);
        delete this.__timer;
        try {
            this.__xhr.onreadystatechange = o;
            this.__xhr.abort()
        } catch(t) {}
        delete this.__xhr
    };
    c.__doSendRequest = function() {
        var t = function(t, e) {
                this.__xhr.setRequestHeader(e, t)
            },
            i = function(t) {
                var i = [];
                e._$reverseEach(t.getElementsByTagName("input"), function(t) {
                    if("file" == t.type)
                        if(t.name) {
                            if(t.files.length > 1) {
                                e._$forEach(t.files, function(e) {
                                    i.push({
                                        name: t.name,
                                        file: e
                                    })
                                });
                                t.parentNode.removeChild(t)
                            }
                        } else t.parentNode.removeChild(t)
                });
                return i.length > 0 ? i : null
            };
        return function(a) {
            var s = a.request,
                o = a.headers;
            this.__xhr = r.__getXMLHttpRequest();
            if(o[n._$HEAD_CT] === n._$HEAD_CT_FILE) {
                delete o[n._$HEAD_CT];
                this.__xhr.upload.onprogress = this.__onStateChange._$bind(this, 1);
                if("FORM" === s.data.tagName) {
                    var l = i(s.data);
                    s.data = new FormData(s.data);
                    e._$forEach(l, function(t) {
                        var i = t.file;
                        s.data.append(t.name || i.name || "file-" + e._$uniqueID(), i)
                    })
                }
            }
            this.__xhr.onreadystatechange = this.__onStateChange._$bind(this, 2);
            this.__xhr.onabort = this.__onAbort._$bind(this);
            if(0 !== s.timeout) this.__timer = window.setTimeout(this.__onStateChange._$bind(this, 3), s.timeout);
            this.__xhr.open(s.method, s.url, !s.sync);
            e._$loop(o, t, this);
            if(this.__request.cookie && "withCredentials" in this.__xhr) this.__xhr.withCredentials = !0;
            if(!(o[n._$HEAD_CT] !== n._$HEAD_CT_FORM || window.FormData && s.data instanceof window.FormData)) s.data = e._$object2string(s.data, "&", !0);
            this.__xhr.send(s.data)
        }
    }();
    c.__onStateChange = function(t) {
        switch(t) {
            case 1:
                this._$dispatchEvent("onuploading", arguments[1]);
                break;
            case 2:
                if(4 == this.__xhr.readyState) this.__onLoadRequest({
                    status: this.__xhr.status,
                    result: this.__xhr.responseText || ""
                });
                break;
            case 3:
                this.__onLoadRequest({
                    status: -1
                })
        }
    };
    c.__getResponseHeader = function(t) {
        return !this.__xhr ? "" : this.__xhr.getResponseHeader(t)
    };
    c._$abort = function() {
        if(!r.__hasAbortEvent()) this.__onAbort();
        else {
            this.__xhr.onreadystatechange = o;
            this.__xhr.abort()
        }
    };
    return a
}, 469, 4, 1, 131, 470);
I$(716, function(t, e, i, n, r) {
    var a = this,
        s = t._$KERNEL.prefix.pro,
        o = t._$is("desktop") ? 80 : t._$is("ios") ? 50 : 30;
    e.__requestAnimationFrame = function() {
        var e = t._$is("android") ? null : a.requestAnimationFrame || a[s + "RequestAnimationFrame"];
        return function() {
            if(!e) e = function(t) {
                return window.setTimeout(function() {
                    try {
                        t(+new Date)
                    } catch(t) {}
                }, 1e3 / o)
            };
            return e.apply(this, arguments)
        }
    }();
    e.__cancelAnimationFrame = function() {
        var e = t._$is("android") ? null : a.cancelAnimationFrame || a[s + "CancelAnimationFrame"];
        return function() {
            if(!e) e = function(t) {
                window.clearTimeout(t)
            };
            return e.apply(this, arguments)
        }
    }();
    return e
}, 148);
I$(603, function(t, e) {
    return t
}, 716, 148);
I$(463, function(t, e, i, n, r, a) {
    i.requestAnimationFrame = function() {
        e.__requestAnimationFrame.apply(null, arguments)
    };
    i.cancelAnimationFrame = function() {
        e.__cancelAnimationFrame.apply(null, arguments)
    };
    if(!0) {
        if(!this.requestAnimationFrame) this.requestAnimationFrame = i.requestAnimationFrame;
        if(!this.cancelAnimationFrame) this.cancelAnimationFrame = i.cancelAnimationFrame
    }
    return i
}, 148, 603);
I$(707, function(t, e, i, n, r) {
    e.__canFlashEventBubble = function(t) {
        return "transparent" != (t || "").toLowerCase()
    };
    return e
}, 148);
I$(586, function(t, e, i, n, r, a) {
    if("trident" === e._$KERNEL.engine) I$(708, function() {
        t.__canFlashEventBubble = function(t) {
            return !0
        }
    });
    if("webkit" === e._$KERNEL.engine) I$(709, function() {
        t.__canFlashEventBubble = function(t) {
            return !0
        }
    });
    return t
}, 707, 148);
I$(587, '{var hide  = defined("hidden")&&!!hidden}\n{var param = defined("params")&&params||NEJ.O}\n{var width = !hide?width:"1px",height = !hide?height:"1px"}\n{if hide}<div style="position:absolute;top:0;left:0;width:1px;height:1px;z-index:10000;overflow:hidden;">{/if}\n<object classid = "clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"\n        codebase = "http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab"\n        width = "${width|default:"100px"}"\n        height = "${height|default:"100px"}" id="${id}">\n    <param value="${src}" name="movie">\n    {for x in param}\n    <param value="${x}" name="${x_key}"/>\n    {/for}\n    <embed src="${src}" name="${id}"\n           width="${width|default:"100px"}"\n           height="${height|default:"100px"}"\n           pluginspage="http://www.adobe.com/go/getflashplayer"\n           type="application/x-shockwave-flash"\n           {for x in param}${x_key}="${x}" {/for}></embed>\n</object>\n{if hide}</div>{/if}');
I$(426, function(t, e, i, n, r, a, s, o, l, c, u, d) {
    var h = r._$add(o);
    l._$flash = function() {
        var o, l = {},
            c = /^(?:mouse.*|(?:dbl)?click)$/i;
        window.onflashevent = function(t) {
            var e = decodeURIComponent(t.target),
                i = t.type.toLowerCase(),
                n = l[e + "-tgt"];
            if(n && c.test(i)) d(n, t);
            var r = l[e + "-on" + i];
            if(r) {
                var a = "";
                try {
                    a = r(t)
                } catch(t) {}
                return a
            }
        };
        var u = function(t) {
                o = document.title;
                var i = e._$get(t.parent) || document.body,
                    n = r._$get(h, t);
                i.insertAdjacentHTML(!t.hidden ? "beforeEnd" : "afterBegin", n)
            },
            d = function(t, e) {
                var n = e.type.toLowerCase();
                a.requestAnimationFrame(function() {
                    i._$dispatchEvent(t, n)
                })
            },
            f = function(t) {
                return !!t && !!t.inited && !!t.inited()
            },
            p = function(t) {
                var i = [document.embeds[t], e._$get(t), document[t], window[t]],
                    r = n._$forIn(i, f),
                    a = i[r],
                    s = t + "-count";
                l[s]++;
                if(!(a || l[s] > 100)) window.setTimeout(p._$bind(null, t), 300);
                else {
                    if(o) {
                        document.title = o;
                        o = null
                    }
                    l[t](a);
                    delete l[t];
                    delete l[s]
                }
            },
            _ = function(t) {
                var i = t.id,
                    r = t.params;
                if(!r) {
                    r = {};
                    t.params = r
                }
                var a = r.flashvars || "";
                a += (!a ? "" : "&") + ("id=" + i);
                if(!t.hidden && (t.target || s.__canFlashEventBubble(r.wmode))) {
                    var o = e._$id(t.target) || e._$id(t.parent);
                    l[i + "-tgt"] = o
                }
                r.flashvars = a;
                n._$loop(t, function(t, e) {
                    if(n._$isFunction(t) && "onready" != e) l[i + "-" + e] = t
                })
            };
        return function(e) {
            e = t.X({}, e);
            if(e.src) {
                var i = "_" + n._$uniqueID();
                e.id = i;
                _(e);
                u(e);
                if(e.onready) {
                    l[i] = e.onready;
                    l[i + "-count"] = 0;
                    p(i)
                }
            }
        }
    }();
    if(!0) t.copy(t.P("nej.e"), l);
    return l
}, 129, 3, 6, 4, 15, 463, 586, 587);
I$(473, function(t, e, i, n, r, a, s, o, l) {
    var c, u = {},
        d = n._$uniqueID();
    this["ld" + d] = function(t, e) {
        var i = u[t];
        if(i) {
            delete u[t];
            i.__onLoadRequest({
                status: 200,
                result: e
            })
        }
    };
    this["er" + d] = function(t, e) {
        var i = u[t];
        if(i) {
            delete u[t];
            i.__onLoadRequest({
                status: e || 0
            })
        }
    };
    a._$$ProxyFlash = e._$klass();
    c = a._$$ProxyFlash._$extend(t._$$ProxyAbstract);
    c.__doSendRequest = function(t) {
        var e = u.flash;
        if(!n._$isArray(e))
            if(e) {
                this.__rkey = n._$uniqueID();
                u[this.__rkey] = this;
                var a = n._$fetch({
                    url: "",
                    data: null,
                    method: "GET"
                }, t.request);
                a.key = this.__rkey;
                a.headers = t.headers;
                a.onerror = "cb.er" + d;
                a.onloaded = "cb.ld" + d;
                var s = i._$getFlashProxy(a.url);
                if(s) a.policyURL = s;
                e.request(a)
            } else {
                u.flash = [this.__doSendRequest._$bind(this, t)];
                r._$flash({
                    hidden: !0,
                    src: i._$get("ajax.swf"),
                    onready: function(t) {
                        if(t) {
                            var e = u.flash;
                            u.flash = t;
                            n._$reverseEach(e, function(t, e, i) {
                                try {
                                    t()
                                } catch(t) {}
                            })
                        }
                    }
                })
            }
        else e.push(this.__doSendRequest._$bind(this, t))
    };
    c._$abort = function() {
        delete u[this.__rkey];
        this.__onAbort()
    };
    return a
}, 469, 1, 304, 4, 426);
I$(793, function(t, e, i, n) {
    t.__formatOrigin = function() {
        var t = /^([\w]+?:\/\/.*?(?=\/|$))/i;
        return function(e) {
            e = e || "";
            if(t.test(e)) return RegExp.$1;
            else return "*"
        }
    }();
    t.__formatPassData = function(t) {
        return t
    };
    t.__postMessage = function(i, n) {
        if(i.postMessage) {
            n = n || e;
            i.postMessage(t.__formatPassData(n.data), t.__formatOrigin(n.origin))
        }
    };
    return t
});
I$(717, function(t, e, i, n, r, a, s, o) {
    if("trident" === t._$KERNEL.engine && t._$KERNEL.release >= "4.0" && t._$KERNEL.release <= "5.0") I$(794, function() {
        e.__formatPassData = function(t) {
            return JSON.stringify(t)
        }
    });
    if("trident" === t._$KERNEL.engine && t._$KERNEL.release <= "3.0") I$(795, function(t) {
        var r = "MSG|",
            s = [],
            o = function() {
                var t = unescape(window.name || "").trim();
                if(t && 0 == t.indexOf(r)) {
                    window.name = "";
                    var a = i._$string2object(t.replace(r, ""), "|"),
                        s = (a.origin || "").toLowerCase();
                    if(!s || "*" == s || 0 == location.href.toLowerCase().indexOf(s)) n._$dispatchEvent(window, "message", {
                        data: JSON.parse(a.data || "null"),
                        source: window.frames[a.self] || a.self,
                        origin: e.__formatOrigin(a.ref || document.referrer)
                    })
                }
            },
            l = function() {
                var t, e = function(e, n, r) {
                    if(i._$indexOf(t, e.w) < 0) {
                        t.push(e.w);
                        r.splice(n, 1);
                        e.w.name = e.d
                    }
                };
                return function() {
                    t = [];
                    i._$reverseEach(s, e);
                    t = null
                }
            }();
        e.__postMessage = function() {
            var t = function(t) {
                var e = {};
                t = t || a;
                e.origin = t.origin || "";
                e.ref = location.href;
                e.self = t.source;
                e.data = JSON.stringify(t.data);
                return r + i._$object2string(e, "|", !0)
            };
            return function(e, i) {
                s.unshift({
                    w: e,
                    d: escape(t(i))
                })
            }
        }();
        t._$$CustomEvent._$allocate({
            element: window,
            event: "message"
        });
        setInterval(l, 100);
        setInterval(o, 20)
    }, 149, 612);
    return e
}, 148, 793, 4, 6);
I$(613, function(t, e, i, n, r, a, s, o) {
    r._$postMessage = function() {
        var t = window.name || "_parent",
            r = {
                _top: window.top,
                _self: window,
                _parent: window.parent
            };
        return function(s, o) {
            if(e._$isString(s)) {
                s = r[s] || window.frames[s] || (i._$get(s) || a).contentWindow;
                if(!s) return
            }
            var l = e._$fetch({
                data: null,
                origin: "*",
                source: t
            }, o);
            n.__postMessage(s, l)
        }
    }();
    if(!0) t.copy(t.P("nej.j"), r);
    return r
}, 129, 4, 3, 717);
I$(474, function(t, e, i, n, r, a, s, o, l, c, u) {
    var d, h = {};
    o._$$ProxyFrame = i._$klass();
    d = o._$$ProxyFrame._$extend(t._$$ProxyAbstract);
    d.__init = function() {
        var t = "NEJ-AJAX-DATA:",
            e = !1,
            i = function(e) {
                var i = e.data;
                if(0 == i.indexOf(t)) {
                    i = JSON.parse(i.replace(t, ""));
                    var n = h[i.key];
                    if(n) {
                        delete h[i.key];
                        i.result = decodeURIComponent(i.result || "");
                        n.__onLoadRequest(i)
                    }
                }
            },
            r = function() {
                if(!e) {
                    e = !0;
                    n._$addEvent(window, "message", i)
                }
            };
        return function() {
            this.__super();
            r()
        }
    }();
    d.__doSendRequest = function(t) {
        var i = t.request,
            o = r._$getFrameProxy(i.url),
            l = h[o];
        if(!e._$isArray(l))
            if(l) {
                this.__rkey = e._$uniqueID();
                h[this.__rkey] = this;
                var c = e._$fetch({
                    url: "",
                    data: null,
                    timeout: 0,
                    method: "GET"
                }, i);
                c.key = this.__rkey;
                c.headers = t.headers;
                s._$postMessage(h[o], {
                    data: c
                })
            } else {
                h[o] = [this.__doSendRequest._$bind(this, t)];
                a._$createXFrame({
                    src: o,
                    visible: !1,
                    onload: function(t) {
                        var i = h[o];
                        h[o] = n._$getElement(t).contentWindow;
                        e._$reverseEach(i, function(t) {
                            try {
                                t()
                            } catch(t) {}
                        })
                    }
                })
            }
        else l.push(this.__doSendRequest._$bind(this, t))
    };
    d._$abort = function() {
        delete h[this.__rkey];
        this.__onAbort()
    };
    return o
}, 469, 4, 1, 6, 304, 3, 613);
I$(475, function(t, e, i, n, r, a, s, o, l, c, u, d) {
    var h, f = {},
        p = "NEJ-UPLOAD-RESULT:";
    l._$$ProxyUpload = e._$klass();
    h = l._$$ProxyUpload._$extend(t._$$ProxyAbstract);
    h.__init = function() {
        var t = !1,
            e = function(t) {
                var e = t.data;
                if(0 == e.indexOf(p)) {
                    e = JSON.parse(e.replace(p, ""));
                    var i = f[e.key];
                    if(i) {
                        delete f[e.key];
                        i.__onLoadRequest(decodeURIComponent(e.result))
                    }
                }
            },
            i = function() {
                if(!t) {
                    t = !0;
                    n._$addEvent(window, "message", e)
                }
            };
        return function() {
            this.__super();
            i()
        }
    }();
    h.__destroy = function() {
        this.__super();
        r._$remove(this.__frame);
        delete this.__frame;
        window.clearTimeout(this.__timer);
        delete this.__timer
    };
    h.__onLoadRequest = function(t) {
        try {
            var e = r._$text2type(t, this.__request.type);
            this._$dispatchEvent("onload", e)
        } catch(e) {
            this._$dispatchEvent("onerror", {
                code: a._$CODE_ERREVAL,
                message: t
            })
        }
    };
    h.__doSendRequest = function() {
        var t = function() {
                var t, e;
                try {
                    var t = this.__frame.contentWindow.document.body,
                        e = (t.innerText || t.textContent || "").trim();
                    if(e.indexOf(p) >= 0 || t.innerHTML.indexOf(p) >= 0) return
                } catch(t) {
                    return
                }
                this.__onLoadRequest(e)
            },
            e = function(t, i, n) {
                s._$request(t, {
                    type: "json",
                    method: "POST",
                    cookie: n,
                    mode: parseInt(i) || 0,
                    onload: function(r) {
                        if(this.__timer) {
                            this._$dispatchEvent("onuploading", r);
                            this.__timer = window.setTimeout(e._$bind(this, t, i, n), 1e3)
                        }
                    }._$bind(this),
                    onerror: function(r) {
                        if(this.__timer) this.__timer = window.setTimeout(e._$bind(this, t, i, n), 1e3)
                    }._$bind(this)
                })
            };
        return function(s) {
            var o = s.request,
                l = (s.headers, o.data),
                u = i._$uniqueID();
            f[u] = this;
            l.target = u;
            l.method = "POST";
            l.enctype = a._$HEAD_CT_FILE;
            l.encoding = a._$HEAD_CT_FILE;
            var d = l.action || "",
                h = d.indexOf("?") <= 0 ? "?" : "&";
            l.action = d + h + "_proxy_=form";
            this.__frame = r._$createXFrame({
                name: u,
                onload: function(i) {
                    var r = n._$getElement(i);
                    n._$addEvent(r, "load", t._$bind(this));
                    l.submit();
                    var a = (l.nej_query || c).value;
                    if(a) {
                        var s = (l.nej_mode || c).value,
                            o = "true" === (l.nej_cookie || c).value;
                        this.__timer = window.setTimeout(e._$bind(this, a, s, o), 100)
                    }
                }._$bind(this)
            })
        }
    }();
    h._$abort = function() {
        this.__onAbort()
    };
    return l
}, 469, 1, 4, 6, 3, 131, 139, 613);
I$(472, function(t, e, i, n, r, a, s, o) {
    r.__getProxyByMode = function(r, a, s) {
        var o = a ? {
            2: n._$$ProxyUpload
        } : {
            2: i._$$ProxyFrame,
            3: e._$$ProxyFlash
        };
        return(o[r] || t._$$ProxyXHR)._$allocate(s)
    };
    return r
}, 314, 473, 474, 475);
I$(315, function(t, e, i, n, r, a) {
    if("trident" === t._$KERNEL.engine && t._$KERNEL.release <= "5.0") I$(471, function() {
        e.__getProxyByMode = function() {
            var t = {
                0: 2,
                1: 3
            };
            return e.__getProxyByMode._$aop(function(e) {
                var i = e.args,
                    n = i[0] || 0;
                i[0] = i[1] ? 2 : t[n] || n
            })
        }()
    });
    return e
}, 148, 472);
I$(139, function(t, e, i, n, r, a, s, o, l, c) {
    var u = {},
        d = l;
    s._$abort = function(t) {
        var e = u[t];
        if(e) e.req._$abort()
    };
    s._$filter = function(t) {
        d = t || l
    };
    s._$request = function() {
        var t = (location.protocol + "//" + location.host).toLowerCase(),
            n = function(e) {
                var n = i._$url2origin(e);
                return !!n && n != t
            },
            s = function(t) {
                return(t || o)[e._$HEAD_CT] == e._$HEAD_CT_FILE
            },
            c = function(t) {
                var e = s(t.headers);
                if(!n(t.url) && !e) return r._$$ProxyXHR._$allocate(t);
                else return a.__getProxyByMode(t.mode, e, t)
            },
            h = function(t, e) {
                var i = {
                        data: e
                    },
                    n = t.result.headers;
                if(n) i.headers = t.req._$header(n);
                return i
            },
            f = function(t) {
                var e = u[t];
                if(e) {
                    if(e.req) e.req._$recycle();
                    delete u[t]
                }
            },
            p = function(t, e) {
                var i = u[t];
                if(i) {
                    var n = arguments[2];
                    if("onload" == e && i.result) n = h(i, n);
                    f(t);
                    var r = {
                        type: e,
                        result: n
                    };
                    d(r);
                    if(!r.stopped)(i[e] || l)(r.result)
                }
            },
            _ = function(t, e) {
                p(t, "onload", e)
            },
            m = function(t, e) {
                p(t, "onerror", e)
            },
            g = function(t, e) {
                var n = t.indexOf("?") < 0 ? "?" : "&",
                    e = e || "";
                if(i._$isObject(e)) e = i._$object2query(e);
                if(e) t += n + e;
                return t
            };
        return function(t, e) {
            e = e || {};
            var n = i._$uniqueID(),
                r = {
                    result: e.result,
                    onload: e.onload || l,
                    onerror: e.onerror || l
                };
            u[n] = r;
            e.onload = _._$bind(null, n);
            e.onerror = m._$bind(null, n);
            if(e.query) t = g(t, e.query);
            var a = e.method || "";
            if((!a || /get/i.test(a)) && e.data) {
                t = g(t, e.data);
                e.data = null
            }
            e.url = t;
            r.req = c(e);
            r.req._$send(e.data);
            return n
        }
    }();
    s._$upload = function(t, r) {
        t = n._$get(t);
        if(!t) return "";
        var a = i._$fetch({
            mode: 0,
            type: "json",
            query: null,
            cookie: !1,
            headers: {},
            onload: null,
            onerror: null,
            onuploading: null,
            onbeforerequest: null
        }, r);
        a.data = t;
        a.method = "POST";
        a.timeout = 0;
        a.headers[e._$HEAD_CT] = e._$HEAD_CT_FILE;
        return s._$request(t.action, a)
    };
    if(!0) t.copy(t.P("nej.j"), s);
    return s
}, 129, 131, 4, 3, 314, 315);
I$(321, function(t, e, i, n, r, a, s, o) {
    var l;
    r._$$LoaderText = e._$klass();
    l = r._$$LoaderText._$extend(t._$$LoaderAbstract);
    l.__getRequest = function() {
        return null
    };
    l.__doRequest = function() {
        n._$request(this.__url, {
            method: "GET",
            type: "text",
            onload: this.__onLoaded._$bind(this),
            onerror: this.__onError._$bind(this)
        })
    };
    l.__onLoaded = function(t) {
        this.__doCallback("onload", {
            url: this.__url,
            content: t
        })
    };
    return r
}, 477, 1, 3, 139);
I$(614, function(t, e, i, n, r) {
    e.__removeIFrameKeepHistory = function(e) {
        t._$remove(e)
    };
    return e
}, 3);
I$(478, function(t, e, i, n, r, a, s) {
    if("trident" === i._$KERNEL.engine && i._$KERNEL.release <= "2.0") I$(615, function() {
        t.__removeIFrameKeepHistory = function(t) {
            e._$setStyle(t, "display", "none");
            try {
                t.contentWindow.document.body.innerHTML = "&nbsp;"
            } catch(t) {}
        }
    });
    return t
}, 614, 3, 148);
I$(322, function(t, e, i, n, r, a, s, o) {
    var l;
    r._$$LoaderHtml = e._$klass();
    l = r._$$LoaderHtml._$extend(t._$$LoaderAbstract);
    l.__getRequest = function() {
        var t = i._$create("iframe");
        t.width = 0;
        t.height = 0;
        t.style.display = "none";
        return t
    };
    l.__doRequest = function(t) {
        try {
            document.body.appendChild(t);
            t.src = this.__url
        } catch(e) {
            console.log(t);
            console.error(e)
        }
    };
    l.__onError = function(t) {
        var e = (this.__getLoadData(this.__url) || a).request;
        this.__doCallback("onerror", t);
        n.__removeIFrameKeepHistory(e)
    };
    l.__onLoaded = function() {
        var t = null,
            e = (this.__getLoadData(this.__url) || a).request;
        try {
            if(e.src != this.__url) return;
            t = e.contentWindow.document.body
        } catch(t) {}
        this.__doCallback("onload", t);
        n.__removeIFrameKeepHistory(e)
    };
    return r
}, 477, 1, 3, 478);
I$(323, function(t, e, i, n, r, a, s) {
    var o;
    n._$$LoaderStyle = e._$klass();
    o = n._$$LoaderStyle._$extend(t._$$LoaderAbstract);
    o.__getRequest = function() {
        return i._$create("link")
    };
    o.__doRequest = function(t) {
        t.href = this.__url;
        document.head.appendChild(t)
    };
    return n
}, 477, 1, 3);
I$(324, function(t, e, i, n, r, a, s) {
    var o;
    n._$$LoaderScript = e._$klass();
    o = n._$$LoaderScript._$extend(t._$$LoaderAbstract);
    o.__reset = function(t) {
        this.__super(t);
        this.__async = t.async;
        this.__charset = t.charset;
        this.__qopt.async = !1;
        this.__qopt.charset = this.__charset
    };
    o.__getRequest = function() {
        var t = i._$create("script");
        if(null != this.__async) t.async = !!this.__async;
        if(null != this.__charset) t.charset = this.__charset;
        return t
    };
    o.__doClearRequest = function(t) {
        i._$remove(t)
    };
    return n
}, 477, 1, 3);
I$(150, function(t, e, i, n, r, a, s, o, l) {
    a._$loadScript = function(t, e) {
        r._$$LoaderScript._$allocate(e)._$load(t)
    };
    a._$queueScript = function(t, e) {
        r._$$LoaderScript._$allocate(e)._$queue(t)
    };
    a._$loadStyle = function(t, e) {
        n._$$LoaderStyle._$allocate(e)._$load(t)
    };
    a._$queueStyle = function(t, e) {
        n._$$LoaderStyle._$allocate(e)._$queue(t)
    };
    a._$loadHtml = function(t, e) {
        i._$$LoaderHtml._$allocate(e)._$load(t)
    };
    a._$loadText = function(t, i) {
        e._$$LoaderText._$allocate(i)._$load(t)
    };
    if(!0) t.copy(t.P("nej.j"), a);
    return a
}, 129, 321, 322, 323, 324);
I$(14, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f) {
    var p = {},
        _ = +new Date + "-";
    u._$parseTemplate = function() {
        var t = 0,
            c = function() {
                if(!(t > 0)) {
                    t = 0;
                    i._$dispatchEvent(document, "templateready");
                    i._$clearEvent(document, "templateready")
                }
            },
            h = function(t, i) {
                var r = n._$dataset(t, "src");
                if(r) {
                    i = i || d;
                    var a = i.root;
                    if(!a) a = t.ownerDocument.location.href;
                    else a = e._$absolute(a);
                    r = r.split(",");
                    e._$forEach(r, function(t, i, n) {
                        n[i] = e._$absolute(t, a)
                    });
                    return r
                }
            },
            f = function(t) {
                if(r._$is("mac") && "safari" === r._$KERNEL.browser) return e._$unescape(t.innerHTML);
                else return t.value || t.innerText || ""
            },
            p = function(t, e) {
                if(t) {
                    var i = h(t, e);
                    if(i) o._$queueStyle(i, {
                        version: n._$dataset(t, "version")
                    });
                    n._$addStyle(t.value)
                }
            },
            _ = function(e) {
                t--;
                n._$addScript(e);
                c()
            },
            m = function(e, i) {
                if(e) {
                    var r = h(e, i),
                        a = e.value;
                    if(!r) n._$addScript(a);
                    else {
                        t++;
                        var i = {
                            version: n._$dataset(e, "version"),
                            onload: _._$bind(null, a)
                        };
                        window.setTimeout(o._$queueScript._$bind(o, r, i), 0)
                    }
                }
            },
            g = function(e) {
                t--;
                u._$parseTemplate(e);
                c()
            },
            v = function(e, i) {
                if(e) {
                    var r = h(e, i)[0];
                    if(r) {
                        t++;
                        var i = {
                            version: n._$dataset(e, "version"),
                            onload: g
                        };
                        window.setTimeout(o._$loadHtml._$bind(o, r, i), 0)
                    }
                }
            },
            y = function(e, i) {
                t--;
                u._$addTextTemplate(e, i || "");
                c()
            },
            b = function(e, i) {
                if(e && e.id) {
                    var r = e.id,
                        a = h(e, i)[0];
                    if(a) {
                        t++;
                        var s = a + (a.indexOf("?") < 0 ? "?" : "&") + (n._$dataset(e, "version") || ""),
                            i = {
                                type: "text",
                                method: "GET",
                                onload: y._$bind(null, r)
                            };
                        window.setTimeout(l._$request._$bind(l, s, i), 0)
                    }
                }
            },
            x = function(t, e) {
                var i = t.name.toLowerCase();
                switch(i) {
                    case "jst":
                        a._$addTemplate(f(t), t.id);
                        return;
                    case "txt":
                        u._$addTextTemplate(t.id, f(t));
                        return;
                    case "ntp":
                        u._$addNodeTemplate(f(t), t.id);
                        return;
                    case "js":
                        m(t, e);
                        return;
                    case "css":
                        p(t, e);
                        return;
                    case "html":
                        v(t, e);
                        return;
                    case "res":
                        b(t, e);
                        return
                }
            };
        s._$$CustomEvent._$allocate({
            element: document,
            event: "templateready",
            oneventadd: c
        });
        return function(t, i) {
            t = n._$get(t);
            if(t) {
                var r = "TEXTAREA" == t.tagName ? [t] : e._$object2array(t.getElementsByTagName("textarea"));
                e._$forEach(r, function(t) {
                    x(t, i)
                });
                n._$remove(t, !0)
            }
            c()
        }
    }();
    u._$addTextTemplate = function(t, e) {
        p[t] = e || ""
    };
    u._$getTextTemplate = function(t) {
        return p[t] || ""
    };
    u._$addNodeTemplate = function(t, i) {
        i = i || e._$uniqueID();
        t = n._$get(t) || t;
        u._$addTextTemplate(_ + i, t);
        if(!e._$isString(t)) n._$removeByEC(t);
        return i
    };
    u._$getNodeTemplate = function(t) {
        if(!t) return null;
        t = _ + t;
        var i = u._$getTextTemplate(t);
        if(!i) return null;
        var r;
        if(e._$isString(i)) {
            i = n._$html2node(i);
            var a = i.getElementsByTagName("textarea");
            if(!("TEXTAREA" == i.tagName || a && a.length)) u._$addTextTemplate(t, i);
            else r = i
        }
        if(!r) r = i.cloneNode(!0);
        n._$removeByEC(r);
        return r
    };
    u._$getItemTemplate = function() {
        var t = function(t, e) {
            return "offset" == e || "limit" == e
        };
        return function(i, n, r) {
            var a = [];
            if(!i || !i.length || !n) return a;
            r = r || d;
            var s = i.length,
                o = parseInt(r.offset) || 0,
                l = Math.min(s, o + (parseInt(r.limit) || s)),
                c = {
                    total: i.length,
                    range: [o, l]
                };
            e._$merge(c, r, t);
            for(var u, h = o; h < l; h++) {
                c.index = h;
                c.data = i[h];
                u = n._$allocate(c);
                var f = u._$getId();
                p[f] = u;
                u._$recycle = u._$recycle._$aop(function(t, e) {
                    delete p[t];
                    delete e._$recycle
                }._$bind(null, f, u));
                a.push(u)
            }
            return a
        }
    }();
    u._$getItemById = function(t) {
        return p[t]
    };
    u._$parseUITemplate = function() {
        var t = /#<(.+?)>/;
        return function(i, r) {
            r = r || {};
            var a = n._$html2node(i);
            e._$forIn(a.getElementsByTagName("textarea"), function(i) {
                i.id = (i.id || "").replace(t, function(t, i) {
                    var n = r[i];
                    if(!n) {
                        n = "tpl-" + e._$uniqueID();
                        r[i] = n
                    }
                    return n
                })
            });
            u._$parseTemplate(a);
            return r
        }
    }();
    c._$merge({
        _$parseTemplate: u._$parseTemplate,
        _$addNodeTemplate: u._$addNodeTemplate
    });
    if(!0) t.copy(t.P("nej.e"), u);
    return u
}, 129, 4, 6, 3, 148, 15, 149, 150, 139, 132);
I$(142, function(t, e, i, n, r, a, s, o, l, c) {
    var u;
    s._$$Abstract = e._$klass();
    u = s._$$Abstract._$extend(r._$$EventTarget);
    u.__init = function() {
        this.__super();
        i._$dumpCSSText();
        this.__initXGui();
        this.__initNode()
    };
    u.__reset = function(t) {
        this.__super(t);
        this.__doInitClass(t.clazz);
        this._$appendTo(t.parent)
    };
    u.__destroy = function() {
        this.__super();
        this.__doDelParentClass();
        delete this.__parent;
        i._$removeByEC(this.__body);
        i._$delClassName(this.__body, this.__class);
        delete this.__class
    };
    u.__initXGui = l;
    u.__initNode = function() {
        if(!this.__seed_html) this.__initNodeTemplate();
        this.__body = a._$getNodeTemplate(this.__seed_html);
        if(!this.__body) this.__body = i._$create("div", this.__seed_css);
        i._$addClassName(this.__body, this.__seed_css)
    };
    u.__initNodeTemplate = l;
    u.__doInitClass = function(t) {
        this.__class = t || "";
        i._$addClassName(this.__body, this.__class)
    };
    u.__doAddParentClass = function() {
        if(this.__seed_css) {
            var t = this.__seed_css.split(/\s+/);
            i._$addClassName(this.__parent, t.pop() + "-parent")
        }
    };
    u.__doDelParentClass = function() {
        if(this.__seed_css) {
            var t = this.__seed_css.split(/\s+/);
            i._$delClassName(this.__parent, t.pop() + "-parent")
        }
    };
    u._$getBody = function() {
        return this.__body
    };
    u._$appendTo = function(t) {
        if(this.__body) {
            this.__doDelParentClass();
            if(n._$isFunction(t)) this.__parent = t(this.__body);
            else {
                this.__parent = i._$get(t);
                if(this.__parent) this.__parent.appendChild(this.__body)
            }
            this.__doAddParentClass()
        }
    };
    u._$show = function() {
        if(this.__parent && this.__body && this.__body.parentNode != this.__parent) this.__parent.appendChild(this.__body)
    };
    u._$hide = function() {
        i._$removeByEC(this.__body)
    };
    if(!0) t.copy(t.P("nej.ui"), s);
    return s
}, 129, 1, 3, 4, 19, 14);
I$(312, '\ufeff<span class="u-errtip"></span>');
I$(135, function(t, e, i, n, r, a) {
    var s = {};
    s._$$Error = t._$klass();
    var o = s._$$Error._$extend(i._$$Abstract);
    o.__initXGui = function() {
        var t = r._$addNodeTemplate(a);
        return function() {
            this.__seed_html = t
        }
    }();
    o.__reset = function(t) {
        this.__super(t);
        var i = t.message;
        e._$addClassName(this.__parent, "z-err");
        this.__body.innerHTML = n._$escape(i)
    };
    o.__destroy = function() {
        e._$delClassName(this.__parent, "z-err");
        this.__super()
    };
    return s
}, 1, 3, 142, 4, 14, 312);
I$(476, function(t, e, i, n, r, a, s, o) {
    var l;
    r._$$Animation = e._$klass();
    l = r._$$Animation._$extend(i._$$EventTarget);
    l.__reset = function(t) {
        this.__super(t);
        this.__end = t.to || a;
        this.__begin = t.from || {};
        this.__delay = Math.max(0, parseInt(t.delay) || 0)
    };
    l.__destroy = function() {
        this.__super();
        this._$stop();
        if(this.__dtime) {
            window.clearTimeout(this.__dtime);
            delete this.__dtime
        }
        delete this.__end;
        delete this.__begin
    };
    l.__onAnimationFrame = function(t) {
        if(this.__begin) {
            if(("" + t).indexOf(".") >= 0) t = +new Date;
            if(!this.__doAnimationFrame(t)) this.__timer = n.requestAnimationFrame(this.__onAnimationFrame._$bind(this));
            else this._$stop()
        }
    };
    l.__doAnimationFrame = s;
    l._$play = function() {
        var t = function() {
            this.__dtime = window.clearTimeout(this.__dtime);
            this.__begin.time = +new Date;
            this.__timer = n.requestAnimationFrame(this.__onAnimationFrame._$bind(this))
        };
        return function() {
            this.__dtime = window.setTimeout(t._$bind(this), this.__delay)
        }
    }();
    l._$stop = function() {
        this.__timer = n.cancelAnimationFrame(this.__timer);
        this._$dispatchEvent("onstop")
    };
    if(!0) t.copy(t.P("nej.ut"), r);
    return r
}, 129, 1, 19, 463);
I$(317, function(t, e, i, n, r, a, s, o) {
    var l;
    r._$$AnimBezier = e._$klass();
    l = r._$$AnimBezier._$extend(n._$$Animation);
    l.__reset = function(t) {
        this.__super(t);
        this.__duration = t.duration || 200;
        this.__epsilon = 1 / (200 * this.__duration);
        this.__doParseTiming(t.timing);
        this.__doCalPolynomialCoefficients()
    };
    l.__destroy = function() {
        this.__super();
        delete this.__pointer;
        delete this.__coefficient
    };
    l.__doParseTiming = function() {
        var t = /^cubic\-bezier\((.*?)\)$/i,
            e = /\s*,\s*/i,
            n = {
                linear: [0, 0, 1, 1],
                ease: [.25, .1, .25, 1],
                easein: [.42, 0, 1, 1],
                easeout: [0, 0, .58, 1],
                easeinout: [0, 0, .58, 1]
            },
            r = function(t, e, i) {
                i[e] = parseFloat(t)
            };
        return function(a) {
            a = (a || "").toLowerCase();
            this.__pointer = n[a];
            if(t.test(a)) {
                this.__pointer = RegExp.$1.split(e);
                i._$forEach(this.__pointer, r)
            }
            if(!this.__pointer) this.__pointer = n.ease
        }
    }();
    l.__doCalPolynomialCoefficients = function() {
        var t = this.__pointer,
            e = 3 * t[0],
            i = 3 * (t[2] - t[0]) - e,
            n = 1 - e - i,
            r = 3 * t[1],
            a = 3 * (t[3] - t[1]) - r,
            s = 1 - r - a;
        this.__coefficient = {
            ax: n,
            ay: s,
            bx: i,
            by: a,
            cx: e,
            cy: r
        }
    };
    l.__doCalCubicBezierAtTime = function() {
        var t = function(t, e) {
                return((e.ax * t + e.bx) * t + e.cx) * t
            },
            e = function(t, e) {
                return((e.ay * t + e.by) * t + e.cy) * t
            },
            i = function(t, e) {
                return(3 * e.ax * t + 2 * e.bx) * t + e.cx
            },
            n = function(e, n, r) {
                var a, s, o, l, c, u;
                for(o = e, u = 0; u < 8; u++) {
                    l = t(o, r) - e;
                    if(Math.abs(l) < n) return o;
                    c = i(o, r);
                    if(Math.abs(c) < 1e-6) break;
                    o -= l / c
                }
                a = 0;
                s = 1;
                o = e;
                if(o < a) return a;
                if(o > s) return s;
                for(; a < s;) {
                    l = t(o, r);
                    if(Math.abs(l - e) < n) return o;
                    if(e > l) a = o;
                    else s = o;
                    o = .5 * (s - a) + a
                }
                return o
            };
        return function(t) {
            return e(n(t / this.__duration, this.__epsilon, this.__coefficient), this.__coefficient)
        }
    }();
    l.__doAnimationFrame = function(t) {
        var e = t - this.__begin.time,
            n = this.__doCalCubicBezierAtTime(e),
            r = i._$fixed(this.__begin.offset * (1 - n) + this.__end.offset * n, 2),
            a = !1;
        if(e >= this.__duration) {
            r = this.__end.offset;
            a = !0
        }
        this._$dispatchEvent("onupdate", {
            offset: 1 * r
        });
        return a
    };
    l._$stop = function() {
        this._$dispatchEvent("onupdate", {
            offset: this.__end.offset
        });
        this.__super()
    };
    if(!0) t.copy(t.P("nej.ut"), r);
    return r
}, 129, 1, 4, 476);
I$(143, function(t, e, i, n, r, a, s, o) {
    var l;
    r._$$AnimLinear = e._$klass();
    l = r._$$AnimLinear._$extend(n._$$AnimBezier);
    l.__reset = function(t) {
        t = i._$merge({}, t);
        t.timing = "linear";
        this.__super(t)
    };
    if(!0) t.copy(t.P("nej.ut"), r);
    return r
}, 129, 1, 4, 317);
I$(144, '<div class="m-confirm ">\n\t<div class="cfmcnt">\n\t\t<div class="cfmtxt j-message"></div>\n\t\t<div class="cfmdetail j-detail"></div>\n\t</div>\n  <div class="cfmicon">\n    <i class="u-icn u-icn-close j-messageClose"></i>\n  </div>\n</div>\n');
I$(318, ".#<uispace>{position:fixed;_position:absolute;z-index:100;top:0;bottom:0;left:0;right:0;width:100%;height:100%;background-image:url(#<blankimage>);}");
I$(145, function(t, e, i, n, r, a, s, o, l, c, u) {
    var d, h = n._$pushCSSText(s, {
        blankimage: i._$BLANK_IMAGE
    });
    o._$$Mask = e._$klass();
    d = o._$$Mask._$extend(a._$$Abstract);
    d.__reset = function(t) {
        this.__super(t);
        var e = t.content || "&nbsp;";
        r._$isString(e) ? this.__body.innerHTML = e : this.__body.appendChild(e)
    };
    d.__destroy = function() {
        this.__super();
        this.__body.innerHTML = "&nbsp;"
    };
    d.__initXGui = function() {
        this.__seed_css = h
    };
    d._$show = function() {
        n._$fullScreen(this.__body);
        this.__super()
    };
    if(!0) t.copy(t.P("nej.ui"), o);
    return o
}, 129, 1, 131, 3, 4, 142, 318);
I$(261, function(t, e, i, n, r, a, s, o, l, c) {
    var u = function(t, r, s) {
        var o = n._$wrapInline(t),
            l = t.offsetHeight;
        n._$style(o, {
            left: "-1px",
            height: l + 1 + "px",
            width: t.offsetWidth + 1 + "px",
            top: Math.floor((o.parentNode.offsetHeight - l) / 2) + "px"
        });
        a._$flash(i._$merge({
            parent: o,
            target: t,
            width: "100%",
            height: "100%",
            src: e._$get("clipboard.swf"),
            params: {
                wmode: "transparent",
                flashvars: r
            }
        }, s));
        return o
    };
    s._$copy = function(t, e) {
        t = n._$get(t);
        if(t) return u(t, "op=0", {
            onbeforecopy: function() {
                return i._$isFunction(e) ? e() : e || ""
            }
        })
    };
    s._$clear = function(t) {
        t = n._$get(t);
        if(t) return u(t, "op=2")
    };
    r._$merge(s);
    if(!0) {
        var r = t.P("nej.e");
        r._$bindCopyAction = s._$copy;
        r._$bindClearAction = s._$clear
    }
    return s
}, 129, 304, 4, 3, 132, 426);
I$(319, '<section class="sec-1">\n    <div class="item item-1">\n        <i class="u-icn u-icn-warm"></i>\n    </div>\n    <div class="item item-2" title="{message}">\n        {message}\n    </div>\n    {#if query != undefined}\n    <div class="item item-3">\n        <div id="copyBtn" class="u-btn u-btn-1-reverse u-btn-s1">复制查询语句</div>\n    </div>\n    {/if}\n</section>\n{#if msg != undefined}\n<section class="sec-3">\n    <div>\n        <pre class="u-code-input" r-html={msg}></pre>\n    </div>\n</section>\n{/if}\n{#if query != undefined}\n<section class="sec-2">\n    <div>\n        <pre class="u-code-input" > {query} </pre>\n    </div>\n</section>\n{/if}\n');
I$(320, '{#if cockpit}\n<a href="#/m/permission/roles/" target="_blank"><button type="button" class="u-btn u-btn-1 u-btn-s1">编辑权限</button></a>\n<button type="button" on-click={this.confirm(false)} class="u-btn u-btn-2 u-btn-s1">取消</button>\n{#else}\n<button type="button" on-click={this.confirm(false)} class="u-btn u-btn-1 u-btn-s1">{cancelText||"关闭"}</button>\n{/if}\n');
I$(215, function(t, e, i, n, r, a, s, o, l, c) {
    s._$request = function() {
        var t = {},
            a = /\{(.*?)\}/gi,
            s = /^get|delete|head$/i,
            u = /json/i,
            d = /xml/i,
            h = function(e) {
                var i = t[e];
                if(i) {
                    delete i.s;
                    delete i.f;
                    delete t[e]
                }
            },
            f = function(e, i) {
                var n = t[e];
                if(n) {
                    var r = n[i],
                        a = c.slice.call(arguments, 2);
                    try {
                        (r || l).apply(null, a)
                    } catch(t) {
                        if(!1) throw t;
                        console.error(t.message);
                        console.error(t)
                    }
                    h(e)
                }
            },
            p = function(t, e) {
                f(t, "s", e)
            },
            _ = function(t, i) {
                i = i || {};
                if(i.code != n._$CODE_ERRSERV || 204 != i.data) {
                    e._$dispatchEvent(window, "resterror", i);
                    if(!i.stopped) f(t, "f", i);
                    else h(t)
                } else p(t, null)
            },
            m = function(t, e, i) {
                var n = t[e] || t[e.toLowerCase()];
                if(!n) {
                    n = i;
                    t[e] = n
                }
                return n
            },
            g = function(t, e, n) {
                if(i._$isArray(t)) n[e] = JSON.stringify(t)
            };
        return function(e, n) {
            n = i._$merge({}, n);
            var c = {},
                h = n.param || o;
            e = e.replace(a, function(t, e) {
                var i = h[e];
                if(null != i) c[e] = !0;
                return encodeURIComponent(i || "") || t
            });
            var f = n.data || {};
            i._$loop(h, function(t, e) {
                if(!c[e]) f[e] = t
            });
            var v = "text",
                y = n.headers || {},
                b = m(y, "Accept", "application/json"),
                x = m(y, "Content-Type", "application/json");
            if(u.test(b)) v = "json";
            else if(d.test(b)) v = "xml";
            var $ = i._$uniqueID();
            t[$] = {
                s: n.onload || l,
                f: n.onerror || l
            };
            n.method = n.method || "GET";
            if(s.test(n.method.trim())) {
                i._$forIn(f, g);
                n.query = f;
                f = null
            } else if(u.test(x)) f = JSON.stringify(f);
            n.type = v;
            n.data = f;
            n.headers = y;
            n.onload = p._$bind(null, $);
            n.onerror = _._$bind(null, $);
            return r._$request(e, n)
        }
    }();
    s._$abort = function(t) {
        r._$abort(t)
    };
    a._$$CustomEvent._$allocate({
        element: window,
        event: "resterror"
    });
    if(!0) t.P("nej.j")._$requestByREST = s._$request;
    return s
}, 129, 6, 4, 131, 139, 149);
I$(137, function(t) {
    var e = {},
        i = function() {
            var t = 1;
            return function(e) {
                return(e ? e : "") + t++
            }
        }(),
        n = 10,
        r = "/api/report/getByQueryId",
        a = {
            _$loop: function(e) {
                return function() {
                    var i = e.apply(this, arguments),
                        n = i.then(function(e) {
                            if(200 === e.code) {
                                var i = e.result;
                                n.queryId = i;
                                n.abort = function() {
                                    a._$cancel(i);
                                    clearTimeout(n.timer)
                                };
                                return new Promise(function(e, a) {
                                    function s() {
                                        t._$request(r, {
                                            data: {
                                                queryId: i
                                            },
                                            onload: function(t) {
                                                if(213 === t.code) {
                                                    if(o < 2400) o += 100;
                                                    n.timer = setTimeout(s, o)
                                                } else e(t)
                                            },
                                            onerror: function(t) {
                                                a(t)
                                            }
                                        })
                                    }
                                    var o = 400;
                                    n.timer = setTimeout(s, o)
                                })
                            } else return e
                        });
                    return n
                }
            },
            _$cancel: function(t) {
                a._$request("/api/report/cancelQuery", {
                    method: "POST",
                    data: {
                        queryId: t
                    }
                })
            },
            _$request: function(e, i) {
                var n = i.onload,
                    r = i.onerror;
                i.onload = function() {
                    a._$del(s);
                    n && n.apply(this, arguments)
                };
                i.onerror = function(t) {
                    a._$del(s);
                    if("客户端终止请求" !== t.message) r && r.apply(this, arguments);
                    else;
                };
                var s = t._$request.call(t, e, i);
                a._$add(s);
                return s
            },
            _$mark: function(t) {
                var n = i(t);
                e[n] = [];
                return n
            },
            _$abort: function(i) {
                var n = e[i];
                if(Array.isArray(n)) n.forEach(function(e) {
                    t._$abort(e);
                    a._$del(e)
                });
                delete e[i]
            },
            _$add: function(t) {
                for(var i in e)
                    if(e.hasOwnProperty(i)) {
                        var r = e[i];
                        if(Array.isArray(r))
                            if(r.length > n) {
                                a._$abort(i);
                                console.warn(i + ":request栈可能没有被释放， 将强制释放避免内存溢出")
                            } else e[i].push(t)
                    }
            },
            _$del: function(t) {
                for(var i in e)
                    if(e.hasOwnProperty(i)) {
                        var n = e[i];
                        if(Array.isArray(n)) e[i] = n.filter(function(t) {})
                    }
            }
        };
    return a
}, 215);
I$(362, '\n<mask show={show && !noMask} on-click=\'clickouter\'  ></mask>\n<div class="m-window m-window-modal {@(className)}"  r-anim=\'on:enter; wait: 10; class: z-show, 3; on:leave;wait: 10; class: z-show, 4;  \' ref=modal>\n  <div class="wrap">\n    <div class="window"  style=\'width: {@(width)}px;left:{@(left)}px;top:{@(top)}px \' r-anim=\'on:err; class: wobble animated\'  ref=window>\n      {#if @(dragable !== false)}\n      <dragable ref=dragable  placeholder={false} >\n        <div class="winhd"><h2 class="wintt  ">{#inc title||\'弹窗\'}</h2></div>\n      </dragable>\n      {#else}\n        <div class="winhd"><h2 class="wintt  ">{#inc title||\'弹窗\'}</h2></div>\n      {/if}\n      <div class="winbd" ref=winbd>\n          {#inc body || this.$body}\n      </div>\n      {#if needFoot!==false}\n      <div class="winft">\n        {#if foot || this.$foot}\n          {#inc foot || this.$foot}\n        {#else}\n          <button type="button" on-click={this.confirm(true)} class="u-btn u-btn-1 u-btn-s1">{confirmText||\'确定\'}</button>\n          <button r-hide={hideCancel} type="button" on-click={this.confirm(false)} class="u-btn u-btn-2 u-btn-s1">{cancelText||\'取消\'}</button>\n        {/if}\n      </div>\n      {/if}\n      <span r-hide={!!noClose} class="wincls u-icn u-icn-close" on-click={this.confirm(false)}></span>\n    </div>\n  </div>\n</div>\n');
I$(349, "<div class=\"m-window {clazz}\" style='z-index:{zIndex}' on-click='click'  r-anim='on:enter; class:animated fadeIn;on:leave; class: fadeOut animated' >\n  <div class=\"wrap\">{#inc this.$body}</div>\n</div>");
I$(171, function(t) {
    var e = (Regular.dom, Regular.extend({
        name: "mask",
        template: t,
        node: function() {},
        config: function(t) {},
        init: function() {
            var t = this.data;
            this.$watch("!!show", function(e, i) {
                var n = t.container || document.body;
                this.$inject(e ? n : !1)
            }, {
                init: !0
            })
        },
        toggle: function() {
            this.$update("show", !this.data.show);
            return this
        },
        show: function(t) {
            this.$update("show", !0);
            return this
        },
        hide: function() {
            this.$update("show", !1);
            return this
        }
    }));
    return e
}, 349, 171);
! function(t, e) {
    if("object" == typeof exports && "object" == typeof module) module.exports = e(require("Regular"));
    else if("function" == typeof define && define.amd) define(["Regular"], e);
    else if("object" == typeof exports) exports["ReDnd"] = e(require("Regular"));
    else t["ReDnd"] = e(t["Regular"])
}(this, function(t) {
    return function(t) {
        function e(n) {
            if(i[n]) return i[n].exports;
            var r = i[n] = {
                exports: {},
                id: n,
                loaded: !1
            };
            t[n].call(r.exports, r, r.exports, e);
            r.loaded = !0;
            return r.exports
        }
        var i = {};
        e.m = t;
        e.c = i;
        e.p = "";
        return e(0)
    }([function(t, e, i) {
        "use strict";

        function n(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var r = i(1),
            a = n(r),
            s = i(4),
            o = n(s),
            l = i(5),
            c = n(l),
            u = i(2),
            d = n(u);
        e["default"] = {
            Dragable: o["default"],
            Dropable: c["default"],
            manager: a["default"],
            util: d["default"]
        };
        t.exports = e["default"]
    }, function(t, e, i) {
        "use strict";

        function n(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }

        function r(t, e) {
            y.drag = t;
            y.startAt = e;
            if(!h["default"].supportTouch) {
                m.on(document, h["default"].MOUSE_MOVE, c);
                h["default"].once(document, h["default"].MOUSE_UP, u)
            } else {
                g = setTimeout(function() {
                    g = null;
                    m.on(document, h["default"].MOUSE_MOVE, c);
                    h["default"].once(document, h["default"].MOUSE_UP, u)
                }, 100);
                h["default"].once(document, h["default"].MOUSE_MOVE, function(t) {
                    if(g) clearTimeout(g);
                    g = null
                });
                h["default"].once(document, h["default"].MOUSE_UP, function(t) {
                    if(g) clearTimeout(g);
                    g = null
                })
            }
            y.moved = !1
        }

        function a(t, e) {
            _[t] = e
        }

        function s(t) {
            delete _[t]
        }

        function o(t, e) {
            var i = [];
            for(var n in e) {
                var r = e[n];
                if(t.validate(r.data.name)) i.push(r)
            }
            return i
        }

        function l(t, e) {
            var i = y.drag;
            for(var n in _) {
                var r = _[n];
                if(i.validate(r.data.name)) {
                    var a = r.offset = h["default"].getDimension(r.node),
                        s = a.left < t && t < a.width + a.left && a.top < e && e < a.height + a.top;
                    if(y.drop !== r) {
                        if(s) {
                            r.$emit("dragenter", {
                                drag: i,
                                drop: r
                            });
                            if(y.drop) y.drop.$emit("dragleave", {
                                drag: i,
                                drop: r
                            });
                            y.drop = r;
                            return
                        }
                    } else if(!s) {
                        r.$emit("dragleave", {
                            drag: i,
                            drop: r
                        });
                        y.drop = null
                    }
                } else;
            }
        }

        function c(t) {
            if(+new Date - g)
                if(!y.drag) return;
            t.preventDefault();
            var e = y.drag.placeholder;
            if(/touch/.test(t.type)) t = t.event.touches[0];
            var i = y.startAt,
                n = y.drag,
                r = n.data;
            if(!y.moved) {
                if(t.pageX === i.left && t.pageY === i.top) return;
                if(r.placeholder !== !1) {
                    e = n.placeholder = n.getPlaceholder(n.node, n.data);
                    if(e) {
                        e.style.display = "none";
                        e.style.zIndex = 1e3;
                        m.inject(e, document.body)
                    }
                }
                y.drag.$emit("dragstart", {
                    position: i
                });
                var a = o(n, _);
                y.$emit("active", {
                    drag: n,
                    drops: a
                });
                a.forEach(function(t) {
                    t.$emit("active", {
                        drag: n,
                        drop: t
                    })
                });
                y.moved = !0;
                y.testDrop(t.pageX, t.pageY);
                return !0
            }
            if(window.getSelection) window.getSelection().removeAllRanges();
            else if(window.document.selection) window.document.selection.empty();
            if(e) {
                var s = e.style;
                s.position = "absolute";
                s.display = "";
                s.left = t.pageX - i.left + "px";
                s.top = t.pageY - i.top + "px"
            }
            y.testDrop(t.pageX, t.pageY);
            var l = y.drop;
            y.drag.$emit("dragmove", {
                drag: n,
                drop: l,
                position: {
                    left: t.pageX,
                    top: t.pageY
                }
            });
            if(l) l.$emit("dragmove", {
                drop: l,
                drag: n,
                position: {
                    left: t.pageX - l.offset.left,
                    top: t.pageY - l.offset.top
                }
            });
            return !0
        }

        function u(t) {
            var e = y.drag,
                i = y.startAt;
            if(/touch/.test(t.type)) t = t.event.changedTouches[0];
            m.off(document, h["default"].MOUSE_MOVE, c);
            if(y.moved && (t.pageX !== i.left || t.pageY !== i.top))
                if(e) {
                    var n = y.drop;
                    e.$emit("dragend", {
                        drop: n,
                        drag: e,
                        position: {
                            left: t.pageX,
                            top: t.pageY
                        }
                    });
                    if(n) n.$emit("dragdrop", {
                        drag: e,
                        drop: n,
                        position: {
                            left: t.pageX - n.offset.left,
                            top: t.pageY - n.offset.top
                        }
                    });
                    y.$emit("dragend", {
                        drag: y.drag,
                        drop: y.drop
                    });
                    y.drop = null;
                    y.drag = null
                }
        }
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var d = i(2),
            h = n(d),
            f = i(3),
            p = n(f),
            _ = {},
            m = p["default"].dom,
            g = null,
            v = p["default"].extend({
                drops: _,
                addDrop: a,
                delDrop: s,
                testDrop: l,
                bindDrag: r,
                onmousemove: c,
                onmouseup: u
            }),
            y = new v;
        e["default"] = y;
        t.exports = e["default"]
    }, function(t, e, i) {
        "use strict";

        function n(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }

        function r(t) {
            var e = t && t.ownerDocument,
                i = e.documentElement,
                n = e.body,
                r = t.getBoundingClientRect ? t.getBoundingClientRect() : {
                    top: 0,
                    left: 0
                },
                a = i.clientTop || n.clientTop || 0,
                s = i.clientLeft || n.clientLeft || 0,
                o = p.pageYOffset || i.scrollTop,
                l = p.pageXOffset || i.scrollLeft;
            return {
                top: r.top + o - a,
                left: r.left + l - s
            }
        }

        function a(t) {
            var e = t.offsetWidth,
                i = t.offsetHeight;
            return {
                width: e,
                height: i
            }
        }

        function s(t) {
            return _(a(t), r(t))
        }

        function o(t, e) {
            if(!t) return -1;
            for(var i = 0, n = t.length; i < n; i++)
                if(t[i] === e) {
                    t.splice(i, 1);
                    return i
                }
            return -1
        }

        function l(t, e, i) {
            function n() {
                i.apply(this, arguments);
                m.off(t, e, n)
            }
            m.on(t, e, n)
        }

        function c(t, e) {
            if(!t || !e) return !1;
            else return t.left > e.left && t.left < e.left + e.width && t.top > e.top && t.top < e.top + e.height
        }

        function u(t, e) {
            for(var i = e.length; i--;) {
                var n = e[i];
                if(c(t, n)) return {
                    index: i,
                    dimension: {
                        width: n.width,
                        height: n.height,
                        left: t.left - n.left,
                        top: t.top - n.top
                    }
                }
            }
        }

        function d() {}
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var h = i(3),
            f = n(h),
            p = window,
            _ = f["default"].util.extend,
            m = f["default"].dom,
            g = "ontouchstart" in document && !("onmousedown" in document),
            v = g ? "touchstart" : "mousedown",
            y = g ? "touchmove" : "mousemove",
            b = g ? "touchend" : "mouseup";
        e["default"] = {
            getPosition: r,
            getOffset: a,
            getDimension: s,
            isInRect: c,
            getInRanges: u,
            getDirection: d,
            remove: o,
            extend: _,
            MOUSE_UP: b,
            MOUSE_MOVE: y,
            MOUSE_DOWN: v,
            supportTouch: g,
            once: l
        };
        t.exports = e["default"]
    }, function(e, i) {
        e.exports = t
    }, function(t, e, i) {
        "use strict";

        function n(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var r = i(1),
            a = n(r),
            s = i(3),
            o = n(s),
            l = i(5),
            c = n(l),
            u = i(2),
            d = n(u),
            h = {}.toString,
            f = o["default"].dom,
            p = o["default"].extend({
                name: "dragable",
                template: "{#include this.$body}",
                config: function(t) {
                    var e = this.$outer,
                        i = t.target;
                    if("[object RegExp]" === h.call(i)) this._validateTarget = function(t) {
                        return i.test(t)
                    };
                    else if(Array.isArray(i)) this._validateTarget = function(t) {
                        return i.indexOf(t) !== -1
                    };
                    else if("function" == typeof i) this._validateTarget = function(t) {
                        return !!i(t)
                    };
                    if(e instanceof c["default"]) {
                        this.drop = e;
                        e.$emit("add_drag", this)
                    }
                },
                init: function() {
                    var t = this.data,
                        e = this.node = f.element(this);
                    f.addClass(e, "dragable");
                    this.$on("dragend", function() {
                        if(this.placeholder) {
                            f.remove(this.placeholder);
                            this.placeholder = null
                        }
                    });
                    var i = this.handle = t.handle && e.querySelector(t.handle) || e,
                        n = function(t) {
                            var i = /touch/.test(t.type);
                            if(i) t = t.event.touches[0];
                            else if(1 !== t.which) return;
                            var n = d["default"].getPosition(e);
                            a["default"].bindDrag(this, {
                                left: t.pageX - n.left,
                                top: t.pageY - n.top
                            })
                        }.bind(this);
                    if(!this.data.disabled) f.on(i, d["default"].MOUSE_DOWN, n)
                },
                _validateTarget: function() {
                    return !1
                },
                validate: function(t) {
                    return this._validateTarget(t)
                },
                getPlaceholder: function(t, e) {
                    return t.cloneNode(!0)
                }
            });
        c["default"].Handler = o["default"].extend({
            template: "{#inc this.$body}",
            config: function() {
                if(this.$outer instanceof c["default"]) this.$outer.data.header = this
            }
        });
        e["default"] = p;
        t.exports = e["default"]
    }, function(t, e, i) {
        "use strict";

        function n(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var r = i(1),
            a = n(r),
            s = i(3),
            o = n(s),
            l = i(2),
            c = (n(l), o["default"].extend({
                name: "dropable",
                template: "\n  <div class='{klass} dropable'>{#inc this.$body}</div>\n  ",
                config: function(t) {
                    a["default"].addDrop(t.name, this)
                },
                init: function(t) {
                    this.node = o["default"].dom.element(this)
                },
                destroy: function() {
                    a["default"].delDrop(this.data.name, this);
                    this.supr()
                }
            }));
        e["default"] = c;
        t.exports = e["default"]
    }])
});
I$(185, function(t, e, i, n) {
    function r(t, e) {
        var i = t && t.ownerDocument,
            n = i.documentElement,
            r = i.body,
            a = t.getBoundingClientRect ? t.getBoundingClientRect() : {
                top: 0,
                left: 0
            },
            o = n.clientTop || r.clientTop || 0,
            l = n.clientLeft || r.clientLeft || 0,
            c = s.pageYOffset || n.scrollTop,
            u = s.pageXOffset || n.scrollLeft;
        return {
            top: a.top + c - o + (e && a.height ? a.height / 2 : 0),
            left: a.left + u - l + (e && a.width ? a.width / 2 : 0)
        }
    }
    var a = Regular.dom,
        s = window,
        o = Regular.extend({
            name: "modal",
            template: i,
            config: function(t) {
                if(t.autoRecycleRequest !== !1) {
                    var i = e._$mark();
                    this.$on("$destroy", function() {
                        e._$abort(i)
                    })
                }
            },
            init: function() {
                function e(t) {
                    if(27 === t.which && u.data.shortcutClose) u.destroy()
                }
                var i = this.data,
                    n = this.$refs.modal;
                if("undefined" == typeof i.shortcutClose) i.shortcutClose = !0;
                var s = i.showAt;
                if(s) {
                    if(1 === s.nodeType) {
                        var o = r(s, !0);
                        s = {
                            x: o.left,
                            y: o.top
                        }
                    }
                    if(s.x && s.y) t.setVendorStyle(n, "transformOrigin", "" + parseInt(s.x, 10) + "px " + parseInt(s.y, 10) + "px")
                }
                if(i.dragable !== !1 && this.$refs.dragable) {
                    var l, c = {
                        left: 0,
                        top: 0
                    };
                    this.$refs.dragable.$on({
                        dragmove: function(e) {
                            var i = e.position;
                            if(!l) {
                                l = e.position;
                                t.setVendorStyle(n, "transition-duration", "0s")
                            } else {
                                var r = i.left - l.left + c.left,
                                    a = i.top - l.top + c.top;
                                t.setVendorStyle(n, "transform", "scale(1) translate3d( " + r + "px , " + a + "px, 0) ")
                            }
                        },
                        dragend: function(e) {
                            var i = e.position;
                            c.left = i.left - l.left + c.left;
                            c.top = i.top - l.top + c.top;
                            l = null;
                            t.setVendorStyle(n, "transition-duration", "0.28s")
                        }
                    })
                }
                var u = this;
                a.on(document, "keyup", e);
                this.$on("$destroy", function() {
                    a.off(document, "keyup", e)
                });
                this.$watch("!!show", function(t) {
                    var e = i.container || document.body;
                    this.$inject(t ? e : !1)
                })
            },
            confirm: function(t) {
                var e = this.data;
                this.$emit("confirm", {
                    accept: t,
                    data: this.data
                });
                var i = e.container || document.body;
                if(e.autoClose) {
                    e.show = !1;
                    a.delClass(i, "z-modal");
                    this.destroy()
                }
            },
            error: function(e) {
                t.message(e, "warm");
                this.$emit("err", e)
            },
            _bindDragEvent: function() {
                var t = null;
                this.$refs.dragable.$on({
                    dragstart: function(t) {},
                    dragmove: function(e) {
                        if(!t) {
                            e.position
                        }
                    },
                    dragend: function(t) {}
                })
            },
            toggle: n.prototype.toggle,
            show: n.prototype.show
        });
    ["Head", "Body", "Foot"].forEach(function(t) {
        var e = t.toLowerCase();
        o[t] = Regular.extend({
            name: "modal." + e,
            init: function() {
                this.$outer.data[e] = this.$body
            }
        })
    });
    return o
}, 7, 137, 362, 171, 173);
I$(146, function(t, e, i, n, r) {
    var a = r.extend({
        $body: i,
        $foot: n,
        data: {
            title: "错误详情",
            autoClose: !1,
            className: "m-window-modal-errDetail"
        },
        config: function(t) {
            this.supr(t);
            this.$on("confirm", function(t) {
                if(t.accept);
                else this.destroy()
            }.bind(this))
        },
        init: function() {
            this.supr();
            setTimeout(function() {
                e._$copy("copyBtn", function() {
                    if(!this.disabled) {
                        this.disabled = !0;
                        setTimeout(function() {
                            this.disabled = !1
                        }.bind(this), 1e3);
                        t.message("查询语句复制成功", "ok");
                        return this.data.query
                    }
                }.bind(this))
            }.bind(this), 0)
        }
    });
    return a
}, 7, 261, 319, 320, 185);
I$(12, function(t, e, i, n, r, a, s, o, l, c) {
    var u = {};
    u._$$Feedback = t._$klass();
    var d = u._$$Feedback._$extend(n._$$Abstract);
    d.__initXGui = function() {
        var t = r._$addNodeTemplate(o);
        return function() {
            this.__seed_html = t
        }
    }();
    d.__initNode = function() {
        this.__super();
        this.__emessage = e._$getByClassName(this.__body, "j-message")[0];
        this.__eclose = e._$getByClassName(this.__body, "j-messageClose")[0];
        i._$addEvent(this.__eclose, "click", this.__onClickClose._$bind(this));
        this.__eDetail = e._$getByClassName(this.__body, "j-detail")[0];
        if(this.__eDetail) i._$addEvent(this.__eDetail, "click", this.__onClickDetail._$bind(this))
    };
    d.__reset = function(t) {
        t = t || {};
        t.parent = document.body;
        this.time = t.time || 5e3;
        this.__onHide = t.onhide;
        this.__super(t);
        if(750 === t.code && t.result) {
            this.result = t.result;
            this.__eDetail.innerText = "查看详情"
        }
        this.__emessage.innerText = this.message = t.message || "";
        this.__timer = window.setTimeout(function() {
            window.clearTimeout(this.__timer);
            this.__outAnimation()
        }._$bind(this), this.time);
        if(1 == t.mask) this.__mask = l._$$Mask._$allocate({
            parent: document.body
        })
    };
    d.__outAnimation = function() {
        this.__easeinout = s._$$AnimLinear._$allocate({
            from: {
                offset: 1
            },
            to: {
                offset: 0
            },
            duration: 500,
            onupdate: this.__onUpdate._$bind(this),
            onstop: this.__onStop._$bind(this)
        });
        this.__easeinout._$play()
    };
    d.__onUpdate = function(t) {
        this.__body.style.opacity = t.offset
    };
    d.__onStop = function(t) {
        this.__easeinout && this.__easeinout._$recycle();
        this.__onHide && this.__onHide();
        this._$recycle();
        if(this.__mask) this.__mask = this.__mask._$recycle()
    };
    d.__destroy = function() {
        this.__body.style.opacity = 1;
        this.__eDetail.innerText = "";
        delete this.__timer;
        delete this.__easeinout;
        this.__super()
    };
    d.__onClickClose = function(t) {
        if(this.__eDetail) this.__eDetail.innerText = "";
        if(this.__easeinout) delete this.__easeinout;
        if(this.__timer) delete this.__timer;
        this._$recycle()
    };
    d.__onClickDetail = function(t) {
        new c({
            data: {
                message: this.message,
                msg: this.result.msg,
                query: this.result.query
            }
        }).show();
        this.__onClickClose()
    };
    return u
}, 1, 3, 6, 142, 14, 15, 143, 144, 145, 146);
I$(136, function() {
    function arrayToMap(t) {
        return t.reduce(function(t, e, i) {
            t[e] = i;
            return t
        }, {})
    }
    var out = eval("(" + localStorage.RECENT_COLORS + ")");
    if(out && out.length) {
        window.RECENT_COLORS = [];
        for(var i = 0; i < out.length; i++) {
            var item = out[i];
            if(item && !isNaN(item.r) && !isNaN(item.g) && !isNaN(item.b)) window.RECENT_COLORS.push(item)
        }
    } else window.RECENT_COLORS = [];
    var consts = {
        ENV: {},
        mname: {
            $type: "Dimension",
            interpretation: "Discrete",
            role: "Dimension",
            field: "mname",
            fieldId: -11,
            dataType: "String",
            produced: "Generated",
            alias: "度量名称"
        },
        mvalue: {
            $type: "Measure",
            interpretation: "Continuous",
            produced: "Generated",
            role: "Measure",
            field: "mvalue",
            fieldId: -10,
            alias: "度量值",
            dataType: "Decimal"
        },
        latitude: {
            $type: "Measure",
            role: "Measure",
            field: "Latitude",
            dataType: "Decimal",
            fieldId: -12,
            alias: "纬度",
            interpretation: "Continuous",
            produced: "GeoGenerated",
            geoRole: "Latitude"
        },
        longitude: {
            $type: "Measure",
            role: "Measure",
            field: "Longitude",
            dataType: "Decimal",
            fieldId: -13,
            alias: "经度",
            interpretation: "Continuous",
            produced: "GeoGenerated",
            geoRole: "Longitude"
        },
        record: {
            $type: "MeasurePill",
            expr: "1",
            alias: "记录数",
            field: "Record",
            dataType: "Whole",
            granularity: "g0",
            tableId: -1,
            role: "Measure",
            produced: "Calculated",
            interpretation: "Continuous",
            fieldId: -15,
            aggregator: "SUM"
        },
        NOT_AREA: /size|color|angle|shape/,
        MARK_AREA_CONF: {
            color: {
                name: "颜色"
            },
            size: {
                name: "尺寸"
            },
            angle: {
                name: "角度"
            },
            details: {
                name: "细分",
                multiple: !0
            },
            labels: {
                name: "标签",
                multiple: !0
            },
            shape: {
                name: "形状"
            }
        },
        AGGREGATORS: ["SUM", "AVG", "CNT", "CNTD", "MAX", "MIN"],
        CALCLIST: ["DiffFrom", "PercentDiffFrom", "PercentFrom", "PercentOfTotal", "RunningTotal", "MovingCalculation"],
        FROMLIST: ["prev", "next", "first", "last"],
        AGGLIST: ["SUM", "AVG", "MAX", "MIN"],
        ROLES: ["Dimension", "Measure"],
        ARAES: ["filed", "column", "row", "mark", "filter"],
        DATATYPES: ["Whole", "Decimal", "DateTime", "String", "Date", "Time", "Boolean"],
        INTERPRETATIONS: ["Continuous", "Discrete"],
        pillInfo: {},
        ICONSMAP: {
            Decimal: "num",
            Whole: "num",
            Date: "date",
            DateTime: "date",
            String: "str"
        },
        AGGREGATOR_NAMES: {
            SUM: "求和",
            AVG: "平均值",
            CNT: "计数",
            CNTD: "去重计数",
            MAX: "最大值",
            MIN: "最小值"
        },
        MARK_TYPE_NAMES: {
            Automatic: {
                title: "自动"
            },
            Bar: {
                title: "柱状图",
                subMarks: [{
                    name: "Stack",
                    title: "堆叠柱状图"
                }, {
                    name: "Align",
                    title: "并列柱状图"
                }]
            },
            Line: {
                title: "线图"
            },
            Area: {
                title: "区域图"
            },
            Scatter: {
                title: "散点图"
            },
            Pie: {
                title: "饼图",
                subMarks: [{
                    name: "Disk",
                    title: "普通饼图"
                }, {
                    name: "Ring",
                    title: "环状饼图"
                }]
            },
            Text: {
                title: "文本图"
            },
            FilledMap: {
                title: "填充地图"
            }
        },
        CONDITION_NAMES: {
            Contains: "包含",
            StartWith: "开头是",
            EndWith: "结尾是",
            Without: "不包含",
            IsJust: "等于",
            AND: "并且",
            OR: "或者"
        },
        COMPARATOR_NAMES: {
            "=": "等于",
            ">=": "大于等于",
            "<=": "小于等于",
            ">": "大于",
            "<": "小于"
        },
        DATE_FUNC_NAMES: {
            YEAR: "年",
            QUARTER: "季度",
            MONTH: "月",
            WEEK: "周",
            DAYOFWEEK: "日期(星期)",
            DAY: "日",
            HOUR: "小时",
            MINUTE: "分钟",
            SECOND: "秒",
            "YEAR-MONTH": "年-月",
            "YEAR-MONTH-DAY": "年-月-日",
            "YEAR-QUARTER": "年-季度",
            "YEAR-MONTH-DAY-HOUR": "年-月-日-小时",
            "YEAR-MONTH-DAY-HOUR-MINUTE": "年-月-日-小时-分",
            "YEAR-MONTH-DAY-HOUR-MINUTE-SECOND": "年-月-日-小时-分-秒"
        },
        CONTINUOUS_FUNC: [],
        MAX_COUNT: 3e3,
        MAX_COLOR: 50,
        DS_TYPE: {
            0: "MySQL",
            1: "Oracle",
            2: "MapR Hadoop Hive",
            3: "Mammut",
            4: "Excel",
            5: "Apache Kylin",
            6: "Spark SQL",
            7: "Cheetah",
            8: "MonetDB",
            10: "数据追加",
            11: "Apache Impala",
            12: "SQL Server",
            13: "Db2"
        },
        DEFAULT_OPTIONS: {
            sizeMap: {},
            chart: {},
            referenceline: {},
            marksColor: {},
            marksShape: {},
            formatMap: {},
            sort: {},
            autoReload: {},
            displayNameMap: {}
        },
        DEFAULT_COLORS: [
            [{
                r: 13,
                g: 161,
                b: 237
            }, {
                r: 255,
                g: 161,
                b: 53
            }, {
                r: 56,
                g: 204,
                b: 72
            }, {
                r: 245,
                g: 86,
                b: 70
            }, {
                r: 177,
                g: 103,
                b: 255
            }, {
                r: 255,
                g: 217,
                b: 45
            }, {
                r: 57,
                g: 227,
                b: 221
            }, {
                r: 250,
                g: 138,
                b: 109
            }, {
                r: 113,
                g: 147,
                b: 255
            }, {
                r: 255,
                g: 104,
                b: 207
            }, {
                r: 173,
                g: 194,
                b: 187
            }, {
                r: 157,
                g: 238,
                b: 60
            }, {
                r: 95,
                g: 74,
                b: 246
            }, {
                r: 234,
                g: 201,
                b: 118
            }, {
                r: 102,
                g: 204,
                b: 255
            }, {
                r: 252,
                g: 174,
                b: 85
            }, {
                r: 79,
                g: 224,
                b: 95
            }, {
                r: 255,
                g: 140,
                b: 128
            }, {
                r: 163,
                g: 85,
                b: 245
            }, {
                r: 209,
                g: 221,
                b: 67
            }, {
                r: 55,
                g: 216,
                b: 210
            }, {
                r: 247,
                g: 121,
                b: 89
            }, {
                r: 104,
                g: 135,
                b: 235
            }, {
                r: 240,
                g: 77,
                b: 189
            }, {
                r: 47,
                g: 167,
                b: 127
            }, {
                r: 159,
                g: 206,
                b: 52
            }, {
                r: 161,
                g: 40,
                b: 190
            }, {
                r: 82,
                g: 206,
                b: 182
            }, {
                r: 95,
                g: 78,
                b: 217
            }, {
                r: 244,
                g: 190,
                b: 55
            }],
            [{
                r: 0,
                g: 0,
                b: 0
            }, {
                r: 0,
                g: 0,
                b: 51
            }, {
                r: 0,
                g: 0,
                b: 102
            }, {
                r: 0,
                g: 0,
                b: 153
            }, {
                r: 0,
                g: 0,
                b: 204
            }, {
                r: 0,
                g: 0,
                b: 255
            }, {
                r: 0,
                g: 51,
                b: 0
            }, {
                r: 0,
                g: 51,
                b: 51
            }, {
                r: 0,
                g: 51,
                b: 102
            }, {
                r: 0,
                g: 51,
                b: 153
            }, {
                r: 0,
                g: 51,
                b: 204
            }, {
                r: 0,
                g: 51,
                b: 255
            }, {
                r: 0,
                g: 102,
                b: 0
            }, {
                r: 0,
                g: 102,
                b: 51
            }, {
                r: 0,
                g: 102,
                b: 102
            }, {
                r: 0,
                g: 102,
                b: 153
            }, {
                r: 0,
                g: 102,
                b: 204
            }, {
                r: 0,
                g: 102,
                b: 255
            }, {
                r: 0,
                g: 153,
                b: 0
            }, {
                r: 0,
                g: 153,
                b: 51
            }, {
                r: 0,
                g: 153,
                b: 102
            }, {
                r: 0,
                g: 153,
                b: 153
            }, {
                r: 0,
                g: 153,
                b: 204
            }, {
                r: 0,
                g: 153,
                b: 255
            }, {
                r: 0,
                g: 204,
                b: 0
            }, {
                r: 0,
                g: 204,
                b: 51
            }, {
                r: 0,
                g: 204,
                b: 102
            }, {
                r: 0,
                g: 204,
                b: 153
            }, {
                r: 0,
                g: 204,
                b: 204
            }, {
                r: 0,
                g: 204,
                b: 255
            }]
        ],
        COLOR_TEMPLATES: null,
        RECENT_COLORS: window.RECENT_COLORS,
        CONTINUOUS_COLOR_TEMPLATES: [{
            name: "石绿",
            colors: [{
                r: 177,
                g: 234,
                b: 80
            }, {
                r: 68,
                g: 149,
                b: 34
            }],
            id: 1
        }, {
            name: "品红",
            colors: [{
                r: 244,
                g: 80,
                b: 95
            }, {
                r: 160,
                g: 5,
                b: 28
            }],
            id: 2
        }, {
            name: "橘黄",
            colors: [{
                r: 250,
                g: 215,
                b: 96
            }, {
                r: 247,
                g: 109,
                b: 29
            }],
            id: 3
        }],
        DEFAULT_SHAPES_TEMPLATES: [{
            text: "形状模板1",
            shapes: ["unfilled1", "unfilled2", "unfilled3", "unfilled4", "unfilled5", "unfilled6", "unfilled7", "unfilled8", "unfilled9", "unfilled10", "unfilled11", "unfilled12", "unfilled13", "unfilled14", "unfilled15", "unfilled16", "unfilled17", "unfilled18", "unfilled19", "unfilled20", "unfilled21"],
            id: 1,
            name: "unfilled"
        }, {
            text: "形状模板2",
            shapes: ["filled1", "filled2", "filled3", "filled4", "filled5", "filled6", "filled7", "filled8", "filled9", "filled10", "filled11", "filled12", "filled13", "filled14", "filled15", "filled16", "filled17", "filled18", "filled19", "filled20", "filled21"],
            id: 2,
            name: "filled"
        }],
        CHINA_MAP: null,
        WORLD_MAP: null
    };
    consts.DATE_FUNC = Object.keys(consts.DATE_FUNC_NAMES);
    var SHOW_FUNC = consts.SHOW_FUNC = ["YEAR", "MONTH", "DAY", "YEAR-MONTH", "YEAR-MONTH-DAY"],
        MORE_FUNC = consts.MORE_FUNC = ["YEAR-QUARTER", "YEAR-MONTH-DAY-HOUR", "YEAR-MONTH-DAY-HOUR-MINUTE", "YEAR-MONTH-DAY-HOUR-MINUTE-SECOND"],
        EXPAND_FUNC = consts.EXPAND_FUNC = consts.DATE_FUNC.filter(function(t) {
            return SHOW_FUNC.indexOf(t) === -1 && MORE_FUNC.indexOf(t) === -1
        });
    consts.TARGET_PILL = /^(row|column|filters|field|showme|mark)/;
    consts.LEVEL_AREA = /^level`/;
    consts.TARGET_FIELD = /(^row|column|filters|mark|field|dimension)|(^measure$)/;
    consts.TARGET_MVALUE = /^row|column|mark/;
    consts.NOT_REPAIR = ["YEAR-MONTH-DAY-HOUR"];
    consts.RERENDER_ACTION = ["SAVE_SIZE"];
    consts.R_NUMBER = /^[-+]?(?:[0-9]*\.[0-9]+|[0-9]+)(e\d+)?$/;
    consts.MARK_AREA = Object.keys(consts.MARK_AREA_CONF);
    consts.LABEL_TITLE = {
        inner: "内部",
        outer: "外部",
        vertical: "纵向",
        horizontal: "横向",
        red: "红色",
        black: "黑色",
        left: "居左",
        center: "居中",
        right: "居右",
        top: "顶部",
        middle: "中部",
        bottom: "底部"
    };
    consts.LABEL_LOCATION_MAP = {
        topLeft: "左上",
        left: "左中",
        bottomLeft: "左下",
        topCenter: "中上",
        center: "居中",
        bottomCenter: "中下",
        topRight: "右上",
        right: "右中",
        bottomRight: "右下"
    };
    consts.LABEL_LOCATION_ARR = ["topLeft", "topCenter", "topRight", "left", "center", "right", "bottomLeft", "bottomCenter", "bottomRight"];
    consts.LABEL_CONFIG = {
        autoConfig: {
            default: !0
        },
        showAllLabel: {
            default: !1
        },
        showMode: {
            default: ["all", "minmax", "firstlast", "none"]
        },
        positionX: {
            default: null,
            Text: ["left", "center", "right"]
        },
        location: {
            default: ["topCenter", "topLeft", "topRight", "left", "center", "right", "bottomLeft", "bottomCenter", "bottomRight"]
        },
        alignment: {
            default: ["inner", "outer"],
            "Bar:Stack": "inner",
            Line: "outer",
            Area: "outer",
            Scatter: "outer",
            Text: "inner"
        },
        fontSize: {
            default: [12, 14, 16, 18, 20, 22, 24, 26, 28]
        },
        direction: {
            default: null,
            Bar: ["horizontal", "vertical"]
        },
        color: {
            default: ["auto", "rgba(0,0,0,1)", "rgba(255,255,255,1)"]
        }
    };
    consts.LABEL_DISPLAY_OPTIONS = ["全部显示", "最大最小值显示", "头尾显示", "不显示"];
    consts.LABEL_DISPLAY_VALUES = ["all", "minmax", "firstlast", "none"];
    consts.MAX_DATA_COUNT = 2e4;
    consts.IS_AGG_AREA = /^row|measure|mark|showme|column/;
    consts.MAP_FUNC_LEVEL = ["YEAR", "QUARTER", "MONTH", "DAY"];
    consts.status = {};
    consts.PICK_MODE = {
        CONTAIN: "1",
        EXCLUDE: "2",
        ALL: "3"
    };
    consts.geoConfig = {
        country: "国家/地区",
        province: "省/市/自治区",
        city: "城市"
    };
    consts.tableCalcMap = {
        calcMap: arrayToMap(consts.CALCLIST),
        fromMap: arrayToMap(consts.FROMLIST),
        funcMap: arrayToMap(consts.DATE_FUNC),
        aggMap: arrayToMap(consts.AGGLIST)
    };
    consts.quickCalc = {
        DODV: {
            name: "环比增长值",
            status: !1
        },
        DODR: {
            name: "环比增长率",
            status: !1
        },
        YOYV: {
            name: "同比增长值",
            status: !1
        },
        YOYR: {
            name: "同比增长率",
            status: !1
        },
        POT: {
            name: "总额百分比",
            status: !0
        },
        YTD: {
            name: "YTD累积",
            status: !1
        },
        MTD: {
            name: "MTD累积",
            status: !1
        }
    };
    consts.quickCalcDate = {
        MONTH: {
            name: "月",
            status: !1
        },
        YEAR: {
            name: "年",
            status: !1
        }
    };
    consts.FUNCTION_LIST = [{
        name: "求和聚合",
        expression: "SUM(表达式)",
        description: "返回表达式中所有值的总和。SUM 只能用于数字字段。",
        example: "SUM([销售额])",
        syntax: "SUM(表达式)"
    }, {
        name: "平均聚合",
        expression: "AVG(表达式)",
        description: "返回表达式中所有值的平均值。AVG 只能用于数字字段。",
        example: "AVG([成本])",
        syntax: "AVG(表达式)"
    }, {
        name: "计数聚合",
        expression: "COUNT(表达式)",
        description: "返回组中的项目数。",
        example: "COUNT([客户名称])",
        syntax: "COUNT(表达式)"
    }, {
        name: "去重计数聚合",
        expression: "COUNTD(表达式)",
        description: "返回组中的不同项目数。",
        example: "COUNTD([产品名称])",
        syntax: "COUNTD(表达式)"
    }, {
        name: "最大值聚合",
        expression: "MAX(表达式)",
        description: "返回表达式在所有记录中的最大值。MAX只能用于数字字段。",
        example: "MAX([访问量])",
        syntax: "MAX(表达式)"
    }, {
        name: "最小值聚合",
        expression: "MIN(表达式)",
        description: "返回表达式在所有记录中的最小值。MIN只能用于数字字段。",
        example: "MIN([访问量])",
        syntax: "MIN(表达式)"
    }, {
        name: "加法",
        expression: "表达式1 + 表达式2",
        description: "当表达式1和表达式2的类型均为数值时，做算术加法，当它们的类型为字符串时，做字符串连接。",
        example: '用法1，数值相加：[固定成本] + [非固定成本]；用法2，字符串连接：[省份] + "/" + [城市] 。',
        syntax: "表达式1 + 表达式2"
    }, {
        name: "减法",
        expression: "表达式1 - 表达式2",
        description: "- 作为减法运算符，只能用于数值字段。",
        example: "[销售额] - [成本]",
        syntax: "表达式1 - 表达式2"
    }, {
        name: "乘法",
        expression: "表达式1 * 表达式2",
        description: "* 作为乘法运算符，只能用于数字字段。",
        example: "[单价] * [个数]",
        syntax: "表达式1 * 表达式2"
    }, {
        name: "除法",
        expression: "表达式1 / 表达式2",
        description: "/ 作为除法运算符，只能用于数字字段。",
        example: "[总人口] / [城市数量]",
        syntax: "表达式1 / 表达式2"
    }, {
        name: "幂运算",
        expression: "POWER(底数, 指数)",
        description: "返回底数的指数次方。",
        example: "POWER(2, 3) = 2 * 2 * 2 = 8",
        syntax: "POWER(底数, 指数)"
    }, {
        name: "日期部分",
        expression: "DATEPART(日期部分, 日期型表达式)",
        description: '返回指定日期型表达式的某个部分（由日期部分参数指定需要的部分），可使用的日期部分包括 "year", "quarter", "month", "week", "day" , "dayofweek", "hour", "minute", "second"；函数返回一个整数。',
        example: '当 [日期] 为 1990-03-16 时 DATEPART("month", [日期]) = 3',
        syntax: "DATEPART(日期部分, 日期型表达式)"
    }, {
        name: "日期截断",
        expression: "DATETRUNC(日期部分, 日期型表达式)",
        description: '将日期型表达式的精度截断到指定部分（由日期部分参数指定），可使用的日期部分包括 "year", "quarter", "month", "day", "hour", "minute", "second"；函数返回一个日期。',
        example: '当 [日期] 字段的值为 1988-08-31, 1988-09-11, 1990-03-16... 时，DATETRUNC("month", [日期])的结果为 1988-08-01, 1988-08-01, 1990-03-01...',
        syntax: "DATETRUNC(日期部分, 日期型表达式)"
    }, {
        name: "日期加法",
        expression: "DATEADD(日期部分, 整数, 日期型表达式)",
        description: '将日期型表达式的日期部分增加整数，可使用的日期部分包括 "year", "quarter", "month", "week", "day", "hour", "minute", "second"；函数返回一个日期。',
        example: 'DATEADD("MONTH", 1, [订单时间]) 表示将 [订单时间] 增加一个月',
        syntax: "DATEADD(日期部分, 整数, 日期型表达式)"
    }, {
        name: "日期减法",
        expression: "DATEDIFF(日期部分, 开始日期, 结束日期)",
        description: '计算开始日期和结束日期的日期部分的差值，可使用的日期部分包括 "year", "quarter", "month", "week", "day", "hour", "minute", "second"；函数返回一个整数。',
        example: 'DATEDIFF("DAY", [发货时间], [收货时间]) 表示从发货到收货所用的天数',
        syntax: "DATEDIFF(日期部分, 开始日期, 结束日期)"
    }, {
        name: "IF条件",
        expression: "IF 条件 THEN 返回值1 ELSE 返回值2",
        description: "当条件满足时，返回返回值1，否则返回返回值2。",
        example: '简单用法：IF [销售额] > 100 THEN "优" ELSE "差" 。嵌套用法：IF [销售额] > 100 THEN "优" ELSE IF [销售额] > 50 THEN "良" ELSE "差"',
        syntax: "IF 条件 THEN 返回值1 ELSE 返回值2"
    }, {
        name: "CASE条件",
        expression: "CASE 表达式 WHEN 值1 THEN 返回值1 ... [ELSE 默认返回值]",
        description: "当表达式为值1时返回返回值1 ... 否则返回默认返回值。可以不指定默认返回值 （但这时候应该确保枚举到了所有情况）。",
        example: 'CASE [产品ID] WHEN 1 THEN "家具" WHEN 2 THEN "电器" ELSE STR([产品ID])',
        syntax: "CASE 表达式 WHEN 值1 THEN 返回值1 WHEN 值2 THEN 返回值2 ELSE 默认返回值"
    }, {
        name: "转换为字符串",
        expression: "STR(表达式)",
        description: "将表达式转换为字符串类型。",
        example: 'STR(200) = "200" (返回的 "200" 为字符串类型)',
        syntax: "STR(表达式)"
    }, {
        name: "比较运算",
        expression: "表达式1 比较符 表达式2",
        description: "比较两个表达式，返回布尔值，可用的比较符有：=, !=, >, <, >=, <=, 分别表示 等于，不等于，大于，小于，大于等于，小于等于",
        example: "[销售额] >= 8000",
        syntax: "表达式1 = 表达式2"
    }, {
        name: "逻辑与",
        expression: "布尔值1 AND 布尔值2",
        description: "逻辑与运算",
        example: "[销售额] >= 0 AND [销售额] <= 8000",
        syntax: "布尔值1 AND 布尔值2"
    }, {
        name: "逻辑或",
        expression: "布尔值1 OR 布尔值2",
        description: "逻辑或运算",
        example: '[用户名] = "小张" OR [用户名] = "小李"',
        syntax: "布尔值1 OR 布尔值2"
    }, {
        name: "逻辑否",
        expression: "NOT 布尔值",
        description: "逻辑否运算",
        example: 'NOT [用户名] = "小张"',
        syntax: "NOT 布尔值"
    }, {
        name: "空值判断",
        expression: "ISNULL(表达式)",
        description: "判断表达式的值是否为NULL",
        example: 'IF ISNULL([用户名]) THEN "匿名用户" ELSE [用户名]',
        syntax: "ISNULL(表达式)"
    }];
    return consts
});
I$(7, function(t, e, i, n, r) {
    var a = {},
        s = [].slice,
        o = {}.toString;
    a.rgba2str = function(t) {
        return t ? ["rgba(" + t.r, t.g, t.b, ("undefined" == typeof t.a ? 1 : t.a) + ")"].join(",") : ""
    }, a.$ = function(t, e) {
        return(e || document).querySelector(t)
    };
    a.$$ = function(t, e) {
        return(e || document).querySelectorAll(t)
    };
    a.cid = function(t) {
        var e = 0,
            t = "p_";
        return function() {
            return t + (+new Date).toString(36) + e++
        }
    }();
    a.flattern = function(t) {};
    a.self = function(t) {
        return t
    };
    a.slice = function(t, e) {
        return s.call(t, e)
    };
    var l = a.typeOf = function(t) {
        return null == t ? String(t) : o.call(t).slice(8, -1).toLowerCase()
    };
    if(!String.prototype.trim) String.prototype.trim = function() {
        return this.replace(/(^\s+)|(\s+$)/g, "")
    };
    if(!Array.prototype.last) Array.prototype.last = function() {
        return this[this.length - 1]
    };
    Array.prototype._$findOne = function(t) {
        var e;
        this.some(function(i, n) {
            if(t(i, n)) {
                e = i;
                return !0
            }
        });
        return e
    };
    a._$formatDay = function(e) {
        return t._$format(e, "yyyy-MM-dd")
    };
    a._$formatDayTime = function(e) {
        return t._$format(e, "yyyy-MM-dd HH:mm:ss")
    };
    a._$toggle = function(t, i) {
        if(e._$hasClassName(t, i)) e._$delClassName(t, i);
        else e._$addClassName(t, i)
    };
    a._$string2emails = function(t) {
        t = t || "";
        var e = t.split(";");
        return e.filter(function(t) {
            return t.length
        })
    };
    a.phone = function() {
        var t = navigator.userAgent,
            e = t.match(/(iPad).*OS\s([\d_]+)/),
            i = !e && t.match(/(iPhone\sOS)\s([\d_]+)/),
            n = t.match(/(Android)\s+([\d.]+)/),
            r = i || n;
        return {
            isIphone: i,
            isAndroid: n,
            isMobile: r
        }
    }();
    a._$browser = function() {
        var t = navigator.userAgent.toLowerCase(),
            e = {},
            i = function(e) {
                return e.test(t)
            },
            n = "CSS1Compat" == document.compatMode,
            r = function(e, i) {
                var n;
                return e && (n = i.exec(t)) ? parseFloat(n[1]) : 0
            },
            a = document.documentMode,
            s = i(/opera/),
            o = i(/\bchrome\b/),
            l = i(/webkit/),
            c = !o && i(/safari/),
            u = !s && i(/msie/),
            d = u && (i(/msie 7/) && 8 != a && 9 != a || 7 == a),
            h = u && (i(/msie 8/) && 7 != a && 9 != a || 8 == a),
            f = u && (i(/msie 9/) && 7 != a && 8 != a || 9 == a),
            p = u && i(/msie 6/),
            _ = !l && i(/gecko/),
            m = i(/windows|win32/),
            g = i(/macintosh|mac os x/),
            v = i(/linux/),
            y = r(!0, /\bchrome\/(\d+\.\d+)/),
            b = r(!0, /\bfirefox\/(\d+\.\d+)/),
            x = r(u, /msie (\d+\.\d+)/),
            $ = r(s, /version\/(\d+\.\d+)/),
            w = r(c, /version\/(\d+\.\d+)/),
            k = r(l, /webkit\/(\d+\.\d+)/),
            S = /^https/i.test(window.location.protocol);
        NEJ.X(e, {
            isStrict: n,
            isChrome: o,
            isWebKit: l,
            isSafari: c,
            isIE: u,
            isIE7: d,
            isIE8: h,
            isIE9: f,
            isIE6: p,
            isGecko: _,
            isWindows: m,
            isMac: g,
            isLinux: v,
            chromeVersion: y,
            firefoxVersion: b,
            ieVersion: x,
            operaVersion: $,
            safariVersion: w,
            webKitVersion: k,
            isSecure: S
        });
        return e
    };
    a._$message = function(t, e, i) {
        this.__feedback = n._$$Feedback._$allocate({
            clazz: "m-confirm-" + (e || "err"),
            message: t,
            mask: i || !1
        });
        return this.__feedback
    };
    var c = a.extend = function(t) {
            var e, i, n = s.call(arguments, 1),
                r = n.length;
            if("boolean" == typeof n[r - 1]) i = n.pop();
            for(var a = 0, r = n.length; a < r; a++) {
                e = n[a];
                if(e) {
                    for(var o in e)
                        if(null == t[o] || i === !0) t[o] = e[o]
                } else;
            }
            return t
        },
        u = a.assign = function() {
            var t = a.slice(arguments);
            t.push(!0);
            return a.extend.apply(this, t)
        };
    a.deepClone = function(t) {
        return JSON.parse(JSON.stringify(t))
    };
    var d = (a.pick = function(t, e, i, n) {
            var r = {};
            i.forEach(function(t) {
                r[t] = e[t]
            });
            return c(t, r, n)
        }, a.clone = function(t) {
            var e = l(t);
            if("array" === e) return a.slice(t);
            if("object" === e) return c({}, t);
            else return t
        }),
        h = a.dset = function(t, e, i, n) {
            if(n === !0) n = {
                replace: !0
            };
            n = n || {};
            var r = n.replace;
            if("number" == typeof i) i = "" + i;
            if("string" == typeof i) i = i.split(".");
            i = i || [];
            var a = l(t),
                s = l(e),
                o = i.length;
            if(!o) return !r && "object" === a && "object" === s ? u({}, t, e) : e;
            var c = i.shift(),
                f = d(t);
            if(void 0 === f && n.autoCreated) f = {};
            f[c] = h(f[c], e, i, n);
            return f
        },
        f = a.dget = function(t, e) {
            if("string" == typeof e) e = e.split(".");
            e.some(function(e) {
                t = t[e];
                if(null == t) return !0
            });
            return t
        },
        p = (a.dsplice = function(t, e) {
            var i = f(t, e).slice(),
                n = a.slice(arguments, 2);
            i.splice.apply(i, n);
            return h(t, i, e)
        }, a.dunset = function(t, e) {
            var i = e.split("."),
                n = i.pop(),
                r = i.join("."),
                a = _.extend({}, f(t, r));
            delete a[n];
            return h(t, a, r, !0)
        }, r.tableCalcMap, a.pid = function(t, e) {
            if(!t) return !1;
            if(e === !0) return t.fieldId || "" + (t.tableId || "_0") + "`" + (t.field || "");
            else return reflex.pill_utils.generatePid(t)
        }),
        m = (a.parsePid = function(t) {
            return reflex.pill_utils.parsePid(t)
        }, a.indexOf = function(t, e, i) {
            for(var n = 0, r = t.length; n < r; n++)
                if(e(t[n], n)) return i ? t[n] : n;
            return !i ? -1 : void 0
        }),
        g = (a.lastIndexOf = function(t, e, i) {
            for(var n = t.length; n--;)
                if(e(t[n], n)) return i ? t[n] : n;
            return !i ? -1 : void 0
        }, a.findPill = function(t, e) {
            return m(t, function(t) {
                return p(t) === e
            })
        }, a.isDate = function(t) {
            return /Date|Time/.test(t.dataType || t) || "DateTime" === t.convertedType
        });
    a.isDateTime = function(t) {
        return /DateTime/.test(t.dataType || t) || "DateTime" === t.convertedType
    }, a.isRangeDate = function(t) {
        var e = t.mapFunction;
        return g(t) && (!e || ~r.CONTINUOUS_FUNC.indexOf(e))
    };
    a.ptext = function(t, e) {
        if(!t) return "";
        if("number" == typeof e) e = {
            type: e
        };
        e = e || {};
        var i, n = e.type,
            a = e.schema;
        if(a) i = ("Dimension" === t.role ? a.dimensions : a.measures)._$findOne(function(e) {
            return e.fieldId === t.fieldId
        });
        if(!i) i = r.pillInfo[p(t, !0)];
        var s = i && i.alias || t.alias,
            o = i && i.granularity || t.granularity,
            l = t.aggregator;
        if(g(t) && t.mapFunction && "Dimension" === t.role) s = r.DATE_FUNC_NAMES[t.mapFunction] + "(" + s + ")";
        else if(t.tableId !== -1 && l && "Measure" === t.role && 2 !== n) s = r.AGGREGATOR_NAMES[t.aggregator] + "(" + s + ")";
        else if(t.tableId === -1 && "g1" !== o && l && "Measure" === t.role && 2 !== n) s = r.AGGREGATOR_NAMES[t.aggregator || l] + "(" + s + ")";
        else if("g1" === o && t.tableId === -1 && 2 !== n) s = "聚合(" + s + ")";
        return s
    }, a.aggregator = function(t) {
        if("String" === t || "Boolean" === t) return ["CNT", "CNTD"];
        if(/Decimal|Whole/.test(t)) return r.AGGREGATORS;
        if("DateTime" === t || "Date" === t || "Time" === t) return ["CNT", "CNTD"];
        else return []
    };
    a.formatType = function(t) {
        return t.toLowerCase().replace(/_(\w)/g, function(t, e) {
            return e.toUpperCase()
        })
    };
    a.lowerStart = function(t) {
        return(t || "").replace(/^\w/, function(t) {
            return t.toLowerCase()
        })
    };
    a.getSearch = function() {
        var t = document.location.search,
            e = {};
        if(t)
            for(var i = t.substr(1).split("&"), n = 0; n < i.length; n++) {
                var r = i[n].split("="),
                    a = decodeURIComponent(r[0]),
                    s = decodeURIComponent(r[1]);
                e[a] = s
            }
        return e
    };
    a.getSearchByKey = function(t) {
        var e = document.location.href,
            i = "[&\\?]+" + t + "=(.*(?=[&#])|.*$)",
            n = e.match(i);
        if(n && n.length) return decodeURIComponent(n[1]);
        else return null
    };
    a.message = function(t, e, i) {
        n._$$Feedback._$allocate({
            clazz: "m-confirm-" + (e || "err"),
            message: t,
            mask: i || !1
        })
    };
    a.messageDetail = function(t, e) {
        n._$$Feedback._$allocate({
            clazz: "m-confirm-detail m-confirm-err",
            code: t.code,
            message: t.message,
            result: t.result || {},
            mask: e || !1
        })
    };
    var v = ["每天", "每周", "每月"],
        y = ["周日", "周一", "周二", "周三", "周四", "周五", "周六"],
        b = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "最后一天"];
    a._$frequencyMap = function(t) {
        return v[t - 1]
    };
    a._$weekMap = function(t) {
        return y[t]
    };
    a._$dayMap = function(t) {
        return b[t - 1]
    };
    a.createAllComputed = function(t, e, i) {
        return {
            get: function(n) {
                if(!n[t]) return !1;
                else return n[t].filter(function(t) {
                        return !!t[e] != !!i
                    }).length === n[t].length
            },
            set: function(n, r) {
                if(r[t]) r[t].forEach(function(t) {
                    t[e] = !i ? !!n : !n
                })
            }
        }
    };
    a.findParent = function(t, e) {
        var i;
        if("string" == typeof e) i = function(t) {
            return t.tagName.toLowerCase() === e
        };
        else i = e;
        for(var n; t;) {
            n = i(t);
            if(n === !0) return t;
            else if(n === !1) return;
            t = t.parentNode
        }
    };
    a.isPromise = function(t) {
        return !!t && ("object" == typeof t || "function" == typeof t) && "function" == typeof t.then
    };
    var x = r.MARK_AREA_CONF;
    a.eachMark = function(t) {
        for(var e in x) {
            x[e];
            t(x[e], e)
        }
    };
    a.setVendorStyle = function(t, e, i) {
        var n = e.replace(/^\w/, function(t) {
            return t.toUpperCase()
        });
        t.style["Webkit" + n] = i;
        t.style["Moz" + n] = i;
        t.style["Ms" + n] = i;
        t.style["O" + n] = i;
        t.style[e] = i
    };
    var $ = /^[\u4e00-\u9fbf]/;
    a.byAlphabet = function(t, e, i) {
        if($.test(t) && $.test(e)) return 0;
        if(t === e) return 0;
        if(e > t) return i ? 1 : -1;
        else return i ? -1 : 1
    };
    a.isEmptyObject = function(t) {
        var e;
        for(e in t) return !1;
        return !0
    };
    a.errMsg = function(t, e) {
        this._error = i._$$Error._$allocate({
            message: t,
            parent: e
        });
        return this._error
    };
    a.createUUID = function() {
        function t() {
            return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1)
        }
        return t() + t() + "-" + t() + "-" + t() + "-" + t() + "-" + t() + t() + t()
    };
    a.isReflexState = function(t) {};
    a._$recycleWindow = function() {
        var i = e._$getByClassName(document.body, "m-window");
        t._$forEach(i, function(t, i) {
            e._$remove(t, !0)
        })
    };
    a._$recycleOverlay = function() {
        var i = e._$getByClassName(document.body, "m-overlay");
        t._$forEach(i, function(t, i) {
            e._$remove(t, !0)
        })
    };
    a.currentStyle = function(t) {
        return t.currentStyle || document.defaultView.getComputedStyle(t, null)
    };
    a.isContinuous = function(t) {
        return t && "Continuous" === t.interpretation
    };
    a.getMapFuncInPid = function(t) {
        var e = t.split("`"),
            i = e[3];
        return i in r.DATE_FUNC_NAMES ? i : null
    };
    a.infoWithNoEmail = function(t) {
        if("netease" != window.deployType) return "邮箱" + t + "未在网易有数注册，请先注册";
        else return "邮箱" + t + "未在有数激活，请通过OpenID激活"
    };
    a.applyRecord = function() {
        if(window.__LOG__) window.__LOG__.applyRecord.apply(null, arguments)
    };
    return a
}, 4, 3, 135, 12, 136);
I$(425, function(t, e, i, n) {
    t.__getItemInStorage = function(t) {
        return localStorage.getItem(t)
    };
    t.__setItemToStorage = function(t, e) {
        localStorage.setItem(t, e)
    };
    t.__removeItemFromStorage = function(t) {
        localStorage.removeItem(t)
    };
    t.__clearStorage = function() {
        localStorage.clear()
    };
    t.__initStorage = function() {
        (document.onstorageready || i)()
    };
    t.__isStorageReady = function() {
        return !0
    };
    return t
});
I$(230, function(t, e, i, n, r, a, s) {
    if("trident" === t._$KERNEL.engine && t._$KERNEL.release <= "3.0") I$(427, function(t, n) {
        var r, a = function() {
            if(!r) n._$flash({
                hidden: !0,
                src: t._$get("storage.swf"),
                params: {
                    AllowScriptAccess: "sameDomain"
                },
                onready: function(t) {
                    if(!t) console.log("flash for localStorage unavailable");
                    else {
                        r = t;
                        r.initStorage("nej-storage")
                    }
                    e._$dispatchEvent(document, "storageready")
                }
            })
        };
        i.__getItemInStorage = function(t) {
            if(r) return r.getItem(t)
        };
        i.__setItemToStorage = function(t, e) {
            if(r) r.setItem(t, e)
        };
        i.__removeItemFromStorage = function(t) {
            if(r) r.removeItem(t)
        };
        i.__clearStorage = function() {
            if(r) r.clear()
        };
        i.__initStorage = function() {
            a()
        };
        i.__isStorageReady = function() {
            return !!r
        }
    }, 304, 426);
    return i
}, 148, 6, 425);
I$(58, function(t, e, i, n, r, a, s, o, l) {
    var c = {};
    a._$setDataInStorage = function(t, e) {
        var i = JSON.stringify(e);
        try {
            r.__setItemToStorage(t, i)
        } catch(t) {
            console.error(t.message);
            console.error(t)
        }
        if(i != r.__getItemInStorage(t)) c[t] = e
    };
    a._$getDataInStorage = function(t) {
        var e = JSON.parse(r.__getItemInStorage(t) || "null");
        return null == e ? c[t] : e
    };
    a._$getDataInStorageWithDefault = function(t, e) {
        var i = a._$getDataInStorage(t);
        if(null == i) {
            i = e;
            a._$setDataInStorage(t, i)
        }
        return i
    };
    a._$delDataInStorage = function(t) {
        delete c[t];
        r.__removeItemFromStorage(t)
    };
    a._$clearDataInStorage = function() {
        var t = function(t, e, i) {
            delete i[e]
        };
        return function() {
            e._$loop(c, t);
            r.__clearStorage()
        }
    }();
    n._$$CustomEvent._$allocate({
        element: document,
        event: "storageready",
        oneventadd: function() {
            if(r.__isStorageReady()) i._$dispatchEvent(document, "storageready")
        }
    });
    var u = function() {
        var t = function(t, e, i) {
            r.__setItemToStorage(e, JSON.stringify(t));
            delete i[e]
        };
        return function() {
            e._$loop(c, t)
        }
    }();
    i._$addEvent(document, "storageready", u);
    r.__initStorage();
    if(!0) t.copy(t.P("nej.j"), a);
    return a
}, 129, 4, 6, 149, 230);
I$(591, function(t, e, i, n, r, a, s, o, l) {
    var c, u = "dat-" + +new Date;
    a._$$CacheAbstract = e._$klass();
    c = a._$$CacheAbstract._$extend(n._$$EventTarget);
    c.__init = function() {
        this.__super();
        this.__cache = this.constructor[u];
        if(!this.__cache) {
            this.__cache = {};
            this.__cache[u + "-l"] = {};
            this.constructor[u] = this.__cache
        }
    };
    c.__getDataInCache = function(t) {
        return this.__cache[t]
    };
    c.__setDataInCache = function(t, e) {
        this.__cache[t] = e
    };
    c.__getDataInCacheWithDefault = function(t, e) {
        var i = this.__getDataInCache(t);
        if(null == i) {
            i = e;
            this.__setDataInCache(t, i)
        }
        return i
    };
    c.__delDataInCache = function(t) {
        if(null == t) i._$loop(this.__cache, function(t, e) {
            if(e != u + "-l") this.__delDataInCache(e)
        }, this);
        else delete this.__cache[t]
    };
    c.__delDataInStorage = function(t) {
        return r._$delDataInStorage(t)
    };
    c.__getDataInStorage = function(t) {
        return r._$getDataInStorage(t)
    };
    c.__setDataInStorage = function(t, e) {
        r._$setDataInStorage(t, e)
    };
    c.__getDataLocalWithDefault = function(t, e) {
        var i = this.__getDataLocal(t);
        if(null == i) {
            i = e;
            this.__setDataLocal(t, i)
        }
        return i
    };
    c.__getDataLocal = function(t) {
        var e = this.__getDataInCache(t);
        if(null != e) return e;
        e = this.__getDataInStorage(t);
        if(null != e) this.__setDataInCache(t, e);
        return e
    };
    c.__setDataLocal = function(t, e) {
        this.__setDataInStorage(t, e);
        this.__setDataInCache(t, e)
    };
    c.__delDataLocal = function(t) {
        if(null == t) i._$loop(this.__cache, function(t, e) {
            if(e != u + "-l") this.__delDataLocal(e)
        }, this);
        else {
            delete this.__cache[t];
            r._$delDataInStorage(t)
        }
    };
    c._$clearDataLocal = function() {
        this.__delDataLocal()
    };
    c.__doCallbackRequest = function(t) {
        var e = this.__cache[u + "-l"],
            n = l.slice.call(arguments, 1);
        i._$forEach(e[t], function(t) {
            try {
                t.apply(this, n)
            } catch(t) {
                if(!1) throw t;
                console.error(t.message);
                console.error(t.stack)
            }
        });
        delete e[t]
    };
    c.__doQueueRequest = function(t, e) {
        e = e || o;
        var i = this.__cache[u + "-l"][t];
        if(!i) {
            i = [e];
            this.__cache[u + "-l"][t] = i;
            return !1
        }
        i.push(e);
        return !0
    };
    c.__doClearReqQueue = function(t) {
        delete this.__cache[u + "-l"][t]
    };
    c.__hasFragment = function(t, e, i) {
        if(!t) return !1;
        e = parseInt(e) || 0;
        i = parseInt(i) || 0;
        if(!i) {
            if(!t.loaded) return !1;
            i = t.length
        }
        if(t.loaded) i = Math.min(i, t.length - e);
        for(var n = 0; n < i; n++)
            if(!t[e + n]) return !1;
        return !0
    };
    c._$isFragmentFilled = function(t, e, i) {
        return this.__hasFragment(this._$getListInCache(t), e, i)
    };
    if(!0) t.P("nej.ut")._$$Cache = a._$$CacheAbstract;
    return a
}, 129, 1, 4, 19, 58);
I$(433, function(t, e, i, n, r, a, s, o) {
    var l;
    r._$$CacheList = e._$klass();
    l = r._$$CacheList._$extend(n._$$CacheAbstract);
    l.__reset = function(t) {
        this.__super(t);
        this.__key = t.key || "id";
        this.__data = t.data || a;
        this.__auto = !!t.autogc;
        this.__doSwapCache(t.id)
    };
    l.__destroy = function() {
        this.__super();
        if(this.__timer) this.__doGCAction()
    };
    l.__doSwapCache = function(t) {
        var e;
        if(t) {
            e = this.__cache[t];
            if(!e) {
                e = {};
                this.__cache[t] = e
            }
        }
        e = e || this.__cache;
        e.hash = e.hash || {};
        this.__lspl = e
    };
    l.__doGCAction = function() {
        this.__timer = window.clearTimeout(this.__timer);
        var t = {};
        i._$loop(this.__lspl, function(e, n) {
            if("hash" != n)
                if(i._$isArray(e)) i._$forEach(e, function(e) {
                    if(e) t[e[this.__key]] = !0
                }, this)
        }, this);
        i._$loop(this.__getHash(), function(e, i, n) {
            if(!t[i]) delete n[i]
        })
    };
    l.__doGCSchedule = function() {
        if(this.__timer) this.__timer = window.clearTimeout(this.__timer);
        this.__timer = window.setTimeout(this.__doGCAction._$bind(this), 150)
    };
    l.__doSaveItemToCache = function(t, e) {
        if(!i._$isArray(t)) {
            t = this.__doFormatItem(t, e) || t;
            if(!t) return null;
            var n = t[this.__key];
            if(null != n) {
                var r = this.__getHash()[n];
                if(r) t = i._$merge(r, t);
                this.__getHash()[n] = t
            }
            delete t.__dirty__;
            return t
        }
        var a = [];
        i._$forEach(t, function(t) {
            a.push(this.__doSaveItemToCache(t, e))
        }, this);
        return a
    };
    l.__doRemoveItemFromList = function(t, e) {
        var n = null,
            r = this.__key;
        if(!i._$isArray(e)) {
            var n = null,
                r = this.__key;
            e = e[r] || e;
            var a = this._$getListInCache(t),
                s = i._$indexOf(a, function(t) {
                    return !!t && t[r] == e
                });
            if(s >= 0) {
                n = a[s];
                a.splice(s, 1)
            }
            return n
        }
        var n = [];
        i._$reverseEach(e, function(e) {
            n.unshift(this.__doRemoveItemFromList(t, e))
        }, this);
        return n
    };
    l.__doFormatItem = s;
    l.__doUnshiftToList = function(t, e) {
        if(e)
            if(i._$isArray(e)) i._$reverseEach(e, function(e) {
                this.__doUnshiftToList(t, e)
            });
            else {
                var n = this._$getListInCache(t),
                    e = this.__doSaveItemToCache(e, t);
                if(e) n.unshift(e)
            }
    };
    l._$setTotal = function(t, e) {
        var i = this._$getListInCache(t);
        i.length = Math.max(i.length, e);
        this._$setLoaded(t)
    };
    l._$getTotal = function(t) {
        return this._$getListInCache(t).length
    };
    l._$setLoaded = function(t, e) {
        this._$getListInCache(t).loaded = e !== !1
    };
    l._$isLoaded = function(t) {
        return !!this._$getListInCache(t).loaded
    };
    l._$setListInCache = function(t, e) {
        this._$clearListInCache(t);
        this.__getList({
            key: t,
            offset: 0,
            limit: e.length + 1
        }, {
            list: e,
            total: e.length
        })
    };
    l._$getListInCache = function() {
        var t = function(t) {
            return(t || "") + (!t ? "" : "-") + "list"
        };
        return function(e) {
            var e = t(e),
                i = this.__lspl[e];
            if(!i) {
                i = [];
                this.__lspl[e] = i
            }
            return i
        }
    }();
    l.__getHash = function() {
        var t = this.__lspl.hash;
        if(!t) {
            t = {};
            this.__lspl.hash = t
        }
        return t
    };
    l._$pullRefresh = function() {
        var t = function(t) {
            return "r-" + t.key
        };
        return function(e) {
            var n = i._$merge({}, e),
                r = t(n),
                a = this._$dispatchEvent._$bind(this);
            if(!this.__doQueueRequest(r, a)) {
                n.rkey = r;
                n.onload = this.__pullRefresh._$bind(this, n);
                this._$dispatchEvent("dopullrefresh", n)
            }
        }
    }();
    l.__pullRefresh = function(t, e) {
        var i = t.key,
            n = parseInt(e.total),
            r = e.list || e.result;
        this.__doUnshiftToList(i, r || e);
        if(!isNaN(n) && r) {
            this._$getListInCache(i).length = n;
            this._$setLoaded(i)
        }
        this.__doCallbackRequest(t.rkey, "onpullrefresh", t)
    };
    l._$getList = function() {
        var t = function(t) {
            return "r-" + t.key + "-" + t.offset + "-" + t.limit
        };
        return function(e) {
            e = e || a;
            var i = {
                    key: "" + e.key || "",
                    ext: e.ext || null,
                    data: e.data || null,
                    offset: parseInt(e.offset) || 0,
                    limit: parseInt(e.limit) || 0
                },
                n = this._$getListInCache(i.key),
                r = this.__hasFragment(n, i.offset, i.limit);
            if(!r) {
                var s = t(i),
                    o = this._$dispatchEvent._$bind(this);
                if(!this.__doQueueRequest(s, o)) {
                    i.rkey = s;
                    i.onload = this.__getList._$bind(this, i);
                    this._$dispatchEvent("doloadlist", i)
                }
            } else this._$dispatchEvent("onlistload", i)
        }
    }();
    l.__getList = function() {
        var t = function(t, e, i) {
            if(t) return !0;
            i.splice(e, 1)
        };
        return function(e, n) {
            e = e || a;
            if(n) {
                var r = e.key,
                    s = e.offset,
                    o = this._$getListInCache(r),
                    l = n || [];
                if(!i._$isArray(l)) {
                    l = n.result || n.list || [];
                    var c = parseInt(n.total);
                    if(!isNaN(c) || c > l.length) this._$setTotal(r, c)
                }
                i._$forEach(l, function(t, e) {
                    o[s + e] = this.__doSaveItemToCache(t, r)
                }, this);
                if(l.length < e.limit) {
                    this._$setLoaded(r);
                    i._$reverseEach(o, t)
                }
                this.__doCallbackRequest(e.rkey, "onlistload", e)
            } else this.__doCallbackRequest(e.rkey, "onlistload", e)
        }
    }();
    l._$clearListInCache = function() {
        var t = function(t, e, i) {
            i.splice(e, 1)
        };
        return function(e) {
            if(e) {
                var n = this._$getListInCache(e);
                i._$reverseEach(n, t);
                this._$setLoaded(e, !1);
                if(this.__auto) this.__doGCSchedule()
            } else i._$loop(this.__lspl, function(t, e) {
                if("hash" != e && i._$isArray(t)) {
                    e = e.substr(0, e.length - 5);
                    this._$clearListInCache(e)
                }
            }, this)
        }
    }();
    l.__doCheckItemValidity = function(t, e) {
        return !t.__dirty__
    };
    l._$getItemInCache = function(t) {
        return this.__getHash()[t]
    };
    l._$clearItemInCache = function(t) {
        var e = this._$getItemInCache(t);
        if(e) e.__dirty__ = !0
    };
    l._$getItem = function() {
        var t = function(t) {
            return "r-" + t.key + "-" + t.id
        };
        return function(e) {
            e = e || a;
            var i = e[this.__key],
                n = {
                    id: i,
                    ext: e.ext,
                    data: e.data || {},
                    key: "" + e.key || ""
                };
            _item = this._$getItemInCache(i);
            n.data[this.__key] = i;
            if(!_item || !this.__doCheckItemValidity(_item, n.key)) {
                var r = t(n),
                    s = this._$dispatchEvent._$bind(this);
                if(!this.__doQueueRequest(r, s)) {
                    n.rkey = r;
                    n.onload = this.__getItem._$bind(this, n);
                    this._$dispatchEvent("doloaditem", n)
                }
            } else this._$dispatchEvent("onitemload", n)
        }
    }();
    l.__getItem = function(t, e) {
        t = t || a;
        this.__doSaveItemToCache(e, t.key);
        this.__doCallbackRequest(t.rkey, "onitemload", t)
    };
    l._$addItem = function(t) {
        t = i._$merge({}, t);
        t.onload = this.__addItem._$bind(this, t);
        this._$dispatchEvent("doadditem", t)
    };
    l.__addItem = function(t, e) {
        var i = t.key;
        e = this.__doSaveItemToCache(e, i);
        if(e) {
            var n = 0,
                r = this._$getListInCache(i);
            if(!t.push) {
                n = -1;
                var a = t.offset || 0;
                r.splice(a, 0, e)
            } else if(r.loaded) {
                n = 1;
                r.push(e)
            } else r.length++
        }
        var s = {
            key: i,
            flag: n,
            data: e,
            action: "add",
            ext: t.ext
        };
        this._$dispatchEvent("onitemadd", s);
        return s
    };
    l._$deleteItem = function(t) {
        t = i._$merge({}, t);
        t.onload = this.__deleteItem._$bind(this, t);
        this._$dispatchEvent("dodeleteitem", t)
    };
    l.__deleteItem = function(t, e) {
        var i, n = t.key;
        if(e) {
            var r = t.id;
            i = this._$getItemInCache(r) || null;
            this.__doRemoveItemFromList(n, r)
        }
        var a = {
            key: n,
            data: i,
            action: "delete",
            ext: t.ext
        };
        this._$dispatchEvent("onitemdelete", a);
        return a
    };
    l._$updateItem = function(t) {
        t = i._$merge({}, t);
        t.onload = this.__updateItem._$bind(this, t);
        this._$dispatchEvent("doupdateitem", t)
    };
    l.__updateItem = function(t, e) {
        var i = t.key;
        if(e) e = this.__doSaveItemToCache(e, i);
        var n = {
            key: i,
            data: e,
            action: "update",
            ext: t.ext
        };
        this._$dispatchEvent("onitemupdate", n);
        return n
    };
    if(!0) t.P("nej.ut")._$$ListCache = r._$$CacheList;
    return r
}, 129, 1, 4, 591);
I$(313, function(t, e, i, n, r, a, s) {
    var o;
    n._$$CacheListAbstract = e._$klass();
    o = n._$$CacheListAbstract._$extend(i._$$CacheList);
    o.__reset = function(t) {
        this.__super(t);
        this._$batEvent({
            doloadlist: this.__doLoadList._$bind(this),
            doloaditem: this.__doLoadItem._$bind(this),
            doadditem: this.__doAddItem._$bind(this),
            dodeleteitem: this.__doDeleteItem._$bind(this),
            doupdateitem: this.__doUpdateItem._$bind(this),
            dopullrefresh: this.__doPullRefresh._$bind(this)
        })
    };
    o.__doLoadList = a;
    o.__doPullRefresh = a;
    o.__doLoadItem = a;
    o.__doAddItem = a;
    o.__doDeleteItem = a;
    o.__doUpdateItem = a;
    if(!0) t.P("nej.ut")._$$AbstractListCache = n._$$CacheListAbstract;
    return n
}, 129, 1, 433);
I$(138, function(t, e, i, n) {
    i._$$Cache = t._$klass();
    n = i._$$Cache._$extend(e._$$CacheListAbstract);
    n.__cbListLoad = function(t, e, i) {
        e(i)
    };
    return i
}, 1, 313);
I$(9, function(t, e, i, n, r, a, s) {
    a._$$User = t._$klass();
    s = a._$$User._$extend(r._$$Cache);
    s._$getAccount = function(t) {
        var e = t && t.data;
        i._$request("/api/account/", {
            method: "get",
            type: "json",
            query: e || {},
            onload: this._$dispatchEvent._$bind(this, "getAccount"),
            onerror: this._$dispatchEvent._$bind(this, "getAccount")
        })
    };
    s._$check = function(t) {
        i._$request("/api/user/check", {
            method: "post",
            type: "json",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "onusercheck"),
            onerror: this._$dispatchEvent._$bind(this, "onusercheck")
        })
    };
    s._$checkUserStatus = function(t) {
        i._$request("/api/user/checkUser", {
            method: "post",
            type: "json",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "onCheckUserStatus"),
            onerror: this._$dispatchEvent._$bind(this, "onCheckUserStatus")
        })
    };
    s._$getByEmail = function(t) {
        i._$request("/api/user/getByEmail", {
            method: "get",
            type: "json",
            param: t,
            onload: this._$dispatchEvent._$bind(this, "getByEmail"),
            onerror: this._$dispatchEvent._$bind(this, "getByEmail")
        })
    };
    s._$updateByEmail = function(t) {
        i._$request("/api/user/updateByEmail", {
            method: "put",
            type: "json",
            param: t,
            onload: this._$dispatchEvent._$bind(this, "updateByEmail"),
            onerror: this._$dispatchEvent._$bind(this, "updateByEmail")
        })
    };
    s._$resetPwd = function(t) {
        i._$request("/api/user/resetPwd", {
            method: "get",
            type: "json",
            param: t,
            onload: this._$dispatchEvent._$bind(this, "resetPwd"),
            onerror: this._$dispatchEvent._$bind(this, "resetPwd")
        })
    };
    s._$updatePwd = function(t) {
        i._$request("/api/user/updatePwd", {
            method: "put",
            type: "json",
            param: t,
            onload: this._$dispatchEvent._$bind(this, "updatePwd"),
            onerror: this._$dispatchEvent._$bind(this, "updatePwd")
        })
    };
    s._$getVersion = function() {
        i._$request("/api/user/getVersionFlag", {
            method: "get",
            type: "json",
            onload: this._$dispatchEvent._$bind(this, "getVersion"),
            onerror: this._$dispatchEvent._$bind(this, "getVersion")
        })
    };
    s._$updateVersion = function() {
        i._$request("/api/user/updateVersionFlag", {
            method: "post",
            type: "json",
            onload: this._$dispatchEvent._$bind(this, "updateVersion"),
            onerror: this._$dispatchEvent._$bind(this, "updateVersion")
        })
    };
    s._$getShowMeFlag = function() {
        var t = new Promise(function(t, e) {
            i._$request("/api/user/getShowMeFlag", {
                type: "json",
                method: "get",
                onload: t,
                onerror: e
            })
        });
        return t
    };
    s._$updateShowMeFlag = function() {
        var t = new Promise(function(t, e) {
            i._$request("/api/user/updateShowMeFlag", {
                type: "json",
                method: "post",
                onload: t,
                onerror: e
            })
        });
        return t
    };
    s._$getInvite = function(t) {
        var e = new Promise(function(e, n) {
            i._$request("/api/user/inviteLink?projectId=" + t.projectId, {
                type: "json",
                method: "get",
                onload: e,
                onerror: n
            })
        });
        return e
    };
    s._$importExcle = function(t) {
        i._$request("/api/user/import", {
            method: "post",
            type: "json",
            param: t,
            onload: this._$dispatchEvent._$bind(this, "onImport"),
            onerror: this._$dispatchEvent._$bind(this, "onImport")
        })
    };
    s._$fileUpload = function(t) {
        t.action = "/api/user/excel";
        n._$upload(t, {
            type: "json",
            method: "post",
            onload: this._$dispatchEvent._$bind(this, "onfileupload"),
            onerror: this._$dispatchEvent._$bind(this, "onfileupload")
        })
    };
    return a
}, 1, 4, 137, 139, 138);
I$(316, '  <div class="m-window">\n    <div class="wrap">\n        <div class="window">\n          <div class="winhd">\n            <h2 class="wintt j-title"></h2>\n          </div>\n          <div class="winbd j-flag">\n          </div>\n          <div class="winft">\n              <button type="button" class="u-btn u-btn-1 u-btn-s1 j-submit">确定</button>\n              <button type="button" class="u-btn u-btn-2 u-btn-s1 j-cancel">取消</button>\n          </div>\n          <span class="wincls u-icn u-icn-close j-closed"></span>\n        </div>\n      </div>\n  </div>  \n');
I$(140, function(t, e, i, n, r, a, s, o, l) {
    var c = {};
    c._$$Popup = t._$klass();
    var u = c._$$Popup._$extend(r._$$Abstract);
    u.__initXGui = function() {
        _seed_html = a._$addNodeTemplate(l);
        return function() {
            this.__seed_html = _seed_html
        }
    }();
    u.__initNode = function() {
        this.__super();
        this.__etitle = e._$getByClassName(this.__body, "j-title")[0]
    };
    u.__reset = function(t) {
        this.__doClear();
        t.parent = document.body;
        this.__super(t);
        t.data = t.data || {};
        this.__etitle.innerHTML = t.data.title || "";
        this.__doInitDomEvent([
            [this.__body, "click", this.__onBodyClick._$bind(this)]
        ]);
        this.__error = {}
    };
    u.__onBodyClick = function(t) {
        var e = i._$getElement(t, "c:j-submit"),
            n = i._$getElement(t, "c:j-cancel"),
            r = i._$getElement(t, "c:j-closed");
        if(!e)
            if(!r && !n);
            else this.__onClose();
        else this.__onSubmit(t)
    };
    u.__onSubmit = function(t) {
        this._$close()
    };
    u.__onClose = function() {
        this._$close()
    };
    u._$close = function() {
        this._$recycle()
    };
    u.__validate = function(t) {
        var e = this.__checkValidity(t);
        if(e) {
            if(!e.success) {
                var i = e.result;
                this.__showError(t, i[t].message)
            }
            return e.success
        }
    };
    u.__checkValidity = function(t, e) {
        if(n._$isString(t)) e = e || this.__getValue(t);
        return this.__validator && this.__validator.validate(t, e)
    };
    u.__getValue = function(t) {
        if(Array.isArray(t)) {
            for(var e, i = {}, n = 0, r = t.length; n < r; n++) {
                e = t[n];
                i[e] = this.__getValue(e)
            }
            return i
        } else return this.__get(t).value.trim()
    };
    u.__get = function(t) {
        return this.__form.elements[t]
    };
    u.__showError = function(t, e) {
        var i = this.__get(t),
            n = i.parentNode;
        if(this.__error[t]) this.__hideError(t);
        this.__error[t] = o._$$Error._$allocate({
            parent: n,
            message: e
        })
    };
    u.__hideError = function(t) {
        var e = this.__error[t];
        if(e) {
            e._$recycle();
            delete this.__error[t]
        }
    };
    u.__doClear = function() {
        if(this.__error) {
            for(var t in this.__error)
                if(this.__error.hasOwnProperty(t)) {
                    this.__error[t]._$recycle();
                    delete this.__error[t]
                }
            delete this.__error
        }
    };
    return c
}, 1, 3, 6, 4, 142, 14, 15, 135, 316);
I$(231, function(t, e, i, n, r, a) {
    if("trident" === e._$KERNEL.engine && e._$KERNEL.release <= "4.0") I$(428, function() {
        var t = Array.prototype,
            e = function(t) {
                return "[object function]" == n.toString.call(t).toLowerCase()
            };
        Array.isArray = function(t) {
            return "[object array]" === n.toString.call(t).toLowerCase()
        };
        t.indexOf = function(t, e) {
            var i = parseInt(e) || 0;
            if(i < 0) i = Math.max(0, this.length + i);
            for(var n = this.length; i < n; i++)
                if(i in this && t === this[i]) return i;
            return -1
        };
        t.lastIndexOf = function(t, e) {
            var i = this.length - 1;
            e = parseInt(e);
            if(!isNaN(e)) {
                i = e;
                if(i < 0) i = this.length + i
            }
            for(; i >= 0; i--)
                if(i in this && t === this[i]) return i;
            return -1
        };
        t.every = function(t, i) {
            if(!e(t)) throw new Error(t + " is not a function");
            for(var n = 0, r = this.length; n < r; n++)
                if(n in this && !t.call(i, this[n], n, this)) return !1;
            return !0
        };
        t.some = function(t, i) {
            if(!e(t)) throw new Error(t + " is not a function");
            for(var n = 0, r = this.length; n < r; n++)
                if(n in this && t.call(i, this[n], n, this)) return !0;
            return !1
        };
        t.forEach = function(t, i) {
            if(!e(t)) throw new Error(t + " is not a function");
            for(var n = 0, r = this.length; n < r; n++)
                if(n in this) t.call(i, this[n], n, this)
        };
        t.map = function(t, i) {
            if(!e(t)) throw new Error(t + " is not a function");
            for(var n = new Array(this.length), r = 0, a = this.length; r < a; r++)
                if(r in this) n[r] = t.call(i, this[r], r, this);
            return n
        };
        t.filter = function(t, i) {
            if(!e(t)) throw new Error(t + " is not a function");
            for(var n = [], r = 0, a = this.length; r < a; r++)
                if(r in this && t.call(i, this[r], r, this)) n.push(this[r]);
            return n
        };
        t.reduce = function(t, i) {
            if(!e(t)) throw new Error(t + " is not a function");
            for(var n = arguments.length > 1, r = 0, a = this.length; r < a; r++)
                if(r in this)
                    if(n) i = t(i, this[r], r, this);
                    else {
                        n = !0;
                        i = this[r]
                    }
                else;
            if(!n) throw new Error("Reduce of empty array with no initial value");
            return i
        };
        t.reduceRight = function(t, i) {
            if(!e(t)) throw new Error(t + " is not a function");
            for(var n = arguments.length > 1, r = this.length - 1; r >= 0; r--)
                if(r in this)
                    if(n) i = t(i, this[r], r, this);
                    else {
                        n = !0;
                        i = this[r]
                    }
                else;
            if(!n) throw new Error("Reduce of empty array with no initial value");
            return i
        }
    });
    return t
}, 429, 148);
I$(60, function(t) {}, 231);
I$(8, function(t, e, i, n, r) {
    var a = {};
    a._$$Message = t._$klass();
    var s = a._$$Message._$extend(r._$$Cache);
    s._$message = function(t) {
        var e = this._$dispatchEvent._$bind(this, "ongetMessage");
        i._$request("/api/messages/", {
            method: "get",
            data: t,
            onload: e,
            onerror: e
        })
    };
    s._$done = function(t) {
        var e = this._$dispatchEvent._$bind(this, "onDone");
        i._$request("/api/message/done", {
            method: "post",
            data: t,
            onload: e,
            onerror: e
        })
    };
    s._$getProject = function(t) {
        var e = this._$dispatchEvent._$bind(this, "onGetProject");
        i._$request("/api/message/getProject", {
            method: "get",
            data: t,
            onload: e,
            onerror: e
        })
    };
    s._$approveProject = function(t) {
        var e = this._$dispatchEvent._$bind(this, "onapproveProject");
        i._$request("/api/message/approveProject", {
            method: "post",
            type: "json",
            data: t,
            onload: e,
            onerror: e
        })
    };
    s._$approvePermission = function(t) {
        var e = this._$dispatchEvent._$bind(this, "approvePermission");
        i._$request("/api/message/approvePermission", {
            method: "post",
            data: t,
            onload: e,
            onerror: e
        })
    };
    s._$addMessage = function(t) {
        var e = this._$dispatchEvent._$bind(this, "addMessage");
        i._$request("/api/message/", {
            method: "post",
            data: t,
            onload: e,
            onerror: e
        })
    };
    s._$checkProject = function(t) {
        var e = this._$dispatchEvent._$bind(this, "checkProject");
        i._$request("/api/message/checkProject", {
            method: "get",
            data: t,
            onload: e,
            onerror: e
        })
    };
    s._$getPermission = function(t) {
        var e = this._$dispatchEvent._$bind(this, "getPermission");
        i._$request("/api/message/getPermission", {
            method: "get",
            data: t,
            onload: e,
            onerror: e
        })
    };
    s._$suggest = function(t) {
        return new Promise(function(e, n) {
            i._$request("/api/message/suggest", {
                method: "post",
                type: "json",
                data: t,
                onload: e,
                onerror: n
            })
        })
    };
    return a
}, 1, 4, 137, 60, 138);
I$(162, "<textarea name='ntp' id='#<seedHtml>'>\n<div class=\"m-dashboard\">\n    <div class=\"j-flag\">\n\n    </div>\n    <div class=\"m-chart j-flag\">\n\n    </div>\n</div>\n</textarea>\n<textarea name='jst' id='#<seedJst>'>\n\n</textarea>");
I$(53, function(t, e, i, n, r, a, s) {
    function o(t, e, i) {
        return function(n) {
            i._$dispatchEvent(t, n);
            e(n)
        }
    }
    a._$$DashBoardCache = t._$klass();
    s = a._$$DashBoardCache._$extend(r._$$Cache);
    s._$doLog = function(t) {
        var e = {
            resourceId: t,
            type: 2,
            action: 3
        };
        i._$request("/api/operation/", {
            type: "json",
            method: "post",
            data: e
        })
    };
    s._$getReports = function(t) {
        if(t.fid == -1) var e = "/api/folder/getPrivateFolders";
        else {
            var e = "/api/folders/";
            t.noPrivate = !0
        }
        delete t.fid;
        return new Promise(function(n, r) {
            i._$request(e, {
                type: "json",
                method: "get",
                data: t,
                onload: n,
                onerror: r
            })
        })
    };
    s._$getReport = function(t, e) {
        return new Promise(function(n, r) {
            i._$request("/api/report/" + t, {
                type: "json",
                method: "get",
                data: e,
                onload: n,
                onerror: r
            })
        })
    };
    s._$getStatus = function(t) {
        var e = this;
        return new Promise(function(n, r) {
            i._$request("/api/dashboard/status", {
                type: "json",
                method: "get",
                data: t,
                onload: o("ongetstatus", n, e),
                onerror: o("ongetstatus", r, e)
            })
        })
    };
    s._$setStatus = function(t, e) {
        return new Promise(function(n, r) {
            i._$request("/api/dashboard/refreshStatus", {
                type: "json",
                method: "POST",
                data: {
                    id: t,
                    status: null == e ? 1 : e
                },
                onload: n,
                onerror: r,
                timeout: 5e3,
                sync: 0 === e ? !0 : !1
            })
        })
    };
    s._$getDashBoard = function(t) {
        var e = {},
            n = this;
        return new Promise(function(r, a) {
            i._$request("/api/dashboard/" + t, {
                type: "json",
                method: "get",
                data: e,
                onload: o("ongetdashboard", r, n),
                onerror: o("ongetdashboard", a, n)
            })
        })
    };
    s._$getDashBoardByUrl = function(t) {
        var e = this;
        return new Promise(function(n, r) {
            i._$request("/api/dashboard/getByUrl", {
                type: "json",
                method: "get",
                data: t,
                onload: o("ongetdashboard", n, e),
                onerror: o("ongetdashboard", r, e)
            })
        })
    };
    s._$getDashBoardByWidget = function(t) {
        var e = this;
        return new Promise(function(n, r) {
            i._$request("/api/dashboard/widget", {
                type: "json",
                method: "get",
                data: t,
                onload: o("ongetdashboard", n, e),
                onerror: o("ongetdashboard", r, e)
            })
        })
    };
    s._$submit = function(t) {
        var e = "",
            n = "put";
        if(t.id) {
            e = "/api/dashboard/" + t.id;
            n = "put"
        } else {
            e = "/api/dashboard/";
            n = "post"
        }
        var r = this;
        return new Promise(function(a, s) {
            i._$request(e, {
                type: "json",
                method: n,
                data: t,
                async: !1,
                onload: o("onsubmit", a, r),
                onerror: o("onsubmit", s, r)
            })
        })
    };
    s._$updateDashBoardName = function(t) {
        var e = "/api/dashboard/rename",
            n = "post";
        return new Promise(function(r, a) {
            i._$request(e, {
                type: "json",
                method: n,
                data: t,
                async: !1,
                onload: r,
                onerror: a
            })
        })
    };
    s._$queryNevData = function(t) {
        i._$request("/api/report/query", {
            type: "json",
            method: "post",
            data: t,
            timeout: 18e4,
            onload: this._$dispatchEvent._$bind(this, "onquerynevdata", t.reportId),
            onerror: this._$dispatchEvent._$bind(this, "onquerynevdata", t.reportId)
        })
    };
    s._$getFolders = function(t) {
        var e = t.data,
            n = this;
        return new Promise(function(t, r) {
            i._$request("/api/folders/", {
                type: "json",
                method: "get",
                param: e,
                onload: o("getFolders", t, n),
                onerror: o("getFolders", r, n)
            })
        })
    };
    s._$addFolder = function(t) {
        var e = this;
        return new Promise(function(n, r) {
            i._$request("/api/folder/", {
                type: "json",
                method: "post",
                param: t.data,
                onload: o("addFolder", n, e),
                onerror: o("addFolder", r, e)
            })
        })
    };
    s._$renameFolder = function(t) {
        var e = this;
        return new Promise(function(n, r) {
            i._$request("/api/folder/" + t.data.id, {
                type: "json",
                method: "put",
                param: t.data,
                onload: o("renameFolder", n, e),
                onerror: o("renameFolder", r, e)
            })
        })
    };
    s._$deleteFolder = function(t) {
        var e = t.data,
            n = 1 == e.force ? "?force=1" : "",
            r = this;
        return new Promise(function(t, a) {
            i._$request("/api/folder/" + e.id + "/" + n, {
                type: "json",
                method: "delete",
                onload: o("deleteFolder", t, r),
                onerror: o("deleteFolder", a, r)
            })
        })
    };
    s._$deleteDashBoard = function(t) {
        var e = t.data,
            n = this;
        return new Promise(function(t, r) {
            i._$request("/api/dashboard/" + e.id + "/", {
                type: "json",
                method: "delete",
                onload: o("deleteDashBoard", t, n),
                onerror: o("deleteDashBoard", r, n)
            })
        })
    };
    s._$getCopyName = function(t) {
        var e = this;
        return new Promise(function(n, r) {
            i._$request("/api/dashboard/getCopyName", {
                type: "json",
                method: "get",
                data: t,
                onload: o("getCopyName", n, e),
                onerror: o("getCopyName", r, e)
            })
        })
    };
    s._$copy = function(t) {
        var e = this;
        return new Promise(function(n, r) {
            i._$request("/api/dashboard/copy", {
                type: "json",
                method: "post",
                data: t,
                onload: o("copy", n, e),
                onerror: o("copy", r, e)
            })
        })
    };
    s._$updateOrder = function(t) {
        var e = this;
        return new Promise(function(n, r) {
            i._$request("/api/folder/updateOrder", {
                type: "json",
                method: "post",
                param: t,
                onload: o("updateOrder", n, e),
                onerror: o("updateOrder", r, e)
            })
        })
    };
    s._$switchFolder = function(t) {
        var e = this;
        return new Promise(function(n, r) {
            i._$request("/api/dashboard/switchFolder", {
                type: "json",
                method: "post",
                param: t.data,
                onload: o("switchFolder", n, e),
                onerror: o("switchFolder", r, e)
            })
        })
    };
    s._$getDimensionMembers = function(t) {
        i._$request("/api/report/getDimensionMembers", {
            type: "json",
            method: "post",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "ongetdimensionmembers"),
            onerror: this._$dispatchEvent._$bind(this, "ongetdimensionmembers")
        })
    };
    s._$getMeasureRange = function(t) {
        i._$request("/api/report/getMeasureRange", {
            type: "json",
            method: "post",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "ongetmeasurerange"),
            onerror: this._$dispatchEvent._$bind(this, "ongetmeasurerange")
        })
    };
    s._$getRegularMail = function(t) {
        var e = this._$dispatchEvent._$bind(this, "getRegularMail");
        i._$request("/api/regularMail/" + t.data.id + "/", {
            type: "json",
            method: "get",
            onload: e,
            onerror: e
        })
    };
    s._$getUserStatus = function(t) {
        var e = this._$dispatchEvent._$bind(this, "getUserStatus");
        i._$request("/api/regularMail/projectRole", {
            type: "json",
            method: "get",
            param: t.data,
            onload: e,
            onerror: e
        })
    };
    s._$addRegularMail = function(t) {
        var e = this._$dispatchEvent._$bind(this, "addRegularMail");
        i._$request("/api/regularMail/", {
            type: "json",
            method: "post",
            param: t.data,
            onload: e,
            onerror: e
        })
    };
    s._$updateRegularMail = function(t) {
        var e = this._$dispatchEvent._$bind(this, "updateRegularMail");
        i._$request("/api/regularMail/" + t.data.id, {
            type: "json",
            method: "put",
            param: t.data,
            onload: e,
            onerror: e
        })
    };
    s.__doLoadList = function(t) {
        var e = t.onload,
            n = t.data || {};
        i._$request("/api/regularMails/", {
            type: "json",
            data: n,
            onload: function(t) {
                e(200 == t.code ? t.result : null)
            }
        })
    };
    s.__doDeleteItem = function(t) {
        var e = t.onload,
            n = t.data || {};
        i._$request("/api/regularMail/{id}/", {
            method: "delete",
            param: n,
            onload: function(t) {
                e(200 == t.code ? t.result : null)
            }
        })
    };
    s._$createUrl = function(t) {
        var e = this._$dispatchEvent._$bind(this, "createUrl");
        i._$request("/api/dashboard/createUrl", {
            type: "json",
            method: "put",
            param: t.data,
            onload: e,
            onerror: e
        })
    };
    s._$deleteUrl = function(t) {
        var e = this._$dispatchEvent._$bind(this, "deleteUrl");
        i._$request("/api/dashboard/deleteUrl", {
            type: "json",
            method: "delete",
            param: t.data,
            onload: e,
            onerror: e
        })
    };
    s._$getByUrl = function(t) {
        var e = this._$dispatchEvent._$bind(this, "getByUrl");
        i._$request("/api/dashboard/getByUrl", {
            type: "json",
            method: "get",
            param: t.data,
            onload: e,
            onerror: e
        })
    };
    s._$fileUpload = function(t) {
        t.action = "/store";
        n._$upload(t, {
            type: "json",
            onload: this._$dispatchEvent._$bind(this, "onfileupload"),
            onerror: this._$dispatchEvent._$bind(this, "onfileupload")
        })
    };
    s._$flushTime = function(t) {
        return new Promise(function(e, n) {
            i._$request("/api/dashboard/updateFlushTime", {
                type: "json",
                method: "GET",
                param: t,
                onload: e,
                onerror: n
            })
        })
    };
    return a
}, 1, 4, 137, 139, 138);
I$(176, function(t, e) {
    var i = {
        getMeasureNameMembers: function(t) {
            return reflex.queryUtils.getMeasureNameMembers(t)
        },
        getDisplayName: function(e, i, n) {
            var r = n.displayNameMap,
                a = r && r[t.pid(e)];
            return a || reflex.queryUtils.getDefaultDisplayName(i, e)
        },
        getMeasureNameDisplayName: function(e, i, n) {
            var r = n && n.dict,
                a = r && r[t.pid(e)];
            return a || reflex.queryUtils.getDefaultDisplayName(i, e)
        },
        getDefaultDisplayName: function(t, e) {
            return reflex.queryUtils.getDefaultDisplayName(t, e)
        },
        dispatch: function(t, e, i) {
            if("SET_AXIS" === e.type) {
                var n = i[e.payload.area],
                    r = n[e.payload.index];
                if("Measure" === r.role) t.setAxis(i)
            }
            return reflex.synthesize.dispatch(t, e, i)
        },
        main: function(e, i, n) {
            var r;
            if(!e.textTable) {
                r = reflex.synthesize_ud.main(e, i, n).result;
                if(e.preSynthesizeResult) {
                    var a = e.preSynthesizeResult.pivotTableConfig;
                    t.extend(r, {
                        datasetEntire: a.datasetEntire,
                        datasetSize: a.datasetSize,
                        marksCount: a.marksCount,
                        nTotalCol: a.nTotalCol,
                        nTotalRow: a.nTotalRow
                    })
                }
                if(!r) throw Error("reflex推导发生错误")
            } else {
                var s = n.mark.labelConfig;
                r = t.dset(e, {
                    formatMap: this.generateFormatMap(i.formatMap)
                });
                t.extend(r, this.genTextColorMap(i, n, e.colorMembers));
                if(s && !s.autoConfig) r.labelConfig = t.assign({
                    positionX: "right"
                }, s)
            }
            return {
                result: r
            }
        },
        genTextColorMap: function(i, n, r) {
            var a, s, o, l = i.marksColor,
                c = n.mark.color;
            if(c) a = l[t.pid(c)];
            a = a && a.colorMap;
            var u = e.COLOR_TEMPLATES;
            u = u && u[0].colors;
            if(n.mark.colorConfig) o = t.rgba2str(n.mark.colorConfig);
            if(!a && Array.isArray(r) && u) {
                var d = u.length;
                a = r.reduce(function(t, e, i) {
                    t[e] = u[i % d];
                    return t
                }, {})
            }
            if(a) s = reflex.synthesize_ud.gen_text_color_map(a, n) || {};
            else s = null;
            return {
                globalColor: o,
                colorMap: s
            }
        },
        pid: function(t) {
            return reflex.pill_utils.generatePid(t)
        },
        generateFormatMap: function(e, n) {
            var r = reflex.synthesize.generateFormatMap(e),
                a = n && n.tableData;
            if(a) {
                var s = a.heads;
                if(Array.isArray(s)) s.forEach(function(e) {
                    var n = t.getMapFuncInPid(e);
                    if(n && n.indexOf("-")) r[e] = i.reformatDateFunction(n)
                })
            }
            return r
        },
        reformatDateFunction: function(t) {
            return reflex.synthesize.reformatDateFunction(t)
        },
        showMe: function() {
            return reflex.showMe;
        }
    };
    return i
}, 7, 136);
! function(t, e, i) {
    e[t] = e[t] || i();
    if("undefined" != typeof module && module.exports) module.exports = e[t];
    else if("function" == typeof define && define.amd) define(function() {
        return e[t]
    })
}("Promise", "undefined" != typeof global ? global : this, function() {
    "use strict";

    function t(t, e) {
        h.add(t, e);
        if(!d) d = p(h.drain)
    }

    function e(t) {
        var e, i = typeof t;
        if(null != t && ("object" == i || "function" == i)) e = t.then;
        return "function" == typeof e ? e : !1
    }

    function i() {
        for(var t = 0; t < this.chain.length; t++) n(this, 1 === this.state ? this.chain[t].success : this.chain[t].failure, this.chain[t]);
        this.chain.length = 0
    }

    function n(t, i, n) {
        var r, a;
        try {
            if(i === !1) n.reject(t.msg);
            else {
                if(i === !0) r = t.msg;
                else r = i.call(void 0, t.msg);
                if(r === n.promise) n.reject(TypeError("Promise-chain cycle"));
                else if(a = e(r)) a.call(r, n.resolve, n.reject);
                else n.resolve(r)
            }
        } catch(t) {
            n.reject(t)
        }
    }

    function r(n) {
        var s, l = this;
        if(!l.triggered) {
            l.triggered = !0;
            if(l.def) l = l.def;
            try {
                if(s = e(n)) t(function() {
                    var t = new o(l);
                    try {
                        s.call(n, function() {
                            r.apply(t, arguments)
                        }, function() {
                            a.apply(t, arguments)
                        })
                    } catch(e) {
                        a.call(t, e)
                    }
                });
                else {
                    l.msg = n;
                    l.state = 1;
                    if(l.chain.length > 0) t(i, l)
                }
            } catch(t) {
                a.call(new o(l), t)
            }
        }
    }

    function a(e) {
        var n = this;
        if(!n.triggered) {
            n.triggered = !0;
            if(n.def) n = n.def;
            n.msg = e;
            n.state = 2;
            if(n.chain.length > 0) t(i, n)
        }
    }

    function s(t, e, i, n) {
        for(var r = 0; r < e.length; r++) ! function(r) {
            t.resolve(e[r]).then(function(t) {
                i(r, t)
            }, n)
        }(r)
    }

    function o(t) {
        this.def = t;
        this.triggered = !1
    }

    function l(t) {
        this.promise = t;
        this.state = 0;
        this.triggered = !1;
        this.chain = [];
        this.msg = void 0
    }

    function c(e) {
        if("function" != typeof e) throw TypeError("Not a function");
        if(0 !== this.__NPO__) throw TypeError("Not a promise");
        this.__NPO__ = 1;
        var n = new l(this);
        this["then"] = function(e, r) {
            var a = {
                success: "function" == typeof e ? e : !0,
                failure: "function" == typeof r ? r : !1
            };
            a.promise = new this.constructor(function(t, e) {
                if("function" != typeof t || "function" != typeof e) throw TypeError("Not a function");
                a.resolve = t;
                a.reject = e
            });
            n.chain.push(a);
            if(0 !== n.state) t(i, n);
            return a.promise
        };
        this["catch"] = function(t) {
            return this.then(void 0, t)
        };
        try {
            e.call(void 0, function(t) {
                r.call(n, t)
            }, function(t) {
                a.call(n, t)
            })
        } catch(t) {
            a.call(n, t)
        }
    }
    var u, d, h, f = Object.prototype.toString,
        p = "undefined" != typeof setImmediate ? function(t) {
            return setImmediate(t)
        } : setTimeout;
    try {
        Object.defineProperty({}, "x", {});
        u = function(t, e, i, n) {
            return Object.defineProperty(t, e, {
                value: i,
                writable: !0,
                configurable: n !== !1
            })
        }
    } catch(t) {
        u = function(t, e, i) {
            t[e] = i;
            return t
        }
    }
    h = function() {
        function t(t, e) {
            this.fn = t;
            this.self = e;
            this.next = void 0
        }
        var e, i, n;
        return {
            add: function(r, a) {
                n = new t(r, a);
                if(i) i.next = n;
                else e = n;
                i = n;
                n = void 0
            },
            drain: function() {
                var t = e;
                e = i = d = void 0;
                for(; t;) {
                    t.fn.call(t.self);
                    t = t.next
                }
            }
        }
    }();
    var _ = u({}, "constructor", c, !1);
    c.prototype = _;
    u(_, "__NPO__", 0, !1);
    u(c, "resolve", function(t) {
        var e = this;
        if(t && "object" == typeof t && 1 === t.__NPO__) return t;
        else return new e(function(e, i) {
            if("function" != typeof e || "function" != typeof i) throw TypeError("Not a function");
            e(t)
        })
    });
    u(c, "reject", function(t) {
        return new this(function(e, i) {
            if("function" != typeof e || "function" != typeof i) throw TypeError("Not a function");
            i(t)
        })
    });
    u(c, "all", function(t) {
        var e = this;
        if("[object Array]" != f.call(t)) return e.reject(TypeError("Not an array"));
        if(0 === t.length) return e.resolve([]);
        else return new e(function(i, n) {
            if("function" != typeof i || "function" != typeof n) throw TypeError("Not a function");
            var r = t.length,
                a = Array(r),
                o = 0;
            s(e, t, function(t, e) {
                a[t] = e;
                if(++o === r) i(a)
            }, n)
        })
    });
    u(c, "race", function(t) {
        var e = this;
        if("[object Array]" != f.call(t)) return e.reject(TypeError("Not an array"));
        else return new e(function(i, n) {
            if("function" != typeof i || "function" != typeof n) throw TypeError("Not a function");
            s(e, t, function(t, e) {
                i(e)
            }, n)
        })
    });
    return c
});
I$(44, function(t, e, i, n, r, a, s) {
    function o(t, e) {
        return function(i) {
            if(i && 601 === i.code) e._$dispatchEvent("OUT_DATE", i);
            else t(i)
        }
    }

    function l(t, e, i) {
        return function(n) {
            i._$dispatchEvent(t, n);
            e(n)
        }
    }
    a._$$ReportCache = t._$klass();
    s = a._$$ReportCache._$extend(n._$$Cache);
    s._$doLog = function(t) {
        var e = {
            resourceId: t,
            type: 1,
            action: 3
        };
        i._$request("/api/operation", {
            type: "json",
            method: "post",
            data: e
        })
    };
    s._$getDataSourceList = function(t) {
        var e = this;
        return new Promise(function(n, r) {
            i._$request("/api/dataModels/", {
                type: "json",
                method: "get",
                data: t,
                onload: l("ongetDataSourceList", n, e),
                onerror: l("ongetDataSourceList", r, e)
            })
        })
    };
    s._$addReport = function(t) {
        var e = this;
        return new Promise(function(n, r) {
            i._$request("/api/report/", {
                type: "json",
                method: "post",
                data: t,
                onload: l("onaddReport", n, e),
                onerror: l("onaddReport", r, e)
            })
        })
    };
    s._$getFoldersData = function(t) {
        var e = this;
        return new Promise(function(n, r) {
            i._$request("/api/folders/", {
                type: "json",
                method: "get",
                data: t,
                onload: l("ongetFoldersData", n, e),
                onerror: l("ongetFoldersData", r, e)
            })
        })
    };
    s._$addFolder = function(t) {
        var e = this;
        return new Promise(function(n, r) {
            i._$request("/api/folder/", {
                type: "json",
                method: "post",
                data: t,
                onload: l("onaddFolder", n, e),
                onerror: l("onaddFolder", r, e)
            })
        })
    };
    s._$renameFolder = function(t) {
        var e = t.id;
        delete t.id;
        var n = this;
        return new Promise(function(r, a) {
            i._$request("/api/folder/" + e + "/", {
                type: "json",
                method: "put",
                data: t,
                onload: l("onrenameFolder", r, n),
                onerror: l("onrenameFolder", a, n)
            })
        })
    };
    s._$delFolder = function(t) {
        var e = t.id,
            n = 1 == t.force ? "?force=1" : "",
            r = this;
        return new Promise(function(t, a) {
            i._$request("/api/folder/" + e + "/" + n, {
                type: "json",
                method: "delete",
                onload: l("ondelFolder", t, r),
                onerror: l("ondelFolder", a, r)
            })
        })
    };
    s._$delReport = function(t) {
        var e = t.id;
        delete t.id;
        var n = this;
        return new Promise(function(r, a) {
            i._$request("/api/report/" + e + "/", {
                type: "json",
                method: "delete",
                data: t,
                onload: l("ondelReport", r, n),
                onerror: l("ondelReport", a, n)
            })
        })
    };
    s._$getCopyName = function(t) {
        var e = this;
        return new Promise(function(n, r) {
            i._$request("/api/report/getCopyName", {
                type: "json",
                method: "get",
                data: t,
                onload: l("getCopyName", n, e),
                onerror: l("getCopyName", r, e)
            })
        })
    };
    s._$copy = function(t) {
        var e = this;
        return new Promise(function(n, r) {
            i._$request("/api/report/copy", {
                type: "json",
                method: "post",
                data: t,
                onload: l("copy", n, e),
                onerror: l("copy", r, e)
            })
        })
    };
    s._$updateOrder = function(t) {
        var e = this;
        return new Promise(function(n, r) {
            i._$request("/api/folder/updateOrder", {
                type: "json",
                method: "post",
                data: t,
                onload: l("onupdateOrder", n, e),
                onerror: l("onupdateOrder", r, e)
            })
        })
    };
    s._$switchFolder = function(t) {
        var e = this._$dispatchEvent._$bind(this, "switchFolder");
        i._$request("/api/report/switchFolder", {
            type: "json",
            method: "post",
            param: t.data,
            onload: e,
            onerror: e
        })
    };
    s._$getReport1 = function(t) {
        return new Promise(function(e, n) {
            i._$request("/api/report/getByUrl", {
                type: "json",
                method: "get",
                data: t,
                onload: e,
                onerror: n
            })
        })
    };
    s._$getMaxMinValue = function(t, e, n) {
        return new Promise(function(n, r) {
            i._$request("/api/report/" + t, {
                type: "json",
                method: "get",
                data: e,
                onload: n,
                onerror: r
            })
        })
    };
    s._$queryNevData = i._$loop(function(t) {
        var e, n = new Promise(function(n, r) {
            e = i._$request("/api/report/query", {
                type: "json",
                method: "post",
                timeout: 18e4,
                data: t,
                onload: function(t) {
                    if(200 === t.code) n(t);
                    else r(t)
                },
                onerror: r
            })
        });
        n.request = e;
        return n
    });
    s._$showMeQuery = function(t) {
        var e = new Promise(function(e, n) {
            i._$request("/api/report/showMe", {
                type: "json",
                method: "post",
                timeout: 18e4,
                data: t,
                onload: e,
                onerror: n
            })
        });
        return e
    };
    s._$getReport = function(t) {
        return new Promise(function(e, n) {
            i._$request("/api/report/" + t, {
                type: "json",
                method: "get",
                onload: e,
                onerror: n
            })
        })
    };
    s._$getMeasureRange = i._$loop(function(t) {
        var e, n = new Promise(function(n, r) {
            e = i._$request("/api/report/getMeasureRange", {
                type: "json",
                method: "POST",
                data: t,
                onload: n,
                onerror: r
            })
        });
        n.request = e;
        return n
    });
    s._$getDimensionMembers = i._$loop(function(t) {
        var e, n = t.dimensions,
            r = new Promise(function(r, a) {
                var s = n[0].filter;
                n[0].filter = null;
                e = i._$request("/api/report/getDimensionMembers", {
                    type: "json",
                    method: "POST",
                    data: t,
                    onload: r,
                    onerror: a
                });
                n[0].filter = s
            });
        r.request = e;
        return r
    });
    s._$getDimensionMemberNum = function(t) {
        var e = t.dimensions;
        return new Promise(function(n, r) {
            var a = e[0].filter;
            e[0].filter = null;
            i._$request("/api/report/getDimensionMemberNum", {
                type: "json",
                method: "POST",
                data: t,
                onload: n,
                onerror: r
            });
            e[0].filter = a
        })
    };
    s._$getTableMemberNum = function(t) {
        return new Promise(function(e, n) {
            i._$request("/api/table/getDimensionMemberNum", {
                type: "json",
                method: "get",
                data: t,
                onload: e,
                onerror: n
            })
        })
    };
    s._$updatePivotSchema = function(t, e) {
        var n = this;
        return new Promise(function(r, a) {
            i._$request("/api/report/updatePivotSchema", {
                type: "json",
                method: "PUT",
                data: {
                    reportId: t,
                    pivotSchema: e
                },
                onload: o(r, n),
                onerror: a
            })
        })
    };
    s._$updateReport = function(t, e) {
        var n = this;
        return new Promise(function(r, a) {
            i._$request("/api/report/" + t, {
                type: "json",
                method: "PUT",
                data: e,
                onload: o(r, n),
                onerror: a
            })
        })
    };
    s._$queryStatus = function(t) {
        return new Promise(function(e, n) {
            i._$request("/api/report/status", {
                type: "json",
                method: "GET",
                data: {
                    reportId: t,
                    tid: (+new Date).toString(36)
                },
                onload: e,
                onerror: n
            })
        })
    };
    s._$setStatus = function(t, e) {
        return new Promise(function(n, r) {
            i._$request("/api/report/refreshStatus", {
                type: "json",
                method: "POST",
                data: {
                    reportId: t,
                    status: null == e ? 1 : e
                },
                onload: n,
                onerror: r,
                timeout: 5e3,
                sync: 0 === e ? !0 : !1
            })
        })
    };
    s._$refreshSchema = function(t) {
        return new Promise(function(e, n) {
            i._$request("/api/report/refreshDaCache", {
                type: "json",
                method: "POST",
                data: {
                    reportId: t
                },
                onload: e,
                onerror: n,
                timeout: 5e3,
                sync: 0 === status ? !0 : !1
            })
        })
    };
    s._$getPillId = function(t) {
        return new Promise(function(e, n) {
            i._$request("/api/pill/", {
                type: "json",
                method: "POST",
                data: {
                    reportId: t
                },
                onload: e,
                onerror: n
            })
        })
    };
    s._$colorTemplates = function() {
        return new Promise(function(t, e) {
            i._$request("/api/colorTemplates/", {
                type: "json",
                method: "GET",
                onload: t,
                onerror: e
            })
        })
    };
    s._$colorTemplates = function() {
        return new Promise(function(t, e) {
            i._$request("/api/colorTemplates/", {
                type: "json",
                method: "GET",
                onload: t,
                onerror: e
            })
        })
    };
    s._$flushTime = function(t) {
        return new Promise(function(e, n) {
            i._$request("/api/report/updateFlushTime", {
                type: "json",
                method: "GET",
                param: t,
                onload: e,
                onerror: n
            })
        })
    };
    s._$getDiscreteColors = function(t) {
        return new Promise(function(e, n) {
            i._$request("/api/report/getDiscreteColors", {
                type: "json",
                method: "POST",
                param: t,
                onload: e,
                onerror: n
            })
        })
    };
    s._$sort = function(t) {
        return new Promise(function(e, n) {
            i._$request("/api/report/sortList", {
                type: "json",
                method: "POST",
                param: t,
                onload: e,
                onerror: n
            })
        })
    };
    s._$renameReport = function(t) {
        var e = "/api/report/rename",
            n = "post";
        return new Promise(function(r, a) {
            i._$request(e, {
                type: "json",
                method: n,
                data: t,
                async: !1,
                onload: r,
                onerror: a
            })
        })
    };
    return a
}, 1, 4, 137, 138, 213);
I$(210, function(t, e, i, n, r, a) {
    r._$$DBProtection = t._$klass();
    a = r._$$DBProtection._$extend(n._$$Cache);
    a._$dbprotection = function(t) {
        return new Promise(function(e, n) {
            i._$request("/api/dataConnection/inspect/", {
                type: "json",
                method: "post",
                data: t,
                onload: function(t) {
                    e(t)
                },
                onerror: function(t) {
                    e(t)
                }
            })
        })
    };
    return r
}, 1, 4, 137, 138);
I$(34, function(t, e, i, n, r, a, s, o, l) {
    function c(t, e, i) {
        var t = (c[e] || c.undefined)(t, e);
        return t
    }

    function u(i) {
        i = i || {};
        var n = {
            $type: "Mark",
            marktype: "Multiple" === i.marktype ? "Automatic" : i.marktype
        };
        for(var r in e.MARK_AREA_CONF)
            if(e.MARK_AREA_CONF[r].multiple) n[r] = i[r].length ? i[r].map(function(t) {
                return c(t, "mark")
            }) : [];
            else n[r] = i[r] ? c(i[r], "mark") : void 0;
        ["labelConfig", "sizeCofig", "colorConfig", "shapeConfig"].forEach(function(e) {
            if(i[e]) n[e] = t.extend({}, i[e])
        });
        return n
    }

    function d(t, e, i, n, r) {
        if(void 0 === i) i = e.length;
        if(r && n !== e && ~e.indexOf(t)) throw Error("无法拖入相同的字段");
        if(n) var a = n.indexOf(t);
        if(n !== e || i + 1 !== a && i !== a) {
            if(i === -1) e.unshift(t);
            else e.splice(i + 1, 0, t);
            if(n) {
                if(n === e && void 0 !== a && a > i) a += 1;
                n.splice(a, 1)
            }
            return e
        }
    }

    function h(t) {
        function e(t) {
            if("Measure" === t.role) return !0
        }
        var i, n = t.row,
            r = t.column,
            a = n.filter(e),
            s = r.filter(e);
        if(2 === a.length) {
            delete a[0].dualAxis;
            i = a[1];
            i.dualAxis = i.dualAxis || !1
        } else f(a);
        if(i && i.dualAxis || 2 !== s.length) f(s);
        else {
            delete s[0].dualAxis;
            i = s[1];
            i.dualAxis = i.dualAxis || !1;
            if(i.dualAxis) f(a)
        }
    }

    function f(t) {
        t.forEach(function(t) {
            delete t.dualAxis
        })
    }

    function p(t) {
        for(var e = t.length; e--;) {
            var i = t[e];
            t.splice(e, 1, null);
            if(~t.indexOf(i)) t.splice(e, 1);
            else t.splice(e, 1, i)
        }
        return t
    }

    function _(e) {
        function i(e) {
            if(e) {
                if(Array.isArray(e)) return e.map(i);
                e = t.clone(e);
                return j(e)
            }
        }

        function n(e) {
            var n = t.clone(e);
            n.color = i(e.color);
            n.size = i(e.size);
            n.angle = i(e.angle);
            n.details = e.details.map(i);
            n.labels = e.labels.map(i);
            n.shape = i(e.shape);
            return n
        }
        var r = {
                $type: "VisualQuery"
            },
            a = (e.options.sort || {}, e.filters);
        r.column = e.column.map(i);
        r.row = e.row.map(i);
        r.measures = e.measures.map(i).filter(function(t) {
            return !t.disabled
        });
        r.positionFilters = e.positionFilters;
        r.msort = e.msort;
        r.markMatrix = (e.markMatrix || []).slice();
        r.markMatrix = r.markMatrix.map(n);
        r.mark = n(e.mark);
        r.filter = a.map(function(e) {
            var i = e.filter;
            if(i && "PositionFilter" === i.$type) return e;
            else return {
                $type: "Dimension" === e.role ? "DFilter" : "MFitler",
                pill: t.assign({}, e, {
                    filter: null
                }),
                filter: i
            }
        });
        return r
    }

    function m(t) {
        var e;
        t.mark, t.column, t.row;
        P(t, function(t, i) {
            var i = i.split(".")[0];
            if(!/dimension|measure/.test(i))
                if(g(t)) e = !0
        });
        return e
    }

    function g(t) {
        if(!t) return !1;
        if(Array.isArray(t)) return t.some(g);
        else return "Generated" === t.produced && "mvalue" === t.field
    }

    function v(e) {
        function i(t) {
            return "Continuous" === t.interpretation
        }

        function n(t, e) {
            return c.filter(function(i) {
                if(i.rcid == t && i.ccid == e || i.ccid == t && i.rcid == e) return !0
            })[0]
        }

        function r(i, r) {
            var a = n(i && i._cid, r && r._cid),
                s = a || u(e.mark),
                o = (i ? t.ptext(i) : "") + "-" + (r ? t.ptext(r) : "");
            s.title = o.replace(/^\-|\-$/g, "");
            s.ccid = r && r._cid;
            s.rcid = i && i._cid;
            d.push(s)
        }
        var a = e.column.filter(i),
            s = e.row.filter(i),
            o = a.length,
            l = s.length,
            c = e.markMatrix,
            d = [];
        if(l > 1)
            for(var h = 0; h < l; h++)
                if(!o) r(s[h]);
                else
                    for(var f = 0; f < o; f++) r(s[h], a[f]);
        else if(o > 1)
            for(var f = 0; f < o; f++)
                if(!l) r(null, a[f]);
                else
                    for(var h = 0; h < l; h++) r(s[h], a[f]);
        if(e.markMatrix.length !== d.length) var p = !0;
        e.markMatrix = d;
        return p
    }

    function y(e) {
        var i = e.length,
            n = {};
        e.forEach(function(e) {
            e.forEach(function(e) {
                var i = t.pid(e);
                if(!n[i]) n[i] = {
                    pill: e,
                    count: 1
                };
                else n[i].count++
            })
        });
        var r = {
            diff: [],
            same: []
        };
        for(var a in n)
            if(n[a].count === i) r.same.push(n[a].pill);
            else r.diff.push(a);
        return r
    }

    function b(e) {
        var i = e.length,
            n = {
                deepEqual: !0
            };
        for(var r in ht) {
            var a = ht[r];
            if(a.multiple) {
                var s = y(e.map(function(t) {
                    return t[r]
                }));
                n[r] = s;
                if(s.diff.length) n.deepEqual = !1
            } else {
                var o = e.some(function(n, a) {
                    if(a !== i - 1 && t.pid(e[a + 1][r]) !== t.pid(n[r])) return !0
                });
                n[r] = o ? !0 : e[0][r];
                if(o) n.deepEqual = !1
            }
        }
        var o = e.some(function(t, n) {
            if(n !== i - 1 && t.marktype !== e[n + 1].marktype) return !0
        });
        n.marktype = o ? !0 : e[0].marktype;
        return n
    }

    function x(e, i) {
        var n = e.markMatrix,
            r = e.mark;
        if(!n.length) return e;
        var a = t.assign({}, e),
            s = t.slice(a.markMatrix);
        for(var o in ht) {
            var l = ht[o],
                u = (r[o], r[o]);
            if(l.multiple) {
                var d = u.map(t.pid),
                    h = y(s.map(function(t) {
                        return t[o]
                    })),
                    f = h.same,
                    p = (h.diff, f.filter(function(e) {
                        return d.indexOf(t.pid(e)) === -1
                    }).map(t.pid)),
                    _ = d.filter(function(t) {
                        return f.indexOf(t) === -1
                    });
                if(!p.length && !_.length) continue;
                s.forEach(function(e, i) {
                    var n = e[o],
                        r = n.slice();
                    if(_.length)
                        for(var a = d.length; a--;) {
                            var l = d[a],
                                h = t.indexOf(n, function(e) {
                                    return t.pid(e) === l
                                });
                            if(h === -1) {
                                var f = c(u[a], "mark");
                                r.splice(a, 0, f)
                            }
                        }
                    if(p.length)
                        for(var m = r.length; m--;) {
                            var l = t.pid(r[m]);
                            if(~p.indexOf(l)) r.splice(m, 1)
                        }
                    r.sort(function(e, i) {
                        return d.indexOf(t.pid(e)) - d.indexOf(t.pid(i))
                    });
                    s[i] = t.dset(e, r, o, !0)
                })
            } else s.forEach(function(e, i) {
                if(t.pid(u || "") !== t.pid(e[o] || "")) s[i] = t.dset(e, r[o] ? c(r[o], "mark") : null, o, !0)
            })
        }
        if("Multiple" !== r.marktype) s = s.map(function(e) {
            if(e.marktype === r.marktype) return e;
            var i = {
                marktype: r.marktype
            };
            if(e.labelConfig) i.label = O(t.extend({}, e.labelConfig), r.marktype);
            return t.dset(e, i)
        });
        a.markMatrix = s;
        var m = b(s);
        if(m.deepEqual) {
            if(a.mark.isAreaMultiple) a = t.dset(a, {
                isAreaMultiple: !1
            }, "mark")
        } else if(!a.mark.isAreaMultiple) a = t.dset(a, {
            isAreaMultiple: !0
        }, "mark");
        return a
    }

    function $(e, i) {
        var n, r = e.markMatrix,
            a = e.mark;
        if(!r.length) {
            e = t.dset(e, {
                isAreaMultiple: !1
            }, "mark");
            if("Multiple" == e.mark.marktype) e.mark = t.dset(e.mark, {
                marktype: "Automatic"
            });
            return e
        }
        var s = b(r);
        for(var o in ht) {
            var l = ht[o],
                u = s[o];
            if(l && l.multiple) {
                var d = u.same,
                    h = a[o].filter(function(e) {
                        if(d.indexOf(t.pid(e)) === -1) return !1
                    }),
                    f = h.map(t.pid);
                d.forEach(function(e) {
                    if(f.indexOf(t.pid(e)) === -1) h.push(c(e, "mark"))
                });
                n = t.dset(n || a, h, o, !0)
            } else if(u === !0 || !u) n = t.dset(n || a, null, o, !0);
            else if(t.pid(u) !== t.pid(a[o])) n = t.dset(n || a, c(u, "mark"), o, !0)
        }
        if(s.marktype === !0) {
            n.marktype = "Multiple";
            delete n.labelConfig
        } else if(n.marktype !== s.marktype) n.marktype = s.marktype;
        n.isAreaMultiple = !s.deepEqual;
        if(n) e = t.dset(e, n, "mark");
        return e
    }

    function w(e) {
        var i = e.measure,
            n = e.measures,
            r = e.msort;
        e.measures = i.map(function(e) {
            var i = t.indexOf(n, function(t) {
                return t.alias === e.alias && e.produced === t.produced
            });
            if(i === -1) return c(e, "measures");
            else return n[i]
        });
        e.measures = e.measures.filter(function(t) {
            return t.fieldId != -12 && t.fieldId != -13
        });
        switch(r) {
            case "asc":
            case "dasc":
                e.measures.sort(function(t, e) {
                    if(t.alias === e.alias) return 0;
                    var i = t.alias > e.alias ? 1 : -1;
                    return "asc" === r ? i : -i
                });
                break;
            case "manual":
                e.measures.sort(function(t, e) {
                    return n.indexOf(t) - n.indexOf(e)
                })
        }
    }

    function k(t) {
        if("string" != typeof t) throw new Error("color has to be type of `string`");
        else if("#" === t.substr(0, 1)) return t;
        var e = /(.*?)rgb(a)*\((\d+),(\d+),(\d+)(,[0-9]*\.*[0-9]+)*\)/.exec(t.replace(/\s+/g, ""));
        if(!e) throw new Error("given color (" + t + ") isn't a valid rgb or rgba color");
        var i = parseInt(e[3]),
            n = parseInt(e[4]),
            r = parseInt(e[5]),
            a = (r | n << 8 | i << 16 | 1 << 24).toString(16).slice(1);
        return "#" + a.toString(16)
    }

    function S(e, i) {
        if("string" != typeof i && i) i = t.pid(i);
        return t.indexOf(e, function(e) {
            return t.pid(e) === i
        })
    }

    function C(t, e) {
        if("g0" === e && "Whole" !== t && "Decimal" !== t) return "Dimension";
        else return "Measure"
    }

    function T(t) {
        var e = {};
        t.forEach(function(t) {
            var i;
            if("Calculated" === t.produced) i = {
                produced: t.produced,
                expr: t.expr,
                alias: t.alias,
                fieldId: t.fieldId
            };
            else if("DataDict" === t.produced) i = {
                produced: t.produced,
                dict: t.dict,
                alias: t.alias,
                fieldId: t.fieldId,
                refId: t.refId,
                refType: t.refType,
                dataType: t.dataType
            };
            else if("Grouping" === t.produced) i = {
                produced: t.produced,
                groups: t.groups,
                alias: t.alias,
                fieldId: t.fieldId,
                refId: t.refId,
                refType: t.refType,
                dataType: t.dataType
            };
            else i = {
                    produced: t.produced,
                    dataType: t.dataType,
                    table: t.tableId,
                    field: t.field,
                    alias: t.alias,
                    fieldId: t.fieldId,
                    convert: t.convert
                };
            e[t.fieldId] = i
        });
        return e
    }

    function E(t) {
        var e = [];
        for(var i in t)
            if("Calculated" === t[i].produced) e.push(t[i]);
        return e
    }

    function I(i) {
        var n = t.extend({}, i);
        e.RECENT_COLORS.push(n);
        for(var r = e.RECENT_COLORS, a = r.length - 26; a > 0; a--) r.shift();
        localStorage.RECENT_COLORS = JSON.stringify(r)
    }

    function A(t, e) {
        t[e.fieldId] = e;
        return t
    }

    function M(t) {
        var e = {};
        t.forEach(function(t) {
            e[t.fieldId] = t.alias
        });
        return e
    }

    function D(t) {
        var e = {};
        t.forEach(function(t) {
            e[t.alias] = t.fieldId
        });
        return e
    }

    function P(e, i, n) {
        function r(r) {
            if(!(n.ignore && n.ignore.test(r) || n.match && !n.match.test(r))) {
                var a = t.dget(e, r);
                if(Array.isArray(a))
                    for(var s = 0, o = a.length; s < o; s++) {
                        var l = a[s];
                        if(i(l, r + "." + s) === !0) return !0
                    } else if(a)
                    if(i(a, r) === !0) return !0
            }
        }

        function a(t) {
            return ["color", "angle", "size", "labels", "details", "shape"].some(function(e) {
                return r(t + "." + e) === !0
            })
        }
        n = n || {};
        if(!a("mark")) {
            if(Array.isArray(e.markMatrix)) {
                var s = e.markMatrix.some(function(t, e) {
                    return a("markMatrix." + e)
                });
                if(s) return
            }["column", "row", "filters", "dimension", "measure"].some(r)
        }
    }

    function N(t, e) {
        if(t && t.length) {
            var i;
            t.some(function(t) {
                var n = t.pathes.indexOf(e);
                if(~n) {
                    i = {
                        index: n,
                        pathes: t.pathes
                    };
                    return !0
                }
            });
            return i
        }
    }

    function L(e) {
        function i(t) {
            if(!t) return !0;
            else return !!n.filter(function(e) {
                return e.alias === t.alias
            }).length
        }
        var n = [];
        P(e, function(t, e) {
            var e = e.split(".")[0];
            if(t && !i(t, n) && "Dimension" === t.role && "Generated" !== t.produced && !/^(dimension|measure|filters)$/.test(e)) n.push(t)
        });
        return n.map(function(e) {
            return t.extend({}, e)
        })
    }

    function R(i, n) {
        var r = t.assign({
            filters: [],
            row: [],
            column: [],
            measures: [],
            showme: {
                show: !1,
                list: []
            },
            levels: [],
            mark: {
                $type: "Mark",
                marktype: "Automatic",
                defaultColor: {
                    r: 13,
                    g: 161,
                    b: 237,
                    a: 1
                },
                defaultSize: {
                    ratio: 1
                },
                defaultShape: {
                    name: "filled",
                    shape: "filled1"
                },
                labels: [],
                details: []
            },
            markMatrix: [],
            sort: {},
            options: t.extend({}, e.DEFAULT_OPTIONS),
            schemaOptions: {},
            geoConfig: n && n.geoConfig || {},
            levels: n && n.levels || []
        }, i || {});
        return r
    }

    function j(e) {
        if(e) {
            var i = t.pid(e, !0),
                n = ft[i];
            if(n) {
                e.alias = n.alias;
                if(n.dict) e.dict = n.dict;
                if(n.groups) e.groups = n.groups;
                if(n.expr) e.expr = n.expr;
                if("g1" === n.granularity && "Calculated" === e.produced) delete e.aggregator;
                else if("g0" === n.granularity && !e.aggregator) e.aggregator = n.aggregator;
                if(n.granularity) e.granularity = n.granularity;
                if(n.refType) e.refType = n.refType;
                if(n.refId) e.refId = n.refId;
                if(n.produced) e.produced = n.produced;
                if(n.dataType) e.dataType = n.dataType;
                if(n.convertedType) e.convertedType = n.convertedType;
                if(n.geoRole) e.geoRole = n.geoRole
            }
            return e
        }
    }

    function O(e, i) {
        var n = i.split(":"),
            r = n[0],
            a = (n[1], {}),
            e = e || {};
        for(var s in pt)
            if(pt.hasOwnProperty(s)) {
                var o = pt[s],
                    l = a[s] = o[i] || o[r] || o["default"],
                    c = t.typeOf(l);
                switch(c) {
                    case "array":
                        if(l.indexOf(e[s]) === -1) e[s] = l[0];
                        break;
                    case "null":
                        delete e[s];
                        break;
                    case "string":
                        e[s] = l;
                        break;
                    case "boolean":
                        if("boolean" != typeof e[s]) e[s] = l
                }
            }
        return {
            config: a,
            label: e
        }
    }

    function F(t) {
        var e = ExpressionAnalyzer.analyzer(),
            i = [];
        t.forEach(function(n) {
            if(n.tableId == -1) {
                var r = M(t),
                    a = ExpressionAnalyzer.id2alias(r)(n.expr, "<此位置字段丢失>"),
                    s = T(t),
                    o = D(t),
                    l = e(s, o)(a);
                if(!l.valid) i.push(n.fieldId)
            }
            if(n.tableId == -2 && n.refId) {
                var c = t.some(function(t) {
                    return t.fieldId == n.refId
                });
                if(!c) i.push(n.fieldId)
            }
        });
        return i
    }

    function z(t) {
        for(var e, i, n = [], r = T(t), a = E(r), s = ExpressionAnalyzer.analyzer(), o = 0; o < a.length; o++) {
            e = a[o];
            i = s(r)(e.expr);
            if(!i.valid) n.push(e)
        }
        return n
    }

    function B(e, i, n) {
        var r = [],
            a = function(e) {
                if("Dimension" == e.role && e.fieldId > 0) {
                    var i = r.some(function(i) {
                        if(t.pid(i) == t.pid(e)) return !0
                    });
                    if(!i) r.push(e)
                }
            },
            s = function(t) {
                t.forEach(function(t) {
                    a(t)
                })
            },
            o = function(t) {
                s(t.details);
                s(t.labels);
                if(t.color) a(t.color);
                if(t.size) a(t.size);
                if(t.angle) a(t.angle);
                if(t.shape) a(t.shape)
            },
            l = n.split("."),
            n = l[0];
        s(e.column);
        s(e.row);
        if(e.mark) o(e.mark);
        if("markMatrix" == n) o(e.markMatrix[l[1]]);
        else {
            var c = i._cid;
            e.markMatrix.forEach(function(t) {
                if(t.ccid == c || t.rcid == c) o(t)
            })
        }
        return r
    }

    function H(e, i, n, r) {
        var a = !0,
            i = i.filter(function(t) {
                return t.fieldId != e.fieldId
            });
        if(z(i).length) {
            if(2 == r) t.message("该字段被其他字段引用，无法忽略", "err");
            a = !1
        }
        n.some(function(i) {
            if(i.pill.fieldId == e.fieldId) {
                if(2 == r) t.message("该字段已被筛选，无法忽略", "err");
                a = !1;
                return !0
            }
        });
        return a
    }

    function W(i, n) {
        var r = {};
        i.forEach(function(i, a) {
            if("Dimension" === i.role)
                if(!t.isDate(i) || !i.mapFunction) {
                    (n || []).some(function(t) {
                        var e = t.pathes.indexOf(i.fieldId);
                        if(~e) {
                            var n = "$Level`" + t.name,
                                s = Math.pow(2, e);
                            r[n] = r[n] | s;
                            r[a] = {
                                signName: n,
                                index: e,
                                last: e === t.pathes.length - 1
                            };
                            return !0
                        }
                    })
                } else {
                    var s = e.MAP_FUNC_LEVEL.indexOf(i.mapFunction);
                    if(~s) {
                        var o = "$Date`" + i.fieldId;
                        r[o] = r[o] | Math.pow(2, s);
                        r[a] = {
                            index: s,
                            signName: o,
                            last: s === e.MAP_FUNC_LEVEL.length - 1
                        };
                        return !0
                    }
                }
        });
        return r
    }

    function q(t, e) {
        if(t) {
            var i = t[e];
            if(i) {
                var n = Math.pow(2, i.index),
                    r = t[i.signName] ^ n;
                if(r > n) return {
                    mode: "zip",
                    signName: i.signName,
                    index: i.index
                };
                else if(!i.last) return {
                    mode: "uzip",
                    signName: i.signName,
                    index: i.index
                };
                else return null
            } else return null
        }
    }

    function G(i, n, r, a, s, o, l, u) {
        var d = n.signName,
            h = d.split("`"),
            f = (r[a] || []).slice();
        if(!o) return r;
        if("$Date" === h[0]) {
            var p = e.MAP_FUNC_LEVEL,
                l = p.indexOf(i.mapFunction);
            if(l === -1) return r;
            if("uzip" === n.mode) f.splice(l + 1, 0, c(t.extend({
                mapFunction: p[l + 1]
            }, i)));
            else
                for(var _ = f.length; _--;) {
                    var m = f[_];
                    if(m.fieldId === i.fieldId)
                        if(m.mapFunction && l < p.indexOf(m.mapFunction)) f.splice(_, 1)
                }
        } else {
            var g = h[1],
                v = t.indexOf(s, function(t) {
                    return t.name === g
                }, !0);
            if(!v) return;
            if("uzip" === n.mode) {
                var y = v.pathes[n.index + 1],
                    i = t.indexOf(u, function(t) {
                        return t.fieldId === y
                    }, !0);
                f.splice(l + 1, 0, c(t.extend({
                    mapFunction: null
                }, i)))
            } else
                for(var _ = f.length; _--;) {
                    var m = o[_];
                    if(m) {
                        if(m.index > n.index) f.splice(_, 1)
                    } else;
                }
        }
        return t.dset(r, f, a, !0)
    }

    function U(t) {
        if(t.column.length <= 0 && t.row.length <= 0 && ("Text" == t.mark.marktype || "Automatic" == t.mark.marktype) && t.mark.labels.length > 0) return !0;
        else return !1
    }

    function V(t) {
        var e = function(t) {
            var e = !0;
            if(t.length > 0) t.some(function(t) {
                if("Continuous" == t.interpretation) {
                    e = !1;
                    return !0
                }
            });
            else e = !1;
            return e
        };
        if(e(t.column) && e(t.row) && ("Text" == t.mark.marktype || "Automatic" == t.mark.marktype)) return !0;
        else return !1
    }

    function Y(n, r) {
        var a = t.dget(n, "preSynthesizeResult.nevDatasets"),
            s = r.schema,
            o = r.query,
            l = r.options,
            c = [],
            u = [],
            d = {};
        if(Array.isArray(a)) {
            for(var h = 0, f = a.length; h < f; h++)
                for(var p = a[h], _ = 0, m = p.length; _ < m; _++)
                    for(var g = p[_], v = 0, y = g.length; v < y; v++) X(g[v], c, u, d);
            u = u.filter(function(t) {
                var e = t.split("`"),
                    i = e[1];
                return "-16" != i
            });
            var b = e,
                x = s.dimensions.concat(s.measures).concat([b.mvalue, b.mname, b.latitude, b.longitude, b.record]).reduce(function(t, e) {
                    t[e.fieldId] = e;
                    return t
                }, {}),
                $ = u.reduce(function(e, n) {
                    var r = n.split("`"),
                        a = r[1],
                        s = x[a];
                    if(a == -16) return e;
                    if(!s) {
                        console.error("找不到具体的字段");
                        return e
                    }
                    var c;
                    P(o, function(e) {
                        if(t.pid(e) === n) {
                            c = e;
                            return !0
                        }
                    });
                    var u = s.alias;
                    if(c) u = i.getDisplayName(c, o, l);
                    e[n] = {
                        name: u,
                        icn: ("" + (s.geoRole && "None" != s.geoRole ? "geo" : s.convertedType || s.dataType || "number")).toLowerCase()
                    };
                    return e
                }, {});
            return {
                headPidMap: $,
                heads: u,
                rows: c
            }
        } else throw new Error("preSynthesizeResult.smallDatasets 返回格式错误")
    }

    function X(t, e, i, n) {
        for(var r = 0, a = t.length; r < a; r++) {
            var s = t[r];
            if(!n[s.dimensionId]) {
                n[s.dimensionId] = 1;
                if(0 === r)
                    for(var o in s)
                        if(~o.indexOf("`") && i.indexOf(o) === -1) i.push(o);
                e.push(s)
            } else;
        }
    }

    function K(e, i) {
        var n = t.pid(i),
            r = e.hiddenValues;
        return r && Array.isArray(r[n])
    }

    function J(t, e) {
        return e.some(function(e) {
            return t[e].some(function(t) {
                return t.hideAxis
            })
        })
    }

    function Z(t, e) {
        return e.some(function(e) {
            return t[e].some(function(t) {
                return t.hideTitle
            })
        })
    }

    function Q(e, i, n) {
        var r = [],
            a = {},
            s = [];
        P(e, function(e) {
            var i = t.pid(e);
            if("Discrete" === e.interpretation && !(i in a) && e.fieldId > 0) {
                r.push(t.extend({}, e));
                s.push(i);
                a[i] = r.length - 1
            }
        });
        var o = [],
            l = s.length;
        i.forEach(function(t) {
            for(var e = [], i = 0; i < l; i++) {
                var n = s[i];
                e[i] = t.record[n];
                if(void 0 !== e[i] && n in a) delete a[n]
            }
            o.push(e)
        });
        var c = [];
        for(var u in a)
            if(a.hasOwnProperty(u)) c.push(a[u]);
        c.sort(function(t, e) {
            return e - 1
        });
        var d = c.length;
        o.forEach(function(t) {
            for(var e = d; e--;) t.splice(e, 1)
        });
        for(; d--;) r.splice(d, 1);
        var h = {
            $type: "PositionFilter",
            dimensions: r,
            filter: {}
        };
        h.filter[n ? "unselect" : "select"] = o;
        return h
    }

    function tt(e) {
        if("string" != typeof e) e = t.ptext(e);
        return gt[e] || (gt[e] = {})
    }

    function et(t) {
        return {
            dimensions: t.dimension,
            measures: t.measure,
            levels: t.levels
        }
    }

    function it(e, i) {
        var n;
        P(e, function(e, r) {
            if(t.pid(e) == t.pid(i)) {
                n = r;
                return !0
            }
        }, {
            ignore: /^(dimension|measure)/
        });
        return n
    }

    function nt(t) {
        t.preventDefault()
    }

    function rt(t) {
        ct[t ? "off" : "on"](document, "contextmenu", nt)
    }

    function at(e) {
        var i = 0;
        P(e, function(e, n) {
            if(t.isDate(e)) i++
        }, {
            match: /^(column|row)/
        });
        return 1 == i ? !0 : !1
    }

    function st(e) {
        function i(i) {
            var n;
            P(e, function(e, r) {
                if(t.isDate(e) && e.mapFunction == i) {
                    n = r;
                    return !0
                }
            }, {
                match: /^(column|row)/
            });
            return n
        }
        var n, r = ["YEAR-MONTH-DAY", "YEAR-MONTH", "YEAR"];
        r.some(function(t) {
            n = i(t);
            if(n) return !0
        });
        return n
    }

    function ot(e) {
        function i(e, i) {
            var n = t.extend({}, e);
            n.mapFunction = i;
            return n
        }
        if(t.isDate(e) && "YEAR-MONTH" == e.mapFunction) var n = {
            YEAR: i(e, "YEAR"),
            MONTH: i(e, "MONTH")
        };
        else if(t.isDate(e) && "YEAR-MONTH-DAY" == e.mapFunction) var n = {
            YEAR: i(e, "YEAR"),
            MONTH: i(e, "MONTH"),
            DAY: i(e, "DAY")
        };
        return n
    }

    function lt(t, e) {
        for(var i = 0; i < t.length; i++)
            if(t[i].info.dimensionId === e) return i;
        return -1
    }
    var ct = Regular.dom,
        ut = new r._$$ReportCache,
        a = new a._$$User,
        dt = new s._$$DBProtection,
        ht = e.MARK_AREA_CONF,
        ft = e.pillInfo,
        pt = e.LABEL_CONFIG;
    e.LABEL_TITLE;
    t.extend(c, {
        undefined: function(e, i) {
            var n = t.assign({}, e, {
                $type: "Measure" === e.role ? "MeasurePill" : "DimensionPill",
                filter: void 0
            });
            if(t.isDate(n) && void 0 === n.mapFunction) n.mapFunction = "YEAR";
            if(!/mark/.test(i || "")) n.created = !0;
            if(!/^(row|column)/.test(i || "")) n.dualAxis = null;
            if(!n._cid) n._cid = t.cid();
            return n
        },
        dimension: function(e) {
            var i = t.extend({
                role: "Dimension",
                interpretation: "Discrete",
                $type: "Dimension"
            }, e);
            delete i.aggregator;
            return i
        },
        measure: function(e) {
            var i;
            if(/Whole|Decimal/.test(e.dataType)) i = "SUM";
            if("String" === e.dataType) i = "CNTD";
            return t.assign({
                aggregator: "g1" !== e.granularity ? i : void 0
            }, e, {
                role: "Measure",
                $type: "Measure",
                interpretation: "Continuous"
            })
        },
        filters: function(e) {
            return t.extend({}, e, {
                $type: e.role,
                created: !0
            })
        }
    });
    var _t = function() {
            var e = {
                once: function(t, e) {
                    var i = function() {
                        e.apply(this, arguments);
                        this.off(t, i)
                    };
                    return this.on(t, i)
                },
                on: function(t, e) {
                    if("object" == typeof t)
                        for(var i in t) this.on(i, t[i]);
                    else {
                        var n = this._handles || (this._handles = {}),
                            r = n[t] || (n[t] = []);
                        r.push(e)
                    }
                    return this
                },
                off: function(t, e) {
                    if(!t || !this._handles) this._handles = {};
                    if(this._handles) {
                        var i, n = this._handles;
                        if(i = n[t]) {
                            if(!e) {
                                n[t] = [];
                                return this
                            }
                            for(var r = 0, a = i.length; r < a; r++)
                                if(e === i[r]) {
                                    i.splice(r, 1);
                                    return this
                                }
                        }
                        return this
                    }
                },
                emit: function(e) {
                    var i, n = t.slice(arguments, 1),
                        r = this._handles;
                    if(!r || !(i = r[e])) return this;
                    for(var a = 0, s = i.length; a < s; a++) i[a].apply(this, n);
                    return this
                }
            };
            return function(i) {
                i = "function" == typeof i ? i.prototype : i;
                return t.extend(i, e)
            }
        }(),
        mt = function() {
            return function(e) {
                function i() {
                    m = [], g = {}
                }

                function n() {
                    if(!v) {
                        e.addEventListener("keydown", r);
                        e.addEventListener("keyup", a);
                        window.addEventListener("focus", i);
                        v = !0
                    }
                }

                function r(t) {
                    var e = t.keyCode;
                    if(224 === e || 93 === e) e = 91;
                    for(var i in p) g[p[i]] = !!t[p[i]];
                    if(p[e] || ~m.indexOf(e));
                    else m.push(e);
                    if(s(t)) t.preventDefault();
                    if(g.metaKey) m = []
                }

                function a(t) {
                    var e = t.keyCode;
                    if(224 === e || 93 === e) e = 91;
                    var i = m.indexOf(e);
                    if(~i) m.splice(i, 1);
                    if("metaKey" === p[e]) m = [];
                    for(var n in p) g[p[n]] = !!t[p[n]]
                }

                function s(t) {
                    var e = !1;
                    _.forEach(function(i) {
                        var n = i.mods,
                            r = i.keys.every(y);
                        if(r)
                            for(var a in g)
                                if(g[a] !== (n.indexOf(a) !== -1)) {
                                    r = !1;
                                    break
                                }
                        if(r) {
                            i.listener(t, i);
                            e = !0
                        }
                    });
                    return e
                }

                function o(t) {
                    var e = {
                        keys: [],
                        mods: []
                    };
                    t.split("+").forEach(function(t) {
                        t = t.trim();
                        var i = f[t.toLowerCase()];
                        if(i) e.mods.push(p[i]);
                        else e.keys.push(d[t.toLowerCase()] || t.toUpperCase().charCodeAt(0))
                    });
                    return e
                }

                function l(e, i, n) {
                    var r = [],
                        a = t.typeOf(e);
                    switch(a) {
                        case "object":
                            n = i;
                            for(var s in e) r.push(u(s, e[s], n));
                            break;
                        case "array":
                            r = e.map(function(t) {
                                return u(t, i, n)
                            });
                            break;
                        case "string":
                            r.push(u(e, i));
                            break;
                        default:
                            throw Error("不支持的combo参数")
                    }
                    return function() {
                        r.forEach(c)
                    }
                }

                function c(t) {
                    var e = _.indexOf(t);
                    _.splice(e, 1)
                }

                function u(t, e) {
                    var i = o(t);
                    i.name = t;
                    i.listener = e;
                    _.push(i);
                    if(!v) n();
                    return i
                }
                if(!e) e = document;
                for(var d = {
                    esc: 27,
                    enter: 13,
                    space: 32,
                    back: 46,
                    delete: 46,
                    up: 38,
                    right: 39,
                    down: 40,
                    left: 41
                }, h = 12; h--;) d["f" + h + 1] = 111 + h;
                var f = {
                        shift: 16,
                        ctrl: 17,
                        control: 17,
                        alt: 18,
                        option: 18,
                        command: 91
                    },
                    p = {
                        16: "shiftKey",
                        17: "ctrlKey",
                        18: "altKey",
                        91: "metaKey"
                    },
                    _ = [],
                    m = [],
                    g = {},
                    v = !1,
                    y = function(t) {
                        if("string" == typeof t) t = d[t.toLowerCase()] || t.toUpperCase().charCodeAt(0);
                        return m.indexOf(t) !== -1
                    };
                return {
                    on: l,
                    pressed: function(t) {
                        var e = p[f[t]];
                        if(e) return g[e];
                        else return y(t)
                    }
                }
            }
        }(),
        gt = (function(t) {
            function e() {
                if(!n)
                    for(var r = +new Date; fn = i.shift();) {
                        if(!fn) {
                            n = !1;
                            return
                        }
                        fn();
                        if(+new Date - r > t) {
                            console.log(+new Date - r);
                            if(i.length) setTimeout(e, 60);
                            break
                        }
                    }
            }
            var i = [],
                n = !1;
            return {
                run: function(t) {
                    i.push(t);
                    if(!n) setTimeout(e, 0)
                }
            }
        }(200), {}),
        vt = t.pid,
        yt = {
            text: function(t) {
                var i = "无",
                    n = 0,
                    r = t.options;
                if(r.length > 1) r.forEach(function(r) {
                    if(r.value && r.type) {
                        n++;
                        if(1 === n) i = "";
                        if(n > 1) i += " " + e.CONDITION_NAMES[t.operator] + " ";
                        i += e.CONDITION_NAMES[r.type] + " <b>" + r.value + "</b> "
                    }
                });
                else if(r[0].value && r[0].type) i = e.CONDITION_NAMES[r[0].type] + " <b>" + r[0].value + "</b> ";
                return i
            },
            condition: function(e) {
                if(void 0 != e.value && "" + e.value) {
                    var i = e.measure;
                    if(i) return "<b>" + t.ptext(i) + "</b> <i>" + e.comparator + "</i> <b>" + e.value + "</b>"
                }
                return "无"
            },
            advanced: function(e) {
                if(e.count && e.measure) {
                    var i = e.measure;
                    if(i) return "按<i>" + t.ptext(i) + "</i>筛选 <b>" + ("1" == e.asc ? "最小" : "最大") + e.count + "个</b>"
                } else return "无"
            },
            list: function(t) {
                var i = e.PICKMODE,
                    n = t.list.length;
                if("list" === t.mode)
                    if(t.pickMode === i.ALL || !t.select) return "无";
                    else return("1" === t.pickMode ? "选择" : "排除") + "了<b>" + n + "</b>项 (共" + t.fullsearchs.length + "项)";
                else if(this._validEmptyValue()) return "无";
                else return "手动<b>" + (t.exclude ? "排除" : "选择") + n + "</b>项"
            },
            date: function() {
                return ""
            }
        },
        bt = {
            match: function(t) {
                var i = t.match;
                if(i) {
                    var n = "";
                    if("Logic" === i.$type && i.left && i.right) n = e.CONDITION_NAMES[i.left.type] + "<b>" + i.left.value + "</b> " + e.CONDITION_NAMES[i.operator] + " " + e.CONDITION_NAMES[i.right.type] + "<b>" + i.right.value + "</b>";
                    else if(i.$type) {
                        var r = String(i.$type).toLowerCase();
                        n = e.CONDITION_NAMES[i.$type] + "<b>" + i[r] + "</b> "
                    }
                    return n
                }
            },
            condition: function(e) {
                var i = e.condition;
                if(i) {
                    if(void 0 != i.value && "" + i.value) {
                        var n = i.measure;
                        if(n) return "<b>" + t.ptext(n) + "</b> <i>" + i.comparator + "</i> <b>" + i.value + "</b>"
                    }
                    return ""
                }
            },
            top: function(e) {
                var i = e.top;
                if(i)
                    if(i.count && i.by) {
                        var n = i.by.measure;
                        if(n) return "按<b>" + t.ptext(n) + "</b>筛选 <b>" + (i.asc ? "最小" : "最大") + i.count + "个</b>"
                    } else return ""
            },
            date: function(t) {
                var e = function(t) {
                        var e, i = t.anchor,
                            n = t.unit;
                        if(!t.from) switch(n) {
                            case "day":
                                e = 0 == i ? "今天" : "昨天";
                                break;
                            case "week":
                                e = 0 == i ? "本周" : "上周";
                                break;
                            case "month":
                                e = 0 == i ? "本月" : "上月";
                                break;
                            case "year":
                                e = 0 == i ? "本年" : "去年"
                        } else e = 0 == i ? "今天" : "昨天";
                        return e
                    },
                    i = function(t) {
                        var e;
                        switch(t) {
                            case "day":
                                e = "天";
                                break;
                            case "week":
                                e = "周";
                                break;
                            case "month":
                                e = "月";
                                break;
                            case "year":
                                e = "年"
                        }
                        return e
                    },
                    n = function(t) {
                        var n = e(t);
                        if(!t.from) return n + "起前" + t.count + i(t.unit);
                        else return t.from + "至" + n
                    },
                    r = ["今天", "昨天", "本年至今", "本月至今", "本周至今"],
                    a = t.date,
                    s = a.mode,
                    o = "";
                if(s == -1) o = a.period.minBound + " 至 " + a.period.maxBound;
                else if("number" == typeof s) o = r[s];
                else o = n(s);
                o += "<br>";
                if(a.hour) o += "每天" + a.hour[0].minBound + "点 至 " + a.hour[0].maxBound + "点";
                return o
            },
            list: function(t) {
                var e = "manual" === t.mode ? "手动" : "";
                e += t.select ? "选择" : "排除";
                var i = t.select || t.unselect;
                if(!i) return "";
                e += (i.length ? "<b>" + i.slice(0, 4).join(",") + "</b>等" : "") + i.length + "项";
                return e
            },
            all: function(t) {
                var e = [t.date ? bt.date(t) : bt.list(t)];
                ["match", "condition", "top"].forEach(function(i) {
                    e.push(bt[i](t))
                });
                return e.filter(function(t) {
                    return !!t
                }).join("  且 ")
            }
        };
    return {
        locked: !1,
        toggleContextMenu: rt,
        status: {},
        query: t.getSearch(),
        creator: c,
        getInfo: tt,
        createPositionFilterWithRecords: Q,
        pid: vt,
        cache: ut,
        cacheUser: a,
        cacheDBProtection: dt,
        getLevelSign: W,
        genZipMode: q,
        formatQuery: _,
        emitable: _t,
        shortcut: mt(),
        cleanState: R,
        rgb2hex: k,
        findPill: S,
        eachPill: P,
        getDimensions: L,
        getFieldType: C,
        getId2AliasMap: M,
        getAlias2IdMap: D,
        recombineField: T,
        filterCalculateArray: E,
        recombineOtherField: A,
        checkMvalueExisit: m,
        applyDiffToMarkMatrix: x,
        applyDiffToMark: $,
        computedMarkMatrix: v,
        fillMeasureValues: w,
        diffAllMarkMatrix: b,
        INFO_MAP: yt,
        fixPill: j,
        uniq: p,
        injectPillToList: d,
        resetMarkLabelConfig: O,
        computedDualAxis: h,
        saveRecentColor: I,
        detectField: F,
        referedByFields: z,
        findLevel: N,
        getFullDimensions: B,
        infoMap2: bt,
        changePillIgnore: H,
        resultToWideTable: Y,
        getSchema: et,
        findDimensionByid: lt,
        foldFilters: function(e) {
            return e.map(function(e) {
                var i = e.filter;
                return t.extend({
                    filter: i
                }, e.pill)
            })
        },
        unfoldFilters: function() {
            return filters.map(function(t) {
                var e = t.filter;
                delete t.filter;
                return {
                    filter: e,
                    pill: t
                }
            })
        },
        changeZipMode: G,
        isCard: U,
        isTable: V,
        hasHiddenValues: K,
        hasHiddenCategory: J,
        hasHiddendTitle: Z,
        onlyOneDatePill: at,
        targetDatePill: st,
        translateDatePill: ot,
        getStateArea: it
    }
}, 7, 136, 176, 3, 44, 9, 210);
I$(164, function(t) {
    var e = {
        RASTER_COUNT: 48,
        RASTER_SPACE: 3,
        DEFAULT_TABS: [{
            key: 1,
            name: "Tab1"
        }, {
            key: 2,
            name: "Tab2"
        }]
    };
    return e
});
I$(55, function(t, e, i, n, r, a, s) {
    function o(t) {
        var e = [];
        i._$forEach(t, function(t, n) {
            var r = {
                x: t.x,
                y: t.y,
                ex: t.ex,
                ey: t.ey,
                reportId: t.reportId,
                filterWidth: t.filterWidth,
                filterPosition: t.filterPosition,
                textId: t.textId,
                content: t.content,
                limit: t.limit,
                showMode: t.showMode,
                reportIds: t.reportIds,
                tabId: t.tabId,
                tabs: t.tabs,
                parentTabId: t.parentTabId,
                relatedTab: t.relatedTab
            };
            if(t.oldey && t.oldHeight) r.ey = t.y + t.oldHeight - 1;
            if(t.parentTabId) {
                delete t.x;
                delete t.y;
                delete t.ex;
                delete t.ey
            }
            if(t.reportId) {
                var a = [];
                i._$forEach(t.filter, function(t, e) {
                    var i = {
                        select: t.select,
                        show: t.show,
                        open: t.open,
                        mode: t.mode,
                        source: t.source,
                        pill: t.pill,
                        reportId: t.reportId,
                        filter: t.filter,
                        measures: t.measures
                    };
                    a.push(i)
                });
                r.filter = a
            }
            e.push(r)
        });
        return e
    }

    function l(t) {
        var e = [];
        i._$forEach(t, function(t, i) {
            var n = {
                open: t.open,
                mode: t.mode,
                source: t.source,
                pill: t.pill,
                reportId: t.reportId,
                filter: t.filter,
                measures: t.measures,
                reportIds: t.reportIds,
                filterHeight: t.filterHeight
            };
            e.push(n)
        });
        return e
    }

    function c(t) {
        var e = !1;
        if(t.ex - t.x + 1 == s.RASTER_COUNT)
            if(t.textId) e = !0;
            else if(d(t)) e = !0;
            else {
                var i = t.report,
                    n = a.isTable(i.query),
                    r = t.limit || !!i.options.chart && i.options.chart.limit;
                if(n && r == -1 && "normal" == i.options.chart.showMode) e = !0
            }
        return e
    }

    function u(t) {
        var e;
        if(t.limit) e = t.limit;
        else e = t.report.options.chart.limit;
        return e
    }

    function d(t) {
        var e;
        if(1 == t.showTable || 0 == t.showTable) e = t.showTable;
        else e = t.report.options.chart.showTable;
        return e
    }
    var h = new r._$$DashBoardCache;
    return {
        cache: h,
        getDashList: o,
        getGlobalList: l,
        isAutoHeight: c,
        getReportLimit: u,
        getReportShowTable: d
    }
}, 3, 6, 4, 7, 53, 34, 164);
I$(214, '{#if @(dashboard)}\n<p class="error f-ellipsis" title="{wrongMessage}" r-hide={step!=4}>{wrongMessage}</p>\n<p class="error f-ellipsis" title="获取图表失败" r-hide={step!=5}>获取图表失败</p>\n<div class="tbox" r-hide={step!=1 && step!=2 && step!=3}>\n  <!-- <div class="load" r-hide={step!=1}>\n    <div class="u-load"></div>\n    <div class="wrd">请耐心等待呦</div>\n    <button type="button" class="u-btn u-btn-1" on-click={this.stopLoading()} >停止加载</button>\n  </div>\n  <div class="reload" r-hide={step!=2}>\n    <div class="u-icn u-icn-search1 img"></div>\n    <div class="wrd">已停止加载</div>\n    <button type="button" class="u-btn u-btn-1" on-click={this.reRender()}  >重新加载</button>\n  </div> -->\n  <div class="large" r-hide={step!=3} >\n    <div class="u-icn u-icn-warm img img-1"></div>\n    <div class="wrd">数据量过大，确定要继续加载吗？</div>\n    <button type="button" class="u-btn u-btn-1" on-click={this.reRender(true)} >开始加载</button>\n  </div>\n</div>\n{/if}\n\n<div ref=container class=\'m-nrender\' r-hide={ step != 0 && step != undefined } style="{loading?\'z-index:297\': \'\' }">\n\n{#if needPager || pathes.length}\n<div class=\'pager-control {total/limit <= 1 && !pathes.length? "z-void": ""}\'>\n{#if needPager}\n<!-- 表明是table  -->\n<div class=\'limit\' > \n  <label for="">每页显示</label>\n  <select class=\'u-txt u-txt-s1\' r-model={limit|num} on-change={this.changeLimit($event)}  >\n      <option value=-1>不分页</option>\n    {#list @(limits) as l by l_index}\n      <option value={l}>{l}</option>\n    {/list}\n  </select>\n</div>\n<pager current={(offset/limit)+1} total={Math.ceil(total/limit)}  on-nav={this.nav($event)} />\n{/if}\n{#if pathes.length}\n<nav class="m-crumb m-crumb-arr m-crumb-chart">\n    <ul class="f-cb">\n      <li class=\'noarr\'>下钻路径：</li>\n      {#list pathes as path by path_index}\n      <li class={path_index===0? \'noarr\':\'\'}>\n      {#if path_index === pathes.length-1 }\n      {path.dimension|ptext}\n      {#else}\n      <a href="#" title={path.title} on-click={this.touchPath(path_index)}>{path.dimension? path.name: \'原图\'}</a>\n      {/if}\n      </li>\n      {/list}\n        \n    </ul>\n</nav>\n{/if}\n</div>\n{/if}\n\n<div class=\'mask\' r-hide={ (!disabled && !loading  && this._render  )  } >\n  {#if loading}\n  <mask show={area===\'edit\'} clazz=\'m-window-op\'></mask>\n  <img title=\'正在加载\' class=\'u-pause\' r-hide={area == \'edit\'} width=\'32px\' src={loading?\'/res/img/load-report.svg\':\'/res/img/run-report.png\'} on-click={this.reject && this.reject()} />\n  {#elseif !this._render }\n  <div class=\'void-pointer\'>\n    <h3 class=\'rpt\'> <span class=\'u-icn u-icn-report\'></span></h3>\n    <p> <span class=\'u-icn u-icn-arr3\'></span> 请将左边维度、度量，拖入行、列、筛选器、标记面板中\n</p>\n  </div>\n  {#else}\n  <h2>{ disabledMessage } </h2>\n  {/if}\n</div>\n\n\n</div>');
I$(31, function(t) {
    function e(e, i) {
        if(!localStorage) throw Error("不支持localStorage的浏览器");
        i = t.extend(i || {}, {
            maxSize: 2097152
        });
        if(!e) throw Error("必须制定一个名字");
        this.name = e;
        this._data = JSON.parse(localStorage.getItem(this.name) || "{}")
    }
    var i = e.prototype;
    i.set = function(t, e) {
        var i = t.split("."),
            n = i.length;
        i.reduce(function(t, i, r) {
            if(r !== n - 1) return void 0 == t[i] ? t[i] = {} : t[i];
            else t[i] = e
        }, this._data);
        this.sync()
    };
    i.get = function(t) {
        var e = t.split(".");
        return e.reduce(function(t, e) {
            if(void 0 == t) return t;
            else return t[e]
        }, this._data)
    };
    i.remove = function(t) {
        var e = path.split("."),
            i = e.length;
        e.reduce(function(t, e, n) {
            if(n !== i - 1) return t[e];
            else delete t[e]
        }, this._data);
        this.sync()
    };
    i.sync = function() {
        this.name;
        localStorage.setItem(this.name, JSON.stringify(this._data))
    };
    var n = new e("youdata");
    n.Storage = e;
    return n
}, 7);
! function(t, e) {
    if("object" == typeof exports && "object" == typeof module) module.exports = e();
    else if("function" == typeof define && define.amd) define(e);
    else if("object" == typeof exports) exports["Redux"] = e();
    else t["Redux"] = e()
}(this, function() {
    return function(t) {
        function e(n) {
            if(i[n]) return i[n].exports;
            var r = i[n] = {
                exports: {},
                id: n,
                loaded: !1
            };
            t[n].call(r.exports, r, r.exports, e);
            r.loaded = !0;
            return r.exports
        }
        var i = {};
        e.m = t;
        e.c = i;
        e.p = "";
        return e(0)
    }([function(t, e, i) {
        "use strict";

        function n(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        e.__esModule = !0;
        var r = i(1),
            a = n(r),
            s = i(7),
            o = n(s),
            l = i(6),
            c = n(l),
            u = i(5),
            d = n(u),
            h = i(2),
            f = n(h);
        e.createStore = a["default"];
        e.combineReducers = o["default"];
        e.bindActionCreators = c["default"];
        e.applyMiddleware = d["default"];
        e.compose = f["default"]
    }, function(t, e, i) {
        "use strict";

        function n(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }

        function r(t, e) {
            function i() {
                return u
            }

            function n(t) {
                d.push(t);
                return function() {
                    var e = d.indexOf(t);
                    d.splice(e, 1)
                }
            }

            function r(t) {
                if(!s["default"](t)) throw new Error("Actions must be plain objects. Use custom middleware for async actions.");
                if(h) throw new Error("Reducers may not dispatch actions.");
                try {
                    h = !0;
                    u = c(u, t)
                } finally {
                    h = !1
                }
                d.slice().forEach(function(t) {
                    return t()
                });
                return t
            }

            function a() {
                return c
            }

            function l(t) {
                c = t;
                r({
                    type: o.INIT
                })
            }
            if("function" != typeof t) throw new Error("Expected the reducer to be a function.");
            var c = t,
                u = e,
                d = [],
                h = !1;
            r({
                type: o.INIT
            });
            return {
                dispatch: r,
                subscribe: n,
                getState: i,
                getReducer: a,
                replaceReducer: l
            }
        }
        e.__esModule = !0;
        e["default"] = r;
        var a = i(3),
            s = n(a),
            o = {
                INIT: "@@redux/INIT"
            };
        e.ActionTypes = o
    }, function(t, e) {
        "use strict";

        function i() {
            for(var t = arguments.length, e = Array(t), i = 0; i < t; i++) e[i] = arguments[i];
            return e.reduceRight(function(t, e) {
                return e(t)
            })
        }
        e.__esModule = !0;
        e["default"] = i;
        t.exports = e["default"]
    }, function(t, e) {
        "use strict";

        function i(t) {
            if(!t || "object" != typeof t) return !1;
            var e = "function" == typeof t.constructor ? Object.getPrototypeOf(t) : Object.prototype;
            if(null === e) return !0;
            var i = e.constructor;
            return "function" == typeof i && i instanceof i && n(i) === n(Object)
        }
        e.__esModule = !0;
        e["default"] = i;
        var n = function(t) {
            return Function.prototype.toString.call(t)
        };
        t.exports = e["default"]
    }, function(t, e) {
        "use strict";

        function i(t, e) {
            return Object.keys(t).reduce(function(i, n) {
                i[n] = e(t[n], n);
                return i
            }, {})
        }
        e.__esModule = !0;
        e["default"] = i;
        t.exports = e["default"]
    }, function(t, e, i) {
        "use strict";

        function n(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }

        function r() {
            for(var t = arguments.length, e = Array(t), i = 0; i < t; i++) e[i] = arguments[i];
            return function(t) {
                return function(i, n) {
                    var r = t(i, n),
                        s = r.dispatch,
                        l = [],
                        c = {
                            getState: r.getState,
                            dispatch: function(t) {
                                return s(t)
                            }
                        };
                    l = e.map(function(t) {
                        return t(c)
                    });
                    s = o["default"].apply(void 0, l.concat([r.dispatch]));
                    return a({}, r, {
                        dispatch: s
                    })
                }
            }
        }
        e.__esModule = !0;
        var a = Object.assign || function(t) {
                for(var e = 1; e < arguments.length; e++) {
                    var i = arguments[e];
                    for(var n in i)
                        if(Object.prototype.hasOwnProperty.call(i, n)) t[n] = i[n]
                }
                return t
            };
        e["default"] = r;
        var s = i(2),
            o = n(s);
        t.exports = e["default"]
    }, function(t, e, i) {
        "use strict";

        function n(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }

        function r(t, e) {
            return function() {
                return e(t.apply(void 0, arguments))
            }
        }

        function a(t, e) {
            if("function" == typeof t) return r(t, e);
            if("object" != typeof t || null == t) throw new Error("bindActionCreators expected an object or a function, instead received " + typeof t + '. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');
            return o["default"](t, function(t) {
                return r(t, e)
            })
        }
        e.__esModule = !0;
        e["default"] = a;
        var s = i(4),
            o = n(s);
        t.exports = e["default"]
    }, function(t, e, i) {
        (function(n) {
            "use strict";

            function r(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function a(t, e) {
                var i = e && e.type,
                    n = i && '"' + i.toString() + '"' || "an action";
                return 'Reducer "' + t + '" returned undefined handling ' + n + ". To ignore an action, you must explicitly return the previous state."
            }

            function s(t, e) {
                var i = Object.keys(e);
                if(0 !== i.length)
                    if(u["default"](t)) {
                        var n = Object.keys(t).filter(function(t) {
                            return i.indexOf(t) < 0
                        });
                        if(n.length > 0) console.error("Unexpected " + (n.length > 1 ? "keys" : "key") + " " + ('"' + n.join('", "') + '" in initialState will be ignored. ') + ('Expected to find one of the known reducer keys instead: "' + i.join('", "') + '"'))
                    } else console.error('initialState has unexpected type of "' + {}.toString.call(t).match(/\s([a-z|A-Z]+)/)[1] + '". Expected initialState to be an object with the following ' + ('keys: "' + i.join('", "') + '"'));
                else console.error("Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.")
            }

            function o(t) {
                var e = p["default"](t, function(t) {
                    return "function" == typeof t
                });
                Object.keys(e).forEach(function(t) {
                    var i = e[t];
                    if("undefined" == typeof i(void 0, {
                            type: l.ActionTypes.INIT
                        })) throw new Error('Reducer "' + t + '" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');
                    var n = Math.random().toString(36).substring(7).split("").join(".");
                    if("undefined" == typeof i(void 0, {
                            type: n
                        })) throw new Error('Reducer "' + t + '" returned undefined when probed with a random type. ' + ("Don't try to handle " + l.ActionTypes.INIT + ' or other actions in "redux/*" ') + "namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")
                });
                var i, r = h["default"](e, function() {});
                return function(t, o) {
                    if(void 0 === t) t = r;
                    var l = h["default"](e, function(e, i) {
                        var n = e(t[i], o);
                        if("undefined" == typeof n) throw new Error(a(i, o));
                        return n
                    });
                    if("undefined" != typeof n && "undefined" != typeof n.env || "undefined" != typeof __DEV__ && __DEV__)
                        if(!i) {
                            s(t, l);
                            i = !0
                        }
                    return l
                }
            }
            e.__esModule = !0;
            e["default"] = o;
            var l = i(1),
                c = i(3),
                u = r(c),
                d = i(4),
                h = r(d),
                f = i(8),
                p = r(f);
            t.exports = e["default"]
        }).call(e, i(9))
    }, function(t, e) {
        "use strict";

        function i(t, e) {
            return Object.keys(t).reduce(function(i, n) {
                if(e(t[n])) i[n] = t[n];
                return i
            }, {})
        }
        e.__esModule = !0;
        e["default"] = i;
        t.exports = e["default"]
    }, function(t, e) {
        function i() {
            c = !1;
            if(s.length) l = s.concat(l);
            else u = -1;
            if(l.length) n()
        }

        function n() {
            if(!c) {
                var t = setTimeout(i);
                c = !0;
                for(var e = l.length; e;) {
                    s = l;
                    l = [];
                    for(; ++u < e;) s[u].run();
                    u = -1;
                    e = l.length
                }
                s = null;
                c = !1;
                clearTimeout(t)
            }
        }

        function r(t, e) {
            this.fun = t;
            this.array = e
        }

        function a() {}
        var s, o = t.exports = {},
            l = [],
            c = !1,
            u = -1;
        o.nextTick = function(t) {
            var e = new Array(arguments.length - 1);
            if(arguments.length > 1)
                for(var i = 1; i < arguments.length; i++) e[i - 1] = arguments[i];
            l.push(new r(t, e));
            if(1 === l.length && !c) setTimeout(n, 0)
        };
        r.prototype.run = function() {
            this.fun.apply(null, this.array)
        };
        o.title = "browser";
        o.browser = !0;
        o.env = {};
        o.argv = [];
        o.version = "";
        o.versions = {};
        o.on = a;
        o.addListener = a;
        o.once = a;
        o.off = a;
        o.removeListener = a;
        o.removeAllListeners = a;
        o.emit = a;
        o.binding = function(t) {
            throw new Error("process.binding is not supported")
        };
        o.cwd = function() {
            return "/"
        };
        o.chdir = function(t) {
            throw new Error("process.chdir is not supported")
        };
        o.umask = function() {
            return 0
        }
    }])
});
I$(402, function(t, e, i, n) {
    var r = ["add", "seek", "undo", "redo", "refresh"],
        a = function(t, e, i, n) {
            var o = {
                    timeline: [],
                    index: -1,
                    size: n || 1024
                },
                l = {};
            r.forEach(function(e) {
                l[t + "_" + e] = a[e]
            });
            return function(t, n) {
                if(void 0 === t) t = o;
                if(!t.timeline) {
                    o.current = t;
                    t = o
                }
                var r = n.type,
                    a = l[r];
                if(a) return a(t, n.payload, n.replace);
                else return s(t, e(t.current, n), i.indexOf(r) !== -1 && n.record !== !1, n)
            }
        },
        s = a.add = function(t, e, n, r) {
            var a = t.current;
            if(e === a || void 0 == e) return t;
            if("object" !== i.typeOf(e)) throw Error("reducer返回state类型错误");
            var s = {
                current: e
            };
            if(n) {
                if(r.replace) t.timeline.pop();
                var o = s.timeline = t.timeline.slice(t.index + 1 >= t.size ? 1 : 0, t.index + 1);
                s.index = o.push(e) - 1
            }
            return i.extend(s, t)
        },
        o = (a.refresh = function(t) {
            return t
        }, a.seek = function(t, e, n) {
            var r = t.timeline,
                a = r.length - 1;
            if(e < 0) e = 0;
            if(e > a) {
                e = a;
                return t
            }
            if(n) t.timeline = r.slice(0, e + 1);
            return e == t.index ? t : i.extend({
                index: e,
                current: r[e]
            }, t)
        });
    a.undo = function(t, e, i) {
        return o(t, t.index - (e || 1), i)
    };
    a.redo = function(t, e) {
        return o(t, t.index + (e || 1))
    };
    return a
}, 207, 173, 7, 136);
I$(33, function(t) {
    var e = t.extend({
        $body: '      <div class="u-spinner">      <div class="spinner">        <div class="bounce1"></div>        <div class="bounce2"></div>        <div class="bounce3"></div>      </div>      {#inc attach}      </div>',
        data: {
            show: !0
        }
    });
    return e
}, 171);
I$(208, function(t, e, i, n) {
    function r(e, i, n) {
        s[t.formatType(e)] = function(t) {
            var n = i && i.apply(this, arguments) || {
                    payload: t
                };
            if("function" != typeof n) n.type = e;
            return n
        };
        if(!n) s.rec.push(e)
    }

    function a(t) {
        for(var e in t) r(e, t[e], t[e] && t[e]._norec)
    }
    var s = (i.cache, {
        rec: [],
        reflex: [],
        norun: []
    });
    Function.prototype.norec = function() {
        this._norec = !0;
        return this
    };
    Function.prototype.reflex = function() {
        this._reflex = !0;
        return this
    };
    Function.prototype.norun = function() {
        this._norun = !0;
        return this
    };
    a({
        CHANGE_PILL_AGGREGATOR: function(t) {
            return {
                field: t
            }
        }
    });
    a({
        MOVE_PILL: function(t) {
            var e = {
                payload: t
            };
            return e
        },
        SET_FILTER_RANGE: function(t, e) {
            return {
                payload: {
                    type: t,
                    value: value
                }
            }
        },
        SET_FILTER_RANGE: null,
        DEL_PILL: null,
        REMOVE_FILTER: null,
        SWITCH_AXIS: null
    });
    return t.extend(s, {
        undo: function(t) {
            return {
                type: "report_undo",
                replace: 1 == t
            }
        },
        redo: function() {
            return {
                type: "report_redo"
            }
        },
        seek: function(t) {
            return {
                type: "report_seek",
                payload: t
            }
        },
        refresh: function() {
            return {
                type: "report_refresh"
            }
        }
    })
}, 7, 136, 34, 33, 213);
I$(209, function(t, e, i, n, r) {
    function a(e, i, n) {
        if(_.test(i)) return t.dset(e, void 0, i, !0);
        var r = t.dget(e, i);
        r = r ? r.slice() : [];
        r.splice(n, 1);
        return t.dset(e, r, i, !0)
    }

    function s(e, i, n, r) {
        var a = f(n, i);
        if(_.test(i)) return t.dset(e, a, i, !0);
        var s = t.dget(e, i);
        s = s ? s.slice() : [];
        if("number" != typeof r) r = s.length - 1;
        if(r === -1) s.unshift(a);
        else s.splice(r + 1, 0, a);
        var o;
        if("row" === i || "column" === i) {
            var l = s.slice();
            s.sort(function(t, e) {
                if(t.interpretation === e.interpretation) return l.indexOf(t) > l.indexOf(e) ? 1 : -1;
                else var i = "Continuous" === t.interpretation ? 1 : -1;
                return i
            });
            o = s.some(function(t, e) {
                if(t !== l[e]) return !0
            })
        }
        if(o) g.REPORT_ERROR(e, "在行列面板，度量无法放置在维度之前， 已自动重排");
        var c = t.dset(e, s, i, !0),
            u = "dimension measure";
        if(~u.indexOf(i)) c.needUpdate = !0;
        return c
    }

    function o(e, i) {
        var n = i.target,
            r = i.from,
            o = i.selfIndex;
        if(void 0 === o) o = -1;
        var l, c, u = i.injectAt,
            d = i.pid,
            h = i.pill;
        i.pill;
        if(r) var f = t.dget(e, r);
        var _ = "measure dimension",
            m = e.filters;
        if("filters" === n && "filters" !== r && t.indexOf(m, function(e) {
                return t.pid(e) === d
            }) !== -1) return g.REPORT_ERROR(e, "无法将相同的项拖入到过滤器面板");
        if(h.tableId == -4 && "measure" === n) return g.REPORT_ERROR(e, "组无法转换为度量");
        if(t.isDate(h) && "measure" === n) return g.REPORT_ERROR(e, "日期类型无法转换为度量");
        if("filters" === n && h.fieldId < 0) return g.REPORT_ERROR(e, "无法将当前类型字段拖入到过滤器面板");
        if(r && (_.indexOf(r) === -1 && !p.pressed("alt") || _.indexOf(n) !== -1)) {
            l = o !== -1 ? o : t.indexOf(f, function(e) {
                return t.pid(e) === d
            });
            var v = t.dget(e, r);
            if(v) c = v[l];
            e = a(e, r, l)
        }
        if(null != u && l < u) u -= 1;
        h = t.extend({}, h);
        if(c) h._cid = c._cid;
        if(p.pressed("alt")) delete h._cid;
        var y = s(e, n, h, u);
        if("measures" === n) y.msort = "manual";
        return y
    }

    function l(e) {
        if(Array.isArray(e)) return e.forEach(l);
        if("object" == typeof e) {
            var i = e;
            e = i.name;
            var n = i.reflex
        }
        var r = t.formatType(e),
            a = function(e, i) {
                var n = i.area,
                    a = i.index,
                    s = t.dget(e, n + (null != a ? "." + a : "") + "." + r);
                if(s === i[r]) return e;
                var o = {};
                o[r] = i[r];
                var l = t.dget(e, n),
                    c = t.dset(l, o, i.index);
                return t.dset(e, c, n, !0)
            };
        g["CHANGE_" + e] = n ? a.reflex() : a
    }

    function c(e, i) {
        if(!e) e = [];
        var n = i.payload,
            r = n && n.pid,
            a = u(e.options, i);
        if(void 0 !== a && a !== e.options) e = t.dset(e, a, "options", !0);
        switch(i.type) {
            case "MOVE_PILL":
                return o(e, n);
            case "DEL_PILL":
                var s, l = n.from,
                    c = t.dget(e, l);
                if(_.test(l)) s = null;
                else {
                    var r = n.pid;
                    s = c.slice().filter(function(e) {
                        var i = n.pill ? n.pill !== e : r !== t.pid(e);
                        return i
                    })
                }
                return t.dset(e, s, l);
            case "REMOVE_FILTER":
                var d = "filters." + n + ".filter",
                    h = t.dget(e, d);
                if(!h) return e;
                else return t.dset(e, void 0, d, !0);
            default:
                if(g[i.type]) return g[i.type](e, i.payload, i);
                else return e
        }
    }

    function u(t, e) {
        var i = e.type;
        if(m[i]) return m[i](t, e.payload);
        else return t
    }

    function d(e) {
        return function(a, o) {
            var l = e(a, o);
            if("SYNC_MARK" === o.type) return l;
            l.action = {
                type: o.type
            };
            if(a !== l && ~n.reflex.indexOf(o.type)) l.reflex = !0;
            else l.reflex = !1;
            l = h(a, l, o);
            var c = [],
                u = l.mark;
            if(u.color) {
                var d = i.pid(u.color);
                c.push(d)
            } else {
                var f = l.markMatrix;
                f.forEach(function(t) {
                    if(t.color) {
                        var e = i.pid(t.color);
                        c.push(e)
                    }
                })
            }
            var p = t.extend({}, l.options.marksColor);
            for(var _ in p) {
                var m = c.some(function(t) {
                    return t === _
                });
                if(!m) delete p[_]
            }
            var g = t.dset(l.options, p, "marksColor", !0);
            l.options = g;
            i.eachPill(l, function(e, n) {
                if("Measure" == e.role && e.tableCalc) {
                    var r = i.getFullDimensions(l, e, n),
                        a = e.tableCalc.along,
                        s = !0;
                    a.forEach(function(e) {
                        var i = r.some(function(i) {
                            if(t.pid(e) == t.pid(i)) return !0
                        });
                        if(!i) s = !1
                    });
                    var o = s ? 0 : 1;
                    if(e.status !== o) l = t.dset(l, {
                        status: o
                    }, n)
                }
            }, {
                match: /^(?:(?:row|column)$|mark)/
            });
            if(o.payload && "MOVE_PILL" == o.type) {
                var v = o.payload,
                    y = o.payload.pill.fieldId,
                    b = r.pillInfo[y];
                if(b && b.geoRole && "None" != b.geoRole && "Latitude" != b.geoRole && "Longitude" != b.geoRole) {
                    var x = l.geoConfig;
                    if(x && x.list) {
                        var $ = {},
                            w = [];
                        x.list.forEach(function(t) {
                            var e = t[b.geoRole.toLowerCase()];
                            if("Field" == e.$type)
                                if(e.fieldConfig && e.fieldConfig.fieldId)
                                    if(e.fieldConfig.fieldId == y) {
                                        $ = t;
                                        return !0
                                    }
                        });
                        for(var _ in $)
                            if("Field" == $[_].$type) w.push($[_].fieldConfig.fieldId);
                        i.eachPill(l, function(e, i) {
                            if(e.geoRole && "None" != e.geoRole && "Latitude" != e.geoRole && "Longitude" != e.geoRole) {
                                var n = e.fieldId,
                                    r = w.some(function(t, e) {
                                        if(t == n) return !0
                                    });
                                if(!r) {
                                    l = t.dset(l, {
                                        status: 1
                                    }, i);
                                    t.message("不可使用2个及以上同级别地理位置", "err")
                                } else;
                            }
                        }, {
                            match: /^(?:(?:row|column)$|mark)/
                        });
                        if("dimension" == v.from && "mark" == v.target.split(".")[0] && "Country" !== b.geoRole)
                            if($) {
                                var w = [],
                                    k = function(t) {
                                        if("Field" == t.$type && t.fieldConfig && t.fieldConfig.fieldId) {
                                            var e = t.fieldConfig.fieldId,
                                                n = !0;
                                            i.eachPill(l, function(t, i) {
                                                if(t.fieldId == e) n = !1
                                            }, {
                                                match: /^(?:(?:row|column)$|mark)/
                                            });
                                            if(n) w.push(t.fieldConfig.fieldId)
                                        }
                                    };
                                if("Province" == b.geoRole) k($.country);
                                else if("City" == b.geoRole) {
                                    k($.country);
                                    k($.province)
                                }
                                var S = l.dimension;
                                S.forEach(function(t) {
                                    w.forEach(function(e) {
                                        if(t.fieldId == e) l = s(l, "mark.labels", t, null)
                                    })
                                })
                            }
                    }
                }
            }
            var C = (l.row, l.column, l.levels),
                T = l.levels !== a.levels;
            if(a.row !== l.row || T) l = t.dset(l, i.getLevelSign(l.row, C), "levelSign.row", {
                autoCreated: !0,
                replace: !0
            });
            if(a.column !== l.column || T) l = t.dset(l, i.getLevelSign(l.column, C), "levelSign.column", {
                autoCreated: !0,
                replace: !0
            });
            return l
        }
    }

    function h(e, n, r) {
        var a = g.SYNC_MARK.bind(g);
        if("SHOWME_SET_PILL" === r.type) n = a(n, {
            area: "markMatrix"
        });
        if(e.mark !== n.mark) n = a(n, {
            area: "mark"
        });
        else {
            var s = n.markMatrix.some(function(t, i) {
                    var n = e.markMatrix;
                    if(!n || !n[i] || n[i] !== t) return !0
                }) || n.markMatrix.length !== e.markMatrix.length;
            if(s) n = a(n, {
                area: "markMatrix"
            })
        }
        var o = t.slice(n.markMatrix || []);
        o.unshift(n.mark);
        o = o.map(function(e) {
            if(e.marktype.indexOf("Pie") === -1 && e.angle) return t.dset(e, void 0, "angle", !0);
            else if(e.marktype.indexOf("Scatter") === -1 && e.shape) return t.dset(e, void 0, "shape", !0);
            else return e
        });
        n.mark = o.shift();
        n.markMatrix = o;
        var l = i.computedMarkMatrix(n);
        if(l) n = a(n, {
            area: "mark"
        });
        if(!t.dget(n, "markMatrix.length"))
            if("Multiple" === n.mark.marktype) n = t.dset(n, "Automatic", "mark.marktype");
        return n
    }
    var f = i.creator,
        p = i.shortcut,
        _ = (r.MARK_AREA_CONF, r.NOT_AREA),
        m = (i.cache, {
            CHANGE_DISPLAY_NAME: function(e, i) {
                return t.dset(e, i.displayName, "displayNameMap." + i.pid, !0)
            }.reflex(),
            HIDE_VALUE: function(e, i) {
                if(!e.hiddenValues) e.hiddenValues = {};
                var n = e.hiddenValues,
                    r = t.slice(n[i.pid] || []),
                    a = i.values;
                if(Array.isArray(a)) a.forEach(function(t) {
                    if(r.indexOf(t) === -1) r.push(t)
                });
                return t.dset(e, r, "hiddenValues." + i.pid, !0)
            }.reflex(),
            CANCEL_HIDDEN: function(e, i) {
                if(e.hiddenValues)
                    if(i.all) return t.dset(e, {}, "hiddenValues", !0);
                    else return t.dunset(e, "hiddenValues." + i.pid)
            }.reflex(),
            SAVE_PAGE: function(e, i) {
                var n = t.dget(e, "page");
                i.limit = i.limit || 10;
                i.offset = i.offset || 0;
                if(i.limit === n.limit && i.offset === n.offset) return e
            },
            SAVE_COLOR: function(e, n) {
                var r = i.pid(n.changedPill),
                    a = {
                        colorMap: n.colorMap,
                        templateId: n.templateId,
                        opacity: n.opacity,
                        maxIndex: n.maxIndex
                    };
                return t.dset(e, a, "marksColor." + r, !0)
            }.reflex(),
            SAVE_CONTINUOUS_COLOR: function(e, n) {
                var r = i.pid(n.changedPill),
                    a = {
                        reverse: n.reverse,
                        templateId: n.templateId,
                        colors: n.colors
                    };
                return t.dset(e, a, "marksColor." + r, !0)
            }.reflex(),
            SAVE_DISCRETE_SHAPE: function(e, n) {
                var r = i.pid(n.changedPill),
                    a = {
                        shapeMap: n.shapeMap,
                        templateId: n.templateId,
                        name: n.name,
                        maxIndex: n.maxIndex
                    };
                return t.dset(e, a, "marksShape." + r, !0)
            }.reflex(),
            SAVE_FORMAT: function(e, i) {
                var n = i.pid;
                if(!i.format) {
                    var r = t.extend({}, e.formatMap);
                    delete r[n];
                    return t.dset(e, r, "formatMap", !0)
                } else return t.dset(e, i.format, "formatMap." + n, !0)
            }.reflex(),
            SAVE_REFERENCELINE: function(e, n) {
                var r = i.pid(n.changedPill);
                return t.dset(e, n.options, "referenceline." + r, !0)
            },
            REMOVE_ALL_REFERENCELINE: function(e, n) {
                var r = i.pid(n.changedPill),
                    a = t.extend({}, e.referenceline);
                delete a[r];
                return t.dset(e, a, "referenceline", !0)
            }.reflex(),
            REMOVE_REFERENCELINE: function(e, i) {
                var n = i.id.split("_")[0],
                    r = t.extend({}, e.referenceline);
                r[n] = (r[n] || []).filter(function(t) {
                    return t.id !== i.id
                });
                if(0 === r[n].length) delete r[n];
                return t.dset(e, r, "referenceline", !0)
            }.reflex(),
            SAVE_SHOW_MODE: function(e, i) {
                return t.dset(e, i.mode, "chart.showMode")
            }.reflex(),
            SAVE_HIDE_LEGEND: function(e, i) {
                return t.dset(e, i.hideLegend, "chart.hideLegend")
            }.reflex(),
            SET_SHOW_TABLE: function(e, i) {
                return t.dset(e, i.mode, "chart.showTable")
            }.reflex(),
            SET_AUTO_RELOAD: function(e, i) {
                return t.dset(e, i, "autoReload")
            },
            SET_MEASURE_WARNING: function(e, i) {
                return t.dset(e, i, "measureWarning")
            },
            SET_FOCUS_SETTING: function(e, i) {
                return t.dset(e, i, "focusSetting")
            }
        }),
        g = {
            QUICK_TABLE_CALC: function(e, n) {
                var r, o = n.quickType,
                    l = n.dateType;
                switch(o) {
                    case "DODV":
                    case "DODR":
                        var c = i.targetDatePill(e);
                        r = {
                            args: {
                                from: "prev"
                            },
                            along: [t.dget(e, c)]
                        };
                        if("DODV" == o) r.calc = "DiffFrom";
                        else if("DODR" == o) r.calc = "PercentDiffFrom";
                        break;
                    case "YOYV":
                    case "YOYR":
                        var c = i.targetDatePill(e),
                            u = t.dget(e, c),
                            d = c.split(".");
                        e = a(e, d[0], d[1]);
                        var h = i.translateDatePill(u),
                            f = d[1] - 1;
                        for(var p in h) {
                            e = s(e, d[0], h[p], f);
                            f++
                        }
                        r = {
                            args: {
                                from: "prev"
                            }
                        };
                        if("YEAR-MONTH" == u.mapFunction) r.along = [h["YEAR"]];
                        else if("YEAR-MONTH-DAY" == u.mapFunction) switch(l) {
                            case "YEAR":
                                r.along = [h["YEAR"]];
                                break;
                            case "MONTH":
                                r.along = [h["YEAR"], h["MONTH"]]
                        }
                        if("YOYV" == o) r.calc = "DiffFrom";
                        else if("YOYR" == o) r.calc = "PercentDiffFrom";
                        break;
                    case "POT":
                        r = {
                            calc: "PercentOfTotal",
                            along: i.getFullDimensions(e, n.pill, n.area)
                        };
                        break;
                    case "YTD":
                    case "MTD":
                        var c = i.targetDatePill(e),
                            u = t.dget(e, c),
                            d = c.split(".");
                        e = a(e, d[0], d[1]);
                        var h = i.translateDatePill(u),
                            f = d[1] - 1;
                        for(var p in h) {
                            e = s(e, d[0], h[p], f);
                            f++
                        }
                        r = {
                            calc: "RunningTotal"
                        };
                        if("YTD" == o) r.along = [h["MONTH"], h["DAY"]];
                        else if("MTD" == o) r.along = [h["DAY"]]
                }
                if(f && d[0] == n.area) n.index = n.index + f;
                e = g.CHANGE_TABLE_CALC(e, {
                    area: n.area,
                    index: n.index,
                    tableCalc: r
                });
                return e
            },
            CHANGE_HIDE_TITLE: function(e, i) {
                var n = i.area,
                    r = t.dget(e, n),
                    a = r.map(function(e, n) {
                        if("Discrete" == e.interpretation) return t.assign({}, e, {
                            hideTitle: i.hideTitle
                        });
                        else return e
                    });
                return t.dset(e, a, n, !0)
            }.reflex(),
            CANCEL_HIDE_TITLE: function(e, i) {
                var n = i.areas;
                n.forEach(function(n) {
                    var r = t.dget(e, n),
                        a = r.map(function(e) {
                            if("Discrete" == e.interpretation) return t.assign({}, e, {
                                hideTitle: i.hideTitle
                            });
                            else return e
                        });
                    e = t.dset(e, a, n, !0)
                });
                return e
            }.reflex(),
            CANCEL_HIDE_AXIS: function(e, i) {
                var n = i.areas;
                n.forEach(function(n) {
                    var r = t.dget(e, n),
                        a = r.map(function(e) {
                            if("Discrete" == e.interpretation) return t.assign({}, e, {
                                hideAxis: i.hideAxis
                            });
                            else return e
                        });
                    e = t.dset(e, a, n, !0)
                });
                return e
            }.reflex(),
            SAVE_GRAND_TOTAL: function(e, i) {
                return t.dset(e, i.value ? "AUTO" : void 0, "options.chart.grandTotal." + i.position, {
                    autoCreated: !0
                })
            },
            CHANGE_ZIP_MODE: function(t, e) {
                var n = e.zipMode.signName,
                    r = (n.split("`"), e.area),
                    a = e.zipMode,
                    s = t.levels,
                    o = e.pill,
                    l = ((t[r] || []).slice(), t.levelSign && t.levelSign[r]);
                return i.changeZipMode(o, a, t, r, s, l, e.index, t.dimension);
                var l, o
            },
            CREATE_LEVEL: function(e, i) {
                var n = i.name;
                t.indexOf(e.levels, function(t) {
                    return t.name === n
                });
                return t.dset(e, i, "levels." + e.levels.length, !0)
            },
            DEL_LEVEL: function(e, i) {
                var n = e.levels.slice();
                n.splice(i.index, 1);
                return t.dset(e, n, "levels", !0)
            },
            DEL_FROM_LEVEL: function(e, i) {
                var n = (e.levels.slice(), i.index),
                    r = i.pillIndex;
                return t.dsplice(e, "levels." + n + ".pathes", r, 1)
            },
            EDIT_LEVEL: function(e, n) {
                var r = n.name;
                i.uniq(n.pathes);
                var a = t.indexOf(e.levels, function(t) {
                    return t.name === r
                });
                return t.dset(e, n, "levels." + a, !0)
            },
            EDIT_LEVELS: function(t, e) {
                if(Array.isArray(e)) e.forEach(function(e) {
                    t = g.EDIT_LEVEL(t, e)
                });
                return t
            },
            SAVE_LABEL_CONFIG: function(e, i) {
                e = t.dset(e, {
                    labelConfig: i.labelConfig
                }, i.area);
                if("mark" === i.area && e.markMatrix.length) e.markMatrix = e.markMatrix.map(function(e, n) {
                    return t.dset(e, t.extend({}, i.labelConfig), "labelConfig", !0)
                });
                return e
            }.reflex(),
            SAVE_COLOR_CONFIG: function(e, i) {
                e = t.dset(e, {
                    colorConfig: i.colorConfig
                }, i.area);
                if("mark" === i.area && e.markMatrix.length) e.markMatrix = e.markMatrix.map(function(e, n) {
                    return t.dset(e, t.extend({}, i.colorConfig), "colorConfig", !0);
                });
                return e
            }.reflex(),
            SAVE_SHAPE_CONFIG: function(e, i) {
                e = t.dset(e, {
                    shapeConfig: i.shapeConfig
                }, i.area);
                if("mark" === i.area && e.markMatrix.length) e.markMatrix = e.markMatrix.map(function(e, n) {
                    return t.dset(e, t.extend({}, i.shapeConfig), "shapeConfig", !0)
                });
                return e
            }.reflex(),
            SAVE_SIZE: function(e, i) {
                var n = i.pid,
                    r = i.area;
                e = t.dset(e, i.size, n ? "options.sizeMap." + n : r + ".sizeConfig", !0);
                if("mark" === i.area && e.markMatrix.length) e.markMatrix = e.markMatrix.map(function(e, n) {
                    return t.dset(e, t.extend({}, i.size), "sizeConfig", !0)
                });
                return e
            }.reflex(),
            HELPER_MAKE_PIE: function(e, n) {
                e = i.cleanState({
                    dimension: e.dimension,
                    measure: e.measure,
                    filters: e.filters
                }, e);
                e.mark.marktype = "Pie:Disk";
                e.mark.color = t.assign({}, n.dimension);
                e.mark.angle = t.assign({}, n.measure);
                e.mark.labels = [t.assign({}, n.measure)];
                return e
            },
            ADD_TO_SHEET: function(t, e) {
                var i = e.query;
                return g["SHOWME_SET_PILL"](t, {
                    query: i
                })
            },
            SHOWME_SET_PILL: function(e, n) {
                var r = n.query,
                    a = n.options;
                console.log(r);
                if(r.markMatrix.length > 0) {
                    var s = r.column,
                        o = r.row,
                        l = r.markMatrix,
                        c = [],
                        u = [];
                    s.forEach(function(e) {
                        if("MeasurePill" === e.$type) {
                            e._cid = t.cid();
                            c.push(e)
                        }
                    });
                    var d = c.length;
                    o.forEach(function(e) {
                        if("MeasurePill" === e.$type) {
                            e._cid = t.cid();
                            u.push(e)
                        }
                    });
                    var h = u.length;
                    if(0 === h && 0 !== d) l.forEach(function(t, e) {
                        t.ccid = c[e]._cid;
                        t.rcid = null
                    });
                    else if(0 === d && 0 !== h) l.forEach(function(t, e) {
                        t.ccid = null;
                        t.rcid = u[e]._cid
                    });
                    else {
                        var f = 0;
                        u.forEach(function(t) {
                            c.forEach(function(e) {
                                if(l[f]) {
                                    l[f].ccid = e._cid;
                                    l[f].rcid = t._cid;
                                    f++
                                }
                            })
                        })
                    }
                }
                var p, _;
                if(r.measures.length > 0) {
                    var m = e.measure.slice();
                    r.measures = m.map(function(t) {
                        t = i.creator(t);
                        t.disabled = !0;
                        p = i.pid(t);
                        r.measures.forEach(function(e) {
                            _ = i.pid(e);
                            if(p == _) t.disabled = !1
                        });
                        return t
                    })
                }
                e = t.assign({}, e, r);
                console.log(e);
                if(null != a) e = t.dset(e, a, "options");
                return e
            },
            HELPER_MAKE_TABLE: function(e, n) {
                e = i.cleanState({
                    dimension: e.dimension,
                    measure: e.measure,
                    filters: e.filters
                }, e);
                g.CLEAN_CHART(e);
                var a = n.column,
                    s = n.row,
                    o = n.content;
                e.column = a.map(function(e) {
                    return t.extend({}, e)
                });
                e.row = s.map(function(e) {
                    return t.extend({}, e)
                });
                if(1 === o.length) e.mark.labels = [t.extend({}, o[0])];
                else {
                    e.column.push(t.extend({}, r.mname));
                    e.mark.labels = [t.extend({}, r.mvalue)];
                    e.measures = e.measure.map(function(e) {
                        var i = t.indexOf(o, function(i) {
                            return t.pid(e, !0) === t.pid(i, !0)
                        });
                        if(i !== -1) return t.extend({}, o[i]);
                        else return t.extend({
                            disabled: !0
                        }, e)
                    })
                }
                return e
            },
            CLEAN_CHART: function(t) {
                return i.cleanState({
                    dimension: t.dimension,
                    measure: t.measure
                }, t)
            },
            CLEAN_ERROR: function(e) {
                i.eachPill(e, function(i, n) {
                    if(1 === i.status)
                        if(/\.\d+$/.test(n)) {
                            var r = n.split("."),
                                a = parseInt(r.pop(), 10);
                            e = t.dsplice(e, r.join("."), a, 1)
                        } else e = t.dset(e, null, n, !0)
                }, {
                    ignore: /^(dimension|measure)/
                });
                return e
            },
            CHANGE_DUAL_AXIS: function(e, i) {
                var n = i.area,
                    a = i.index,
                    s = i.dualAxis,
                    o = n + (null != a ? "." + a : "") + ".dualAxis",
                    l = t.dget(e, o);
                if(l === s) return e;
                e = t.dset(e, i.dualAxis, o, !0);
                if(s && (!e.markMatrix || !e.markMatrix.some(function(t) {
                        return !!t.color
                    }) && !e.mark.color)) e = t.dset(e, t.extend({}, r.mname), "mark.color", !0);
                return e
            },
            REMOVE_MULTIPLE_AREA: function(e) {
                var n = e.markMatrix;
                if(n && n.length) {
                    var r = n.slice(),
                        a = i.diffAllMarkMatrix(e.markMatrix);
                    if(a.deepEqual) {
                        if(e.mark.isAreaMultiple) return t.dset(e, {
                            isAreaMultiple: !1
                        }, "mark");
                        return
                    }
                    t.eachMark(function(e, i) {
                        var n = a[i];
                        if(e.multiple) {
                            var s = n.diff;
                            if(!s || !s.length) return;
                            r.forEach(function(e, n) {
                                var a = e[i],
                                    o = a.slice();
                                s.forEach(function(e) {
                                    o = o.filter(function(i) {
                                        return t.pid(i) !== e
                                    })
                                });
                                if(a.length !== o.length) r[n] = t.dset(e, o, i, !0)
                            })
                        } else if(1 == n) r.forEach(function(e, n) {
                            var a = e[i];
                            if(void 0 != a) r[n] = t.dset(e, void 0, i, !0)
                        })
                    });
                    e = t.dset(e, r, "markMatrix", !0)
                }
                e = t.dset(e, {
                    isAreaMultiple: !1
                }, "mark");
                return e
            },
            SET_SHOW_INDEX: function(e, i) {
                if(e.showIndex !== i) return t.dset(e, i, "showIndex", !0)
            },
            SHOW_MARK_PANE: function(t, e) {
                var i = e;
                if(!t.markMatrix.length) return t;
                var n;
                t.markMatrix.some(function(t, e) {
                    if(t.ccid === i || t.rcid === i) {
                        n = e;
                        return !0
                    }
                })
            },
            CHANGE_ALIAS: function(e, n) {
                var r = t.pid(n.pill, !0);
                i.eachPill(e, function(i, a) {
                    if(t.pid(i, !0) === r) e = t.dset(e, {
                        alias: n.alias
                    }, a)
                }, {
                    match: /^(dimension|measure)$/
                });
                return e
            },
            CHANGE_DATATYPE_EXCEL: function(e, n) {
                var r = t.pid(n.pill, !0);
                i.eachPill(e, function(i, a) {
                    if(t.pid(i, !0) === r) e = t.dset(e, {
                        dataType: n.dataType
                    }, a)
                }, {
                    match: /^(dimension|measure)$/
                });
                return e
            },
            CHANGE_DATATYPE_MYSQL: function(e, n) {
                var r = t.pid(n.pill, !0);
                i.eachPill(e, function(i, a) {
                    if(t.pid(i, !0) === r)
                        if(n.toDateTime) {
                            if("String" === n.pill.dataType) e = t.dset(e, {
                                convert: n.convert,
                                convertArg: n.convertArg,
                                convertedType: n.convertedType
                            }, a);
                            if("Whole" === n.pill.dataType) e = t.dset(e, {
                                convert: n.convert,
                                convertedType: n.convertedType
                            }, a)
                        } else {
                            var s = t.deepClone(n.pill);
                            if(s.convertArg) delete s.convertArg;
                            if(s.convert) delete s.convert;
                            if(n.pill.dataType === n.convertedType) {
                                if(s.convertedType) delete s.convertedType
                            } else s.convertedType = n.convertedType;
                            e = t.dset(e, s, a, !0)
                        }
                }, {
                    match: /^(dimension|measure)$/
                });
                return e
            },
            DO_ERROR: function(t, e) {
                t.errorlist = e;
                return t
            },
            ADD_FIELD: function(e, i) {
                var n = {
                    $type: i.$type,
                    expr: i.expression,
                    alias: i.name,
                    dataType: i.fieldData.type,
                    granularity: i.fieldData.granularity,
                    tableId: -1,
                    role: i.role,
                    produced: "Calculated",
                    interpretation: i.interpretation,
                    fieldId: i.fieldId
                };
                if("g0" === n.granularity) {
                    if("String" === n.dataType || "DateTime" === n.dataType || "Date" === n.dataType || "Time" === n.dataType) n.aggregator = "CNTD";
                    else if("Whole" === n.dataType || "Decimal" === n.dataType) n.aggregator = "SUM"
                } else;
                var r = i.role.toLowerCase(),
                    a = e[r].slice();
                a.push(n);
                return t.dset(e, a, r)
            },
            EDIT_FIELD: function(e, n) {
                var r = n.role.toLowerCase();
                i.eachPill(e, function(i, r) {
                    if(i.fieldId === n.fieldId && i.dataType !== n.fieldData.type) {
                        var a = {
                                dataType: n.fieldData.type
                            },
                            s = /Date/.test(i.dataType),
                            o = /Date/.test(n.fieldData.type);
                        if(s && !o) a.mapFunction = void 0;
                        else if(!s && o) a.mapFunction = "YEAR";
                        e = t.dset(e, a, r)
                    }
                }, {
                    ignore: /^(dimension|measure)/
                });
                var a = e[r].slice().map(function(e, i) {
                    if(e.fieldId === n.fieldId) {
                        var r, a = n.fieldData.type;
                        if("g0" === n.fieldData.granularity) {
                            if("String" === a || "DateTime" === a || "Date" === a || "Time" === a) r = "CNTD";
                            else if("Whole" === a || "Decimal" === a) r = "SUM"
                        } else;
                        return t.assign({}, e, {
                            expr: n.expression,
                            alias: n.name,
                            dataType: n.fieldData.type,
                            granularity: n.fieldData.granularity,
                            aggregator: r,
                            interpretation: n.interpretation
                        })
                    } else return e
                });
                return t.dset(e, a, r)
            },
            ADD_GEOGRAPHY_INFO: function(e, i) {
                var n = i.role.toLowerCase(),
                    r = e[n].slice(),
                    a = t.extend({
                        tableId: -3,
                        tableName: "地理信息"
                    }, i.latitude),
                    s = t.extend({
                        tableId: -3,
                        tableName: "地理信息"
                    }, i.longitude);
                r.push(s);
                r.push(a);
                return t.dset(e, r, n)
            },
            DELETE_GEOGRAPHY_INFO: function(e, i) {
                var n = i.role.toLowerCase(),
                    r = i.longitude.fieldId,
                    a = i.latitude.fieldId,
                    s = e[n].filter(function(t, e) {
                        return t.fieldId !== r && t.fieldId !== a
                    });
                return t.dset(e, s, n)
            },
            ADD_GROUP: function(e, i) {
                var n = i,
                    r = i.role.toLowerCase(),
                    a = e[r].slice();
                a.push(n);
                return t.dset(e, a, r)
            },
            EDIT_GROUP: function(e, i) {
                var n = i.role.toLowerCase(),
                    r = e[n].slice().map(function(e, n) {
                        if(e.fieldId === i.fieldId) return t.assign({}, e, {
                            groups: i.groups,
                            alias: i.alias
                        });
                        else return e
                    });
                return t.dset(e, r, n)
            },
            ADD_GROUP_MEASURE: function(e, i) {
                return t.dset(e, i.groups, "schemaOptions.groups", !0)
            },
            ADD_DICTIONARY_MEASURE: function(e, i) {
                return t.dset(e, i.dict, "schemaOptions.dict", !0)
            },
            ADD_DICTIONARY: function(e, i) {
                var n = i,
                    r = i.role.toLowerCase(),
                    a = e[r].slice();
                a.push(n);
                return t.dset(e, a, r)
            },
            EDIT_DICTIONARY: function(e, i) {
                var n = i.role.toLowerCase(),
                    r = e[n].slice().map(function(e, n) {
                        if(e.fieldId === i.fieldId) return t.assign({}, e, {
                            dict: i.dict,
                            alias: i.alias
                        });
                        else return e
                    });
                return t.dset(e, r, n)
            },
            DELETE_FIELD: function(e, n) {
                var r = n.role.toLowerCase(),
                    a = n.fieldId,
                    s = e[r].filter(function(t, e) {
                        return t.fieldId !== a
                    });
                i.eachPill(e, function(i, n) {
                    if(i.fieldId === a) e = t.dset(e, {
                        status: 1
                    }, n)
                }, {
                    ignore: /^(dimension|measure)/
                });
                return t.dset(e, s, r)
            },
            DO_FORMAT: function(e, n) {
                i.eachPill(e, function(i, r) {
                    if(i.fieldId === n.fieldId) {
                        var a = {
                            default: {
                                format: n.format
                            }
                        };
                        e = t.dset(e, a, r)
                    }
                }, {
                    match: /measure/
                });
                return e
            },
            SET_AXIS: function(e, i) {
                var n = [i.area, i.index, "axis"];
                return t.dset(e, i.axis, n, !0)
            }.reflex(),
            SYNC_MARK: function(t, e) {
                if("markMatrix" === e.area) return i.applyDiffToMark(t);
                else return i.applyDiffToMarkMatrix(t)
            },
            TOGGLE_ALL_MEASURE_VALUE: function(e, i) {
                var n = e.measures.slice();
                n = n.map(function(e) {
                    if(e.disabled === !i) return e;
                    else return t.dset(e, !i, "disabled")
                });
                return t.dset(e, n, "measures")
            },
            TOGGLE_MEASURE_VALUE: function(e, i) {
                var n = ["measures", i];
                console.log(n);
                return t.dset(e, {
                    disabled: !t.dget(e, n).disabled
                }, n)
            },
            SET_MSORT: function(e, i) {
                if(e.msort === i) return e;
                else return t.dset(e, i, "msort")
            },
            CHANGE_MEASURE_VALUE_AGGREGATOR: function(e, i) {
                var n = e.measures;
                n = n.map(function(e) {
                    if(e.disabled) return e;
                    else return t.assign({}, e, {
                        aggregator: i
                    })
                });
                return t.dset(e, n, "measures", !0)
            },
            SYNC_MEASURES: function(e) {
                var n = e.measure,
                    r = e.measures;
                if(n.length === r.length) return e;
                var a = n.map(function(e) {
                    var n = t.indexOf(r, function(t) {
                        return t.alias === e.alias && e.produced === t.produced
                    });
                    if(n === -1) return i.creator(e, "measures");
                    else return r[n]
                });
                return t.dset(e, a, "measures", !0)
            }.norec(),
            CHECK_MVALUE: function(t) {},
            REPORT_ERROR: function(e, i) {
                t.message(i, "err");
                return e
            },
            SWITCH_AXIS: function(e) {
                return t.dset(e, {
                    row: e.column,
                    column: e.row
                })
            },
            SET_MARK_TYPE: function(e, i) {
                var n = i.area,
                    r = i.type;
                if(r === t.dget(e, n)) return e;
                else return t.dset(e, r, n)
            },
            SAVE_SORT: function(e, i) {
                return t.dset(e, i, "options.sort")
            },
            REMOVE_SORT: function(e, i) {
                if(void 0 == t.dget(e, ["options", "sort", i.pid])) return e;
                else return t.dset(e, void 0, ["options", "sort", i.pid], !0)
            },
            SAVE_FILTER: function(e, n) {
                var r = n.pill,
                    a = n.index;
                n.query.priority = r.filter && r.filter.priority;
                if("number" != typeof a && r) {
                    var s = e.filters,
                        a = i.findPill(s, r);
                    if(a === -1) {
                        var o = i.creator(r, "filters");
                        o.filter = n.query;
                        s = s.slice();
                        if(null != n.injectAt) s.splice(n.injectAt + 1, 0, o);
                        else s.push(o);
                        return t.dset(e, s, "filters", !0)
                    }
                }
                return t.dset(e, n.query, ["filters", a, "filter"], !0)
            },
            ADD_POSITION_FILTER: function(e, i) {
                if(!e.positionFilters) e.positionFilters = [];
                return t.dsplice(e, "positionFilters", e.positionFilters.length, 0, i.filter)
            },
            SET_MARK_LABEL_VISIBILITY: function(e, n) {
                var r = e;
                n.info.map(function(e, a) {
                    var s, o, l = n.info[a].dimensionId,
                        c = {};
                    c.info = n.info[a];
                    c.visibility = n.visibility;
                    if(n.reset && r.options.labelVisibility) {
                        s = i.findDimensionByid(r.options.labelVisibility, l);
                        r = t.dsplice(r, "options.labelVisibility", s, 1)
                    } else if(!r.options.labelVisibility) {
                        o = [];
                        o.push(c);
                        r = t.dset(r, o, "options.labelVisibility", !0)
                    } else {
                        s = i.findDimensionByid(r.options.labelVisibility, l);
                        if(s >= 0) r = t.dsplice(r, "options.labelVisibility", s, 1, c);
                        else r = t.dsplice(r, "options.labelVisibility", r.options.labelVisibility.length, 0, c)
                    }
                });
                return r
            },
            FOCUS_DIMENSION: function(e, n) {
                var r = n.filter,
                    a = n.dimension;
                e = g["ADD_POSITION_FILTER"](e, n);
                var s = r.dimensions.map(function(e) {
                    return t.pid(e)
                });
                i.eachPill(e, function(i, n) {
                    if(~s.indexOf(t.pid(i)))
                        if(/\.\d+$/.test(n)) {
                            var r = n.split("."),
                                a = parseInt(r.pop(), 10);
                            e = t.dsplice(e, r.join("."), a, 1)
                        } else e = t.dset(e, null, n, !0)
                }, {
                    match: /mark|row|column/
                });
                i.eachPill(e, function(i, n) {
                    if(i.tableCalc && i.tableCalc.along) e = t.dset(e, [t.extend({}, a)], n + ".tableCalc.along", !0)
                }, {
                    match: /mark|row|column|measures$/
                });
                var o = e.row.some(t.isContinuous),
                    l = e.column.some(t.isContinuous);
                if(o && l) return t.dset(e, t.extend({}, a), "mark.color", !0);
                if(o || l) {
                    var c = o ? "column" : "row";
                    return t.dsplice(e, c, 0, 0, a)
                }
                if(t.isContinuous(e.mark.color)) return t.dsplice(e, "mark.details", 0, 0, a);
                else return t.dset(e, t.extend({}, a), "mark.color", !0)
            },
            REMOVE_PILL: function(e, i) {
                var n = i.area,
                    r = i.index,
                    a = t.dget(e, n);
                if(null != r) {
                    a = a.slice();
                    a.splice(r, 1)
                } else a = void 0;
                return t.dset(e, a, n, !0)
            },
            CHANGE_FILTER_PRIORITY: function(e, i) {
                var e = (i.index, t.dset(e, {
                    priority: i.priority
                }, "filters." + i.index + ".filter"));
                return e
            },
            SET_MAP_FUNCTION: function(e, i) {
                var n = i.area,
                    a = t.dget(e, n),
                    s = {
                        mapFunction: i.mapFunction,
                        filter: void 0
                    };
                if(!i.mapFunction || r.NOT_REPAIR.indexOf(i.mapFunction) !== -1) s.imputation = void 0;
                var o = t.dset(a, s, i.index);
                return t.dset(e, o, n, !0)
            },
            EXPAND_MAP_FUNCTION: function(e, i) {
                var n = i.area,
                    r = t.dget(e, n).slice(),
                    a = r[i.index],
                    s = f(a, i.area);
                s.mapFunction = i.mapFunction;
                r.splice(i.index + 1, 0, s);
                return t.dset(e, r, n, !0)
            },
            REPLACE_STATE: function(t, e) {
                return e
            },
            SET_SUB_TOTAL: function(t, e) {
                t[e.area]
            },
            REPLACE_WHOLE_REPORT: function(e, n) {
                function a(t) {
                    if(Array.isArray(t)) t.forEach(a);
                    else {
                        if(!t) return;
                        var e = i.pid(t);
                        if(t && t.sort && !u[e]) u[e] = t.sort;
                        delete t.sort
                    }
                }
                var s = n.schema,
                    o = n.query;
                e = t.assign({
                    init: !0
                }, e, {
                    msort: o.msort,
                    dimension: s.dimensions || [],
                    measure: s.measures || [],
                    levels: s.levels || [],
                    row: o.row || [],
                    column: o.column || [],
                    mark: t.assign(e.mark, o.mark),
                    markMatrix: o.markMatrix || [],
                    positionFilters: o.positionFilters || [],
                    options: n.options || {},
                    schemaOptions: s.schemaOptions || {},
                    geoConfig: s.geoConfig || {}
                });
                t.extend(e.options, r.DEFAULT_OPTIONS);
                var l = o.measures;
                e.measures = e.measure.map(function(e) {
                    var n = i.creator(e, "measures"),
                        r = o.measures || [];
                    delete n.created;
                    var a = t.indexOf(r, function(t) {
                        return t.alias === n.alias
                    });
                    if(a == -1) n.disabled = !0;
                    else {
                        n.aggregator = r[a].aggregator;
                        n.tableCalc = r[a].tableCalc
                    }
                    return n
                });
                e.measures.sort(function(e, i) {
                    if(e.disabled) return 1;
                    if(i.disabled) return -1;
                    var n = t.indexOf(l, function(t) {
                            return e.fieldId === t.fieldId
                        }),
                        r = t.indexOf(l, function(t) {
                            return i.fieldId === t.fieldId
                        });
                    return n - r
                });
                e.measure.sort(function(e, i) {
                    return t.byAlphabet(e.alias, i.alias)
                });
                e.dimension.sort(function(e, i) {
                    return t.byAlphabet(e.alias, i.alias)
                });
                var c = o.filter;
                if(Array.isArray(c)) c.forEach(function(i, n) {
                    e.filters[n] = "PositionFilter" === i.$type ? i : t.extend({
                        $type: i.pill.role
                    }, {
                        filter: i.filter
                    }, i.pill)
                });
                var u = e.options.sort || {};
                a(e.mark.color);
                a(e.mark.angle);
                a(e.mark.size);
                a(e.mark.labels);
                a(e.mark.details);
                a(e.mark.shape);
                a(e.column);
                a(e.row);
                e.options.sort = u;
                var d = e.dimension.slice().concat(e.measure).map(function(e) {
                    return t.pid(e, !0)
                });
                i.eachPill(e, function(e, i) {
                    if(!(e.produced && "Generated" === e.produced || e.fieldId < 0 && e.fieldId != -13 && e.fieldId != -12))
                        if(d.indexOf(t.pid(e, !0)) === -1) e.status = 1
                }, {
                    ignore: /^(dimension|measure)/
                });
                return e
            }
        };
    l(["MAP_FUNCTION", "AGGREGATOR", "DATA_TYPE", "IMPUTATION", "ROLE", "INTERPRETATION", "SUB_TOTAL", "TABLE_CALC", {
        name: "HIDE_AXIS",
        reflex: !0
    }]);
    [g, m].forEach(function(t) {
        for(var e in t) {
            if(!t[e]._norec) n.rec.push(e);
            if(t[e]._reflex) n.reflex.push(e);
            if(t[e]._norun) n.norun.push(e)
        }
    });
    var v = d(c);
    c = e("report", v, n.rec, 24);
    c.raw = v;
    c.delegates = t.extend({}, g, m);
    c.applyAction = function(t, e, i) {
        if(g[e]) return {
            options: t.options,
            query: g[e](t.query, i)
        };
        if(m[e]) return {
            options: m[e](t.options, i),
            query: t.query
        };
        else return t
    };
    return c
}, 7, 402, 34, 208, 136, 207);
I$(403, "<div class=\"m-pager\" r-hide=\"total < 2\">\n  <a title='上一页' on-click={ this.nav(current-1)} class='pageprv {current==1? \"z-dis\": \"\"}'>&lt;</a>\n  {#if total - 5 > show * 2}\n  <a on-click={ this.nav(1)} class={current==1? 'z-crt': ''}>1</a>\n  {#if begin > 2}<a>...</a>{/if}\n  {#list begin..end as i}\n  <a on-click={ this.nav(i)} class={current==i? 'z-crt': ''}>{i}</a>\n  {/list}\n  {#if (end < total-1)}\n  <a>...</a>\n  {/if}\n  <a on-click={ this.nav(total)} class={current==total? 'z-crt': ''}>{total}</a>\n  {#else}\n  {#list 1..total as i}\n  <a on-click={ this.nav(i)} class={current==i? 'z-crt': ''}>{i}</a>\n  {/list}\n  {/if}\n  <a title='下一页' on-click={ this.nav(current + 1)} class='pagenxt {current==total? \"z-dis\": \"\"}'>&gt;</a>\n</div>");
I$(216, function(t) {
    var e = Regular.extend({
        name: "pager",
        template: t,
        config: function(t) {
            var e = 5,
                i = t.show = Math.floor(e / 2);
            t.current = parseInt(t.current || 1);
            t.total = parseInt(t.total || 1);
            this.$watch(["current", "total"], function(e, n) {
                t.begin = e - i;
                t.end = e + i;
                if(t.begin < 2) t.begin = 2;
                if(t.end > t.total - 1) t.end = t.total - 1;
                if(e - t.begin <= 1) t.end = t.end + i + t.begin - e;
                if(t.end - e <= 1) t.begin = t.begin - i - e + t.end
            })
        },
        nav: function(t) {
            var e = this.data;
            if("page" == t) {
                t = parseInt(this.$refs["goPage"].value);
                if(t > e.total) {
                    t = e.total;
                    this.$refs["goPage"].value = t
                }
            }
            if(!(t < 1))
                if(!(t > e.total))
                    if(t !== e.current) {
                        e.current = t;
                        this.$emit("nav", t);
                        return !1
                    }
        }
    });
    return e
}, 403);
I$(404, '<overlay show={show} ref=overlay on-show={this.handleShow($event)}  position={position} target={target} animateIn=\'fadeIn\' animateOut=\'fadeOut\'  >\n  <div class="u-filter u-filter-sel m-omenu" on-clickouter={this.destroy()} >\n  <ul class="u-list z-pos-{placement}" >\n    {#list menus as menu}\n      {#if @(menu.split)} <li class=\'u-split\'></li> {/if}\n      <li class=\'icn{menu.icn? "-" + menu.icn : ""}\'  on-click={this.clickmenu( menu)} >{#inc menu.text}\n      {#if menu.children} <span class="u-icn u-icn-rarr"></span> \n        <ul class=\'u-list-1 u-list\'>\n          {#list menu.children as sub}\n          <li class=\'icn{sub.icn? "-" + sub.icn : ""}\'  on-click={this.clickmenu( sub, menu)} >{#inc sub.text} </li>\n          {/list}\n        </ul>\n      {/if}\n      </li>\n    {/list}\n  </ul>\n  </div>\n</overlay>');
I$(400, function(t) {
    var e = Regular.dom,
        t = Regular.util,
        i = t.extend({}, e);
    i.offsets = function(t) {
        var e = window,
            n = t.ownDocument || document,
            r = n.documentElement,
            a = n.body,
            s = t.getBoundingClientRect(),
            o = r.clientTop || a.clientTop || 0,
            l = r.clientLeft || a.clientLeft || 0,
            c = e.pageYOffset || r.scrollTop,
            u = e.pageXOffset || r.scrollLeft;
        "fixed" === i.getComputedStyle(t, "position");
        return {
            top: parseInt(s.top, 10) + c - o,
            left: parseInt(s.left, 10) + u - l
        }
    };
    i.scrolls = function(t) {
        t = t.parentNode;
        for(var e = {
            left: 0,
            top: 0
        }; t && !i.isBody(t);) {
            e.left += t.scrollLeft;
            e.top += t.scrollTop;
            t = t.parentNode
        }
        return e
    };
    i.isOffsetParent = function(t) {
        i.getComputedStyle(t, "position")
    };
    i.size = function(t) {
        if(i.isBody(t)) {
            var e = getCompatDoc(t);
            return {
                width: e.clientWidth,
                height: e.clientHeight
            }
        }
        return {
            width: t.offsetWidth,
            height: t.offsetHeight
        }
    };
    i.position = function(t, e) {
        var n = i.scrolls(t),
            r = i.offsets(t),
            a = {
                left: r.left + n.left,
                top: r.top + n.top
            };
        if(e) {
            var s = i.position(e);
            a.left -= s.left + parseInt(i.getComputedStyle(e, "border-left-width"), 10);
            a.top -= s.top + parseInt(i.getComputedStyle(e, "border-top-width"), 10)
        }
        if(i.isBody(t) && i.isOffset(t)) {
            a.left -= parseInt(i.getComputedStyle(t, "border-left-width"), 10);
            a.top -= parseInt(i.getComputedStyle(t, "border-top-width"), 10)
        }
        return a
    };
    i.isOffset = function(t) {
        return "static" === i.getComputedStyle(t, "position")
    };
    i.getComputedStyle = function(t, e) {
        if("undefined" != typeof window.getComputedStyle) return getComputedStyle(t, null).getPropertyValue(e);
        else return t.currentStyle[e]
    };
    i.isBody = function(t) {
        return /^(?:body|html)$/i.test(t.tagName)
    };
    i.getCompatDoc = function(t) {
        var e = t ? t.ownDocument : document;
        return "CSS1Compat" === e.compatMode ? e.documentElement : e.body
    };
    i.contains = function(t, e) {
        if(!e) e = document.body;
        if(e.contains) return e.contains(t);
        if(e.compareDocumentPosition) return e === t || !!(16 & e.compareDocumentPosition(t));
        for(; t = t.parentNode;)
            if(t === e) return !0;
        return !1
    };
    return i
}, 7);
I$(203, function(t, e, i) {
    var n = '<div ref=overlay on-clickouter={this._clickouter()} class="m-overlay {clazz} {placement}" r-anim={ animation? animation: "on:enter; class:" +animateIn+ " animated; on:leave; class: " + animateOut+" animated"} >{#include this.$body}</div>',
        r = Regular.extend({
            name: "overlay",
            template: n,
            data: {
                animateIn: "flipInX",
                animateOut: "flipOutX"
            },
            config: function(e) {
                t.extend(e, {
                    container: document.body,
                    placement: "top",
                    gap: 10
                });
                e.gap = parseInt(e.gap, 10);
                if("auto" === e.placement) {
                    e.placement = "";
                    e.auto = !0
                }
                this.$watch("show", function(t) {
                    if(t) {
                        this.$inject(e.container, "bottom");
                        this.placement()
                    } else this.$inject(!1)
                })
            },
            _clickouter: function() {
                if(this.data.autoClose) return this.close()
            },
            close: function() {
                this.$emit("close");
                this.$update("show", !1)
            },
            init: function() {
                var t = (this.data, this.$refs.overlay);
                t.style.position = "absolute";
                t.style.top = "-9999px";
                t.style.left = "-9999px"
            },
            toggle: function(t) {
                this.$update("show", null == t ? !this.data.show : t)
            },
            placement: function() {
                var t, i, n, r, a = this.$refs.overlay,
                    s = this.data,
                    o = this,
                    l = s.placement,
                    c = s.position;
                if(!s.position) {
                    r = e.size(a);
                    if(!s.target) throw new Error("need target for placement");
                    c = e.position(s.target, s.container);
                    t = s.gap;
                    var u = e.size(s.target);
                    switch(l) {
                        case "top":
                            i = c.top - r.height - t;
                            n = c.left - (r.width - u.width) / 2;
                            break;
                        case "left":
                            i = c.top - (r.height - u.height) / 2;
                            n = c.left - r.width - t;
                            break;
                        case "right":
                            i = c.top - (r.height - u.height) / 2;
                            n = c.left + u.width + t;
                            break;
                        case "bottom":
                            i = c.top + u.height + t;
                            n = c.left - (r.width - u.width) / 2
                    }
                    a.style.position = "absolute";
                    a.style.top = i + "px";
                    a.style.left = n + "px"
                } else {
                    i = c.top;
                    n = c.left;
                    setTimeout(function() {
                        r = e.size(a);
                        var t = s.container.scrollTop + s.container.clientHeight;
                        if(i + r.height > t) i = c.top - r.height;
                        var l = s.container.scrollLeft + s.container.clientWidth;
                        if(n + r.width > l) n = c.left - r.width;
                        a.style.position = "absolute";
                        a.style.top = i + "px";
                        a.style.left = n + "px";
                        o.$emit("show", {
                            corner: {
                                right: n + r.width,
                                bottom: i + r.height
                            },
                            container: {
                                left: l,
                                top: t
                            }
                        })
                    }, 0)
                }
                this.$emit("placement", l)
            }
        });
    return r
}, 7, 400, 171);
I$(217, function(t, e, i, n) {
    var r = 160,
        a = Regular.extend({
            name: "menu",
            template: t,
            config: function(t) {},
            init: function() {
                setTimeout(this.show.bind(this), 0)
            },
            handleShow: function(t) {
                var e = ["r", "b"];
                if(t.container.left - t.corner.right < r) e[0] = "l";
                if(t.container.top - t.corner.bottom < r) e[1] = "t";
                if(this.hasSubMenu()) this.data.placement = e.join("")
            },
            show: function() {
                this.$update("show", !0)
            },
            hasSubMenu: function() {
                return(this.data.menus || []).some(function(t) {
                    return t.children && t.children.length
                })
            },
            clickmenu: function(t, e) {
                var i = {
                    menu: t,
                    parent: e
                };
                if(t.clicked) t.clicked(i);
                this.$emit("menu", i);
                this.destroy()
            }
        });
    return a
}, 404, 7, 34, 136, 203);
I$(405, "<div class='mm-menu' >\n  <ul>\n  {#list menus as menu by menu_index}\n      <!-- {#if @(menu.split)} <li class='u-split'></li> {/if} -->\n      <li class='icn{menu.icn? \"-\" + menu.icn : \"\"}'  on-click={this.clickmenu( menu)} >{#inc menu.text}</li>\n  {/list}\n  </ul>\n</div>");
I$(218, function(t, e, i, n, r) {
    var a = r.extend({
        name: "menu",
        data: {
            className: "m-window-mobile",
            autoRecycleRequest: !1,
            title: "下钻到"
        },
        $body: t,
        init: function() {
            this.supr();
            this.$on("clickouter", this.destroy.bind(this));
            setTimeout(this.show.bind(this), 0)
        },
        clickmenu: function(t, e) {
            var i = {
                menu: t,
                parent: e
            };
            if(t.clicked) t.clicked(i);
            this.$emit("menu", i);
            this.destroy()
        }
    });
    return a
}, 405, 7, 34, 136, 185);
I$(571, function() {
    function t(t) {
        Y = t
    }

    function e(t) {
        var e = {},
            i = tt(t);
        for(var n in t._properties)
            if(t._properties.hasOwnProperty(n)) e[n] = i + n;
        t._defaultNameMap = e
    }

    function i(t, i, n) {
        st(t, n);
        n = ot(n);
        for(var r = {}, a = [], s = [], o = {}, l = rt(ut, {
            _methods: r,
            _lMethods: o,
            _directUsedTraits: t,
            _properties: n
        }), c = 0; c < t.length; ++c) {
            var u = t[c],
                d = u._methods;
            J(d, function(t) {
                if(void 0 !== r[t] && r[t] !== d[t]) K(!1, "`" + t + "' method conflicts!!!");
                else r[t] = d[t]
            });
            a = a.concat(u._usedTraits);
            a.push(u);
            s.push(t[c]._namesMap)
        }
        l._usedTraits = a;
        e(l);
        var h = lt(l, n);
        s.push(h);
        l._namesMap = ct(s);
        J(i, function(t) {
            var e = i[t];
            K("function" == typeof e, "expect function");
            if(at(t)) o[t] = {
                _ownerTrait: l,
                _func: e
            };
            else r[t] = {
                _ownerTrait: l,
                _func: e
            }
        });
        return l
    }

    function n(t) {
        var e = {},
            i = t._aggregateTrait,
            n = i._properties;
        for(var r in n)
            if(n.hasOwnProperty(r)) {
                var a, s = n[r];
                if(s && s.isGrant) a = V([s, i.grant(r)]);
                else a = i.grant(r)
            } else;
        return e
    }

    function r(t) {
        var e = {},
            i = t.proto();
        if(null != i && i.isEntity) nt(e, i._properties);
        var n = t._aggregateTrait,
            r = n._properties;
        for(var a in r)
            if(r.hasOwnProperty(a)) e[a] = t;
        return e
    }

    function a(t, e) {
        return function() {
            var i = this._t;
            if(i) var n = i._o;
            this._t = this._ts[e];
            var r = this._t._o;
            this._t._o = this;
            var a = t.call(this);
            this._t._o = r;
            this._t = i;
            if(i) i._o = n;
            return a
        }
    }

    function s(t, e) {
        return function(i) {
            var n = this._t;
            if(n) var r = n._o;
            this._t = this._ts[e];
            var a = this._t._o;
            this._t._o = this;
            var s = t.call(this, i);
            this._t._o = a;
            this._t = n;
            if(n) n._o = r;
            return s
        }
    }

    function o(t, e) {
        return function(i, n) {
            var r = this._t;
            if(r) var a = r._o;
            this._t = this._ts[e];
            var s = this._t._o;
            this._t._o = this;
            var o = t.call(this, i, n);
            this._t._o = s;
            this._t = r;
            if(r) r._o = a;
            return o
        }
    }

    function l(t, e) {
        return function(i, n, r) {
            var a = this._t;
            if(a) var s = a._o;
            this._t = this._ts[e];
            var o = this._t._o;
            this._t._o = this;
            var l = t.call(this, i, n, r);
            this._t._o = o;
            this._t = a;
            if(a) a._o = s;
            return l
        }
    }

    function c(t, e) {
        return function(i, n, r, a) {
            var s = this._t;
            if(s) var o = s._o;
            this._t = this._ts[e];
            var l = this._t._o;
            this._t._o = this;
            var c = t.call(this, i, n, r, a);
            this._t._o = l;
            this._t = s;
            if(s) s._o = o;
            return c
        }
    }

    function u(t, e) {
        return function(i, n, r, a, s) {
            var o = this._t;
            if(o) var l = o._o;
            this._t = this._ts[e];
            var c = this._t._o;
            this._t._o = this;
            var u = t.call(this, i, n, r, a, s);
            this._t._o = c;
            this._t = o;
            if(o) o._o = l;
            return u
        }
    }

    function d(t, e) {
        return function(i, n, r, a, s, o) {
            var l = this._t;
            if(l) var c = l._o;
            this._t = this._ts[e];
            var u = this._t._o;
            this._t._o = this;
            var d = t.call(this, i, n, r, a, s, o);
            this._t._o = u;
            this._t = l;
            if(l) l._o = c;
            return d
        }
    }

    function h(t, e) {
        return function(i, n, r, a, s, o, l) {
            var c = this._t;
            if(c) var u = c._o;
            this._t = this._ts[e];
            var d = this._t._o;
            this._t._o = this;
            var h = t.call(this, i, n, r, a, s, o, l);
            this._t._o = d;
            this._t = c;
            if(c) c._o = u;
            return h
        }
    }

    function f(t, e) {
        return function(i, n, r, a, s, o, l, c) {
            var u = this._t;
            if(u) var d = u._o;
            this._t = this._ts[e];
            var h = this._t._o;
            this._t._o = this;
            var f = t.call(this, i, n, r, a, s, o, l, c);
            this._t._o = h;
            this._t = u;
            if(u) u._o = d;
            return f
        }
    }

    function p(t, e, i) {
        return function() {
            return t.call(this._o)
        }
    }

    function _(t, e, i) {
        return function(e) {
            return t.call(this._o, e)
        }
    }

    function m(t, e, i) {
        return function(e, i) {
            return t.call(this._o, e, i)
        }
    }

    function g(t, e, i) {
        return function(e, i, n) {
            return t.call(this._o, e, i, n)
        }
    }

    function v(t, e, i) {
        return function(e, i, n, r) {
            return t.call(this._o, e, i, n, r)
        }
    }

    function y(t, e, i) {
        return function(e, i, n, r, a) {
            return t.call(this._o, e, i, n, r, a)
        }
    }

    function b(t, e, i) {
        return function(e, i, n, r, a, s) {
            return t.call(this._o, e, i, n, r, a, s)
        }
    }

    function x(t, e, i) {
        return function(e, i, n, r, a, s, o) {
            return t.call(this._o, e, i, n, r, a, s, o)
        }
    }

    function $(t, e, i) {
        return function(e, i, n, r, a, s, o, l) {
            return t.call(this._o, e, i, n, r, a, s, o, l)
        }
    }

    function w(t, e, i, n) {
        var r = t._globalNameMap,
            a = {
                _ownerTrait: e
            };
        if(null == i[tt(e)]) a._ownerEntity = n[tt(e)]._ownerEntity;
        else a._ownerEntity = t;
        var s = e._defaultNameMap;
        J(e._properties, function(t) {
            var e = "set" + t,
                i = r[s[t]];
            a[t] = function() {
                return this._o._propertiesStore[i]
            };
            a[e] = function(t) {
                this._o._propertiesStore[i] = t;
                return this._o
            }
        });
        var o = e._lMethods;
        for(var l in o)
            if(o.hasOwnProperty(l)) {
                K(!a.hasOwnProperty(l), "local properties's getter setter conflict local function");
                a[l] = ft[o[l]._func.length](o[l]._func, tt(e), t)
            } else;
        return a
    }

    function k(t, e, i) {
        var n = {},
            r = t._usedTraits;
        for(var a in r)
            if(r.hasOwnProperty(a)) {
                var s = r[a];
                n[tt(s)] = w(t, s, i, e._ts)
            }
        return n
    }

    function S(t, e, i) {
        return function() {
            var i = this._o,
                n = i._t,
                r = i._t._o;
            i._t = i._ts[e];
            i._t._o = i;
            var a = t.call(i);
            i._t = n;
            n._o = r;
            return a
        }
    }

    function C(t, e, i) {
        return function(i) {
            var n = this._o,
                r = n._t,
                a = n._t._o;
            n._t = n._ts[e];
            n._t._o = n;
            var s = t.call(n, i);
            n._t = r;
            r._o = a;
            return s
        }
    }

    function T(t, e, i) {
        return function(i, n) {
            var r = this._o,
                a = r._t,
                s = r._t._o;
            r._t = r._ts[e];
            r._t._o = r;
            var o = t.call(r, i, n);
            r._t = a;
            a._o = s;
            return o
        }
    }

    function E(t, e, i) {
        return function(i, n, r) {
            var a = this._o,
                s = a._t,
                o = a._t._o;
            a._t = a._ts[e];
            a._t._o = a;
            var l = t.call(a, i, n, r);
            a._t = s;
            s._o = o;
            return l
        }
    }

    function I(t, e, i) {
        return function(i, n, r, a) {
            var s = this._o,
                o = s._t,
                l = s._t._o;
            s._t = s._ts[e];
            s._t._o = s;
            var c = t.call(s, i, n, r, a);
            s._t = o;
            o._o = l;
            return c
        }
    }

    function A(t, e, i) {
        return function(i, n, r, a, s) {
            var o = this._o,
                l = o._t,
                c = o._t._o;
            o._t = o._ts[e];
            o._t._o = o;
            var u = t.call(o, i, n, r, a, s);
            o._t = l;
            l._o = c;
            return u
        }
    }

    function M(t, e, i) {
        return function(i, n, r, a, s, o) {
            var l = this._o,
                c = l._t,
                u = l._t._o;
            l._t = l._ts[e];
            l._t._o = l;
            var d = t.call(l, i, n, r, a, s, o);
            l._t = c;
            c._o = u;
            return d
        }
    }

    function D(t, e, i) {
        return function(i, n, r, a, s, o, l) {
            var c = this._o,
                u = c._t,
                d = c._t._o;
            c._t = c._ts[e];
            c._t._o = c;
            var h = t.call(c, i, n, r, a, s, o, l);
            c._t = u;
            u._o = d;
            return h
        }
    }

    function P(t, e, i) {
        return function(i, n, r, a, s, o, l, c) {
            var u = this._o,
                d = u._t,
                h = u._t._o;
            u._t = u._ts[e];
            u._t._o = u;
            var f = t.call(u, i, n, r, a, s, o, l, c);
            u._t = d;
            d._o = h;
            return f
        }
    }

    function N(t, e) {
        var i = e._lMethods,
            n = {
                _ownerTrait: e
            };
        for(var r in i)
            if(i.hasOwnProperty(r)) n[r] = pt[i[r]._func.length](i[r]._func, tt(e), t);
        return n
    }

    function L(t) {
        var e = {};
        for(var i in t._usedTraits)
            if(t._usedTraits.hasOwnProperty(i)) {
                var n = t._usedTraits[i];
                e[tt(n)] = N(t, n)
            }
        return e
    }

    function R(t, e) {
        var i, n = t._namesMap,
            r = e._globalNameMap,
            a = {},
            s = e._maxGlobalNameNum;
        for(var o in n) {
            var l = n[o];
            for(var c in l)
                if(l.hasOwnProperty(c)) {
                    var u = l[c];
                    if(r.hasOwnProperty(u)) {
                        if(void 0 === i) {
                            i = r[u];
                            continue
                        }
                        if(i != r[u]) {
                            i = s++;
                            break
                        }
                    } else {
                        i = s++;
                        break
                    }
                }
            for(var c in l)
                if(l.hasOwnProperty(c)) a[l[c]] = i;
            i = void 0
        }
        t._globalNameMap = a;
        t._maxGlobalNameNum = s
    }

    function j(t, e) {
        var i, n, r, a = t._globalNameMap,
            s = t._properties;
        J(s, function(e) {
            i = s[e];
            r = i._specialProperties;
            n = i._aggregateTrait._defaultNameMap[e];
            var o, l = a[n],
                c = "set" + e;
            if(r.hasOwnProperty(e)) {
                o = r[e];
                if(o == wt) {
                    if(!t[e]) t[e] = function() {
                        throw _t + e
                    };
                    if(!t[c]) t[c] = function() {
                        throw mt + e
                    }
                } else if(o == $t) {
                    K(!t.hasOwnProperty(e), "READONLY property: " + e + " getter conflict with methods");
                    t[e] = function() {
                        return this._propertiesStore[l]
                    };
                    if(t[c]) t[c] = function() {
                        throw gt + e
                    }
                } else if(o == kt) {
                    K(!t.hasOwnProperty(e), "CUSTOM_SETTER property: " + e + " getter conflict with methods");
                    t[e] = function() {
                        return this._propertiesStore[l]
                    };
                    if(!t[c]) t[c] = function() {
                        throw vt + e
                    }
                } else;
            } else {
                K(!t.hasOwnProperty(e), "public property: " + e + " getter conflict with methods");
                K(!t.hasOwnProperty(c), "public property: " + e + " setter conflict with methods");
                t[e] = function() {
                    return this._propertiesStore[l]
                };
                t[c] = function(t) {
                    this._propertiesStore[l] = t;
                    return this
                }
            }
        })
    }

    function O(t, e, i) {
        var n = {};
        for(var r in t)
            if(t.hasOwnProperty(r)) n[r] = t[r];
        for(var a = e._usedTraits, s = 0; s < a.length; ++s) {
            var o = a[s];
            n[tt(o)] = o;
            i[tt(o)] = o
        }
        n[tt(e)] = e;
        i[tt(e)] = e;
        return n
    }

    function F(t) {
        var e = [],
            i = {},
            n = 0;
        for(var r in t)
            if(t.hasOwnProperty(r)) {
                var a = t[r];
                if("string" == typeof a) e[n++] = a;
                else if(a instanceof Array)
                    if("string" == typeof a[0]) e[n++] = a;
                    else if(a[0].type) {
                        e[n++] = [a[0].name, a[1]];
                        i[a[0].name] = a[0].type
                    } else K(!1, "bad property" + a);
                else if(a.type) {
                    e[n++] = a.name;
                    i[a.name] = a.type
                } else K(!1, "bad property" + a)
            }
        return {
            allPropsAry: e,
            specialProperties: i
        }
    }

    function z(t, e, a, s) {
        var o = t.proto();
        if(null != s || null != e || null != a) {
            if(null == s) s = [];
            if(null == e) e = {};
            if(null == a) a = [];
            t._propertiesStore = rt(o._propertiesStore);
            var l = F(a);
            t._specialProperties = l.specialProperties;
            var c = i(s, e, l.allPropsAry),
                u = c._methods;
            for(var d in u)
                if(u.hasOwnProperty(d)) {
                    var h = u[d],
                        f = ht[h._func.length](h._func, tt(h._ownerTrait));
                    f._ownerEntity = t;
                    t[d] = f
                } else;
            t._aggregateTrait = c;
            var p = {};
            t._usedTraits = O(o._usedTraits, c, p);
            var _ = n(t),
                m = lt(c, _);
            t._properties = r(t);
            t._namesMap = ct([o._namesMap, c._namesMap, m]);
            R(t, o);
            t._ts = k(t, o, p);
            t._subTraits = L(t, s);
            j(t, o);
            return t
        } else t._propertiesStore = rt(o._propertiesStore)
    }

    function B(t, e) {
        if(null == t._globalNameLocalpropInfo || !t.__proto__.hasOwnProperty("_globalNameLocalpropInfo")) {
            var i = {};
            J(t._usedTraits, function(e) {
                var n = t._usedTraits[e];
                J(n._properties, function(t) {
                    i[n._defaultNameMap[t]] = {
                        traitId: e,
                        propName: t
                    }
                })
            });
            var n = t._globalNameMap,
                r = t._namesMap,
                a = {};
            J(r, function(t) {
                var e, s, o = r[t];
                J(o, function(t) {
                    if(null == e) {
                        s = n[t];
                        e = [];
                        a[s] = e
                    }
                    e.push(i[t])
                })
            });
            t.__proto__._globalNameLocalpropInfo = a
        }
    }

    function H(t, e, i, n, r) {
        if(null == t._hookInfos) t._hookInfos = {
            a: {},
            b: {}
        };
        var a = t._hookInfos[e],
            s = a[r];
        if(null == s) {
            s = {
                defaultMappedName: n,
                cb: i
            };
            a[r] = s
        } else if(s instanceof Array) {
            if(!Q(s, function(t) {
                    if(t.defaultMappedName === n && t.cb === i) {
                        t.cb = i;
                        return !0
                    }
                    return !1
                })) s.push({
                defaultMappedName: n,
                cb: i
            })
        } else if(s.defaultMappedName === n && s.cb === i) s.cb = i;
        else a[r] = [s, {
                defaultMappedName: n,
                cb: i
            }];
        return s
    }

    function W(t, e) {
        var i, n, r = t._hookInfos.b[e],
            a = t._hookInfos.a[e],
            s = r instanceof Array,
            o = a instanceof Array;
        if(!s && !o)
            if(void 0 == r && void 0 != a) {
                i = function(i) {
                    var n = this._o._propertiesStore[e];
                    this._o._propertiesStore[e] = i;
                    a.cb(t, n, i);
                    return i
                };
                n = function(i) {
                    var n = this._propertiesStore[e];
                    this._propertiesStore[e] = i;
                    a.cb(t, n, i);
                    return i
                }
            } else if(void 0 != r && void 0 == a) {
                i = function(i) {
                    var n = this._o._propertiesStore[e];
                    if(!r.cb(t, n, i)) this._o._propertiesStore[e] = i;
                    else i = n;
                    return i
                };
                n = function(i) {
                    var n = this._propertiesStore[e];
                    if(!r.cb(t, n, i)) this._propertiesStore[e] = i;
                    else i = n;
                    return i
                }
            } else if(void 0 != r && void 0 != a) {
                i = function(i) {
                    var n = this._o._propertiesStore[e];
                    if(!r.cb(t, n, i)) this._o._propertiesStore[e] = i;
                    else i = n;
                    a.cb(t, n, i);
                    return i
                };
                n = function(i) {
                    var n = this._propertiesStore[e];
                    if(!r.cb(t, n, i)) this._propertiesStore[e] = i;
                    else i = n;
                    a.cb(t, n, i);
                    return i
                }
            } else {
                i = function(t) {
                    return this._o._propertiesStore[e] = t
                };
                n = function(t) {
                    return this._propertiesStore[e] = t
                }
            } else if(!s && o)
            if(void 0 == r) {
                i = function(i) {
                    var n = this._o._propertiesStore[e];
                    this._o._propertiesStore[e] = i;
                    Z(a, function(e) {
                        e.cb(t, n, i)
                    });
                    return i
                };
                n = function(i) {
                    var n = this._propertiesStore[e];
                    this._propertiesStore[e] = i;
                    Z(a, function(e) {
                        e.cb(t, n, i)
                    });
                    return i
                }
            } else {
                i = function(i) {
                    var n = this._o._propertiesStore[e];
                    if(!r(t, n, i)) this._o._propertiesStore[e] = i;
                    else i = n;
                    Z(a, function(e) {
                        e.cb(t, n, i)
                    });
                    return i
                };
                n = function(i) {
                    var n = this._propertiesStore[e];
                    if(!r(t, n, i)) this._propertiesStore[e] = i;
                    else i = n;
                    Z(a, function(e) {
                        e.cb(t, n, i)
                    });
                    return i
                }
            }
        else if(s && !o)
            if(void 0 == a) {
                i = function(i) {
                    var n = this._o._propertiesStore[e],
                        a = !1;
                    Z(r, function(e) {
                        a |= e.cb(t, n, i)
                    });
                    if(!a) this._o._propertiesStore[e] = i;
                    else i = n;
                    return i
                };
                n = function(i) {
                    var n = this._propertiesStore[e],
                        a = !1;
                    Z(r, function(e) {
                        a |= e.cb(t, n, i)
                    });
                    if(!a) this._propertiesStore[e] = i;
                    else i = n;
                    return i
                }
            } else {
                i = function(i) {
                    var n = this._o._propertiesStore[e],
                        s = !1;
                    Z(r, function(e) {
                        s |= e.cb(t, n, i)
                    });
                    if(!s) this._o._propertiesStore[e] = i;
                    else i = n;
                    a.cb(t, n, i);
                    return i
                };
                n = function(i) {
                    var n = this._propertiesStore[e],
                        s = !1;
                    Z(r, function(e) {
                        s |= e.cb(t, n, i)
                    });
                    if(!s) this._propertiesStore[e] = i;
                    else i = n;
                    a.cb(t, n, i);
                    return i
                }
            }
        else {
            i = function(i) {
                var n = this._o._propertiesStore[e],
                    s = !1;
                Z(r, function(e) {
                    s |= e.cb(t, n, i)
                });
                if(!s) this._o._propertiesStore[e] = i;
                else i = n;
                Z(a, function(e) {
                    e.cb(t, n, i)
                });
                return i
            };
            n = function(i) {
                var n = this._propertiesStore[e],
                    s = !1;
                Z(r, function(e) {
                    s |= e.cb(t, n, i)
                });
                if(!s) this._propertiesStore[e] = i;
                else i = n;
                Z(a, function(e) {
                    e.cb(t, n, i)
                });
                return i
            }
        }
        return {
            tSetter: i,
            eSetter: n
        }
    }

    function q(t, e) {
        var i, n, r, a, s = t._ts,
            o = W(t, e),
            l = t._globalNameLocalpropInfo[e];
        Z(l, function(e) {
            n = e.propName;
            r = "set" + n;
            a = t._properties[n];
            i = s[e.traitId];
            i[r] = o.tSetter;
            if(a && a._aggregateTrait == t._usedTraits[e.traitId] && null == a._specialProperties[n]) t[r] = o.eSetter
        })
    }

    function G(t) {
        if(t.__ownTs !== !0) {
            var e = {};
            nt(e, t._ts);
            for(var i in e) {
                var n = {};
                nt(n, e[i]);
                e[i] = n
            }
            t._ts = e;
            t.__ownTs = !0
        }
    }

    function U(t, e) {
        var i;
        K("number" == typeof e, "getDirectedUsedTrait bad index type");
        if(null == t._t) i = t._aggregateTrait;
        else i = t._t._ownerTrait;
        return i._directUsedTraits[e]
    }

    function V(t) {
        for(var e = new yt, i = 0; i < t.length; ++i) e.merge(t[i]);
        return e
    }
    var Y, X = Array.prototype.slice,
        K = function(t, e) {
            if(t) return !0;
            else {
                var i = void 0 === e ? "assert !!!" : e;
                console.log("exception throwed:  " + i);
                throw i
            }
        },
        J = function(t, e) {
            for(var i in t)
                if(t.hasOwnProperty(i)) e(i, t)
        },
        Z = function() {
            if(Array.prototype.forEach) return function(t, e) {
                t.forEach(e)
            };
            else return function(t, e) {
                for(var i = 0, n = t.length; i < n; i++) e(t[i], i)
            }
        }(),
        Q = function() {
            if(Array.prototype.some) return function(t, e) {
                return t.some(e)
            };
            else return function(t, e) {
                for(var i = 0; i < t.length;) {
                    if(e(t[i], i, t)) return !0;
                    i++
                }
                return !1
            }
        }(),
        tt = function() {
            var t = 0;
            return function(e) {
                if(void 0 === e.__identifier) return e.__identifier = t++;
                else return e.__identifier
            }
        }(),
        et = {},
        it = function() {
            if(Object.create && et.__proto__) return Object.create;
            else return function(t) {
                var e = function() {};
                e.prototype = t;
                var i = new e;
                i.__proto__ = t;
                return i
            }
        }(),
        nt = function(t, e) {
            for(var i in e)
                if(e.hasOwnProperty(i)) t[i] = e[i];
            return t
        },
        rt = function(t, e) {
            var i = it(t);
            if(e) nt(i, e);
            return i
        },
        at = function(t) {
            if(void 0 != t[0]) return "_" == t[0] && "_" == t[1];
            else return 0 == t.indexOf("__")
        },
        st = function(t, e) {
            var i = {},
                n = [];
            if(void 0 !== e) {
                K(e instanceof Array, "bad properties type!!!!");
                for(var r = 0; r < e.length; ++r) {
                    var a = e[r];
                    if(a instanceof Array) {
                        K(2 === a.length, "bad properties array value length");
                        K("string" == typeof a[0], "bad properties array first value");
                        K(a[1].isGrant, "bad properties array second value");
                        for(var s in a[1].grantTraitIdentifiers)
                            if(a[1].grantTraitIdentifiers.hasOwnProperty(s)) n.push(s)
                    } else if("string" != typeof a) K(!1, "bad properties !!!!!!!")
                }
                for(var o, r = 0; r < t.length; ++r) {
                    o = t[r];
                    i[tt(o)] = tt(o)
                }
                K(!Q(n, function(t) {
                    if(void 0 === i[t]) return !0
                }), "argument is not valid properties!!! ")
            }
        },
        ot = function(t) {
            var e = {};
            if(void 0 != t)
                for(var i in t)
                    if(t.hasOwnProperty(i)) {
                        var n = t[i];
                        if(n instanceof Array) e[n[0]] = n[1];
                        else if("string" == typeof n) e[n] = void 0
                    }
            return e
        },
        lt = function(t, e) {
            var i = [];
            for(var n in e)
                if(e.hasOwnProperty(n)) {
                    var r = t._defaultNameMap[n],
                        a = e[n],
                        s = {};
                    s[r] = r;
                    if(void 0 != a) {
                        K(a.isGrant, "bad properties value!!!");
                        for(var o in a.grantNames)
                            if(a.grantNames.hasOwnProperty(o)) s[o] = o;
                            else;
                    }
                    i.push(s)
                } else;
            return i
        },
        ct = function(t) {
            for(var e, i = {}, n = 0, r = t.length, a = {}, s = 0; s < r; ++s) {
                e = t[s];
                for(var o in e) {
                    var l = e[o],
                        c = {
                            id: n,
                            gId: n
                        };
                    for(var u in l)
                        if(l.hasOwnProperty(u))
                            if(null != i[u]) {
                                var d = a[i[u].id];
                                for(var h in d)
                                    if(d.hasOwnProperty(h)) d[h].id = n
                            } else {
                                i[u] = c;
                                if(null == a[n]) a[n] = {};
                                a[n][i[u].gId] = i[u]
                            }
                        else;
                    ++n
                }
            }
            var f = {};
            for(var u in i)
                if(i.hasOwnProperty(u)) {
                    if(null == f[i[u].id]) f[i[u].id] = {};
                    f[i[u].id][u] = u
                } else;
            return f
        },
        ut = {},
        dt = function() {
            var t = rt(ut, {
                _methods: {},
                _lMethods: {},
                _usedTraits: [],
                _directUsedTraits: [],
                _properties: {},
                _defaultNameMap: {},
                _namesMap: [],
                forbidden: {
                    _ownerTrait: t
                }
            });
            ut.isTrait = function() {
                return !0
            };
            ut.extend = function(t, i) {
                st([this], i);
                i = ot(i);
                var n = nt({}, this._methods),
                    r = {},
                    a = rt(ut, {
                        _methods: n,
                        _lMethods: r,
                        _properties: i
                    });
                a._usedTraits = this._usedTraits.concat([this]);
                a._directUsedTraits = [this];
                e(a);
                var s = lt(a, i);
                a._namesMap = ct([this._namesMap, s]);
                for(var o in t) {
                    var l = t[o];
                    K("function" == typeof l, "expect function");
                    if(at(o)) r[o] = {
                        _ownerTrait: a,
                        _func: l
                    };
                    else n[o] = {
                        _ownerTrait: a,
                        _func: l
                    }
                }
                return a
            };
            ut.hasMethod = function(t) {
                return !!this._methods[t]
            };
            ut.grant = function(t) {
                return new yt(this, t)
            };
            ut.grantAll = function() {
                var t = [],
                    e = this;
                J(this._properties, function(i) {
                    t.push([i, new yt(e, i)])
                });
                return t
            };
            ut.grantMany = function(t) {
                var e = [],
                    i = this;
                Z(t, function(t) {
                    e.push([t, new yt(i, t)])
                });
                return e
            };
            ut.grantExclude = function(t) {
                var e = [],
                    i = this;
                J(this._properties, function(n) {
                    if(!Q(t, function(t) {
                            if(t == n) return !0;
                            else return !1
                        })) e.push([n, new yt(i, n)])
                });
                return e
            };
            ut.neg = function() {
                if(this._negtive) return _negtive;
                var e = {},
                    i = {},
                    n = this._usedTraits.concat([this]),
                    r = rt(ut, {
                        _methods: e,
                        _lMethods: i,
                        _usedTraits: n,
                        _directUsedTraits: [this],
                        _properties: {},
                        _defaultNameMap: {},
                        _namesMap: {}
                    }),
                    a = this._methods;
                for(var s in a) e[s] = t.forbidden;
                a = trati._lMethods;
                for(var s in a) i[s] = t.forbidden;
                r._negtive = this;
                return r
            };
            ut.rename = function(t) {
                var e = {},
                    i = this._usedTraits.concat([this]),
                    n = rt(ut, {
                        _methods: e,
                        _lMethods: this._lMethods,
                        _usedTraits: i,
                        _directUsedTraits: [this],
                        _properties: {},
                        _defaultNameMap: {},
                        _namesMap: {}
                    }),
                    r = this._methods;
                for(var a in r) {
                    var s = t[a];
                    s = s ? s : a;
                    if(void 0 !== e[s] && e[s] !== r[a] && e[s]._ownerTrait !== r[a]._ownerTrait) K(!1, "`" + s + "' name conflicts!!!");
                    else e[s] = r[a]
                }
                return n
            };
            ut.exclude = function(t) {
                var e = {},
                    i = this._usedTraits.concat([this]),
                    n = rt(ut, {
                        _methods: e,
                        _lMethods: this._lMethods,
                        _usedTraits: i,
                        _directUsedTraits: [this],
                        _properties: {},
                        _defaultNameMap: {},
                        _namesMap: {}
                    }),
                    r = this._methods;
                for(var a in r) e[a] = r[a];
                for(var s = 0; s < t.length; ++s) delete e[t[s]];
                return n
            };
            ut.select = function(t) {
                for(var e = {}, i = this._usedTraits.concat([this]), n = rt(ut, {
                    _methods: e,
                    _lMethods: this._lMethods,
                    _usedTraits: i,
                    _directUsedTraits: [this],
                    _properties: {},
                    _defaultNameMap: {},
                    _namesMap: {}
                }), r = this._methods, a = 0; a < t.length; ++a) {
                    var s = r[t[a]];
                    if(null != s) e[t[a]] = s
                }
                return n
            };
            ut.alias = function(t) {
                var e = {},
                    i = this._usedTraits.concat([this]),
                    n = rt(ut, {
                        _methods: e,
                        _lMethods: this._lMethods,
                        _usedTraits: i,
                        _directUsedTraits: [this],
                        _properties: {},
                        _defaultNameMap: {},
                        _namesMap: {}
                    }),
                    r = this._methods;
                for(var a in r) e[a] = r[a];
                for(var s in t) {
                    var o = t[s];
                    if(void 0 !== e[o] && e[o] !== r[s] && e[o]._ownerTrait !== r[s]._ownerTrait) K(!1, "`" + o + "' name conflicts!!!");
                    else e[o] = r[s]
                }
                return n
            };
            ut.prefix = function(t) {
                var e = {},
                    i = this._usedTraits.concat([this]),
                    n = rt(ut, {
                        _methods: e,
                        _lMethods: this._lMethods,
                        _usedTraits: i,
                        _directUsedTraits: [this],
                        _properties: {},
                        _defaultNameMap: {},
                        _namesMap: {}
                    }),
                    r = this._methods;
                for(var a in r) e[t + a] = r[a];
                return n
            };
            return t
        }(),
        ht = [a, s, o, l, c, u, d, h, f],
        ft = [p, _, m, g, v, y, b, x, $],
        pt = [S, C, T, E, I, A, M, D, P],
        _t = "Error: get private property: ",
        mt = "Error: set private property: ",
        gt = "Error: set readonly property: ",
        vt = "Error: did't give a setter function then you set custom_setter property: ",
        yt = function() {
            function t(t, e) {
                this.grantNames = {};
                this.grantTraitIdentifiers = {};
                this.isGrant = !0;
                if(void 0 != t) {
                    var i = t._defaultNameMap[e],
                        n = tt(t);
                    this.grantNames[i] = i;
                    this.grantTraitIdentifiers[n] = n
                }
                return this
            }
            t.prototype.merge = function(t) {
                var e = this.grantNames,
                    i = t.grantNames;
                for(var n in i)
                    if(i.hasOwnProperty(n)) e[n] = n;
                var r = this.grantTraitIdentifiers,
                    a = t.grantTraitIdentifiers;
                for(var n in a)
                    if(a.hasOwnProperty(n)) r[n] = n;
                return this
            };
            t.prototype.compose = function(t) {
                var e = [this];
                if(t instanceof Array) e = e.concat(t);
                else e = e.concat(X.call(arguments, 0));
                return V(e)
            };
            return t;
        }(),
        bt = {
            _usedTraits: [],
            _namesMap: [],
            _properties: {},
            _specialProperties: {},
            _propertiesStore: {},
            _globalNameMap: {},
            _maxGlobalNameNum: 0,
            identifier: function() {
                return tt(this)
            },
            isEntity: function() {
                return !0
            },
            proto: function() {
                return this.__proto__
            },
            aggregateTrait: function() {
                return this._aggregateTrait
            },
            execProto: function(t, e, i, n, r, a, s, o, l) {
                var c = this._t._ownerEntity.proto()[t];
                return c.call(this, e, i, n, r, a, s, o, l)
            },
            tryExec: function(t, e, i, n, r, a, s, o, l) {
                var c = this[t];
                if(c) return c.call(this, e, i, n, r, a, s, o, l)
            },
            hasMethod: function(t) {
                return !!this[t]
            },
            hasProperty: function(t) {
                return this._properties.hasOwnProperty(t)
            },
            clone: function(t, e, i) {
                var n = rt(this);
                z(n, t, e, i);
                return n
            },
            hook: function(t, e, i, n) {
                var r = t._ownerTrait;
                if(null == r || null == i) return this;
                if(void 0 == n) n = "a";
                G(this);
                var a = r._defaultNameMap[e],
                    s = this._globalNameMap[a];
                B(this, s);
                H(this, n, i, a, s);
                q(this, s);
                return this
            },
            hookMany: function(t, e, i, n) {
                for(var r = e.length, a = 0; a < r; ++a) this.hook(t, e[a], i, n);
                return this
            },
            unhook: function(t, e, i, n) {
                var r = t._ownerTrait;
                if(null == r) return this;
                if(void 0 == n) n = "a";
                var a = r._defaultNameMap[e],
                    s = this._globalNameMap[a],
                    o = this._hookInfos[n],
                    l = o[s];
                if(null == l) K(!1, "unhook cb is undefined!!");
                if(l instanceof Array) {
                    var c = 2 == l.length;
                    if(Q(l, function(t, e) {
                            if(t.defaultMappedName === a && t.cb === i) {
                                l.splice(e, 1);
                                return !0
                            }
                            return !1
                        })) {
                        if(c) o[s] = o[s][0]
                    } else K(!1, "unhook a no exist cb hook")
                } else if(l.defaultMappedName === a && l.cb === i) delete o[s];
                else K(!1, "unhook a no exist cb");
                q(this, s);
                return this
            },
            unhookMany: function(t, e, i, n) {
                for(var r = e.length, a = 0; a < r; ++a) this.unhook(t, e[a], i, n);
                return this
            },
            subTraits: function(t) {
                var e = U(this, t);
                if(null != e) {
                    var i = this._subTraits[tt(e)];
                    i._o = this;
                    return i
                }
            }
        },
        xt = bt.clone({
            extend: function(t, e, i, n) {
                var r;
                if(n) r = this.clone(n[0], n[1], n[2]);
                else r = this.clone();
                r._objectProto = this._objectProto.clone(t, e, i);
                return r
            }
        });
    xt.create = function() {
        var t = this._objectProto.clone();
        t.Klass = this;
        t.initialize.apply(t, arguments);
        return t
    };
    xt._objectProto = bt.clone({
        initialize: function() {}
    });
    var $t = function(t) {
            return {
                name: t,
                type: $t
            }
        },
        wt = function(t) {
            return {
                name: t,
                type: wt
            }
        },
        kt = function(t) {
            return {
                name: t,
                type: kt
            }
        };
    t({
        Trait: dt,
        compose: i,
        Entity: bt,
        Klass: xt,
        composeGrantProperties: V,
        READONLY: $t,
        PRIVATE: wt,
        CUSTOM_SETTER: kt
    });
    return Y
});
I$(650, function() {
    var t, e = {},
        n = window.define;
    define = null;
    e["/rx/rx.aggregates.js"] = function(t, e, n) {
        ! function(e, i) {
            var n = "object" == typeof exports && exports,
                r = ("object" == typeof module && module && module.exports == n && module, "object" == typeof global && global);
            if(r.global === r) window = r;
            if("function" == typeof define && define.amd) define(["rx", "exports"], function(t, n) {
                e.Rx = i(e, n, t);
                return e.Rx
            });
            else if("object" == typeof module && module && module.exports === n) module.exports = i(e, module.exports, t("./rx"));
            else e.Rx = i(e, {}, e.Rx)
        }(this, function(t, e, n, r) {
            function a(t, e) {
                return t === e
            }

            function s(t) {
                return t
            }

            function o(t, e) {
                if(t > e) return 1;
                if(t === e) return 0;
                else return -1
            }

            function l(t, e, i) {
                return new y(function(n) {
                    var r = !1,
                        a = null,
                        s = [];
                    return t.subscribe(function(t) {
                        var o, l;
                        try {
                            l = e(t)
                        } catch(t) {
                            n.onError(t);
                            return
                        }
                        o = 0;
                        if(!r) {
                            r = !0;
                            a = l
                        } else try {
                            o = i(l, a)
                        } catch(t) {
                            n.onError(t);
                            return
                        }
                        if(o > 0) {
                            a = l;
                            s = []
                        }
                        if(o >= 0) s.push(t)
                    }, n.onError.bind(n), function() {
                        n.onNext(s);
                        n.onCompleted()
                    })
                })
            }

            function c(t) {
                if(0 === t.length) throw new Error(x);
                return t[0]
            }

            function u(t, e, i) {
                return new y(function(n) {
                    var r = 0,
                        a = e.length;
                    return t.subscribe(function(t) {
                        var s = !1;
                        try {
                            if(r < a) s = i(t, e[r++])
                        } catch(t) {
                            n.onError(t);
                            return
                        }
                        if(!s) {
                            n.onNext(!1);
                            n.onCompleted()
                        }
                    }, n.onError.bind(n), function() {
                        n.onNext(r === a);
                        n.onCompleted()
                    })
                })
            }

            function d(t, e, i, n) {
                if(e < 0) throw new Error(b);
                return new y(function(r) {
                    var a = e;
                    return t.subscribe(function(t) {
                        if(0 === a) {
                            r.onNext(t);
                            r.onCompleted()
                        }
                        a--
                    }, r.onError.bind(r), function() {
                        if(!i) r.onError(new Error(b));
                        else {
                            r.onNext(n);
                            r.onCompleted()
                        }
                    })
                })
            }

            function h(t, e, i) {
                return new y(function(n) {
                    var r = i,
                        a = !1;
                    return t.subscribe(function(t) {
                        if(a) n.onError(new Error("Sequence contains more than one element"));
                        else {
                            r = t;
                            a = !0
                        }
                    }, n.onError.bind(n), function() {
                        if(!a && !e) n.onError(new Error(x));
                        else {
                            n.onNext(r);
                            n.onCompleted()
                        }
                    })
                })
            }

            function f(t, e, i) {
                return new y(function(n) {
                    return t.subscribe(function(t) {
                        n.onNext(t);
                        n.onCompleted()
                    }, n.onError.bind(n), function() {
                        if(!e) n.onError(new Error(x));
                        else {
                            n.onNext(i);
                            n.onCompleted()
                        }
                    })
                })
            }

            function p(t, e, i) {
                return new y(function(n) {
                    var r = i,
                        a = !1;
                    return t.subscribe(function(t) {
                        r = t;
                        a = !0
                    }, n.onError.bind(n), function() {
                        if(!a && !e) n.onError(new Error(x));
                        else {
                            n.onNext(r);
                            n.onCompleted()
                        }
                    })
                })
            }

            function _(t, e, n, a) {
                return new y(function(s) {
                    return t.subscribe(function(r) {
                        if(e.call(n, r, i, t)) {
                            s.onNext(a ? i : r);
                            s.onCompleted()
                        } else i++
                    }, s.onError.bind(s), function() {
                        s.onNext(a ? -1 : r);
                        s.onCompleted()
                    })
                })
            }
            var m = n.Observable,
                g = m.prototype,
                v = n.CompositeDisposable,
                y = n.Internals.AnonymousObservable,
                b = "Argument out of range",
                x = "Sequence contains no elements.";
            g.aggregate = function() {
                var t, e, i;
                if(2 === arguments.length) {
                    t = arguments[0];
                    e = !0;
                    i = arguments[1]
                } else i = arguments[0];
                return e ? this.scan(t, i).startWith(t).finalValue() : this.scan(i).finalValue()
            };
            g.reduce = function() {
                var t, e, i = arguments[0];
                if(2 === arguments.length) {
                    e = !0;
                    t = arguments[1]
                }
                return e ? this.scan(t, i).startWith(t).finalValue() : this.scan(i).finalValue()
            };
            g.any = function(t, e) {
                var i = this;
                return t ? i.where(t, e).any() : new y(function(t) {
                    return i.subscribe(function() {
                        t.onNext(!0);
                        t.onCompleted()
                    }, t.onError.bind(t), function() {
                        t.onNext(!1);
                        t.onCompleted()
                    })
                })
            };
            g.some = g.any;
            g.isEmpty = function() {
                return this.any().select(function(t) {
                    return !t
                })
            };
            g.all = function(t, e) {
                return this.where(function(e) {
                    return !t(e)
                }, e).any().select(function(t) {
                    return !t
                })
            };
            g.every = g.all;
            g.contains = function(t, e) {
                e || (e = a);
                return this.where(function(i) {
                    return e(i, t)
                }).any()
            };
            g.count = function(t) {
                return t ? this.where(t).count() : this.aggregate(0, function(t) {
                    return t + 1
                })
            };
            g.sum = function(t) {
                return t ? this.select(t).sum() : this.aggregate(0, function(t, e) {
                    return t + e
                })
            };
            g.minBy = function(t, e) {
                e || (e = o);
                return l(this, t, function(t, i) {
                    return e(t, i) * -1
                })
            };
            g.min = function(t) {
                return this.minBy(s, t).select(function(t) {
                    return c(t)
                })
            };
            g.maxBy = function(t, e) {
                e || (e = o);
                return l(this, t, e)
            };
            g.max = function(t) {
                return this.maxBy(s, t).select(function(t) {
                    return c(t)
                })
            };
            g.average = function(t) {
                return t ? this.select(t).average() : this.scan({
                    sum: 0,
                    count: 0
                }, function(t, e) {
                    return {
                        sum: t.sum + e,
                        count: t.count + 1
                    }
                }).finalValue().select(function(t) {
                    return t.sum / t.count
                })
            };
            g.sequenceEqual = function(t, e) {
                var i = this;
                e || (e = a);
                if(Array.isArray(t)) return u(i, t, e);
                else return new y(function(n) {
                    var r = !1,
                        a = !1,
                        s = [],
                        o = [],
                        l = i.subscribe(function(t) {
                            var i, r;
                            if(o.length > 0) {
                                r = o.shift();
                                try {
                                    i = e(r, t)
                                } catch(t) {
                                    n.onError(t);
                                    return
                                }
                                if(!i) {
                                    n.onNext(!1);
                                    n.onCompleted()
                                }
                            } else if(a) {
                                n.onNext(!1);
                                n.onCompleted()
                            } else s.push(t)
                        }, n.onError.bind(n), function() {
                            r = !0;
                            if(0 === s.length)
                                if(o.length > 0) {
                                    n.onNext(!1);
                                    n.onCompleted()
                                } else if(a) {
                                    n.onNext(!0);
                                    n.onCompleted()
                                }
                        }),
                        c = t.subscribe(function(t) {
                            var i, a;
                            if(s.length > 0) {
                                a = s.shift();
                                try {
                                    i = e(a, t)
                                } catch(t) {
                                    n.onError(t);
                                    return
                                }
                                if(!i) {
                                    n.onNext(!1);
                                    n.onCompleted()
                                }
                            } else if(r) {
                                n.onNext(!1);
                                n.onCompleted()
                            } else o.push(t)
                        }, n.onError.bind(n), function() {
                            a = !0;
                            if(0 === o.length)
                                if(s.length > 0) {
                                    n.onNext(!1);
                                    n.onCompleted()
                                } else if(r) {
                                    n.onNext(!0);
                                    n.onCompleted()
                                }
                        });
                    return new v(l, c)
                })
            };
            g.elementAt = function(t) {
                return d(this, t, !1)
            };
            g.elementAtOrDefault = function(t, e) {
                return d(this, t, !0, e)
            };
            g.single = function(t) {
                if(t) return this.where(t).single();
                else return h(this, !1)
            };
            g.singleOrDefault = function(t, e) {
                if(t) return this.where(t).singleOrDefault(null, e);
                else return h(this, !0, e)
            };
            g.first = function(t) {
                if(t) return this.where(t).first();
                else return f(this, !1)
            };
            g.firstOrDefault = function(t, e) {
                if(t) return this.where(t).firstOrDefault(null, e);
                else return f(this, !0, e)
            };
            g.last = function(t) {
                if(t) return this.where(t).last();
                else return p(this, !1)
            };
            g.lastOrDefault = function(t, e) {
                if(t) return this.where(t).lastOrDefault(null, e);
                else return p(this, !0, e)
            };
            g.find = function(t) {
                return _(this, t, arguments[1], !1)
            };
            g.findIndex = function(t) {
                return _(this, t, arguments[1], !0)
            };
            return n
        })
    };
    e["/rx/rx.html.js"] = function(t, e, i) {
        ! function(e, i) {
            var n = "object" == typeof exports && exports && ("object" == typeof e && e && e == e.global && (window = e), exports);
            if("function" == typeof define && define.amd) define(["rx", "exports"], function(t, n) {
                e.Rx = i(e, n, t);
                return e.Rx
            });
            else if("object" == typeof module && module && module.exports == n) {
                var r = i(e, module.exports, t("./rx"));
                module.exports = r
            } else e.Rx = i(e, {}, e.Rx)
        }(this, function(t, e, i, n) {
            function r() {
                if(t.XMLHttpRequest) return new t.XMLHttpRequest;
                else try {
                    return new t.ActiveXObject("Microsoft.XMLHTTP")
                } catch(t) {
                    throw new Error("XMLHttpRequest is not supported by your browser")
                }
            }
            var a = i.Observable,
                s = (a.prototype, a.createWithDisposable),
                o = i.Disposable.create,
                l = i.CompositeDisposable,
                c = i.RefCountDisposable,
                u = i.AsyncSubject,
                d = function(e, i, n) {
                    var r = new l,
                        a = function(t, e, i) {
                            if(t.addEventListener) {
                                t.addEventListener(e, i, !1);
                                return o(function() {
                                    t.removeEventListener(e, i, !1)
                                })
                            } else if(t.attachEvent) {
                                t.attachEvent("on" + e, i);
                                return o(function() {
                                    t.detachEvent("on" + e, i)
                                })
                            } else {
                                t["on" + e] = i;
                                return o(function() {
                                    t["on" + e] = null
                                })
                            }
                        };
                    if(e && e.nodeName || e === t) r.add(a(e, i, n));
                    else if(e && e.length)
                        for(var s = 0, c = e.length; s < c; s++) r.add(d(e[s], i, n));
                    return r
                };
            a.fromEvent = function(t, e) {
                var i = s(function(n) {
                    var r = function(t) {
                        n.onNext(t)
                    };
                    i.__handlers.push(r);
                    return d(t, e, r)
                });
                i.__handlers = [];
                return i
            };
            var h = function() {
                var t = document.createElement("div");
                return function(e) {
                    t.appendChild(e);
                    t.innerHTML = ""
                }
            }();
            a.getJSONPRequest = function() {
                var e = 0;
                return function(i) {
                    var r = new u,
                        a = document.getElementsByTagName("head")[0] || document.documentElement,
                        d = document.createElement("script"),
                        f = "rxjscallback" + e++,
                        i = i.replace("=JSONPCallback", "=" + f);
                    t[f] = function(t) {
                        r.onNext(t);
                        r.onCompleted()
                    };
                    d.src = i;
                    d.async = !0;
                    d.onload = d.onreadystatechange = function(e, i) {
                        if(i || !d.readyState || /loaded|complete/.test(d.readyState)) {
                            d.onload = d.onreadystatechange = null;
                            if(a && d.parentNode) h(d);
                            d = n;
                            delete t[f]
                        }
                    };
                    a.insertBefore(d, a.firstChild);
                    var p = new c(o(function() {
                        if(!/loaded|complete/.test(d.readyState)) {
                            d.abort();
                            d.onload = d.onreadystatechange = null;
                            if(a && d.parentNode) h(d);
                            d = n;
                            delete t[f];
                            r.onError(new Error("The script has been aborted"));
                        }
                    }));
                    return s(function(t) {
                        return new l(r.subscribe(t), p.getDisposable())
                    })
                }
            }();
            var f = a.ajax = function(t) {
                if("string" == typeof t) t = {
                    method: "GET",
                    url: t,
                    async: !0
                };
                if(t.async === n) t.async = !0;
                var e = new u,
                    i = r();
                if(t.headers) {
                    var a, d = t.headers;
                    for(a in d) i.setRequestHeader(a, d[a])
                }
                try {
                    if(details.user) i.open(t.method, t.url, t.async, t.user, t.password);
                    else i.open(t.method, t.url, t.async);
                    i.onreadystatechange = i.onload = function() {
                        if(4 === i.readyState) {
                            var t = i.status;
                            if(t >= 200 && t <= 300 || 0 === t || "" === t) {
                                e.onNext(i);
                                e.onCompleted()
                            } else e.onError(i)
                        }
                    };
                    i.onerror = i.onabort = function() {
                        e.onError(i)
                    };
                    i.send(t.body || null)
                } catch(t) {
                    e.onError(t)
                }
                var h = new c(o(function() {
                    if(4 !== i.readyState) {
                        i.abort();
                        e.onError(i)
                    }
                }));
                return s(function(t) {
                    return new l(e.subscribe(t), h.getDisposable())
                })
            };
            a.post = function(t, e) {
                return f({
                    url: t,
                    body: e,
                    method: "POST",
                    async: !0
                })
            };
            var p = a.get = function(t) {
                return f({
                    url: t,
                    method: "GET",
                    async: !0
                })
            };
            if("undefined" != typeof window.JSON) a.getJSON = function(t) {
                return p(t).select(function(t) {
                    return JSON.parse(t.responseText)
                })
            };
            return i
        })
    };
    e["/rx/rx.time.js"] = function(t, e, i) {
        ! function(e, i) {
            var n = "object" == typeof exports && exports,
                r = ("object" == typeof module && module && module.exports == n && module, "object" == typeof global && global);
            if(r.global === r) window = r;
            if("function" == typeof define && define.amd) define(["rx", "exports"], function(t, n) {
                e.Rx = i(e, n, t);
                return e.Rx
            });
            else if("object" == typeof module && module && module.exports === n) module.exports = i(e, module.exports, t("./rx"));
            else e.Rx = i(e, {}, e.Rx)
        }(this, function(t, e, i, n) {
            function r(t, e) {
                return new f(function(i) {
                    return e.scheduleWithAbsolute(t, function() {
                        i.onNext(0);
                        i.onCompleted()
                    })
                })
            }

            function a(t, e, i) {
                var n = S(e);
                return new f(function(e) {
                    var r = 0,
                        a = t;
                    return i.scheduleRecursiveWithAbsolute(a, function(t) {
                        var s;
                        if(n > 0) {
                            s = i.now();
                            a += n;
                            if(a <= s) a = s + n
                        }
                        e.onNext(r++);
                        t(a)
                    })
                })
            }

            function s(t, e) {
                var i = S(t);
                return new f(function(t) {
                    return e.scheduleWithRelative(i, function() {
                        t.onNext(0);
                        t.onCompleted()
                    })
                })
            }

            function o(t, e, i) {
                if(t === e) return new f(function(t) {
                    return i.schedulePeriodicWithState(0, e, function(e) {
                        t.onNext(e);
                        return e + 1
                    })
                });
                else return p(function() {
                    return a(i.now() + t, e, i)
                })
            }

            function l(t, e) {
                var i = this;
                return new f(function(n) {
                    var r, a = !1,
                        s = new b,
                        o = null,
                        l = [],
                        c = !1;
                    r = i.materialize().timestamp(e).subscribe(function(i) {
                        var r, u;
                        if("E" === i.value.kind) {
                            l = [];
                            l.push(i);
                            o = i.value.exception;
                            u = !c
                        } else {
                            l.push({
                                value: i.value,
                                timestamp: i.timestamp + t
                            });
                            u = !a;
                            a = !0
                        }
                        if(u)
                            if(null !== o) n.onError(o);
                            else {
                                r = new y;
                                s.disposable(r);
                                r.disposable(e.scheduleRecursiveWithRelative(t, function(t) {
                                    var i, r, s, u;
                                    if(null === o) {
                                        c = !0;
                                        do {
                                            s = null;
                                            if(l.length > 0 && l[0].timestamp - e.now() <= 0) s = l.shift().value;
                                            if(null !== s) s.accept(n)
                                        } while (null !== s);
                                        u = !1;
                                        r = 0;
                                        if(l.length > 0) {
                                            u = !0;
                                            r = Math.max(0, l[0].timestamp - e.now())
                                        } else a = !1;
                                        i = o;
                                        c = !1;
                                        if(null !== i) n.onError(i);
                                        else if(u) t(r)
                                    }
                                }))
                            }
                    });
                    return new x(r, s)
                })
            }

            function c(t, e) {
                var i = this;
                return p(function() {
                    var n = t - e.now();
                    return l.call(i, n, e)
                })
            }

            function u(t, e) {
                return new f(function(i) {
                    function n() {
                        if(s) {
                            s = !1;
                            i.onNext(a)
                        }
                        if(r) i.onCompleted()
                    }
                    var r, a, s;
                    return new x(t.subscribe(function(t) {
                        s = !0;
                        a = t
                    }, i.onError.bind(i), function() {
                        r = !0
                    }), e.subscribe(n, i.onError.bind(i), n))
                })
            }
            var d = i.Observable,
                h = d.prototype,
                f = i.Internals.AnonymousObservable,
                p = d.defer,
                _ = d.empty,
                m = d.throwException,
                g = d.fromArray,
                v = i.Scheduler.timeout,
                y = i.SingleAssignmentDisposable,
                b = i.SerialDisposable,
                x = i.CompositeDisposable,
                $ = i.RefCountDisposable,
                w = i.Subject,
                k = (i.Internals.BinaryObserver, i.Internals.addRef),
                S = i.Scheduler.normalize,
                C = d.interval = function(t, e) {
                    e || (e = v);
                    return o(t, t, e)
                },
                T = d.timer = function(t, e, i) {
                    var l;
                    i || (i = v);
                    if(e !== n && "number" == typeof e) l = e;
                    else if(e !== n && "object" == typeof e) i = e;
                    if(t instanceof Date && l === n) return r(t.getTime(), i);
                    if(t instanceof Date && l !== n) {
                        l = e;
                        return a(t.getTime(), l, i)
                    }
                    if(l === n) return s(t, i);
                    else return o(t, l, i)
                };
            h.delay = function(t, e) {
                e || (e = v);
                return t instanceof Date ? c.call(this, t.getTime(), e) : l.call(this, t, e)
            };
            h.throttle = function(t, e) {
                e || (e = v);
                var i = this;
                return new f(function(n) {
                    var r, a = new b,
                        s = !1,
                        o = 0,
                        l = null;
                    r = i.subscribe(function(i) {
                        var r, c;
                        s = !0;
                        l = i;
                        o++;
                        r = o;
                        c = new y;
                        a.disposable(c);
                        c.disposable(e.scheduleWithRelative(t, function() {
                            if(s && o === r) n.onNext(l);
                            s = !1
                        }))
                    }, function(t) {
                        a.dispose();
                        n.onError(t);
                        s = !1;
                        o++
                    }, function() {
                        a.dispose();
                        if(s) n.onNext(l);
                        n.onCompleted();
                        s = !1;
                        o++
                    });
                    return new x(r, a)
                })
            };
            h.windowWithTime = function(t, e, i) {
                var r, a = this;
                if(e === n) r = t;
                if(i === n) i = v;
                if("number" == typeof e) r = e;
                else if("object" == typeof e) {
                    r = t;
                    i = e
                }
                return new f(function(e) {
                    var n, s, o, l = r,
                        c = t,
                        u = [],
                        d = new b,
                        h = 0;
                    s = new x(d);
                    o = new $(s);
                    n = function() {
                        var t, a, s, f, p;
                        s = new y;
                        d.disposable(s);
                        a = !1;
                        t = !1;
                        if(c === l) {
                            a = !0;
                            t = !0
                        } else if(c < l) a = !0;
                        else t = !0;
                        f = a ? c : l;
                        p = f - h;
                        h = f;
                        if(a) c += r;
                        if(t) l += r;
                        s.disposable(i.scheduleWithRelative(p, function() {
                            var i;
                            if(t) {
                                i = new w;
                                u.push(i);
                                e.onNext(k(i, o))
                            }
                            if(a) {
                                i = u.shift();
                                i.onCompleted()
                            }
                            n()
                        }))
                    };
                    u.push(new w);
                    e.onNext(k(u[0], o));
                    n();
                    s.add(a.subscribe(function(t) {
                        var e, i;
                        for(e = 0; e < u.length; e++) {
                            i = u[e];
                            i.onNext(t)
                        }
                    }, function(t) {
                        var i, n;
                        for(i = 0; i < u.length; i++) {
                            n = u[i];
                            n.onError(t)
                        }
                        e.onError(t)
                    }, function() {
                        var t, i;
                        for(t = 0; t < u.length; t++) {
                            i = u[t];
                            i.onCompleted()
                        }
                        e.onCompleted()
                    }));
                    return o
                })
            };
            h.windowWithTimeOrCount = function(t, e, i) {
                var n = this;
                i || (i = v);
                return new f(function(r) {
                    var a, s, o, l, c = 0,
                        u = new b,
                        d = 0;
                    s = new x(u);
                    o = new $(s);
                    a = function(e) {
                        var n = new y;
                        u.disposable(n);
                        n.disposable(i.scheduleWithRelative(t, function() {
                            var t;
                            if(e === d) {
                                c = 0;
                                t = ++d;
                                l.onCompleted();
                                l = new w;
                                r.onNext(k(l, o));
                                a(t)
                            }
                        }))
                    };
                    l = new w;
                    r.onNext(k(l, o));
                    a(0);
                    s.add(n.subscribe(function(t) {
                        var i = 0,
                            n = !1;
                        l.onNext(t);
                        c++;
                        if(c === e) {
                            n = !0;
                            c = 0;
                            i = ++d;
                            l.onCompleted();
                            l = new w;
                            r.onNext(k(l, o))
                        }
                        if(n) a(i)
                    }, function(t) {
                        l.onError(t);
                        r.onError(t)
                    }, function() {
                        l.onCompleted();
                        r.onCompleted()
                    }));
                    return o
                })
            };
            h.bufferWithTime = function(t, e, i) {
                var r;
                if(e === n) r = t;
                i || (i = v);
                if("number" == typeof e) r = e;
                else if("object" == typeof e) {
                    r = t;
                    i = e
                }
                return this.windowWithTime(t, r, i).selectMany(function(t) {
                    return t.toArray()
                })
            };
            h.bufferWithTimeOrCount = function(t, e, i) {
                i || (i = v);
                return this.windowWithTimeOrCount(t, e, i).selectMany(function(t) {
                    return t.toArray()
                })
            };
            h.timeInterval = function(t) {
                var e = this;
                t || (t = v);
                return p(function() {
                    var i = t.now();
                    return e.select(function(e) {
                        var n = t.now(),
                            r = n - i;
                        i = n;
                        return {
                            value: e,
                            interval: r
                        }
                    })
                })
            };
            h.timestamp = function(t) {
                t || (t = v);
                return this.select(function(e) {
                    return {
                        value: e,
                        timestamp: t.now()
                    }
                })
            };
            h.sample = function(t, e) {
                e || (e = v);
                if("number" == typeof t) return u(this, C(t, e));
                else return u(this, t)
            };
            h.timeout = function(t, e, i) {
                var n, r = this;
                e || (e = m(new Error("Timeout")));
                i || (i = v);
                if(t instanceof Date) n = function(t, e) {
                    i.scheduleWithAbsolute(t, e)
                };
                else n = function(t, e) {
                    i.scheduleWithRelative(t, e)
                };
                return new f(function(i) {
                    var a, s = 0,
                        o = new y,
                        l = new b,
                        c = !1,
                        u = new b;
                    l.disposable(o);
                    a = function() {
                        var r = s;
                        u.disposable(n(t, function() {
                            c = s === r;
                            var t = c;
                            if(t) l.disposable(e.subscribe(i))
                        }))
                    };
                    a();
                    o.disposable(r.subscribe(function(t) {
                        var e = !c;
                        if(e) {
                            s++;
                            i.onNext(t);
                            a()
                        }
                    }, function(t) {
                        var e = !c;
                        if(e) {
                            s++;
                            i.onError(t)
                        }
                    }, function() {
                        var t = !c;
                        if(t) {
                            s++;
                            i.onCompleted()
                        }
                    }));
                    return new x(l, u)
                })
            };
            d.generateWithAbsoluteTime = function(t, e, i, n, r, a) {
                a || (a = v);
                return new f(function(s) {
                    var o, l, c = !0,
                        u = !1,
                        d = t;
                    return a.scheduleRecursiveWithAbsolute(a.now(), function(t) {
                        if(u) s.onNext(o);
                        try {
                            if(c) c = !1;
                            else d = i(d);
                            u = e(d);
                            if(u) {
                                o = n(d);
                                l = r(d)
                            }
                        } catch(t) {
                            s.onError(t);
                            return
                        }
                        if(u) t(l);
                        else s.onCompleted()
                    })
                })
            };
            d.generateWithRelativeTime = function(t, e, i, n, r, a) {
                a || (a = v);
                return new f(function(s) {
                    var o, l, c = !0,
                        u = !1,
                        d = t;
                    return a.scheduleRecursiveWithRelative(0, function(t) {
                        if(u) s.onNext(o);
                        try {
                            if(c) c = !1;
                            else d = i(d);
                            u = e(d);
                            if(u) {
                                o = n(d);
                                l = r(d)
                            }
                        } catch(t) {
                            s.onError(t);
                            return
                        }
                        if(u) t(l);
                        else s.onCompleted()
                    })
                })
            };
            h.delaySubscription = function(t, e) {
                e || (e = v);
                return this.delayWithSelector(T(t, e), function() {
                    return _()
                })
            };
            h.delayWithSelector = function(t, e) {
                var i, n, r = this;
                if("function" == typeof t) n = t;
                else {
                    i = t;
                    n = e
                }
                return new f(function(t) {
                    var e = new x,
                        a = !1,
                        s = function() {
                            if(a && 0 === e.length) t.onCompleted()
                        },
                        o = new b,
                        l = function() {
                            o.setDisposable(r.subscribe(function(i) {
                                var r;
                                try {
                                    r = n(i)
                                } catch(e) {
                                    t.onError(e);
                                    return
                                }
                                var a = new y;
                                e.add(a);
                                a.setDisposable(r.subscribe(function() {
                                    t.onNext(i);
                                    e.remove(a);
                                    s()
                                }, t.onError.bind(t), function() {
                                    t.onNext(i);
                                    e.remove(a);
                                    s()
                                }))
                            }, t.onError.bind(t), function() {
                                a = !0;
                                o.dispose();
                                s()
                            }))
                        };
                    if(!i) l();
                    else o.setDisposable(i.subscribe(function() {
                        l()
                    }, t.onError.bind(t), function() {
                        l()
                    }));
                    return new x(o, e)
                })
            };
            h.timeoutWithSelector = function(t, e, i) {
                t || (t = observableNever());
                i || (i = m(new Error("Timeout")));
                var n = this;
                return new f(function(r) {
                    var a = new b,
                        s = new b,
                        o = new y;
                    a.setDisposable(o);
                    var l = 0,
                        c = !1,
                        u = function(t) {
                            var e = l,
                                n = function() {
                                    return l === e
                                },
                                o = new y;
                            s.setDisposable(o);
                            o.setDisposable(t.subscribe(function() {
                                if(n()) a.setDisposable(i.subscribe(r));
                                o.dispose()
                            }, function(t) {
                                if(n()) r.onError(t)
                            }, function() {
                                if(n()) a.setDisposable(i.subscribe(r))
                            }))
                        };
                    u(t);
                    var d = function() {
                        var t = !c;
                        if(t) l++;
                        return t
                    };
                    o.setDisposable(n.subscribe(function(t) {
                        if(d()) {
                            r.onNext(t);
                            var i;
                            try {
                                i = e(t)
                            } catch(t) {
                                r.onError(t);
                                return
                            }
                            u(i)
                        }
                    }, function(t) {
                        if(d()) r.onError(t)
                    }, function() {
                        if(d()) r.onCompleted()
                    }));
                    return new x(a, s)
                })
            };
            h.throttleWithSelector = function(t) {
                var e = this;
                return new f(function(i) {
                    var n, r = !1,
                        a = new b,
                        s = 0,
                        o = e.subscribe(function(e) {
                            var o;
                            try {
                                o = t(e)
                            } catch(t) {
                                i.onError(t);
                                return
                            }
                            r = !0;
                            n = e;
                            s++;
                            var l = s,
                                c = new y;
                            a.setDisposable(c);
                            c.setDisposable(o.subscribe(function() {
                                if(r && s === l) i.onNext(n);
                                r = !1;
                                c.dispose()
                            }, i.onError.bind(i), function() {
                                if(r && s === l) i.onNext(n);
                                r = !1;
                                c.dispose()
                            }))
                        }, function(t) {
                            a.dispose();
                            i.onError(t);
                            r = !1;
                            s++
                        }, function() {
                            a.dispose();
                            if(r) i.onNext(n);
                            i.onCompleted();
                            r = !1;
                            s++
                        });
                    return new x(o, a)
                })
            };
            h.skipLastWithTime = function(t, e) {
                e || (e = v);
                var i = this;
                return new f(function(n) {
                    var r = [];
                    return i.subscribe(function(i) {
                        var a = e.now();
                        r.push({
                            interval: a,
                            value: i
                        });
                        for(; r.length > 0 && a - r[0].interval >= t;) n.onNext(r.shift().value)
                    }, n.onError.bind(n), function() {
                        for(var i = e.now(); r.length > 0 && i - r[0].interval >= t;) n.onNext(r.shift().value);
                        n.onCompleted()
                    })
                })
            };
            h.takeLastWithTime = function(t, e, i) {
                return this.takeLastBufferWithTime(t, e).selectMany(function(t) {
                    return g(t, i)
                })
            };
            h.takeLastBufferWithTime = function(t, e) {
                var i = this;
                e || (e = v);
                return new f(function(n) {
                    var r = [];
                    return i.subscribe(function(i) {
                        var n = e.now();
                        r.push({
                            interval: n,
                            value: i
                        });
                        for(; r.length > 0 && n - r[0].interval >= t;) r.shift()
                    }, n.onError.bind(n), function() {
                        for(var i = e.now(), a = []; r.length > 0;) {
                            var s = r.shift();
                            if(i - s.interval <= t) a.push(s.value)
                        }
                        n.onNext(a);
                        n.onCompleted()
                    })
                })
            };
            h.takeWithTime = function(t, e) {
                var i = this;
                e || (e = v);
                return new f(function(n) {
                    var r = e.scheduleWithRelative(t, function() {
                        n.onCompleted()
                    });
                    return new x(r, i.subscribe(n))
                })
            };
            h.skipWithTime = function(t, e) {
                var i = this;
                e || (e = v);
                return new f(function(n) {
                    var r = !1,
                        a = e.scheduleWithRelative(t, function() {
                            r = !0
                        }),
                        s = i.subscribe(function(t) {
                            if(r) n.onNext(t)
                        }, n.onError.bind(n), n.onCompleted.bind(n));
                    return new x(a, s)
                })
            };
            h.skipUntilWithTime = function(t, e) {
                e || (e = v);
                var i = this;
                return new f(function(n) {
                    var r = !1,
                        a = e.scheduleWithAbsolute(t, function() {
                            r = !0
                        }),
                        s = i.subscribe(function(t) {
                            if(r) n.onNext(t)
                        }, n.onError.bind(n), n.onCompleted.bind(n));
                    return new x(a, s)
                })
            };
            h.takeUntilWithTime = function(t, e) {
                e || (e = v);
                var i = this;
                return new f(function(n) {
                    return new x(e.scheduleWithAbsolute(t, function() {
                        n.onCompleted()
                    }), i.subscribe(n))
                })
            };
            return i
        })
    };
    e["/rx/rx.binding.js"] = function(t, e, i) {
        ! function(e, i) {
            var n = "object" == typeof exports && exports,
                r = ("object" == typeof module && module && module.exports == n && module, "object" == typeof global && global);
            if(r.global === r) window = r;
            if("function" == typeof define && define.amd) define(["rx", "exports"], function(t, n) {
                e.Rx = i(e, n, t);
                return e.Rx
            });
            else if("object" == typeof module && module && module.exports === n) module.exports = i(e, module.exports, t("./rx"));
            else e.Rx = i(e, {}, e.Rx)
        }(this, function(t, e, i, n) {
            function r() {
                if(this.isDisposed) throw new Error(v)
            }
            var a = i.Observable,
                s = a.prototype,
                o = i.Internals.AnonymousObservable,
                l = i.Subject,
                c = i.AsyncSubject,
                u = i.Observer,
                d = i.Internals.ScheduledObserver,
                h = i.Disposable.create,
                f = i.Disposable.empty,
                p = i.CompositeDisposable,
                _ = i.Scheduler.currentThread,
                m = i.Internals.inherits,
                g = i.Internals.addProperties,
                v = "Object has been disposed";
            s.multicast = function(t, e) {
                var i = this;
                return "function" == typeof t ? new o(function(n) {
                    var r = i.multicast(t());
                    return new p(e(r).subscribe(n), r.connect())
                }) : new $(i, t)
            };
            s.publish = function(t) {
                return !t ? this.multicast(new l) : this.multicast(function() {
                    return new l
                }, t)
            };
            s.publishLast = function(t) {
                return !t ? this.multicast(new c) : this.multicast(function() {
                    return new c
                }, t)
            };
            s.publishValue = function(t, e) {
                return 2 === arguments.length ? this.multicast(function() {
                    return new b(e)
                }, t) : this.multicast(new b(t))
            };
            s.replay = function(t, e, i, n) {
                return !t ? this.multicast(new x(e, i, n)) : this.multicast(function() {
                    return new x(e, i, n)
                }, t)
            };
            var y = function(t, e) {
                this.subject = t;
                this.observer = e
            };
            y.prototype.dispose = function() {
                if(!this.subject.isDisposed && null !== this.observer) {
                    var t = this.subject.observers.indexOf(this.observer);
                    this.subject.observers.splice(t, 1);
                    this.observer = null
                }
            };
            var b = i.BehaviorSubject = function(t) {
                    function e(t) {
                        var e;
                        r.call(this);
                        if(!this.isStopped) {
                            this.observers.push(t);
                            t.onNext(this.value);
                            return new y(this, t)
                        }
                        e = this.exception;
                        if(e) t.onError(e);
                        else t.onCompleted();
                        return f
                    }

                    function i(i) {
                        t.call(this, e);
                        this.value = i, this.observers = [], this.isDisposed = !1, this.isStopped = !1, this.exception = null
                    }
                    m(i, t);
                    g(i.prototype, u, {
                        hasObservers: function() {
                            return this.observers.length > 0
                        },
                        onCompleted: function() {
                            r.call(this);
                            if(!this.isStopped) {
                                var t = this.observers.slice(0);
                                this.isStopped = !0;
                                for(var e = 0, i = t.length; e < i; e++) t[e].onCompleted();
                                this.observers = []
                            }
                        },
                        onError: function(t) {
                            r.call(this);
                            if(!this.isStopped) {
                                var e = this.observers.slice(0);
                                this.isStopped = !0;
                                this.exception = t;
                                for(var i = 0, n = e.length; i < n; i++) e[i].onError(t);
                                this.observers = []
                            }
                        },
                        onNext: function(t) {
                            r.call(this);
                            if(!this.isStopped) {
                                this.value = t;
                                for(var e = this.observers.slice(0), i = 0, n = e.length; i < n; i++) e[i].onNext(t)
                            }
                        },
                        dispose: function() {
                            this.isDisposed = !0;
                            this.observers = null;
                            this.value = null;
                            this.exception = null
                        }
                    });
                    return i
                }(a),
                x = i.ReplaySubject = function(t) {
                    function e(t) {
                        var e = new d(this.scheduler, t),
                            i = new n(this, e);
                        r.call(this);
                        this._trim(this.scheduler.now());
                        this.observers.push(e);
                        for(var a = this.q.length, s = 0, o = this.q.length; s < o; s++) e.onNext(this.q[s].value);
                        if(this.hasError) {
                            a++;
                            e.onError(this.error)
                        } else if(this.isStopped) {
                            a++;
                            e.onCompleted()
                        }
                        e.ensureActive(a);
                        return i
                    }

                    function i(i, n, r) {
                        this.bufferSize = null == i ? Number.MAX_VALUE : i;
                        this.window = null == n ? Number.MAX_VALUE : n;
                        this.scheduler = r || _;
                        this.q = [];
                        this.observers = [];
                        this.isStopped = !1;
                        this.isDisposed = !1;
                        this.hasError = !1;
                        this.error = null;
                        t.call(this, e)
                    }
                    var n = function(t, e) {
                        this.subject = t;
                        this.observer = e
                    };
                    n.prototype.dispose = function() {
                        this.observer.dispose();
                        if(!this.subject.isDisposed) {
                            var t = this.subject.observers.indexOf(this.observer);
                            this.subject.observers.splice(t, 1)
                        }
                    };
                    m(i, t);
                    g(i.prototype, u, {
                        hasObservers: function() {
                            return this.observers.length > 0
                        },
                        _trim: function(t) {
                            for(; this.q.length > this.bufferSize;) this.q.shift();
                            for(; this.q.length > 0 && t - this.q[0].interval > this.window;) this.q.shift()
                        },
                        onNext: function(t) {
                            var e;
                            r.call(this);
                            if(!this.isStopped) {
                                var i = this.scheduler.now();
                                this.q.push({
                                    interval: i,
                                    value: t
                                });
                                this._trim(i);
                                for(var n = this.observers.slice(0), a = 0, s = n.length; a < s; a++) {
                                    e = n[a];
                                    e.onNext(t);
                                    e.ensureActive()
                                }
                            }
                        },
                        onError: function(t) {
                            var e;
                            r.call(this);
                            if(!this.isStopped) {
                                this.isStopped = !0;
                                this.error = t;
                                this.hasError = !0;
                                var i = this.scheduler.now();
                                this._trim(i);
                                for(var n = this.observers.slice(0), a = 0, s = n.length; a < s; a++) {
                                    e = n[a];
                                    e.onError(t);
                                    e.ensureActive()
                                }
                                this.observers = []
                            }
                        },
                        onCompleted: function() {
                            var t;
                            r.call(this);
                            if(!this.isStopped) {
                                this.isStopped = !0;
                                var e = this.scheduler.now();
                                this._trim(e);
                                for(var i = this.observers.slice(0), n = 0, a = i.length; n < a; n++) {
                                    t = i[n];
                                    t.onCompleted();
                                    t.ensureActive()
                                }
                                this.observers = []
                            }
                        },
                        dispose: function() {
                            this.isDisposed = !0;
                            this.observers = null
                        }
                    });
                    return i
                }(a),
                $ = function(t) {
                    function e(e, i) {
                        function n(t) {
                            return r.subject.subscribe(t)
                        }
                        var r = {
                            subject: i,
                            source: e.asObservable(),
                            hasSubscription: !1,
                            subscription: null
                        };
                        this.connect = function() {
                            if(!r.hasSubscription) {
                                r.hasSubscription = !0;
                                r.subscription = new p(r.source.subscribe(r.subject), h(function() {
                                    r.hasSubscription = !1
                                }))
                            }
                            return r.subscription
                        };
                        t.call(this, n)
                    }
                    m(e, t);
                    e.prototype.connect = function() {
                        return this.connect()
                    };
                    e.prototype.refCount = function() {
                        var t = null,
                            e = 0,
                            i = this;
                        return new o(function(n) {
                            var r, a;
                            e++;
                            r = 1 === e;
                            a = i.subscribe(n);
                            if(r) t = i.connect();
                            return h(function() {
                                a.dispose();
                                e--;
                                if(0 === e) t.dispose()
                            })
                        })
                    };
                    return e
                }(a);
            return i
        })
    };
    e["/rx/all.js"] = function(t, e, i) {
        e("./rx", window);
        e("./rx.html", window);
        e("./rx.helper", window);
        e("./rx.aggregates", window);
        e("./rx.time", window);
        e("./rx.binding", window);
        var n = window.Rx;
        delete window.Rx;
        i(n)
    };
    e["/rx/rx.js"] = function(t, e, i) {
        ! function(t, e) {
            function i() {}

            function n(t) {
                return t
            }

            function r() {
                return(new Date).getTime()
            }

            function a(t, e) {
                return t === e
            }

            function s(t, e) {
                return t - e
            }

            function o(t) {
                return t.toString()
            }

            function l(t) {
                throw t
            }

            function c() {
                if(this.isDisposed) throw new Error($)
            }

            function u(t, e) {
                return 1 === t.length && Array.isArray(t[e]) ? t[e] : w.call(t)
            }

            function d(t, e) {
                for(var i = new Array(t), n = 0; n < t; n++) i[n] = e();
                return i
            }

            function h(t, e) {
                this.scheduler = t, this.disposable = e, this.isDisposed = !1
            }

            function f(t, e, i, n, r) {
                this.scheduler = t;
                this.state = e;
                this.action = i;
                this.dueTime = n;
                this.comparer = r || s;
                this.disposable = new j
            }

            function p(t, e) {
                return new Ct(function(i) {
                    var n = new j,
                        r = new F;
                    r.setDisposable(n);
                    n.setDisposable(t.subscribe(i.onNext.bind(i), function(t) {
                        var n, a;
                        try {
                            a = e(t)
                        } catch(t) {
                            i.onError(t);
                            return
                        }
                        n = new j;
                        r.setDisposable(n);
                        n.setDisposable(a.subscribe(i))
                    }, i.onCompleted.bind(i)));
                    return r
                })
            }

            function _(t, e) {
                var i = this;
                return new Ct(function(n) {
                    var r = 0,
                        a = t.length;
                    return i.subscribe(function(i) {
                        if(r < a) {
                            var s, o = t[r++];
                            try {
                                s = e(i, o)
                            } catch(t) {
                                n.onError(t);
                                return
                            }
                            n.onNext(s)
                        } else n.onCompleted()
                    }, n.onError.bind(n), n.onCompleted.bind(n))
                })
            }

            function m(t) {
                return this.select(t).mergeObservable()
            }
            var g = "object" == typeof exports && exports,
                v = ("object" == typeof module && module && module.exports == g && module, "object" == typeof global && global);
            if(v.global === v) t = v;
            var y = {
                    Internals: {}
                },
                b = "Sequence contains no elements.",
                x = "Argument out of range",
                $ = "Object has been disposed",
                w = Array.prototype.slice,
                k = ({}.hasOwnProperty, this.inherits = y.Internals.inherits = function(t, e) {
                    function i() {
                        this.constructor = t
                    }
                    i.prototype = e.prototype;
                    t.prototype = new i
                }),
                S = y.Internals.addProperties = function(t) {
                    for(var e = w.call(arguments, 1), i = 0, n = e.length; i < n; i++) {
                        var r = e[i];
                        for(var a in r) t[a] = r[a]
                    }
                },
                C = y.Internals.addRef = function(t, e) {
                    return new Ct(function(i) {
                        return new D(e.getDisposable(), t.subscribe(i))
                    })
                };
            if(!Function.prototype.bind) Function.prototype.bind = function(t) {
                var e = this,
                    i = w.call(arguments, 1),
                    n = function() {
                        function r() {}
                        if(this instanceof n) {
                            r.prototype = e.prototype;
                            var a = new r,
                                s = e.apply(a, i.concat(w.call(arguments)));
                            if(Object(s) === s) return s;
                            else return a
                        } else return e.apply(t, i.concat(w.call(arguments)))
                    };
                return n
            };
            var T = Object("a"),
                E = "a" != T[0] || !(0 in T);
            if(!Array.prototype.every) Array.prototype.every = function(t) {
                var e = Object(this),
                    i = E && "[object String]" == {}.toString.call(this) ? this.split("") : e,
                    n = i.length >>> 0,
                    r = arguments[1];
                if("[object Function]" != {}.toString.call(t)) throw new TypeError(t + " is not a function");
                for(var a = 0; a < n; a++)
                    if(a in i && !t.call(r, i[a], a, e)) return !1;
                return !0
            };
            if(!Array.prototype.map) Array.prototype.map = function(t) {
                var e = Object(this),
                    i = E && "[object String]" == {}.toString.call(this) ? this.split("") : e,
                    n = i.length >>> 0,
                    r = Array(n),
                    a = arguments[1];
                if("[object Function]" != {}.toString.call(t)) throw new TypeError(t + " is not a function");
                for(var s = 0; s < n; s++)
                    if(s in i) r[s] = t.call(a, i[s], s, e);
                return r
            };
            if(!Array.prototype.filter) Array.prototype.filter = function(t) {
                for(var e, i = [], n = new Object(this), r = 0, a = n.length >>> 0; r < a; r++) {
                    e = n[r];
                    if(r in n && t.call(arguments[1], e, r, n)) i.push(e)
                }
                return i
            };
            if(!Array.isArray) Array.isArray = function(t) {
                return "[object Array]" == Object.prototype.toString.call(t)
            };
            if(!Array.prototype.indexOf) Array.prototype.indexOf = function(t) {
                var e = Object(this),
                    i = e.length >>> 0;
                if(0 === i) return -1;
                var n = 0;
                if(arguments.length > 1) {
                    n = Number(arguments[1]);
                    if(n !== n) n = 0;
                    else if(0 !== n && n != 1 / 0 && n !== -(1 / 0)) n = (n > 0 || -1) * Math.floor(Math.abs(n))
                }
                if(n >= i) return -1;
                for(var r = n >= 0 ? n : Math.max(i - Math.abs(n), 0); r < i; r++)
                    if(r in e && e[r] === t) return r;
                return -1
            };
            var I = function(t, e) {
                this.id = t;
                this.value = e
            };
            I.prototype.compareTo = function(t) {
                var e = this.value.compareTo(t.value);
                if(0 === e) e = this.id - t.id;
                return e
            };
            var A = function(t) {
                    this.items = new Array(t);
                    this.length = 0
                },
                M = A.prototype;
            M.isHigherPriority = function(t, e) {
                return this.items[t].compareTo(this.items[e]) < 0
            };
            M.percolate = function(t) {
                if(!(t >= this.length || t < 0)) {
                    var e = t - 1 >> 1;
                    if(!(e < 0 || e === t))
                        if(this.isHigherPriority(t, e)) {
                            var i = this.items[t];
                            this.items[t] = this.items[e];
                            this.items[e] = i;
                            this.percolate(e)
                        }
                }
            };
            M.heapify = function(t) {
                if(t === e) t = 0;
                if(!(t >= this.length || t < 0)) {
                    var i = 2 * t + 1,
                        n = 2 * t + 2,
                        r = t;
                    if(i < this.length && this.isHigherPriority(i, r)) r = i;
                    if(n < this.length && this.isHigherPriority(n, r)) r = n;
                    if(r !== t) {
                        var a = this.items[t];
                        this.items[t] = this.items[r];
                        this.items[r] = a;
                        this.heapify(r)
                    }
                }
            };
            M.peek = function() {
                return this.items[0].value
            };
            M.removeAt = function(t) {
                this.items[t] = this.items[--this.length];
                delete this.items[this.length];
                this.heapify()
            };
            M.dequeue = function() {
                var t = this.peek();
                this.removeAt(0);
                return t
            };
            M.enqueue = function(t) {
                var e = this.length++;
                this.items[e] = new I(A.count++, t);
                this.percolate(e)
            };
            M.remove = function(t) {
                for(var e = 0; e < this.length; e++)
                    if(this.items[e].value === t) {
                        this.removeAt(e);
                        return !0
                    }
                return !1
            };
            A.count = 0;
            var D = y.CompositeDisposable = function() {
                    this.disposables = u(arguments, 0);
                    this.isDisposed = !1;
                    this.length = this.disposables.length
                },
                P = D.prototype;
            P.add = function(t) {
                if(this.isDisposed) t.dispose();
                else {
                    this.disposables.push(t);
                    this.length++
                }
            };
            P.remove = function(t) {
                var e = !1;
                if(!this.isDisposed) {
                    var i = this.disposables.indexOf(t);
                    if(i !== -1) {
                        e = !0;
                        this.disposables.splice(i, 1);
                        this.length--;
                        t.dispose()
                    }
                }
                return e
            };
            P.dispose = function() {
                if(!this.isDisposed) {
                    this.isDisposed = !0;
                    var t = this.disposables.slice(0);
                    this.disposables = [];
                    this.length = 0;
                    for(var e = 0, i = t.length; e < i; e++) t[e].dispose()
                }
            };
            P.clear = function() {
                var t = this.disposables.slice(0);
                this.disposables = [];
                this.length = 0;
                for(var e = 0, i = t.length; e < i; e++) t[e].dispose()
            };
            P.contains = function(t) {
                return this.disposables.indexOf(t) !== -1
            };
            P.toArray = function() {
                return this.disposables.slice(0)
            };
            var N = y.Disposable = function(t) {
                this.isDisposed = !1;
                this.action = t
            };
            N.prototype.dispose = function() {
                if(!this.isDisposed) {
                    this.action();
                    this.isDisposed = !0
                }
            };
            var L = N.create = function(t) {
                    return new N(t)
                },
                R = N.empty = {
                    dispose: i
                },
                j = y.SingleAssignmentDisposable = function() {
                    this.isDisposed = !1;
                    this.current = null
                },
                O = j.prototype;
            O.disposable = function(t) {
                return !t ? this.getDisposable() : this.setDisposable(t)
            };
            O.getDisposable = function() {
                return this.current
            };
            O.setDisposable = function(t) {
                if(this.current) throw new Error("Disposable has already been assigned");
                var e = this.isDisposed;
                if(!e) this.current = t;
                if(e && t) t.dispose()
            };
            O.dispose = function() {
                var t;
                if(!this.isDisposed) {
                    this.isDisposed = !0;
                    t = this.current;
                    this.current = null
                }
                if(t) t.dispose()
            };
            var F = y.SerialDisposable = function() {
                this.isDisposed = !1;
                this.current = null
            };
            F.prototype.getDisposable = function() {
                return this.current
            };
            F.prototype.setDisposable = function(t) {
                var e, i = this.isDisposed;
                if(!i) {
                    e = this.current;
                    this.current = t
                }
                if(e) e.dispose();
                if(i && t) t.dispose()
            };
            F.prototype.disposable = function(t) {
                if(!t) return this.getDisposable();
                else this.setDisposable(t)
            };
            F.prototype.dispose = function() {
                var t;
                if(!this.isDisposed) {
                    this.isDisposed = !0;
                    t = this.current;
                    this.current = null
                }
                if(t) t.dispose()
            };
            var z = y.RefCountDisposable = function() {
                function t(t) {
                    this.disposable = t;
                    this.disposable.count++;
                    this.isInnerDisposed = !1
                }

                function e(t) {
                    this.underlyingDisposable = t;
                    this.isDisposed = !1;
                    this.isPrimaryDisposed = !1;
                    this.count = 0
                }
                t.prototype.dispose = function() {
                    if(!this.disposable.isDisposed)
                        if(!this.isInnerDisposed) {
                            this.isInnerDisposed = !0;
                            this.disposable.count--;
                            if(0 === this.disposable.count && this.disposable.isPrimaryDisposed) {
                                this.disposable.isDisposed = !0;
                                this.disposable.underlyingDisposable.dispose()
                            }
                        }
                };
                e.prototype.dispose = function() {
                    if(!this.isDisposed)
                        if(!this.isPrimaryDisposed) {
                            this.isPrimaryDisposed = !0;
                            if(0 === this.count) {
                                this.isDisposed = !0;
                                this.underlyingDisposable.dispose()
                            }
                        }
                };
                e.prototype.getDisposable = function() {
                    return this.isDisposed ? R : new t(this)
                };
                return e
            }();
            h.prototype.dispose = function() {
                var t = this;
                this.scheduler.schedule(function() {
                    if(!t.isDisposed) {
                        t.isDisposed = !0;
                        t.disposable.dispose()
                    }
                })
            };
            f.prototype.invoke = function() {
                this.disposable.disposable(this.invokeCore())
            };
            f.prototype.compareTo = function(t) {
                return this.comparer(this.dueTime, t.dueTime)
            };
            f.prototype.isCancelled = function() {
                return this.disposable.isDisposed
            };
            f.prototype.invokeCore = function() {
                return this.action(this.scheduler, this.state)
            };
            var B = y.Scheduler = function() {
                    function e(t, e, i, n) {
                        this.now = t;
                        this._schedule = e;
                        this._scheduleRelative = i;
                        this._scheduleAbsolute = n
                    }

                    function i(t, e) {
                        var i = e.first,
                            n = e.second,
                            r = new D,
                            a = function(e) {
                                n(e, function(e) {
                                    var i = !1,
                                        n = !1,
                                        s = t.scheduleWithState(e, function(t, e) {
                                            if(i) r.remove(s);
                                            else n = !0;
                                            a(e);
                                            return R
                                        });
                                    if(!n) {
                                        r.add(s);
                                        i = !0
                                    }
                                })
                            };
                        a(i);
                        return r
                    }

                    function n(t, e, i) {
                        var n = e.first,
                            r = e.second,
                            a = new D,
                            s = function(e) {
                                r(e, function(e, n) {
                                    var r = !1,
                                        o = !1,
                                        l = t[i].call(t, e, n, function(t, e) {
                                            if(r) a.remove(l);
                                            else o = !0;
                                            s(e);
                                            return R
                                        });
                                    if(!o) {
                                        a.add(l);
                                        r = !0
                                    }
                                })
                            };
                        s(n);
                        return a
                    }

                    function a(t, e) {
                        e();
                        return R
                    }
                    var s = e.prototype;
                    s.catchException = function(t) {
                        return new X(this, t)
                    };
                    s.schedulePeriodic = function(t, e) {
                        return this.schedulePeriodicWithState(null, t, function() {
                            e()
                        })
                    };
                    s.schedulePeriodicWithState = function(e, i, n) {
                        var r = e,
                            a = t.setInterval(function() {
                                r = n(r)
                            }, i);
                        return L(function() {
                            t.clearInterval(a)
                        })
                    };
                    s.schedule = function(t) {
                        return this._schedule(t, a)
                    };
                    s.scheduleWithState = function(t, e) {
                        return this._schedule(t, e)
                    };
                    s.scheduleWithRelative = function(t, e) {
                        return this._scheduleRelative(e, t, a)
                    };
                    s.scheduleWithRelativeAndState = function(t, e, i) {
                        return this._scheduleRelative(t, e, i)
                    };
                    s.scheduleWithAbsolute = function(t, e) {
                        return this._scheduleAbsolute(e, t, a)
                    };
                    s.scheduleWithAbsoluteAndState = function(t, e, i) {
                        return this._scheduleAbsolute(t, e, i)
                    };
                    s.scheduleRecursive = function(t) {
                        return this.scheduleRecursiveWithState(t, function(t, e) {
                            t(function() {
                                e(t)
                            })
                        })
                    };
                    s.scheduleRecursiveWithState = function(t, e) {
                        return this.scheduleWithState({
                            first: t,
                            second: e
                        }, function(t, e) {
                            return i(t, e)
                        })
                    };
                    s.scheduleRecursiveWithRelative = function(t, e) {
                        return this.scheduleRecursiveWithRelativeAndState(e, t, function(t, e) {
                            t(function(i) {
                                e(t, i)
                            })
                        })
                    };
                    s.scheduleRecursiveWithRelativeAndState = function(t, e, i) {
                        return this._scheduleRelative({
                            first: t,
                            second: i
                        }, e, function(t, e) {
                            return n(t, e, "scheduleWithRelativeAndState")
                        })
                    };
                    s.scheduleRecursiveWithAbsolute = function(t, e) {
                        return this.scheduleRecursiveWithAbsoluteAndState(e, t, function(t, e) {
                            t(function(i) {
                                e(t, i)
                            })
                        })
                    };
                    s.scheduleRecursiveWithAbsoluteAndState = function(t, e, i) {
                        return this._scheduleAbsolute({
                            first: t,
                            second: i
                        }, e, function(t, e) {
                            return n(t, e, "scheduleWithAbsoluteAndState")
                        })
                    };
                    e.now = r;
                    e.normalize = function(t) {
                        if(t < 0) t = 0;
                        return t
                    };
                    return e
                }(),
                H = "Scheduler is not allowed to block the thread",
                W = B.immediate = function() {
                    function t(t, e) {
                        return e(this, t)
                    }

                    function e(t, e, i) {
                        if(e > 0) throw new Error(H);
                        return i(this, t)
                    }

                    function i(t, e, i) {
                        return this.scheduleWithRelativeAndState(t, e - this.now(), i)
                    }
                    return new B(r, t, e, i)
                }(),
                q = B.currentThread = function() {
                    function t() {
                        a = new A(4)
                    }

                    function e(t, e) {
                        return this.scheduleWithRelativeAndState(t, 0, e)
                    }

                    function i(e, i, n) {
                        var r, s = this.now() + B.normalize(i),
                            o = new f(this, e, n, s);
                        if(!a) {
                            r = new t;
                            try {
                                a.enqueue(o);
                                r.run()
                            } catch(t) {
                                throw t
                            } finally {
                                r.dispose()
                            }
                        } else a.enqueue(o);
                        return o.disposable
                    }

                    function n(t, e, i) {
                        return this.scheduleWithRelativeAndState(t, e - this.now(), i)
                    }
                    var a;
                    t.prototype.dispose = function() {
                        a = null
                    };
                    t.prototype.run = function() {
                        for(var t; a.length > 0;) {
                            t = a.dequeue();
                            if(!t.isCancelled()) {
                                for(; t.dueTime - B.now() > 0;);
                                if(!t.isCancelled()) t.invoke()
                            }
                        }
                    };
                    var s = new B(r, e, i, n);
                    s.scheduleRequired = function() {
                        return null === a
                    };
                    s.ensureTrampoline = function(t) {
                        if(null === a) return this.schedule(t);
                        else return t()
                    };
                    return s
                }(),
                G = function() {
                    function t(t, e) {
                        e(0, this._period);
                        try {
                            this._state = this._action(this._state)
                        } catch(t) {
                            this._cancel.dispose();
                            throw t
                        }
                    }

                    function e(t, e, i, n) {
                        this._scheduler = t;
                        this._state = e;
                        this._period = i;
                        this._action = n
                    }
                    e.prototype.start = function() {
                        var e = new j;
                        this._cancel = e;
                        e.setDisposable(this._scheduler.scheduleRecursiveWithRelativeAndState(0, this._period, t.bind(this)));
                        return e
                    };
                    return e
                }();
            y.VirtualTimeScheduler = function(t) {
                function e() {
                    return this.toDateTimeOffset(this.clock)
                }

                function i(t, e) {
                    return this.scheduleAbsoluteWithState(t, this.clock, e)
                }

                function n(t, e, i) {
                    return this.scheduleRelativeWithState(t, this.toRelative(e), i)
                }

                function r(t, e, i) {
                    return this.scheduleRelativeWithState(t, this.toRelative(e - this.now()), i)
                }

                function a(t, e) {
                    e();
                    return R
                }

                function s(a, s) {
                    this.clock = a;
                    this.comparer = s;
                    this.isEnabled = !1;
                    this.queue = new A(1024);
                    t.call(this, e, i, n, r)
                }
                k(s, t);
                var o = s.prototype;
                o.schedulePeriodicWithState = function(t, e, i) {
                    var n = new G(this, t, e, i);
                    return n.start()
                };
                o.scheduleRelativeWithState = function(t, e, i) {
                    var n = this.add(this.clock, e);
                    return this.scheduleAbsoluteWithState(t, n, i)
                };
                o.scheduleRelative = function(t, e) {
                    return this.scheduleRelativeWithState(e, t, a)
                };
                o.start = function() {
                    var t;
                    if(!this.isEnabled) {
                        this.isEnabled = !0;
                        do {
                            t = this.getNext();
                            if(null !== t) {
                                if(this.comparer(t.dueTime, this.clock) > 0) this.clock = t.dueTime;
                                t.invoke()
                            } else this.isEnabled = !1
                        } while (this.isEnabled)
                    }
                };
                o.stop = function() {
                    this.isEnabled = !1
                };
                o.advanceTo = function(t) {
                    var e, i = this.comparer(this.clock, t);
                    if(this.comparer(this.clock, t) > 0) throw new Error(x);
                    if(0 !== i)
                        if(!this.isEnabled) {
                            this.isEnabled = !0;
                            do {
                                e = this.getNext();
                                if(null !== e && this.comparer(e.dueTime, t) <= 0) {
                                    if(this.comparer(e.dueTime, this.clock) > 0) this.clock = e.dueTime;
                                    e.invoke()
                                } else this.isEnabled = !1
                            } while (this.isEnabled);
                            this.clock = t
                        }
                };
                o.advanceBy = function(t) {
                    var e = this.add(this.clock, t),
                        i = this.comparer(this.clock, e);
                    if(i > 0) throw new Error(x);
                    if(0 !== i) return this.advanceTo(e)
                };
                o.sleep = function(t) {
                    var e = this.add(this.clock, t);
                    if(this.comparer(this.clock, e) >= 0) throw new Error(x);
                    this.clock = e
                };
                o.getNext = function() {
                    for(var t; this.queue.length > 0;) {
                        t = this.queue.peek();
                        if(t.isCancelled()) this.queue.dequeue();
                        else return t
                    }
                    return null
                };
                o.scheduleAbsolute = function(t, e) {
                    return this.scheduleAbsoluteWithState(e, t, a)
                };
                o.scheduleAbsoluteWithState = function(t, e, i) {
                    var n = this,
                        r = function(t, e) {
                            n.queue.remove(a);
                            return i(t, e)
                        },
                        a = new f(n, t, r, e, n.comparer);
                    n.queue.enqueue(a);
                    return a.disposable
                };
                return s
            }(B);
            y.HistoricalScheduler = function(t) {
                function e(e, i) {
                    var n = null == e ? 0 : e,
                        r = i || s;
                    t.call(this, n, r)
                }
                k(e, t);
                var i = e.prototype;
                i.add = function(t, e) {
                    return t + e
                };
                i.toDateTimeOffset = function(t) {
                    return new Date(t).getTime()
                };
                i.toRelative = function(t) {
                    return t
                };
                return e
            }(y.VirtualTimeScheduler);
            var U, V = i;
            ! function() {
                function e() {
                    if(!t.postMessage || t.importScripts) return !1;
                    var e = !1,
                        i = t.onmessage;
                    t.onmessage = function() {
                        e = !0
                    };
                    t.postMessage("", "*");
                    t.onmessage = i;
                    return e
                }

                function i(t) {
                    if("string" == typeof t.data && t.data.substring(0, n.length) === n) {
                        var e = t.data.substring(n.length),
                            i = r[e];
                        i();
                        delete r[e]
                    }
                }
                if("object" == typeof t.process && "[object process]" === Object.prototype.toString.call(t.process)) U = t.process.nextTick;
                else if("function" == typeof t.setImmediate) {
                    U = t.setImmediate;
                    V = t.clearImmediate
                } else if(e()) {
                    var n = "ms.rx.schedule" + Math.random(),
                        r = {},
                        a = 0;
                    if(t.addEventListener) t.addEventListener("message", i, !1);
                    else t.attachEvent("onmessage", i, !1);
                    U = function(e) {
                        var i = a++;
                        r[i] = e;
                        t.postMessage(n + i, "*")
                    }
                } else if(t.MessageChannel) {
                    var s = new t.MessageChannel,
                        o = {},
                        l = 0;
                    s.port1.onmessage = function(t) {
                        var e = t.data,
                            i = o[e];
                        i();
                        delete o[e]
                    };
                    U = function(t) {
                        var e = l++;
                        o[e] = t;
                        s.port2.postMessage(e)
                    }
                } else if("document" in t && "onreadystatechange" in t.document.createElement("script")) U = function(e) {
                    var i = t.document.createElement("script");
                    i.onreadystatechange = function() {
                        e();
                        i.onreadystatechange = null;
                        i.parentNode.removeChild(i);
                        i = null
                    };
                    t.document.documentElement.appendChild(i)
                };
                else {
                    U = function(e) {
                        return t.setTimeout(e, 0)
                    };
                    V = t.clearTimeout
                }
            }();
            var Y = B.timeout = function() {
                    function e(t, e) {
                        var i = this,
                            n = new j,
                            r = U(function() {
                                if(!n.isDisposed) n.setDisposable(e(i, t))
                            });
                        return new D(n, L(function() {
                            V(r)
                        }))
                    }

                    function i(e, i, n) {
                        var r = this,
                            a = B.normalize(i);
                        if(0 === a) return r.scheduleWithState(e, n);
                        var s = new j,
                            o = t.setTimeout(function() {
                                if(!s.isDisposed) s.setDisposable(n(r, e))
                            }, a);
                        return new D(s, L(function() {
                            t.clearTimeout(o)
                        }))
                    }

                    function n(t, e, i) {
                        return this.scheduleWithRelativeAndState(t, e - this.now(), i)
                    }
                    return new B(r, e, i, n)
                }(),
                X = function(t) {
                    function e() {
                        return this._scheduler.now()
                    }

                    function i(t, e) {
                        return this._scheduler.scheduleWithState(t, this._wrap(e))
                    }

                    function n(t, e, i) {
                        return this._scheduler.scheduleWithRelativeAndState(t, e, this._wrap(i))
                    }

                    function r(t, e, i) {
                        return this._scheduler.scheduleWithAbsoluteAndState(t, e, this._wrap(i))
                    }

                    function a(a, s) {
                        this._scheduler = a;
                        this._handler = s;
                        this._recursiveOriginal = null;
                        this._recursiveWrapper = null;
                        t.call(this, e, i, n, r)
                    }
                    k(a, t);
                    a.prototype._clone = function(t) {
                        return new a(t, this._handler)
                    };
                    a.prototype._wrap = function(t) {
                        var e = this;
                        return function(i, n) {
                            try {
                                return t(e._getRecursiveWrapper(i), n)
                            } catch(t) {
                                if(!e._handler(t)) throw t;
                                return R
                            }
                        }
                    };
                    a.prototype._getRecursiveWrapper = function(t) {
                        if(this._recursiveOriginal !== t) {
                            this._recursiveOriginal = t;
                            var e = this._clone(t);
                            e._recursiveOriginal = t;
                            e._recursiveWrapper = e;
                            this._recursiveWrapper = e
                        }
                        return this._recursiveWrapper
                    };
                    a.prototype.schedulePeriodicWithState = function(t, e, i) {
                        var n = this,
                            r = !1,
                            a = new j;
                        a.setDisposable(this._scheduler.schedulePeriodicWithState(t, e, function(t) {
                            if(r) return null;
                            try {
                                return i(t)
                            } catch(t) {
                                r = !0;
                                if(!n._handler(t)) throw t;
                                a.dispose();
                                return null
                            }
                        }));
                        return a
                    };
                    return a
                }(B),
                K = y.Notification = function() {
                    function t(t, e) {
                        this.hasValue = null == e ? !1 : e;
                        this.kind = t
                    }
                    var e = t.prototype;
                    e.accept = function(t, e, i) {
                        if(1 === arguments.length && "object" == typeof t) return this._acceptObservable(t);
                        else return this._accept(t, e, i)
                    };
                    e.toObservable = function(t) {
                        var e = this;
                        t = t || W;
                        return new Ct(function(i) {
                            return t.schedule(function() {
                                e._acceptObservable(i);
                                if("N" === e.kind) i.onCompleted()
                            })
                        })
                    };
                    e.equals = function(t) {
                        var e = null == t ? "" : t.toString();
                        return this.toString() === e
                    };
                    return t
                }(),
                J = K.createOnNext = function() {
                    function t(t) {
                        return t(this.value)
                    }

                    function e(t) {
                        return t.onNext(this.value)
                    }

                    function i() {
                        return "OnNext(" + this.value + ")"
                    }
                    return function(n) {
                        var r = new K("N", !0);
                        r.value = n;
                        r._accept = t.bind(r);
                        r._acceptObservable = e.bind(r);
                        r.toString = i.bind(r);
                        return r
                    }
                }(),
                Z = K.createOnError = function() {
                    function t(t, e) {
                        return e(this.exception)
                    }

                    function e(t) {
                        return t.onError(this.exception)
                    }

                    function i() {
                        return "OnError(" + this.exception + ")"
                    }
                    return function(n) {
                        var r = new K("E");
                        r.exception = n;
                        r._accept = t.bind(r);
                        r._acceptObservable = e.bind(r);
                        r.toString = i.bind(r);
                        return r
                    }
                }(),
                Q = K.createOnCompleted = function() {
                    function t(t, e, i) {
                        return i()
                    }

                    function e(t) {
                        return t.onCompleted()
                    }

                    function i() {
                        return "OnCompleted()"
                    }
                    return function() {
                        var n = new K("C");
                        n._accept = t.bind(n);
                        n._acceptObservable = e.bind(n);
                        n.toString = i.bind(n);
                        return n
                    }
                }(),
                tt = y.Internals.Enumerator = function(t, e, i) {
                    this.moveNext = t;
                    this.getCurrent = e;
                    this.dispose = i
                },
                et = tt.create = function(t, e, n) {
                    var r = !1;
                    n || (n = i);
                    return new tt(function() {
                        if(r) return !1;
                        var e = t();
                        if(!e) {
                            r = !0;
                            n()
                        }
                        return e
                    }, function() {
                        return e()
                    }, function() {
                        if(!r) {
                            n();
                            r = !0
                        }
                    })
                },
                it = y.Internals.Enumerable = function() {
                    function t(t) {
                        this.getEnumerator = t
                    }
                    t.prototype.concat = function() {
                        var t = this;
                        return new Ct(function(e) {
                            var i = t.getEnumerator(),
                                n = !1,
                                r = new F,
                                a = W.scheduleRecursive(function(t) {
                                    var a, s, o = !1;
                                    if(!n) {
                                        try {
                                            o = i.moveNext();
                                            if(o) a = i.getCurrent();
                                            else i.dispose()
                                        } catch(t) {
                                            s = t;
                                            i.dispose()
                                        }
                                        if(!s)
                                            if(o) {
                                                var l = new j;
                                                r.setDisposable(l);
                                                l.setDisposable(a.subscribe(e.onNext.bind(e), e.onError.bind(e), function() {
                                                    t()
                                                }))
                                            } else e.onCompleted();
                                        else e.onError(s)
                                    } else;
                                });
                            return new D(r, a, L(function() {
                                n = !0;
                                i.dispose()
                            }))
                        })
                    };
                    t.prototype.catchException = function() {
                        var t = this;
                        return new Ct(function(e) {
                            var i, n = t.getEnumerator(),
                                r = !1,
                                a = new F,
                                s = W.scheduleRecursive(function(t) {
                                    var s, o, l;
                                    l = !1;
                                    if(!r) {
                                        try {
                                            l = n.moveNext();
                                            if(l) s = n.getCurrent()
                                        } catch(t) {
                                            o = t
                                        }
                                        if(!o)
                                            if(l) {
                                                var c = new j;
                                                a.setDisposable(c);
                                                c.setDisposable(s.subscribe(e.onNext.bind(e), function(e) {
                                                    i = e;
                                                    t()
                                                }, e.onCompleted.bind(e)))
                                            } else if(i) e.onError(i);
                                            else e.onCompleted();
                                        else e.onError(o)
                                    } else;
                                });
                            return new D(a, s, L(function() {
                                r = !0
                            }))
                        })
                    };
                    return t
                }(),
                nt = it.repeat = function(t, i) {
                    if(i === e) i = -1;
                    return new it(function() {
                        var e, n = i;
                        return et(function() {
                            if(0 === n) return !1;
                            if(n > 0) n--;
                            e = t;
                            return !0
                        }, function() {
                            return e
                        })
                    })
                },
                rt = it.forEach = function(t, e) {
                    e || (e = n);
                    return new it(function() {
                        var i, n = -1;
                        return et(function() {
                            if(++n < t.length) {
                                i = e(t[n], n);
                                return !0
                            }
                            return !1
                        }, function() {
                            return i
                        })
                    })
                },
                at = y.Observer = function() {};
            at.prototype.toNotifier = function() {
                var t = this;
                return function(e) {
                    return e.accept(t)
                }
            };
            at.prototype.asObserver = function() {
                return new ct(this.onNext.bind(this), this.onError.bind(this), this.onCompleted.bind(this))
            };
            at.prototype.checked = function() {
                return new ut(this)
            };
            var st = at.create = function(t, e, n) {
                t || (t = i);
                e || (e = l);
                n || (n = i);
                return new ct(t, e, n)
            };
            at.fromNotifier = function(t) {
                return new ct(function(e) {
                    return t(J(e))
                }, function(e) {
                    return t(Z(e))
                }, function() {
                    return t(Q())
                })
            };
            var ot, lt = y.Internals.AbstractObserver = function(t) {
                    function e() {
                        this.isStopped = !1;
                        t.call(this)
                    }
                    k(e, t);
                    e.prototype.onNext = function(t) {
                        if(!this.isStopped) this.next(t)
                    };
                    e.prototype.onError = function(t) {
                        if(!this.isStopped) {
                            this.isStopped = !0;
                            this.error(t)
                        }
                    };
                    e.prototype.onCompleted = function() {
                        if(!this.isStopped) {
                            this.isStopped = !0;
                            this.completed()
                        }
                    };
                    e.prototype.dispose = function() {
                        this.isStopped = !0
                    };
                    e.prototype.fail = function() {
                        if(!this.isStopped) {
                            this.isStopped = !0;
                            this.error(!0);
                            return !0
                        }
                        return !1
                    };
                    return e
                }(at),
                ct = y.AnonymousObserver = function(t) {
                    function e(e, i, n) {
                        t.call(this);
                        this._onNext = e;
                        this._onError = i;
                        this._onCompleted = n
                    }
                    k(e, t);
                    e.prototype.next = function(t) {
                        this._onNext(t)
                    };
                    e.prototype.error = function(t) {
                        this._onError(t)
                    };
                    e.prototype.completed = function() {
                        this._onCompleted()
                    };
                    return e
                }(lt),
                ut = function(t) {
                    function e(e) {
                        t.call(this);
                        this._observer = e;
                        this._state = 0
                    }
                    k(e, t);
                    var i = e.prototype;
                    i.onNext = function(t) {
                        this.checkAccess();
                        try {
                            this._observer.onNext(t)
                        } catch(t) {
                            throw t
                        } finally {
                            this._state = 0
                        }
                    };
                    i.onError = function(t) {
                        this.checkAccess();
                        try {
                            this._observer.onError(t)
                        } catch(t) {
                            throw t
                        } finally {
                            this._state = 2
                        }
                    };
                    i.onCompleted = function() {
                        this.checkAccess();
                        try {
                            this._observer.onCompleted()
                        } catch(t) {
                            throw t
                        } finally {
                            this._state = 2
                        }
                    };
                    i.checkAccess = function() {
                        if(1 === this._state) throw new Error("Re-entrancy detected");
                        if(2 === this._state) throw new Error("Observer completed");
                        if(0 === this._state) this._state = 1
                    };
                    return e
                }(at),
                dt = y.Internals.ScheduledObserver = function(t) {
                    function e(e, i) {
                        t.call(this);
                        this.scheduler = e;
                        this.observer = i;
                        this.isAcquired = !1;
                        this.hasFaulted = !1;
                        this.queue = [];
                        this.disposable = new F
                    }
                    k(e, t);
                    e.prototype.next = function(t) {
                        var e = this;
                        this.queue.push(function() {
                            e.observer.onNext(t)
                        })
                    };
                    e.prototype.error = function(t) {
                        var e = this;
                        this.queue.push(function() {
                            e.observer.onError(t)
                        })
                    };
                    e.prototype.completed = function() {
                        var t = this;
                        this.queue.push(function() {
                            t.observer.onCompleted()
                        })
                    };
                    e.prototype.ensureActive = function() {
                        var t = !1,
                            e = this;
                        if(!this.hasFaulted && this.queue.length > 0) {
                            t = !this.isAcquired;
                            this.isAcquired = !0
                        }
                        if(t) this.disposable.setDisposable(this.scheduler.scheduleRecursive(function(t) {
                            var i;
                            if(e.queue.length > 0) {
                                i = e.queue.shift();
                                try {
                                    i()
                                } catch(t) {
                                    e.queue = [];
                                    e.hasFaulted = !0;
                                    throw t
                                }
                                t()
                            } else e.isAcquired = !1
                        }))
                    };
                    e.prototype.dispose = function() {
                        t.prototype.dispose.call(this);
                        this.disposable.dispose()
                    };
                    return e
                }(lt),
                ht = function(t) {
                    function e() {
                        t.apply(this, arguments)
                    }
                    k(e, t);
                    e.prototype.next = function(e) {
                        t.prototype.next.call(this, e);
                        this.ensureActive()
                    };
                    e.prototype.error = function(e) {
                        t.prototype.error.call(this, e);
                        this.ensureActive()
                    };
                    e.prototype.completed = function() {
                        t.prototype.completed.call(this);
                        this.ensureActive()
                    };
                    return e
                }(dt),
                ft = y.Observable = function() {
                    function t(t) {
                        this._subscribe = t
                    }
                    ot = t.prototype;
                    ot.finalValue = function() {
                        var t = this;
                        return new Ct(function(e) {
                            var i, n = !1;
                            return t.subscribe(function(t) {
                                n = !0;
                                i = t
                            }, e.onError.bind(e), function() {
                                if(!n) e.onError(new Error(b));
                                else {
                                    e.onNext(i);
                                    e.onCompleted()
                                }
                            })
                        })
                    };
                    ot.subscribe = ot.forEach = function(t, e, i) {
                        var n;
                        if("object" == typeof t) n = t;
                        else n = st(t, e, i);
                        return this._subscribe(n)
                    };
                    ot.toArray = function() {
                        function t(t, e) {
                            var i = t.slice(0);
                            i.push(e);
                            return i
                        }
                        return this.scan([], t).startWith([]).finalValue()
                    };
                    return t
                }();
            ft.start = function(t, e, i) {
                return pt(t, e)()
            };
            var pt = ft.toAsync = function(t, e, i) {
                e || (e = Y);
                return function() {
                    var n = w.call(arguments, 0),
                        r = new Mt;
                    e.schedule(function() {
                        var e;
                        try {
                            e = t.apply(i, n)
                        } catch(t) {
                            r.onError(t);
                            return
                        }
                        r.onNext(e);
                        r.onCompleted()
                    });
                    return r.asObservable()
                }
            };
            ot.observeOn = function(t) {
                var e = this;
                return new Ct(function(i) {
                    return e.subscribe(new ht(t, i))
                })
            };
            ot.subscribeOn = function(t) {
                var e = this;
                return new Ct(function(i) {
                    var n = new j,
                        r = new F;
                    r.setDisposable(n);
                    n.setDisposable(t.schedule(function() {
                        r.setDisposable(new h(t, e.subscribe(i)))
                    }));
                    return r
                })
            };
            ft.create = function(t) {
                return new Ct(function(e) {
                    return L(t(e))
                })
            };
            ft.createWithDisposable = function(t) {
                return new Ct(t)
            };
            var _t = ft.defer = function(t) {
                    return new Ct(function(e) {
                        var i;
                        try {
                            i = t()
                        } catch(t) {
                            return bt(t).subscribe(e)
                        }
                        return i.subscribe(e)
                    })
                },
                mt = ft.empty = function(t) {
                    t || (t = W);
                    return new Ct(function(e) {
                        return t.schedule(function() {
                            e.onCompleted()
                        })
                    })
                },
                gt = ft.fromArray = function(t, e) {
                    e || (e = q);
                    return new Ct(function(i) {
                        var n = 0;
                        return e.scheduleRecursive(function(e) {
                            if(n < t.length) {
                                i.onNext(t[n++]);
                                e()
                            } else i.onCompleted()
                        })
                    })
                };
            ft.generate = function(t, e, i, n, r) {
                r || (r = q);
                return new Ct(function(a) {
                    var s = !0,
                        o = t;
                    return r.scheduleRecursive(function(t) {
                        var r, l;
                        try {
                            if(s) s = !1;
                            else o = i(o);
                            r = e(o);
                            if(r) l = n(o)
                        } catch(t) {
                            a.onError(t);
                            return
                        }
                        if(r) {
                            a.onNext(l);
                            t()
                        } else a.onCompleted()
                    })
                })
            };
            var vt = ft.never = function() {
                return new Ct(function() {
                    return R
                })
            };
            ft.range = function(t, e, i) {
                i || (i = q);
                return new Ct(function(n) {
                    return i.scheduleRecursiveWithState(0, function(i, r) {
                        if(i < e) {
                            n.onNext(t + i);
                            r(i + 1)
                        } else n.onCompleted()
                    })
                })
            };
            ft.repeat = function(t, e, i) {
                i || (i = q);
                if(null == e) e = -1;
                return yt(t, i).repeat(e)
            };
            var yt = ft.returnValue = function(t, e) {
                    e || (e = W);
                    return new Ct(function(i) {
                        return e.schedule(function() {
                            i.onNext(t);
                            i.onCompleted()
                        })
                    })
                },
                bt = ft.throwException = function(t, e) {
                    e || (e = W);
                    return new Ct(function(i) {
                        return e.schedule(function() {
                            i.onError(t)
                        })
                    })
                };
            ft.using = function(t, e) {
                return new Ct(function(i) {
                    var n, r, a = R;
                    try {
                        n = t();
                        if(n) a = n;
                        r = e(n)
                    } catch(t) {
                        return new D(bt(t).subscribe(i), a)
                    }
                    return new D(r.subscribe(i), a)
                })
            };
            ot.amb = function(t) {
                var e = this;
                return new Ct(function(i) {
                    function n() {
                        if(!a) {
                            a = s;
                            c.dispose()
                        }
                    }

                    function r() {
                        if(!a) {
                            a = o;
                            l.dispose()
                        }
                    }
                    var a, s = "L",
                        o = "R",
                        l = new j,
                        c = new j;
                    l.setDisposable(e.subscribe(function(t) {
                        n();
                        if(a === s) i.onNext(t)
                    }, function(t) {
                        n();
                        if(a === s) i.onError(t)
                    }, function() {
                        n();
                        if(a === s) i.onCompleted()
                    }));
                    c.setDisposable(t.subscribe(function(t) {
                        r();
                        if(a === o) i.onNext(t)
                    }, function(t) {
                        r();
                        if(a === o) i.onError(t)
                    }, function() {
                        r();
                        if(a === o) i.onCompleted()
                    }));
                    return new D(l, c)
                })
            };
            ft.amb = function() {
                function t(t, e) {
                    return t.amb(e)
                }
                for(var e = vt(), i = u(arguments, 0), n = 0, r = i.length; n < r; n++) e = t(e, i[n]);
                return e
            };
            ot.catchException = function(t) {
                if("function" == typeof t) return p(this, t);
                else return xt([this, t])
            };
            var xt = ft.catchException = function() {
                var t = u(arguments, 0);
                return rt(t).catchException()
            };
            ot.combineLatest = function() {
                var t = w.call(arguments);
                if(Array.isArray(t[0])) t[0].unshift(this);
                else t.unshift(this);
                return $t.apply(this, t)
            };
            var $t = ft.combineLatest = function() {
                var t = w.call(arguments),
                    e = t.pop();
                if(Array.isArray(t[0])) t = t[0];
                return new Ct(function(i) {
                    function n(t) {
                        var n;
                        o[t] = !0;
                        if(l || (l = o.every(function(t) {
                                return t
                            }))) {
                            try {
                                n = e.apply(null, u)
                            } catch(t) {
                                i.onError(t);
                                return
                            }
                            i.onNext(n)
                        } else if(c.filter(function(e, i) {
                                return i !== t
                            }).every(function(t) {
                                return t
                            })) i.onCompleted()
                    }

                    function r(t) {
                        c[t] = !0;
                        if(c.every(function(t) {
                                return t
                            })) i.onCompleted()
                    }
                    for(var a = function() {
                        return !1
                    }, s = t.length, o = d(s, a), l = !1, c = d(s, a), u = new Array(s), h = new Array(s), f = 0; f < s; f++) ! function(e) {
                        h[e] = new j;
                        h[e].setDisposable(t[e].subscribe(function(t) {
                            u[e] = t;
                            n(e)
                        }, i.onError.bind(i), function() {
                            r(e)
                        }))
                    }(f);
                    return new D(h)
                })
            };
            ot.concat = function() {
                var t = w.call(arguments, 0);
                t.unshift(this);
                return wt.apply(this, t)
            };
            var wt = ft.concat = function() {
                var t = u(arguments, 0);
                return rt(t).concat()
            };
            ot.concatObservable = ot.concatAll = function() {
                return this.merge(1)
            };
            ot.merge = function(t) {
                if("number" != typeof t) return kt(this, t);
                var e = this;
                return new Ct(function(i) {
                    var n = 0,
                        r = new D,
                        a = !1,
                        s = [],
                        o = function(t) {
                            var e = new j;
                            r.add(e);
                            e.setDisposable(t.subscribe(i.onNext.bind(i), i.onError.bind(i), function() {
                                var t;
                                r.remove(e);
                                if(s.length > 0) {
                                    t = s.shift();
                                    o(t)
                                } else {
                                    n--;
                                    if(a && 0 === n) i.onCompleted()
                                }
                            }))
                        };
                    r.add(e.subscribe(function(e) {
                        if(n < t) {
                            n++;
                            o(e)
                        } else s.push(e)
                    }, i.onError.bind(i), function() {
                        a = !0;
                        if(0 === n) i.onCompleted()
                    }));
                    return r
                })
            };
            var kt = ft.merge = function() {
                var t, e;
                if(!arguments[0]) {
                    t = W;
                    e = w.call(arguments, 1)
                } else if(arguments[0].now) {
                    t = arguments[0];
                    e = w.call(arguments, 1)
                } else {
                    t = W;
                    e = w.call(arguments, 0)
                }
                if(Array.isArray(e[0])) e = e[0];
                return gt(e, t).mergeObservable()
            };
            ot.mergeObservable = ot.mergeAll = function() {
                var t = this;
                return new Ct(function(e) {
                    var i = new D,
                        n = !1,
                        r = new j;
                    i.add(r);
                    r.setDisposable(t.subscribe(function(t) {
                        var r = new j;
                        i.add(r);
                        r.setDisposable(t.subscribe(function(t) {
                            e.onNext(t)
                        }, e.onError.bind(e), function() {
                            i.remove(r);
                            if(n && 1 === i.length) e.onCompleted()
                        }))
                    }, e.onError.bind(e), function() {
                        n = !0;
                        if(1 === i.length) e.onCompleted()
                    }));
                    return i
                })
            };
            ot.onErrorResumeNext = function(t) {
                if(!t) throw new Error("Second observable is required");
                return St([this, t])
            };
            var St = ft.onErrorResumeNext = function() {
                var t = u(arguments, 0);
                return new Ct(function(e) {
                    var i = 0,
                        n = new F,
                        r = W.scheduleRecursive(function(r) {
                            var a, s;
                            if(i < t.length) {
                                a = t[i++];
                                s = new j;
                                n.setDisposable(s);
                                s.setDisposable(a.subscribe(e.onNext.bind(e), function() {
                                    r()
                                }, function() {
                                    r()
                                }))
                            } else e.onCompleted()
                        });
                    return new D(n, r)
                })
            };
            ot.skipUntil = function(t) {
                var e = this;
                return new Ct(function(i) {
                    var n = !1,
                        r = new D(e.subscribe(function(t) {
                            if(n) i.onNext(t)
                        }, i.onError.bind(i), function() {
                            if(n) i.onCompleted()
                        })),
                        a = new j;
                    r.add(a);
                    a.setDisposable(t.subscribe(function() {
                        n = !0;
                        a.dispose()
                    }, i.onError.bind(i), function() {
                        a.dispose()
                    }));
                    return r
                })
            };
            ot.switchLatest = function() {
                var t = this;
                return new Ct(function(e) {
                    var i = !1,
                        n = new F,
                        r = !1,
                        a = 0,
                        s = t.subscribe(function(t) {
                            var s = new j,
                                o = ++a;
                            i = !0;
                            n.setDisposable(s);
                            s.setDisposable(t.subscribe(function(t) {
                                if(a === o) e.onNext(t)
                            }, function(t) {
                                if(a === o) e.onError(t)
                            }, function() {
                                if(a === o) {
                                    i = !1;
                                    if(r) e.onCompleted()
                                }
                            }))
                        }, e.onError.bind(e), function() {
                            r = !0;
                            if(!i) e.onCompleted()
                        });
                    return new D(s, n)
                })
            };
            ot.takeUntil = function(t) {
                var e = this;
                return new Ct(function(n) {
                    return new D(e.subscribe(n), t.subscribe(n.onCompleted.bind(n), n.onError.bind(n), i))
                })
            };
            ot.zip = function() {
                if(Array.isArray(arguments[0])) return _.apply(this, arguments);
                var t = this,
                    e = w.call(arguments),
                    i = e.pop();
                e.unshift(t);
                return new Ct(function(n) {
                    function r(t) {
                        o[t] = !0;
                        if(o.every(function(t) {
                                return t
                            })) n.onCompleted()
                    }
                    for(var a = e.length, s = d(a, function() {
                        return []
                    }), o = d(a, function() {
                        return !1
                    }), l = function(e) {
                        var r, a;
                        if(s.every(function(t) {
                                return t.length > 0
                            })) {
                            try {
                                a = s.map(function(t) {
                                    return t.shift()
                                });
                                r = i.apply(t, a)
                            } catch(t) {
                                n.onError(t);
                                return
                            }
                            n.onNext(r)
                        } else if(o.filter(function(t, i) {
                                return i !== e
                            }).every(function(t) {
                                return t
                            })) n.onCompleted()
                    }, c = new Array(a), u = 0; u < a; u++) ! function(t) {
                        c[t] = new j;
                        c[t].setDisposable(e[t].subscribe(function(e) {
                            s[t].push(e);
                            l(t)
                        }, n.onError.bind(n), function() {
                            r(t)
                        }))
                    }(u);
                    return new D(c)
                })
            };
            ft.zip = function(t, e) {
                var i = t[0],
                    n = t.slice(1);
                n.push(e);
                return i.zip.apply(i, n)
            };
            ot.asObservable = function() {
                var t = this;
                return new Ct(function(e) {
                    return t.subscribe(e)
                })
            };
            ot.bufferWithCount = function(t, i) {
                if(i === e) i = t;
                return this.windowWithCount(t, i).selectMany(function(t) {
                    return t.toArray()
                }).where(function(t) {
                    return t.length > 0
                })
            };
            ot.dematerialize = function() {
                var t = this;
                return new Ct(function(e) {
                    return t.subscribe(function(t) {
                        return t.accept(e)
                    }, e.onError.bind(e), e.onCompleted.bind(e))
                })
            };
            ot.distinctUntilChanged = function(t, e) {
                var i = this;
                t || (t = n);
                e || (e = a);
                return new Ct(function(n) {
                    var r, a = !1;
                    return i.subscribe(function(i) {
                        var s, o = !1;
                        try {
                            s = t(i)
                        } catch(t) {
                            n.onError(t);
                            return
                        }
                        if(a) try {
                            o = e(r, s)
                        } catch(t) {
                            n.onError(t);
                            return
                        }
                        if(!a || !o) {
                            a = !0;
                            r = s;
                            n.onNext(i)
                        }
                    }, n.onError.bind(n), n.onCompleted.bind(n))
                })
            };
            ot.doAction = function(t, e, i) {
                var n, r = this;
                if("function" == typeof t) n = t;
                else {
                    n = t.onNext.bind(t);
                    e = t.onError.bind(t);
                    i = t.onCompleted.bind(t)
                }
                return new Ct(function(t) {
                    return r.subscribe(function(e) {
                        try {
                            n(e)
                        } catch(e) {
                            t.onError(e)
                        }
                        t.onNext(e)
                    }, function(i) {
                        if(!e) t.onError(i);
                        else {
                            try {
                                e(i)
                            } catch(e) {
                                t.onError(e)
                            }
                            t.onError(i)
                        }
                    }, function() {
                        if(!i) t.onCompleted();
                        else {
                            try {
                                i()
                            } catch(e) {
                                t.onError(e)
                            }
                            t.onCompleted()
                        }
                    })
                })
            };
            ot.finallyAction = function(t) {
                var e = this;
                return new Ct(function(i) {
                    var n = e.subscribe(i);
                    return L(function() {
                        try {
                            n.dispose()
                        } catch(t) {
                            throw t
                        } finally {
                            t()
                        }
                    })
                })
            };
            ot.ignoreElements = function() {
                var t = this;
                return new Ct(function(e) {
                    return t.subscribe(i, e.onError.bind(e), e.onCompleted.bind(e))
                })
            };
            ot.materialize = function() {
                var t = this;
                return new Ct(function(e) {
                    return t.subscribe(function(t) {
                        e.onNext(J(t))
                    }, function(t) {
                        e.onNext(Z(t));
                        e.onCompleted()
                    }, function() {
                        e.onNext(Q());
                        e.onCompleted()
                    })
                })
            };
            ot.repeat = function(t) {
                return nt(this, t).concat()
            };
            ot.retry = function(t) {
                return nt(this, t).catchException()
            };
            ot.scan = function() {
                var t, e, i = !1;
                if(2 === arguments.length) {
                    t = arguments[0];
                    e = arguments[1];
                    i = !0
                } else e = arguments[0];
                var n = this;
                return _t(function() {
                    var r, a = !1;
                    return n.select(function(n) {
                        if(a) r = e(r, n);
                        else {
                            r = i ? e(t, n) : n;
                            a = !0
                        }
                        return r
                    })
                })
            };
            ot.skipLast = function(t) {
                var e = this;
                return new Ct(function(i) {
                    var n = [];
                    return e.subscribe(function(e) {
                        n.push(e);
                        if(n.length > t) i.onNext(n.shift())
                    }, i.onError.bind(i), i.onCompleted.bind(i))
                })
            };
            ot.startWith = function() {
                var t, e, i = 0;
                if(arguments.length && "now" in Object(arguments[0])) {
                    e = arguments[0];
                    i = 1
                } else e = W;
                t = w.call(arguments, i);
                return rt([gt(t, e), this]).concat()
            };
            ot.takeLast = function(t, e) {
                return this.takeLastBuffer(t).selectMany(function(t) {
                    return gt(t, e)
                })
            };
            ot.takeLastBuffer = function(t) {
                var e = this;
                return new Ct(function(i) {
                    var n = [];
                    return e.subscribe(function(e) {
                        n.push(e);
                        if(n.length > t) n.shift()
                    }, i.onError.bind(i), function() {
                        i.onNext(n);
                        i.onCompleted()
                    })
                })
            };
            ot.windowWithCount = function(t, e) {
                var i = this;
                if(t <= 0) throw new Error(x);
                if(null == e) e = t;
                if(e <= 0) throw new Error(x);
                return new Ct(function(n) {
                    var r = new j,
                        a = new z(r),
                        s = 0,
                        o = [],
                        l = function() {
                            var t = new At;
                            o.push(t);
                            n.onNext(C(t, a))
                        };
                    l();
                    r.setDisposable(i.subscribe(function(i) {
                        for(var n, r = 0, a = o.length; r < a; r++) o[r].onNext(i);
                        var c = s - t + 1;
                        if(c >= 0 && c % e === 0) {
                            n = o.shift();
                            n.onCompleted()
                        }
                        s++;
                        if(s % e === 0) l()
                    }, function(t) {
                        for(; o.length > 0;) o.shift().onError(t);
                        n.onError(t)
                    }, function() {
                        for(; o.length > 0;) o.shift().onCompleted();
                        n.onCompleted()
                    }));
                    return a
                })
            };
            ot.defaultIfEmpty = function(t) {
                var i = this;
                if(t === e) t = null;
                return new Ct(function(e) {
                    var n = !1;
                    return i.subscribe(function(t) {
                        n = !0;
                        e.onNext(t)
                    }, e.onError.bind(e), function() {
                        if(!n) e.onNext(t);
                        e.onCompleted()
                    })
                })
            };
            ot.distinct = function(t, e) {
                var i = this;
                t || (t = n);
                e || (e = o);
                return new Ct(function(n) {
                    var r = {};
                    return i.subscribe(function(i) {
                        var a, s, o, l = !1;
                        try {
                            a = t(i);
                            s = e(a)
                        } catch(t) {
                            n.onError(t);
                            return
                        }
                        for(o in r)
                            if(s === o) {
                                l = !0;
                                break
                            }
                        if(!l) {
                            r[s] = null;
                            n.onNext(i)
                        }
                    }, n.onError.bind(n), n.onCompleted.bind(n))
                })
            };
            ot.groupBy = function(t, e, i) {
                return this.groupByUntil(t, e, function() {
                    return vt()
                }, i)
            };
            ot.groupByUntil = function(t, e, r, a) {
                var s = this;
                e || (e = n);
                a || (a = o);
                return new Ct(function(n) {
                    var o = {},
                        l = new D,
                        c = new z(l);
                    l.add(s.subscribe(function(s) {
                        var u, d, h, f, p, _, m, g, v, y;
                        try {
                            _ = t(s);
                            m = a(_)
                        } catch(t) {
                            for(y in o) o[y].onError(t);
                            n.onError(t);
                            return
                        }
                        f = !1;
                        try {
                            v = o[m];
                            if(!v) {
                                v = new At;
                                o[m] = v;
                                f = !0
                            }
                        } catch(t) {
                            for(y in o) o[y].onError(t);
                            n.onError(t);
                            return
                        }
                        if(f) {
                            p = new Et(_, v, c);
                            d = new Et(_, v);
                            try {
                                u = r(d)
                            } catch(t) {
                                for(y in o) o[y].onError(t);
                                n.onError(t);
                                return
                            }
                            n.onNext(p);
                            g = new j;
                            l.add(g);
                            var b = function() {
                                if(m in o) {
                                    delete o[m];
                                    v.onCompleted()
                                }
                                l.remove(g)
                            };
                            g.setDisposable(u.take(1).subscribe(i, function(t) {
                                for(y in o) o[y].onError(t);
                                n.onError(t)
                            }, function() {
                                b()
                            }))
                        }
                        try {
                            h = e(s)
                        } catch(t) {
                            for(y in o) o[y].onError(t);
                            n.onError(t);
                            return
                        }
                        v.onNext(h)
                    }, function(t) {
                        for(var e in o) o[e].onError(t);
                        n.onError(t)
                    }, function() {
                        for(var t in o) o[t].onCompleted();
                        n.onCompleted()
                    }));
                    return c
                })
            };
            ot.select = function(t, e) {
                var i = this;
                return new Ct(function(n) {
                    var r = 0;
                    return i.subscribe(function(a) {
                        var s;
                        try {
                            s = t.call(e, a, r++, i)
                        } catch(t) {
                            n.onError(t);
                            return
                        }
                        n.onNext(s)
                    }, n.onError.bind(n), n.onCompleted.bind(n))
                })
            };
            ot.map = ot.select;
            ot.selectMany = ot.flatMap = function(t, e) {
                if(e) return this.selectMany(function(i) {
                    return t(i).select(function(t) {
                        return e(i, t)
                    })
                });
                if("function" == typeof t) return m.call(this, t);
                else return m.call(this, function() {
                    return t
                })
            };
            ot.skip = function(t) {
                if(t < 0) throw new Error(x);
                var e = this;
                return new Ct(function(i) {
                    var n = t;
                    return e.subscribe(function(t) {
                        if(n <= 0) i.onNext(t);
                        else n--
                    }, i.onError.bind(i), i.onCompleted.bind(i))
                })
            };
            ot.skipWhile = function(t) {
                var e = this;
                return new Ct(function(i) {
                    var n = 0,
                        r = !1;
                    return e.subscribe(function(e) {
                        if(!r) try {
                            r = !t(e, n++)
                        } catch(t) {
                            i.onError(t);
                            return
                        }
                        if(r) i.onNext(e)
                    }, i.onError.bind(i), i.onCompleted.bind(i))
                })
            };
            ot.take = function(t, e) {
                if(t < 0) throw new Error(x);
                if(0 === t) return mt(e);
                var i = this;
                return new Ct(function(e) {
                    var n = t;
                    return i.subscribe(function(t) {
                        if(n > 0) {
                            n--;
                            e.onNext(t);
                            if(0 === n) e.onCompleted()
                        }
                    }, e.onError.bind(e), e.onCompleted.bind(e))
                })
            };
            ot.takeWhile = function(t) {
                var e = this;
                return new Ct(function(i) {
                    var n = 0,
                        r = !0;
                    return e.subscribe(function(e) {
                        if(r) {
                            try {
                                r = t(e, n++)
                            } catch(t) {
                                i.onError(t);
                                return
                            }
                            if(r) i.onNext(e);
                            else i.onCompleted()
                        }
                    }, i.onError.bind(i), i.onCompleted.bind(i))
                })
            };
            ot.where = function(t, e) {
                var i = this;
                return new Ct(function(n) {
                    var r = 0;
                    return i.subscribe(function(a) {
                        var s;
                        try {
                            s = t.call(e, a, r++, i)
                        } catch(t) {
                            n.onError(t);
                            return
                        }
                        if(s) n.onNext(a)
                    }, n.onError.bind(n), n.onCompleted.bind(n))
                })
            };
            ot.filter = ot.where;
            var Ct = y.Internals.AnonymousObservable = function(t) {
                    function e(i) {
                        function n(t) {
                            var e = new Tt(t);
                            if(q.scheduleRequired()) q.schedule(function() {
                                try {
                                    e.disposable(i(e))
                                } catch(t) {
                                    if(!e.fail(t)) throw t
                                }
                            });
                            else try {
                                e.disposable(i(e))
                            } catch(t) {
                                if(!e.fail(t)) throw t
                            }
                            return e
                        }
                        if(!(this instanceof e)) return new e(i);
                        t.call(this, n)
                    }
                    k(e, t);
                    return e
                }(ft),
                Tt = function(t) {
                    function e(e) {
                        t.call(this);
                        this.observer = e;
                        this.m = new j
                    }
                    k(e, t);
                    var i = e.prototype;
                    i.next = function(t) {
                        var e = !1;
                        try {
                            this.observer.onNext(t);
                            e = !0
                        } catch(t) {
                            throw t
                        } finally {
                            if(!e) this.dispose()
                        }
                    };
                    i.error = function(t) {
                        try {
                            this.observer.onError(t)
                        } catch(t) {
                            throw t
                        } finally {
                            this.dispose()
                        }
                    };
                    i.completed = function() {
                        try {
                            this.observer.onCompleted()
                        } catch(t) {
                            throw t
                        } finally {
                            this.dispose()
                        }
                    };
                    i.disposable = function(t) {
                        return this.m.disposable(t)
                    };
                    i.dispose = function() {
                        t.prototype.dispose.call(this);
                        this.m.dispose()
                    };
                    return e
                }(lt),
                Et = function(t) {
                    function e(t) {
                        return this.underlyingObservable.subscribe(t)
                    }

                    function i(i, n, r) {
                        t.call(this, e);
                        this.key = i;
                        this.underlyingObservable = !r ? n : new Ct(function(t) {
                            return new D(r.getDisposable(), n.subscribe(t))
                        })
                    }
                    k(i, t);
                    return i
                }(ft),
                It = function(t, e) {
                    this.subject = t;
                    this.observer = e
                };
            It.prototype.dispose = function() {
                if(!this.subject.isDisposed && null !== this.observer) {
                    var t = this.subject.observers.indexOf(this.observer);
                    this.subject.observers.splice(t, 1);
                    this.observer = null
                }
            };
            var At = y.Subject = function(t) {
                    function e(t) {
                        c.call(this);
                        if(!this.isStopped) {
                            this.observers.push(t);
                            return new It(this, t)
                        }
                        if(this.exception) {
                            t.onError(this.exception);
                            return R
                        }
                        t.onCompleted();
                        return R
                    }

                    function i() {
                        t.call(this, e);
                        this.isDisposed = !1, this.isStopped = !1, this.observers = []
                    }
                    k(i, t);
                    S(i.prototype, at, {
                        hasObservers: function() {
                            return this.observers.length > 0
                        },
                        onCompleted: function() {
                            c.call(this);
                            if(!this.isStopped) {
                                var t = this.observers.slice(0);
                                this.isStopped = !0;
                                for(var e = 0, i = t.length; e < i; e++) t[e].onCompleted();
                                this.observers = []
                            }
                        },
                        onError: function(t) {
                            c.call(this);
                            if(!this.isStopped) {
                                var e = this.observers.slice(0);
                                this.isStopped = !0;
                                this.exception = t;
                                for(var i = 0, n = e.length; i < n; i++) e[i].onError(t);
                                this.observers = []
                            }
                        },
                        onNext: function(t) {
                            c.call(this);
                            if(!this.isStopped)
                                for(var e = this.observers.slice(0), i = 0, n = e.length; i < n; i++) e[i].onNext(t)
                        },
                        dispose: function() {
                            this.isDisposed = !0;
                            this.observers = null
                        }
                    });
                    i.create = function(t, e) {
                        return new Dt(t, e)
                    };
                    return i
                }(ft),
                Mt = y.AsyncSubject = function(t) {
                    function e(t) {
                        c.call(this);
                        if(!this.isStopped) {
                            this.observers.push(t);
                            return new It(this, t)
                        }
                        var e = this.exception,
                            i = this.hasValue,
                            n = this.value;
                        if(e) t.onError(e);
                        else if(i) {
                            t.onNext(n);
                            t.onCompleted()
                        } else t.onCompleted();
                        return R
                    }

                    function i() {
                        t.call(this, e);
                        this.isDisposed = !1, this.isStopped = !1, this.value = null, this.hasValue = !1, this.observers = [], this.exception = null
                    }
                    k(i, t);
                    S(i.prototype, at, {
                        hasObservers: function() {
                            return this.observers.length > 0
                        },
                        onCompleted: function() {
                            var t, e, i;
                            c.call(this);
                            if(!this.isStopped) {
                                var n = this.observers.slice(0);
                                this.isStopped = !0;
                                var r = this.value,
                                    a = this.hasValue;
                                if(a)
                                    for(e = 0, i = n.length; e < i; e++) {
                                        t = n[e];
                                        t.onNext(r);
                                        t.onCompleted()
                                    } else
                                    for(e = 0, i = n.length; e < i; e++) n[e].onCompleted();
                                this.observers = []
                            }
                        },
                        onError: function(t) {
                            c.call(this);
                            if(!this.isStopped) {
                                var e = this.observers.slice(0);
                                this.isStopped = !0;
                                this.exception = t;
                                for(var i = 0, n = e.length; i < n; i++) e[i].onError(t);
                                this.observers = []
                            }
                        },
                        onNext: function(t) {
                            c.call(this);
                            if(!this.isStopped) {
                                this.value = t;
                                this.hasValue = !0
                            }
                        },
                        dispose: function() {
                            this.isDisposed = !0;
                            this.observers = null;
                            this.exception = null;
                            this.value = null
                        }
                    });
                    return i
                }(ft),
                Dt = function(t) {
                    function e(t) {
                        return this.observable.subscribe(t)
                    }

                    function i(i, n) {
                        t.call(this, e);
                        this.observer = i;
                        this.observable = n
                    }
                    k(i, t);
                    S(i.prototype, at, {
                        onCompleted: function() {
                            this.observer.onCompleted()
                        },
                        onError: function(t) {
                            this.observer.onError(t)
                        },
                        onNext: function(t) {
                            this.observer.onNext(t)
                        }
                    });
                    return i
                }(ft);
            if("function" == typeof define && "object" == typeof define.amd && define.amd) {
                t.Rx = y;
                return define(function() {
                    return y
                })
            } else if(g)
                if("object" == typeof module && module && module.exports == g) module.exports = y;
                else g = y;
            else t.Rx = y
        }(this)
    };
    e["/rx/rx.helper.js"] = function(t, e, i) {
        ! function(e, i) {
            var n = "object" == typeof exports && exports && ("object" == typeof e && e && e == e.global && (window = e), exports);
            if("function" == typeof define && define.amd) define(["rx", "exports"], function(t, n) {
                e.Rx = i(e, n, t);
                return e.Rx
            });
            else if("object" == typeof module && module && module.exports == n) {
                var r = i(e, module.exports, t("./rx"));
                module.exports = r
            } else e.Rx = i(e, {}, e.Rx)
        }(this, function(t, e, i, n) {
            var r = i.Observable;
            r.prototype, r.createWithDisposable, i.Disposable.create, i.CompositeDisposable, i.RefCountDisposable, i.AsyncSubject;
            r.prototype.then = function(t, e) {
                return this.select(t).switchLatest()
            };
            return i
        })
    };
    ! function() {
        function i(t) {
            var e = t.split("/");
            e.pop();
            return e.join("/")
        }

        function n() {
            return a(Array.prototype.join.call(arguments, "/"))
        }

        function r(t, e) {
            for(var i, n = [], r = 0, a = t.length - 1; r <= a; r++) {
                var s = t[r];
                if("" !== s || 0 === r || r === a || e)
                    if("." !== s || void 0 === i)
                        if(1 !== n.length || "" !== n[0] || "." !== s && ".." !== s)
                            if(".." === s && n.length && ".." !== i && "." !== i && void 0 !== i && ("" !== i || e)) {
                                n.pop();
                                i = n.slice(-1)[0]
                            } else {
                                if("." === i) n.pop();
                                n.push(s);
                                i = s
                            }
                        else;
                    else;
                else;
            }
            return n
        }

        function a(t, e) {
            return r(t.split("/"), e).join("/")
        }

        function s(t) {
            return e[t]
        }

        function o(t, e) {
            var r = t + ".js";
            if(void 0 !== s(r)) return r;
            var a = i(e);
            r = n(a, r);
            return r
        }

        function l(t, e) {
            var i = o(t, f);
            if(null != d[i]) return d[i];
            var n = s(i);
            if(null == n) throw "Unable to find module: " + i;
            var r = h,
                a = f;
            f = i;
            n.apply(e, [l, c, u]);
            d[i] = h;
            var p = h;
            h = r;
            f = a;
            return p
        }

        function c(t, e) {
            return l(t, e)
        }

        function u(t) {
            h = t
        }
        var d = {},
            h = {},
            f = "/";
        t = l("/rx/all")
    }();
    define = n;
    return t
});
I$(566, function(t, e) {
    var i, n = {},
        r = {};
    if(!t) console.log("!!!!!!!!!!!!!!!! colortraits not be provided. !!!!!!!!!!!!!!");
    r["/lib/colortraits.js"] = t;
    if(!e) console.log("!!!!!!!!!!!!!!!! rx not be provided. !!!!!!!!!!!!!!!!!!!!");
    r["/thirdlib/rx/all.js"] = e;
    n["/actor.js"] = function(t, e, i) {
        var n = t("./lib/colortraits").Klass,
            r = (t("./lib/colortraits").Trait, t("./lib/colortraits").READONLY),
            a = t("animate").AnimatorTrait,
            s = t("./lib/transformable").TransformableTrait,
            o = t("./lib/geometry"),
            l = t("actortraits").InteractorTrait,
            c = t("./lib/timestamp").globalTimeStamp,
            u = t("./lib/eventstream"),
            d = n.extend({
                initialize: function(t) {
                    if(null != t && void 0 != t.interactable) this._t.setinteractable(t.interactable);
                    else this._t.setinteractable(!0);
                    if(null != t && void 0 != t.hidden) this._t.set_hidden(t.hidden);
                    else this._t.set_hidden(!1);
                    this.subTraits(3).__init();
                    var e = this.createEventStream("system"),
                        i = this;
                    this._t.setsystemEventStream(e.select(function(t) {
                        if("active" == t.type) i.setownerScene(t.scene);
                        else if("deactive" == t.type) i.setownerScene(void 0);
                        return t
                    }));
                    this.subTraits(1).__init(c);
                    this.subTraits(0).__init();
                    this.subTraits(2).__init()
                },
                update: function(t, e) {
                    this.subTraits(0).__update(t, e, this);
                    return this
                },
                bbox: function() {
                    return o.rectApplyMatrixToBoundRect(o.rectMake(0, 0, 0, 0), this.matrix())
                },
                worldX: function() {
                    return this.matrix().tx
                },
                worldY: function() {
                    return this.matrix().ty
                },
                worldZ: function() {
                    return this.matrix().tz
                },
                subscribe: function(t, e) {
                    if("system" == t) return this._t.systemEventStream().subscribe(e);
                    else return this._t.subject()[t].observable.subscribe(e)
                },
                emitDisplayObjects: function(t) {
                    return t
                },
                emitInteractiveObjects: function(t) {
                    return t
                },
                hookActorVisible: function(t) {
                    this.hook(this.subTraits(1), "dirtyStamp", t, "a");
                    this.hook(this.subTraits(1), "dirtyStamp", t, "b");
                    return this
                },
                unhookActorVisible: function(t) {
                    this.unhook(this.subTraits(1), "dirtyStamp", t, "a");
                    this.unhook(this.subTraits(1), "dirtyStamp", t, "b");
                    return this
                },
                applyEffect: function(t) {
                    if(this._t.effect() !== t) {
                        this._t.seteffect(t);
                        this.notify("system", {
                            type: "effectChanged",
                            effect: t
                        })
                    }
                },
                applyClip: function(t) {
                    if(this._t.clipper() !== t) {
                        this._t.setclipper(t);
                        this.notify("system", {
                            type: "clipperChanged",
                            clipper: t
                        })
                    }
                },
                hidden: function() {
                    return this._t._hidden()
                },
                sethidden: function(t) {
                    this._t.set_hidden(t)
                }
            }, ["_hidden", "interactable", "systemEventStream", "ownerScene", ["subject", u.grant("subject")], r("effect"), r("clipper")], [a, s, l, u]);
        i(d)
    };
    n["/lib/timestamp.js"] = function(t, e, i) {
        var n = t("./colortraits").Klass,
            r = t("./colortraits").Trait,
            a = r.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    t = t || {};
                    if(void 0 != t.startTime) this._startTime = t.startTime;
                    else this._startTime = 0;
                    this._curTime = this._startTime;
                    if(void 0 != t.step) this._step = t.step;
                    else this._step = 1;
                    return this
                },
                stepForward: function(t) {
                    if(void 0 != t) this._curTime = this._curTime + t;
                    else this._curTime = this._curTime + this._step
                },
                adjust: function(t) {
                    this._curTime = t
                },
                now: function() {
                    return this._curTime
                }
            }),
            s = n.extend({}, [], [a]),
            o = s.create();
        i({
            TimeStamper: s,
            globalTimeStamp: o
        })
    };
    n["/sprites/polygon.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = n.READONLY,
            a = n.CUSTOM_SETTER,
            s = t("./sprite"),
            o = t("../gprims/polygongprim").PolygonTrait,
            l = s.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this.subTraits(0).__init(t)
                }
            }, [
                [r("type"), o.grant("type")],
                [a("vertexes"), o.grant("vertexes")],
                [a("strokeStyle"), o.grant("strokeStyle")],
                [a("fillStyle"), o.grant("fillStyle")],
                [a("shadowColor"), o.grant("shadowColor")]
            ].concat(o.grantMany(["fillFlag", "strokeFlag", "id", "tag", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineDash", "strokeScaleInvariant"])), [o]);
        i(l)
    };
    n["/sprites/diamond.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = (n.READONLY, n.CUSTOM_SETTER),
            a = t("./polygon"),
            s = a.extend({
                initialize: function(t) {
                    var e = Object.create(t ? t : null),
                        i = e.width = e.width ? e.width : 8,
                        n = e.height = e.height ? e.height : 8;
                    this._t.setwidth(i);
                    this._t.setheight(n);
                    e.vertexes = [{
                        x: i / 2,
                        y: 0
                    }, {
                        x: i,
                        y: n / 2
                    }, {
                        x: i / 2,
                        y: n
                    }, {
                        x: 0,
                        y: n / 2
                    }];
                    this.execProto("initialize", e)
                },
                setwidth: function(t) {
                    this._t.setwidth(t);
                    var e = this._t.height();
                    this.setvertexes([{
                        x: t / 2,
                        y: 0
                    }, {
                        x: t,
                        y: e / 2
                    }, {
                        x: t / 2,
                        y: e
                    }, {
                        x: 0,
                        y: e / 2
                    }])
                },
                setheight: function(t) {
                    this._t.setheight(t);
                    var e = this._t.width();
                    this.setvertexes([{
                        x: e / 2,
                        y: 0
                    }, {
                        x: e,
                        y: t / 2
                    }, {
                        x: e / 2,
                        y: t
                    }, {
                        x: 0,
                        y: t / 2
                    }])
                }
            }, [r("width"), r("height")]);
        i(s)
    };
    n["/clip.js"] = function(t, e, i) {
        var n = t("./lib/colortraits").Klass,
            r = (t("./lib/colortraits").Trait, t("./lib/debug"), t("./lib/util").arrayForEach, n.extend({
                initialize: function(t) {
                    this._t.setgprim(t)
                },
                inside: function(t, e) {
                    var i = t.getPstnRelativeToMatrix(e, this._t.owner().matrix()),
                        n = this._t.gprim().inside(i.x, i.y);
                    if(this._t.intersector()) n = n && this._t.intersector().inside(t, e);
                    return n
                }
            }, ["intersector", "gprim", "owner"]));
        i({
            Clipper: r
        })
    };
    n["/gprims/arcgprim.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = t("./shaptrait").ShapTrait,
            a = t("../lib/geometry"),
            s = n.Klass,
            o = n.READONLY,
            l = n.CUSTOM_SETTER,
            c = {
                radius: 10,
                startAngle: 0,
                endAngle: Math.PI,
                anticlockwise: !1,
                strokeStyle: {
                    r: 0,
                    g: 0,
                    b: 0
                }
            },
            u = r.extend({
                __init: function(t) {
                    this.subTraits(0).__init(t);
                    if(void 0 == t || void 0 == t.strokeStyle) this.setstrokeStyle(c.strokeStyle);
                    if(void 0 == t) t = c;
                    this._t.setradius(t.radius);
                    this._t.setstartAngle(t.startAngle);
                    this._t.setendAngle(t.endAngle);
                    this._t.setanticlockwise(void 0 == t.anticlockwise ? !1 : t.anticlockwise);
                    this._t.settype("arc");
                    this._t.setlength(void 0)
                },
                setradius: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setradius(t);
                    this._t.setlength(void 0);
                    return this
                },
                setstartAngle: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setstartAngle(t);
                    this._t.setlength(void 0);
                    return this
                },
                setendAngle: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setendAngle(t);
                    this._t.setlength(void 0);
                    return this
                },
                setanticlockwise: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setanticlockwise(t);
                    this._t.setlength(void 0);
                    return this
                },
                localBbox: function() {
                    var t = this._t.anticlockwise(),
                        e = this._t.startAngle(),
                        i = this._t.endAngle(),
                        n = this._t.radius();
                    if(i < e) i += 2 * Math.PI;
                    if(t) {
                        var r = e;
                        e = i;
                        i = r + 2 * Math.PI
                    }
                    var s = [];
                    s.push({
                        x: n * Math.cos(e),
                        y: n * Math.sin(e)
                    });
                    s.push({
                        x: n * Math.cos(i),
                        y: n * Math.sin(i)
                    });
                    for(var o = Math.floor(e / (2 * Math.PI)), l = o * Math.PI * 2; l <= i;) {
                        if(l >= e) s.push({
                            x: n * Math.cos(l),
                            y: n * Math.sin(l)
                        });
                        l += Math.PI / 2
                    }
                    for(var c, u, d, h, f = 0, p = s.length; f < p; f++) {
                        var _ = s[f];
                        if(_.x < c || void 0 == c) c = _.x;
                        if(_.x > u || void 0 == u) u = _.x;
                        if(_.y < d || void 0 == d) d = _.y;
                        if(_.y > h || void 0 == h) h = _.y
                    }
                    var m = this._t.lineWidth();
                    return a.rectMake(c - m / 2, d - m / 2, u - c + m, h - d + m)
                },
                localInside: function(t, e) {
                    var i = this._t.startAngle(),
                        n = this._t.endAngle(),
                        r = this._t.radius(),
                        s = this._t.lineWidth(),
                        o = this._t.anticlockwise(),
                        l = Math.sqrt(t * t + e * e),
                        c = r - s / 2 <= l && l <= r + s / 2;
                    if(!c) return !1;
                    if(2 * Math.PI <= n - i || n - i <= -2 * Math.PI) return !0;
                    if(n < i) n += 2 * Math.PI;
                    if(o) {
                        var u = i;
                        i = n;
                        n = u + 2 * Math.PI
                    }
                    var d = r * Math.cos(i),
                        h = r * Math.sin(i),
                        f = a.getVectorAngle({
                                x: d,
                                y: h
                            }, {
                                x: t,
                                y: e
                            }) + i;
                    return f >= i && f <= n
                },
                localHook: function(t) {
                    this.hookMany(this._t, ["strokeFlag", "strokeScaleInvariant", "radius", "startAngle", "endAngle", "anticlockwise", "strokeStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineWidth", "lineCap", "lineDash", "anchorPoint"], t, "a")
                },
                unlocalHook: function(t) {
                    this.unhookMany(this._t, ["strokeFlag", "strokeScaleInvariant", "radius", "startAngle", "endAngle", "anticlockwise", "strokeStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineWidth", "lineCap", "lineDash", "anchorPoint"], t, "a")
                },
                length: function() {
                    var t = this._t.length();
                    if(void 0 == t) {
                        var e = this._t.radius(),
                            i = this._t.__detaAngle(this._t.startAngle(), this._t.endAngle(), this._t.anticlockwise());
                        t = 2 * Math.PI * e * i / (2 * Math.PI);
                        this._t.setlength(t)
                    }
                    return t
                },
                pointAtPercent: function(t) {
                    var e = this.startAngle(),
                        i = this.endAngle(),
                        n = this.radius(),
                        r = this.anticlockwise();
                    if(t <= 0) return {
                        x: n * Math.cos(e),
                        y: n * Math.sin(e)
                    };
                    if(t >= 1) return {
                        x: n * Math.cos(i),
                        y: n * Math.sin(i)
                    };
                    var a, s = (this.length(), this._t.__detaAngle(e, i, r)),
                        o = t * s;
                    if(r) a = e - o;
                    else a = e + o;
                    return {
                        x: n * Math.cos(a),
                        y: n * Math.sin(a)
                    }
                },
                percentAtLength: function(t) {
                    var e = this._t.length();
                    if(t < 0) return 0;
                    if(e < t) return 1;
                    else return t / e
                },
                __detaAngle: function(t, e, i) {
                    t = (t + 2 * Math.PI) % (2 * Math.PI);
                    e = (e + 2 * Math.PI) % (2 * Math.PI);
                    if(i) return 2 * Math.PI - (e - t);
                    else return e - t
                }
            }, ["radius", "startAngle", "endAngle", "anticlockwise", "length"].concat(r.grantMany(["strokeFlag", "strokeScaleInvariant", "cache", "type", "id", "tag", "strokeStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineWidth", "lineCap", "lineDash", "anchorPoint"]))),
            d = s.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t)
                }
            }, [
                [o("type"), u.grant("type")],
                [l("radius"), u.grant("radius")],
                [l("startAngle"), u.grant("startAngle")],
                [l("endAngle"), u.grant("endAngle")],
                [l("anticlockwise"), u.grant("anticlockwise")],
                [l("lineWidth"), u.grant("lineWidth")],
                [l("strokeStyle"), u.grant("strokeStyle")],
                [l("shadowColor"), u.grant("shadowColor")]
            ].concat(u.grantMany(["strokeFlag", "strokeScaleInvariant", "id", "tag", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineCap", "lineDash"])), [u]);
        i({
            ArcKlass: d,
            ArcTrait: u
        })
    };
    n["/sprites/line.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = n.READONLY,
            a = n.CUSTOM_SETTER,
            s = t("./sprite"),
            o = t("../gprims/linegprim").LineTrait,
            l = s.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this.subTraits(0).__init(t);
                    this.setfixBlur(null == t ? null : t.fixBlur)
                }
            }, [
                [r("type"), o.grant("type")], "fixBlur", [a("vertexes"), o.grant("vertexes")],
                [a("lineWidth"), o.grant("lineWidth")],
                [a("strokeStyle"), o.grant("strokeStyle")],
                [a("shadowColor"), o.grant("shadowColor")]
            ].concat(o.grantMany(["strokeFlag", "id", "tag", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineCap", "lineJoin", "miterLimit", "lineDash", "tolerance", "strokeScaleInvariant"])), [o]);
        i(l)
    };
    n["/gprims/clipgprim.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = t("./gprim").GPrimTrait,
            a = t("../lib/debug"),
            s = t("../lib/geometry"),
            o = n.Klass,
            l = n.READONLY,
            c = n.CUSTOM_SETTER,
            u = {
                clipx: 0,
                clipy: 0,
                clipw: 0,
                cliph: 0
            },
            d = r.extend({
                __init: function(t) {
                    this.subTraits(0).__init(t);
                    if(void 0 == t) t = u;
                    this._t.setgprim(void 0 == t.gprim ? a.error("CilpGPrim constructor: param error") : t.gprim);
                    this._t.setclipx(void 0 == t.clipx ? 0 : t.clipx);
                    this._t.setclipy(void 0 == t.clipy ? 0 : t.clipy);
                    this._t.setclipw(void 0 == t.clipw ? 0 : t.clipw);
                    this._t.setcliph(void 0 == t.cliph ? 0 : t.cliph);
                    this._t.settype("clip")
                },
                setclipw: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setclipw(t);
                    return this
                },
                setcliph: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setcliph(t);
                    return this
                },
                localBbox: function() {
                    return s.rectMake(0, 0, this._t.clipw(), this._t.cliph())
                },
                localInside: function(t, e) {
                    return 0 <= t && t <= this._t.clipw() && 0 <= e && e <= this._t.cliph() && this._t.gprim().inside(t + this._t.clipx(), e + this._t.clipy())
                },
                localHook: function(t) {
                    this.hookMany(this._t, ["gprim", "clipx", "clipy", "clipw", "cliph", "anchorPoint"], t, "a");
                    this._t.gprim().localHook(t)
                },
                unlocalHook: function(t) {
                    this.unhookMany(this._t, ["gprim", "clipx", "clipy", "clipw", "cliph"], t, "a");
                    this._t.gprim().unlocalHook()
                }
            }, ["gprim", "clipx", "clipy", "clipw", "cliph"].concat(r.grantAll())),
            h = o.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t)
                }
            }, [
                [l("type"), d.grant("type")],
                [c("clipw"), d.grant("clipw")],
                [c("cliph"), d.grant("cliph")]
            ].concat(d.grantMany(["id", "tag", "gprim", "clipx", "clipy"])), [d]);
        i({
            ClipTrait: d,
            ClipKlass: h
        })
    };
    n["/gprims/multilinetextgprim.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = (t("../lib/helper"), t("./compositegprim").CompositeTrait),
            a = (t("../lib/geometry"),
                t("./textgprim").TextKlass),
            s = (t("../lib/debug").assert, n.Klass),
            o = n.READONLY,
            l = n.CUSTOM_SETTER,
            c = {
                texts: ["Hello Colorbox!"],
                styles: [{
                    lineSpacing: 0,
                    align: "left",
                    font: {
                        style: "normal",
                        weight: 400,
                        size: 16,
                        family: "Arial"
                    }
                }]
            },
            u = r.extend({
                __init: function(t) {
                    this.subTraits(0).__init(t);
                    if(void 0 == t) t = c;
                    this._t.settexts(void 0 == t.texts ? "" : t.texts);
                    this._t.setstyles(void 0 == t.styles ? [{
                        font: {
                            style: "normal",
                            weight: 400,
                            size: 16,
                            family: "Arial"
                        }
                    }] : t.styles);
                    this._t.settype("multilinetext");
                    this._t.__updateListLines()
                },
                settext: function(t) {
                    this.settexts([t])
                },
                settexts: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.settexts(t);
                    this._t.__updateListLines();
                    return this
                },
                localHook: function(t) {
                    this.hookMany(this._t, ["styles", "strokeStyle", "strokeFlag", "strokeScaleInvariant", "fillFlag", "texts", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "anchorPoint"], t, "a")
                },
                unlocalHook: function(t) {
                    this.unhookMany(this._t, ["styles", "strokeStyle", "strokeFlag", "strokeScaleInvariant", "fillFlag", "texts", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "anchorPoint"], t, "a")
                },
                __updateListLines: function() {
                    var t = this._t.texts(),
                        e = [],
                        i = this._t.styles();
                    if("function" == typeof i) i = i(this.dynamicProperty("data"), this.dynamicProperty("index"));
                    for(var n = i.length, r = void 0 == i[0].font ? c.styles[0].font : i[0].font, s = i[0].fillStyle, o = i[0].strokeStyle, l = i[0].align, u = 0, d = 0, h = 0, f = void 0 == i[0].lineSpacing ? c.styles[0].lineSpacing : i[0].lineSpacing, p = this.gprims(), _ = 0, m = t.length; _ < m; _++) {
                        var g;
                        if(p.length > _) {
                            g = p[_];
                            g.setfont(r);
                            g.settext(t[_]);
                            g.sety(h);
                            g.setx(u);
                            g.setfillStyle(s);
                            g.setstrokeStyle(o)
                        } else g = a.create({
                            font: r,
                            text: t[_],
                            y: h,
                            x: u,
                            fillStyle: s,
                            strokeStyle: o
                        });
                        e.push(g);
                        h += r.size + f;
                        if(_ + 1 < n) {
                            var v = i[_ + 1];
                            r = void 0 !== v.font ? v.font : r;
                            s = void 0 !== v.fillStyle ? v.fillStyle : s;
                            o = void 0 !== v.strokeStyle ? v.strokeStyle : o;
                            f = void 0 !== v.lineSpacing ? v.lineSpacing : f
                        }
                        var y = g.bbox().width;
                        if(d < y) d = y
                    }
                    for(var _ = 0, m = t.length; _ < m; _++) {
                        var b = e[_],
                            y = b.bbox().width;
                        if("center" == l) b.setx((d - y) / 2);
                        else if("right" == l) b.setx(d - y);
                        if(_ + 1 < n && void 0 !== i[_ + 1].align) l = i[_ + 1].align
                    }
                    this.setgprims(e)
                },
                setlineStyle: function(t, e) {
                    this._t.cache().bbox = void 0;
                    var i = this._t.styles();
                    if(t < i.length)
                        for(var n in e) i[t][n] = e[n];
                    else if(t = i.length) i.push(e);
                    else {
                        for(var r = i.length, a = r - 1; r < t; ++r) i.push(i[a]);
                        i.push(e)
                    }
                    this._t.setstyles(i);
                    this._t.__updateListLines();
                    return this
                },
                setstyles: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setstyles(t);
                    this._t.__updateListLines();
                    return this
                }
            }, ["texts", "styles"].concat(r.grantMany(["gprims", "strokeStyle", "strokeFlag", "strokeScaleInvariant", "fillFlag", "cache", "type", "id", "tag", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "anchorPoint"]))),
            d = s.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t)
                }
            }, [
                [o("type"), u.grant("type")],
                [l("texts"), u.grant("texts")],
                [l("gprims"), u.grant("gprims")],
                [l("styles"), u.grant("styles")],
                [l("strokeStyle"), u.grant("strokeStyle")],
                [l("fillStyle"), u.grant("fillStyle")],
                [l("shadowColor"), u.grant("shadowColor")]
            ].concat(u.grantMany(["strokeFlag", "strokeScaleInvariant", "fillFlag", "id", "tag", "shadowBlur", "shadowOffsetX", "shadowOffsetY"])), [u]);
        i({
            MultilineTextTrait: u,
            MultilineTextKlass: d
        })
    };
    n["/gprims/annulusgprim.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = t("./shaptrait").ShapTrait,
            a = t("../lib/geometry"),
            s = n.Klass,
            o = n.READONLY,
            l = n.CUSTOM_SETTER,
            c = {
                innerradius: 0,
                outerradius: 10,
                startAngle: 0,
                endAngle: 2 * Math.PI,
                anticlockwise: !1
            },
            u = r.extend({
                __init: function(t) {
                    this.subTraits(0).__init(t);
                    if(void 0 == t) t = c;
                    this._t.setinnerradius(void 0 == t.innerradius ? 0 : t.innerradius);
                    this._t.setouterradius(t.outerradius);
                    this._t.setstartAngle(t.startAngle);
                    this._t.setendAngle(t.endAngle);
                    this._t.setanticlockwise(void 0 == t.anticlockwise ? !1 : t.anticlockwise);
                    this._t.settype("annulus");
                    this._t.setlength(void 0)
                },
                setinnerradius: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setinnerradius(t);
                    this._t.setlength(void 0);
                    return this
                },
                setouterradius: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setouterradius(t);
                    this._t.setlength(void 0);
                    return this
                },
                setstartAngle: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setstartAngle(t);
                    this._t.setlength(void 0);
                    return this
                },
                setendAngle: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setendAngle(t);
                    this._t.setlength(void 0);
                    return this
                },
                setanticlockwise: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setanticlockwise(t);
                    this._t.setlength(void 0);
                    return this
                },
                localBbox: function() {
                    var t = this._t.anticlockwise(),
                        e = this._t.startAngle(),
                        i = this._t.endAngle(),
                        n = this._t.innerradius(),
                        r = this._t.outerradius();
                    if(i < e) i += 2 * Math.PI;
                    if(t) {
                        var s = e;
                        e = i;
                        i = s + 2 * Math.PI
                    }
                    var o = [];
                    o.push({
                        x: n * Math.cos(e),
                        y: n * Math.sin(e)
                    });
                    o.push({
                        x: n * Math.cos(i),
                        y: n * Math.sin(i)
                    });
                    o.push({
                        x: r * Math.cos(e),
                        y: r * Math.sin(e)
                    });
                    o.push({
                        x: r * Math.cos(i),
                        y: r * Math.sin(i)
                    });
                    for(var l = Math.floor(e / (2 * Math.PI)), c = l * Math.PI * 2; c <= i;) {
                        if(c >= e) o.push({
                            x: r * Math.cos(c),
                            y: r * Math.sin(c)
                        });
                        c += Math.PI / 2
                    }
                    for(var u, d, h, f, p = 0, _ = o.length; p < _; p++) {
                        var m = o[p];
                        if(m.x < u || void 0 == u) u = m.x;
                        if(m.x > d || void 0 == d) d = m.x;
                        if(m.y < h || void 0 == h) h = m.y;
                        if(m.y > f || void 0 == f) f = m.y
                    }
                    return a.rectMake(u, h, d - u + 1, f - h + 1)
                },
                localInside: function(t, e) {
                    var i = this._t.startAngle(),
                        n = this._t.endAngle(),
                        r = this._t.innerradius(),
                        s = this._t.outerradius(),
                        o = this._t.anticlockwise(),
                        l = Math.sqrt(t * t + e * e),
                        c = l >= r && l <= s;
                    if(!c) return !1;
                    if(2 * Math.PI <= n - i || n - i <= -2 * Math.PI) return !0;
                    if(n < i) n += 2 * Math.PI;
                    if(o) {
                        var u = i;
                        i = n;
                        n = u + 2 * Math.PI
                    }
                    var d = Math.cos(i),
                        h = Math.sin(i),
                        f = a.getVectorAngle({
                                x: d,
                                y: h
                            }, {
                                x: t,
                                y: e
                            }) + i;
                    return f >= i && f <= n
                },
                localHook: function(t) {
                    this.hookMany(this._t, ["innerradius", "outerradius", "startAngle", "endAngle", "anticlockwise", "strokeFlag", "strokeScaleInvariant", "strokeStyle", "fillFlag", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineDash", "anchorPoint"], t, "a")
                },
                unlocalHook: function(t) {
                    this.unhookMany(this._t, ["innerradius", "outerradius", "startAngle", "endAngle", "anticlockwise", "strokeFlag", "strokeScaleInvariant", "strokeStyle", "fillFlag", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineDash", "anchorPoint"], t, "a")
                },
                length: function() {
                    var t = this._t.length();
                    if(void 0 == t) {
                        var e = this._t.outerradius(),
                            i = this._t.innerradius();
                        t = 0;
                        t += 2 * (e - i);
                        var n = this._t.__detaAngle(this._t.startAngle(), this._t.endAngle(), this._t.anticlockwise());
                        t += 2 * Math.PI * e * n / (2 * Math.PI) + 2 * Math.PI * i * n / (2 * Math.PI);
                        this._t.setlength(t)
                    }
                    return t
                },
                pointAtPercent: function(t) {
                    var e = this.startAngle(),
                        i = this.endAngle(),
                        n = this.innerradius(),
                        r = this.outerradius(),
                        a = this.anticlockwise();
                    if(t <= 0 || t >= 1) return {
                        x: n * Math.cos(e),
                        y: n * Math.sin(e)
                    };
                    var s, o, l, c = this.length(),
                        u = r - n,
                        d = this._t.__detaAngle(e, i, a),
                        h = 2 * Math.PI * r * d / (2 * Math.PI),
                        f = 2 * Math.PI * n * d / (2 * Math.PI);
                    if(t * c < u) {
                        s = n + t * c;
                        return {
                            x: s * Math.cos(e),
                            y: s * Math.sin(e)
                        }
                    } else if(t * c < u + h) {
                        o = (t * c - u) / h * d;
                        if(a) l = e - o;
                        else l = e + o;
                        return {
                            x: r * Math.cos(l),
                            y: r * Math.sin(l)
                        }
                    } else if(t * c < 2 * u + h) {
                        s = 2 * r - t * c - n + h;
                        return {
                            x: s * Math.cos(i),
                            y: s * Math.sin(i)
                        }
                    } else {
                        o = (1 - (1 - t) * c / f) * d;
                        if(a) l = i + o;
                        else l = i - o;
                        return {
                            x: n * Math.cos(l),
                            y: n * Math.sin(l)
                        }
                    }
                },
                percentAtLength: function(t) {
                    var e = this._t.length();
                    if(t < 0) return 0;
                    if(e < t) return 1;
                    else return t / e
                },
                __detaAngle: function(t, e, i) {
                    t = (t + 2 * Math.PI) % (2 * Math.PI);
                    e = (e + 2 * Math.PI) % (2 * Math.PI);
                    if(i) return 2 * Math.PI - (e - t);
                    else return e - t
                }
            }, ["innerradius", "outerradius", "startAngle", "endAngle", "anticlockwise", "length"].concat(r.grantMany(["cache", "type", "id", "tag", "strokeFlag", "strokeScaleInvariant", "strokeStyle", "fillFlag", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineDash", "anchorPoint"]))),
            d = s.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t)
                }
            }, [
                [o("type"), u.grant("type")],
                [l("innerradius"), u.grant("innerradius")],
                [l("outerradius"), u.grant("outerradius")],
                [l("startAngle"), u.grant("startAngle")],
                [l("endAngle"), u.grant("endAngle")],
                [l("anticlockwise"), u.grant("anticlockwise")],
                [l("strokeStyle"), u.grant("strokeStyle")],
                [l("fillStyle"), u.grant("fillStyle")],
                [l("shadowColor"), u.grant("shadowColor")]
            ].concat(u.grantMany(["id", "tag", "strokeFlag", "strokeScaleInvariant", "fillFlag", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineDash"])), [u]);
        i({
            AnnulusKlass: d,
            AnnulusTrait: u
        })
    };
    n["/gprims/rectgprim.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = t("./shaptrait").ShapTrait,
            a = t("../lib/geometry"),
            s = n.Klass,
            o = n.READONLY,
            l = n.CUSTOM_SETTER,
            c = {
                width: 6,
                height: 6
            },
            u = {
                x: 0,
                y: 0
            },
            d = r.extend({
                __init: function(t) {
                    this.subTraits(0).__init(t);
                    if(void 0 == t) t = c;
                    this._t.setwidth(void 0 == t.width ? c.width : t.width);
                    this._t.setheight(void 0 == t.height ? c.height : t.height);
                    this._t.settype("rect");
                    this._t.setlength(void 0)
                },
                setwidth: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setwidth(t);
                    this._t.setlength(void 0);
                    return this
                },
                setheight: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setheight(t);
                    this._t.setlength(void 0);
                    return this
                },
                width: function() {
                    return this._t.width()
                },
                height: function() {
                    return this._t.height()
                },
                localBbox: function() {
                    var t = 0;
                    if(void 0 !== this._t.strokeStyle() && 0 != this._t.strokeStyle().a || this._t.strokeFlag()) t = this._t.lineWidth();
                    return a.rectMake(-t / 2, -t / 2, this._t.width() + t, this._t.height() + t)
                },
                localInside: function(t, e) {
                    var i = 0;
                    if(void 0 !== this._t.strokeStyle() || this._t.strokeFlag()) i = this._t.lineWidth();
                    if(t > -i / 2 && t < this._t.width() + i && e > -i / 2 && e < this._t.height() + i) return !0;
                    else return !1
                },
                localHook: function(t) {
                    this.hookMany(this._t, ["fillFlag", "strokeFlag", "strokeScaleInvariant", "width", "height", "strokeStyle", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineWidth", "anchorPoint"], t, "a")
                },
                unlocalHook: function(t) {
                    this.unhookMany(this._t, ["fillFlag", "strokeFlag", "strokeScaleInvariant", "width", "height", "strokeStyle", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineWidth", "anchorPoint"], t, "a")
                },
                length: function() {
                    var t = this._t.length();
                    if(void 0 == t) {
                        t = 2 * (this._t.width() + this._t.height());
                        this._t.setlength(t)
                    }
                    return t
                },
                pointAtPercent: function(t) {
                    if(t <= 0 || t >= 1) return u;
                    var e = this._t.width(),
                        i = this._t.height(),
                        n = this.length();
                    if(e >= t * n) return {
                        x: n * t,
                        y: 0
                    };
                    else if(e + i >= t * n) return {
                        x: e,
                        y: t * n - e
                    };
                    else if(2 * e + i >= t * n) return {
                        x: e - (t - .5) * n,
                        y: i
                    };
                    else return {
                            x: 0,
                            y: (1 - t) * n
                        }
                },
                percentAtLength: function(t) {
                    var e = this._t.length();
                    if(t < 0) return 0;
                    if(e < t) return 1;
                    else return t / e
                }
            }, ["width", "height", "length"].concat(r.grantMany(["fillFlag", "strokeFlag", "strokeScaleInvariant", "cache", "type", "id", "tag", "strokeStyle", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineWidth", "anchorPoint"]))),
            h = s.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t)
                }
            }, [
                [o("type"), d.grant("type")], "fixBlur", [l("lineWidth"), d.grant("lineWidth")],
                [l("strokeStyle"), d.grant("strokeStyle")],
                [l("fillStyle"), d.grant("fillStyle")],
                [l("shadowColor"), d.grant("shadowColor")]
            ].concat(d.grantMany(["fillFlag", "strokeFlag", "strokeScaleInvariant", "id", "tag", "shadowBlur", "shadowOffsetX", "shadowOffsetY"])), [d]);
        i({
            RectKlass: h,
            RectTrait: d
        })
    };
    n["/gprims/polygongprim.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = t("./shaptrait").ShapTrait,
            a = t("../lib/geometry"),
            s = n.Klass,
            o = n.READONLY,
            l = n.CUSTOM_SETTER,
            c = {
                vertexes: [{
                    x: 5,
                    y: 0
                }, {
                    x: 10,
                    y: 10
                }, {
                    x: 0,
                    y: 10
                }],
                fillStyle: {
                    r: 0,
                    g: 0,
                    b: 0
                }
            },
            u = r.extend({
                __init: function(t) {
                    this.subTraits(0).__init(t);
                    if(void 0 == t || void 0 == t.fillStyle && void 0 == t.strokeStyle) this.setfillStyle(c.fillStyle);
                    if(void 0 == t) t = c;
                    this._t.setvertexes(void 0 == t.vertexes ? [] : t.vertexes);
                    this._t.settype("polygon");
                    this._t.setlength(void 0)
                },
                setvertexes: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setvertexes(t);
                    this._t.setlength(void 0);
                    return this
                },
                localBbox: function() {
                    var t = 1 / 0,
                        e = 1 / 0,
                        i = -(1 / 0),
                        n = -(1 / 0),
                        r = this._t.vertexes();
                    for(var s in r) {
                        var o = r[s];
                        t = o.x < t ? o.x : t;
                        e = o.y < e ? o.y : e;
                        i = o.x > i ? o.x : i;
                        n = o.y > n ? o.y : n
                    }
                    var l = 0;
                    if(void 0 !== this._t.strokeStyle() && 0 != this._t.strokeStyle().a || this._t.strokeFlag()) l = this.getRealLineWidth();
                    return a.rectMake(t, e, i - t + l, n - e + l)
                },
                localInside: function(t, e) {
                    var i = this._t.vertexes();
                    return a.isPointInPolygon(t, e, i)
                },
                localHook: function(t) {
                    this.hookMany(this._t, ["fillFlag", "strokeFlag", "strokeScaleInvariant", "vertexes", "strokeStyle", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineDash", "anchorPoint"], t, "a")
                },
                unlocalHook: function(t) {
                    this.unhookMany(this._t, ["fillFlag", "strokeFlag", "strokeScaleInvariant", "vertexes", "strokeStyle", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineDash", "anchorPoint"], t, "a")
                },
                length: function() {
                    var t = this._t.length();
                    if(void 0 == t) {
                        t = 0;
                        for(var e, i, n = this._t.vertexes(), r = 0, a = n.length; r < a; r++) {
                            e = n[r];
                            if(r == a - 1) i = n[0];
                            else i = n[r + 1];
                            t += Math.sqrt((e.x - i.x) * (e.x - i.x) + (e.y - i.y) * (e.y - i.y))
                        }
                        this._t.setlength(t)
                    }
                    return t
                },
                pointAtPercent: function(t) {
                    var e = this._t.vertexes();
                    if(t <= 0 || t >= 1) return {
                        x: e[0].x,
                        y: e[0].y
                    };
                    for(var i = e.length, n = this.length(), r = 0, a = 0, i = e.length; a < i; a++) {
                        var s, o = e[a];
                        if(a == i - 1) s = e[0];
                        else s = e[a + 1];
                        var l = Math.sqrt((o.x - s.x) * (o.x - s.x) + (o.y - s.y) * (o.y - s.y));
                        r += l;
                        if(n * t <= r) {
                            var c = (n * t - r + l) / l;
                            return {
                                x: o.x + c * (s.x - o.x),
                                y: o.y + c * (s.y - o.y)
                            }
                        }
                    }
                },
                percentAtLength: function(t) {
                    var e = this._t.length();
                    if(t < 0) return 0;
                    if(e < t) return 1;
                    else return t / e
                }
            }, ["vertexes", "length"].concat(r.grantMany(["fillFlag", "strokeFlag", "strokeScaleInvariant", "cache", "type", "id", "tag", "strokeStyle", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineDash", "anchorPoint"]))),
            d = s.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t)
                }
            }, [
                [o("type"), u.grant("type")],
                [l("vertexes"), u.grant("vertexes")],
                [l("strokeStyle"), u.grant("strokeStyle")],
                [l("fillStyle"), u.grant("fillStyle")],
                [l("shadowColor"), u.grant("shadowColor")]
            ].concat(u.grantMany(["fillFlag", "strokeFlag", "strokeScaleInvariant", "id", "tag", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineDash"])), [u]);
        i({
            PolygonKlass: d,
            PolygonTrait: u
        })
    };
    n["/lib/autorepaint.js"] = function(t, e, i) {
        var n = t("./colortraits"),
            r = (t("./geometry"), t("./eventstream")),
            a = (n.Klass, n.Trait, n.compose),
            s = function(t) {
                t.enableAutoRepaint()
            },
            o = function(t) {
                t.disableAutoRepaint()
            },
            l = a([r], {
                __init: function(t) {
                    this.subTraits(0).__init();
                    this._t.setautorepaint(null == t || void 0 == t.autorepaint ? !1 : t.autorepaint);
                    if(this._t.autorepaint()) {
                        this.createEventStream("system");
                        var e = this;
                        this.subscribe("system", function(t) {
                            if("addActor" == t.type && t.actor.enableAutoRepaint) t.actor.forEach(s);
                            else if("removeActor" == t.type && t.actor.disableAutoRepaint) t.actor.forEach(o);
                            e.owner().invalidate()
                        })
                    }
                },
                autorepaint: function() {
                    return this._t.autorepaint()
                }
            }, ["autorepaint"]);
        i({
            AutoRepaintTrait: l
        })
    };
    n["/lib/transformable.js"] = function(t, e, i) {
        var n = t("./geometry"),
            r = t("./util"),
            a = (t("./colortraits").Klass, t("./colortraits").Trait),
            s = t("./debug").assert,
            o = a.extend({
                __init: function(t, e) {
                    s(t, "param error");
                    var i = [];
                    i[0] = {
                        x: 0,
                        y: 0,
                        z: 0,
                        sx: 1,
                        sy: 1,
                        r: 0
                    };
                    this._t.setmatrixs(i);
                    this._t.settimeStamper(t);
                    this._t.setdirtyStamp(t.now());
                    this._t.setcalculateStamp(t.now() - 1);
                    this._t.set__depTransformable__(e)
                },
                setx: function(t) {
                    var e = this._t.matrixs()[0];
                    e.x = t;
                    this.stepForwardTimeStamp__();
                    return this
                },
                x: function() {
                    var t = this._t.matrixs()[0];
                    return t.x
                },
                sety: function(t) {
                    var e = this._t.matrixs()[0];
                    e.y = t;
                    this.stepForwardTimeStamp__();
                    return this
                },
                y: function(t) {
                    var e = this._t.matrixs()[0];
                    return e.y
                },
                setz: function(t) {
                    var e = this._t.matrixs()[0];
                    e.z = t;
                    this.stepForwardTimeStamp__();
                    return this
                },
                z: function() {
                    var t = this._t.matrixs()[0];
                    return t.z
                },
                move: function(t, e, i) {
                    var n = this._t.matrixs()[0];
                    n.x = t;
                    n.y = e;
                    if("number" == typeof i) n.z = i;
                    this.stepForwardTimeStamp__();
                    return this
                },
                moveBy: function(t, e, i) {
                    var n = this._t.matrixs()[0];
                    n.x += t;
                    n.y += e;
                    if("number" == typeof z) n.z += i;
                    this.stepForwardTimeStamp__();
                    return this
                },
                setrotation: function(t) {
                    var e = this._t.matrixs()[0];
                    e.r = t;
                    this.stepForwardTimeStamp__();
                    return this
                },
                rotation: function() {
                    var t = this._t.matrixs()[0];
                    return t.r
                },
                rotateBy: function(t) {
                    var e = this._t.matrixs()[0];
                    e.r += t;
                    this.stepForwardTimeStamp__();
                    return this
                },
                applyScaleY: function(t) {
                    var e = this._t.matrixs()[0];
                    e.sy *= t;
                    this.stepForwardTimeStamp__();
                    return this
                },
                setscale: function(t) {
                    var e = this._t.matrixs()[0];
                    e.sx = t.sx;
                    e.sy = t.sy;
                    this.stepForwardTimeStamp__();
                    return this
                },
                scale: function() {
                    var t = this._t.matrixs()[0];
                    return {
                        sx: t.sx,
                        sy: t.sy
                    }
                },
                scaleBy: function(t, e) {
                    var i = this._t.matrixs()[0];
                    i.sx *= t;
                    i.sy *= e;
                    this.stepForwardTimeStamp__();
                    return this
                },
                transform: function(t) {
                    var e = n.decomposeMatrix(t),
                        t = this._t.matrixs()[0];
                    t.x = e.x;
                    t.y = e.y;
                    t.sx = e.sx;
                    t.sy = e.sy;
                    t.r = e.r;
                    this.stepForwardTimeStamp__();
                    return this
                },
                pushMatrix: function(t) {
                    var e = this._t.matrixs();
                    e.push(t);
                    this.stepForwardTimeStamp__();
                    return this
                },
                popMatrix: function() {
                    var t = this._t.matrixs();
                    s(t.length > 1, "logical error");
                    this.stepForwardTimeStamp__();
                    return t.pop()
                },
                matrix: function() {
                    var t = this.transformable_dirty__();
                    if(t) {
                        var e = this._t.__depTransformable__(),
                            i = e ? r.copy(e.matrix()) : n.identityMatrix(),
                            a = this._t.matrixs(),
                            s = a[0];
                        if(0 != s.x || 0 != s.y || 0 != s.z) n.matrixTranslateBy(i, s.x, s.y, s.z);
                        if(0 != s.r) n.matrixRotateBy(i, s.r);
                        if(1 != s.sx || 1 != s.sy) n.matrixScaleBy(i, s.sx, s.sy);
                        for(var o = 1; o < a.length; o++) this[("__" + a[o][0] + "matrix", i)](a[o].slice(1));
                        this._t.set__matrix__(i);
                        if(1 == t) this._t.setcalculateStamp(e.stamp());
                        else if(2 == t) this._t.setcalculateStamp(this._t.dirtyStamp());
                        return i
                    } else return this._t.__matrix__()
                },
                setDepTransformable: function(t) {
                    var e = this._t.__depTransformable__();
                    this._t.set__depTransformable__(t);
                    this.stepForwardTimeStamp__();
                    return e
                },
                stamp: function() {
                    return this._t.calculateStamp()
                },
                dirtyStamp: function() {
                    return this._t.dirtyStamp()
                },
                transformable_dirty__: function() {
                    var t = this._t.__depTransformable__(),
                        e = 0;
                    if(t && t.transformable_dirty__() || t && this.stamp() < t.stamp()) e = 1;
                    if(this._t.calculateStamp() < this._t.dirtyStamp()) e = 2;
                    return e
                },
                stepForwardTimeStamp__: function() {
                    this._t.timeStamper().stepForward();
                    this._t.setdirtyStamp(this._t.timeStamper().now())
                }
            }, ["matrixs", "timeStamper", "dirtyStamp", "calculateStamp", "__depTransformable__", "__matrix__"]);
        i({
            TransformableTrait: o
        })
    };
    n["/actortraits.js"] = function(t, e, i) {
        var n = t("./lib/colortraits").Trait,
            r = t("./lib/debug"),
            a = t("./lib/util"),
            s = t("./gprims/clipgprim").ClipKlass,
            o = t("./gprims/imagegprim").ImageKlass,
            l = (t("./thirdlib/rx/all"), a.identifier),
            c = t("interactor").Interactors,
            u = function(t, e) {
                var i = e.satelliteData("frame"),
                    n = i._clipGPrim.get("gprim").get("width"),
                    r = i._clipGPrim.get("gprim").get("height"),
                    a = i._endX == -1 ? n : i._endX,
                    s = i._endY == -1 ? r : i._endY;
                dt *= i._factor;
                if(0 != i._times) {
                    i._elapsed += dt;
                    for(; i._elapsed >= i._interval;) {
                        i._elapsed -= i._interval;
                        i._x += i._hSpan;
                        if(i._x >= n) {
                            i._x = 0;
                            i._y += i._vSpan
                        }
                        if(i._x + i._hSpan > a && i._y + i._vSpan == s || i._y + i._vSpan > s) {
                            i._times--;
                            i._x = i._startX;
                            i._y = i._startY;
                            if(0 == i._times) break
                        }
                    }
                    i._clipGPrim.set("x", i._x);
                    i._clipGPrim.set("y", i._y)
                }
            },
            d = n.extend({
                initialize: function(t) {
                    var e = this.querySatelliteData("frame", {}),
                        i = new o({
                            image: t.image
                        });
                    e._clipGPrim = new s({
                        w: t.w,
                        h: t.h,
                        gprim: i
                    });
                    if("number" == typeof t.HSpan) e._hSpan = t.HSpan;
                    else e._hSpan = t.w;
                    if("number" == typeof t.VSpan) e._vSpan = t.VSpan;
                    else e._vSpan = t.h;
                    var n = {
                        x: 0,
                        y: 0
                    };
                    if("number" == typeof t.startFrame) {
                        n.x = t.startFrame;
                        n.y = 0
                    } else if(t.startFrame) n = t.startFrame;
                    var a = {
                        x: -1,
                        y: -1
                    };
                    if("number" == typeof t.endFrame) {
                        a.x = t.endFrame;
                        a.y = 1
                    } else if(t.endFrame) a = t.endFrame;
                    r.assert("number" == typeof n.x && "number" == typeof n.y && "number" == typeof a.x && typeof("number" == a.y), "parameter error");
                    e._startX = n.x * t.w;
                    e._startY = n.y * t.h;
                    e._endX = a.x == -1 ? -1 : a.x * t.w;
                    e._endY = a.y == -1 ? -1 : a.y * t.h;
                    if("number" == typeof t.times) e._times = t.times;
                    else e._times = 1;
                    e._interval = t.interval;
                    if("number" == typeof t.factor) e._factor = t.factor;
                    else e._factor = 1;
                    e._clipGPrim.x = e._x = e._startX;
                    e._clipGPrim.y = e._y = e._startY;
                    e._elapsed = 0;
                    this.regUpdate(u)
                },
                _frameData: function() {
                    return this.satelliteData("frame")
                },
                setFrameSeqFactor: function(t) {
                    r.assert("number" == typeof t, "frameseq component setFrameSeqFactor parameter error");
                    this.satelliteData("frame")._factor = t
                },
                getGPrim: function() {
                    return this.satelliteData("frame")._clipGPrim
                }
            }),
            h = n.extend({
                __init: function(t) {
                    this.querySatelliteData("emitter", t);
                    var e = function(t, e) {
                        e.querySatelliteData("emitter").update(dt, null, {})
                    };
                    this.regUpdate(e)
                },
                getEmitter: function() {
                    return this.querySatelliteData("emitter")
                }
            }),
            f = n.extend({
                isUnit: function(t) {
                    return !0
                }
            }),
            p = n.extend({
                emitGPrims: function(t) {
                    var e = this.gprim(),
                        i = this.matrix();
                    r.assert("number" == typeof i.tz, "logical error");
                    t.push({
                        gprim: e,
                        effect: {
                            matrix: i,
                            vertical: !0,
                            z: i.tz
                        }
                    })
                },
                emitControlGPrims: function(t) {
                    return this.emitGPrims(t)
                }
            }),
            _ = {
                mouseOver: "mouse",
                mouseMoved: "mouse",
                mouseOut: "mouse",
                keyPressed: "mouse",
                keyReleased: "mouse",
                mouseDragged: "mouse",
                mouseClicked: "mouse",
                keyPressed: "keyboard",
                keyReleased: "keyboard",
                mousePressed: "mouse",
                mouseReleased: "mouse",
                twoFingerTouch: "mouse",
                mousewheel: "mouse"
            },
            m = n.extend({
                __init: function() {
                    this._t.setinteractors({});
                    this._t.setobservers({});
                    this.mouse = 0;
                    this.keyboard = 0
                },
                addEventListener: function(t, e) {
                    var i = this.getInteractObservable(t),
                        n = i.subscribe(e);
                    if(null == this._t.observers()[t]) this._t.observers()[t] = {};
                    this._t.observers()[t][l(e)] = n;
                    return this
                },
                removeEventListener: function(t, e) {
                    if(null != this._t.observers()[t]) {
                        this._t.observers()[t][l(e)].dispose();
                        delete this._t.observers()[t][l(e)];
                        var i = !0;
                        for(var n in this._t.observers()[t]) {
                            i = !1;
                            break
                        }
                        if(i) {
                            delete this._t.observers()[t];
                            delete this._t.interactors()[t];
                            this[_[t]] -= 1
                        }
                        return this
                    }
                },
                removeAllEventListener: function(t) {
                    if("string" == typeof t) {
                        if(null == this._t.observers()[t]) return;
                        for(var e in this._t.observers()[t]) {
                            this._t.observers()[t][e].dispose();
                            delete this._t.observers()[t][e]
                        }
                        delete this._t.observers()[t];
                        delete this._t.interactors()[t];
                        this[_[t]] -= 1;
                        return this
                    } else r.assert(!1, "please enter the right interactor type!!")
                },
                __getInteractor: function(t) {
                    var e = this._t.interactors()[t];
                    if(null == e) {
                        e = c[t].create(this);
                        this._t.interactors()[t] = e;
                        this[_[t]] += 1
                    }
                    return e
                },
                getInteractObservable: function(t) {
                    var e = this._t.__getInteractor(t);
                    return e.observable()
                },
                getInteractSubject: function(t) {
                    var e = this._t.__getInteractor(t);
                    return e.subject()
                },
                queryInteractSubject: function(t) {
                    var e = this._t.interactors()[t];
                    if(null != e) return e.subject()
                },
                requestInteractiveObjects: function(t, e, i) {
                    var n = this[i] > 0;
                    if(this.interactable() && n) {
                        this.emitInteractiveObjects(e);
                        return this
                    }
                },
                forceRequestInteractiveObjects: function(t, e, i, n) {
                    if(this.interactable()) {
                        for(var r in e) this._t.__getInteractor(r);
                        this.requestInteractiveObjects(t, i, n);
                        return this
                    }
                },
                forceInteractionTypes: function(t, e) {
                    var i = this._t.interactors(),
                        n = !1;
                    if(null == t) {
                        t = {};
                        for(var r in i)
                            if(_[r] == e) {
                                t[r] = r;
                                n = !0
                            }
                        if(!n) return;
                        return t
                    }
                    var a = {};
                    for(var r in t) a[r] = r;
                    for(var r in i)
                        if(_[r] == e) a[r] = r;
                    return a
                }
            }, ["interactors", "observers"]);
        i({
            EmitterTrait: h,
            FrameSeqTrait: d,
            UnitTrait: f,
            IsoVerActorTrait: p,
            InteractorTrait: m
        })
    };
    n["/pathelement.js"] = function(t, e, i) {
        var n = t("./lib/colortraits"),
            r = t("./lib/geometry"),
            a = t("./lib/util"),
            s = t("./lib/pathlenprocess"),
            o = a.arraySome,
            l = (a.arrayFilter, n.READONLY),
            c = n.Trait,
            u = n.Klass,
            d = c.extend({
                __init: function(t) {
                    this._t.settype("M");
                    this._t.setpoint(t.point);
                    this._t.setlength(void 0)
                },
                bboxPoint: function() {
                    return [this.point()]
                },
                localHook: function(t) {
                    this.hook(this._t, "point", t, "b");
                    this.hook(this._t, "point", t, "a")
                },
                unlocalHook: function(t) {
                    this.unhook(this._t, "point", t, "b");
                    this.unhook(this._t, "point", t, "a")
                },
                clearLengthCache: function() {
                    this._t.setlength(void 0)
                },
                length: function(t) {
                    return 0
                },
                pointAtPercent: function(t, e) {
                    return this._t.point()
                }
            }, ["type", "point", "length"]),
            h = c.extend({
                __init: function(t) {
                    this._t.settype("L");
                    this._t.setpoint(t.point);
                    this._t.setlength(void 0)
                },
                bboxPoint: function() {
                    return [this.point()]
                },
                isPointIn: function(t, e, i, n, a, s) {
                    return r.isPointInLine(t, e, i, n, a, s)
                },
                localHook: function(t) {
                    this.hook(this._t, "point", t, "b");
                    this.hook(this._t, "point", t, "a")
                },
                unlocalHook: function(t) {
                    this.unhook(this._t, "point", t, "b");
                    this.unhook(this._t, "point", t, "a")
                },
                clearLengthCache: function() {
                    this._t.setlength(void 0)
                },
                length: function(t) {
                    var e = this._t.length();
                    if(void 0 == e) {
                        e = s.LineLength(t, this._t.point());
                        this._t.setlength(e)
                    }
                    return e
                },
                pointAtPercent: function(t, e) {
                    return s.PointAtLine(t, e, this._t.point())
                }
            }, ["point", "type", "length"]),
            f = c.extend({
                __init: function(t) {
                    this._t.settype("Q");
                    this._t.setpoint(t.point);
                    this._t.setcontrolpoint(t.controlpoint);
                    this._t.setlength(void 0)
                },
                bboxPoint: function() {
                    return [this.controlpoint(), this.point()]
                },
                isPointIn: function(t, e, i, n, a, s) {
                    var l = {
                            x: i,
                            y: n
                        },
                        c = r.coordinateSysChange(t, e),
                        u = r.pointApplyMatrix(l, c);
                    t = r.pointApplyMatrix(t, c);
                    e = {
                        x: 0,
                        y: 0
                    };
                    var d = r.pointApplyMatrix(this.controlpoint(), c),
                        h = t.x - 2 * d.x + e.x,
                        f = 2 * d.x - 2 * t.x,
                        p = t.x - u.x,
                        _ = r.quadraticResolve(h, f, p);
                    return o(_, function(i) {
                        if(i >= 0 && i <= 1) {
                            var n = (1 - i) * (1 - i) * t.y + 2 * i * (1 - i) * d.y + i * i * e.y;
                            if(Math.abs(u.y - n) <= a / 2 + s) return !0;
                            else return !1
                        }
                    })
                },
                localHook: function(t) {
                    this.hookMany(this._t, ["controlpoint", "point"], t, "b");
                    this.hookMany(this._t, ["controlpoint", "point"], t, "a")
                },
                unlocalHook: function(t) {
                    this.unhookMany(this._t, ["controlpoint", "point"], t, "b");
                    this.unhookMany(this._t, ["controlpoint", "point"], t, "a")
                },
                clearLengthCache: function() {
                    this._t.setlength(void 0)
                },
                length: function(t) {
                    var e = this._t.length();
                    if(void 0 == e) {
                        var i = s.q2c(t, this._t.controlpoint(), this._t.point());
                        this._t.setbezierPoints(i);
                        e = s.CubicBezierLength(i);
                        this._t.setlength(e)
                    }
                    return e
                },
                pointAtPercent: function(t, e) {
                    return s.PointAtBezier(t, this._t.bezierPoints())
                }
            }, ["point", "controlpoint", "type", "length", "bezierPoints"]),
            p = c.extend({
                __init: function(t) {
                    this._t.settype("C");
                    this._t.setpoint(t.point);
                    this._t.setcontrolpoint1(t.controlpoint1);
                    this._t.setcontrolpoint2(t.controlpoint2);
                    this._t.setlength(void 0)
                },
                bboxPoint: function() {
                    return [this.controlpoint1(), this.controlpoint2(), this.point()]
                },
                isPointIn: function(t, e, i, n, a, s) {
                    var l = {
                            x: i,
                            y: n
                        },
                        c = r.coordinateSysChange(t, e),
                        u = r.pointApplyMatrix(l, c);
                    t = r.pointApplyMatrix(t, c);
                    e = {
                        x: 0,
                        y: 0
                    };
                    var d = r.pointApplyMatrix(this.controlpoint1(), c),
                        h = r.pointApplyMatrix(this.controlpoint2(), c),
                        f = -t.x + 3 * d.x - 3 * h.x + e.x,
                        p = 3 * t.x - 6 * d.x + 3 * h.x,
                        _ = 3 * d.x - 3 * t.x,
                        m = t.x - u.x,
                        g = r.cubicResolve(f, p, _, m);
                    return o(g, function(i) {
                        if(i >= 0 && i <= 1) {
                            var n = t.y * (1 - i) * (1 - i) * (1 - i) + 3 * d.y * i * (1 - i) * (1 - i) + 3 * h.y * i * i * (1 - i) + e.y * i * i * i;
                            if(Math.abs(u.y - n) <= a / 2 + s) return !0;
                            else return !1
                        }
                    })
                },
                localHook: function(t) {
                    this.hookMany(this._t, ["point", "controlpoint1", "controlpoint2"], t, "b");
                    this.hookMany(this._t, ["point", "controlpoint1", "controlpoint2"], t, "a")
                },
                unlocalHook: function(t) {
                    this.unhookMany(this._t, ["point", "controlpoint1", "controlpoint2"], t, "b");
                    this.unhookMany(this._t, ["point", "controlpoint1", "controlpoint2"], t, "a")
                },
                clearLengthCache: function() {
                    this._t.setlength(void 0)
                },
                length: function(t) {
                    var e = this._t.length();
                    if(void 0 == e) {
                        var i = [t, this._t.controlpoint1(), this._t.controlpoint2(), this._t.point()];
                        e = s.CubicBezierLength(i);
                        this._t.setlength(e)
                    }
                    return e
                },
                pointAtPercent: function(t, e) {
                    return s.PointAtBezier(t, [e, this._t.controlpoint1(), this._t.controlpoint2(), this._t.point()])
                }
            }, ["point", "controlpoint1", "controlpoint2", "type", "length", "bezierPoints"]),
            _ = c.extend({
                __init: function(t) {
                    this._t.settype("A");
                    this._t.setpoint(t.point);
                    this._t.setrx(t.rx);
                    this._t.setry(t.ry);
                    this._t.setxaxisrotate(t.xaxisrotate);
                    this._t.setlargearcflag(t.largearcflag > 0 ? 1 : 0);
                    this._t.setsweepflag(t.sweepflag > 0 ? 1 : 0);
                    this._t.setlength(void 0)
                },
                ellipseCenterAngle: function(t) {
                    var e = this.point(),
                        i = this.rx(),
                        n = this.ry();
                    if(0 == i || 0 == n) return !1;
                    var a = {
                            x: (t.x - e.x) / 2,
                            y: (t.y - e.y) / 2
                        },
                        s = {
                            x: (t.x + e.x) / 2,
                            y: (t.y + e.y) / 2
                        },
                        o = r.identityMatrix();
                    r.matrixRotateBy(o, this.xaxisrotate());
                    var l = r.matrixInvert(o),
                        c = r.pointApplyMatrix(a, l),
                        u = c.x * c.x / (i * i) + c.y * c.y / (n * n);
                    if(u > 1) {
                        i = Math.sqrt(u) * i;
                        n = Math.sqrt(u) * n
                    }
                    var d = (i * i * n * n - i * i * c.y * c.y - n * n * c.x * c.x) / (i * i * c.y * c.y + n * n * c.x * c.x);
                    d = Math.abs(d);
                    d = Math.sqrt(d);
                    var h;
                    if(this.largearcflag() == this.sweepflag()) h = {
                        x: -d * i * c.y / n,
                        y: -d * -n * c.x / i
                    };
                    else h = {
                        x: d * i * c.y / n,
                        y: d * -n * c.x / i
                    };
                    var f = r.pointAdd(r.pointApplyMatrix(h, o), s),
                        p = {
                            x: 1,
                            y: 0
                        },
                        _ = r.getVectorAngle(p, {
                            x: (c.x - h.x) / i,
                            y: (c.y - h.y) / n
                        }),
                        m = r.getVectorAngle({
                            x: (c.x - h.x) / i,
                            y: (c.y - h.y) / n
                        }, {
                            x: (-c.x - h.x) / i,
                            y: (-c.y - h.y) / n
                        });
                    if(0 == this.sweepflag()) m -= 2 * Math.PI;
                    this.setcenter(f);
                    this.setstartAngle(_);
                    this.setendAngle(_ + m);
                    this.setrx(i);
                    this.setry(n);
                    return !0
                },
                bboxPoint: function() {
                    if(0 == this.rx() || 0 == this.ry()) return [this.point()];
                    var t = Math.max(this.rx(), this.ry()),
                        e = this.center(),
                        i = {
                            x: e.x + t,
                            y: e.y
                        },
                        n = {
                            x: e.x,
                            y: e.y + t
                        },
                        r = {
                            x: e.x - t,
                            y: e.y
                        },
                        a = {
                            x: e.x,
                            y: e.y - t
                        };
                    return [i, n, r, a]
                },
                isPointIn: function(t, e, i, n, a, s) {
                    if(0 == this.rx() || 0 == this.ry()) return r.isPointInLine(t, e, i, n, a, s);
                    var o = this.center(),
                        l = r.identityMatrix();
                    r.matrixTranslateBy(l, o.x, o.y);
                    r.matrixRotateBy(l, this.xaxisrotate());
                    r.matrixInvertBy(l);
                    var c = r.pointApplyMatrix({
                            x: i,
                            y: n
                        }, l),
                        u = r.pointApplyMatrix(e, l),
                        d = r.pointApplyMatrix(t, l),
                        h = r.getVectorAngle(d, u),
                        f = r.getVectorAngle(d, c);
                    if(0 == this.sweepflag() && f >= h || 1 == this.sweepflag() && f < h) {
                        var p = c.x * c.x / (this.rx() * this.rx()) + c.y * c.y / (this.ry() * this.ry()),
                            _ = Math.sqrt(p);
                        if(0 !== _) p = (1 - _) / _ * ((1 - _) / _) * (c.x * c.x + c.y * c.y);
                        else p -= 1;
                        if(Math.sqrt(p) < a / 2 + s) return !0
                    }
                    return !1
                },
                localHook: function(t) {
                    this.hookMany(this._t, ["point", "rx", "ry", "xaxisrotate", "largearcflag", "sweepflag", "center", "startAngle", "endAngle"], t, "b");
                    this.hookMany(this._t, ["point", "rx", "ry", "xaxisrotate", "largearcflag", "sweepflag", "center", "startAngle", "endAngle"], t, "a")
                },
                unlocalHook: function(t) {
                    this.unhookMany(this._t, ["point", "rx", "ry", "xaxisrotate", "largearcflag", "sweepflag", "center", "startAngle", "endAngle"], t, "b");
                    this.unhookMany(this._t, ["point", "rx", "ry", "xaxisrotate", "largearcflag", "sweepflag", "center", "startAngle", "endAngle"], t, "a")
                },
                clearLengthCache: function() {
                    this._t.setlength(void 0)
                },
                length: function(t) {
                    var e = this._t.length();
                    if(void 0 == e) {
                        e = 0;
                        var i = {
                                x: t.x,
                                y: t.y
                            },
                            n = this._t.point(),
                            r = {
                                x: n.x,
                                y: n.y
                            };
                        s.EllipseArcStandard(this._t.center(), this._t.xaxisrotate(), i, r);
                        var a = new Array,
                            o = s.a2c({
                                x: 0,
                                y: 0
                            }, this._t.rx(), this._t.ry(), this._t.startAngle(), this._t.endAngle() - this._t.startAngle(), i, r, a),
                            l = [i];
                        this._t.setbezierPoints(l.concat(a));
                        for(var c, u = [], d = 0; d < o; d += 3) {
                            l = l.slice(l.length - 1).concat(a[d], a[d + 1], a[d + 2]);
                            var c = s.CubicBezierLength(l);
                            e += c;
                            u.push(c)
                        }
                        this._t.setbezierLength(u);
                        this._t.setlength(e)
                    }
                    return e
                },
                pointAtPercent: function(t, e) {
                    for(var i = this._t.bezierPoints(), n = this._t.bezierLength(), r = 0, a = this._t.length(), o = 0, l = i.length; o < l - 1; o += 3) {
                        r += n[o / 3];
                        if(r >= a * t) {
                            r -= n[o / 3];
                            var c = (a * t - r) / n[o / 3],
                                u = i.slice(o, o + 4),
                                d = s.PointAtBezier(c, u);
                            s.PointApplyEllipse(d, this._t.center(), this._t.xaxisrotate());
                            return d
                        }
                    }
                }
            }, ["point", "rx", "ry", "xaxisrotate", "largearcflag", "sweepflag", "center", "startAngle", "endAngle", "type", "length", "bezierPoints", "bezierLength"]),
            m = {
                x: 0,
                y: 0
            },
            g = c.extend({
                __init: function(t) {
                    this._t.settype("Z");
                    this._t.setpoint(m);
                    this._t.setlength(void 0)
                },
                bboxPoint: function() {
                    return []
                },
                isPointIn: function(t, e, i, n, a, s) {
                    return r.isPointInLine(t, e, i, n, a, s)
                },
                localHook: function(t) {},
                unlocalHook: function(t) {},
                clearLengthCache: function() {
                    this._t.setlength(void 0)
                },
                length: function(t, e) {
                    var i = this._t.length();
                    if(void 0 == i) {
                        i = s.LineLength(t, e);
                        this._t.setlength(i)
                    }
                    return i
                },
                pointAtPercent: function(t, e, i) {
                    return s.PointAtLine(t, e, i)
                }
            }, ["point", "type", "length"]),
            v = u.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t)
                }
            }, [
                [l("type"), d.grant("type")],
                ["point", d.grant("point")]
            ], [d]),
            y = u.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t)
                }
            }, [
                ["point", h.grant("point")],
                [l("type"), h.grant("type")]
            ], [h]),
            b = u.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t)
                }
            }, [
                [l("type"), f.grant("type")]
            ].concat(f.grantMany(["point", "controlpoint"])), [f]),
            x = u.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t)
                }
            }, [
                [l("type"), p.grant("type")]
            ].concat(p.grantMany(["point", "controlpoint1", "controlpoint2"])), [p]),
            $ = u.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this.subTraits(0).__init(t)
                }
            }, [
                [l("type"), _.grant("type")]
            ].concat(_.grantMany(["point", "rx", "ry", "xaxisrotate", "largearcflag", "sweepflag", "center", "startAngle", "endAngle"])), [_]),
            w = u.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t)
                }
            }, [
                ["point", g.grant("point")],
                [l("type"), g.grant("type")]
            ], [g]),
            k = (u.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t);
                    this.setangle(void 0 == t.angle ? 0 : t.angle);
                    this.setpoint({
                        x: t.distance,
                        y: 0
                    })
                }
            }, ["angle", [l("type"), h.grant("type")],
                ["point", h.grant("point")]
            ], [h]), u.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t);
                    this.setangle(void 0 == t.angle ? 0 : t.angle)
                }
            }, ["angle", [l("type"), f.grant("type")]].concat(f.grantMany(["point", "controlpoint"])), [f]), u.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this.subTraits(0).__init(t);
                    this.setangle(void 0 == t.angle ? 0 : t.angle)
                }
            }, ["angle", [l("type"), p.grant("type")]].concat(p.grantMany(["point", "controlpoint1", "controlpoint2"])), [p]), u.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t);
                    this.setangle(void 0 == t.angle ? 0 : t.angle)
                }
            }, ["angle", [l("type"), _.grant("type")]].concat(_.grantMany(["point", "rx", "ry", "xaxisrotate", "largearcflag", "sweepflag", "center", "startAngle", "endAngle"])), [_]), u.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this.subTraits(0).__init(t);
                    this.setangle(void 0 == t.angle ? 0 : t.angle)
                }
            }, ["angle", ["point", g.grant("point")],
                [l("type"), g.grant("type")]
            ], [g]), {
                M: function(t) {
                    return v.create({
                        point: {
                            x: t[1],
                            y: t[2]
                        }
                    })
                },
                L: function(t) {
                    return y.create({
                        point: {
                            x: t[1],
                            y: t[2]
                        }
                    })
                },
                Q: function(t) {
                    return b.create({
                        controlpoint: {
                            x: t[1],
                            y: t[2]
                        },
                        point: {
                            x: t[3],
                            y: t[4]
                        }
                    })
                },
                C: function(t) {
                    return x.create({
                        controlpoint1: {
                            x: t[1],
                            y: t[2]
                        },
                        controlpoint2: {
                            x: t[3],
                            y: t[4]
                        },
                        point: {
                            x: t[5],
                            y: t[6]
                        }
                    })
                },
                A: function(t) {
                    return $.create({
                        rx: t[1],
                        ry: t[2],
                        xaxisrotate: t[3],
                        largearcflag: t[4],
                        sweepflag: t[5],
                        point: {
                            x: t[6],
                            y: t[7]
                        }
                    })
                },
                Z: function(t) {
                    return w.create()
                }
            }),
            S = {
                point: "setpoint",
                controlpoint: "setcontrolpoint",
                controlpoint1: "setcontrolpoint1",
                controlpoint2: "setcontrolpoint2",
                rx: "setrx",
                ry: "setry",
                xaxisrotate: "setxaxisrotate",
                largearcflag: "setlargearcflag",
                sweepflag: "setsweepflag"
            };
        i({
            PathCreat: k,
            PropertytoSet: S
        })
    };
    n["/sprites/multilinetext.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = n.READONLY,
            a = n.CUSTOM_SETTER,
            s = t("./sprite"),
            o = t("../gprims/multilinetextgprim").MultilineTextTrait,
            l = s.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this.subTraits(0).__init(t)
                }
            }, [
                [r("type"), o.grant("type")],
                [a("texts"), o.grant("texts")],
                [a("gprims"), o.grant("gprims")],
                [a("styles"), o.grant("styles")],
                [a("strokeStyle"), o.grant("strokeStyle")],
                [a("fillStyle"), o.grant("fillStyle")],
                [a("shadowColor"), o.grant("shadowColor")]
            ].concat(o.grantMany(["fillFlag", "strokeFlag", "id", "tag", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "strokeScaleInvariant"])), [o]);
        i(l)
    };
    n["/lib/util.js"] = function(t, e, i) {
        var n, r = function(t, e) {
                if(arguments.length < 2) throw "at least 2 params provide to extend";
                var i, n;
                for(i = 1; i < arguments.length; i++) {
                    n = arguments[i];
                    if(n) {
                        var r, a;
                        for(r in n)
                            if(n.hasOwnProperty(r)) {
                                a = n[r];
                                if(void 0 !== a && a !== t) t[r] = a;
                                else;
                            } else;
                    } else;
                }
                return t
            },
            a = function(t) {
                var e = function() {};
                e.prototype = t;
                return new e
            },
            s = function(t, e) {
                if("string" == typeof e) e = t[e];
                if("function" == typeof e) return function() {
                    e.apply(t, arguments)
                };
                else debug.log("cannot create callback!!!")
            },
            o = function(t) {
                if(null === t) return null;
                else if(void 0 === t) return;
                var e;
                if(t instanceof Array) {
                    e = [];
                    for(var i = 0, n = t.length; i < n; i++) e[i] = A.copy(t[i])
                } else if("object" == typeof t)
                    if("function" == typeof t.copy) e = t.copy();
                    else {
                        e = {};
                        var r;
                        for(r in t) e[r] = A.copy(t[r])
                    }
                else e = t;
                return e
            };
        if(Object.keys) n = function(t) {
            return Object.keys(t)
        };
        else n = function(t) {
            var e = [],
                i = 0;
            for(var n in t)
                if(t.hasOwnProperty(n)) e[i++] = n;
            return e
        };
        var l, c = function(t, e) {
                for(var i in t)
                    if(t.hasOwnProperty(i)) e(i, t)
            },
            u = function(t, e) {
                for(var i in t)
                    if(t.hasOwnProperty(i)) e(t[i], i)
            };
        if(Array.prototype.forEach) l = function(t, e) {
            t.forEach(e)
        };
        else l = function(t, e) {
            for(var i = 0, n = t.length; i < n; i++) e(t[i], i)
        };
        var d, h = function(t, e, i) {
                var r = 2 == arguments.length ? f : i,
                    a = n(t);
                if(0 == a.length) return {};
                var s = 0;
                if(r == f) {
                    r = e(r, t[a[0]], a[0], t);
                    s = 1
                }
                for(; s < a.length;) {
                    r = e(r, t[a[s]], a[s], t);
                    s++
                }
                return r
            },
            f = [];
        if(Array.prototype.reduce) d = function(t, e, i) {
            return t.reduce(e, i)
        };
        else d = h;
        var p;
        if(Array.prototype.filter) p = function(t, e) {
            return t.filter(e)
        };
        else p = function(t, e) {
            h(t, function(t, i, n, r) {
                if(e(i, n, r)) t[n] = i;
                return t
            }, [])
        };
        var _;
        if(Array.prototype.map) _ = function(t, e) {
            return t.map(e)
        };
        else _ = function(t, e) {
            return h(t, function(t, i, n, r) {
                t[n] = e(i, n, r);
                return t
            }, [])
        };
        var m;
        if(Array.prototype.some) m = function(t, e) {
            return t.some(e)
        };
        else m = function(t, e) {
            for(var i = 0; i < t.length;) {
                if(e(t[i], i, t)) return !0;
                i++
            }
            return !1
        };
        var g = function(t) {
                this._array = t;
                this._curIdx = 0
            },
            v = {};
        r(g.prototype, {
            next: function() {
                if(this._curIdx != this._array.length) this._curIdx++
            },
            prev: function() {
                if(0 != this._curIdx) this._curIdx--
            },
            get: function() {
                if(this._curIdx == this._array.length) return v;
                else return this._array[this._curIdx]
            },
            end: function() {
                return this._curIdx == this._array.length
            }
        });
        var y, b = function(t) {
                var e = this;
                return function() {
                    return e.apply(t, Array.prototype.slice.call(arguments, 0))
                }
            },
            x = 0,
            $ = function(t) {
                if(void 0 === t.__identifier) return t.__identifier = x++;
                else return t.__identifier
            };
        if(Object.freeze) y = Object.freeze;
        else y = function(t) {
            return t
        };
        var w, k = {};
        if(Object.create && k.__proto__) w = Object.create;
        else w = function(t) {
            var e = function() {};
            e.prototype = t;
            var i = new e;
            i.__proto__ = t;
            return i
        };
        var S = function(t) {
                return "string" == typeof t
            },
            C = function(t) {
                return "[object Function]" === Object.prototype.toString.call(t)
            },
            T = function(t) {
                return "number" == typeof t
            },
            E = function(t) {
                return "[object Array]" === Object.prototype.toString.call(t)
            },
            E = function(t) {
                return "[object Array]" === Object.prototype.toString.call(t)
            },
            I = function(t) {
                return "[object Object]" === Object.prototype.toString.call(t)
            },
            A = {
                extend: r,
                beget: a,
                callback: s,
                copy: o,
                objectKeys: n,
                objectKeysForEach: c,
                objectForEach: u,
                arrayForEach: l,
                arrayReduce: d,
                arrayFilter: p,
                arrayMap: _,
                arraySome: m,
                bind: b,
                freeze: y,
                identifier: $,
                objectDotCreate: w,
                isString: S,
                isFunction: C,
                isNumber: T,
                isArray: E,
                isObject: I
            };
        i(A)
    };
    n["/query.js"] = function(t, e, i) {
        var n = t("./lib/colortraits"),
            r = n.Trait,
            a = t("./lib/util"),
            s = a.arrayForEach,
            o = a.arraySome,
            l = r.extend({
                __init: function(t) {
                    this._t.setid(t.id);
                    this._t.settag(t.tag)
                },
                getGPrimsInPath: function(t, e) {
                    var i = t.split("/");
                    if(0 == i.length) return !1;
                    e.push(this);
                    if(this.tag() == i[0]) {
                        i.splice(0, 1);
                        if(0 == i.length) return !0
                    }
                    if(void 0 == this.respondsTo("gprims")) {
                        e.pop(this);
                        return !1
                    }
                    var n = o(this.gprims(), function(t) {
                        if(1 == t.getGPrimsInPath(i.join("/"), e)) return !0;
                        else return !1
                    });
                    if(0 == n) {
                        e.pop(this);
                        return !1
                    }
                    return !0
                },
                innergetPath: function(t, e) {
                    if(this.tag()) e.push(this.tag());
                    if(this == t) return !0;
                    if(void 0 === this.respondsTo("gprims")) {
                        if(this.tag()) e.pop();
                        return !1
                    }
                    var i = o(this.gprims(), function(i) {
                        if(1 == i.innergetPath(t, e)) return !0;
                        else return !1
                    });
                    if(0 == i) {
                        if(this.tag()) e.pop();
                        return !1
                    }
                    return !0
                },
                getPath: function(t) {
                    var e = [];
                    if(0 == this.innergetPath(t, e)) return !1;
                    else return e.join("/")
                },
                findGPrimByPath: function(t) {
                    var e = [];
                    if(this.getGPrimsInPath(t, e) === !1) return !1;
                    else return e[e.length - 1]
                },
                removeGPrimByPath: function(t) {
                    var e = [];
                    if(!this.getGPrimsInPath(t, e)) return !1;
                    if(e.length < 2) return !1;
                    var i = e[e.length - 2],
                        n = e[e.length - 1],
                        r = i.gprims();
                    r.splice(r.indexOf(n), 1);
                    i.setgprims(r);
                    return n
                },
                replaceGPrimByPath: function(t, e) {
                    var i = [];
                    if(this.getGPrimsInPath(t, i) === !1) return !1;
                    if(i.length < 2) return !1;
                    var n = i[i.length - 2],
                        r = i[i.length - 1],
                        a = n.gprims();
                    a.splice(a.indexOf(r), 1, e);
                    n.setgprims(a);
                    return r
                },
                addGPrimByPath: function(t, e) {
                    if(void 0 === t && "composite" == this.type()) {
                        this.gprims().push(e);
                        return !0
                    }
                    var i = [];
                    if(this.getGPrimsInPath(t, i) === !1) return !1;
                    if(void 0 === i[i.length - 1].respondsTo("gprims")) return !1;
                    i[i.length - 1].gprims().push(e);
                    return !0
                },
                findGPrimsBytag: function(t, e) {
                    if(this.tag() == t) e.push(this);
                    if(void 0 != this.respondsTo("gprims"))
                        for(var i = this.gprims(), n = 0, r = i.length; n < r; n++) {
                            var a = i[n];
                            a.findGPrimsBytag(t, e)
                        }
                },
                findGPrimById: function(t, e) {
                    if(this.id() == t) {
                        e.push(this);
                        return !0
                    }
                    if(void 0 == this.respondsTo("gprims")) return !1;
                    var i = o(this.gprims(), function(i) {
                        if(1 == i.findGPrimById(t, e)) return !0;
                        else return !1
                    });
                    return i
                },
                removeGPrimById: function(t) {
                    var e = [];
                    if(!this.findGPrimById(t, e)) return !1;
                    var i = e[0];
                    e = [];
                    if(0 == this.getGPrims(i, e)) return !1;
                    if(e.length < 2) return !1;
                    var n = e[e.length - 2],
                        r = e[e.length - 1],
                        a = n.gprims();
                    a.splice(a.indexOf(i), 1);
                    n.setgprims(a);
                    return r
                },
                replaceGPrimById: function(t, e) {
                    var i = [];
                    if(!this.findGPrimById(t, i)) return !1;
                    var n = i[0];
                    i = [];
                    if(this.getGPrims(n, i) === !1) return !1;
                    if(i.length < 2) return !1;
                    var r = i[i.length - 2],
                        a = i[i.length - 1],
                        s = r.gprims();
                    s.splice(s.indexOf(a), 1, e);
                    r.setgprims(s);
                    return a
                },
                getGPrims: function(t, e) {
                    e.push(this);
                    if(this == t) return !0;
                    if(void 0 == this.respondsTo("gprims")) {
                        e.pop();
                        return !1
                    }
                    var i = o(this.gprims(), function(i) {
                        if(1 == i.getGPrims(t, e)) return !0;
                        else return !1
                    });
                    if(0 == i) {
                        e.pop();
                        return !1
                    }
                    return !0
                },
                replaceGPrim: function(t, e) {
                    var i = [];
                    if(!this.getGPrims(t, i)) return !1;
                    if(i.length < 2) return !1;
                    var n = i[i.length - 2],
                        r = n.gprims();
                    r.splice(r.indexOf(t), 1, e);
                    n.setgprims(r);
                    return !0
                },
                removeGPrim: function(t) {
                    var e = [];
                    if(0 == this.getGPrims(t, e)) return !1;
                    if(e.length < 2) return !1;
                    var i = e[e.length - 2],
                        n = i.gprims();
                    n.splice(n.indexOf(t), 1);
                    i.setgprims(n);
                    return !0
                },
                findGPrimsByType: function(t, e) {
                    if(this.type() == t) e.push(this);
                    if(void 0 != this.respondsTo("gprims")) {
                        s(this.gprims(), function(i) {
                            i.findGPrimsByType(t, e)
                        })
                    }
                }
            }, ["id", "tag"]);
        i({
            QueryTrait: l
        })
    };
    n["/lib/helper.js"] = function(t, e, i) {
        function n(t) {
            var e = t.getContext("2d"),
                i = window.devicePixelRatio || 1,
                n = e.webkitBackingStorePixelRatio || e.mozBackingStorePixelRatio || e.msBackingStorePixelRatio || e.oBackingStorePixelRatio || e.backingStorePixelRatio || 1,
                r = i / n;
            if(i !== n) {
                var a = t.width,
                    s = t.height;
                t.width = a * r;
                t.height = s * r;
                t.style.width = a + "px";
                t.style.height = s + "px"
            }
            return r
        }

        function r(t, e, i) {
            if(1 == arguments.length) {
                i = t;
                t = void 0
            }
            var n = document.createElement("canvas");
            if(null == i) document.body.appendChild(n);
            else i.appendChild(n);
            if(window.FlashCanvas) window.FlashCanvas.initElement(n);
            if(void 0 != t) n.width = t;
            if(void 0 != e) n.height = e;
            return n
        }

        function a(t, e) {
            var i = document.createElement("canvas");
            if(void 0 != t) i.width = t;
            if(void 0 != e) i.height = e;
            return i
        }

        function s(t, e) {
            var i = new Image;
            i.src = t;
            i.onload = function() {
                if(e) e()
            };
            return i
        }

        function o() {
            return document.createElement("audio")
        }

        function l() {
            if(void 0 != v) return v;
            var t = document.getElementsByTagName("canvas")[0];
            if(void 0 == t) t = a();
            v = t.getContext("2d");
            return v
        }

        function c(t, e) {
            var i = l();
            i.save();
            i.font = u(e);
            var n = i.measureText(t);
            n.height = e.size;
            i.restore();
            return n
        }

        function u(t) {
            var e = void 0 == t.style ? "normal" : t.style,
                i = void 0 == t.weight ? 400 : t.weight,
                n = void 0 == t.size ? 16 : t.size,
                r = void 0 == t.family ? "Arial" : t.family;
            return e + " " + i + " " + n + "px " + r
        }

        function d(t) {
            if(!t) return [];
            var e = t,
                i = ["m", "M", "l", "L", "z", "Z", "c", "C", "q", "Q", "a", "A"];
            e = e.replace(/  /g, " ");
            e = e.replace(/ /g, ",");
            e = e.replace(/,,/g, ",");
            var n;
            for(n = 0; n < i.length; n++) e = e.replace(new RegExp(i[n], "g"), "|" + i[n]);
            var r = e.split("|"),
                a = [];
            for(n = 1; n < r.length; n++) {
                var s = r[n],
                    o = s.charAt(0);
                s = s.slice(1);
                s = s.replace(new RegExp("e,-", "g"), "e-");
                var l = s.split(",");
                if(l.length > 0 && "" === l[0]) l.shift();
                for(var c = 0; c < l.length; c++) l[c] = parseFloat(l[c]);
                if(isNaN(l[l.length - 1])) l.pop();
                var u = [];
                u.push(o.toUpperCase());
                u = u.concat(l);
                a.push(u)
            }
            return a
        }

        function h(t, e, i, n) {
            var r = l();
            return r.createLinearGradient(t, e, i, n)
        }

        function f(t, e, i, n, r, a) {
            var s = l();
            return s.createRadialGradient(t, e, i, n, r, a)
        }

        function p(t, e) {
            var i = l();
            return i.createPattern(t, e)
        }

        function _(t) {
            var e = y(t, function(t) {
                return {
                    x: t[0],
                    y: t[1]
                }
            });
            return e
        }

        function m(t) {
            var e = 1;
            if(null != t.a) e = t.a;
            return "rgba(" + t.r + ", " + t.g + ", " + t.b + ", " + e + ")"
        }

        function g(t) {
            var e = {},
                i = Math.round(t.h),
                n = Math.round(255 * t.s / 100),
                r = Math.round(255 * t.b / 100);
            if(0 == n) e.r = e.g = e.b = r;
            else {
                var a = r,
                    s = (255 - n) * r / 255,
                    o = (a - s) * (i % 60) / 60;
                if(360 == i) i = 0;
                if(i < 60) {
                    e.r = a;
                    e.b = s;
                    e.g = s + o
                } else if(i < 120) {
                    e.g = a;
                    e.b = s;
                    e.r = a - o
                } else if(i < 180) {
                    e.g = a;
                    e.r = s;
                    e.b = s + o
                } else if(i < 240) {
                    e.b = a;
                    e.r = s;
                    e.g = a - o
                } else if(i < 300) {
                    e.b = a;
                    e.g = s;
                    e.r = s + o
                } else if(i < 360) {
                    e.r = a;
                    e.g = s;
                    e.b = a - o
                } else {
                    e.r = 0;
                    e.g = 0;
                    e.b = 0
                }
            }
            return {
                r: Math.round(e.r),
                g: Math.round(e.g),
                b: Math.round(e.b)
            }
        }
        var v, y = t("./util").arrayMap;
        i({
            createSketchpad: r,
            loadImage: s,
            createAudio: o,
            createHiddenSketchpad: a,
            measureText: c,
            fontToString: u,
            svgToArray: d,
            createLinearGradient: h,
            createRadialGradient: f,
            createPattern: p,
            arraysToPointArrays: _,
            colorToString: m,
            fixPixelRatio: n,
            hsb2rgb: g
        })
    };
    n["/sprites/container.js"] = function(t, e, i) {
        var n = t("../treeactor").TreeActor,
            r = n.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    if(void 0 != t) this.setreceiveBubble(t);
                    else this.setreceiveBubble(!1)
                },
                emitDisplayObjects: function() {},
                emitInteractiveObjects: function() {},
                emitInteractiveObjects: function() {},
                enableAutoRepaint: function() {},
                disableAutoRepaint: function() {}
            }, ["receiveBubble"]);
        i(r)
    };
    n["/sprites/composite.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = n.READONLY,
            a = n.CUSTOM_SETTER,
            s = t("./sprite"),
            o = t("../gprims/compositegprim").CompositeTrait,
            l = s.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this.subTraits(0).__init(t)
                }
            }, [
                [r("type"), o.grant("type")],
                [a("lineWidth"), o.grant("lineWidth")],
                [a("gprims"), o.grant("gprims")],
                [a("strokeStyle"), o.grant("strokeStyle")],
                [a("fillStyle"), o.grant("fillStyle")],
                [a("shadowColor"), o.grant("shadowColor")]
            ].concat(o.grantMany(["fillFlag", "strokeFlag", "id", "tag", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineCap", "lineJoin", "miterLimit", "lineDash", "strokeScaleInvariant"])), [o]);
        i(l)
    };
    n["/lib/debug.js"] = function(t, e, i) {
        var n = {
            log: function(t) {
                console.log(t)
            },
            warning: function(t) {
                console.log("!!!WARNING!!!-->" + t + "<-- ")
            },
            error: function(t) {
                console.log("!!!ERROR!!!-->" + t + "<-- ")
            },
            assert: function(t, e) {
                if(t) return !0;
                else {
                    var i = void 0 === e ? "assert !!!" : e;
                    console.log("exception throwed:  " + i);
                    throw i
                }
            }
        };
        i(n)
    };
    n["/singlegprimtreeactor.js"] = function(t, e, i) {
        var n = (t("./lib/colortraits").Trait, t("treeactor").TreeActor),
            r = (t("./lib/colortraits").READONLY, t("./lib/colortraits").PRIVATE),
            a = t("./lib/colortraits").CUSTOM_SETTER,
            s = t("./lib/geometry"),
            o = t("pidget"),
            l = o.DisplayObject,
            c = o.InteractiveObject,
            u = o.EffectedDisplayObject,
            d = o.EffectedInteractiveObject,
            h = n.extend({
                initialize: function(t) {
                    function e(t) {
                        if("clipperChanged" == t.type || "effectChanged" == t.type) {
                            var e = {
                                gprim: n.gprim(),
                                matrix: n.matrix(),
                                actor: n
                            };
                            if(!t.clipper && !t.effect) {
                                n.setdisplayObject(l.create(e));
                                n.setinteractiveObject(c.create(e))
                            } else {
                                n.setdisplayObject(u.create(e));
                                n.setinteractiveObject(d.create(e))
                            }
                        }
                    }
                    this.execProto("initialize", t);
                    var i = void 0 == t ? this : void 0 == t.gprim ? this : t.gprim;
                    this._t.setgprim(i);
                    this._t.setdisplayObject(l.create({
                        gprim: i,
                        worldMatrix: this.matrix(),
                        effect: {
                            ownerActor: this
                        },
                        actor: this
                    }));
                    this._t.setinteractiveObject(c.create({
                        gprim: i,
                        worldMatrix: this.matrix(),
                        actor: this
                    }));
                    this._t.setopenVisRefs(0);
                    var n = this;
                    this.subscribe("system", e);
                    this.setbeforeBbox(void 0)
                },
                emitDisplayObjects: function(t) {
                    this._t.displayObject().setworldMatrix(this.matrix());
                    t.push(this._t.displayObject());
                    return t
                },
                emitInteractiveObjects: function(t) {
                    this._t.interactiveObject().setworldMatrix(this.matrix());
                    t.push(this._t.interactiveObject());
                    return t
                },
                hookVisible: function(t) {
                    this.execProto("hookActorVisible", t);
                    this.hook(this._t, "gprim", t, "a");
                    this.gprim().hookGPrimVisible(t)
                },
                unhookVisible: function(t) {
                    this.execProto("unhookActorVisible", t);
                    this.unhook(this._t, "gprim", t, "a");
                    this.gprim().unhookGPrimVisible(t)
                },
                __openVisibleStream: function(t) {
                    if(0 == this._t.openVisRefs()) {
                        var e = this,
                            i = function(t) {
                                e.notify("system", "visibleChanged")
                            };
                        this.hookVisible(i);
                        this._t.setopenVisCB(i)
                    }
                    this._t.setopenVisRefs(this._t.openVisRefs() + 1)
                },
                __closeVisibleStream: function() {
                    this._t.setopenVisRefs(this._t.openVisRefs() - 1);
                    if(0 == this._t.openVisRefs()) this.unhookVisible(this._t.openVisCB())
                },
                enableAutoRepaint: function() {
                    this._t.__openVisibleStream();
                    var t = this,
                        e = this.subscribe("system", function(e) {
                            if("visibleChanged" == e) t.ownerScene().owner().invalidate()
                        });
                    this.setvisobserver(e)
                },
                enableDirtyRects: function() {
                    this.setbeforeBbox(this.bbox());
                    this._t.__openVisibleStream();
                    var t = this,
                        e = this.subscribe("system", function() {
                            var e = t.beforeBbox();
                            t.ownerScene().calculateDirtyRect(e);
                            t.ownerScene().calculateDirtyRect(t.bbox());
                            t.setbeforeBbox(t.bbox())
                        });
                    this._t.setdirtyobserver(e)
                },
                disableDirtyRects: function() {
                    this._t.__closeVisibleStream();
                    this._t.dirtyobserver().dispose()
                },
                disableAutoRepaint: function() {
                    this._t.__closeVisibleStream();
                    this._t.visobserver().dispose()
                },
                bbox: function() {
                    return s.rectApplyMatrixToBoundRect(this.gprim().bbox(), this.matrix())
                },
                setgprim: function(t) {
                    this._t.setgprim(t);
                    this._t.displayObject().setgprim(t);
                    this._t.interactiveObject().setgprim(t);
                    return this
                }
            }, [a("gprim"), "displayObject", "interactiveObject", "visobserver", "dirtyobserver", "beforeBbox", r("openVisRefs"), r("openVisCB")]);
        i({
            SingleGPrimTreeActor: h
        })
    };
    n["/gprims/proceduregprim.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = t("./gprim").GPrimTrait,
            a = n.Klass,
            s = n.READONLY,
            o = {},
            l = {
                x: 0,
                y: 0,
                width: 0,
                height: 0
            },
            c = r.extend({
                __init: function(t) {
                    this.subTraits(0).__init(t);
                    this._t.settype("procedure");
                    if(void 0 == t) t = o;
                    this.draw = void 0 == t.draw ? function(t, e, i) {} : t.draw;
                    this.localBbox = void 0 == t.localBbox ? function() {
                        return l
                    } : t.localBbox;
                    this.localInside = void 0 == t.localInside ? function(t, e) {
                        return !1
                    } : t.localInside
                }
            }, r.grantAll()),
            u = a.create({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t)
                }
            }, [
                [s("type"), c.grant("type")]
            ].concat(c.grantMany(["id", "tag"])), [c]);
        i({
            ProcedureTrait: c,
            ProcedureKlass: u
        })
    };
    n["/sprites/path.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = n.READONLY,
            a = n.CUSTOM_SETTER,
            s = t("./sprite"),
            o = t("../gprims/pathgprim").PathTrait,
            l = s.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this.subTraits(0).__init(t)
                }
            }, [
                [r("type"), o.grant("type")],
                [a("lineWidth"), o.grant("lineWidth")],
                [a("pathElements"), o.grant("pathElements")],
                [a("strokeStyle"), o.grant("strokeStyle")],
                [a("fillStyle"), o.grant("fillStyle")],
                [a("shadowColor"), o.grant("shadowColor")]
            ].concat(o.grantMany(["fillFlag", "strokeFlag", "id", "tag", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineCap", "lineJoin", "miterLimit", "lineDash", "tolerance", "strokeScaleInvariant"])), [o]);
        i(l)
    };
    n["/newanimate.js"] = function(t, e, i) {
        function n(t, e) {
            e -= t = +t;
            if(t.toString().indexOf(".") < 0 && e.toString().indexOf(".") < 0) return function(i) {
                return parseInt(t + e * i)
            };
            else return function(i) {
                return t + e * i
            }
        }

        function r(t, e) {
            var i = n(t.r, e.r),
                r = n(t.g, e.g),
                a = n(t.b, e.b),
                s = void 0 != t.a ? t.a : 1,
                o = void 0 != e.a ? e.a : 1,
                l = n(s, o);
            return function(t) {
                return {
                    r: Math.floor(i(t)),
                    g: Math.floor(r(t)),
                    b: Math.floor(a(t)),
                    a: l(t)
                }
            }
        }

        function a(t, e) {
            var i, n = [],
                r = [],
                a = t.length,
                s = e.length,
                o = Math.min(t.length, e.length);
            for(i = 0; i < o; ++i) n.push(l(t[i], e[i]));
            for(; i < a; ++i) r[i] = t[i];
            for(; i < s; ++i) r[i] = e[i];
            return function(t) {
                for(i = 0; i < o; ++i) r[i] = n[i](t);
                return r
            }
        }

        function s(t, e) {
            var i, n = {},
                r = {};
            for(i in t)
                if(i in e) n[i] = l(t[i], e[i]);
                else r[i] = t[i];
            for(i in e)
                if(!(i in t)) r[i] = e[i];
            return function(t) {
                for(i in n) r[i] = n[i](t);
                return r
            }
        }

        function o(t, e) {
            return function(t) {
                return e
            }
        }

        function l(t, e) {
            return g.isNumber(t) || g.isNumber(e) ? n(t, e) : g.isObject(t) ? void 0 != t.r ? r(t, e) : s(t, e) : g.isArray(t) ? a(t, e) : o(t, e)
        }

        function c(t, e, i) {
            var n, r = l(e, i),
                a = "set" + t;
            n = function(t, e) {
                var i = r(e);
                t[a].call(t, i)
            };
            return n
        }

        function u(t, e, i) {
            var n = i;
            if(g.isArray(i));
            else
                for(var n = new Array(t.size()), r = 0; r < n.length; ++r) n[r] = i;
            return n
        }

        function d(t, e, i, n) {
            var r = [],
                i = i ? i : t.property(e);
            i = u(t, e, i);
            n = u(t, e, n);
            var a = 0;
            t.each(function(t) {
                r.push(c(e, i[a], n[a]));
                ++a
            });
            return r
        }

        function h(t, e, i, n) {
            var r = {};
            if(!i) {
                i = {};
                for(var a = 0; a < e.length; ++a) {
                    var s = e[a];
                    i[s] = t.property(s)
                }
            }
            for(var a = 0; a < e.length; ++a) {
                var s = e[a],
                    o = i[s] ? i[s] : t.property(s);
                r[s] = d(t, s, o, n[s])
            }
            return r
        }

        function f(t, e, i, n) {
            var r = {};
            i = i ? i : {};
            for(var a = 0; a < e.length; ++a) {
                var s = e[a],
                    o = i[s];
                if(!o) o = t[s].call(t);
                r[s] = c(s, o, n[s])
            }
            return r
        }
        var p, _, m, g = t("./lib/util"),
            v = t("./lib/debug"),
            y = t("./lib/colortraits").Klass,
            b = t("./lib/colortraits").Trait,
            x = g.arrayForEach,
            $ = g.arraySome,
            w = g.arrayFilter,
            k = (g.identifier, g.objectForEach),
            S = {
                linear: function(t) {
                    return t
                },
                set: function(t) {
                    return Math.floor(t)
                },
                discrete: function(t) {
                    return Math.floor(t)
                },
                sine: function(t) {
                    return .5 - .5 * Math.cos(t * Math.PI)
                },
                sproing: function(t) {
                    return 1.05263157894737 * (.5 - .5 * Math.cos(3.59261946538606 * t))
                },
                square: function(t) {
                    return t * t
                },
                cube: function(t) {
                    return t * t * t
                },
                sqrt: function(t) {
                    return Math.sqrt(t)
                },
                curt: function(t) {
                    return Math.pow(t, -.333333333333)
                }
            },
            C = (S["linear"], S["set"], S["discrete"], S["sine"], S["sproing"], S["square"], S["cube"], S["sqrt"], S["curt"], function(t, e) {
                return function(i) {
                    return t(e - i)
                }
            }),
            T = function(t, e, i) {
                return function(n) {
                    var r, a, s;
                    for(s = 0, r = i; s < e.length; s++) {
                        a = e[s](n);
                        r = t(r, a)
                    }
                    return r
                }
            };
        ! function() {
            var t = function(t) {
                    var e = function(i, n) {
                            var r = "object" == typeof i ? {} : [];
                            v.assert(typeof i == typeof n, "logical error");
                            k(i, function(i, a) {
                                if("object" == typeof i || "array" == typeof i) r[a] = e(i, n[a]);
                                else r[a] = t(i, n[a])
                            });
                            return r
                        },
                        i = function(e, n) {
                            var r = "object" == typeof e ? {} : [];
                            k(e, function(e, a) {
                                if("object" == typeof e || "array" == typeof e) r[a] = i(e, n);
                                else r[a] = t(e, n)
                            });
                            return r
                        },
                        n = function(t, e) {
                            return i(e, t)
                        },
                        r = function(e, i) {
                            return t(e, i)
                        };
                    return {
                        objectobject: e,
                        arrayarray: e,
                        objectarray: e,
                        arrayobject: e,
                        objectnumber: i,
                        arraynumber: i,
                        numberobject: n,
                        numberarray: n,
                        numbernumber: r
                    }
                },
                e = function(t) {
                    return function(e, i) {
                        if(void 0 == e || void 0 == i) return e || i;
                        var n = typeof e + typeof i;
                        if(t[n]) return t[typeof e + typeof i](e, i);
                        else v.error("I donot known how to opeate the two value")
                    }
                },
                i = e(t(function(t, e) {
                    return t + e
                })),
                n = e(t(function(t, e) {
                    return t * e
                })),
                r = e(t(function(t, e) {
                    return t - e
                })),
                a = (e(t(function(t, e) {
                    return t / e
                })), function(t) {
                    return function() {
                        if(1 == arguments.length) return arguments[0];
                        for(var e = [], i = 0; i < arguments.length; i++) e.push(arguments[i]);
                        return T(t, e, void 0)
                    }
                });
            p = a(i);
            _ = a(r);
            m = a(n)
        }();
        var E = y.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this._isPaused = !1;
                    this._state = "prepare";
                    this._startTime = -1;
                    this._curTime = -1;
                    this.setvariable(t.variable);
                    this.setduration(t.duration);
                    this.setfrom(t.from);
                    this.setto(t.to);
                    var e = S.linear;
                    if(g.isString(t.ease)) e = S(t.ease);
                    else if(g.isFunction(t.ease)) e = t.ease;
                    this.setease(e);
                    this.settarget(t.target)
                },
                prepare: function() {
                    this._state = "prepare";
                    this._startTime = -1;
                    this._curTime = -1;
                    this.doPrepare(this.target())
                },
                doPrepare: function(t) {},
                isDone: function() {
                    return this._curTime - this._startTime >= this.duration()
                },
                curTime: function() {
                    return this._curTime
                },
                startTime: function() {
                    return this._startTime
                },
                update: function(t) {
                    if(!this.isPaused() && !this.isDone()) {
                        if("prepare" == this._state) {
                            this._startTime = t;
                            this._state = "running"
                        }
                        var e = (t - this._startTime) / this.duration();
                        if(e > 1) e = 1;
                        this.doUpdate(e);
                        var i = this._curTime;
                        this._curTime = t;
                        if(this.hasCBs()) this.cb(t - this._startTime, i - this._startTime)
                    }
                },
                regCBsByPercent: function(t) {
                    var e = this.duration();
                    return this.regCBsByTime(t.map(function(t) {
                        return {
                            time: t.time * e,
                            cb: t.cb
                        }
                    }))
                },
                regCBsByTime: function(t) {
                    if(!this._cbs) this._cbs = [];
                    this._cbs = this._cbs.concat(t);
                    this._cbs.sort(function(t, e) {
                        return t.time - e.time
                    })
                },
                regCBByPercent: function(t, e) {
                    return this.regCBByTime(t * this.duration(), e)
                },
                regCBByTime: function(t, e) {
                    if(!this._cbs) this._cbs = [];
                    this._cbs.push({
                        time: t,
                        cb: e
                    });
                    this._cbs.sort(function(t, e) {
                        return t.time - e.time
                    })
                },
                cancelCBByTime: function(t, e) {
                    this._cbs = w(this._cbs, function(i) {
                        if(i.time == t && (void 0 == e || e == i.cb)) return !1;
                        else return !0
                    });
                    if(0 == this._cbs.length) this.rmSlot("_cbs")
                },
                cancelCBByPercent: function(t, e) {
                    return this.cancelCBByTime(t * this.duration(), e)
                },
                cancelAllCBs: function() {
                    this._cbs = void 0
                },
                hasCBs: function() {
                    return void 0 != this._cbs
                },
                cb: function(t, e) {
                    if(this._cbs && e != t) {
                        var i = t > e,
                            n = [];
                        x(this._cbs, function(r) {
                            if(i && e < r.time && r.time <= t || !i && t <= r.time && r.time < e) n.push(r)
                        });
                        if(!i) n = n.reverse();
                        x(n, function(t) {
                            t.cb(i)
                        })
                    }
                },
                doUpdate: function(t) {
                    v.assert(!1, "Animation base-->should not in")
                },
                copy: function() {
                    v.assert(!1, "Animation base-->should not in")
                },
                reverse: function() {
                    v.assert(!1, "Animation base-->should not in")
                },
                pause: function() {
                    if(1 == this._isPaused) v.warning("pause paused animation");
                    this._isPaused = !0
                },
                resume: function() {
                    if(0 == this._isPaused) v.warning("resume a unpaused animation");
                    this._isPaused = !1
                },
                isPaused: function() {
                    return 1 == this._isPaused
                },
                destroy: function(t) {
                    var t = 1 / 0,
                        e = this._curTime;
                    this._curTime = t;
                    this.cb(t - this._startTime, e - this._startTime)
                }
            }, ["variable", "duration", "ease", "target", "from", "to"]),
            I = E.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    if(t.animations) this.setanimations(t.animations);
                    else this.setanimations([]);
                    for(var e = 0, i = 0; i < t.animations.length; ++i)
                        if(t.animations[i].duration() > e) e = t.animations[i].duration();
                    this.setduration(e)
                },
                doPrepare: function() {
                    x(this.animations(), function(t) {
                        t.prepare()
                    })
                },
                isDone: function() {
                    return this.animations().every(function(t) {
                        return t.isDone()
                    })
                },
                update: function(t) {
                    if("prepare" == this._state) {
                        this._startTime = t;
                        this._state = "running"
                    }
                    var e = this._curTime;
                    this._curTime = t;
                    x(this.animations(), function(e) {
                        e.update(t)
                    });
                    if(this.hasCBs()) this.cb(t - this._startTime, e - this._startTime)
                },
                copy: function() {
                    var t = this.animations().map(function(t) {
                        return t.copy()
                    });
                    return I.create({
                        animations: t
                    })
                },
                reverse: function() {
                    var t = this.animations().map(function(t) {
                        return t.reverse()
                    });
                    return I.create({
                        animations: t.reverse()
                    })
                },
                totalTime: function() {
                    var t = 0;
                    x(this.animations(), function(e, i) {
                        var n = e.totalTime();
                        t = t > n ? t : n
                    });
                    return t
                },
                value: function(t) {
                    return this.animations().map(function(e, i) {
                        return e.value(t)
                    })
                }
            }, ["animations"]),
            A = E.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    v.assert(t.animations, "SequenceAnimation constructor param error");
                    this.setanimations(t.animations);
                    this._curanimation = null;
                    if("number" == typeof t.interval) this._interval = t.interval;
                    else this._interval = 0;
                    var e = 0,
                        i = this._interval,
                        n = 0;
                    this.setanimations(this.animations().map(function(t, r) {
                        var a = {
                            ani: t,
                            startTime: e + r * i
                        };
                        e += t.duration();
                        n += i + t.duration();
                        return a
                    }));
                    this.setduration(n);
                    this._curAniIdx = -1
                },
                doPrepare: function() {
                    if(0 != this.animations().length) this._curAniIdx = -1
                },
                update: function(t) {
                    var e = this._curAniIdx,
                        i = this.animations();
                    if("prepare" == this._state) {
                        this._startTime = t;
                        this._state = "running"
                    }
                    var n = this._curTime;
                    this._curTime = t;
                    if(e != -1 && i[e].startTime <= t && (e == i.length - 1 || t < i[e + 1].startTime)) i[e].ani.update(t);
                    else {
                        var r = -1;
                        $(i, function(e, i, n) {
                            if(i == n.length - 1) {
                                r = i;
                                return !0
                            }
                            if(e.startTime <= t && t <= n[i + 1].startTime) {
                                r = i;
                                return !0
                            }
                            return !1
                        });
                        v.assert(r != -1, "logical error");
                        this._curAniIdx = r;
                        var a = i[r].ani;
                        a.prepare();
                        a.update(i[r].startTime);
                        if(t != i[r].startTime) a.update(t)
                    }
                    if(this.hasCBs()) this.cb(t - this._startTime, n - this._startTime)
                },
                copy: function() {
                    var t = this.animations().map(function(t) {
                        return t.ani.copy()
                    });
                    return A.create({
                        animations: t
                    })
                },
                reverse: function() {
                    var t = this.animations().map(function(t) {
                        return t.ani.reverse()
                    });
                    return A.create({
                        animations: t.reverse()
                    })
                },
                totalTime: function() {
                    var t = 0,
                        e = this._interval;
                    x(this.animations(), function(i, n) {
                        t += i.ani.totalTime() + e
                    });
                    t -= e;
                    return t
                },
                value: function(t) {
                    var e, i = this.totalTime(),
                        n = this._interval;
                    t = t > i ? i : t;
                    $(this.animations(), function(i, r) {
                        var a = i.ani.totalTime();
                        if(t > a + n) {
                            t -= a + n;
                            return !1
                        } else {
                            e = i.ani;
                            return !0
                        }
                    });
                    v.assert(e, "canont find animation");
                    return e.value(t)
                }
            }, ["animations"]),
            M = b.extend({
                then: function(t) {
                    var e = [this];
                    if(g.isArray(t))
                        for(var i = 0; i < t.length; ++i) e.push(t[i]);
                    else e.push(t);
                    return A.create({
                        animations: e
                    })
                },
                and: function(t) {
                    var e = [this];
                    if(g.isArray(t))
                        for(var i = 0; i < t.length; ++i) e.push(t[i]);
                    else e.push(t);
                    return I.create({
                        animations: e
                    })
                }
            }),
            D = E.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this.setvariable(t.variable)
                },
                doUpdate: function(t) {
                    var e = (this.target(), this.ease(t));
                    this.variable(e)
                },
                copy: function() {
                    var t = D.create({
                        variable: this.variable(),
                        timeline: this.ease(),
                        duration: this.duration(),
                        target: this.target()
                    });
                    return t
                },
                reverse: function() {
                    var t = D.create({
                        variable: this.variable(),
                        timeline: C(this.ease(), this.duration()),
                        totalTime: this.duration(),
                        target: this.target()
                    });
                    return t
                },
                value: function(t) {}
            }, ["tweenFun"], [M]),
            P = D.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this.setattr(t.attr)
                },
                _doAttrUpdate: function(t) {
                    var e = this.target(),
                        i = this.ease()(t);
                    if(e.isSelection) {
                        var n = this.tweenFun();
                        if(!n) {
                            n = d(e, this.attr(), this.from(), this.to());
                            this.settweenFun(n)
                        }
                        var r = 0;
                        e.each(function(t) {
                            n[r](t, i);
                            ++r
                        })
                    } else {
                        if(!this.tweenFun()) {
                            var a = this.attr(),
                                s = this.from() ? this.from() : e[a].call(e, a);
                            this.settweenFun(c(this.attr(), s, this.to()))
                        }
                        this.tweenFun()(e, i)
                    }
                },
                _doAttrsUpdate: function(t) {
                    var e = this.target(),
                        i = this.ease()(t);
                    if(e.isSelection) {
                        var n = this.tweenFun(),
                            r = this.attr();
                        if(!n) {
                            n = h(e, r, this.from(), this.to());
                            this.settweenFun(n)
                        }
                        var a = 0;
                        e.each(function(t) {
                            for(var e = 0; e < r.length; ++e) {
                                var s = r[e];
                                n[s][a](t, i)
                            }++a
                        })
                    } else {
                        var n = this.tweenFun(),
                            r = this.attr();
                        if(!n) {
                            n = f(e, r, this.from(), this.to());
                            this.settweenFun(n)
                        }
                        for(var a = 0; a < r.length; ++a) {
                            var s = r[a];
                            n[s](e, i)
                        }
                    }
                },
                setattr: function(t) {
                    this.set_attr(t);
                    if(g.isString(t)) this.doUpdate = this._doAttrUpdate;
                    else this.doUpdate = this._doAttrsUpdate
                },
                attr: function() {
                    return this._attr()
                }
            }, ["_attr", "tweenFun"]);
        i({
            AnimationBase: E,
            Animation: D,
            AttrAnimation: P,
            SequenceAnimation: A,
            ParallelAnimation: I
        })
    };
    n["/colorbox-simple.js"] = function(t, e, i) {
        var n = {};
        n.Stage = t("stage").Stage;
        var r = t("/sprites/all");
        for(var a in r)
            if(r.hasOwnProperty(a)) n[a] = r[a];
        var s = t("./selection/selection"),
            o = t("./selection/selector");
        n.colortraits = t("./lib/colortraits");
        n.selection = s;
        n.selector = o;
        n.EventStreamTrait = t("./lib/eventstream");
        n.createLinearGradient = t("./lib/helper").createLinearGradient;
        n.createRadialGradient = t("./lib/helper").createRadialGradient;
        n.animate = t("./newanimate");
        n.animationMgr = t("./animationmgr");
        i(n)
    };
    n["/interactor.js"] = function(t, e, i) {
        function n(t, e) {
            var i = e.mouseX - t.mouseX,
                n = e.mouseY - t.mouseY;
            return i * i + n * n < l * l
        }
        var r = t("./lib/colortraits").Klass,
            a = t("./lib/colortraits").Trait,
            s = (t("./lib/debug"), t("./thirdlib/rx/all")),
            o = t("./lib/util").objectDotCreate,
            l = 2,
            c = r.extend({
                initialize: function(t) {
                    this.settype(t);
                    this.setsubject(new s.Subject);
                    this.setobservable(this.subject().asObservable())
                }
            }, ["observable", "subject", "type"]),
            u = c.extend({
                initialize: function() {
                    this.execProto("initialize", "mouseOver")
                }
            }),
            d = c.extend({
                initialize: function() {
                    this.execProto("initialize", "mouseMoved")
                }
            }),
            h = c.extend({
                initialize: function() {
                    this.execProto("initialize", "mouseOut")
                }
            }),
            f = c.extend({
                initialize: function() {
                    this.execProto("initialize", "keyPressed")
                }
            }),
            p = c.extend({
                initialize: function() {
                    this.execProto("initialize", "keyReleased")
                }
            }),
            _ = c.extend({
                initialize: function() {
                    this.execProto("initialize", "mousewheel")
                }
            }),
            m = c.extend({
                initialize: function() {
                    this.execProto("initialize", "mousePressed")
                }
            }),
            g = c.extend({
                initialize: function() {
                    this.execProto("initialize", "mouseReleased")
                }
            }),
            v = a.extend({
                __init: function(t) {
                    this._type = "mouseReleased";
                    this.setobservable(t.getInteractObservable(this.type()).delay(0))
                }
            }),
            y = (c.extend({
                initialize: function(t) {
                    this.execProto("initialize", "mouseReleased");
                    this.subTraits(0).__init(t)
                }
            }, [], [v]), c.extend({
                initialize: function(t) {
                    this.execProto("initialize", "mouseClicked");
                    this._t.__bindActor(t)
                },
                __bindActor: function(t) {
                    var e = 0,
                        i = !1,
                        r = t.getInteractObservable("mousePressed").select(function(t) {
                            if(void 0 != t.sourceEvt) e = t.sourceEvt.button;
                            else i = !0;
                            return t
                        }),
                        a = t.getInteractObservable("mouseMoved").where(function(t) {
                            if(i) return !0;
                            else return t.sourceEvt.button === e
                        }),
                        s = t.getInteractObservable("mouseReleased").where(function(t) {
                            if(i) return !0;
                            else return t.sourceEvt.button === e
                        }),
                        e = 0,
                        l = r.then(function(t) {
                            var i = t,
                                r = o(i);
                            r.type = "mouseClicked";
                            r.button = e;
                            return a.takeUntil(s).skipWhile(function(t) {
                                r = o(t);
                                r.type = "mouseClicked";
                                r.button = e;
                                return n(i, t)
                            }).take(1).aggregate(r, function(t, e) {
                                return !1
                            }).where(function(t) {
                                return t
                            })
                        });
                    this.setobservable(l)
                }
            })),
            b = c.extend({
                initialize: function(t) {
                    this.execProto("initialize", "mouseDragged");
                    this._t.__bindActor(t)
                },
                __bindActor: function(t) {
                    var e, i, r, a = t.getInteractObservable("mousePressed"),
                        s = t.getInteractObservable("mouseMoved"),
                        l = t.getInteractObservable("mouseReleased"),
                        c = !1,
                        u = !1,
                        d = this.subject();
                    a.subscribe(function(t) {
                        e = t;
                        c = !0;
                        i = s.subscribe(function(t) {
                            if(!n(e, t)) {
                                r = t;
                                var i = o(t);
                                i.type = "mouseDragged";
                                if(c) {
                                    i.dragStart = !0;
                                    c = !1;
                                    u = !0
                                }
                                d.onNext(i)
                            }
                        })
                    });
                    l.subscribe(function(t) {
                        if(i) {
                            i.dispose();
                            i = void 0
                        }
                        if(u) {
                            var e = o(r);
                            e.type = "mouseDragged";
                            e.dragEnd = !0;
                            d.onNext(e);
                            u = !1;
                            r = void 0
                        }
                    });
                    return
                }
            }),
            x = c.extend({
                initialize: function() {
                    this.execProto("initialize", "twoFingerTouch")
                }
            });
        setShakeSpan = function(t) {
            t = t
        };
        i({
            Interactor: c,
            MouseOverInteractor: u,
            MouseOutInteractor: h,
            MouseMovedInteractor: d,
            KeyPressedInteractor: f,
            KeyReleasedInteractor: p,
            MousewheelInteractor: _,
            MouseReleasedInteractor: g,
            MousePressedInteractor: m,
            MouseClickedInteractor: y,
            MouseDraggedInteractor: b,
            Interactors: {
                mouseOver: u,
                mouseOut: h,
                mouseMoved: d,
                mousePressed: m,
                mouseReleased: g,
                keyPressed: f,
                keyReleased: p,
                mousewheel: _,
                mouseDragged: b,
                mouseClicked: y,
                twoFingerTouch: x
            },
            setShakeSpan: setShakeSpan
        })
    };
    n["/gprims/circlegprim.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = t("./shaptrait").ShapTrait,
            a = t("../lib/geometry"),
            s = n.Klass,
            o = n.READONLY,
            l = n.CUSTOM_SETTER,
            c = {
                radius: 3,
                fillStyle: {
                    r: 0,
                    g: 0,
                    b: 0
                }
            },
            u = r.extend({
                __init: function(t) {
                    this.subTraits(0).__init(t);
                    if(void 0 == t || void 0 == t.fillStyle && void 0 == t.strokeStyle) this.setfillStyle(c.fillStyle);
                    if(void 0 == t) t = c;
                    this._t.setradius(void 0 == t.radius ? c.radius : t.radius);
                    this._t.settype("circle");
                    this._t.setlength(void 0)
                },
                setradius: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setradius(t);
                    this._t.setlength(void 0);
                    return this
                },
                localBbox: function() {
                    var t = this._t.radius(),
                        e = 0;
                    if(this._t.strokeFlag() || void 0 != this._t.strokeStyle() && 0 != this._t.strokeStyle().a) e = this.getRealLineWidth();
                    return a.rectMake(0 - e / 2, 0 - e / 2, 2 * t + e, 2 * t + e)
                },
                localInside: function(t, e) {
                    var i = this._t.radius(),
                        n = Math.pow(t - i, 2) + Math.pow(e - i, 2);
                    return n <= i * i
                },
                localHook: function(t) {
                    this.hookMany(this._t, ["fillFlag", "strokeFlag", "strokeScaleInvariant", "radius", "strokeStyle", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineDash", "anchorPoint"], t, "a")
                },
                unlocalHook: function(t) {
                    this.unhookMany(this._t, ["fillFlag", "strokeFlag", "strokeScaleInvariant", "radius", "strokeStyle", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineDash", "anchorPoint"], t, "a")
                },
                length: function() {
                    var t = this._t.length();
                    if(void 0 == t) {
                        var e = this._t.radius();
                        t = 2 * Math.PI * e;
                        this._t.setlength(t)
                    }
                    return t
                },
                pointAtPercent: function(t) {
                    var e = this.radius();
                    if(t <= 0 || t >= 1) return {
                        x: 2 * e,
                        y: e
                    };
                    var i = (this.length(), t * Math.PI * 2);
                    return {
                        x: e * Math.cos(i) + e,
                        y: e * Math.sin(i) + e
                    }
                },
                percentAtLength: function(t) {
                    var e = this._t.length();
                    if(t < 0) return 0;
                    if(e < t) return 1;
                    else return t / e
                }
            }, ["radius"].concat(r.grantMany(["fillFlag", "strokeFlag", "strokeScaleInvariant", "cache", "type", "id", "tag", "strokeStyle", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineDash", "length", "anchorPoint"]))),
            d = s.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t)
                }
            }, [
                [o("type"), u.grant("type")],
                [l("radius"), u.grant("radius")],
                [l("strokeStyle"), u.grant("strokeStyle")],
                [l("fillStyle"), u.grant("fillStyle")],
                [l("shadowColor"), u.grant("shadowColor")]
            ].concat(u.grantMany(["fillFlag", "strokeFlag", "strokeScaleInvariant", "id", "tag", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineDash"])), [u]);
        i({
            CircleKlass: d,
            CircleTrait: u
        })
    };
    n["/sprites/bboxHelper.js"] = function(t, e, i) {
        var n = t("../lib/geometry"),
            r = t("../lib/helper"),
            a = function(t, e, i) {
                var r = t,
                    a = e > 0 ? e : 0;
                if(null != i && 0 == i.a) a = 0;
                return n.rectMake(0 - a / 2, 0 - a / 2, 2 * r + a, 2 * r + a)
            },
            s = function(t, e, i) {
                var n = {
                    font: {
                        style: "normal",
                        weight: 400,
                        size: 16,
                        family: "Arial"
                    }
                };
                if(void 0 == t || "" == t) return {
                    width: 0,
                    height: 0
                };
                if(void 0 == e) e = n.font;
                else {
                    e.style = void 0 == e.style ? n.font.style : e.style;
                    e.weight = void 0 == e.weight ? n.font.weight : e.weight;
                    e.size = void 0 == e.size ? n.font.size : e.size;
                    e.family = void 0 == e.family ? n.font.family : e.family
                }
                var a = e.size,
                    s = r.measureText(t, e).width,
                    o = {
                        width: s,
                        height: a
                    };
                if(i) {
                    i = Math.abs(i);
                    return {
                        width: o.width * Math.cos(i) + o.height * Math.sin(i),
                        height: o.width * Math.sin(i) + o.height * Math.cos(i)
                    }
                }
                return o
            },
            o = function(t, e, i) {
                var n = {
                    styles: [{
                        lineSpacing: 0,
                        align: "left",
                        font: {
                            style: "normal",
                            weight: 400,
                            size: 16,
                            family: "Arial"
                        },
                        fillStyle: {
                            r: 0,
                            g: 0,
                            b: 0
                        },
                        strokeStyle: {
                            r: 0,
                            g: 0,
                            b: 0
                        }
                    }]
                };
                if(void 0 == t || t == []) return {
                    width: 0,
                    height: 0
                };
                else var a = t;
                for(var e = void 0 == e ? n.styles : e, s = e.length, o = void 0 == e[0].font ? n.styles[0].font : e[0].font, l = void 0 == e[0].fillStyle ? n.styles[0].fillStyle : e[0].fillStyle, c = void 0 == e[0].strokeStyle ? n.styles[0].strokeStyle : e[0].strokeStyle, u = (void 0 == e[0].align ? n.styles[0].align : e[0].align, void 0 == e[0].lineSpacing ? n.styles[0].lineSpacing : e[0].lineSpacing), d = 0, h = 0, f = 0, p = 0, _ = a.length; p < _; p++) {
                    f += o.size + u;
                    h = r.measureText(a[p], o).width;
                    if(p + 1 < s) {
                        var m = e[p + 1];
                        o = void 0 !== m.font ? m.font : o;
                        l = void 0 !== m.fillStyle ? m.fillStyle : l;
                        c = void 0 !== m.strokeStyle ? m.strokeStyle : c;
                        u = void 0 !== m.lineSpacing ? m.lineSpacing : u
                    }
                    d = d < h ? h : d
                }
                var g = {
                    width: d,
                    height: f - u
                };
                if(i) {
                    i = Math.abs(i);
                    return {
                        width: g.width * Math.cos(i) + g.height * Math.sin(i),
                        height: g.width * Math.sin(i) + g.height * Math.cos(i)
                    }
                }
                return g
            };
        i({
            circleBbox: a,
            textBbox: s,
            multilinetextBbox: o
        })
    };
    n["/lib/bowser.js"] = function(t, e, i) {
        ! function(t, e) {
            if("function" == typeof i) i(e());
            else if("undefined" != typeof module && module.exports) module.exports = e();
            else if("function" == typeof define && define.amd) define(e);
            else this[t] = e()
        }("bowser", function() {
            function t(t) {
                function i(e) {
                    var i = t.match(e);
                    return i && i.length > 1 && i[1] || ""
                }

                function n(e) {
                    var i = t.match(e);
                    return i && i.length > 1 && i[2] || ""
                }
                var r, a = i(/(ipod|iphone|ipad)/i).toLowerCase(),
                    s = /like android/i.test(t),
                    o = !s && /android/i.test(t),
                    l = /CrOS/.test(t),
                    c = i(/edge\/(\d+(\.\d+)?)/i),
                    u = i(/version\/(\d+(\.\d+)?)/i),
                    d = /tablet/i.test(t),
                    h = !d && /[^-]mobi/i.test(t);
                if(/opera|opr/i.test(t)) r = {
                    name: "Opera",
                    opera: e,
                    version: u || i(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)
                };
                else if(/yabrowser/i.test(t)) r = {
                    name: "Yandex Browser",
                    yandexbrowser: e,
                    version: u || i(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)
                };
                else if(/windows phone/i.test(t)) {
                    r = {
                        name: "Windows Phone",
                        windowsphone: e
                    };
                    if(c) {
                        r.msedge = e;
                        r.version = c
                    } else {
                        r.msie = e;
                        r.version = i(/iemobile\/(\d+(\.\d+)?)/i)
                    }
                } else if(/msie|trident/i.test(t)) r = {
                    name: "Internet Explorer",
                    msie: e,
                    version: i(/(?:msie |rv:)(\d+(\.\d+)?)/i)
                };
                else if(l) r = {
                    name: "Chrome",
                    chromeBook: e,
                    chrome: e,
                    version: i(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)
                };
                else if(/chrome.+? edge/i.test(t)) r = {
                    name: "Microsoft Edge",
                    msedge: e,
                    version: c
                };
                else if(/chrome|crios|crmo/i.test(t)) r = {
                    name: "Chrome",
                    chrome: e,
                    version: i(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)
                };
                else if(a) {
                    r = {
                        name: "iphone" == a ? "iPhone" : "ipad" == a ? "iPad" : "iPod"
                    };
                    if(u) r.version = u
                } else if(/sailfish/i.test(t)) r = {
                    name: "Sailfish",
                    sailfish: e,
                    version: i(/sailfish\s?browser\/(\d+(\.\d+)?)/i)
                };
                else if(/seamonkey\//i.test(t)) r = {
                    name: "SeaMonkey",
                    seamonkey: e,
                    version: i(/seamonkey\/(\d+(\.\d+)?)/i)
                };
                else if(/firefox|iceweasel/i.test(t)) {
                    r = {
                        name: "Firefox",
                        firefox: e,
                        version: i(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)
                    };
                    if(/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)) r.firefoxos = e
                } else if(/silk/i.test(t)) r = {
                    name: "Amazon Silk",
                    silk: e,
                    version: i(/silk\/(\d+(\.\d+)?)/i)
                };
                else if(o) r = {
                    name: "Android",
                    version: u
                };
                else if(/phantom/i.test(t)) r = {
                    name: "PhantomJS",
                    phantom: e,
                    version: i(/phantomjs\/(\d+(\.\d+)?)/i)
                };
                else if(/blackberry|\bbb\d+/i.test(t) || /rim\stablet/i.test(t)) r = {
                    name: "BlackBerry",
                    blackberry: e,
                    version: u || i(/blackberry[\d]+\/(\d+(\.\d+)?)/i)
                };
                else if(/(web|hpw)os/i.test(t)) {
                    r = {
                        name: "WebOS",
                        webos: e,
                        version: u || i(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)
                    };
                    /touchpad\//i.test(t) && (r.touchpad = e)
                } else if(/bada/i.test(t)) r = {
                    name: "Bada",
                    bada: e,
                    version: i(/dolfin\/(\d+(\.\d+)?)/i)
                };
                else if(/tizen/i.test(t)) r = {
                    name: "Tizen",
                    tizen: e,
                    version: i(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i) || u
                };
                else if(/safari/i.test(t)) r = {
                    name: "Safari",
                    safari: e,
                    version: u
                };
                else r = {
                        name: i(/^(.*)\/(.*) /),
                        version: n(/^(.*)\/(.*) /)
                    };
                if(!r.msedge && /(apple)?webkit/i.test(t)) {
                    r.name = r.name || "Webkit";
                    r.webkit = e;
                    if(!r.version && u) r.version = u
                } else if(!r.opera && /gecko\//i.test(t)) {
                    r.name = r.name || "Gecko";
                    r.gecko = e;
                    r.version = r.version || i(/gecko\/(\d+(\.\d+)?)/i)
                }
                if(!r.msedge && (o || r.silk)) r.android = e;
                else if(a) {
                    r[a] = e;
                    r.ios = e
                }
                var f = "";
                if(r.windowsphone) f = i(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i);
                else if(a) {
                    f = i(/os (\d+([_\s]\d+)*) like mac os x/i);
                    f = f.replace(/[_\s]/g, ".")
                } else if(o) f = i(/android[ \/-](\d+(\.\d+)*)/i);
                else if(r.webos) f = i(/(?:web|hpw)os\/(\d+(\.\d+)*)/i);
                else if(r.blackberry) f = i(/rim\stablet\sos\s(\d+(\.\d+)*)/i);
                else if(r.bada) f = i(/bada\/(\d+(\.\d+)*)/i);
                else if(r.tizen) f = i(/tizen[\/\s](\d+(\.\d+)*)/i);
                if(f) r.osversion = f;
                var p = f.split(".")[0];
                if(d || "ipad" == a || o && (3 == p || 4 == p && !h) || r.silk) r.tablet = e;
                else if(h || "iphone" == a || "ipod" == a || o || r.blackberry || r.webos || r.bada) r.mobile = e;
                if(r.msedge || r.msie && r.version >= 10 || r.yandexbrowser && r.version >= 15 || r.chrome && r.version >= 20 || r.firefox && r.version >= 20 || r.safari && r.version >= 6 || r.opera && r.version >= 10 || r.ios && r.osversion && r.osversion.split(".")[0] >= 6 || r.blackberry && r.version >= 10.1) r.a = e;
                else if(r.msie && r.version < 10 || r.chrome && r.version < 20 || r.firefox && r.version < 20 || r.safari && r.version < 6 || r.opera && r.version < 10 || r.ios && r.osversion && r.osversion.split(".")[0] < 6) r.c = e;
                else r.x = e;
                return r
            }
            var e = !0,
                i = t("undefined" != typeof navigator ? navigator.userAgent : "");
            i.test = function(t) {
                for(var e = 0; e < t.length; ++e) {
                    var n = t[e];
                    if("string" == typeof n)
                        if(n in i) return !0
                }
                return !1
            };
            i._detect = t;
            return i
        })
    };
    n["/sprites/clip.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = n.READONLY,
            a = n.CUSTOM_SETTER,
            s = t("./sprite"),
            o = t("../gprims/clipgprim").ClipTrait,
            l = s.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this.subTraits(0).__init(t)
                }
            }, [
                [r("type"), o.grant("type")],
                [a("clipw"), o.grant("clipw")],
                [a("cliph"), o.grant("cliph")]
            ].concat(o.grantMany(["id", "tag", "gprim", "clipx", "clipy"])), [o]);
        i(l)
    };
    n["/lib/eventstream.js"] = function(t, e, i) {
        var n = (t("./colortraits").Klass, t("./colortraits").Trait),
            r = t("../thirdlib/rx/all"),
            a = n.extend({
                __init: function() {
                    if(void 0 == this._t.subject()) this._t.setsubject({});
                    return this
                },
                createEventStream: function(t) {
                    if(void 0 == this._t.subject()[t]) {
                        var e = new r.Subject;
                        this._t.subject()[t] = {
                            subject: e,
                            observable: e.asObservable()
                        }
                    }
                    return this._t.subject()[t].observable
                },
                getEventStream: function(t) {
                    return this._t.subject()[t].observable
                },
                deleteEventStream: function(t) {
                    delete this._t.subject()[t];
                    return this
                },
                notify: function(t, e) {
                    this._t.subject()[t].subject.onNext(e);
                    return this
                },
                subscribe: function(t, e) {
                    this._t.subject()[t].observable.subscribe(function() {});
                    return this._t.subject()[t].observable.subscribe(e)
                }
            }, ["subject"]);
        i(a)
    };
    n["/gprims/pathgprim.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = t("./shaptrait").ShapTrait,
            a = t("../lib/geometry"),
            s = t("../lib/helper"),
            o = t("../lib/winding"),
            l = t("../lib/util"),
            c = t("../pathelement"),
            u = (t("../lib/pathlenprocess"), l.arrayMap),
            d = n.Klass,
            h = n.READONLY,
            f = (n.PRIVATE, n.CUSTOM_SETTER),
            p = {
                pathElements: [
                    ["M", 20, 20],
                    ["L", 50, 20]
                ],
                strokeStyle: {
                    r: 0,
                    g: 0,
                    b: 0
                }
            },
            _ = r.extend({
                __init: function(t) {
                    this.subTraits(0).__init(t);
                    if(void 0 == t || void 0 == t.fillStyle && void 0 == t.strokeStyle) this.setstrokeStyle(p.strokeStyle);
                    if(void 0 == t) t = p;
                    this._t.settype("path");
                    this._t.set_hookcallback(void 0);
                    if(t.pathElements instanceof Array) this.setpathElements(t.pathElements);
                    else this.setpathElements(s.svgToArray(t.pathElements));
                    this._t.setlength(void 0)
                },
                ellipseInit: function() {
                    for(var t = this._t.pathElements(), e = 0, i = t.length; e < i; e++)
                        if("A" == t[e].type()) t[e].ellipseCenterAngle(t[e - 1].point());
                    return this
                },
                setpathElements: function(t) {
                    if(!(t instanceof Array)) t = s.svgToArray(t);
                    this._t.cache().bbox = void 0;
                    var e = u(t, function(t) {
                        var e = t[0],
                            i = c.PathCreat[e];
                        return i(t)
                    });
                    if(this._t._hookcallback()) this._t.__unhookpathElements(this._t._hookcallback());
                    this._t.setpathElements(e);
                    if(this._t._hookcallback()) this._t.__hookpathElements(this._t._hookcallback());
                    this.ellipseInit();
                    this._t.__clearAllLengthCache();
                    return this
                },
                setPathProperty: function(t, e, i) {
                    this._t.cache().bbox = void 0;
                    var n = c.PropertytoSet[e];
                    this._t.pathElements()[t][n](i);
                    this.ellipseInit();
                    this._t.__clearPartLengthCache(t, e);
                    return this
                },
                getPathProperty: function(t, e) {
                    return this._t.pathElements()[t][e]()
                },
                localBbox: function() {
                    for(var t = 1 / 0, e = 1 / 0, i = -(1 / 0), n = -(1 / 0), r = this._t.pathElements(), s = this._t.lineWidth(), o = 0; o < r.length; o++) {
                        var l = r[o].bboxPoint();
                        for(var c in l) {
                            var u = l[c];
                            t = u.x - s / 2 < t ? u.x - s / 2 : t;
                            e = u.y - s / 2 < e ? u.y - s / 2 : e;
                            i = u.x + s / 2 > i ? u.x + s / 2 : i;
                            n = u.y + s / 2 > n ? u.y + s / 2 : n
                        }
                    }
                    return a.rectMake(t, e, i - t + 1, n - e + 1)
                },
                localInside: function(t, e) {
                    var i = this._t.pathElements(),
                        n = i[i.length - 1],
                        r = this._t.lineWidth(),
                        a = this._t.tolerance();
                    if("Z" == n.type() && (void 0 != this.fillStyle() || this.fillFlag())) return o.isPointInPath(i, t, e);
                    else {
                        for(var s = 1, l = i.length; s < l; s++) {
                            var c, u = i[s],
                                d = i[s - 1].point();
                            if("Z" === u.type()) c = i[0].point();
                            else c = u.point();
                            if(u.isPointIn(d, c, t, e, r, a)) return !0
                        }
                        return !1
                    }
                },
                localHook: function(t) {
                    this.hookMany(this._t, ["fillFlag", "strokeFlag", "strokeScaleInvariant", "pathElements", "strokeStyle", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineCap", "lineJoin", "miterLimit", "lineWidth", "lineDash", "anchorPoint"], t, "a");
                    this._t.__hookpathElements(t)
                },
                __hookpathElements: function(t) {
                    for(var e = this._t.pathElements(), i = 0, n = e.length; i < n; i++) {
                        var r = e[i];
                        r.localHook(t)
                    }
                    this._t.set_hookcallback(t)
                },
                unlocalHook: function(t) {
                    this.unhookMany(this._t, ["fillFlag", "strokeFlag", "strokeScaleInvariant", "pathElements", "strokeStyle", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineCap", "lineJoin", "miterLimit", "lineWidth", "lineDash", "anchorPoint"], t, "a");
                    this._t.__unhookpathElements(t);
                    this._t.set_hookcallback(void 0)
                },
                __unhookpathElements: function(t) {
                    for(var e = this._t.pathElements(), i = 0, n = e.length; i < n; i++) {
                        var r = e[i];
                        r.unlocalHook(t)
                    }
                },
                length: function() {
                    var t = this._t.length();
                    if(void 0 == t) {
                        t = 0;
                        for(var e, i = this._t.pathElements(), n = 0, r = i.length; n < r; ++n) {
                            var a = i[n];
                            if("Z" == a.type()) t += a.length(e, i[0].point());
                            else {
                                t += a.length(e);
                                e = a.point()
                            }
                        }
                        this._t.setlength(t)
                    }
                    return t
                },
                __clearAllLengthCache: function() {
                    this._t.setlength(void 0);
                    for(var t = this._t.pathElements(), e = 0, i = t.length; e < i; e++) {
                        var n = t[e];
                        n.clearLengthCache()
                    }
                    return this
                },
                __clearPartLengthCache: function(t, e) {
                    this._t.setlength(void 0);
                    var i = this._t.pathElements(),
                        n = i.length;
                    if("point" == e)
                        if(0 == t) i[t + 1].clearLengthCache();
                        else if(t == n - 1) i[t].clearLengthCache();
                        else {
                            i[t].clearLengthCache();
                            i[t + 1].clearLengthCache()
                        } else i[t].clearLengthCache();
                    return this
                },
                pointAtPercent: function(t) {
                    var e = this._t.pathElements(),
                        i = e.length;
                    if(!(t < 0 || t > 1) && i)
                        for(var n, r, a = 0, s = this.length(), o = 0, l = e.length; o < l; ++o) {
                            var c = e[o];
                            if("Z" == c.type()) {
                                r = c.length(n, e[0].point());
                                a += r;
                                if(a >= t * s) {
                                    a -= r;
                                    var u = (s * t - a) / r;
                                    return c.pointAtPercent(u, n, e[0].point())
                                }
                            } else {
                                r = c.length(n);
                                a += r;
                                if(a >= t * s) {
                                    a -= r;
                                    var u = (s * t - a) / r;
                                    return c.pointAtPercent(u, n)
                                }
                            }
                            n = c.point()
                        }
                },
                percentAtLength: function(t) {
                    if(t <= 0) return 0;
                    var e = this.length();
                    if(t >= e) return 1;
                    for(var i, n, r = this._t.pathElements(), a = 0, s = 0, o = r.length; s < o; s++) {
                        var l = r[s];
                        if("Z" == l.type()) i = l.length(n, r[0].point());
                        else i = l.length(n);
                        a += i;
                        if(a >= t) return(a - t) / i;
                        n = l.point()
                    }
                }
            }, ["pathElements", "length", "_hookcallback"].concat(r.grantAll())),
            m = d.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t)
                }
            }, [
                [h("type"), _.grant("type")],
                [f("lineWidth"), _.grant("lineWidth")],
                [f("pathElements"), _.grant("pathElements")],
                [f("strokeStyle"), _.grant("strokeStyle")],
                [f("fillStyle"), _.grant("fillStyle")],
                [f("shadowColor"), _.grant("shadowColor")]
            ].concat(_.grantMany(["fillFlag", "strokeFlag", "strokeScaleInvariant", "id", "tag", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineCap", "lineJoin", "miterLimit", "lineDash", "tolerance"])), [_]);
        i({
            PathTrait: _,
            PathKlass: m
        })
    };
    n["/camera/all.js"] = function(t, e, i) {
        i({
            TopCamera: t("./topcamera").TopCamera,
            TopCameraTrait: t("./topcamera").TopCameraTrait
        })
    };
    n["/sprites/circle.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = n.READONLY,
            a = n.CUSTOM_SETTER,
            s = t("./sprite"),
            o = t("../gprims/circlegprim").CircleTrait,
            l = s.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this.subTraits(0).__init(t)
                }
            }, [
                [r("type"), o.grant("type")],
                [a("radius"), o.grant("radius")],
                [a("strokeStyle"), o.grant("strokeStyle")],
                [a("fillStyle"), o.grant("fillStyle")],
                [a("shadowColor"), o.grant("shadowColor")]
            ].concat(o.grantMany(["fillFlag", "strokeFlag", "id", "tag", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineDash", "strokeScaleInvariant"])), [o]);
        i(l)
    };
    n["/animationmgr.js"] = function(t, e, i) {
        var n = t("./lib/util"),
            r = (t("./lib/debug"), t("./lib/colortraits").Klass),
            a = t("./lib/colortraits").Trait,
            s = n.arrayForEach,
            o = n.arrayFilter,
            l = a.extend({
                __init: function() {
                    this._t.setanimations([])
                },
                doUpdate: function(t, e, i) {
                    var n = !1;
                    s(this._t.animations(), function(e, r, a) {
                        e.update(t, i);
                        if(e.isDone()) n = !0
                    });
                    if(n) this._t.setanimations(o(this._t.animations(), function(t) {
                        return !t.isDone()
                    }))
                },
                addAnimation: function(t, e) {
                    this._t.animations().push(t);
                    if(!e) t.prepare()
                },
                removeAnimation: function(t) {
                    if("number" != typeof t) t = identifier(t);
                    var e = -1;
                    arraySome(this._t.animations(), function(i, n) {
                        if(identifier(i) == t) {
                            e = n;
                            return !0
                        } else return !1
                    });
                    if(e != -1) this._t.animations().splice(e, 1)
                },
                removeAllAnimations: function() {
                    for(var t = this._t.animations(), e = 0; e < t.length; ++e) t[e].destroy();
                    this._t.setanimations([]);
                    return !0
                },
                hasAnimation: function() {
                    var t = this._t.animations();
                    return t && t.length > 0
                }
            }, ["animations"]),
            c = l.extend({
                __init: function() {
                    this.subTraits(0).__init();
                    this._t.setgTime(0);
                    this._t.setframeRate(30)
                },
                run: function(t) {
                    function e() {
                        i = new Date;
                        n = i.getTime();
                        r = n - lastTime;
                        lastTime = n;
                        a += r;
                        o.setgTime(a);
                        s.doUpdate(a);
                        s.redraw()
                    }
                    var i = new Date,
                        n = lastTime = i.getTime(),
                        r = 0,
                        a = this._t.gTime(),
                        s = this,
                        o = this._t;
                    this._t.setloopFun(e);
                    this.doUpdate(a, 0);
                    setInterval(e, Math.floor(1e3 / this._t.frameRate()))
                },
                stop: function() {
                    clearInterval(this._t.loopFun());
                    this._t.setgTime(0);
                    this.removeAllAnimations()
                }
            }, ["gTime", "loopFun", "frameRate"]),
            u = r.extend({
                initialize: function() {
                    this.subTraits(0).__init()
                }
            }, [], [c]);
        i({
            AnimatorTrait: l,
            AnimationMgrTrait: c,
            AnimationMgr: u
        })
    };
    n["/lib/geometry.js"] = function(t, e, i) {
        var n = t("./util"),
            r = /\{\s*([\d.\-]+)\s*,\s*([\d.\-]+)\s*\}/,
            a = /\{\s*(\{[\s\d,.\-]+\})\s*,\s*(\{[\s\d,.\-]+\})\s*\}/,
            s = function(t, e) {
                return t.x * e.y - t.y * e.x
            },
            o = {
                Point: function(t, e) {
                    this.x = t;
                    this.y = e
                },
                Size: function(t, e) {
                    this.width = t;
                    this.height = e
                },
                Rect: function(t, e, i, n) {
                    this.x = t;
                    this.y = e;
                    this.width = i;
                    this.height = n
                },
                Matrix: function(t, e, i, n, r, a, s) {
                    this.a = t;
                    this.b = e;
                    this.c = i;
                    this.d = n;
                    this.tx = r;
                    this.ty = a;
                    if(void 0 == s) this.tz = 0;
                    else this.tz = s
                },
                pointAdd: function(t, e) {
                    return o.pointMake(t.x + e.x, t.y + e.y)
                },
                pointAddBy: function(t, e) {
                    t.x += e.x;
                    t.y += e.y
                },
                pointSub: function(t, e) {
                    return o.pointMake(t.x - e.x, t.y - e.y)
                },
                pointSubBy: function(t, e) {
                    t.x -= e.x;
                    t.y -= e.y
                },
                pointMultiply: function(t, e) {
                    return o.pointMake(t.x * e.x, t.y * e.y)
                },
                pointMultiplyBy: function(t, e) {
                    t.x *= e.x;
                    t.y *= e.y
                },
                pointNegation: function(t) {
                    return o.pointMake(-t.x, -t.y)
                },
                pointpNegationBy: function(t) {
                    t.x = -t.x;
                    t.y = -t.y
                },
                pointRound: function(t) {
                    return o.pointMake(Math.round(t.x), Math.round(t.y))
                },
                pointRoundBy: function(t) {
                    t.x = Math.round(t.x);
                    t.y = Math.round(t.y)
                },
                pointCeil: function(t) {
                    return o.pointMake(Math.ceil(t.x), Math.ceil(t.y))
                },
                pointCeilBy: function(t) {
                    t.x = Math.ceil(t.x);
                    t.y = Math.ceil(t.y)
                },
                pointFloor: function(t) {
                    return o.pointMake(Math.floor(t.x), Math.floor(t.y))
                },
                pointFloorBy: function(t) {
                    t.x = Math.floor(t.x);
                    t.y = Math.floor(t.y)
                },
                PointZero: function() {
                    return o.pointMake(0, 0)
                },
                isPointInPolygon: function(t, e, i) {
                    for(var n = i.length, r = !1, a = 0, s = n - 1; a < n; a++) {
                        if((i[a].y < e && i[s].y >= e || i[s].y < e && i[a].y >= e) && (i[a].x <= t || i[s].x <= t)) r ^= i[a].x + (e - i[a].y) / (i[s].y - i[a].y) * (i[s].x - i[a].x) < t;
                        s = a
                    }
                    return !!r
                },
                getVectorAngle: function(t, e) {
                    var i = e.x * t.x + e.y * t.y,
                        n = Math.sqrt(e.x * e.x + e.y * e.y) * Math.sqrt(t.x * t.x + t.y * t.y);
                    if(0 != n) {
                        var r = i / n,
                            a = Math.acos(Math.abs(r) <= 1 ? r : r > 0 ? 1 : -1);
                        if(s(t, e) < 0) a = 2 * Math.PI - a;
                        return a
                    }
                },
                rectMake: function(t, e, i, n) {
                    return new o.Rect(t, e, i, n)
                },
                rectFromString: function(t) {
                    var e = t.match(a),
                        i = o.pointFromString(e[1]),
                        n = o.sizeFromString(e[2]);
                    return o.rectMake(i.x, i.y, n.width, n.height)
                },
                sizeMake: function(t, e) {
                    return new o.Size(t, e)
                },
                sizeFromString: function(t) {
                    var e = t.match(r),
                        i = parseFloat(e[1]),
                        n = parseFloat(e[2]);
                    return o.sizeMake(i, n)
                },
                pointMake: function(t, e) {
                    return new o.Point(t, e)
                },
                pointFromString: function(t) {
                    var e = t.match(r),
                        i = parseFloat(e[1]),
                        n = parseFloat(e[2]);
                    return o.pointMake(i, n)
                },
                rectContainsPoint: function(t, e) {
                    return e.x >= t.x && e.x <= t.x + t.width && e.y >= t.y && e.y <= t.y + t.height
                },
                rectUnion: function(t, e) {
                    var i = new o.Rect(0, 0, 0, 0);
                    i.x = Math.min(t.x, e.x);
                    i.y = Math.min(t.y, e.y);
                    i.width = Math.max(t.x + t.width, e.x + e.width) - i.x;
                    i.height = Math.max(t.y + t.height, e.y + e.height) - i.y;
                    return i
                },
                rectOverlapsRect: function(t, e) {
                    if(t.x + t.width < e.x || e.x + e.width < t.x || t.y + t.height < e.y || e.y + e.height < t.y) return !1;
                    else return !0
                },
                rectIntersection: function(t, e) {
                    var i = new o.Rect(Math.max(t.x, e.x), Math.max(t.y, e.y), 0, 0);
                    i.width = Math.min(t.x + t.width, e.x + e.width) - i.x;
                    i.height = Math.min(t.y + t.height, e.y + e.height) - i.y;
                    return i
                },
                boundingRectMake: function(t, e, i, n) {
                    var r = Math.min(t.x, e.x, i.x, n.x),
                        a = Math.min(t.y, e.y, i.y, n.y),
                        s = Math.max(t.x, e.x, i.x, n.x),
                        l = Math.max(t.y, e.y, i.y, n.y);
                    return o.rectMake(r, a, s - r, l - a)
                },
                pointApplyMatrix: function(t, e) {
                    return o.pointMake(e.a * t.x + e.c * t.y + e.tx, e.b * t.x + e.d * t.y + e.ty)
                },
                pointApplyByMatrix: function(t, e) {
                    var i = t.x,
                        n = t.y;
                    t.x = e.a * i + e.c * n + e.tx;
                    t.y = e.b * i + e.d * n + e.ty
                },
                rectApplyMatrixToBoundRect: function(t, e) {
                    var i = o.pointMake(t.x, t.y),
                        n = o.pointMake(t.x + t.width, t.y),
                        r = o.pointMake(t.x, t.y + t.height),
                        a = o.pointMake(t.x + t.width, t.y + t.height);
                    o.pointApplyByMatrix(i, e);
                    o.pointApplyByMatrix(n, e);
                    o.pointApplyByMatrix(r, e);
                    o.pointApplyByMatrix(a, e);
                    return o.boundingRectMake(i, n, r, a)
                },
                rectApplyByMatrixToBoundRect: function(t, e) {
                    var i = o.pointMake(t.x, t.y),
                        n = o.pointMake(t.x + t.width, t.y),
                        r = o.pointMake(t.x, t.y + t.height),
                        a = o.pointMake(t.x + t.width, t.y + t.height);
                    o.pointApplyByMatrix(i, e);
                    o.pointApplyByMatrix(n, e);
                    o.pointApplyByMatrix(r, e);
                    o.pointApplyByMatrix(a, e);
                    var s = Math.min(i.x, n.x, r.x, a.x),
                        l = Math.min(i.y, n.y, r.y, a.y),
                        c = Math.max(i.x, n.x, r.x, a.x),
                        u = Math.max(i.y, n.y, r.y, a.y);
                    t.x = s;
                    t.y = l;
                    t.width = c - s;
                    t.height = u - l
                },
                boundRectOverlap: function(t, e) {
                    return !(t.x > e.x + e.width || t.y > e.y + e.height || e.x > t.x + t.width || e.y > t.y + t.height)
                },
                matrixInvert: function(t) {
                    var e = 1 / (t.a * t.d - t.b * t.c);
                    return new o.Matrix(e * t.d, -e * t.b, -e * t.c, e * t.a, e * (t.c * t.ty - t.d * t.tx), e * (t.b * t.tx - t.a * t.ty), t.tz)
                },
                matrixInvertBy: function(t) {
                    var e = 1 / (t.a * t.d - t.b * t.c),
                        i = e * t.d,
                        n = -e * t.b,
                        r = -e * t.c,
                        a = e * t.a,
                        s = e * (t.c * t.ty - t.d * t.tx),
                        o = e * (t.b * t.tx - t.a * t.ty);
                    t.a = i;
                    t.b = n;
                    t.c = r;
                    t.d = a;
                    t.tx = s;
                    t.ty = o
                },
                matrixMultiply: function(t, e) {
                    return new o.Matrix(t.a * e.a + t.c * e.b, t.b * e.a + t.d * e.b, t.a * e.c + t.c * e.d, t.b * e.c + t.d * e.d, t.a * e.tx + t.c * e.ty + t.tx, t.b * e.tx + t.d * e.ty + t.ty, t.tz + e.tz)
                },
                matrixMultiplyBy: function(t, e) {
                    var i = t.a * e.a + t.c * e.b,
                        n = t.b * e.a + t.d * e.b,
                        r = t.a * e.c + t.c * e.d,
                        a = t.b * e.c + t.d * e.d,
                        s = t.a * e.tx + t.c * e.ty + t.tx,
                        o = t.b * e.tx + t.d * e.ty + t.ty,
                        l = t.tz + e.tz;
                    t.a = i;
                    t.b = n;
                    t.c = r;
                    t.d = a;
                    t.tx = s;
                    t.ty = o;
                    t.tz = l
                },
                matrixTranslate: function(t, e, i, r) {
                    var a = n.copy(t);
                    a.tx = t.tx + t.a * e + t.c * i;
                    a.ty = t.ty + t.b * e + t.d * i;
                    if(void 0 != r)
                        if(void 0 != t.tz) a.tz = t.tz + r;
                        else a.tz = r;
                    return a
                },
                matrixTranslateBy: function(t, e, i, n) {
                    if(void 0 != n && void 0 == t.tz) t.tz = 0;
                    t.tx = t.tx + t.a * e + t.c * i;
                    t.ty = t.ty + t.b * e + t.d * i;
                    if(void 0 != n) t.tz = t.tz + n
                },
                matrixRotateBy: function(t, e) {
                    var i, n, r, a, s = Math.sin(e),
                        o = Math.cos(e);
                    i = t.a * o + t.c * s;
                    n = t.b * o + t.d * s;
                    r = t.c * o - t.a * s;
                    a = t.d * o - t.b * s;
                    t.a = i;
                    t.b = n;
                    t.c = r;
                    t.d = a
                },
                matrixRotate: function(t, e) {
                    var i, n, r, a, s = Math.sin(e),
                        l = Math.cos(e);
                    i = t.a * l + t.c * s;
                    n = t.b * l + t.d * s;
                    r = t.c * l - t.a * s;
                    a = t.d * l - t.b * s;
                    return new o.Matrix(i, n, r, a, t.tx, t.ty, t.tz)
                },
                matrixScaleBy: function(t, e, i) {
                    if(void 0 === i) i = e;
                    t.a *= e;
                    t.b *= e;
                    t.c *= i;
                    t.d *= i
                },
                matrixScale: function(t, e, i) {
                    if(void 0 === i) i = e;
                    return new o.Matrix(t.a * e, t.b * e, t.c * i, t.d * i, t.tx, t.ty, t.tz)
                },
                identityMatrix: function() {
                    return new o.Matrix(1, 0, 0, 1, 0, 0, 0)
                },
                isIdentityMatrix: function(t) {
                    return 1 === t.a && 0 === t.b && 0 === t.c && 1 === t.d && 0 === t.tx && 0 === t.ty && 0 === t.tz
                },
                decomposeMatrix: function(t) {
                    var e = Math.sqrt(Math.pow(t.a, 2) + Math.pow(t.b, 2)),
                        i = Math.sqrt(Math.pow(t.c, 2) + Math.pow(t.d, 2)),
                        n = Math.acos(t.a / e);
                    t.tx, t.ty, t.tz;
                    return {
                        sx: e,
                        sy: i,
                        radian: n,
                        tx: t.tx,
                        ty: t.ty,
                        tz: t.tz
                    }
                },
                quadraticResolve: function(t, e, i) {
                    if(0 == t) return [-i / e];
                    var n = e * e - 4 * t * i,
                        r = void 0,
                        a = void 0;
                    if(n > 0) {
                        r = (-e + Math.sqrt(n)) / (2 * t);
                        a = (-e - Math.sqrt(n)) / (2 * t);
                        return [r, a]
                    } else if(0 == n) {
                        r = a = -e / (2 * t);
                        return [r]
                    }
                    return []
                },
                cubicResolve: function(t, e, i, n) {
                    if(0 == t) return o.quadraticResolve(e, i, n);
                    var r, a, s, l = e * i / (6 * t * t) - e * e * e / (27 * t * t * t) - n / (2 * t),
                        c = i / (3 * t) - e * e / (9 * t * t),
                        u = l * l + c * c * c;
                    if(u > 0) {
                        var d = Math.sqrt(u);
                        r = -e / (3 * t) + (l + d) / Math.abs(l + d) * Math.pow(Math.abs(l + d), 1 / 3) + (l - d) / Math.abs(l - d) * Math.pow(Math.abs(l - d), 1 / 3);
                        return [r]
                    } else if(0 == u)
                        if(l * l == 0) {
                            r = a = s = -e / (3 * t);
                            return [r]
                        } else {
                            var h = l / Math.abs(l) * Math.pow(Math.abs(l), 1 / 3);
                            r = -e / (3 * t) + 2 * h;
                            a = s = -e / (3 * t) - h;
                            return [r, a]
                        }
                    else if(u < 0) {
                        var f = Math.acos(l / Math.pow(-c, 1.5));
                        r = -e / (3 * t) + 2 * Math.sqrt(-c) * Math.cos(f / 3);
                        a = -e / (3 * t) + 2 * Math.sqrt(-c) * Math.cos((f + 2 * Math.PI) / 3);
                        s = -e / (3 * t) + 2 * Math.sqrt(-c) * Math.cos((f - 2 * Math.PI) / 3);
                        return [r, a, s]
                    }
                    return []
                },
                coordinateSysChange: function(t, e) {
                    var i = o.identityMatrix(),
                        n = o.getVectorAngle({
                            x: 1,
                            y: 0
                        }, o.pointSub(e, t));
                    o.matrixTranslateBy(i, e.x, e.y);
                    o.matrixRotateBy(i, n);
                    o.matrixInvertBy(i);
                    return i
                },
                isPointInLine: function(t, e, i, n, r, a) {
                    var s = {
                            x: i,
                            y: n
                        },
                        l = o.coordinateSysChange(t, e);
                    o.pointApplyByMatrix(s, l);
                    var c = o.pointApplyMatrix(t, l);
                    if(c.x <= s.x && s.x <= 0 && Math.abs(s.y) <= r / 2 + a) return !0;
                    else return !1
                },
                ellipseCenterAngle: function(t, e, i, n, r, a, s, l) {
                    if(0 != i && 0 != n && (t.x != e.x || t.y != e.y)) {
                        var c = {
                                x: (t.x - e.x) / 2,
                                y: (t.y - e.y) / 2
                            },
                            u = {
                                x: (t.x + e.x) / 2,
                                y: (t.y + e.y) / 2
                            },
                            d = o.identityMatrix();
                        o.matrixRotateBy(d, r);
                        var h = o.matrixInvert(d);
                        o.pointApplyByMatrix(c, h);
                        var f = c.x * c.x / (i * i) + c.y * c.y / (n * n);
                        if(f > 1) {
                            i = Math.sqrt(f) * i;
                            n = Math.sqrt(f) * n
                        }
                        var p = (i * i * n * n - i * i * c.y * c.y - n * n * c.x * c.x) / (i * i * c.y * c.y + n * n * c.x * c.x);
                        p = Math.abs(p);
                        p = Math.sqrt(p);
                        var _;
                        if(a == s) _ = {
                            x: -p * i * c.y / n,
                            y: -p * -n * c.x / i
                        };
                        else _ = {
                            x: p * i * c.y / n,
                            y: p * -n * c.x / i
                        };
                        var m = o.pointAdd(o.pointApplyMatrix(_, d), u),
                            g = {
                                x: 1,
                                y: 0
                            },
                            v = o.getVectorAngle(g, {
                                x: (c.x - _.x) / i,
                                y: (c.y - _.y) / n
                            }),
                            y = o.getVectorAngle({
                                x: (c.x - _.x) / i,
                                y: (c.y - _.y) / n
                            }, {
                                x: (-c.x - _.x) / i,
                                y: (-c.y - _.y) / n
                            });
                        if(0 == s) y -= 2 * Math.PI;
                        l.center = m;
                        l.anglestart = v;
                        l.detangle = y;
                        l.rx = i;
                        l.ry = n
                    }
                }
            };
        i(o)
    };
    n["/selection/selector.js"] = function(t, e, i) {
        var n = t("../lib/colortraits").READONLY,
            r = (t("../lib/colortraits").PRIVATE, t("../lib/colortraits").Klass),
            a = t("../lib/debug").assert,
            s = r.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this._t.setpredicates([]);
                    if(t) {
                        a("function" == typeof t, "Selector's constructor must be given function.");
                        this._t.predicates().push(t)
                    }
                },
                apply: function(t) {
                    for(var e = null, i = this._t.predicates(), n = 0; n < i.length; n++) e = t = i[n](t);
                    return e
                },
                then: function(t) {
                    for(var e = s.create(), i = 0; i < this._t.predicates().length; i++) e.predicates().push(this._t.predicates()[i]);
                    for(var i = 0; i < t.predicates().length; i++) e.predicates().push(t.predicates()[i]);
                    return e
                },
                at: function(t) {
                    for(var e = s.create(), i = 0; i < this._t.predicates().length; i++) e.predicates().push(this._t.predicates()[i]);
                    e.predicates().push(function(e) {
                        return e.at(t)
                    });
                    return e
                }
            }, [n("predicates")]),
            o = function(t) {
                return s.create(function(e) {
                    return e.selectAll(function(e) {
                        return "string" == typeof e.dynamicProperty("kind") && e.dynamicProperty("kind").toLowerCase() === t.toLowerCase()
                    })
                })
            },
            l = function(t) {
                return s.create(function(e) {
                    return e.select(function(e) {
                        return "string" == typeof e.dynamicProperty("id") && e.dynamicProperty("id").toLowerCase() === t.toLowerCase()
                    })
                })
            };
        i({
            Selector: s,
            kind: o,
            id: l
        })
    };
    n["/gprims/linegprim.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = t("./shaptrait").ShapTrait,
            a = t("../lib/geometry"),
            s = n.Klass,
            o = n.READONLY,
            l = n.CUSTOM_SETTER,
            c = {
                vertexes: [{
                    x: 0,
                    y: 0
                }, {
                    x: 10,
                    y: 0
                }],
                strokeStyle: {
                    r: 0,
                    g: 0,
                    b: 0
                }
            },
            u = r.extend({
                __init: function(t) {
                    this.subTraits(0).__init(t);
                    if(void 0 == t || void 0 == t.strokeStyle) this.setstrokeStyle(c.strokeStyle);
                    if(void 0 == t) t = c;
                    this._t.setvertexes(void 0 == t.vertexes ? c.vertexes : t.vertexes);
                    this._t.settype("line");
                    this._t.setlength(void 0)
                },
                setvertexes: function(t) {
                    this._t.cache(), bbox = void 0;
                    this._t.setvertexes(t);
                    this._t.setlength(void 0);
                    return this
                },
                localBbox: function() {
                    for(var t, e, i, n, r = this._t.vertexes(), s = 0, o = r.length; s < o; s++) {
                        var l = r[s];
                        if(l.x < t || void 0 == t) t = l.x;
                        if(l.x > e || void 0 == e) e = l.x;
                        if(l.y < i || void 0 == i) i = l.y;
                        if(l.y > n || void 0 == n) n = l.y
                    }
                    var c = this._t.lineWidth();
                    return new a.Rect(t - c / 2, i - c / 2, e - t + c, n - i + c)
                },
                localInside: function(t, e) {
                    for(var i = this._t.lineWidth(), n = this._t.vertexes(), r = this._t.tolerance(), s = 1, o = n.length; s < o; s++)
                        if(a.isPointInLine(n[s - 1], n[s], t, e, i, r)) return !0;
                    return !1
                },
                localHook: function(t) {
                    this.hookMany(this._t, ["strokeFlag", "strokeScaleInvariant", "vertexes", "strokeStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineWidth", "lineCap", "lineJoin", "miterLimit", "lineDash", "anchorPoint"], t, "a")
                },
                unlocalHook: function(t) {
                    this.unhookMany(this._t, ["strokeFlag", "strokeScaleInvariant", "vertexes", "strokeStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineWidth", "lineCap", "lineJoin", "miterLimit", "lineDash", "anchorPoint"], t, "a")
                },
                length: function() {
                    var t = this._t.length();
                    if(void 0 == t) {
                        t = 0;
                        for(var e = this._t.vertexes(), i = 0, n = e.length; i < n - 1; i++) {
                            var r = e[i],
                                a = e[i + 1];
                            t += Math.sqrt((r.x - a.x) * (r.x - a.x) + (r.y - a.y) * (r.y - a.y))
                        }
                        this._t.setlength(t)
                    }
                    return t
                },
                pointAtPercent: function(t) {
                    var e = this._t.vertexes();
                    if(t <= 0) return {
                        x: e[0].x,
                        y: e[0].y
                    };
                    var i = e.length;
                    if(t >= 1) return {
                        x: e[i - 1].x,
                        y: e[i - 1].y
                    };
                    for(var n = this.length(), r = 0, a = 0, i = e.length; a < i - 1; a++) {
                        var s = e[a],
                            o = e[a + 1],
                            l = Math.sqrt((s.x - o.x) * (s.x - o.x) + (s.y - o.y) * (s.y - o.y));
                        r += l;
                        if(n * t <= r) {
                            var c = (n * t - r + l) / l;
                            return {
                                x: s.x + c * (o.x - s.x),
                                y: s.y + c * (o.y - s.y)
                            }
                        }
                    }
                },
                percentAtLength: function(t) {
                    var e = this._t.length();
                    if(t < 0) return 0;
                    if(e < t) return 1;
                    else return t / e
                }
            }, ["vertexes", "length"].concat(r.grantMany(["strokeFlag", "strokeScaleInvariant", "cache", "type", "id", "tag", "strokeStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineWidth", "lineCap", "lineJoin", "miterLimit", "lineDash", "anchorPoint", "tolerance"]))),
            d = s.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t)
                }
            }, [
                [o("type"), u.grant("type")], "fixBlur", [l("vertexes"), u.grant("vertexes")],
                [l("lineWidth"), u.grant("lineWidth")],
                [l("strokeStyle"), u.grant("strokeStyle")],
                [l("shadowColor"), u.grant("shadowColor")]
            ].concat(u.grantMany(["strokeFlag", "strokeScaleInvariant", "id", "tag", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineCap", "lineJoin", "miterLimit", "lineDash", "tolerance"])), [u]);
        i({
            LineKlass: d,
            LineTrait: u
        })
    };
    n["/stage.js"] = function(t, e, i) {
        var n = t("world").WorldTrait,
            r = t("./lib/util").objectDotCreate,
            a = t("./lib/colortraits").Klass,
            s = a.extend({
                initialize: function(t) {
                    var e = r(t);
                    e.bubbling = !0;
                    var i = e.container;
                    if(i && 0 == e.width && 0 == e.height) {
                        var n = i.clientWidth,
                            a = i.clientHeight;
                        if(0 == n || 0 == a);
                        else {
                            e.width = n;
                            e.height = a
                        }
                    }
                    this.execProto("initialize", e);
                    this.subTraits(0).__init(e)
                }
            }, ["invalidateFlag", "invalidateSubject"], [n]);
        i({
            Stage: s
        })
    };
    n["/animate.js"] = function(t, e, i) {
        function n(t, e) {
            var i = [];
            d(e, function(n, r) {
                if(r != e.length - 1) {
                    var a, s = e[r + 1][0] - e[r][0];
                    if("string" == typeof n[2]) a = E(e[r][1], e[r + 1][1], D(0, s, m[n[2]]));
                    else a = n[2];
                    i.push(N.create({
                        variable: t,
                        timeline: a,
                        totalTime: s
                    }))
                }
            });
            return i
        }
        var r, a, s, o = t("./lib/util"),
            l = t("./lib/debug"),
            c = t("./lib/colortraits").Klass,
            u = t("./lib/colortraits").Trait,
            d = o.arrayForEach,
            h = o.arraySome,
            f = o.arrayFilter,
            p = o.identifier,
            _ = o.objectForEach,
            m = {
                linear: function(t) {
                    return t
                },
                set: function(t) {
                    return Math.floor(t)
                },
                discrete: function(t) {
                    return Math.floor(t)
                },
                sine: function(t) {
                    return .5 - .5 * Math.cos(t * Math.PI)
                },
                sproing: function(t) {
                    return 1.05263157894737 * (.5 - .5 * Math.cos(3.59261946538606 * t))
                },
                square: function(t) {
                    return t * t
                },
                cube: function(t) {
                    return t * t * t
                },
                sqrt: function(t) {
                    return Math.sqrt(t)
                },
                curt: function(t) {
                    return Math.pow(t, -.333333333333)
                }
            },
            g = m["linear"],
            v = m["set"],
            y = m["discrete"],
            b = m["sine"],
            x = m["sproing"],
            $ = m["square"],
            w = m["cube"],
            k = m["sqrt"],
            S = m["curt"],
            C = function(t) {
                return function(e) {
                    return function(i) {
                        return t(e(i))
                    }
                }
            },
            T = function(t) {
                return function(e) {
                    return t
                }
            },
            E = function(t, e, i) {
                var n = T(t),
                    o = T(e),
                    l = i;
                return r(n, s(l, a(o, n)))
            },
            I = function(t, e) {
                return function(i) {
                    return t(e(i))
                }
            },
            A = function(t, e) {
                return function(i) {
                    return t(e - i)
                }
            },
            M = function(t, e, i) {
                return function(n) {
                    var r, a, s;
                    for(s = 0, r = i; s < e.length; s++) {
                        a = e[s](n);
                        r = t(r, a)
                    }
                    return r
                }
            };
        ! function() {
            var t = function(t) {
                    var e = function(i, n) {
                            var r = "object" == typeof i ? {} : [];
                            l.assert(typeof i == typeof n, "logical error");
                            _(i, function(i, a) {
                                if("object" == typeof i || "array" == typeof i) r[a] = e(i, n[a]);
                                else r[a] = t(i, n[a])
                            });
                            return r
                        },
                        i = function(e, n) {
                            var r = "object" == typeof e ? {} : [];
                            _(e, function(e, a) {
                                if("object" == typeof e || "array" == typeof e) r[a] = i(e, n);
                                else r[a] = t(e, n)
                            });
                            return r
                        },
                        n = function(t, e) {
                            return i(e, t)
                        },
                        r = function(e, i) {
                            return t(e, i)
                        };
                    return {
                        objectobject: e,
                        arrayarray: e,
                        objectarray: e,
                        arrayobject: e,
                        objectnumber: i,
                        arraynumber: i,
                        numberobject: n,
                        numberarray: n,
                        numbernumber: r
                    }
                },
                e = function(t) {
                    return function(e, i) {
                        if(void 0 == e || void 0 == i) return e || i;
                        var n = typeof e + typeof i;
                        if(t[n]) return t[typeof e + typeof i](e, i);
                        else l.error("I donot known how to opeate the two value")
                    }
                },
                i = e(t(function(t, e) {
                    return t + e
                })),
                n = e(t(function(t, e) {
                    return t * e
                })),
                o = e(t(function(t, e) {
                    return t - e
                })),
                c = (e(t(function(t, e) {
                    return t / e
                })), function(t) {
                    return function() {
                        if(1 == arguments.length) return arguments[0];
                        for(var e = [], i = 0; i < arguments.length; i++) e.push(arguments[i]);
                        return M(t, e, void 0)
                    }
                });
            r = c(i);
            a = c(o);
            s = c(n)
        }();
        var D = function(t, e, i) {
                return function(n) {
                    return i((n - t) / (e - t))
                }
            },
            P = c.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this._isPaused = !1;
                    this._state = "prepare";
                    this._startTime = -1;
                    this._curTime = -1
                },
                prepare: function(t) {
                    this._state = "prepare";
                    this._startTime = -1;
                    this._curTime = -1;
                    this.doPrepare(t)
                },
                doPrepare: function() {},
                target: function() {},
                isDone: function() {
                    return this._curTime - this._startTime >= this.totalTime()
                },
                curTime: function() {
                    return this._curTime
                },
                startTime: function() {
                    return this._startTime
                },
                update: function(t, e) {
                    if(!this.isPaused() && !this.isDone()) {
                        if("prepare" == this._state) {
                            this._startTime = t;
                            this._state = "running"
                        }
                        var i = this.target();
                        i = i ? i : e;
                        if(this.onFrameBegin) this.onFrameBegin(t - this._startTime);
                        this.doUpdate(t - this._startTime, e);
                        if(this.onFrameEnd) this.onFrameEnd(t - this._startTime);
                        var n = this._curTime;
                        this._curTime = t;
                        if(this.hasCBs()) this.cb(t - this._startTime, n - this._startTime)
                    }
                },
                regCBsByPercent: function(t) {
                    var e = this.totalTime();
                    return this.regCBsByTime(t.map(function(t) {
                        return {
                            time: t.time * e,
                            cb: t.cb
                        }
                    }))
                },
                regCBsByTime: function(t) {
                    if(!this._cbs) this._cbs = [];
                    this._cbs = this._cbs.concat(t);
                    this._cbs.sort(function(t, e) {
                        return t.time - e.time
                    })
                },
                regCBByPercent: function(t, e) {
                    return this.regCBByTime(t * this.totalTime(), e)
                },
                regCBByTime: function(t, e) {
                    if(!this._cbs) this._cbs = [];
                    this._cbs.push({
                        time: t,
                        cb: e
                    });
                    this._cbs.sort(function(t, e) {
                        return t.time - e.time
                    })
                },
                cancelCBByTime: function(t, e) {
                    this._cbs = f(this._cbs, function(i) {
                        if(i.time == t && (void 0 == e || e == i.cb)) return !1;
                        else return !0
                    });
                    if(0 == this._cbs.length) this.rmSlot("_cbs")
                },
                cancelCBByPercent: function(t, e) {
                    return this.cancelCBByTime(t * this.totalTime(), e)
                },
                cancelAllCBs: function() {
                    this.rmSlot("_cbs")
                },
                hasCBs: function() {
                    return void 0 != this._cbs
                },
                cb: function(t, e) {
                    if(this._cbs && e != t) {
                        var i = t > e,
                            n = [];
                        d(this._cbs, function(r) {
                            if(i && e < r.time && r.time <= t || !i && t <= r.time && r.time < e) n.push(r)
                        });
                        if(!i) n = n.reverse();
                        d(n, function(t) {
                            t.cb(i)
                        })
                    }
                },
                doUpdate: function(t, e) {
                    l.assert(!1, "Animation base-->should not in")
                },
                copy: function() {
                    l.assert(!1, "Animation base-->should not in")
                },
                reverse: function() {
                    l.assert(!1, "Animation base-->should not in")
                },
                pause: function() {
                    if(1 == this._isPaused) l.warning("pause paused animation");
                    this._isPaused = !0
                },
                resume: function() {
                    if(0 == this._isPaused) l.warning("resume a unpaused animation");
                    this._isPaused = !1
                },
                isPaused: function() {
                    return 1 == this._isPaused
                }
            }),
            N = P.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this._variable = t.variable;
                    this._timeline = t.timeline;
                    this._totalTime = t.totalTime;
                    l.assert(this._variable && this._timeline && "number" == typeof this._totalTime, "Animation parameters error");
                    this._target = t.target
                },
                doPrepare: function() {},
                totalTime: function() {
                    return this._totalTime
                },
                _setTargetVal: function(t, e, i) {
                    if("string" == typeof t) i.variable = e;
                    else if("function" == typeof t) t(e, i);
                    else if("array" == typeof t) d(t, function(t, n, r) {
                        this._setTargetVal(t, e, i)
                    }, this)
                },
                doUpdate: function(t, e) {
                    var i = this._timeline(t);
                    l.assert(this._target || e, "Animation, there is no target!");
                    this._setTargetVal(this._variable, i, this._target ? this._target : e)
                },
                copy: function() {
                    var t = N.create({
                        variable: this._variable,
                        timeline: this._timeline,
                        totalTime: this._totalTime,
                        target: this._target
                    });
                    return t
                },
                reverse: function() {
                    var t = N.create({
                        variable: this._variable,
                        timeline: A(this._timeline, this._totalTime),
                        totalTime: this._totalTime,
                        target: this._target
                    });
                    return t
                },
                setTarget: function(t) {
                    this._target = t
                },
                target: function() {
                    return this._target
                },
                variable: function() {
                    return this._variable
                },
                value: function(t) {
                    var e = {
                        variable: this._variable
                    };
                    t = t > this._totalTime ? this._totalTime : t;
                    e.value = this._timeline(t);
                    return [e]
                }
            }),
            L = P.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    l.assert(t.animations, "SequenceAnimation constructor param error");
                    this._animations = t.animations;
                    this._curanimation = null;
                    if("number" == typeof t.interval) this._interval = t.interval;
                    else this._interval = 0;
                    var e = 0,
                        i = this._interval;
                    this._animations = this._animations.map(function(t, n) {
                        var r = {
                            ani: t,
                            startTime: e + n * i
                        };
                        e += t.totalTime();
                        return r
                    });
                    this._curAniIdx = -1
                },
                doPrepare: function() {
                    if(0 != this._animations.length) this._curAniIdx = -1
                },
                doUpdate: function(t, e) {
                    var i = this._curAniIdx,
                        n = this._animations;
                    if(i != -1 && n[i].startTime <= t && (i == n.length - 1 || t < n[i + 1].startTime)) n[i].ani.update(t, e);
                    else {
                        var r = -1;
                        h(n, function(e, i, n) {
                            if(i == n.length - 1) {
                                r = i;
                                return !0
                            }
                            if(e.startTime <= t && t <= n[i + 1].startTime) {
                                r = i;
                                return !0
                            }
                            return !1
                        });
                        l.assert(r != -1, "logical error");
                        this._curAniIdx = r;
                        var a = n[r].ani;
                        a.prepare();
                        a.update(n[r].startTime, e);
                        if(t != n[r].startTime) a.update(t, e)
                    }
                },
                copy: function() {
                    var t = this._animations.map(function(t) {
                        return t.ani.copy()
                    });
                    return L.create({
                        animations: t
                    })
                },
                reverse: function() {
                    var t = this._animations.map(function(t) {
                        return t.ani.reverse()
                    });
                    return L.create({
                        animations: t.reverse()
                    })
                },
                totalTime: function() {
                    var t = 0,
                        e = this._interval;
                    d(this._animations, function(i, n) {
                        t += i.ani.totalTime() + e
                    });
                    t -= e;
                    return t
                },
                value: function(t) {
                    var e, i = this.totalTime(),
                        n = this._interval;
                    t = t > i ? i : t;
                    h(this._animations, function(i, r) {
                        var a = i.ani.totalTime();
                        if(t > a + n) {
                            t -= a + n;
                            return !1
                        } else {
                            e = i.ani;
                            return !0
                        }
                    });
                    l.assert(e, "canont find animation");
                    return e.value(t)
                }
            }),
            R = P.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this._times = t.times;
                    this._animation = t.animation;
                    if("number" == typeof t.interval) this._interval = t.interval;
                    else this._interval = 0
                },
                doPrepare: function() {
                    this._animation.prepare();
                    this._elapsedTimes = 1
                },
                doUpdate: function(t, e) {
                    var i = this,
                        n = function(t, r) {
                            t.update(r, e);
                            if(i._elapsedTimes + 1 == i._times && r > t.startTime() + t.totalTime() || r > t.startTime() + t.totalTime() + i._interval && i._elapsedTimes < i._times) {
                                i._elapsedTimes = i._elapsedTimes + 1;
                                var a = t.startTime() + t.totalTime() + i._interval;
                                t.prepare();
                                t.update(a, e);
                                if(a < r) n(t, r)
                            }
                        };
                    n(this._animation, t)
                },
                copy: function() {
                    return R.create({
                        animation: this._animation.copy(),
                        times: this._times
                    })
                },
                reverse: function() {
                    return R.create({
                        animation: this._animation.reverse(),
                        times: this._times
                    })
                },
                totalTime: function() {
                    if(0 == this._times) return 0;
                    else return this._animation.totalTime() * this._times + (this._times - 1) * this._interval
                },
                value: function(t) {
                    var e = this.totalTime();
                    t = t > e ? e : t;
                    t %= this._animation.totalTime() + this._interval;
                    return this._animation.value(t)
                }
            }),
            j = P.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    if(t.animations) this._animations = t.animations;
                    else this._animations = []
                },
                doPrepare: function() {
                    d(this._animations, function(t) {
                        t.prepare()
                    })
                },
                isDone: function() {
                    return this._animations.every(function(t) {
                        return t.isDone()
                    })
                },
                doUpdate: function(t, e) {
                    d(this._animations, function(i) {
                        i.update(t, e)
                    })
                },
                copy: function() {
                    var t = this._animations.map(function(t) {
                        return t.copy()
                    });
                    return j.create({
                        animations: t
                    })
                },
                reverse: function() {
                    var t = this._animations.map(function(t) {
                        return t.reverse()
                    });
                    return j.create({
                        animations: t.reverse()
                    })
                },
                totalTime: function() {
                    var t = 0;
                    d(this._animations, function(e, i) {
                        var n = e.totalTime();
                        t = t > n ? t : n
                    });
                    return t
                },
                value: function(t) {
                    return this._animations.map(function(e, i) {
                        return e.value(t)
                    })
                }
            }),
            O = function(t, e) {
                return N.create({
                    variable: function(t, e) {
                        e.setx(t)
                    },
                    timeline: function(t) {
                        return t * e
                    },
                    totalTime: 1 / 0
                })
            },
            F = function(t, e) {
                return N.create({
                    variable: function(t, e) {
                        e.sety(t)
                    },
                    timeline: function(t) {
                        return t * e
                    },
                    totalTime: 1 / 0
                })
            },
            z = function(t, e, i) {
                return N.create({
                    variable: function(t, e) {
                        e.translate(t.x, t.y)
                    },
                    timeline: function(t) {
                        return {
                            x: e * t,
                            y: i * t
                        }
                    },
                    totalTime: 1 / 0
                })
            },
            B = function(t, e, i) {
                return N.create({
                    variable: function(t, e) {
                        e.setx(t)
                    },
                    timeline: function(n) {
                        var r = n / i;
                        return t + (e - t) * r
                    },
                    totalTime: i
                })
            },
            H = function(t, e, i) {
                return N.create({
                    variable: function(t, e) {
                        e.sety(t)
                    },
                    timeline: function(n) {
                        var r = n / i;
                        return t + (e - t) * r
                    },
                    totalTime: i
                })
            },
            W = function() {
                return L.create({
                    animations: n(function(t, e) {
                        e.translate(t.x, t.y)
                    }, Array.prototype.slice.call(arguments, 0))
                })
            },
            q = function() {
                var t = Array.prototype.slice.call(arguments, 0),
                    e = 0;
                t = t.map(function(t, i, n) {
                    if(0 == i) return [e, t[0], "linear"];
                    var r = n[i - 1][0],
                        a = n[i][0],
                        s = a.x - r.x,
                        o = a.y - r.y;
                    e += Math.abs(Math.sqrt(s * s + o * o) / n[i - 1][1]);
                    return [e, t[0], "linear"]
                });
                return W.apply(void 0, t)
            },
            G = function() {
                return L.create({
                    animations: n(function(t, e) {
                        e.setrotate(t)
                    }, Array.prototype.slice.call(arguments, 0))
                })
            },
            U = function() {
                var t = Array.prototype.slice.call(arguments, 0),
                    e = 0;
                t = t.map(function(t, i, n) {
                    if(0 == i) return [e, t[0], "linear"];
                    var r = n[i - 1][0],
                        a = n[i][0];
                    e += Math.abs(a - r) / Math.abs(n[i - 1][1]);
                    return [e, t[0], "linear"]
                });
                return G.apply(void 0, t)
            },
            V = function(t, e, i) {
                return N.create({
                    variable: function(t, e) {
                        e.scaleX(t)
                    },
                    timeline: function(n) {
                        var r = n / i;
                        return t + (e - t) * r
                    },
                    totalTime: i
                })
            },
            Y = function(t, e, i) {
                return N.create({
                    variable: function(t, e) {
                        e.scaleY(t)
                    },
                    timeline: function(n) {
                        var r = n / i;
                        return t + (e - t) * r
                    },
                    totalTime: i
                })
            },
            X = function() {
                return L.create({
                    animations: n(function(t, e) {
                        e.setscale(t.x, t.y)
                    }, Array.prototype.slice.call(arguments, 0))
                })
            },
            K = function() {
                var t = Array.prototype.slice.call(arguments, 0),
                    e = 0;
                t = t.map(function(t, i, n) {
                    if(0 == i) return [e, t[0], "linear"];
                    var r = n[i][0].x - n[i - 1][0].x,
                        a = n[i][0].y - n[i - 1][0].y;
                    e += Math.sqrt(r * r + a * a) / Math.abs(n[i - 1][1]);
                    return [e, t[0], "linear"]
                });
                return X.apply(void 0, t)
            },
            J = function(t) {
                return L.create({
                    animations: t
                })
            },
            Z = function(t) {
                return j.create({
                    animations: t
                })
            },
            Q = function(t, e) {
                return R.create({
                    animation: t,
                    times: e
                })
            },
            tt = u.extend({
                __init: function() {
                    this._t.setanimations([])
                },
                __update: function(t, e, i) {
                    var n = !1;
                    d(this._t.animations(), function(e, r, a) {
                        e.update(t, i);
                        if(e.isDone()) n = !0
                    });
                    if(n) this._t.setanimations(f(this._t.animations(), function(t) {
                        return !t.isDone()
                    }))
                },
                addAnimation: function(t, e) {
                    this._t.animations().push(t);
                    if(!e) t.prepare()
                },
                removeAnimation: function(t) {
                    if("number" != typeof t) t = p(t);
                    var e = -1;
                    h(this._t.animations(), function(i, n) {
                        if(p(i) == t) {
                            e = n;
                            return !0
                        } else return !1
                    });
                    if(e != -1) this._t.animations().splice(e, 1)
                },
                removeAllAnimations: function() {
                    this._t.setanimations([]);
                    return !0
                }
            }, ["animations"]),
            et = c.extend({
                initialize: function() {
                    this.subTraits(0).__init()
                },
                update: function(t, e, i) {
                    this.subTraits(0).__update(t, e, i)
                }
            }, [], [tt]);
        i({
            AnimationBase: P,
            Animation: N,
            SequenceAnimation: L,
            TimesAnimation: R,
            ParallelAnimation: j,
            moveX: O,
            moveY: F,
            moveXY: z,
            moveToX: B,
            moveToY: H,
            moveToByTime: W,
            moveToBySpeed: q,
            rotateToByTime: G,
            rotateToBySpeed: U,
            scaleToX: V,
            scaleToY: Y,
            scaleToByTime: X,
            scaleToBySpeed: K,
            makeAnimationsByTime: n,
            seq: J,
            parallel: Z,
            times: Q,
            linear: g,
            set: v,
            discrete: y,
            sine: b,
            sproing: x,
            square: $,
            cube: w,
            sqrt: k,
            curt: S,
            reversetl: A,
            slerptl: E,
            maptl: I,
            foldltl: M,
            addtl: r,
            subtl: a,
            multl: s,
            lift: C,
            consttl: T,
            Animator: et,
            AnimatorTrait: tt,
            tweenFunctions: m
        })
    };
    n["/camera/topcamera.js"] = function(t, e, i) {
        function n(t, e) {
            return t.viewMatrix().tz - e.viewMatrix().tz
        }
        var r = t("../lib/colortraits").Klass,
            a = (t("../lib/colortraits").Trait, t("../lib/colortraits").compose),
            s = t("../lib/transformable").TransformableTrait,
            o = t("../lib/timestamp").TimeStamper,
            l = t("../lib/geometry"),
            c = [],
            u = a([s], {
                __init: function() {
                    this.subTraits(0).__init(o.create())
                },
                getPstnRelativeToMatrix: function(t, e) {
                    var i = l.matrixInvert(l.matrixMultiply(this.matrix(), e));
                    return l.pointApplyMatrix(t, i)
                },
                compareMatrix: function(t, e) {
                    if(void 0 == t.tz || void 0 == e.tz) return 0;
                    else return e.tz - t.tz
                },
                draw: function(t, e) {
                    var i = t.getContext("2d"),
                        r = this.matrix(),
                        a = l.isIdentityMatrix(r),
                        s = this.pixelRatio();
                    i.save();
                    i.scale(s, s);
                    if(!a) i.transform(r.a, r.b, r.c, r.d, r.tx, r.ty);
                    c.length = 0;
                    var o = e.emitDisplayObjects(c),
                        u = c.length;
                    this.updateViewMatrix(c);
                    if(null !== o) {
                        this.dirtyRectToBounding(o);
                        this.filterDisplayObjects(o);
                        if(0 != c.length) {
                            i.beginPath();
                            i.rect(o.x, o.y, o.width, o.height);
                            i.closePath();
                            i.clip();
                            i.clearRect(o.x, o.y, o.width, o.height)
                        }
                        e.clearminBoundingDirtyRect()
                    }
                    c.sort(n);
                    for(var d = 0, u = c.length; d < u; ++d) c[d].draw(t);
                    i.restore();
                    if(t.sketchpad().requestPaint) t.sketchpad().requestPaint()
                },
                getGameToViewMatrix: function() {
                    return this.matrix()
                },
                updateViewMatrix: function(t) {
                    for(var e, i, n = this.pixelRatio(), r = this.matrix(), a = l.matrixMultiply(l.matrixScale(l.identityMatrix(), n, n), this.matrix()), s = l.isIdentityMatrix(r), o = t.length, c = 0; c < o; ++c) {
                        e = t[c];
                        if(s) i = l.matrixMultiply(e.worldMatrix(), e.gprim().matrix());
                        else {
                            i = l.matrixMultiply(e.worldMatrix(), e.gprim().matrix());
                            l.matrixMultiplyBy(i, r)
                        }
                        t[c].setviewMatrix(i);
                        t[c].viewMat = a
                    }
                },
                filterDisplayObjects: function(t) {
                    if(void 0 != t.x && void 0 != t.y && void 0 != t.width && void 0 != t.height) {
                        for(var e = [], i = 0, n = c.length; i < n; ++i) {
                            var r = c[i].gprim().bbox(),
                                a = c[i].worldMatrix(),
                                s = this.matrix(),
                                o = l.matrixMultiply(s, a);
                            l.rectApplyByMatrixToBoundRect(r, o);
                            if(l.boundRectOverlap(r, t)) e.push(c[i])
                        }
                        c = e
                    } else c.length = 0
                },
                dirtyRectToBounding: function(t) {
                    var e = this.matrix(),
                        i = l.isIdentityMatrix(e);
                    if(!i) l.rectApplyByMatrixToBoundRect(t, e)
                }
            }, []),
            d = r.extend({
                initialize: function() {
                    this.subTraits(0).__init()
                }
            }, [], [u]);
        i({
            TopCameraTrait: u,
            TopCamera: d
        })
    };
    n["/selection/selectionutil.js"] = function(t, e, i) {
        function n(t, e, i, r) {
            if(i <= 0) return [];
            for(var a = t.children(), s = 0; s < a.length; s++) {
                if(r) return e ? [a[0]] : [];
                if(e(a[s])) return [a[s]];
                else {
                    var o = n(a[s], e, i - 1);
                    if(1 === o.length) return o;
                    else continue
                }
            }
            return []
        }

        function r(t, e, i, n) {
            var a = [];
            if(i <= 0) return a;
            for(var s = t.children(), o = 0; o < s.length; o++) {
                if(n) e && a.push(s[o]);
                else if(e(s[o])) a.push(s[o]);
                var l = r(s[o], e, i - 1, n);
                a = a.concat(l)
            }
            return a
        }
        i({
            findFirst: n,
            findAll: r
        })
    };
    n["/treeactor.js"] = function(t, e, i) {
        var n = t("./lib/colortraits").Trait,
            r = t("actor"),
            a = t("./lib/debug"),
            s = t("./lib/util"),
            o = s.arraySome,
            l = s.arrayReduce,
            c = n.extend({
                __init: function() {
                    function t(t) {
                        if("active" == t.type) {
                            var i = e.getMonitor();
                            if(i && i.getHost() !== e) e.clearMonitor();
                            var n = e.parent().getMonitor();
                            if(!n) return;
                            else e.applyMonitor(n);
                            e.updateMonitorLevel();
                            n.notify({
                                member: e
                            })
                        }
                    }
                    this._t.setchildren([]);
                    var e = this;
                    this.subscribe("system", t)
                },
                setParent: function(t) {
                    this._t.setparent(t);
                    return this
                },
                parent: function() {
                    return this._t.parent()
                },
                children: function() {
                    return this._t.children()
                },
                _appendChild: function(t) {
                    a.assert(void 0 == t.parent(), "parameter error");
                    this._t.children().push(t);
                    t.setParent(this);
                    t.setDepTransformable(this)
                },
                _removeChild: function(t) {
                    var e = this._t.children().indexOf(t);
                    a.assert(e != -1, "logical error, You remove an unexist child");
                    t.setDepTransformable(null);
                    t.setParent(null);
                    return this.children().splice(e, 1)[0]
                },
                _replaceChild: function(t, e) {
                    var i = this._t.children().indexOf(t);
                    a.assert(i != -1, "logical error, You replace an unexist child");
                    e.setDepTransformable(this);
                    e.setParent(this);
                    t.setDepTransformable(null);
                    t.setParent(null);
                    for(var n = [], r = t.children(), s = 0; s < r.length; s++) n.push(r[s]);
                    for(var s = 0; s < n.length; s++) {
                        t.removeChild(n[s]);
                        e.addChild(n[s])
                    }
                    this._t.children()[i] = e;
                    return t
                },
                addChild: function(t) {
                    if(this.ownerScene()) this.ownerScene().add(t, this);
                    else this._appendChild(t);
                    return this
                },
                removeChild: function(t) {
                    if(null != t && null != t.parent()) {
                        if(this.ownerScene()) this.ownerScene().remove(t);
                        else this._removeChild(t);
                        return this
                    }
                },
                replaceChild: function(t, e) {
                    if(t === e) return null;
                    if(this.ownerScene()) return this.ownerScene().replace(t, e);
                    else return this._replaceChild(t, e)
                },
                removeAllChildren: function() {
                    var t = this.ownerScene(),
                        e = void 0 == t ? !1 : !0;
                    if(e)
                        for(var i = this.children(); i.length > 0;) {
                            var n = i[0];
                            t.remove(n)
                        }
                    this._t.setchildren([]);
                    return this
                },
                root: function() {
                    for(var t = this, e = t.parent(); e;) {
                        t = e;
                        e = t.parent()
                    }
                    return t
                },
                some: function(t) {
                    var e = this.children();
                    if(1 == t(this)) return !0;
                    else return o(e, function(e) {
                        return e.some(t)
                    })
                },
                reduceChildren: function(t, e) {
                    var i;
                    i = t(e, this);
                    var n = this.children();
                    l(n, function(e, i) {
                        return i.reduceChildren(t, e)
                    }, i);
                    return e
                },
                reduce: function(t, e) {
                    var i = !1;
                    if(null != e) i = !0;
                    var n;
                    if(0 == i) n = this;
                    else {
                        n = t(e, this);
                        if(null == n) n = e
                    }
                    var r = this.children();
                    n = l(r, function(e, i) {
                        return i.reduce(t, e)
                    }, n);
                    return n
                },
                forEach: function(t) {
                    var e = function(e, i) {
                        t(i)
                    };
                    return this.reduce(e, !0)
                },
                serializeChildren: function(t, e) {
                    return this.reduce(function(t, i) {
                        if(void 0 == e || e(i)) t.push(i);
                        return t
                    }, t)
                },
                applyMonitor: function(t) {
                    var e = this._t.monitorpointer();
                    if(!e) this._t.setmonitorpointer(t);
                    else {
                        a.assert(e.getHost() === this, "monitor host must be itself.");
                        e.setIntersector(t)
                    }
                    return this
                },
                getMonitor: function() {
                    return this._t.monitorpointer()
                },
                clearMonitor: function() {
                    this._t.setmonitorpointer(void 0);
                    return this
                },
                updateMonitorLevel: function() {},
                treeBbox: function() {
                    for(var t, e, i, n, r, a, s = this.bbox(), o = s.x, l = s.y, c = s.width, u = s.height, d = this.children(), h = o, f = l, p = c, _ = u, m = 0, g = d.length; m < g; m++) {
                        e = d[m];
                        t = e.treeBbox();
                        if(0 == t.width && 0 == t.height) break;
                        else if(void 0 == i && void 0 == n) {
                            i = t.x;
                            n = t.y;
                            r = t.width + t.x;
                            a = t.height + t.y
                        } else {
                            i = Math.min(i, t.x);
                            n = Math.min(n, t.y);
                            r = Math.max(r, t.width + t.x);
                            a = Math.max(a, t.height + t.y)
                        }
                    }
                    if(0 == d.length || void 0 == i && void 0 == n) {
                        if(0 == c && 0 == u) {
                            h = 0;
                            f = 0
                        }
                        return {
                            x: h,
                            y: f,
                            width: p,
                            height: _
                        }
                    } else if(0 == c && 0 == u) return {
                        x: i,
                        y: n,
                        width: r - i,
                        height: a - n
                    };
                    else {
                        i = Math.min(i, o);
                        n = Math.min(n, l);
                        r = Math.max(r, c + o);
                        a = Math.max(a, u + l);
                        return {
                            x: i,
                            y: n,
                            width: r - i,
                            height: a - n
                        }
                    }
                }
            }, ["parent", "children", "monitorpointer"]),
            u = r.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this.subTraits(0).__init();
                    this.dynamicAttrs = {}
                },
                setProperty: function(t, e) {
                    if(this.hasProperty(t)) this["set" + t](e);
                    else throw "actor has no property named:" + t;
                    return this
                },
                property: function(t) {
                    if(this.hasProperty(t)) return this[t]();
                    else throw "actor has no property named:" + t
                },
                setDynamicProperty: function(t, e) {
                    this.dynamicAttrs[t] = e;
                    return this
                },
                dynamicProperty: function(t) {
                    return this.dynamicAttrs[t]
                }
            }, [], [c]);
        i({
            TreeActor: u,
            TreeTrait: c
        })
    };
    n["/lib/winding.js"] = function(t, e, i) {
        function n(t, e, i) {
            var n = t[0].x,
                r = t[0].y,
                a = t[1].x,
                s = t[1].y,
                o = s - r,
                l = 1;
            if(r > s) {
                var c = r;
                r = s;
                s = c;
                l = -1
            }
            if(i < r || i >= s) return 0;
            var h = u(a - n, i - t[0].y) - u(o, e - t[0].x);
            if(d(h) == l) l = 0;
            return l
        }

        function r(t, e, i) {
            var n = 0;
            if(!h(t[0].y, t[1].y, t[2].y)) {
                var r = [{}, {}, {}, {}, {}];
                n = E(t, r);
                t = r
            }
            var a = b(t, e, i);
            if(n > 0) {
                t.splice(0, 2);
                a += b(t, e, i)
            }
            return a
        }

        function a(t, e, i) {
            for(var n = [], r = R(t, n), a = 0, s = 0; s <= r; ++s) {
                a += W(n, e, i);
                n.splice(0, 3)
            }
            return a
        }

        function s(t, e, i) {
            return V(t, e, i)
        }

        function o(t, e, i, n) {
            var r = t[n].point();
            if("M" != t[n].type());
            for(var a, s, o, l, c = n, u = [], d = n + 1; d < t.length; d++) {
                s = t[d];
                o = s.type();
                l = Y[o];
                switch(o) {
                    case "A":
                        u = [s.center().x, s.center().y, s.rx(), s.ry(), s.xaxisrotate(), s.startAngle(), s.endAngle(), !s.sweepflag()];
                        break;
                    case "Z":
                        u = [r, t[n].point()];
                        break;
                    default:
                        a = s.bboxPoint();
                        u = [r].concat(a)
                }
                c += l(u, e, i);
                if("Z" == o) {
                    d++;
                    break
                }
                r = s.point()
            }
            return {
                isInside: !!c,
                index: d
            }
        }

        function l(t, e, i) {
            for(var n = o(t, e, i, 0); n.index < t.length && !n.isInside;) n = o(t, e, i, n.index);
            return n.isInside
        }
        var c = t("./geometry"),
            u = function(t, e) {
                return t * e
            },
            d = function(t) {
                return t < 0 ? -1 : t > 0 ? 1 : 0
            },
            h = function(t, e, i) {
                if(t == e) return !0;
                if(t < e) return e <= i;
                else return e >= i
            },
            f = function(t, e) {
                return t / e
            },
            p = function(t) {
                return t != t
            },
            _ = function(t) {
                return Math.sqrt(t)
            },
            m = function(t, e) {
                return(t + e) / 2
            },
            g = function(t, e, i) {
                return t * e + i
            },
            v = function(t, e, i) {
                if(t < 0) {
                    t = -t;
                    e = -e
                }
                if(0 == e || 0 == t || t >= e) return 0;
                var n = f(t, e);
                if(p(n)) return 0;
                if(n <= 0 || n >= 1) return 0;
                i.push(n);
                return 1
            },
            y = function(t, e, i, n) {
                if(0 == t) return v(-i, e, n);
                var r = e * e - 4 * t * i;
                if(r < 0 || p(r)) return 0;
                r = _(r);
                var a = 0,
                    s = e < 0 ? -(e - r) / 2 : -(e + r) / 2;
                a += v(s, t, n);
                a += v(i, s, n);
                if(2 == a)
                    if(n[0] > n[1]) {
                        var o = n[0];
                        n[0] = n[1];
                        n[1] = o
                    } else if(n[0] == n[1]) a -= 1;
                return a
            },
            b = function(t, e, i) {
                var n = t[0].y,
                    r = t[2].y,
                    a = 1;
                if(n > r) {
                    var s = n;
                    n = r;
                    r = s;
                    a = -1
                }
                if(i < n || i >= r) return 0;
                var o, l = [],
                    c = y(t[0].y - 2 * t[1].y + t[2].y, 2 * (t[1].y - t[0].y), t[0].y - i, l);
                if(0 == c) {
                    var u = m(n, r);
                    o = i < u ? t[1 - a].x : t[a + 1].x
                } else {
                    var d = l[0],
                        h = t[0].x,
                        f = t[2].x - 2 * t[1].x + h,
                        p = 2 * (t[1].x - h);
                    o = g(g(f, d, p), d, h)
                }
                if(1 == a && e == t[2].x && i == t[2].y || a == -1 && e == t[0].x && i == t[0].y) return 0;
                else return o <= e ? a : 0
            },
            x = function(t, e, i) {
                var n = t - e,
                    r = e - i;
                if(n < 0) r = -r;
                return 0 == n || r < 0
            },
            $ = function(t, e, i) {
                return t + (e - t) * i
            },
            w = function(t, e, i) {
                var n = $(t[0].x, t[1].x, i),
                    r = $(t[1].x, t[2].x, i);
                e[0].x = t[0].x;
                e[1].x = n;
                e[2].x = $(n, r, i);
                e[3].x = r;
                e[4].x = t[2].x
            },
            k = function(t, e, i) {
                var n = $(t[0].y, t[1].y, i),
                    r = $(t[1].y, t[2].y, i);
                e[0].y = t[0].y;
                e[1].y = n;
                e[2].y = $(n, r, i);
                e[3].y = r;
                e[4].y = t[2].y
            },
            S = function(t, e, i) {
                w(t, e, i);
                k(t, e, i)
            },
            C = function(t) {
                t[1].y = t[3].y = t[2].y
            },
            T = function(t) {
                return Math.abs(t)
            },
            E = function(t, e) {
                var i = t[0].y,
                    n = t[1].y,
                    r = t[2].y;
                if(x(i, n, r)) {
                    var a = [];
                    if(v(i - n, i - n - n + r, a)) {
                        S(t, e, a[0]);
                        C(e);
                        return 1
                    }
                    n = T(i - n) < T(n - r) ? i : r
                }
                e[0].x = t[0].x;
                e[0].y = i;
                e[1].x = t[1].x;
                e[1].y = n;
                e[2].x = t[2].x;
                e[2].y = r;
                return 0
            },
            I = function(t, e, i, n, r) {
                var a = n - t + 3 * (e - i),
                    s = 2 * (t - e - e + i),
                    o = e - t;
                return y(a, s, o, r)
            },
            A = function(t, e, i) {
                var n = $(t[0].x, t[1].x, i),
                    r = $(t[1].x, t[2].x, i),
                    a = $(t[2].x, t[3].x, i),
                    s = $(n, r, i),
                    o = $(r, a, i),
                    l = $(s, o, i);
                e[0].x = t[0].x;
                e[1].x = n;
                e[2].x = s;
                e[3].x = l;
                e[4].x = o;
                e[5].x = a;
                e[6].x = t[3].x
            },
            M = function(t, e, i) {
                var n = $(t[0].y, t[1].y, i),
                    r = $(t[1].y, t[2].y, i),
                    a = $(t[2].y, t[3].y, i),
                    s = $(n, r, i),
                    o = $(r, a, i),
                    l = $(s, o, i);
                e[0].y = t[0].y;
                e[1].y = n;
                e[2].y = s;
                e[3].y = l;
                e[4].y = o;
                e[5].y = a;
                e[6].y = t[3].y
            },
            D = function(t, e, i) {
                if(!(i > 0 && i < 1));
                A(t, e, i);
                M(t, e, i)
            },
            P = function(t) {
                t[2].y = t[4].y = t[3].y
            },
            N = function(t) {
                t[5].y = t[7].y = t[6].y
            },
            L = function(t, e, i, n) {
                if(e)
                    if(0 == n)
                        for(var r = 0, a = t.length; r < a; r++) e[r] = t[r];
                    else {
                        var s = [];
                        s[0] = i[0];
                        for(var o = [], r = 0; r < n; r++) {
                            var l = [{}, {}, {}, {}, {}, {}, {}];
                            D(t, l, s[0]);
                            for(var c = 0, a = l.length; c < a; c++) e[3 * r + c] = l[c];
                            if(r == n - 1) break;
                            o = l.slice(3, 7);
                            t = o;
                            l = l.splice(0, 3);
                            s = [];
                            if(!v(i[r + 1] - i[r], 1 - i[r], s)) {
                                e[7] = e[8] = e[9] = t[3];
                                break
                            }
                        }
                    }
            },
            R = function(t, e) {
                var i = [],
                    n = I(t[0].y, t[1].y, t[2].y, t[3].y, i);
                L(t, e, i, n);
                if(e && n > 0) {
                    P(e);
                    if(2 == n) N(e)
                }
                return n
            },
            j = function(t, e) {
                return t > e ? t : e
            },
            O = function(t, e) {
                return t < e ? t : e
            },
            F = function(t, e, i) {
                var n, r;
                n = r = t[0].x;
                for(var a = 1; a < 4; ++a) {
                    n = O(n, t[a].x);
                    r = j(r, t[a].x)
                }
                e[0] = n;
                i[0] = r
            },
            z = function(t, e, i, n, r) {
                return g(g(g(t, r, e), r, i), r, n)
            },
            B = function(t, e, i, n, r, a) {
                if(!(t < r && r < n));
                var s, o, l = t - r,
                    c = n + 3 * (e - i) - t,
                    u = 3 * (i - e - e + t),
                    d = 3 * (e - t),
                    h = 1 / 4096,
                    f = 0,
                    p = 1;
                for(o = 0; o < 16; o++) {
                    s = m(f, p);
                    var _ = z(c, u, d, l, s);
                    if(_ < 0) {
                        f = s;
                        _ = -_
                    } else p = s;
                    if(_ < h) break
                }
                a[0] = s
            },
            H = function(t, e, i, n, r) {
                var a = n + 3 * (e - i) - t,
                    s = 3 * (i - e - e + t),
                    o = 3 * (e - t),
                    l = t;
                return z(a, s, o, l, r)
            },
            W = function(t, e, i) {
                var n = t[0],
                    r = t[3],
                    a = [],
                    s = 1;
                if(t[0].y > t[3].y) {
                    a[0] = t[3];
                    a[1] = t[2];
                    a[2] = t[1];
                    a[3] = t[0];
                    t = a;
                    s = -1
                }
                if(i < t[0].y || i >= t[3].y) return 0;
                var o = [],
                    l = [];
                F(t, o, l);
                if(e < o[0]) return 0;
                if(e > l[0]) return s;
                var c = [];
                B(t[0].y, t[1].y, t[2].y, t[3].y, i, c);
                var u = H(t[0].x, t[1].x, t[2].x, t[3].x, c[0]);
                if(1 == s && e == r.x && i == r.y || s == -1 && e == n.x && i == n.y) return 0;
                else return u <= e ? s : 0
            },
            q = function(t, e, i, n) {
                var r = 0;
                if(0 == t) {
                    n[0] = -i / e;
                    r = 1
                } else {
                    var a = e * e - 4 * t * i,
                        s = void 0,
                        o = void 0;
                    if(a > 0) {
                        s = (-e + Math.sqrt(a)) / (2 * t);
                        o = (-e - Math.sqrt(a)) / (2 * t);
                        r = 2
                    } else if(0 == a) {
                        s = o = -e / (2 * t);
                        r = 1
                    }
                    n[0] = s;
                    n[1] = o
                }
                return r
            },
            G = {
                x: 1,
                y: 0
            },
            U = function(t, e, i) {
                var n = e / t[2],
                    r = i / t[3],
                    a = c.getVectorAngle(G, {
                        x: n,
                        y: r
                    }),
                    s = t[6] - t[5],
                    o = a - t[5];
                o = Math.abs(o) < 1e-6 ? 0 : o;
                if(t[7] && o > 0) o -= 2 * Math.PI;
                else if(!t[7] && o < 0) o += 2 * Math.PI;
                if(0 == Math.abs(o)) return -1;
                if(Math.abs(o) == Math.abs(s)) return 1;
                if(Math.abs(o) < Math.abs(s)) return 2;
                else return 0
            },
            V = function(t, e, i) {
                var n = 0,
                    r = t[2],
                    a = t[3],
                    s = c.identityMatrix();
                c.matrixTranslateBy(s, t[0], t[1]);
                c.matrixRotateBy(s, t[4]);
                c.matrixInvertBy(s);
                var o = {
                    x: e,
                    y: i
                };
                c.pointApplyByMatrix(o, s);
                var l = {
                    x: e - 1,
                    y: i
                };
                c.pointApplyByMatrix(l, s);
                var u = {
                        x: l.x - o.x,
                        y: l.y - o.y
                    },
                    d = a * a * u.x * u.x + r * r * u.y * u.y,
                    h = 2 * a * a * o.x * u.x + 2 * r * r * o.y * u.y,
                    f = a * a * o.x * o.x + r * r * o.y * o.y - r * r * a * a,
                    p = [],
                    _ = q(d, h, f, p);
                if(1 == _ && 0 !== p[0]) return 0;
                for(var m = {}, g = 0; g < p.length; g++)
                    if(p[g] >= 0) {
                        var v = o.x + p[g] * u.x,
                            y = o.y + p[g] * u.y,
                            b = U(t, v, y);
                        if(b) {
                            m.flag = b;
                            m.x = v;
                            m.y = y
                        } else _ -= 1
                    } else _ -= 1;
                if(1 == _) {
                    var x = -r * m.y / a,
                        $ = a * m.x / r;
                    if(!t[7]) {
                        x = -x;
                        $ = -$
                    }
                    if(u.x * $ - u.y * x > 0) n += 1;
                    else if(u.x * $ - u.y * x < 0) n -= 1;
                    else if(o.y < 0) {
                        if(1 == m.flag) n -= 1;
                        else if(m.flag == -1) n += 1
                    } else if(o.y > 0) return 0;
                    if(m.flag == -1 && n == -1) n += 1;
                    if(1 == m.flag && 1 == n) n -= 1
                }
                return n
            },
            Y = {
                L: function(t, e, i) {
                    return n(t, e, i)
                },
                Q: function(t, e, i) {
                    return r(t, e, i)
                },
                C: function(t, e, i) {
                    return a(t, e, i)
                },
                A: function(t, e, i) {
                    return s(t, e, i)
                },
                Z: function(t, e, i) {
                    return n(t, e, i)
                }
            };
        i({
            isPointInPath: l,
            windingCounts: Y,
            winding_line: n,
            winding_quad: r,
            winding_cubic: a,
            winding_ellipse: s
        })
    };
    n["/gprims/compositegprim.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = t("./shaptrait").ShapTrait,
            a = t("../lib/util"),
            s = t("../lib/geometry"),
            o = a.arrayMap,
            l = n.Klass,
            c = n.READONLY,
            u = n.CUSTOM_SETTER,
            d = {
                x: 0,
                y: 0,
                width: 0,
                height: 0
            },
            h = {},
            f = r.extend({
                __init: function(t) {
                    this.subTraits(0).__init(t);
                    if(void 0 == t) t = h;
                    this._t.setgprims(void 0 == t.gprims ? [] : t.gprims);
                    this._t.settype("composite")
                },
                setgprims: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setgprims(t);
                    return this
                },
                B_gprimChange: function() {
                    var t = this._t.cache();
                    if(void 0 == t.stamps) {
                        var e = o(this._t.gprims(), function(t) {
                            return t.stamp()
                        });
                        t.stamps = e;
                        return !0
                    }
                    for(var i = this._t.gprims(), n = 0, r = i.length; n < r; n++) {
                        var a = i[n];
                        if("composite" == a.type() && (a.B_gprimChange() || t.stamps[n] != a.stamp())) return !0;
                        else if(t.stamps[n] != a.stamp()) return !0
                    }
                    return !1
                },
                bbox: function() {
                    var t = this._t.cache(),
                        e = this.matrix(),
                        i = this.stamp();
                    if(!this.B_gprimChange() && void 0 !== t.bbox && i == t.stamp) return t.bbox;
                    var n = this.localBbox(),
                        r = this.anchor();
                    n.x -= r.x;
                    n.y -= r.y;
                    n = s.rectApplyMatrixToBoundRect(n, e);
                    t.stamp = this.stamp();
                    t.bbox = n;
                    return n
                },
                localBbox: function() {
                    var t = (this.matrix(), this._t.gprims());
                    if(!t.length) return d;
                    for(var e = t[0].bbox(), i = {
                        x: e.x,
                        y: e.y,
                        width: e.width,
                        height: e.height
                    }, n = 1, r = t.length; n < r; n++) {
                        var a = t[n].bbox();
                        i = s.rectUnion(i, a)
                    }
                    return i
                },
                localInside: function(t, e) {
                    for(var i = this._t.gprims(), n = i.length - 1; n >= 0; n--) {
                        var r = i[n],
                            a = r.inside(t, e);
                        if(a)
                            if("object" == typeof a) return a;
                            else return r
                    }
                    return !1
                },
                localHook: function(t) {
                    this.hookMany(this._t, ["fillFlag", "strokeFlag", "strokeScaleInvariant", "gprims", "strokeStyle", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineCap", "lineJoin", "miterLimit", "lineWidth", "lineDash", "anchorPoint"], t, "a");
                    for(var e = this._t.gprims(), i = 0, n = e.length; i < n; i++) {
                        var r = e[i];
                        r.localHook(t)
                    }
                },
                unlocalHook: function(t) {
                    this.unhookMany(this._t, ["fillFlag", "strokeFlag", "strokeScaleInvariant", "gprims", "strokeStyle", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineCap", "lineJoin", "miterLimit", "lineWidth", "lineDash", "anchorPoint"], t, "a");
                    for(var e = this._t.gprims(), i = 0, n = e.length; i < n; i++) {
                        var r = e[i];
                        r.unlocalHook(t)
                    }
                }
            }, ["gprims"].concat(r.grantAll())),
            p = l.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t)
                }
            }, [
                [c("type"), f.grant("type")],
                [u("lineWidth"), f.grant("lineWidth")],
                [u("gprims"), f.grant("gprims")],
                [u("strokeStyle"), f.grant("strokeStyle")],
                [u("fillStyle"), f.grant("fillStyle")],
                [u("shadowColor"), f.grant("shadowColor")]
            ].concat(f.grantMany(["fillFlag", "strokeFlag", "strokeScaleInvariant", "id", "tag", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineCap", "lineJoin", "miterLimit"])), [f]);
        i({
            CompositeTrait: f,
            CompositeKlass: p
        })
    };
    n["/sprites/clipcontainer.js"] = function(t, e, i) {
        var n = t("../treeactor").TreeActor,
            r = t("../lib/colortraits").Trait,
            a = t("../clip").Clipper,
            s = t("../singlegprimtreeactor").SingleGPrimTreeActor,
            o = t("../treemonitor").TreeMonitor,
            l = t("../lib/debug"),
            c = (t("../lib/geometry").identityMatrix(), r.extend({
                __init: function(t) {
                    function e(t) {
                        if("clipperChanged" == t.type)
                            if(r.clipper()) r.clipper().setintersector(t.clipper)
                    }
                    var i;
                    i = a.create(t);
                    i.setowner(this);
                    this._t.setclipper(i);
                    var n = o.create();
                    n.setHost(this);
                    n.setTypeLevel("container", 1);
                    l.assert(void 0 === this.getMonitor(), "monitor should be undefined.");
                    this.applyMonitor(n);
                    var r = this;
                    n.registerCallback("container", function(t) {
                        t.applyClip(i)
                    });
                    this.subscribe("system", e)
                },
                updateMonitorLevel: function() {
                    var t = this.getMonitor(),
                        e = t.getIntersector(),
                        i = e.getTypeLevel("container"),
                        n = e.typeLevels();
                    for(var r in n) t.setTypeLevel(r, n[r]);
                    if(e && void 0 !== i) t.setTypeLevel("container", i + 1)
                },
                setclipperGprim: function(t) {
                    this.clipper().setgprim(t)
                },
                enableAutoRepaint: function() {},
                disableAutoRepaint: function() {}
            }, ["clipper"])),
            u = n.extend({
                initialize: function(t) {
                    this.execProto("initialize", !1);
                    this.subTraits(0).__init(t)
                }
            }, [
                ["clipper", c.grant("clipper")]
            ], [c]),
            d = s.extend({
                initialize: function(t, e) {
                    this.execProto("initialize", {
                        gprim: t
                    });
                    this.subTraits(0).__init(e)
                }
            }, [
                ["clipper", c.grant("clipper")]
            ], [c]),
            h = d.extend({
                initialize: function(t) {
                    this.execProto("initialize", t, t)
                },
                setgprim: function(t) {
                    this.execProto("setgprim", t);
                    this.clipper().setgprim(t)
                }
            }, [], []);
        i({
            GPrimContainer: d,
            SimpleContainer: h,
            Container: u
        })
    };
    n["/sprites/all.js"] = function(t, e, i) {
        i({
            Annulus: t("./annulus"),
            Arc: t("./arc"),
            AutoWrapText: t("./autowraptext"),
            BubbleReceiver: t("./bubblereceiver"),
            Circle: t("./circle"),
            Clip: t("./clip"),
            Composite: t("./composite"),
            Image: t("./image"),
            Line: t("./line"),
            Path: t("./path"),
            Polygon: t("./polygon"),
            Rect: t("./rect"),
            Text: t("./text"),
            MultilineText: t("./multilinetext"),
            ContainerSprite: t("./container"),
            ClipContainer: t("./clipcontainer").Container,
            Procedure: t("./procedure"),
            Diamond: t("./diamond"),
            BackgroundText: t("./backgroundtext"),
            bboxHelper: t("./bboxHelper")
        })
    };
    n["/gprims/autowraptextgprim.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = t("../lib/helper"),
            a = t("./compositegprim").CompositeTrait,
            s = (t("../lib/geometry"), t("./textgprim").TextKlass),
            o = (t("../lib/debug").assert, n.Klass),
            l = n.READONLY,
            c = n.CUSTOM_SETTER,
            u = {
                text: "Hello Colobox!",
                maxWidth: 1 / 0,
                maxHeight: 1 / 0,
                align: "left",
                lineSpacing: 0,
                styles: [{
                    font: {
                        style: "normal",
                        weight: 400,
                        size: 16,
                        family: "Arial"
                    }
                }]
            },
            d = a.extend({
                __init: function(t) {
                    this.subTraits(0).__init(t);
                    if(void 0 == t) t = u;
                    this._t.settext(void 0 == t.text ? u.text : "" + t.text);
                    this._t.setmaxWidth(void 0 == t.maxWidth ? 1 / 0 : t.maxWidth < 0 ? 0 : t.maxWidth);
                    this._t.setmaxHeight(void 0 == t.maxHeight ? 1 / 0 : t.maxHeight < 0 ? 0 : t.maxHeight);
                    this._t.setalign(void 0 == t.align ? "left" : t.align);
                    this._t.setlineSpacing(void 0 == t.lineSpacing ? 0 : t.lineSpacing);
                    this._t.setstyles(void 0 == t.styles ? u.styles : t.styles);
                    this._t.settype("autowraptext");
                    this._t.__splitText();
                    this._t.__updateListLines()
                },
                settext: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.settext("" + t);
                    this._t.__splitText();
                    this._t.__updateListLines();
                    return this
                },
                setmaxWidth: function(t) {
                    t = t < 0 ? 0 : t;
                    this._t.cache().bbox = void 0;
                    this._t.setmaxWidth(t);
                    this._t.__splitText();
                    this._t.__updateListLines();
                    return this
                },
                setmaxHeight: function(t) {
                    t = t < 0 ? 0 : t;
                    this._t.cache().bbox = void 0;
                    this._t.setmaxHeight(t);
                    this._t.__splitText();
                    this._t.__updateListLines();
                    return this
                },
                setalign: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setalign(t);
                    this._t.__splitText();
                    this._t.__updateListLines();
                    return this
                },
                setlineSpacing: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setlineSpacing(t);
                    this._t.__splitText();
                    this._t.__updateListLines();
                    return this
                },
                localHook: function(t) {
                    this.hookMany(this._t, ["styles", "maxWidth", "maxHeight", "align", "lineSpacing", "strokeStyle", "strokeFlag", "strokeScaleInvariant", "fillFlag", "text", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "anchorPoint"], t, "a")
                },
                unlocalHook: function(t) {
                    this.unhookMany(this._t, ["styles", "maxWidth", "maxHeight", "align", "lineSpacing", "strokeStyle", "strokeFlag", "strokeScaleInvariant", "fillFlag", "text", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "anchorPoint"], t, "a")
                },
                __splitText: function() {
                    var t = this._t.maxWidth(),
                        e = this._t.text(),
                        i = [];
                    if(t == 1 / 0) i.push(e);
                    else
                        for(var n = this._t.lineSpacing(), a = this._t.maxHeight(), s = this._t.styles(), o = s.length, l = void 0 == s[0].font ? u.styles[0].font : s[0].font, c = l.size, d = e.length, h = 0, f = parseInt(t / c * 2, 10), i = [], p = 0, _ = c; h < d && _ < a && 0 !== f;) {
                            for(var m = current = "";;) {
                                if(h + f > d) break;
                                var g = e.substr(h, f),
                                    v = r.measureText(g, l).width;
                                if(v != t) {
                                    if(v > t) {
                                        current = "-";
                                        f--
                                    } else {
                                        current = "+";
                                        f++
                                    }
                                    if(m && m != current) {
                                        if("+" == current) f--;
                                        break
                                    }
                                    m = current
                                } else break
                            }
                            i.push(e.substr(h, f));
                            h += f;
                            ++p;
                            if(p < o)
                                if(void 0 !== s[p].font) {
                                    l = s[p].font;
                                    c = l.size;
                                    f = parseInt(t / c, 10)
                                }
                            _ += c + n
                        }
                    this._t.setsplittexts(i)
                },
                __updateListLines: function() {
                    for(var t = this._t.maxWidth(), e = this._t.splittexts(), i = [], n = this._t.styles(), a = this._t.lineSpacing(), o = this._t.align(), l = 0, c = n.length, d = void 0 == n[0].font ? u.styles[0].font : n[0].font, h = n[0].fillStyle, f = n[0].strokeStyle, p = 0, _ = this.gprims(), m = 0, g = e.length; m < g; m++) {
                        if(t !== 1 / 0) {
                            var v;
                            if("center" == o) {
                                v = r.measureText(e[m], d).width;
                                l = (t - v) / 2
                            } else if("right" == o) {
                                v = r.measureText(e[m], d).width;
                                l = t - v
                            }
                        }
                        var y;
                        if(_.length > m) {
                            y = _[m];
                            y.setfont(d);
                            y.settext(e[m]);
                            y.sety(p);
                            y.setx(l);
                            y.setfillStyle(h);
                            y.setstrokeStyle(f)
                        } else y = s.create({
                            font: d,
                            text: e[m],
                            y: p,
                            x: l,
                            fillStyle: h,
                            strokeStyle: f
                        });
                        i.push(y);
                        p += d.size + a;
                        if(m + 1 < c) {
                            var b = n[m + 1];
                            d = void 0 !== b.font ? b.font : d;
                            h = void 0 !== b.fillStyle ? b.fillStyle : h;
                            f = void 0 !== b.strokeStyle ? b.strokeStyle : f
                        }
                    }
                    this.setgprims(i)
                },
                lines: function() {
                    return this._t.splittexts().length
                },
                splitTexts: function() {
                    return this._t.splittexts()
                },
                lineStyle: function(t) {
                    var e = this._t.styles();
                    if(t >= e.length) return e[e.length - 1];
                    else return e[t]
                },
                setlineStyle: function(t, e) {
                    this._t.cache().bbox = void 0;
                    var i = this._t.styles();
                    if(t < i.length)
                        for(var n in e) i[t][n] = e[n];
                    else if(t = i.length) i.push(e);
                    else {
                        for(var r = i.length, a = r - 1; r < t; ++r) i.push(i[a]);
                        i.push(e)
                    }
                    this._t.setstyles(i);
                    this._t.__splitText();
                    this._t.__updateListLines();
                    return this
                },
                setstyles: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setstyles(t);
                    this._t.__splitText();
                    this._t.__updateListLines();
                    return this
                }
            }, ["text", "splittexts", "maxWidth", "maxHeight", "align", "lineSpacing", "styles"].concat(a.grantMany(["gprims", "strokeStyle", "strokeFlag", "strokeScaleInvariant", "fillFlag", "cache", "type", "id", "tag", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "anchorPoint"]))),
            h = o.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t)
                }
            }, [
                [l("type"), d.grant("type")],
                [c("text"), d.grant("text")],
                [c("gprims"), d.grant("gprims")],
                [c("styles"), d.grant("styles")],
                [c("maxWidth"), d.grant("maxWidth")],
                [c("maxHeight"), d.grant("maxHeight")],
                [c("align"), d.grant("align")],
                [c("lineSpacing"), d.grant("lineSpacing")],
                [c("strokeStyle"), d.grant("strokeStyle")],
                [c("fillStyle"), d.grant("fillStyle")],
                [c("shadowColor"), d.grant("shadowColor")]
            ].concat(d.grantMany(["strokeFlag", "strokeScaleInvariant", "fillFlag", "id", "tag", "shadowBlur", "shadowOffsetX", "shadowOffsetY"])), [d]);
        i({
            AutoWrapTextTrait: d,
            AutoWrapTextKlass: h
        })
    };
    n["/sprites/image.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = n.READONLY,
            a = t("./sprite"),
            s = t("../gprims/imagegprim").ImageTrait,
            o = a.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this.subTraits(0).__init(t)
                }
            }, [
                [r("type"), s.grant("type")]
            ].concat(s.grantMany(["alpha", "constraintmode", "image", "tag", "id"])), [s]);
        i(o)
    };
    n["/sprites/sprite.js"] = function(t, e, i) {
        var n = t("../singlegprimtreeactor").SingleGPrimTreeActor,
            r = t("../lib/geometry").identityMatrix(),
            a = n.extend({
                initialize: function(t) {
                    this.execProto("initialize", t)
                },
                emitDisplayObjects: function(t) {
                    if(!this.hidden()) {
                        this.displayObject().setworldMatrix(r);
                        t.push(this.displayObject());
                        return t
                    }
                },
                emitInteractiveObjects: function(t) {
                    this.interactiveObject().setworldMatrix(r);
                    t.push(this.interactiveObject());
                    return t
                },
                hookVisible: function(t) {
                    this.gprim().hookGPrimVisible(t)
                },
                unhookVisible: function(t) {
                    this.gprim().unhookGPrimVisible(t)
                }
            });
        i(a)
    };
    n["/sprites/autowraptext.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = n.READONLY,
            a = n.CUSTOM_SETTER,
            s = t("./sprite"),
            o = t("../gprims/autowraptextgprim").AutoWrapTextTrait,
            l = s.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this.subTraits(0).__init(t)
                }
            }, [
                [r("type"), o.grant("type")],
                [a("text"), o.grant("text")],
                [a("styles"), o.grant("styles")],
                [a("maxWidth"), o.grant("maxWidth")],
                [a("maxHeight"), o.grant("maxHeight")],
                [a("align"), o.grant("align")],
                [a("lineSpacing"), o.grant("lineSpacing")],
                [a("gprims"), o.grant("gprims")],
                [a("strokeStyle"), o.grant("strokeStyle")],
                [a("fillStyle"), o.grant("fillStyle")],
                [a("shadowColor"), o.grant("shadowColor")]
            ].concat(o.grantMany(["fillFlag", "strokeFlag", "id", "tag", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "strokeScaleInvariant"])), [o]);
        i(l)
    };
    n["/world.js"] = function(t, e, i) {
        var n = t("./lib/colortraits").Klass,
            r = (t("./lib/colortraits").Trait, t("./lib/colortraits").compose),
            a = t("scene").TreeSceneTrait,
            s = t("camera/all").TopCameraTrait,
            o = t("eventdecider").EventDecider,
            l = t("eventdecider").BubbleEventDecider,
            c = t("painter/all").HonestPainter,
            u = t("./lib/helper"),
            d = t("./lib/dirtymanager").DirtyManagerTrait,
            h = t("./lib/autorepaint").AutoRepaintTrait,
            f = t("./thirdlib/rx/all"),
            p = 50,
            _ = 10,
            m = t("./animationmgr").AnimationMgrTrait,
            g = r([a, s, d, h, m], {
                __init: function(t) {
                    this.subTraits(0).__init({
                        owner: this,
                        interactable: t.interactable
                    });
                    this.subTraits(1).__init();
                    this.subTraits(2).__init(t);
                    this.subTraits(3).__init(t);
                    this.subTraits(4).__init();
                    this._t.setgTime(0);
                    this._t.setbFreeze(!1);
                    if(t.bubbling) this._t.setbubbling(t.bubbling);
                    if(t.invalidateTime) this._t.setinvalidateTime(t.invalidateTime);
                    else this._t.setinvalidateTime(_);
                    this.initInvalidate();
                    this._t.setpainter(c.create(u.createSketchpad(t.width, t.height, t.container)));
                    if(this._t.bubbling()) this._t.seteventDecider(l.create(this, this._t.painter().eventObservables(), this));
                    else this._t.seteventDecider(o.create(this, this._t.painter().eventObservables(), this));
                    if(t.frameRate) this._t.setframeRate(t.frameRate);
                    else this._t.setframeRate(p);
                    this._t.setinterval(Math.floor(1e3 / this._t.frameRate()));
                    if(t.showFPS) this._t.setshowFPS(t.showFPS);
                    else this._t.setshowFPS(!1);
                    var e = u.fixPixelRatio(this.painter().sketchpad());
                    this.setpixelRatio(e);
                    this.createEventStream("system")
                },
                redraw: function() {
                    if(!this.dirtyMgrFlag()) this._t.painter().clear();
                    this.draw(this._t.painter(), this);
                    return this
                },
                update: function(t, e) {
                    this.subTraits(0).__update(t, e);
                    this.redraw()
                },
                loop: function() {
                    function t() {
                        e = new Date;
                        i = e.getTime();
                        n = i - lastTime;
                        lastTime = i;
                        r += n;
                        s.setgTime(r);
                        if(o) {
                            c += n;
                            l++;
                            if(c > 2e3) {
                                document.getElementById("fps").innerHTML = Math.floor(1e3 * l / c) + "";
                                c = 0;
                                l = 0
                            }
                        }
                        a.doUpdate(r);
                        a.redraw()
                    }
                    var e = new Date,
                        i = lastTime = e.getTime(),
                        n = 0,
                        r = this._t.gTime(),
                        a = this,
                        s = this._t,
                        o = this._t.showFPS();
                    if(o) var l = 0,
                        c = 0;
                    this.doUpdate(r);
                    this._t.settimer(setInterval(t, this._t.interval()));
                    return this
                },
                freeze: function() {
                    this._t.setbFreeze(!0);
                    clearInterval(this._t.timer());
                    this._t.settimer(void 0);
                    return this
                },
                unfreeze: function() {
                    this.loop();
                    this._t.setbFreeze(!1);
                    return this
                },
                eventDecider: function() {
                    return this._t.eventDecider()
                },
                initInvalidate: function() {
                    this.setinvalidateFlag(!1);
                    this.setinvalidateSubject(new f.Subject);
                    var t = this;
                    this._t;
                    this.invalidateSubject().asObservable().delay(this._t.invalidateTime()).subscribe(function(e) {
                        t.redraw();
                        t.setinvalidateFlag(!1)
                    });
                    return this
                },
                invalidate: function() {
                    if(this.invalidateFlag() !== !0) {
                        this.setinvalidateFlag(!0);
                        this.invalidateSubject().onNext("redraw");
                        return this
                    }
                },
                setSize: function(t, e) {
                    var i = this._t.painter();
                    i.setWidth(t);
                    i.setHeight(e);
                    u.fixPixelRatio(i.sketchpad());
                    this.invalidate();
                    return this
                },
                getSize: function() {
                    return this._t.painter().getSize()
                },
                painter: function() {
                    return this._t.painter()
                },
                setpixelRatio: function(t) {
                    this._pixelRatio = t
                },
                pixelRatio: function() {
                    return this._pixelRatio
                }
            }, ["invalidateTime", "bubbling", "frameRate", "showFPS", "interval", "gTime", "timer", "painter", "eventDecider", "bFreeze"]),
            v = n.extend({
                initialize: function(t) {
                    this.subTraits(0).__init(t)
                }
            }, ["invalidateFlag", "invalidateSubject"], [g]);
        i({
            WorldTrait: g,
            World: v
        })
    };
    n["/lib/canvasobservable.js"] = function(t, e, i) {
        function n(t) {
            var e = t.offsetX,
                i = t.offsetY;
            if(void 0 == e) {
                var n = t.target ? t.target.getBoundingClientRect() : t.srcElement.getBoundingClientRect();
                e = t.clientX - n.left;
                i = t.clientY - n.top
            }
            return {
                x: e,
                y: i
            }
        }

        function r() {
            if(this.preventDefault) this.preventDefault();
            else if(window.event) window.event.returnValue = !1
        }

        function a(t) {
            return function(t) {
                var e = {
                    type: type
                };
                e.key = t.key;
                e.keyCode = t.keyCode;
                e.sourceEvt = t.sourceEvt;
                return e
            }
        }

        function s(t) {
            if(t.hasOwnProperty && t.hasOwnProperty("ontouchstart") || navigator.userAgent.match(/AppleWebKit.*Mobile.*/)) {
                var e = o.Observable.fromEvent(t, "touchstart");
                this.touchstartObservable = e.select(u);
                this.touchendObservable = o.Observable.fromEvent(t, "touchend").select(u);
                this.touchmoveObservable = o.Observable.fromEvent(t, "touchmove").select(u);
                var i = this.touchendObservable;
                e.subscribe(function(t) {
                    var n = o.Observable.fromEvent(document.body, "touchend"),
                        r = !1,
                        a = n.subscribe(function(t) {
                            if(0 == r) e.__handlers.forEach(function(e) {
                                e(t)
                            });
                            a.dispose();
                            s.dispose()
                        }),
                        s = i.subscribe(function(t) {
                            r = !0;
                            s.dispose();
                            a.dispose()
                        })
                })
            } else {
                var n = o.Observable.fromEvent(t, "mousedown");
                this.mousedownObservable = n.select(c);
                var r = o.Observable.fromEvent(t, "mouseup");
                this.mouseupObservable = r.select(c);
                n.subscribe(function(t) {
                    var e = o.Observable.fromEvent(document.body, "mouseup"),
                        i = !1,
                        n = e.subscribe(function(t) {
                            if(0 == i) r.__handlers.forEach(function(e) {
                                e(t)
                            });
                            n.dispose();
                            a.dispose()
                        }),
                        a = r.subscribe(function(t) {
                            i = !0;
                            a.dispose();
                            n.dispose()
                        })
                });
                this.mousemoveObservable = o.Observable.fromEvent(t, "mousemove").select(c);
                this.mouseoutObservable = o.Observable.fromEvent(t, "mouseout").select(c)
            }
            this.keydownObservable = o.Observable.fromEvent(t, "keydown").select(a("keyPressed"));
            this.keyupObservable = o.Observable.fromEvent(t, "keyup").select(a("keyReleased"));
            this.mousewheelObservable = o.Observable.fromEvent(t, "mousewheel").select(l)
        }
        var o = t("../thirdlib/rx/all"),
            l = (t("./util").objectDotCreate, function(t) {
                var e = n(t);
                return {
                    mouseX: e.x,
                    mouseY: e.y,
                    wheelDelta: t.wheelDelta ? t.wheelDelta : t.detail * -40,
                    type: "mousewheel",
                    sourceEvt: t
                }
            }),
            c = function(t) {
                if(t.preventDefault) t.preventDefault();
                else if(window.event) window.event.returnValue = !1;
                var e = n(t);
                return {
                    mouseX: e.x,
                    mouseY: e.y,
                    sourceEvt: t
                }
            },
            u = function(t) {
                t.preventBrowserDefault = r;
                var e, i, a = {
                    type: t.type,
                    sourceEvt: t
                };
                if(t.touches && t.touches.length > 0) {
                    a.touches = [];
                    for(var s = 0; s < t.touches.length; ++s) {
                        e = t.touches[s];
                        a.touches[s] = {
                            sourceEvt: e
                        };
                        i = n(e);
                        a.touches[s].mouseX = i.x;
                        a.touches[s].mouseY = i.y
                    }
                    a.mouseX = a.touches[0].mouseX;
                    a.mouseY = a.touches[0].mouseY
                }
                return a
            };
        i({
            CanvasEventObservables: s
        })
    };
    n["/sprites/text.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = n.READONLY,
            a = n.CUSTOM_SETTER,
            s = t("./sprite"),
            o = t("../gprims/textgprim").TextTrait,
            l = s.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this.subTraits(0).__init(t)
                }
            }, [
                [r("type"), o.grant("type")],
                [a("text"), o.grant("text")],
                [a("font"), o.grant("font")],
                [a("strokeStyle"), o.grant("strokeStyle")],
                [a("fillStyle"), o.grant("fillStyle")],
                [a("shadowColor"), o.grant("shadowColor")]
            ].concat(o.grantMany(["fillFlag", "strokeFlag", "id", "tag", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "strokeScaleInvariant"])), [o]);
        i(l)
    };
    n["/gprims/imagegprim.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = t("./gprim").GPrimTrait,
            a = t("../lib/helper"),
            s = t("../lib/geometry"),
            o = n.Klass,
            l = n.READONLY,
            c = (n.CUSTOM_SETTER, {
                image: "http://img0.bdstatic.com/img/image/shouye/mxangel.jpg"
            }),
            u = 100,
            d = 100,
            h = r.extend({
                __init: function(t) {
                    this.subTraits(0).__init(t);
                    if(void 0 == t) t = c;
                    this._t.setimage("string" == typeof t.image ? a.loadImage(t.image) : void 0 == t.image ? a.loadImage("") : t.image);
                    this._t.settype("image");
                    this._t.setalpha(void 0 == t.alpha ? 1 : t.alpha);
                    this._t.setconstraintmode(t.constraintmode);
                    this._t.setwidth(void 0 == t.width ? u : t.width);
                    this._t.setheight(void 0 == t.height ? d : t.height);
                    if(this._t.image().complete) {
                        this._t.cache().bbox = void 0;
                        this._t.setwidth(void 0 == t.width ? this._t.image().width : t.width);
                        this._t.setheight(void 0 == t.height ? this._t.image().height : t.height)
                    } else {
                        var e = this._t;
                        a.loadImage(e.image().src, function() {
                            e.cache().bbox = void 0;
                            e.setwidth(void 0 == t.width ? e.image().width : t.width);
                            e.setheight(void 0 == t.height ? e.image().height : t.height)
                        })
                    }
                },
                setwidth: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setwidth(t);
                    return this
                },
                setheight: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setheight(t);
                    return this
                },
                width: function() {
                    return this._t.width()
                },
                height: function() {
                    return this._t.height()
                },
                localBbox: function() {
                    return s.rectMake(0, 0, this._t.width(), this._t.height())
                },
                localInside: function(t, e) {
                    if(0 == this._t.alpha()) return !1;
                    else if(t > 0 && t < this._t.width() && e > 0 && e < this._t.height()) return !0;
                    return !1
                },
                localHook: function(t) {
                    this.hookMany(this._t, ["image", "width", "height", "constraintmode", "alpha", "anchorPoint"], t, "a");
                    return this
                },
                unlocalHook: function(t) {
                    this.unhookMany(this._t, ["image", "width", "height", "constraintmode", "alpha", "anchorPoint"], t, "a")
                }
            }, ["image", "width", "height", "constraintmode", "alpha"].concat(r.grantAll())),
            f = o.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t)
                }
            }, [
                [l("type"), h.grant("type")]
            ].concat(h.grantMany(["alpha", "constraintmode", "image", "tag", "id"])), [h]);
        i({
            ImageKlass: f,
            ImageTrait: h
        })
    };
    n["/painter/all.js"] = function(t, e, i) {
        i({
            HonestPainter: t("./honestpainter").HonestPainter
        })
    };
    n["/selection/selection.js"] = function(t, e, i) {
        var n = (t("../lib/colortraits").READONLY, t("../lib/colortraits").PRIVATE),
            r = t("../lib/colortraits").Klass,
            a = t("../lib/debug").assert,
            s = t("./selectionutil"),
            o = function(t) {
                return "[object Array]" === Object.prototype.toString.call(t)
            },
            l = function(t, e, i) {
                a(o(t), "selectionRoot is not bind to array data in DataDivide.");
                return t
            },
            c = r.extend({
                initialize: function(t) {
                    this._t.setgroups(t);
                    this.isSelection = !0
                },
                select: function(t, e) {
                    var i, n, r = [],
                        a = (this._t.groups(), "boolean" == typeof t);
                    this.each(function(o, l) {
                        i = s.findFirst(o, t, e || 1 / 0, a);
                        n = {
                            elements: i,
                            selectionRoot: o
                        };
                        r.push(n)
                    });
                    return c.create(r)
                },
                selectAll: function(t, e) {
                    var i, n, r = [],
                        a = (this._t.groups(), "boolean" == typeof t);
                    this.each(function(o, l) {
                        i = s.findAll(o, t, e || 1 / 0, a);
                        n = {
                            elements: i,
                            selectionRoot: o
                        };
                        r.push(n)
                    });
                    return c.create(r)
                },
                filter: function(t) {
                    for(var e = [], i = this._t.groups(), n = 0, r = 0; r < i.length; r++) {
                        for(var a = {
                            elements: [],
                            selectionRoot: i[r].selectionRoot
                        }, s = 0; s < i[r].elements.length; s++) {
                            if(t(i[r].elements[s], n)) a.elements.push(i[r].elements[s]);
                            n++
                        }
                        if(a.elements.length > 0) e.push(a)
                    }
                    return c.create(e)
                },
                at: function(t) {
                    for(var e = [], i = this._t.groups(), n = 0, r = !1, a = {
                        elements: [],
                        selectionRoot: null
                    }, s = 0; !r && s < i.length; s++) {
                        for(var o = 0; o < i[s].elements.length; o++) {
                            if(n === t) {
                                a.elements.push(i[s].elements[o]);
                                a.selectionRoot = i[s].selectionRoot;
                                r = !0;
                                break
                            }
                            n++
                        }
                        if(a.elements.length > 0) e.push(a)
                    }
                    return c.create(e)
                },
                each: function(t) {
                    for(var e = 0, i = this._t.groups(), n = 0; n < i.length; n++)
                        for(var r = 0; r < i[n].elements.length; r++) {
                            t(i[n].elements[r], e);
                            e++
                        }
                    return this
                },
                call: function(t) {
                    a("function" == typeof t, "Selection.call must be give function.");
                    t.apply(void 0, [this].concat(Array.prototype.slice.call(arguments, 1)))
                },
                size: function() {
                    var t = 0;
                    this.each(function(e) {
                        t++
                    });
                    return t
                },
                empty: function() {
                    return 0 === this.size()
                },
                append: function(t) {
                    var e = [];
                    this.each(function(i, n) {
                        var r = {
                                elements: [],
                                selectionRoot: i
                            },
                            s = "function" == typeof t ? t.call(i, i.dynamicProperty("data"), n) : t,
                            o = "function" == typeof s.create ? s.create() : s;
                        a(i.addChild, "node must have addChild method.");
                        i.addChild(o);
                        r.elements.push(o);
                        e.push(r)
                    });
                    return c.create(e)
                },
                remove: function() {
                    this.each(function(t, e) {
                        return t.parent && t.parent() && t.parent().removeChild && t.parent().removeChild(t)
                    })
                },
                setProperty: function(t, e) {
                    return this._t.__setProperty(t, e, !1)
                },
                property: function(t) {
                    return this._t.__property(t, !1)
                },
                setDynamicProperty: function(t, e) {
                    return this._t.__setProperty(t, e, !0)
                },
                dynamicProperty: function(t) {
                    return this._t.__property(t, !0)
                },
                __property: function(t, e) {
                    var i = [],
                        n = typeof t;
                    a("string" === n, "Illegal property name type.");
                    this.each(function(n, r) {
                        var a = e ? n.dynamicProperty(t) : n[t] ? n[t]() : void 0;
                        i.push(a)
                    });
                    return i
                },
                __setProperty: function(t, e, i) {
                    var n = typeof t;
                    if("string" === n || "object" === n || "function" === n) {
                        var r = i ? "setDynamicProperty " : "setProperty ";
                        this.each(function(s, o) {
                            if("string" === n) {
                                var l = "function" == typeof e ? e.call(s, s.dynamicProperty("data"), o) : e;
                                i ? s.setDynamicProperty(t, l) : s["set" + t](l)
                            } else if("object" === n) {
                                a(void 0 === e, r + "set goup properties only allow one param.");
                                for(var c in t) {
                                    var l = "function" == typeof t[c] ? t[c].call(s, s.dynamicProperty("data"), o) : t[c];
                                    i ? s.setDynamicProperty(c, l) : s["set" + c] ? s["set" + c](l) : null
                                }
                            } else {
                                var u = t.call(s, s.dynamicProperty("data"), o),
                                    d = typeof u;
                                a("string" === d || "object" === d, "function nameorvalues must return string or key-value object.");
                                if("string" === d) {
                                    var l = "function" == typeof e ? e.call(s, s.dynamicProperty("data"), o) : e;
                                    i ? s.setDynamicProperty(u, l) : s["set" + c] ? s["set" + c](l) : null
                                } else
                                    for(var c in u) {
                                        a(void 0 === e, r + "set goup properties only allow one param.");
                                        var l = "function" == typeof u[c] ? u[c].call(s, s.dynamicProperty("data"), o) : u[c];
                                        i ? s.setDynamicProperty(c, u[c]) : s["set" + c] ? s["set" + c](l) : null
                                    }
                            }
                        });
                        return this
                    }
                },
                __arrayData: function(t, e, i) {
                    a(o(t), "data bind error: value must be array or function that return array.");
                    var n = "function" == typeof e,
                        r = [],
                        s = [],
                        l = [];
                    if(!n) {
                        for(var c = t.length - this.size(), d = (this.size() - t.length, 0), h = this._t.groups(), p = 0; p < h.length; p++) {
                            for(var _ = {
                                elements: [],
                                selectionRoot: h[p].selectionRoot
                            }, m = {
                                elements: [],
                                selectionRoot: h[p].selectionRoot
                            }, g = {
                                elements: [],
                                selectionRoot: h[p].selectionRoot
                            }, v = 0; v < h[p].elements.length; v++) {
                                if(c >= 0) {
                                    h[p].elements[v].setDynamicProperty("data", t[d]);
                                    _.elements.push(h[p].elements[v])
                                } else if(d < t.length) {
                                    h[p].elements[v].setDynamicProperty("data", t[d]);
                                    _.elements.push(h[p].elements[v])
                                } else g.elements.push(h[p].elements[v]);
                                d++
                            }
                            r.push(_);
                            s.push(m);
                            l.push(g)
                        }
                        if(c)
                            for(var p = 0; p < c; p++) {
                                var y = f.create();
                                y.setDynamicProperty("data", t[t.length - (c - p)]);
                                s[s.length - 1].elements.push(y)
                            }
                    } else {
                        for(var h = this._t.groups(), p = 0; p < h.length; p++)
                            for(var v = 0; v < h[p].elements.length; v++) {
                                var b = e(h[p].elements[v]);
                                if("string" == typeof b || void 0 === b) h[p].elements[v].__store_key_remove_later__ = b;
                                else a(!1, "nodekey must return string or undefined.")
                            }
                        for(var x = {}, p = 0; p < t.length; p++) {
                            var b = i(t[p]);
                            a("string" == typeof b, "nodekey must return string.");
                            x[b] = t[p]
                        }
                        for(var p = 0; p < h.length; p++) {
                            for(var _ = {
                                elements: [],
                                selectionRoot: h[p].selectionRoot
                            }, m = {
                                elements: [],
                                selectionRoot: h[p].selectionRoot
                            }, g = {
                                elements: [],
                                selectionRoot: h[p].selectionRoot
                            }, $ = {}, v = 0; v < h[p].elements.length; v++) {
                                var w = h[p].elements[v].__store_key_remove_later__;
                                if(w && null != x[w]) {
                                    h[p].elements[v].setDynamicProperty("data", x[w]);
                                    delete x[w];
                                    delete h[p].elements[v].__store_key_remove_later__;
                                    $[w] = h[p].elements[v]
                                } else {
                                    g.elements.push(h[p].elements[v]);
                                    delete h[p].elements[v].__store_key_remove_later__
                                }
                            }
                            for(var k = 0; k < t.length; ++k) {
                                var b = i(t[k]);
                                if($[b]) _.elements.push($[b])
                            }
                            r.push(_);
                            s.push(m);
                            l.push(g)
                        }
                        for(var b in x) {
                            var y = f.create();
                            y.setDynamicProperty("data", x[b]);
                            s[s.length - 1].elements.push(y)
                        }
                    }
                    return u.create(r, s, l)
                },
                __functionData: function(t, e, i) {
                    for(var n = "function" == typeof e, r = [], s = [], l = [], c = this._t.groups(), d = 0; d < c.length; d++) {
                        var h = {
                                elements: [],
                                selectionRoot: c[d].selectionRoot
                            },
                            p = {
                                elements: [],
                                selectionRoot: c[d].selectionRoot
                            },
                            _ = {
                                elements: [],
                                selectionRoot: c[d].selectionRoot
                            },
                            m = c[d].selectionRoot && c[d].selectionRoot.dynamicProperty("data");
                        aGroupValueArr = t(m, d, c[d].elements.length);
                        a(o(aGroupValueArr), "data bind error: function must return array.");
                        if(!n) {
                            for(var g = aGroupValueArr.length - c[d].elements.length, v = (aGroupValueArr.length - c[d].elements.length, 0); v < c[d].elements.length; v++)
                                if(g >= 0) {
                                    c[d].elements[v].setDynamicProperty("data", aGroupValueArr[v]);
                                    h.elements.push(c[d].elements[v])
                                } else if(v < aGroupValueArr.length) {
                                    c[d].elements[v].setDynamicProperty("data", aGroupValueArr[v]);
                                    h.elements.push(c[d].elements[v])
                                } else _.elements.push(c[d].elements[v]);
                            if(g)
                                for(var y = 0; y < g; y++) {
                                    var b = f.create();
                                    b.setDynamicProperty("data", aGroupValueArr[aGroupValueArr.length - (g - y)]);
                                    p.elements.push(b)
                                }
                        } else {
                            for(var v = 0; v < c[d].elements.length; v++) {
                                var y = e(c[d].elements[v]);
                                if("string" == typeof y || void 0 === y) c[d].elements[v].__store_key_remove_later__ = y;
                                else a(!1, "nodekey must return string or undefined.")
                            }
                            for(var x = {}, v = 0; v < aGroupValueArr.length; v++) {
                                var y = i(aGroupValueArr[v]);
                                a("string" == typeof y, "nodekey must return string.");
                                x[y] = aGroupValueArr[v]
                            }
                            for(var v = 0; v < c[d].elements.length; v++) {
                                var $ = c[d].elements[v].__store_key_remove_later__;
                                if($ && null != x[$]) {
                                    c[d].elements[v].setDynamicProperty("data", x[$]);
                                    delete x[$];
                                    delete c[d].elements[v].__store_key_remove_later__;
                                    h.elements.push(c[d].elements[v])
                                } else {
                                    _.elements.push(c[d].elements[v]);
                                    delete c[d].elements[v].__store_key_remove_later__
                                }
                            }
                            for(var y in x) {
                                var b = f.create();
                                b.setDynamicProperty("data", x[y]);
                                p.elements.push(b)
                            }
                        }
                        r.push(h);
                        s.push(p);
                        l.push(_)
                    }
                    return u.create(r, s, l)
                },
                data: function(t, e, i) {
                    a(!e && !i || "function" == typeof e && "function" == typeof i, "nodekey & datakey must be given function both or both not.");
                    if("function" == typeof t) return this._t.__functionData(t, e, i);
                    else return this._t.__arrayData(t, e, i)
                },
                replaceWith: function(t) {
                    for(var e = [], i = 0, n = this._t.groups(), r = 0; r < n.length; r++)
                        for(var a = {
                            elements: []
                        }, s = 0, o = 0; o < n[r].elements.length; o++) {
                            var l = "function" == typeof t ? t.call(n[r].elements[o], n[r].elements[o], i) : t.create(),
                                u = n[r].elements.splice(s, 1, l)[0];
                            l.setDynamicProperty("data", u.dynamicProperty("data"));
                            s++;
                            u.parent().replaceChild(u, l);
                            a.elements.push[u];
                            i++
                        }
                    return c.create(e)
                },
                getElement: function(t, e) {
                    a(t < this._t.groups().length && e < this._t.groups()[t].elements.length, "getElement bad groupIndex or index");
                    return this._t.groups()[t].elements[e]
                }
            }, [n("groups")]),
            u = c.extend({
                initialize: function(t, e, i) {
                    this.execProto("initialize", t);
                    this._t.set__enter__(h.create(e, this));
                    this._t.set__exit__(d.create(i, this))
                },
                enter: function() {
                    return this._t.__enter__()
                },
                exit: function() {
                    return this._t.__exit__()
                }
            }, [n("__enter__"), n("__exit__")]),
            d = c.extend({
                initialize: function(t, e) {
                    this.execProto("initialize", t);
                    this._t.set__update__(e)
                },
                update: function() {
                    return this._t.__update__()
                }
            }, [n("__update__")]),
            h = r.extend({
                initialize: function(t, e) {
                    this._t.setgroups(t);
                    this._t.set__update__(e)
                },
                update: function() {
                    return this._t.__update__()
                },
                size: function() {
                    for(var t = 0, e = this._t.groups(), i = 0; i < e.length; i++)
                        for(var n = 0; n < e[i].elements.length; n++) t++;
                    return t
                },
                empty: function() {
                    return 0 === this.size()
                },
                append: function(t) {
                    for(var e = [], i = this._t.groups(), n = 0, r = 0; r < i.length; r++) {
                        for(var s = {
                            elements: [],
                            selectionRoot: i[r].selectionRoot
                        }, o = 0; o < i[r].elements.length; o++) {
                            var l = "function" == typeof t ? t.call(i[r].elements[o], i[r].elements[o].dynamicProperty("data"), n) : t,
                                u = "function" == typeof l.create ? l.create() : l;
                            u.setDynamicProperty("data", i[r].elements[o].dynamicProperty("data"));
                            a(i[r].selectionRoot.addChild, "node must have addChild method.");
                            i[r].selectionRoot.addChild(u);
                            s.elements.push(u);
                            n++
                        }
                        e.push(s)
                    }
                    return c.create(e)
                }
            }, [n("groups"), n("__update__")]),
            f = r.extend({
                initialize: function() {
                    this.attributes = {}
                },
                setDynamicProperty: function(t, e) {
                    this.attributes[t] = e
                },
                dynamicProperty: function(t) {
                    return this.attributes[t]
                }
            }),
            p = function(t) {
                var e = [{
                    elements: [t],
                    selectionRoot: void 0
                }];
                return c.create(e)
            };
        i({
            select: p,
            DataDivide: l
        })
    };
    n["/lib/pathlenprocess.js"] = function(t, e, i) {
        function n(t, e) {
            var i = e.x - t.x,
                n = e.y - t.y;
            return Math.sqrt(i * i + n * n)
        }

        function r(t, e, i) {
            var n = 1 / 3,
                r = 2 / 3;
            return [{
                x: t.x,
                y: t.y
            }, {
                x: n * t.x + r * e.x,
                y: n * t.y + r * e.y
            }, {
                x: n * i.x + r * e.x,
                y: n * i.y + r * e.y
            }, {
                x: i.x,
                y: i.y
            }]
        }

        function a(t, e, i) {
            var n = .5 * (t[1].x + t[2].x);
            e[1].x = .5 * (t[0].x + t[1].x);
            i[2].x = .5 * (t[2].x + t[3].x);
            e[0].x = t[0].x;
            i[3].x = t[3].x;
            e[2].x = .5 * (e[1].x + n);
            i[1].x = .5 * (n + i[2].x);
            e[3].x = i[0].x = .5 * (e[2].x + i[1].x);
            n = .5 * (t[1].y + t[2].y);
            e[1].y = .5 * (t[0].y + t[1].y);
            i[2].y = .5 * (t[2].y + t[3].y);
            e[0].y = t[0].y;
            i[3].y = t[3].y;
            e[2].y = .5 * (e[1].y + n);
            i[1].y = .5 * (n + i[2].y);
            e[3].y = i[0].y = .5 * (e[2].y + i[1].y)
        }

        function s(t, e, i) {
            var r, o = [{}, {}, {}, {}],
                l = [{}, {}, {}, {}],
                c = 0;
            c += n(t[0], t[1]);
            c += n(t[1], t[2]);
            c += n(t[2], t[3]);
            r = n(t[0], t[3]);
            if(!(c - r > i)) e[0] += c;
            else {
                a(t, o, l);
                s(o, e, i);
                s(l, e, i)
            }
        }

        function o(t) {
            var e = [0],
                i = .01;
            s(t, e, i);
            return e[0]
        }

        function l(t, e, i, n, r, a, s, o) {
            var l = 0,
                c = e * f,
                u = i * f,
                d = t.x,
                h = t.y,
                y = [{
                    x: d + e,
                    y: h
                }, {
                    x: d + e,
                    y: h - u
                }, {
                    x: d + c,
                    y: h - i
                }, {
                    x: d,
                    y: h - i
                }, {
                    x: d - c,
                    y: h - i
                }, {
                    x: d - e,
                    y: h - u
                }, {
                    x: d - e,
                    y: h
                }, {
                    x: d - e,
                    y: h + u
                }, {
                    x: d - c,
                    y: h + i
                }, {
                    x: d,
                    y: h + i
                }, {
                    x: d + c,
                    y: h + i
                }, {
                    x: d + e,
                    y: h + u
                }, {
                    x: d + e,
                    y: h
                }];
            if(r > p) r = p;
            else if(r < -p) r = -p;
            if(0 == n) {
                var x;
                if(r == p) {
                    for(x = 11; x >= 0; --x) o[l++] = y[x];
                    return l
                } else if(r == -p) {
                    for(x = 1; x <= 12; ++x) o[l++] = y[x];
                    return l
                }
            }
            var $ = Math.floor(n / _),
                w = Math.floor((n + r) / _),
                k = (n - $ * _) / _,
                S = (n + r - w * _) / _,
                C = r > 0 ? 1 : -1;
            if(C < 0) {
                k = 1 - k;
                S = 1 - S
            }
            if(m(k - 1)) {
                k = 0;
                $ += C
            }
            if(m(S)) {
                S = 1;
                w -= C
            }
            k = v(k * _);
            S = v(S * _);
            var T = !m(k),
                E = !m(S - 1),
                I = w + C;
            if($ == I) {
                var A = 3 - ($ % 4 + 4) % 4,
                    M = 3 * A;
                return l
            }
            for(var x = $; x != I; x += C) {
                var D, A = 3 - (x % 4 + 4) % 4,
                    M = 3 * A;
                if(C > 0) D = [{
                    x: y[M + 3].x,
                    y: y[M + 3].y
                }, {
                    x: y[M + 2].x,
                    y: y[M + 2].y
                }, {
                    x: y[M + 1].x,
                    y: y[M + 1].y
                }, {
                    x: y[M].x,
                    y: y[M].y
                }];
                else D = [{
                    x: y[M].x,
                    y: y[M].y
                }, {
                    x: y[M + 1].x,
                    y: y[M + 1].y
                }, {
                    x: y[M + 2].x,
                    y: y[M + 2].y
                }, {
                    x: y[M + 3].x,
                    y: y[M + 3].y
                }];
                if($ == w && g(k, S)) return l;
                if(x == $) {
                    if(x == w && E) D = b(D, k, S);
                    else if(T) D = b(D, k, 1)
                } else if(x == w && E) D = b(D, 0, S);
                o[l++] = D[1];
                o[l++] = D[2];
                o[l++] = D[3]
            }
            o[l - 1] = {
                x: s.x,
                y: s.y
            };
            return l
        }

        function c(t) {
            if(t.length <= 1) return 0;
            for(var e, i, a, s, c, u, d = 0, h = 0; h < t.length; ++h) {
                e = t[h];
                switch(e[0]) {
                    case "M":
                        break;
                    case "L":
                        a = t[h - 1];
                        i = a.length;
                        d += n(a[i - 1], e[e.length - 1]);
                        break;
                    case "Q":
                        a = t[h - 1];
                        i = a.length;
                        s = r(a[i - 1], e[1], e[2]);
                        d += o(s);
                        break;
                    case "C":
                        a = t[h - 1];
                        i = a.length;
                        s = a.slice(i - 1).concat(e.slice(1));
                        d += o(s);
                        break;
                    case "A":
                        a = t[h - 1];
                        i = a.length;
                        var f = {
                                x: a[i - 1].x,
                                y: a[i - 1].y
                            },
                            p = e.length,
                            _ = {
                                x: e[p - 1].x,
                                y: e[p - 1].y
                            };
                        x(e[1], e[4], f, _);
                        var m = new Array,
                            g = l({
                                x: 0,
                                y: 0
                            }, e[2], e[3], e[5], e[6] - e[5], f, _, m);
                        s = [f];
                        for(var v = 0; v < g; v += 3) {
                            s = s.slice(s.length - 1).concat(m[v], m[v + 1], m[v + 2]);
                            d += o(s)
                        }
                        break;
                    case "Z":
                        a = t[h - 1];
                        i = a.length;
                        c = t[0];
                        u = c.length;
                        d += n(a[i - 1], c[u - 1])
                }
            }
            return d
        }

        function u(t, e, i) {
            return {
                x: e.x + t * (i.x - e.x),
                y: e.y + t * (i.y - e.y)
            }
        }

        function d(t, e) {
            var i, n, r, a, s, o = 1 - t;
            r = e[0].x * o + e[1].x * t;
            a = e[1].x * o + e[2].x * t;
            s = e[2].x * o + e[3].x * t;
            r = r * o + a * t;
            a = a * o + s * t;
            i = r * o + a * t;
            r = e[0].y * o + e[1].y * t;
            a = e[1].y * o + e[2].y * t;
            s = e[2].y * o + e[3].y * t;
            r = r * o + a * t;
            a = a * o + s * t;
            n = r * o + a * t;
            return {
                x: i,
                y: n
            }
        }

        function h(t, e, i) {
            var n = t.x * Math.cos(i) - t.y * Math.sin(i),
                r = t.y * Math.cos(i) + t.x * Math.sin(i);
            t.x = n + e.x;
            t.y = r + e.y
        }
        var f = .5522847498,
            p = 2 * Math.PI,
            _ = Math.PI / 2,
            m = function(t) {
                return Math.abs(t) < 1e-12
            },
            g = function(t, e) {
                return 1e12 * Math.abs(t - e) <= Math.min(Math.abs(t), Math.abs(e))
            },
            v = function(t) {
                if(m(t)) return 0;
                if(g(t, _)) return 1;
                var e = Math.cos(t),
                    i = Math.sin(t),
                    n = t / _;
                n -= (((2 - 3 * f) * n + 3 * (f - 1)) * n * n + 1 - e) / (((6 - 9 * f) * n + 6 * (f - 1)) * n);
                n -= (((2 - 3 * f) * n + 3 * (f - 1)) * n * n + 1 - e) / (((6 - 9 * f) * n + 6 * (f - 1)) * n);
                var r = n;
                r -= ((((3 * f - 2) * r - 6 * f + 3) * r + 3 * f) * r - i) / (((9 * f - 6) * r + 12 * f - 6) * r + 3 * f);
                r -= ((((3 * f - 2) * r - 6 * f + 3) * r + 3 * f) * r - i) / (((9 * f - 6) * r + 12 * f - 6) * r + 3 * f);
                var a = .5 * (n + r);
                return a
            },
            y = function(t, e, i) {
                i[0].x = t[0].x;
                i[0].y = t[0].y;
                i[1].x = t[0].x + e * (t[1].x - t[0].x);
                i[1].y = t[0].y + e * (t[1].y - t[0].y);
                i[2].x = t[1].x + e * (t[2].x - t[1].x);
                i[2].y = t[1].y + e * (t[2].y - t[1].y);
                t[2].x = t[2].x + e * (t[3].x - t[2].x);
                t[2].y = t[2].y + e * (t[3].y - t[2].y);
                t[1].x = i[2].x + e * (t[2].x - i[2].x);
                t[1].y = i[2].y + e * (t[2].y - i[2].y);
                i[2].x = i[1].x + e * (i[2].x - i[1].x);
                i[2].y = i[1].y + e * (i[2].y - i[1].y);
                i[3].x = t[0].x = i[2].x + e * (t[1].x - i[2].x);
                i[3].y = t[0].y = i[2].y + e * (t[1].y - i[2].y)
            },
            b = function(t, e, i) {
                if(0 == e && 1 == i) return t;
                var n = [{}, {}, {}, {}];
                y(t, e, n);
                var r = (i - e) / (1 - e);
                y(t, r, n);
                return n
            },
            x = function(t, e, i, n) {
                var r = (i.x - t.x) * Math.cos(e) + (i.y - t.y) * Math.sin(e),
                    a = (i.y - t.y) * Math.cos(e) - (i.x - t.x) * Math.sin(e);
                i.x = r;
                i.y = a;
                r = (n.x - t.x) * Math.cos(e) + (n.y - t.y) * Math.sin(e);
                a = (n.y - t.y) * Math.cos(e) - (n.x - t.x) * Math.sin(e);
                n.x = r;
                n.y = a
            };
        i({
            LineLength: n,
            q2c: r,
            CubicBezierLength: o,
            EllipseArcStandard: x,
            a2c: l,
            getTotalLength: c,
            PointApplyEllipse: h,
            PointAtLine: u,
            PointAtBezier: d
        })
    };
    n["/sprites/annulus.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = n.READONLY,
            a = n.CUSTOM_SETTER,
            s = t("./sprite"),
            o = t("../gprims/annulusgprim").AnnulusTrait,
            l = s.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this.subTraits(0).__init(t)
                }
            }, [
                [r("type"), o.grant("type")],
                [a("innerradius"), o.grant("innerradius")],
                [a("outerradius"), o.grant("outerradius")],
                [a("startAngle"), o.grant("startAngle")],
                [a("endAngle"), o.grant("endAngle")],
                [a("anticlockwise"), o.grant("anticlockwise")],
                [a("strokeStyle"), o.grant("strokeStyle")],
                [a("fillStyle"), o.grant("fillStyle")],
                [a("shadowColor"), o.grant("shadowColor")]
            ].concat(o.grantMany(["id", "tag", "strokeFlag", "fillFlag", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineDash", "strokeScaleInvariant"])), [o]);
        i(l)
    };
    n["/sprites/bubblereceiver.js"] = function(t, e, i) {
        var n = t("../treeactor").TreeActor,
            r = n.extend({
                initialize: function() {
                    this.execProto("initialize", {})
                },
                receiveBubble: function() {
                    return !0
                },
                emitDisplayObjects: function() {},
                emitInteractiveObjects: function() {},
                enableAutoRepaint: function() {},
                disableAutoRepaint: function() {}
            });
        i(r)
    };
    n["/sprites/backgroundtext.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = (t("../lib/helper"), t("../lib/geometry")),
            a = t("../lib/util"),
            s = t("../gprims/textgprim").TextKlass,
            o = t("../gprims/rectgprim").RectKlass,
            l = t("../gprims/compositegprim").CompositeKlass,
            c = t("../gprims/gprim").GPrimTrait,
            u = (t("../lib/debug").assert, t("./sprite")),
            d = n.READONLY,
            h = n.CUSTOM_SETTER,
            f = {
                backgroundWidth: 0,
                backgroundHeight: 0,
                backgroundFillStyle: {
                    r: 255,
                    g: 255,
                    b: 255
                },
                text: ["Hello Colorbox!"],
                textFont: {
                    weight: 400,
                    size: 10,
                    family: "Arial"
                },
                textFillStyle: {
                    r: 0,
                    g: 0,
                    b: 0
                },
                textLineSpacing: 0,
                textAlign: "left",
                textX: 0,
                textY: 0,
                xPadding: 0,
                yPadding: 0,
                textRatioAnchor: {
                    ratiox: 0,
                    ratioy: 0
                }
            },
            p = u.extend({
                initialize: function(t) {
                    this.subTraits(0).__init(t);
                    this.execProto("initialize", t);
                    this._t.settype("backgroundText");
                    if(t) {
                        this._t.setbackgroundFillStyle(t.backgroundFillStyle ? t.backgroundFillStyle : f.backgroundFillStyle);
                        if(t.text)
                            if(a.isString(t.text)) this._t.settext([t.text]);
                            else this._t.settext(t.text);
                        else this._t.settext(f.text);
                        this._t.settextFont(t.textFont ? t.textFont : f.textFont);
                        this._t.settextFillStyle(t.textFillStyle ? t.textFillStyle : f.textFillStyle);
                        this._t.settextLineSpacing(t.textLineSpacing ? t.textLineSpacing : f.textLineSpacing);
                        this._t.settextAlign(t.textAlign ? t.textAlign : f.textAlign);
                        if(t.backgroundWidth) this._t.setbackgroundWidth(t.backgroundWidth);
                        else this._t.setbackgroundWidth(f.backgroundWidth);
                        if(t.backgroundHeight) this._t.setbackgroundHeight(t.backgroundHeight);
                        else this._t.setbackgroundHeight(f.backgroundHeight);
                        this._t.settextX(t.textX ? t.textX : f.textX);
                        this._t.settextY(t.textY ? t.textY : f.textY);
                        this._t.setxPadding(t.xPadding ? t.xPadding : f.xPadding);
                        this._t.setyPadding(t.yPadding ? t.yPadding : f.yPadding)
                    } else {
                        this._t.setbackgroundWidth(f.backgroundWidth);
                        this._t.setbackgroundHeight(f.backgroundHeight);
                        this._t.setbackgroundFillStyle(f.backgroundFillStyle);
                        this._t.settext(f.text);
                        this._t.settextFont(f.textFont);
                        this._t.settextFillStyle(f.textFillStyle);
                        this._t.settextLineSpacing(f.textLineSpacing);
                        this._t.settextAlign(f.textAlign);
                        this._t.settextX(f.textX);
                        this._t.settextY(f.textY);
                        this._t.setxPadding(f.xPadding);
                        this._t.setyPadding(f.yPadding)
                    }
                    for(var e = [], i = this.text(), n = 0; n < this.text().length; ++n) e[n] = s.create({
                        text: i[n],
                        font: this.textFont(),
                        fillStyle: this.textFillStyle()
                    });
                    var r = o.create({
                        width: this.backgroundWidth(),
                        height: this.backgroundHeight(),
                        fillStyle: this.backgroundFillStyle()
                    });
                    if(t && t.backgroundStrokeStyle) r.setstrokeStyle(t.backgroundStrokeStyle);
                    if(t && t.backgroundLineWidth) r.setlineWidth(t.backgroundLineWidth);
                    this._t.setrectGprim(r);
                    this._t.settextGprims(e);
                    this._t.settextComGprim(l.create({
                        gprims: e
                    }));
                    this._LayoutText()
                },
                _LayoutText: function() {
                    this.settextX(this._t.textX());
                    this.settextY(this._t.textY())
                },
                setbackgroundFillStyle: function(t) {
                    this.rectGprim().setfillStyle(t);
                    this._t.setbackgroundFillStyle(t)
                },
                setbackgroundStrokeStyle: function(t) {
                    this.rectGprim().setstrokeStyle(t);
                    this._t.setbackgroundStrokeStyle(t)
                },
                setbackgroundLineWidth: function(t) {
                    this._t.setbackgroundLineWidth(t);
                    this.rectGprim().setlineWidth(t)
                },
                setbackgroundWidth: function(t) {
                    this._t.setbackgroundWidth(t);
                    this.rectGprim().setwidth(t);
                    this._LayoutText()
                },
                setbackgroundHeight: function(t) {
                    this._t.setbackgroundHeight(t);
                    this.rectGprim().setheight(t);
                    this._LayoutText()
                },
                settext: function(t) {
                    var e = this._t.text();
                    if(a.isString(t)) {
                        e[0] = t;
                        e.length = 1
                    } else {
                        this._t.settext(t);
                        e = t
                    }
                    var i = this.textGprims();
                    i.length = e.length;
                    for(var n = 0; n < e.length; ++n) i[n].settext(e[n]);
                    this._LayoutText()
                },
                settextFont: function(t) {
                    this._t.settextFont(t);
                    var e = this._t.textFont();
                    for(var i in t) e[i] = t[i];
                    for(var n = this.textGprims(), r = 0; r < n.length; ++r) n[r].setfont(e);
                    this._LayoutText()
                },
                settextFillStyle: function(t) {
                    this._t.settextFillStyle(t);
                    for(var e = this.textGprims(), i = 0; i < e.length; ++i) e[i].setfillStyle(t)
                },
                settextLineSpacing: function(t) {
                    this._t.settextLineSpacing(t)
                },
                settextAlign: function(t) {},
                settextRatioAnchor: function(t) {
                    this._t.textRatioAnchor(t);
                    for(var e = this.textGprims(), i = 0; i < e.length; ++i) e[i].setratioAnchor(t)
                },
                settextX: function(t) {
                    this._t.settextX(t);
                    var e = this.rectGprim().lineWidth(),
                        i = this.textComGprim(),
                        n = this.xPadding();
                    if(a.isString(t)) {
                        if("left" == t) i.setx(n + e / 2);
                        else if("center" == t) i.setx(this.backgroundWidth() / 2 - i.bbox().width / 2);
                        else if("right" == t) i.setx(this.backgroundWidth() - e / 2 - i.bbox().width - n)
                    } else i.setx(t + e)
                },
                settextY: function(t) {
                    this._t.settextY(t);
                    var e = this.yPadding(),
                        i = this.textComGprim(),
                        n = this.rectGprim().lineWidth();
                    if(a.isString(t)) {
                        if("top" == t) i.sety(e + n / 2);
                        else if("center" == t) i.sety(this.backgroundHeight() / 2 - i.bbox().height / 2);
                        else if("bottom" == t) i.sety(this.backgroundHeight() - n / 2 - i.bbox().height - e)
                    } else i.sety(t)
                },
                localBbox: function() {
                    var t = this.rectGprim();
                    return r.rectMake(0, 0, t.width(), t.height())
                },
                localInside: function(t, e) {
                    var i = 0,
                        n = this.rectGprim();
                    if(t >= -i / 2 && t <= n.width() + i && e >= -i / 2 && e <= n.height() + i) return !0;
                    else return !1
                },
                localHook: function(t) {},
                unlocalHook: function(t) {}
            }, [h("backgroundFillStyle"), h("backgroundStrokeStyle"), h("backgroundLineWidth"), h("backgroundWidth"), h("backgroundHeight"), h("text"), h("textFont"), h("textFillStyle"), h("textLineWidth"), h("textAlign"), h("textLineSpacing"), h("textRatioAnchor"), h("textX"), h("textY"), h("xPadding"), h("yPadding"), d("rectGprim"), d("textGprims"), d("textComGprim")].concat(c.grantAll()), [c]);
        i(p)
    };
    n["/scene.js"] = function(t, e, i) {
        function n(t, e) {
            if(e.hasMethod("receiveBubble")) return e.forceInteractionTypes(t, u);
            else if(t) {
                e.forceRequestInteractiveObjects(l, t, c, u);
                return t
            } else e.requestInteractiveObjects(l, c, u)
        }

        function r(t) {
            t.emitDisplayObjects(d)
        }

        function a(t) {
            t.notify("system", w)
        }

        function s(t) {
            t.notify("system", w)
        }

        function o(t) {
            t.update(h, f)
        }
        var l, c, u, d, h, f, p = t("./lib/debug"),
            _ = t("treeactor").TreeActor,
            m = t("./lib/colortraits").Klass,
            g = t("./lib/colortraits").Trait,
            v = t("./lib/dirtymanager").DirtyManagerTrait,
            y = t("./lib/autorepaint").AutoRepaintTrait,
            b = t("./lib/eventstream"),
            x = g.extend({
                update: function(t, e) {
                    p.error("cannot be here");
                    return this
                },
                add: function(t, e) {
                    p.error("cannot be here")
                },
                remove: function(t) {
                    p.error("cannot be here")
                },
                filt: function(t, e) {
                    p.error("cannot be here")
                },
                forEachActor: function(t) {
                    p.error("cannot be here")
                },
                emitDisplayObjects: function(t) {
                    p.error("cannot be here")
                },
                requestInteractiveObjects: function(t, e, i) {
                    p.error("cannot be here")
                }
            }),
            $ = m.extend({
                initialize: function(t) {
                    var e = this;
                    this.subTraits(1).__init();
                    this.createEventStream("system");
                    this.subscribe("system", function(t) {
                        if("active" == t.type) this.active();
                        else if("deactive" == t.type) e.deactive()
                    });
                    this.subTraits(2).__init(t);
                    this.subTraits(3).__init(t)
                }
            }, [
                ["subject", b.grant("subject")]
            ], [x, b, v, y]),
            w = {
                type: "active"
            },
            k = {
                type: "deactive"
            },
            S = {},
            C = g.extend({
                __init: function(t) {
                    var e = _.create(t);
                    this._t.setroot(e);
                    this._t.setowner(t.owner);
                    return this
                },
                __update: function(t, e) {
                    h = t;
                    f = e;
                    this._t.root().forEach(o)
                },
                owner: function() {
                    return this._t.owner()
                },
                active: function() {
                    w.scene = this;
                    this._t.root().forEach(a)
                },
                deactive: function() {
                    k.scene = this;
                    this._t.root().forEach(s)
                },
                add: function(t, e) {
                    if(null == e) e = this._t.root();
                    if(void 0 != t.parent()) this.remove(t);
                    e._appendChild(t);
                    w.scene = this;
                    t.forEach(a);
                    S.type = "addActor";
                    S.actor = t;
                    this.notify("system", S);
                    return this
                },
                remove: function(t) {
                    S.type = "removeActor";
                    S.actor = t;
                    this.notify("system", S);
                    if(t.parent()) {
                        k.scene = this;
                        t.forEach(s);
                        return t.parent()._removeChild(t)
                    }
                    return this
                },
                replace: function(t, e) {
                    t.parent()._replaceChild(t, e);
                    S.type = "removeActor";
                    S.actor = t;
                    this.notify("system", S);
                    S.type = "addActor";
                    S.actor = e;
                    this.notify("system", S);
                    w.scene = this;
                    e.forEach(a);
                    return t
                },
                removeAllActors: function() {
                    var t = this._t.root();
                    t.removeAllChildren();
                    return this
                },
                isActorInScene: function(t) {
                    var e = this._t.root();
                    if(!e) return !1;
                    else return e.some(function(e) {
                        return e == t
                    })
                },
                filt: function(t, e) {
                    return this._t.root().serializeChildren(t, e)
                },
                forEachActor: function(t) {
                    this._t.root().forEach(t)
                },
                emitDisplayObjects: function(t) {
                    d = t;
                    this.forEachActor(r);
                    return this.minBoundingDirtyRect()
                },
                requestInteractiveObjects: function(t, e, i) {
                    l = t;
                    c = e;
                    u = i;
                    this._t.root().reduceChildren(n)
                }
            }, ["root", "owner", "reduceFunction"]),
            T = $.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this.subTraits(0).__init(t)
                },
                update: function(t, e) {
                    this.subTraits(0).__update(t, e)
                }
            }, [], [C]);
        i({
            SceneTrait: x,
            Scene: $,
            TreeSceneTrait: C,
            TreeScene: T
        })
    };
    n["/sprites/arc.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = n.READONLY,
            a = n.CUSTOM_SETTER,
            s = t("./sprite"),
            o = t("../gprims/arcgprim").ArcTrait,
            l = s.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this.subTraits(0).__init(t)
                }
            }, [
                [r("type"), o.grant("type")],
                [a("radius"), o.grant("radius")],
                [a("startAngle"), o.grant("startAngle")],
                [a("endAngle"), o.grant("endAngle")],
                [a("anticlockwise"), o.grant("anticlockwise")],
                [a("lineWidth"), o.grant("lineWidth")],
                [a("strokeStyle"), o.grant("strokeStyle")],
                [a("shadowColor"), o.grant("shadowColor")]
            ].concat(o.grantMany(["strokeFlag", "id", "tag", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineCap", "lineDash", "strokeScaleInvariant"])), [o]);
        i(l)
    };
    n["/gprims/gprim.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = t("../lib/timestamp"),
            a = t("../lib/transformable").TransformableTrait,
            s = t("../query").QueryTrait,
            o = t("../lib/geometry"),
            l = r.globalTimeStamp,
            c = n.Klass,
            u = n.READONLY,
            d = o.Rect(0, 0, 0, 0),
            h = {
                tolerance: 0
            },
            f = n.compose([a, s], {
                __init: function(t) {
                    if(void 0 == t) t = {};
                    this.subTraits(0).__init(l);
                    this.subTraits(1).__init(t);
                    this._t.setcache({});
                    this._t.settype("gprim");
                    this._t.setanchorPoint({
                        x: 0,
                        y: 0,
                        type: "absolute"
                    });
                    this._t.settolerance(void 0 == t.tolerance ? h.tolerance : t.tolerance);
                    if(void 0 !== t.ratioAnchor) this._t.setanchorPoint({
                        x: t.ratioAnchor.ratiox,
                        y: t.ratioAnchor.ratioy,
                        type: "ratio"
                    });
                    if(void 0 !== t.anchor) this._t.setanchorPoint({
                        x: t.anchor.x,
                        y: t.anchor.y,
                        type: "absolute"
                    });
                    if(void 0 !== t.x) this.setx(t.x);
                    if(void 0 !== t.y) this.sety(t.y);
                    if(void 0 !== t.z) this.setz(t.z)
                },
                width: function() {
                    return this.bbox().width
                },
                height: function() {
                    return this.bbox().height
                },
                bbox: function() {
                    var t = this._t.cache(),
                        e = this.matrix(),
                        i = this.stamp();
                    if(void 0 != t.bbox && i == t.stamp) return t.bbox;
                    var n = this.localBbox(),
                        r = this.anchor();
                    n.x -= r.x;
                    n.y -= r.y;
                    n = o.rectApplyMatrixToBoundRect(n, e);
                    t.stamp = i;
                    t.bbox = n;
                    return n
                },
                inside: function(t, e) {
                    var i = this.bbox(),
                        n = this._t.tolerance();
                    if(i.x - n <= t && t <= i.x + i.width + n && i.y - n <= e && e <= i.y + i.height + n) {
                        var r = o.matrixInvert(this.matrix()),
                            a = o.pointApplyMatrix({
                                x: t,
                                y: e
                            }, r),
                            s = this.anchor();
                        a.x += s.x;
                        a.y += s.y;
                        return this.localInside(a.x, a.y)
                    }
                    return !1
                },
                toleranceInside: function(t, e, i) {
                    var n = this.bbox();
                    if(null != i) {
                        var r = (i - 1) * n.width / 2,
                            a = (i - 1) * n.height / 2;
                        return n.x - r <= t && t < n.x + n.width + r && n.y - a <= e && e < n.y + n.height + a
                    } else return n.x <= t && t < n.x + n.width && n.y <= e && e < n.y + n.height
                },
                setratioAnchor: function(t) {
                    var e = this._t.anchorPoint();
                    e.x = t.ratiox;
                    e.y = t.ratioy;
                    e.type = "ratio";
                    return this
                },
                ratioAnchor: function() {
                    var t = this._t.anchorPoint();
                    if("absolute" == t.type) {
                        var e = this.localBbox();
                        return {
                            ratiox: t.x / e.width,
                            ratioy: t.y / e.height
                        }
                    } else return {
                        ratiox: t.x,
                        ratioy: t.y
                    }
                },
                setanchor: function(t) {
                    var e = this._t.anchorPoint();
                    e.x = t.x;
                    e.y = t.y;
                    e.type = "absolute";
                    return this
                },
                anchor: function() {
                    var t = this._t.anchorPoint();
                    if("absolute" == t.type) return {
                        x: t.x,
                        y: t.y
                    };
                    else {
                        var e, i = this.localBbox();
                        if(null == this.strokeStyle() || 0 == this.strokeStyle().a) e = 0;
                        else e = this.getRealLineWidth();
                        return {
                            x: t.x * (i.width - e),
                            y: t.y * (i.height - e)
                        }
                    }
                },
                localBbox: function() {
                    return d
                },
                localInside: function(t, e) {
                    return !1
                },
                hookGPrimVisible: function(t) {
                    this.localHook(t);
                    this.hook(this.subTraits(0), "dirtyStamp", t, "a");
                    this.hook(this.subTraits(0), "dirtyStamp", t, "b")
                },
                localHook: function(t) {
                    this.hook(this._t, "anchorPoint", t, "a")
                },
                unhookGPrimVisible: function(t) {
                    this.unlocalHook(t);
                    this.unhook(this.subTraits(0), "dirtyStamp", t, "a");
                    this.unhook(this.subTraits(0), "dirtyStamp", t, "b")
                },
                unlocalHook: function(t) {
                    this.unhook(this._t, "anchorPoint", t, "a")
                }
            }, ["type", "cache", "anchorPoint", "tolerance"].concat(s.grantAll())),
            p = c.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t)
                }
            }, [
                [u("type"), f.grant("type")]
            ].concat(f.grantMany(["id", "tag"])), [f]);
        i({
            GPrimTrait: f,
            GPrim: p
        })
    };
    n["/pidget.js"] = function(t, e, i) {
        var n = t("./lib/colortraits").Klass,
            r = (t("./lib/colortraits").Trait, t("./lib/colortraits").compose, t("./lib/debug"), n.extend({
                initialize: function(t) {
                    this._t.setgprim(t.gprim);
                    this._t.setactor(t.actor);
                    this._t.setworldMatrix(t.worldMatrix);
                    this._t.setviewMatrix(t.viewMatrix)
                }
            }, ["gprim", "actor", "worldMatrix", "viewMatrix"])),
            a = r.extend({
                initialize: function(t) {
                    this.execProto("initialize", t)
                },
                draw: function(t) {
                    t.drawDisplayObject(this)
                }
            }),
            s = r.extend({
                initialize: function(t) {
                    this.execProto("initialize", t)
                },
                inside: function(t, e) {
                    var i = t.getPstnRelativeToMatrix(e, this.worldMatrix());
                    return this.gprim().inside(i.x, i.y)
                }
            }),
            o = a.extend({
                initialize: function(t) {
                    this.execProto("initialize", t)
                },
                draw: function(t) {
                    var e = this.actor().clipper(),
                        i = this.actor().effect();
                    t.drawEffectedDisplayObject(this, e, i)
                }
            }),
            l = s.extend({
                initialize: function(t) {
                    this.execProto("initialize", t)
                },
                inside: function(t, e) {
                    var i = this.actor().clipper();
                    if(!i) return this.execProto("inside", t, e);
                    else return this.execProto("inside", t, e) && i.inside(t, e)
                }
            });
        i({
            DisplayObject: a,
            InteractiveObject: s,
            EffectedDisplayObject: o,
            EffectedInteractiveObject: l
        })
    };
    n["/sprites/rect.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = n.READONLY,
            a = n.CUSTOM_SETTER,
            s = t("./sprite"),
            o = t("../gprims/rectgprim").RectTrait,
            l = s.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this.subTraits(0).__init(t);
                    this.setfixBlur(null == t ? null : t.fixBlur)
                }
            }, [
                [r("type"), o.grant("type")], "fixBlur", [a("lineWidth"), o.grant("lineWidth")],
                [a("strokeStyle"), o.grant("strokeStyle")],
                [a("fillStyle"), o.grant("fillStyle")],
                [a("shadowColor"), o.grant("shadowColor")]
            ].concat(o.grantMany(["fillFlag", "strokeFlag", "id", "tag", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "strokeScaleInvariant"])), [o]);
        i(l)
    };
    n["/eventdecider.js"] = function(t, e, i) {
        function n() {
            this.flow = !1
        }

        function r(t, e) {
            return e.viewMatrix().tz - t.viewMatrix().tz
        }

        function a(t, e, i, n) {
            for(var r, a, s, o = e.length, l = 0; l < o; ++l) {
                a = t.hitTestNodes(i, {
                    x: e[0].mouseX,
                    y: e[0].mouseY
                }, n);
                s = a ? a.hitActor : void 0;
                if(null == r) r = s;
                if(null == r || r != s) return !1
            }
            return r
        }

        function s(t) {
            if(null == t.actor.queryInteractSubject(t.type));
            t.actor.queryInteractSubject(t.type).onNext(t)
        }

        function o(t) {
            var e = t.actor;
            e.queryInteractSubject(t.type).onNext(t);
            if(t.flow)
                for(var i = e.parent(); i;) {
                    if(i.hasMethod("receiveBubble") && i.receiveBubble() && i.queryInteractSubject(t.type)) {
                        i.queryInteractSubject(t.type).onNext(t);
                        if(!t.flow) return
                    }
                    e = i;
                    i = i.parent()
                }
        }
        var l = t("./lib/geometry"),
            c = (t("./lib/debug"), t("./lib/colortraits").Klass),
            u = t("./lib/colortraits").Trait,
            d = t("./thirdlib/rx/all"),
            h = t("./lib/util"),
            f = (h.arrayForEach, h.arraySome, h.identifier, h.objectDotCreate),
            p = function(t, e) {
                var i = l.matrixInvert(t.getGameToViewMatrix()),
                    n = l.pointApplyMatrix({
                        x: e.mouseX,
                        y: e.mouseY
                    }, i);
                e.gameX = n.x;
                e.gameY = n.y;
                return e
            },
            _ = function(t) {
                var e = f(t);
                e.flow = !0;
                e.preventFlow = n;
                return e
            },
            m = u.extend({
                initialize: function(t) {
                    this.interactiveObjs = {};
                    this.interactiveObjs.mouse = [];
                    this.interactiveObjs.keyboard = [];
                    this.interactiveObjs.touch = [];
                    this._deciderSubject = new d.Subject;
                    this._deciderObservable = this._deciderSubject.asObservable();
                    this._deciderObservable.subscribe(t)
                },
                deciderObservable: function() {
                    return this._deciderObservable
                },
                hitTestNodes: function(t, e, i) {
                    var n, a, s = this;
                    t.updateViewMatrix(i);
                    i.sort(r);
                    for(var o = 0; o < i.length; ++o) {
                        var l = i[o];
                        a = s.hitTest(t, e, l);
                        if(0 != a) {
                            n = l;
                            break
                        }
                    }
                    if(n) return {
                        hitActor: n.actor(),
                        gprimPath: "object" == typeof a ? a : void 0
                    }
                },
                hitTest: function(t, e, i) {
                    return i.inside(t, e)
                },
                updateInteractiveObjects: function(t, e) {
                    this.interactiveObjs[e].length = 0;
                    t.requestInteractiveObjects(this, this.interactiveObjs[e], e)
                }
            }),
            g = c.extend({}, [], [m]),
            v = u.extend({
                mousedownDecider: function(t, e, i, n) {
                    if(this._pressedInfo)
                        if(void 0 != this._pressedInfo.hitActor.queryInteractSubject("mouseReleased")) {
                            var r = _(e);
                            r.type = "mouseReleased";
                            r.actor = this._pressedInfo.hitActor;
                            this._pressedInfo = void 0;
                            this._pressedEvent = void 0;
                            n.onNext(r)
                        }
                    var a = this.hitTestNodes(t, {
                            x: e.mouseX,
                            y: e.mouseY
                        }, i),
                        s = a ? a.hitActor : void 0;
                    if(a && void 0 != s.queryInteractSubject("mousePressed")) {
                        this._pressedInfo = a;
                        this._pressedEvent = _(e);
                        this._pressedEvent.type = "mousePressed";
                        this._pressedEvent.actor = s;
                        this._pressedEvent.gprimPath = a.gprimPath;
                        n.onNext(this._pressedEvent)
                    }
                },
                mousemoveDecider: function(t, e, i, n) {
                    if(this._pressedInfo) {
                        if(null != this._pressedInfo.hitActor.queryInteractSubject("mouseMoved")) {
                            var r = _(e);
                            r.gprimPath = this._pressedInfo.gprimPath;
                            r.actor = this._pressedInfo.hitActor;
                            r.type = "mouseMoved";
                            n.onNext(r)
                        }
                    } else {
                        var a = this.hitTestNodes(t, {
                                x: e.mouseX,
                                y: e.mouseY
                            }, i),
                            s = a ? a.hitActor : void 0;
                        if(this._activeNode && s !== this._activeNode) {
                            if(null != this._activeNode.queryInteractSubject("mouseOut")) {
                                var r = _(e);
                                r.type = "mouseOut";
                                r.gprimPath = this._activeGPrimPath;
                                r.actor = this._activeNode;
                                n.onNext(r)
                            }
                            this._activeNode = void 0;
                            this._activeGPrim = void 0;
                            this._activeGPrimPath = void 0
                        } else if(a && s && s == this._activeNode) {
                            if(null != this._activeNode.queryInteractSubject("mouseMoved")) {
                                var r = _(e);
                                r.type = "mouseMoved";
                                r.gprimPath = a.gprimPath;
                                r.actor = this._activeNode;
                                n.onNext(r)
                            }
                        } else if(s && s !== this._activeNode) {
                            this._activeNode = a.hitActor;
                            this._activeGPrimPath = a.gprimPath;
                            if(null != this._activeNode.queryInteractSubject("mouseOver")) {
                                var r = _(e);
                                r.type = "mouseOver";
                                r.gprimPath = a.gprimPath;
                                r.actor = this._activeNode;
                                n.onNext(r)
                            }
                        }
                    }
                },
                mouseupDecider: function(t, e, i, n) {
                    if(this._pressedInfo)
                        if(null == this._pressedInfo.hitActor.queryInteractSubject("mouseReleased")) {
                            this._pressedInfo = void 0;
                            this._pressedEvent = void 0
                        } else {
                            var r = _(e);
                            r.gprimPath = this._pressedInfo.gprimPath;
                            r.actor = this._pressedInfo.hitActor;
                            r.type = "mouseReleased";
                            this._pressedInfo = void 0;
                            this._pressedEvent = void 0;
                            n.onNext(r)
                        }
                },
                mouseoutDecider: function(t, e, i, n) {
                    if(this._activeNode) {
                        if(null != this._activeNode.queryInteractSubject("mouseOut")) {
                            var r = _(e);
                            r.type = "mouseOut";
                            r.gprimPath = this._activeGPrimPath;
                            r.actor = this._activeNode;
                            n.onNext(r)
                        }
                        this._activeNode = void 0;
                        this._activeGPrim = void 0;
                        this._activeGPrimPath = void 0
                    }
                }
            }),
            y = u.extend({
                commonEventDecider: function(t, e, i, n) {
                    for(var r = 0; r < i.length; ++r) {
                        var a = _(e);
                        a.actor = i[r].actor();
                        n.onNext(a)
                    }
                }
            }),
            b = u.extend({
                touchstartDecider: function(t, e, i, n) {
                    var r = e.touches,
                        s = r.length;
                    if(!this._t.twoFingerTouching() && 2 == s) {
                        if(2 == s) {
                            var o = a(this, r, t, i);
                            if(o)
                                if(null != o.queryInteractSubject("twoFingerTouch")) {
                                    var l = _(e);
                                    l.type = "twoFingerTouch";
                                    l.etype = "touchstart";
                                    l.actor = o;
                                    n.onNext(l);
                                    this._t.settwoFingerTouching(o)
                                }
                        }
                    } else this.mousedownDecider(t, e, i, n)
                },
                touchmoveDecider: function(t, e, i, n) {
                    var r = e.touches;
                    if(null != this._t.twoFingerTouching() && 2 == r.length) {
                        var s = a(this, r, t, i);
                        if(s && s == this._t.twoFingerTouching())
                            if(null != s.queryInteractSubject("twoFingerTouch")) {
                                var o = _(e);
                                o.type = "twoFingerTouch";
                                o.etype = "touchmove";
                                o.actor = s;
                                n.onNext(o)
                            }
                    } else this.mousemoveDecider(t, e, i, n)
                },
                touchendDecider: function(t, e, i, n) {
                    this.mouseupDecider(t, e, i, n);
                    if(null != this._t.twoFingerTouching()) {
                        var r = this._t.twoFingerTouching();
                        if(null != r.queryInteractSubject("twoFingerTouch")) {
                            var a = _(e);
                            a.type = "twoFingerTouch";
                            a.etype = "touchend";
                            a.actor = r;
                            n.onNext(a);
                            this._t.settwoFingerTouching(void 0)
                        }
                    }
                }
            }, ["twoFingerTouching"]),
            x = "mouse",
            $ = "keyboard",
            w = g.extend({
                initialize: function(t, e, i, n) {
                    this.execProto("initialize", n);
                    var r = this,
                        t = t,
                        e = e,
                        a = this._deciderSubject,
                        s = 0;
                    this.observers = [];
                    if(e.mousedownObservable) {
                        this.observers[s++] = e.mousedownObservable.subscribe(function(e) {
                            r.updateInteractiveObjects(i, x);
                            p(t, e);
                            r.mousedownDecider(t, e, r.interactiveObjs.mouse, a)
                        });
                        this.observers[s++] = e.mousemoveObservable.subscribe(function(e) {
                            r.updateInteractiveObjects(i, x);
                            p(t, e);
                            r.mousemoveDecider(t, e, r.interactiveObjs.mouse, a)
                        });
                        this.observers[s++] = e.mouseupObservable.subscribe(function(e) {
                            r.updateInteractiveObjects(i, x);
                            p(t, e);
                            r.mouseupDecider(t, e, r.interactiveObjs.mouse, a)
                        });
                        this.observers[s++] = e.mouseoutObservable.subscribe(function(e) {
                            r.updateInteractiveObjects(i, x);
                            p(t, e);
                            r.mouseoutDecider(t, e, r.interactiveObjs.mouse, a)
                        })
                    }
                    this.observers[s++] = e.keydownObservable.subscribe(function(e) {
                        r.updateInteractiveObjects(i, $);
                        p(t, e);
                        r.commonEventDecider(t, e, r.interactiveObjs.keyboard, a)
                    });
                    this.observers[s++] = e.keyupObservable.subscribe(function(e) {
                        r.updateInteractiveObjects(i, $);
                        p(t, e);
                        r.commonEventDecider(t, e, r.interactiveObjs.keyboard, a)
                    });
                    if(e.touchstartObservable) {
                        this.observers[s++] = e.touchstartObservable.subscribe(function(e) {
                            r.updateInteractiveObjects(i, x);
                            p(t, e);
                            r.touchstartDecider(t, e, r.interactiveObjs.mouse, a)
                        });
                        this.observers[s++] = e.touchmoveObservable.subscribe(function(e) {
                            r.updateInteractiveObjects(i, x);
                            p(t, e);
                            r.touchmoveDecider(t, e, r.interactiveObjs.mouse, a)
                        });
                        this.observers[s++] = e.touchendObservable.subscribe(function(e) {
                            r.updateInteractiveObjects(i, x);
                            p(t, e);
                            r.touchendDecider(t, e, r.interactiveObjs.mouse, a)
                        })
                    }
                    if(e.mousewheelObservable) e.mousewheelObservable.subscribe(function(e) {
                        r.updateInteractiveObjects(i, x);
                        p(t, e);
                        r.commonEventDecider(t, e, r.interactiveObjs.mouse, a)
                    })
                },
                destroy: function() {
                    for(var t = 0; t < this.observers.length; ++t) this.observers[t].dispose()
                }
            }, [], [v, y, b]),
            k = w.extend({
                initialize: function(t, e, i) {
                    this.execProto("initialize", t, e, i, s)
                }
            }),
            S = w.extend({
                initialize: function(t, e, i) {
                    this.execProto("initialize", t, e, i, o)
                }
            });
        i({
            DeciderBase: g,
            EventDecider: k,
            BubbleEventDecider: S
        })
    };
    n["/painter/honestpainter.js"] = function(t, e, i) {
        var n = (t("../lib/debug"), t("../lib/debug").assert),
            r = (Math.abs, Math.pow, t("../lib/canvasobservable").CanvasEventObservables),
            a = t("../lib/colortraits").Klass,
            s = t("../lib/colortraits").Trait,
            o = t("../lib/util"),
            l = o.arrayForEach,
            c = {
                fitWidth: function(t, e, i) {
                    if(!e.x[1] && !e.width[1]) {
                        e.sx[1] = !0;
                        e.swidth[1] = !0;
                        e.x[1] = !0;
                        e.width[1] = !0;
                        e.width[0] = t.gprimw
                    }
                },
                fitHeight: function(t, e, i) {
                    if(!e.y[1] && !e.height[1]) {
                        e.sy[1] = !0;
                        e.sheight[1] = !0;
                        e.y[1] = !0;
                        e.height[1] = !0;
                        e.height[0] = t.gprimh
                    }
                },
                uniformScale: function(t, e, i) {
                    if(e.width[1] && !e.height[1]) {
                        e.height[0] = t.imgh * t.gprimw / t.imgw;
                        e.height[1] = !0
                    } else if(e.height[1] && !e.width[1]) {
                        e.width[0] = t.imgw * t.gprimh / t.imgh;
                        e.width[1] = !0
                    }
                },
                place: function(t, e, i) {
                    if(!e.x[1] && "yAlign" !== i[3]) {
                        if(e.width[1]) e.x[0] = i[1] * t.gprimw - i[0] * e.width[0];
                        else e.x[0] = i[1] * t.gprimw - i[0] * t.imgw;
                        e.x[1] = !0
                    } else if(!e.y[1]) {
                        if(e.height[1]) e.y[0] = i[1] * t.gprimh - i[0] * e.height[0];
                        else e.y[0] = i[1] * t.gprimh - i[0] * t.imgh;
                        e.y[1] = !0
                    }
                },
                cut: function(t, e, i) {
                    if(!e.sx[1]) {
                        e.sx[1] = !0;
                        e.sx[0] = -e.x[0];
                        e.swidth[0] = t.gprimw * t.imgh / t.gprimh
                    }
                    if(!e.sy[1]) {
                        e.sy[1] = !0;
                        e.sy[0] = -e.y[0];
                        e.sheight[0] = t.gprimh * t.imgw / t.gprimw
                    }
                    e.x[0] = 0;
                    e.y[0] = 0;
                    e.width[0] = t.gprimw;
                    e.height[0] = t.gprimh
                }
            },
            u = function(t, e) {
                e.save();
                t.applyStyle(e);
                t.applyInvariantLineWidth(e)
            },
            d = function(t) {
                t.restore()
            },
            h = {
                M: function(t, e) {
                    var i = t.point();
                    e.moveTo(i.x, i.y)
                },
                L: function(t, e) {
                    var i = t.point();
                    e.lineTo(i.x, i.y)
                },
                Q: function(t, e) {
                    var i = t.point(),
                        n = t.controlpoint();
                    e.quadraticCurveTo(n.x, n.y, i.x, i.y)
                },
                C: function(t, e) {
                    var i = t.point(),
                        n = t.controlpoint1(),
                        r = t.controlpoint2();
                    e.bezierCurveTo(n.x, n.y, r.x, r.y, i.x, i.y)
                },
                A: function(t, e) {
                    var i = t.rx(),
                        n = t.ry(),
                        r = t.point();
                    if(0 !== i && 0 !== n) {
                        var a = t.center().x,
                            s = t.center().y,
                            o = (t.largearcflag(), t.sweepflag()),
                            l = t.xaxisrotate(),
                            c = t.startAngle(),
                            u = t.endAngle(),
                            d = 1 === o ? !1 : !0;
                        e.translate(a, s);
                        e.rotate(l);
                        var h = i > n ? i : n;
                        e.scale(i / h, n / h);
                        e.arc(0, 0, h, c, u, d);
                        e.scale(h / i, h / n);
                        e.rotate(-l);
                        e.translate(-a, s)
                    } else e.lineTo(r.x, r.y)
                },
                Z: function(t, e) {
                    e.closePath()
                }
            },
            f = function(t, e, i) {
                var n = t.bbox();
                i.lineTo(n.width, 0);
                i.lineTo(n.width, n.height);
                i.lineTo(0, n.height);
                i.lineTo(0, 0)
            },
            p = 2 * Math.PI,
            _ = {
                isVert: function(t, e, i, n) {
                    return t == i
                },
                isHorz: function(t, e, i, n) {
                    return e == n
                },
                fixPos: function(t, e) {
                    var i = !0;
                    if(i) {
                        var n = (Math.floor(e + .249), Math.floor(t + .249));
                        if(e % 2) n += .5;
                        return n
                    } else return t
                },
                moveTo: function(t, e, i, n, r, a) {
                    if(void 0 != r && void 0 != a) {
                        if(this.isVert(i, n, r, a)) {
                            var s = this.fixPos(i, e);
                            t.moveTo(s, n);
                            return {
                                x: s,
                                y: n,
                                ox: i,
                                oy: n,
                                modified: i != s
                            }
                        }
                        if(this.isHorz(i, n, r, a)) {
                            var o = this.fixPos(n, e);
                            t.moveTo(i, o);
                            return {
                                x: i,
                                y: o,
                                ox: i,
                                oy: n,
                                modified: n != o
                            }
                        }
                    }
                    t.moveTo(i, n);
                    return {
                        x: i,
                        y: n,
                        ox: i,
                        oy: n,
                        modified: !1
                    }
                },
                lineTo: function(t, e, i, n, r) {
                    if(this.isVert(i.ox, i.oy, n, r) || i.modified && this.isVert(i.x, i.y, n, r)) {
                        var a = this.fixPos(n, e);
                        t.lineTo(a, r);
                        return {
                            x: a,
                            y: r,
                            ox: n,
                            oy: r,
                            modified: n != a
                        }
                    }
                    if(this.isHorz(i.ox, i.oy, n, r) || i.modified && this.isHorz(i.x, i.y, n, r)) {
                        var s = this.fixPos(r, e);
                        t.lineTo(n, s);
                        return {
                            x: n,
                            y: s,
                            ox: n,
                            oy: r,
                            modified: r != s
                        }
                    }
                    t.lineTo(n, r);
                    return {
                        x: n,
                        y: r,
                        ox: n,
                        oy: r,
                        modified: !1
                    }
                },
                rect: function(t, e, i, n, r, a) {
                    var s = this.fixPos(i, e),
                        o = this.fixPos(i + r, e),
                        l = this.fixPos(n, e),
                        c = this.fixPos(n + a, e);
                    t.rect(s - i, l - n, o - s, c - l)
                }
            },
            m = {
                defaultPath: function(t, e, i) {
                    f(t, e, i)
                },
                circle: function(t, e, i) {
                    var n = t.radius();
                    i.translate(n, n);
                    i.arc(0, 0, n, 0, p, !0);
                    i.translate(-n, -n)
                },
                polygon: function(t, e, i) {
                    var n = t.vertexes();
                    for(var r in n) {
                        var a = n[r];
                        i.lineTo(a.x, a.y)
                    }
                },
                line: function(t, e, i) {
                    var n = t.vertexes();
                    if(!(null == n || n.length < 1)) {
                        i.moveTo(n[0].x, n[0].y);
                        for(var r = 1; r < n.length; r++) i.lineTo(n[r].x, n[r].y)
                    }
                },
                lineF: function(t, e, i) {
                    var n = t.vertexes();
                    if(!(null == n || n.length < 1)) {
                        var r, a = t.getRealLineWidth();
                        r = _.moveTo(i, a, n[0].x, n[0].y, n[1].x, n[1].y);
                        for(var s = 1; s < n.length; s++) {
                            var o = _.lineTo(i, a, r, n[s].x, n[s].y);
                            r = o
                        }
                    }
                },
                arc: function(t, e, i) {
                    i.arc(0, 0, t.radius(), t.startAngle(), t.endAngle(), t.anticlockwise())
                },
                path: function(t, e, i) {
                    var n = t.pathElements();
                    if(!(null == n || n.length < 2 || "M" != n[0].type() || "Z" == n[1].type()))
                        for(var r = 0, a = n.length; r < a; r++) {
                            var s = n[r].type(),
                                o = h[s];
                            o(n[r], i)
                        }
                },
                turtle: function(t, e, i) {
                    var n = t.pathElements();
                    if(!(null == n || n.length < 1 || "Z" == n[0].type)) {
                        i.moveTo(0, 0);
                        for(var r = 0, a = n.length; r < a; r++) {
                            i.rotate(n[r].angle());
                            var s = n[r].type(),
                                o = h[s];
                            o(n[r], i);
                            var l = n[r].point();
                            i.translate(l.x, l.y)
                        }
                    }
                },
                annulus: function(t, e, i) {
                    var n = t.startAngle(),
                        r = t.endAngle(),
                        a = t.innerradius(),
                        s = t.outerradius();
                    if(Math.abs(r - n) >= p - 1e-4)
                        if(0 != a) {
                            i.arc(0, 0, t.outerradius(), t.startAngle(), t.endAngle(), t.anticlockwise());
                            i.moveTo(a * Math.cos(r), a * Math.sin(r));
                            i.arc(0, 0, t.innerradius(), t.endAngle(), t.startAngle(), !t.anticlockwise())
                        } else i.arc(0, 0, t.outerradius(), t.startAngle(), t.endAngle(), t.anticlockwise());
                    else {
                        i.moveTo(a * Math.cos(n), a * Math.sin(n));
                        i.lineTo(s * Math.cos(n), s * Math.sin(n));
                        i.arc(0, 0, t.outerradius(), t.startAngle(), t.endAngle(), t.anticlockwise());
                        i.lineTo(a * Math.cos(r), a * Math.sin(r));
                        i.arc(0, 0, t.innerradius(), t.endAngle(), t.startAngle(), !t.anticlockwise())
                    }
                }
            },
            g = function(t, e, i, n) {
                var r = t.owner().matrix(),
                    a = t.gprim();
                i.setTransform(n.a, n.b, n.c, n.d, n.tx, n.ty);
                i.transform(r.a, r.b, r.c, r.d, r.tx, r.ty);
                var s = a.matrix();
                i.transform(s.a, s.b, s.c, s.d, s.tx, s.ty);
                i.beginPath();
                var o = m[a.type()];
                if(!o) m["defaultPath"](a, e, i);
                else o(a, e, i);
                i.closePath();
                i.clip()
            },
            v = {
                gprim: function(t, e, i) {},
                image: function(t, e, i) {
                    var n = t.image();
                    if(n.complete && 0 != n.naturalWidth) {
                        var r = t.alpha(),
                            a = i.globalAlpha;
                        if(r != a) i.globalAlpha *= r;
                        var s = t.constraintmode();
                        if(void 0 == s) {
                            i.drawImage(n, 0, 0);
                            return
                        }
                        var o, l, u, d = t.width(),
                            h = t.height(),
                            f = n.width,
                            p = n.height,
                            _ = {
                                imgw: f,
                                imgh: p,
                                gprimw: d,
                                gprimh: h
                            },
                            m = {
                                sx: [0, !1],
                                sy: [0, !1],
                                swidth: [f, !1],
                                sheight: [p, !1],
                                x: [0, !1],
                                y: [0, !1],
                                width: [f, !1],
                                height: [p, !1]
                            },
                            g = s.length;
                        for(l = 0; l < g; l++) {
                            o = s[l].type;
                            if("fitHeight" === o || "fitWidth" === o) {
                                u = c[o];
                                u(_, m, s[l].param);
                                break
                            }
                        }
                        var v;
                        for(l = 0; l < g; l++) {
                            o = s[l].type;
                            if("cut" != o) {
                                u = c[o];
                                u(_, m, s[l].param)
                            } else v = "cut"
                        }
                        if("cut" === v) {
                            u = c[v];
                            u(_, m)
                        }
                        i.drawImage(n, m.sx[0], m.sy[0], m.swidth[0], m.sheight[0], m.x[0], m.y[0], m.width[0], m.height[0]);
                        i.globalAlpha = a
                    } else if(e.showUnloadedImage()) {
                        i.fillStyle = "white";
                        i.fillRect(5, 5, t.width() - 10, t.height() - 10);
                        i.lineWidth;
                        i.lineWidth = 5;
                        i.fillStyle = "blue";
                        i.strokeStyle = "blue";
                        i.beginPath();
                        i.moveTo(5, 5);
                        i.lineTo(t.width() - 11, t.height() - 11);
                        i.moveTo(t.width() - 11, 5);
                        i.lineTo(5, t.height() - 15);
                        i.stroke();
                        var y = i.textBaseline;
                        i.font = "18 Arial";
                        i.textBaseline = "top";
                        i.fillText("未加载图片", 0, 0);
                        i.textBaseline = y
                    }
                },
                circle: function(t, e, i) {
                    u(t, i);
                    i.beginPath();
                    m[t.type()](t, e, i);
                    if(void 0 != t.fillStyle() || t.fillFlag()) i.fill();
                    if(void 0 != t.strokeStyle() || t.strokeFlag()) i.stroke();
                    d(i)
                },
                polygon: function(t, e, i) {
                    t.vertexes();
                    u(t, i);
                    i.beginPath();
                    m[t.type()](t, e, i);
                    i.closePath();
                    if(void 0 != t.fillStyle() || t.fillFlag()) i.fill();
                    if(void 0 != t.strokeStyle() || t.strokeFlag()) i.stroke();
                    d(i)
                },
                text: function(t, e, i) {
                    var n = t.text();
                    u(t, i);
                    i.font = t.fontString();
                    var r = i.textBaseline;
                    i.textBaseline = "middle";
                    var a = t.font().size / 2;
                    if(void 0 != t.fillStyle() || t.fillFlag()) i.fillText(n, 0, a);
                    if(void 0 != t.strokeStyle() || t.strokeFlag()) i.strokeText(n, 0, a);
                    else if(void 0 == t.fillStyle() && !t.fillFlag()) i.fillText(n, 0, a);
                    i.textBaseline = r;
                    d(i)
                },
                map: function(t, e, i) {
                    var n = t.map,
                        r = e._canvas.width,
                        a = e._canvas.height;
                    n.paint(i, 0, 0, r, a, 0, 0, r, a)
                },
                line: function(t, e, i) {
                    u(t, i);
                    var n = t.vertexes();
                    if(!(null == n || n.length < 1)) {
                        i.beginPath();
                        if(t.fixBlur()) m["lineF"](t, e, i);
                        else m["line"](t, e, i);
                        i.stroke();
                        d(i)
                    }
                },
                arc: function(t, e, i) {
                    u(t, i);
                    i.beginPath();
                    m[t.type()](t, e, i);
                    i.stroke();
                    d(i)
                },
                clip: function(t, e, i) {
                    i.save();
                    i.beginPath();
                    i.rect(0, 0, t.clipw(), t.cliph());
                    i.clip();
                    i.translate(-t.clipx(), -t.clipy());
                    e.draw(t.gprim());
                    i.closePath();
                    i.restore()
                },
                procedure: function(t, e, i) {
                    i.save();
                    t.draw(t, e, i);
                    i.restore()
                },
                composite: function(t, e, i) {
                    u(t, i);
                    for(var n = 0, n = 0, r = t.gprims().length; n < r; ++n) {
                        var a = t.gprims()[n];
                        e.draw(a, i)
                    }
                    d(i)
                },
                multilinetext: function(t, e, i) {
                    v.composite(t, e, i)
                },
                autowraptext: function(t, e, i) {
                    v.composite(t, e, i)
                },
                path: function(t, e, i) {
                    var n = t.pathElements();
                    if(!(null == n || n.length < 2 || "M" != n[0].type() || "Z" == n[1].type())) {
                        u(t, i);
                        i.beginPath();
                        m[t.type()](t, e, i);
                        if((void 0 != t.fillStyle() || t.fillFlag()) && "Z" == n[n.length - 1].type()) i.fill();
                        if(void 0 != t.strokeStyle() || t.strokeFlag()) i.stroke();
                        d(i)
                    }
                },
                turtle: function(t, e, i) {
                    var n = t.pathElements();
                    if(!(null == n || n.length < 1 || "Z" == n[0].type)) {
                        u(t, i);
                        i.beginPath();
                        i.moveTo(0, 0);
                        for(var r = 0, a = n.length; r < a; r++) {
                            i.rotate(n[r].angle());
                            var s = n[r].type(),
                                o = h[s];
                            o(n[r], i);
                            var l = n[r].point();
                            i.translate(l.x, l.y)
                        }
                        if((void 0 != t.fillStyle() || t.fillFlag()) && "Z" == n[n.length - 1].type()) i.fill();
                        if(void 0 != t.strokeStyle() || t.strokeFlag()) i.stroke();
                        d(i)
                    }
                },
                annulus: function(t, e, i) {
                    u(t, i);
                    i.beginPath();
                    m[t.type()](t, e, i);
                    if(void 0 != t.fillStyle() || t.fillFlag()) i.fill();
                    if(void 0 != t.strokeStyle() || t.strokeFlag()) i.stroke();
                    d(i)
                },
                rect: function(t, e, i) {
                    u(t, i);
                    i.beginPath();
                    if(t.fixBlur()) {
                        var n = t.anchor(),
                            r = 0,
                            a = 0;
                        if(0 != n.x || 0 != n.y) {
                            r = -n.x;
                            a = -n.y
                        }
                        var s = t.getRealLineWidth();
                        _.rect(i, s, t.worldX() + r, t.worldY() + a, t.width(), t.height())
                    } else i.rect(0, 0, t.width(), t.height());
                    if(void 0 != t.fillStyle() || t.fillFlag()) i.fill();
                    if(void 0 != t.strokeStyle() || t.strokeFlag()) i.stroke();
                    d(i)
                },
                backgroundText: function(t, e, i) {
                    i.save();
                    e.draw(t.rectGprim(), i);
                    e.draw(t.textComGprim(), i);
                    i.restore()
                }
            },
            y = function(t, e) {
                var i = t.getContext("2d");
                if(void 0 != e.alpha) i.globalAlpha *= e.alpha
            },
            b = s.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this._canvas = t;
                    this._ctx = t.getContext("2d");
                    this._showUnloadedImage = !0
                },
                sketchpad: function() {
                    return this._canvas
                },
                getContext: function(t) {
                    return this._canvas.getContext(t)
                },
                bbox: function(t) {
                    var e = t.cache;
                    if(void 0 !== e.bbox) return e.bbox;
                    var i = hvBboxTbl[t.type];
                    n(i, "no bounding box calculator for the `" + t.type + "' type of gprim");
                    var r = i(t, this);
                    if(!r.nocache) e.bbox = r;
                    else e.bbox = void 0;
                    return r
                },
                inside: function(t, e) {
                    var i = this.bbox(t),
                        r = e.x,
                        a = e.y;
                    if(i.origin.x <= r && r < i.origin.x + i.size.width && i.origin.y <= a && a < i.origin.y + i.size.height) {
                        var s = hvInsideTbl[t.type];
                        n(s, "no inside function for the `" + t.type + "' of gprim");
                        return s(t, r, a, this)
                    } else return !1
                },
                showUnloadedImage: function(t) {
                    if(void 0 === t) return this._showUnloadedImage;
                    else {
                        this._showUnloadedImage = t;
                        return t
                    }
                },
                draw: function(t, e) {
                    var i = e || this._ctx,
                        r = t.type(),
                        a = v[r];
                    n(a, "no draw function for type `" + r + "'");
                    i.save();
                    var s = t.matrix();
                    i.transform(s.a, s.b, s.c, s.d, s.tx, s.ty);
                    var o = t.anchor();
                    if(0 != o.x || 0 != o.y) i.translate(-o.x, -o.y);
                    a(t, this, i);
                    i.restore()
                },
                clear: function() {
                    var t = this._ctx;
                    t.clearRect(0, 0, this._canvas.width, this._canvas.height)
                },
                drawGPrim: function(t, e, i) {
                    var n = t.type(),
                        r = v[n],
                        a = this._ctx;
                    a.save();
                    y(this, i);
                    a.transform(e.a, e.b, e.c, e.d, e.tx, e.ty);
                    var s = t.matrix();
                    a.transform(s.a, s.b, s.c, s.d, s.tx, s.ty);
                    r(t, this, a);
                    a.restore()
                },
                drawGPrims: function(t) {
                    var e = this;
                    l(t, function(t) {
                        e.drawGPrim(t.gprim(), t.matrix(), t.effect())
                    })
                },
                __doEffect: function(t, e) {
                    if(e) {
                        if(void 0 !== e.getAlpha()) t.globalAlpha *= e.getAlpha();
                        if(void 0 !== e.getCompositing()) t.globalCompositeOperation = e.getCompositing()
                    }
                },
                __intersectClip: function(t, e, i) {
                    if(e) {
                        var n = e.gprim();
                        if(null != n) {
                            g(e, this, i, t);
                            if(void 0 !== e.intersector()) this._t.__intersectClip(t, e.intersector(), i)
                        }
                    }
                },
                drawEffectedDisplayObject: function(t, e, i) {
                    var n = this._ctx,
                        r = t.worldMatrix(),
                        a = t.gprim(),
                        s = a.type(),
                        o = v[s];
                    n.save();
                    var l = t.viewMat;
                    if(e) this._t.__intersectClip(l, e, n);
                    n.setTransform(l.a, l.b, l.c, l.d, l.tx, l.ty);
                    n.transform(r.a, r.b, r.c, r.d, r.tx, r.ty);
                    var c = a.matrix();
                    n.transform(c.a, c.b, c.c, c.d, c.tx, c.ty);
                    var u = a.anchor();
                    if(0 != u.x || 0 != u.y) n.translate(-u.x, -u.y);
                    o(a, this, n);
                    n.restore()
                },
                drawDisplayObject: function(t) {
                    var e = this._ctx,
                        i = t.worldMatrix(),
                        n = t.gprim(),
                        r = n.type(),
                        a = v[r];
                    e.save();
                    e.transform(i.a, i.b, i.c, i.d, i.tx, i.ty);
                    var s = n.matrix();
                    e.transform(s.a, s.b, s.c, s.d, s.tx, s.ty);
                    var o = n.anchor();
                    if(0 != o.x || 0 != o.y) e.translate(-o.x, -o.y);
                    a(n, this, e);
                    e.restore()
                },
                eventObservables: function() {
                    if(!this._canvasEventObservables) this._canvasEventObservables = new r(this.sketchpad());
                    return this._canvasEventObservables
                },
                setWidth: function(t) {
                    this._canvas.width = t
                },
                setHeight: function(t) {
                    this._canvas.height = t
                },
                getSize: function() {
                    return {
                        width: this._canvas.width,
                        height: this._canvas.height
                    }
                }
            }),
            x = a.extend({}, [], [b]);
        x.register = function(t, e) {
            n(!v[t], t + " has already exist in draw functions table");
            v[t] = e.draw;
            return e
        };
        v = v;
        i({
            HonestPainter: x,
            hvDraw: v
        })
    };
    n["/lib/dirtymanager.js"] = function(t, e, i) {
        var n = t("./colortraits"),
            r = (t("./geometry"), t("./eventstream")),
            a = (n.Klass, n.Trait, n.compose),
            s = function(t) {
                t.enableDirtyRects()
            },
            o = function(t) {
                t.disableDirtyRects()
            },
            l = a([r], {
                __init: function(t) {
                    this.subTraits(0).__init();
                    this._t.setdirtyMgrFlag(null == t || void 0 == t.dirtyMgrFlag ? !1 : t.dirtyMgrFlag);
                    if(this._t.dirtyMgrFlag()) {
                        this._t.setminBoundingDirtyRect({});
                        this.createEventStream("system");
                        var e = this;
                        this.subscribe("system", function(t) {
                            if("addActor" == t.type) t.actor.forEach(s);
                            else if("removeActor" == t.type) t.actor.forEach(o);
                            e.calculateDirtyRect(t.actor.bbox())
                        })
                    } else this._t.setminBoundingDirtyRect(null)
                },
                calculateDirtyRect: function(t) {
                    var e = this._t.minBoundingDirtyRect();
                    if(void 0 == e.x) {
                        var i = Math.floor(t.x),
                            n = Math.floor(t.y),
                            r = Math.ceil(t.x + t.width),
                            a = Math.ceil(t.y + t.height);
                        e.x = i;
                        e.y = n;
                        e.width = r - i;
                        e.height = a - n
                    } else {
                        var i = Math.floor(Math.min(e.x, t.x)),
                            n = Math.floor(Math.min(e.y, t.y)),
                            r = Math.ceil(Math.max(e.x + e.width, t.x + t.width)),
                            a = Math.ceil(Math.max(e.y + e.height, t.y + t.height));
                        e.x = i;
                        e.y = n;
                        e.width = r - i;
                        e.height = a - n
                    }
                },
                minBoundingDirtyRect: function() {
                    return this._t.minBoundingDirtyRect()
                },
                clearminBoundingDirtyRect: function() {
                    var t = this._t.minBoundingDirtyRect();
                    t.x = void 0;
                    t.y = void 0;
                    t.width = void 0;
                    t.height = void 0
                },
                dirtyMgrFlag: function() {
                    return this._t.dirtyMgrFlag()
                }
            }, ["dirtyMgrFlag", "minBoundingDirtyRect"]);
        i({
            DirtyManagerTrait: l
        })
    };
    n["/treemonitor.js"] = function(t, e, i) {
        var n = t("./lib/colortraits").Klass,
            r = (t("./lib/colortraits").Trait, n.extend({
                initialize: function() {
                    this._t.settypelevel({});
                    this._t.setcallbacks({})
                },
                setTypeLevel: function(t, e) {
                    this._t.typelevel()[t] = e
                },
                getTypeLevel: function(t) {
                    return this._t.typelevel()[t]
                },
                typeLevels: function() {
                    return this._t.typelevel()
                },
                registerCallback: function(t, e) {
                    this._t.callbacks()[t] = e
                },
                notify: function(t) {
                    var e = 0,
                        i = this._t.typelevel();
                    for(var n in i) e += i[n];
                    var r = this._t.callbacks();
                    for(var n in r) {
                        if(!t[n]) {
                            r[n](t["member"]);
                            t[n] = !0
                        }
                        e -= i[n]
                    }
                    if(this._t.intersector() && 0 !== e) this._t.intersector().notify(t)
                },
                getHost: function() {
                    return this._t.host();
                },
                setHost: function(t) {
                    this._t.sethost(t)
                },
                setIntersector: function(t) {
                    this._t.setintersector(t)
                },
                getIntersector: function() {
                    return this._t.intersector()
                }
            }, ["host", "intersector", "typelevel", "callbacks"]));
        i({
            TreeMonitor: r
        })
    };
    n["/gprims/textgprim.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = t("../lib/helper"),
            a = t("./shaptrait").ShapTrait,
            s = t("../lib/geometry"),
            o = n.Klass,
            l = n.READONLY,
            c = n.CUSTOM_SETTER,
            u = {
                text: "Hello Colorbox!"
            },
            d = a.extend({
                __init: function(t) {
                    this.subTraits(0).__init(t);
                    if(void 0 == t) t = u;
                    this._t.settext(void 0 == t.text ? "" : "" + t.text);
                    this._t.settype("text");
                    this.setfont(void 0 == t.font ? {} : t.font)
                },
                setfont: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setfont(t);
                    this._t.font().style = void 0 == t.style ? "normal" : t.style;
                    this._t.font().weight = void 0 == t.weight ? 400 : t.weight;
                    this._t.font().size = void 0 == t.size ? 16 : t.size;
                    this._t.font().family = void 0 == t.family ? "Arial" : t.family;
                    this._t.setfontString(r.fontToString(this._t.font()))
                },
                fontString: function() {
                    return this._t.fontString()
                },
                settext: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.settext("" + t);
                    return this
                },
                localBbox: function() {
                    var t = this._t.text(),
                        e = this._t.font(),
                        i = e.size,
                        n = r.measureText(t, e).width;
                    return s.rectMake(0, 0, n, i)
                },
                localInside: function(t, e) {
                    var i = this._t.text(),
                        n = this._t.font(),
                        a = n.size,
                        s = r.measureText(i, n).width;
                    if(t > 0 && t < s && e > 0 && e < a) return !0;
                    else return !1
                },
                localHook: function(t) {
                    this.hookMany(this._t, ["strokeStyle", "strokeFlag", "strokeScaleInvariant", "fillFlag", "text", "font", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "anchorPoint"], t, "a")
                },
                unlocalHook: function(t) {
                    this.unhookMany(this._t, ["strokeStyle", "strokeFlag", "strokeScaleInvariant", "fillFlag", "text", "font", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "anchorPoint"], t, "a")
                }
            }, ["text", "font", "fontString"].concat(a.grantMany(["strokeStyle", "strokeFlag", "strokeScaleInvariant", "fillFlag", "cache", "type", "id", "tag", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "anchorPoint"]))),
            h = o.extend({
                initialize: function(t) {
                    this.execProto("initialize");
                    this.subTraits(0).__init(t)
                }
            }, [
                [l("type"), d.grant("type")],
                [c("text"), d.grant("text")],
                [c("font"), d.grant("font")],
                [c("strokeStyle"), d.grant("strokeStyle")],
                [c("fillStyle"), d.grant("fillStyle")],
                [c("shadowColor"), d.grant("shadowColor")]
            ].concat(d.grantMany(["strokeFlag", "strokeScaleInvariant", "fillFlag", "id", "tag", "shadowBlur", "shadowOffsetX", "shadowOffsetY"])), [d]);
        i({
            TextTrait: d,
            TextKlass: h
        })
    };
    n["/sprites/procedure.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = n.READONLY,
            a = (n.CUSTOM_SETTER, t("./sprite")),
            s = t("../gprims/proceduregprim").ProcedureTrait,
            o = a.extend({
                initialize: function(t) {
                    this.execProto("initialize", t);
                    this.subTraits(0).__init(t)
                }
            }, [
                [r("type"), s.grant("type")]
            ].concat(s.grantMany(["id", "tag"])), [s]);
        i(o)
    };
    n["/gprims/shaptrait.js"] = function(t, e, i) {
        var n = t("../lib/colortraits"),
            r = t("./gprim").GPrimTrait,
            a = t("../lib/helper"),
            s = t("../lib/bowser"),
            o = n.Trait,
            l = {},
            c = o.extend({
                __init: function(t) {
                    if(void 0 == t) t = l;
                    this.setstrokeStyle(t.strokeStyle);
                    this.setfillStyle(t.fillStyle);
                    this.setshadowColor(t.shadowColor);
                    this._t.setshadowBlur(void 0 == t.shadowBlur ? 0 : t.shadowBlur);
                    this._t.setshadowOffsetX(void 0 == t.shadowOffsetX ? 0 : t.shadowOffsetX);
                    this._t.setshadowOffsetY(void 0 == t.shadowOffsetY ? 0 : t.shadowOffsetY);
                    this._t.setlineCap(void 0 == t.lineCap ? "butt" : t.lineCap);
                    this._t.setlineJoin(void 0 == t.lineJoin ? "miter" : t.lineJoin);
                    this._t.setmiterLimit(void 0 == t.miterLimit ? 10 : t.miterLimit);
                    this._t.setlineWidth(void 0 == t.lineWidth ? 1 : t.lineWidth);
                    this._t.setlineDash(t.lineDash);
                    this._t.setfillFlag(void 0 == t.fillFlag ? !1 : t.fillFlag);
                    this._t.setstrokeFlag(void 0 == t.strokeFlag ? !1 : t.strokeFlag);
                    this._t.setalpha(void 0 == t.alpha ? 1 : t.alpha);
                    this._t.setstrokeScaleInvariant(void 0 == t.strokeScaleInvariant ? !1 : t.strokeScaleInvariant)
                },
                applyStyle: function(t) {
                    if(1 != this._t.lineWidth()) t.lineWidth = this._t.lineWidth();
                    if("butt" != this._t.lineCap()) t.lineCap = this._t.lineCap();
                    if("miter" != this._t.lineJoin()) t.lineJoin = this._t.lineJoin();
                    if(10 != this._t.miterLimit()) t.miterLimit = this._t.miterLimit();
                    if(void 0 != this._t.strokeStyle()) t.strokeStyle = this._t._strokeString();
                    if(void 0 != this._t.fillStyle()) t.fillStyle = this._t._fillString();
                    if(void 0 != this._t.shadowColor()) t.shadowColor = this._t._shadowString();
                    if(0 != this._t.shadowBlur()) t.shadowBlur = this._t.shadowBlur();
                    if(0 != this._t.shadowOffsetX()) t.shadowOffsetX = this._t.shadowOffsetX();
                    if(0 != this._t.shadowOffsetY()) t.shadowOffsetY = this._t.shadowOffsetY();
                    if(s.msie && s.version <= 10) return this;
                    if(void 0 != this._t.lineDash()) t.setLineDash(this._t.lineDash());
                    if(1 != this._t.alpha()) {
                        this.__globalAlpha = t.globalAlpha;
                        t.globalAlpha *= this._t.alpha()
                    }
                    return this
                },
                setfillStyle: function(t) {
                    if(t) {
                        if(t.addColorStop) this._t.set_fillString(t);
                        else {
                            if(void 0 != t.h && void 0 != t.s && void 0 != t.b) t = a.hsb2rgb(t);
                            this._t.set_fillString(a.colorToString(t))
                        }
                        this._t.setfillStyle(t)
                    }
                },
                setstrokeStyle: function(t) {
                    if(t)
                        if(t.addColorStop) this._t.set_strokeString(t);
                        else {
                            if(void 0 != t.h && void 0 != t.s && void 0 != t.b) t = a.hsb2rgb(t);
                            this._t.set_strokeString(a.colorToString(t))
                        }
                    this._t.setstrokeStyle(t)
                },
                setshadowColor: function(t) {
                    if(t) {
                        this._t.set_shadowString(a.colorToString(t));
                        this._t.setshadowColor(t)
                    }
                },
                setalpha: function(t) {
                    this._t.setalpha(t)
                },
                alpha: function() {
                    return this._t.alpha()
                }
            }, ["alpha", "_shadowString", "_strokeString", "_fillString", "fillFlag", "strokeFlag", "strokeScaleInvariant", "strokeStyle", "fillStyle", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "lineCap", "lineJoin", "miterLimit", "lineWidth", "lineDash"]),
            u = n.compose([r, c], {
                __init: function(t) {
                    this.subTraits(0).__init(t);
                    this.subTraits(1).__init(t)
                },
                setlineWidth: function(t) {
                    this._t.cache().bbox = void 0;
                    this._t.setlineWidth(t);
                    return this
                },
                getRealLineWidth: function() {
                    if(null == this.strokeStyle()) return 0;
                    if(this._t.strokeScaleInvariant()) {
                        var t = this.scale(),
                            e = this._t.lineWidth();
                        if(t.sx == t.sy && 0 != t.sx) return e / t.sx
                    }
                    return this._t.lineWidth()
                },
                applyInvariantLineWidth: function(t) {
                    if(this._t.strokeScaleInvariant()) {
                        var e = this.scale(),
                            i = this._t.lineWidth();
                        if(e.sx == e.sy && 0 != e.sx) t.lineWidth = i / e.sx
                    } else t.lineWidth = this._t.lineWidth()
                }
            }, r.grantAll().concat(c.grantAll()));
        i({
            ShapTrait: u
        })
    };
    ! function() {
        function t(t) {
            var e = t.split("/");
            e.pop();
            return e.join("/")
        }

        function e() {
            return s(Array.prototype.join.call(arguments, "/"))
        }

        function a(t, e) {
            for(var i, n = [], r = 0, a = t.length - 1; r <= a; r++) {
                var s = t[r];
                if("" !== s || 0 === r || r === a || e)
                    if("." !== s || void 0 === i)
                        if(1 !== n.length || "" !== n[0] || "." !== s && ".." !== s)
                            if(".." === s && n.length && ".." !== i && "." !== i && void 0 !== i && ("" !== i || e)) {
                                n.pop();
                                i = n.slice(-1)[0]
                            } else {
                                if("." === i) n.pop();
                                n.push(s);
                                i = s
                            }
                        else;
                    else;
                else;
            }
            return n
        }

        function s(t, e) {
            return a(t.split("/"), e).join("/")
        }

        function o(t) {
            return n[t]
        }

        function l(i, n) {
            var r = i + ".js";
            if(void 0 !== o(r)) return r;
            var a = t(n);
            r = e(a, r);
            return r
        }

        function c(t, e) {
            var i = l(t, p);
            if(null != h[i]) return h[i];
            var n = o(i);
            if(null == n) throw "Unable to find module: " + i;
            var r = f,
                a = p;
            p = i;
            n.apply(e, [c, u, d]);
            h[i] = f;
            var s = f;
            f = r;
            p = a;
            return s
        }

        function u(t, e) {
            return c(t, e)
        }

        function d(t) {
            f = t
        }
        var h = {},
            f = {},
            p = "/";
        for(var _ in r) h[_] = r[_];
        i = c("./colorbox-simple")
    }();
    return i
}, 571, 650);
I$(567, function() {
    var t = !0,
        e = function(e, i) {
            if(t)
                if(e) return !0;
                else {
                    var n = void 0 === i ? "assert!" : i;
                    throw n
                }
        };
    return e
});
I$(651, function() {
    var t = function(t, e) {
        if(!arguments.length) return null;
        else return {
            x: t,
            y: e
        }
    };
    return t
});
I$(652, function(t) {
    t.isString = function(t) {
        return "string" == typeof t
    };
    t.isFunction = function(t) {
        return "[object Function]" === Object.prototype.toString.call(t)
    };
    t.isObject = function(t) {
        return "[object Object]" === Object.prototype.toString.call(t)
    };
    t.isNumber = function(t) {
        return "number" == typeof t
    };
    t.isArray = function(t) {
        return "[object Array]" === Object.prototype.toString.call(t)
    };
    t.isBoolean = function(t) {
        return "boolean" == typeof t
    };
    t.unique = function(t) {
        var e = new Array;
        for(var i in t)
            if(e.indexOf(t[i]) == -1) e.push(t[i]);
        return e
    };
    t.fixPosBlurry = function(t, e) {
        var i = Math.floor(e + .249),
            n = Math.floor(t + .249);
        if(i % 2) n += .5;
        return n
    };
    return t
});
I$(653, function() {
    var t = function(t, e) {
        if(!arguments.length) return null;
        else if(1 == arguments.length) return {
            left: 0,
            right: t,
            top: 0,
            bottom: t,
            width: t,
            height: t
        };
        else return {
                left: 0,
                right: t,
                top: 0,
                bottom: e,
                width: t,
                height: e
            }
    };
    return t
});
I$(736, function(t, e, i) {
    var n = t.PRIVATE,
        r = t.Klass.extend({
            domain: function(t) {
                e(i.isArray(t), "domain : parameter types error")
            },
            range: function(t) {
                e(i.isArray(t), "range : parameter types error")
            },
            scaleRange: function() {
                return this.rangeExtent ? this.rangeExtent() : this.scaleExtent(this.range())
            },
            scaleExtent: function(t) {
                var e = t[0],
                    i = t[t.length - 1];
                return e < i ? [e, i] : [i, e]
            },
            ticksCount: function(t) {
                e(i.isNumber(t), "count : parameter types error")
            },
            id: function(t) {
                if(null == t) return this._t._scaleId();
                this._t.set_scaleId(t);
                return this
            },
            tickDensity: function(t) {
                if(null == d) return this._t._tickDensity();
                this._t.set_tickDensity(d);
                return this
            },
            type: function(t) {
                if(null == t) return this._type();
                else this.set_type(t)
            }
        }, ["_type", "reverse", n("_scaleId"), n("_tickDensity")]);
    return r
}, 571, 567, 652);
I$(675, function(t) {
    function e() {
        if(r) return r;
        var t = document.createElement("div");
        t.style.cssText = "overflow:scroll;width:100px;height:100px;";
        document.body.appendChild(t);
        if(t) r = {
            horizontal: t.offsetHeight - t.clientHeight,
            vertical: t.offsetWidth - t.clientWidth
        };
        document.body.removeChild(t);
        return r
    }
    var i = {};
    i.state = {
        normal: "normal",
        hover: "hover",
        focus: "focus",
        gray: "gray",
        drag: "drag"
    };
    i.shapePadding = 10;
    i.statePriority = {
        normal: 1,
        hover: 2,
        focus: 3,
        gray: 0,
        drag: 4
    };
    i.markMap = ["line", "bar", "area", "scatter", "pie", "text", "path"];
    var n = {};
    i.markMap.map(function(t) {
        n[t] = !0
    });
    n.gradientLine = !0;
    i.innerMarkMap = n;
    i.markExactChooseStartIdx = 3;
    i.xContinuousDensityRatio = .2;
    i.yContinuousDensityRatio = .2;
    i.sizeOffsetRatio = 1;
    i.radiusOffsetRatio = 1;
    i.baseRadius = 1;
    i.lineBaseRadius = 1;
    i.isolatedPointRadius = 2;
    i.areaBaseRadius = .5;
    i.scatterBaseSize = 4;
    i.pieBaseRadius = 1;
    i.textBaseSize = 4;
    i.textBaseRatio = .5;
    i.interactiveRadius = 4;
    i.zoneOpacity = .7;
    i.radiusScale = {
        normalScale: function(t) {
            if(this.oriScale) return this.oriScale;
            else return this.scale()
        },
        hoverScale: function(t) {
            var e = function(e) {
                var i = this.dynamicProperty("data").__layoutBBox.width;
                if(null == this.oriScale) this.oriScale = this.scale();
                var n = t;
                if(i <= 6) n = 12 / i;
                return {
                    sx: this.oriScale.sx * n,
                    sy: this.oriScale.sy * n
                }
            };
            return e
        },
        focusScale: function(t) {
            var e = function(e) {
                if(null == this.oriScale) this.oriScale = this.scale();
                var i = t,
                    n = this.dynamicProperty("data").__layoutBBox.width;
                if(n <= 6) i = 12 / n;
                return {
                    sx: this.oriScale.sx * i,
                    sy: this.oriScale.sy * i
                }
            };
            return e
        },
        grayScale: function(t) {
            if(null == this.oriScale) this.oriScale = this.scale();
            return this.oriScale
        }
    };
    i.greyCapacity = .3;
    i.discreteTickMinStep = 25;
    i.xDiscreteTickMaxStep = 60;
    i.yDiscreteTickMaxStep = 30;
    i.continuousCellDimMinSize = 150;
    i.doubleDiscreteDefaultSizeFieldName = "__NEV_DoubleDiscreteName";
    i.continuousBarSize = 10;
    i.escapeStringForNull = "__NEV_Null";
    i.AxisPositionHash = {
        1: {
            0: "left",
            1: "right"
        },
        0: {
            0: "bottom",
            1: "top"
        }
    };
    i.barDirection = {
        constant: {
            constant: "horiz",
            continuous: "vert",
            discrete: "horiz"
        },
        continuous: {
            constant: "horiz",
            continuous: "vert",
            discrete: "horiz"
        },
        discrete: {
            constant: "vert",
            continuous: "vert",
            discrete: "horiz"
        }
    };
    i.nonAxisPadding = {
        left: 10,
        right: 10,
        top: 0,
        bottom: 0
    };
    var r = null;
    i.ScrollSize = e();
    i.SPRITEINDEX = "__spriteIndex";
    i.mapProjection = {
        mercator: !0
    };
    i.LONGITUDE = "longitude";
    i.LATITUDE = "latitude";
    i.textTableCanvasMargin = 2;
    i.axisSliderOffset = 20;
    return i
});
I$(661, function(t, e, i, n, r, a) {
    var s = e.PRIVATE,
        o = (n.isArray, n.isObject, t.extend({
            initialize: function() {
                this._t.set_domain([0, 1]);
                this._t.set_domainMap({});
                this._t.set_range([0, 1]);
                this._t.set_rangeBand(0);
                this._t.set_ranger({
                    t: "range",
                    a: []
                });
                this._t.set_tickCount(null);
                this.set_type("discrete");
                this._t.set_step(null)
            },
            exec: function(t) {
                var e = this._t._domainMap(),
                    i = (this._t._domain(), this._t._range()),
                    n = NaN;
                if(null === t) t = r.escapeStringForNull;
                if("string" == typeof t) n = ((e[t] ? e[t] : NaN) - 1) % i.length;
                if(isNaN(n) || void 0 === i[n]) return NaN;
                else return i[n]
            },
            domain: function(t) {
                if(!t) return this._t._domain();
                if(this.reverse()) {
                    for(var e = [], i = t.length - 1; i > -1; i--) e.push(t[i]);
                    t = e
                }
                var n = {},
                    r = 1;
                for(var a in t) n[t[a]] = r++;
                this._t.set_domainMap(n);
                this._t.set_domain(t);
                return this
            },
            range: function(t) {
                if(!t) return this._t._range();
                this.execProto("range", t);
                this._t.set_range(t);
                if(null == this._t._step()) {
                    var e = Math.abs(t[0] - t[1]),
                        i = this.domain().length;
                    this._t.set_step(e / i)
                }
                return this
            },
            rangePoints: function(t, e) {},
            rangeBands: function(t, e, i, n) {
                if(!e && 0 != e) e = 0;
                if(!i && 0 != i) i = e;
                if(!n && 0 != n) n = e;
                var r = this._t._domain().length,
                    a = t[1] < t[0],
                    s = t[a - 0],
                    o = t[1 - a],
                    l = (o - s) / (r + e + i + n);
                s = (a ? n : i) * l + s + l / 2;
                var c = this._t.__steps(s, l);
                this.range(a ? c.reverse() : c);
                this.setouterPadding2(n);
                this.setouterPadding1(i);
                this._t.set_rangeBand(l * (1 - e));
                this._t.set_step(l);
                this._t.set_ranger({
                    t: "rangeBands",
                    a: arguments
                });
                return this
            },
            rangeRoundBands: function(t, e, i) {},
            rangeBand: function() {},
            step: function() {
                return this._t._step()
            },
            rangeExtent: function() {
                var t = this._t._ranger();
                return this.execProto("scaleExtent", t.a[0])
            },
            __steps: function(t, e) {
                for(var i = this._t, n = [], r = i._domain().length, a = 0; a < r; a++) n.push(t + e * a);
                return n
            },
            ticks: function() {
                var t = this._t.__policyRealDomain(this._t._tickCount()),
                    e = t.map(function(t) {
                        return a.unescapeNull(t)
                    });
                this._t.set_realDomain(e);
                return e
            },
            __policyRealDomain: function(t) {
                var e = this._t._domain(),
                    i = 0;
                if(t && t < e.length) i = Math.ceil(e.length / t);
                if(null == t) return e;
                else if(0 == t) return [];
                else if(i > 0) {
                    for(var n = [], r = parseInt(i / 2); r < e.length;) {
                        n.push(e[r]);
                        r += i
                    }
                    return n
                }
                return e
            },
            ticksCount: function(t) {
                if(null == t) return this._t._tickCount();
                this.execProto("ticksCount", t);
                this._t.set_tickCount(t);
                return this
            }
        }, [s("_domain"), s("_range"), s("_idMap"), s("_realDomain"), s("_ranger"), s("_rangeBand"), s("_domainMap"), s("_tickCount"), s("_step"), "outerPadding1", "outerPadding2", "field"]));
    return o
}, 736, 571, 567, 652, 675, 654);
I$(699, function(t, e) {
    var i = e.PRIVATE,
        n = t.extend({
            initialize: function() {
                this._t.setrangeValue([0, 0]);
                this.set_type("constant")
            },
            exec: function() {
                var t = this._t.rangeValue();
                return Math.abs(t[0] + t[1]) / 2
            },
            range: function(t) {
                if(t) this._t.setrangeValue(t);
                else return this._t.rangeValue()
            },
            step: function() {
                var t = this._t.rangeValue();
                return Math.abs(t[0] - t[1])
            },
            domain: function() {
                return ["undefined"]
            },
            ticksCount: function() {
                return 1
            }
        }, [i("rangeValue")]);
    return n
}, 736, 571);
I$(662, function(t, e, i) {
    var n = e.PRIVATE,
        r = t.extend({
            initialize: function() {
                this._t.set_domain([0, 1]);
                this._t.set_range([0, 1]);
                this._t.set_realDomain([0, 1]);
                this._t.set_tickCount(11);
                this._t.set_domainMode("niceNumber");
                this._t.set_isInteger(!1);
                this._t.set_field(null);
                this._t.set_minStep(!1);
                this.set_type("continuous")
            },
            exec: function(t, e) {
                var i = this._t._realDomain(),
                    n = this._t._range(),
                    r = i[0],
                    a = i[1],
                    s = n[0],
                    o = n[1];
                if(e) return r + (t - s) / (o - s) * (a - r);
                else return s + (t - r) / (a - r) * (o - s)
            },
            realDomain: function() {
                return this._t._realDomain()
            },
            domainMode: function(t) {
                if(!t) return this._t._domainMode();
                this._t.set_domainMode(t);
                return this
            },
            ticks: function() {
                var t = this._t.__newExtractMinMax(this._t._tickCount());
                this._t.set_realDomain([t.min, t.max]);
                var e = this._t.__rangeValues(t.min, t.max, t.step);
                return e
            },
            ticksCount: function(t) {
                if(null == t) return this._t._tickCount();
                this.execProto("ticksCount", t);
                this._t.set_tickCount(t);
                this.ticks();
                return this
            },
            domain: function(t) {
                if(!t) return this._t._domain();
                this.execProto("domain", t);
                var e = [];
                if(t.length > 2) {
                    e[0] = Math.min.apply(null, t);
                    e[1] = Math.max.apply(null, t)
                } else e = t;
                this._t.set_domain(e);
                this._t.set_realDomain(e);
                this.ticks();
                return this
            },
            id: function(t) {
                if(null == t) return this._t._scaleId();
                this._t.set_scaleId(t);
                return this
            },
            intSign: function(t) {
                if(null == t) return this._t._isInteger();
                this._t.set_isInteger(t);
                return this
            },
            mapfunction: function(t) {
                if(null == t) return this._t.__mapfuntion();
                else {
                    this._t.set__mapfunction(t);
                    return this
                }
            },
            minStep: function(t) {
                if(t) this._t.set_minStep(t);
                return this
            },
            range: function(t) {
                if(!t) return this._t._range();
                this.execProto("range", t);
                this._t.set_range(t);
                this.ticks();
                return this
            },
            rangeRound: function(t) {},
            __newExtractMinMax: function(t) {
                var e = this._t._domain(),
                    i = this._t._domainMode(),
                    n = e[1] >= e[0] ? 1 : -1,
                    r = n > 0 ? e[0] : e[1],
                    a = n > 0 ? e[1] : e[0],
                    s = this._t._isInteger(),
                    o = this._t._minStep();
                if(e[0] == e[1])
                    if(0 == e[0]) {
                        r = 0;
                        a = 1
                    } else if(e[0] > 0) {
                        a = i * r;
                        r = 0
                    } else {
                        r = i * r;
                        a = 0
                    }
                if(t > 0) {
                    var l = a - r,
                        c = Math.pow(10, Math.floor(Math.log(l / t) / Math.LN10));
                    if(c < o) c = o;
                    for(var u, d = [1, 1.25, 1.5, 1.75, 2, 2.5, 3, 3.5, 4, 5, 6, 8, 10], h = this._t.__getTickNumByStep(r, a, c, d), f = -1, p = 0; p < h.length; p++)
                        if(f < 0) {
                            u = p;
                            f = Math.abs(h[p] - t)
                        } else if(f > Math.abs(h[p] - t)) {
                            u = p;
                            f = Math.abs(h[p] - t)
                        }
                    c = this._t.__floatMulti(c, d[u]);
                    if(s)
                        if(Math.abs(c - 2.5) < 1e-4 && Math.abs(c - 1.5) < 1e-4) c = 2;
                        else if(c < 1) c = 1;
                        else if(Math.abs(c - 7.5) < 1e-4) c = 8;
                    if("niceNumber" == i) {
                        r = this._t.__floatMulti(Math.floor(r / c), c);
                        a = this._t.__floatAdd(this._t.__floatMulti(Math.ceil(a / c), c), this._t.__floatMulti(c, .5))
                    }
                } else c = 1 / 0;
                nmin = n > 0 ? r : a;
                nmax = n > 0 ? a : r;
                c *= n;
                return {
                    min: nmin,
                    max: nmax,
                    step: c,
                    tickCount: Math.floor((a - r) / c)
                }
            },
            __getTickNumByStep: function(t, e, i, n) {
                for(var r, a, s, o = [], l = 0; l < n.length; l++) {
                    s = i * n[l];
                    a = Math.floor(t / s) * s;
                    r = Math.ceil(e / s) * s;
                    o.push(Math.ceil((r - a) / s))
                }
                return o
            },
            __integer: function(t) {
                for(var e = 1; t * e % 1;) e *= 10;
                return e
            },
            __rangeValues: function(t, e, n) {
                if(!n && 0 != n) n = 1;
                if(!e && 0 != e) e = t, t = 0;
                i((e - t) / n !== 1 / 0, "__rangeValues : infinite range");
                var r, a = this._t._domainMode(),
                    s = this._t.__integer(Math.abs(n)),
                    o = [],
                    l = -1;
                t = this._t.__floatMulti(t, s);
                e = this._t.__floatMulti(e, s);
                n = this._t.__floatMulti(n, s);
                if(this.ticksCount() > 1) {
                    if(n < 0)
                        for(;
                            (r = t + n * ++l) > e;) o.push(this._t.__floatDiv(r, s));
                    else
                        for(;
                            (r = t + n * ++l) < e;) o.push(this._t.__floatDiv(r, s));
                    if("fitNumber" == a) o.push(this._t.__floatDiv(e, s))
                } else if(1 == this.ticksCount()) o = [(t + e) / 2];
                else o = [];
                return o
            },
            field: function(t) {
                if(null == t) return this._t._field();
                this._t.set_field(t)
            },
            __floatMulti: function(t, e) {
                var i = t.toString(),
                    n = e.toString(),
                    r = void 0 === i.split(".")[1] ? 0 : i.split(".")[1].length;
                r += void 0 === n.split(".")[1] ? 0 : n.split(".")[1].length;
                return Number(i.replace(".", "")) * Number(n.replace(".", "")) / Math.pow(10, r)
            },
            __floatDiv: function(t, e) {
                var i, n, r = 0,
                    a = 0,
                    s = t.toString(),
                    o = e.toString();
                r = void 0 === s.split(".")[1] ? 0 : s.split(".")[1].length;
                a = void 0 === o.split(".")[1] ? 0 : o.split(".")[1].length;
                i = Number(s.replace(".", ""));
                n = Number(o.replace(".", ""));
                return i / n * Math.pow(10, a - r)
            },
            __floatAdd: function(t, e) {
                var i, n, r, a = t.toString(),
                    s = e.toString();
                i = void 0 === a.split(".")[1] ? 0 : a.split(".")[1].length;
                n = void 0 === s.split(".")[1] ? 0 : s.split(".")[1].length;
                r = Math.pow(10, Math.max(i, n));
                return(t * r + e * r) / r
            },
            __floatSub: function(t, e) {
                return this._t.__floatAdd(t, -e)
            },
            calcScales: function(t, e) {
                for(var i = [], n = [], r = 0; r < e.length; r++) {
                    this._t.set_domain(e[r]);
                    var a = this._t.__newExtractMinMax(t + 1);
                    i.push(a);
                    n.push(a.tickCount)
                }
                var s = {};
                n.forEach(function(t) {
                    if(void 0 == s[t]) s[t] = 1;
                    else s[t]++
                });
                var o = 0,
                    l = 0;
                for(var r in s)
                    if(s[r] > l || s[r] == l && r == t) {
                        o = r;
                        l = s[r]
                    }
                i = this._t.__adjustScales(o, i, e);
                for(var r = 0; r < i.length; r++) {
                    for(var c = i[r].min, u = i[r].step, d = i[r].tickCount, t = [], h = 1; h <= d; h++) {
                        var f = c + this._t.__floatMulti(u, h);
                        t.push(f)
                    }
                    i[r].ticks = t;
                    i[r].max = t[d - 1]
                }
                return i
            },
            __adjustScales: function(t, e, i) {
                for(var n = 0; n < e.length; n++)
                    if(e[n].tickCount != t) {
                        for(var r = i[n][1], a = r / t, s = 1; a > 100;) {
                            a /= 10;
                            s *= 10
                        }
                        for(; a < 1;) {
                            a *= 10;
                            s /= 10
                        }
                        a = Math.ceil(a);
                        e[n].step = this._t.__floatMulti(this._t.__adjustStep(a), s);
                        e[n].tickCount = Number(t)
                    }
                return e
            },
            __adjustStep: function(t) {
                var e;
                if(t <= 1) e = 1;
                else if(t <= 2) e = 2;
                else if(t <= 4) e = 4;
                else if(t <= 5) e = 5;
                else if(t <= 6) e = 6;
                else if(t <= 8) e = 8;
                else if(t <= 10) e = 10;
                else if(t <= 15) e = 15;
                else if(t <= 20) e = 20;
                else if(t <= 25) e = 25;
                else if(t <= 30) e = 30;
                else if(t <= 40) e = 40;
                else if(t <= 50) e = 50;
                else if(t <= 60) e = 60;
                else if(t <= 80) e = 80;
                else e = 100;
                return e
            }
        }, [n("_domain"), n("__mapfunction"), n("_isInteger"), n("_scaleId"), n("_range"), n("_domainMode"), n("_tickCount"), n("_realDomain"), n("_field"), n("_minStep")]);
    return r
}, 736, 571, 567);
I$(697, function(t, e, i, n, r) {
    var a = e.PRIVATE,
        s = function(t, e, i) {
            return {
                r: t,
                g: e,
                b: i,
                a: .3
            }
        },
        o = [s(13, 161, 237), s(255, 161, 53), s(56, 204, 72), s(245, 86, 70), s(177, 103, 255), s(255, 217, 45), s(57, 227, 221), s(250, 138, 109), s(113, 147, 255), s(255, 104, 207), s(173, 194, 187), s(157, 238, 60), s(95, 74, 246), s(234, 201, 118), s(102, 204, 255), s(252, 174, 85), s(79, 224, 95), s(255, 140, 128), s(163, 85, 245), s(209, 221, 67), s(55, 216, 210), s(247, 121, 89), s(104, 135, 235), s(240, 77, 189), s(47, 167, 127), s(159, 206, 52), s(161, 40, 190), s(82, 206, 182), s(95, 78, 217), s(244, 190, 55)],
        l = t.extend({
            initialize: function() {
                this._t.set_domain([0, 1]);
                this._t.set_range(o);
                this._t.set_field(null);
                this.set_type("discrete")
            },
            domain: function(t) {
                if(null == t) {
                    var e = this._t._domain(),
                        i = e.map(function(t) {
                            return n.unescapeNull(t)
                        });
                    return i
                }
                this._t.set_domain(t);
                return this
            },
            range: function(t) {
                if(null == t) return this._t._range();
                this._t.set_range(t);
                this._t.set_keyValueMap(null);
                return this
            },
            exec: function(t) {
                var e = this._t._keyValueMap();
                if(!e) {
                    if(null == this._t._domain()) throw "please set valid domains in scale";
                    if(null == this._t._range()) {
                        var i = this._t._domain(),
                            a = this._t.__getColorRange(i);
                        this._t.set_range(a)
                    }
                    var s = {},
                        i = this._t._domain(),
                        a = this._t._range(),
                        o = a.length;
                    i.map(function(t, e) {
                        s[t] = a[e % o]
                    });
                    this._t.set_keyValueMap(s);
                    e = s
                }
                var l = n.escapeNull(t);
                if(l == r.escapeStringForNull && !e[l]) l = "null";
                if(null == e[l]) {
                    if(void 0 == this.__addValNum) this.__addValNum = 0;
                    var c = this._t._range();
                    e[l] = c[(this._t._domain().length + ++this.__addValNum) % c.length]
                }
                return e[l]
            },
            __getColorRange: function(t) {
                var e = o.length,
                    i = t.map(function(t, i) {
                        return o[i % e]
                    });
                return i
            },
            field: function(t) {
                if(null == t) return this._t._field();
                this._t.set_field(t)
            },
            _setmap: function(t) {
                this._t.set_keyValueMap(t)
            },
            _map: function() {
                return this._t._keyValueMap()
            }
        }, [a("_domain"), a("_range"), "escapedDomain", a("_keyValueMap"), a("_field")]);
    return l
}, 736, 571, 567, 654, 675);
I$(703, function(t) {
    t.isString = function(t) {
        return "string" == typeof t
    };
    t.isFunction = function(t) {
        return "[object Function]" === Object.prototype.toString.call(t)
    };
    t.isObject = function(t) {
        return "[object Object]" === Object.prototype.toString.call(t)
    };
    t.isNumber = function(t) {
        return "number" == typeof t
    };
    t.isArray = function(t) {
        return "[object Array]" === Object.prototype.toString.call(t)
    };
    t.isBoolean = function(t) {
        return "boolean" == typeof t
    };
    t.unique = function(t) {
        var e = new Array;
        for(var i in t)
            if(e.indexOf(t[i]) == -1) e.push(t[i]);
        return e
    };
    t.fixPosBlurry = function(t, e) {
        var i = Math.floor(e + .249),
            n = Math.floor(t + .249);
        if(i % 2) n += .5;
        return n
    };
    t.rectOverlap = function(t, e, i, n, r, a, s, o) {
        if(r >= t + i || r + s <= t || a >= e + n || a + o <= e) return !1;
        else return !0
    };
    t.rectMerge = function(t, e, i, n, r, a, s, o) {
        var l = t < r ? t : r,
            c = e < a ? e : a,
            u = t + i > r + s ? t + i : r + s,
            d = e + n > a + o ? e + n : a + o;
        return {
            x: l,
            y: c,
            width: u - l,
            height: d - c
        }
    };
    t.actorSetProperty = function(t, e, i) {
        for(var n in e) {
            var r = "function" == typeof e[n] ? e[n].call(t, t.dynamicProperty("data"), 0) : e[n];
            t["set" + n] ? t["set" + n](r) : null
        }
        return t
    };
    t.bInArray = function(t, e) {
        for(var i = 0; i < t.length; i++)
            if(e == t[i]) return i;
        return -1
    };
    t.RGB2HSV = function(t) {
        var e, i, n, r = t.r,
            a = t.g,
            s = t.b,
            o = Math.min(Math.min(r, a), s),
            l = Math.max(Math.max(r, a), s);
        n = l / 255;
        i = 0 == l ? 0 : 1 - o / l;
        if(l == o) e = 0;
        else if(l == r && a >= s) e = 60 * (a - s) / (l - o);
        else if(l == r && a < s) e = 60 * (a - s) / (l - o) + 360;
        else if(l == a) e = 60 * (s - r) / (l - o) + 120;
        else if(l == s) e = 60 * (r - a) / (l - o) + 240;
        return {
            h: e,
            s: i,
            v: n
        }
    };
    t.HSV2RGB = function(t) {
        var e, i, n, r = t.h,
            a = t.s,
            s = t.v,
            o = Math.floor(r / 60) % 6,
            l = r / 60 - o,
            c = s * (1 - a),
            u = s * (1 - l * a),
            d = s * (1 - (1 - l) * a);
        switch(o) {
            case 0:
                e = s;
                i = d;
                n = c;
                break;
            case 1:
                e = u;
                i = s;
                n = c;
                break;
            case 2:
                e = c;
                i = s;
                n = d;
                break;
            case 3:
                e = c;
                i = u;
                n = s;
                break;
            case 4:
                e = d;
                i = c;
                n = s;
                break;
            case 5:
                e = s;
                i = c;
                n = u
        }
        return {
            r: Math.round(255 * e),
            g: Math.round(255 * i),
            b: Math.round(255 * n)
        }
    };
    return t
});
I$(696, function(t, e, i, n) {
    var r = e.PRIVATE,
        a = 0,
        s = function(t, e, i) {
            return {
                r: t,
                g: e,
                b: i
            }
        },
        o = [s(255, 0, 0), s(255, 125, 0), s(0, 255, 0), s(255, 0, 255), s(255, 0, 125), s(0, 255, 255)],
        l = t.extend({
            initialize: function() {
                this._t.set_domain([0, 1]);
                this._t.set_range([0, 1]);
                this.set_type("continuous");
                this._t.set_single(!0);
                this._t.set_field(null);
                this._t.set_color(o[a++ % o.length])
            },
            domain: function(t) {
                if(null == t) return this._t._domain();
                this.execProto("domain", t);
                var e = [];
                if(t.length > 2) {
                    e[0] = Math.min.apply(null, t);
                    e[1] = Math.max.apply(null, t)
                } else e = t;
                this._t.set_domain(e);
                return this
            },
            range: function(t) {
                if(null == t)
                    if(this._t._single()) return this._t._color();
                    else return this._t._range();
                if("[object Array]" == Object.prototype.toString.call(t))
                    if(t.length >= 2) {
                        this._t.set_range(t);
                        this._t.set_single(!1)
                    } else this._t.set_color(t[0]);
                else this._t.set_color(t);
                return this
            },
            exec: function(t) {
                var e = this._t._single();
                if(e) return this.convert(t);
                else return this.interpolationGra(t)
            },
            interpolationGra: function(t) {
                var e, i, n, r, a, s = this._t._domain(),
                    o = s[0] < s[1],
                    l = this._t._range(),
                    e = l[0],
                    i = l[1];
                n = (i.r - e.r) / 100;
                r = (i.g - e.g) / 100;
                a = (i.b - e.b) / 100;
                if(o) {
                    if(t <= s[0]) return e;
                    if(t >= s[1]) return i
                } else {
                    if(t >= s[0]) return e;
                    if(t <= s[1]) return i
                }
                var c = 100 * (t - s[0]) / (s[1] - s[0]),
                    u = Math.floor(e.r + n * c),
                    d = Math.floor(e.g + r * c),
                    h = Math.floor(e.b + a * c);
                return {
                    r: u,
                    g: d,
                    b: h
                }
            },
            convert: function(t) {
                var e = this._t._domain(),
                    i = this._t._color(),
                    r = Math.min(e[0], e[1]),
                    a = Math.max(e[0], e[1]);
                if(e[0] == e[1]) {
                    r = 0;
                    a = 1
                }
                if(t < r) t = r;
                if(t > a) t = a;
                var s, o, l, c = a - r,
                    u = n.RGB2HSV(i);
                s = u.h;
                o = (t - r) / c * (.82 - .15) + .15;
                l = .97 - (t - r) / c * (.97 - .65);
                return n.HSV2RGB({
                    h: s,
                    s: o,
                    v: l
                })
            },
            field: function(t) {
                if(null == t) return this._t._field();
                this._t.set_field(t)
            }
        }, [r("_domain"), r("_range"), r("_color"), r("_field"), r("_single")]);
    return l
}, 736, 571, 567, 703);
I$(656, function() {
    (function() {
        function t(t) {
            function e(e, i, n, r, a, s) {
                for(; a >= 0 && a < s; a += t) {
                    var o = r ? r[a] : a;
                    n = i(n, e[o], o, e)
                }
                return n
            }
            return function(i, n, r, a) {
                n = y(n, a, 4);
                var s = !C(i) && v.keys(i),
                    o = (s || i).length,
                    l = t > 0 ? 0 : o - 1;
                if(arguments.length < 3) {
                    r = i[s ? s[l] : l];
                    l += t
                }
                return e(i, n, r, s, l, o)
            }
        }

        function e(t) {
            return function(e, i, n) {
                i = b(i, n);
                for(var r = S(e), a = t > 0 ? 0 : r - 1; a >= 0 && a < r; a += t)
                    if(i(e[a], a, e)) return a;
                return -1
            }
        }

        function i(t, e, i) {
            return function(n, r, a) {
                var s = 0,
                    o = S(n);
                if("number" == typeof a)
                    if(t > 0) s = a >= 0 ? a : Math.max(a + o, s);
                    else o = a >= 0 ? Math.min(a + 1, o) : a + o + 1;
                else if(i && a && o) {
                    a = i(n, r);
                    return n[a] === r ? a : -1
                }
                if(r !== r) {
                    a = e(u.call(n, s, o), v.isNaN);
                    return a >= 0 ? a + s : -1
                }
                for(a = t > 0 ? s : o - 1; a >= 0 && a < o; a += t)
                    if(n[a] === r) return a;
                return -1
            }
        }

        function n(t, e) {
            var i = M.length,
                n = t.constructor,
                r = v.isFunction(n) && n.prototype || o,
                a = "constructor";
            if(v.has(t, a) && !v.contains(e, a)) e.push(a);
            for(; i--;) {
                a = M[i];
                if(a in t && t[a] !== r[a] && !v.contains(e, a)) e.push(a)
            }
        }
        var r = this,
            a = r._,
            s = Array.prototype,
            o = Object.prototype,
            l = Function.prototype,
            c = s.push,
            u = s.slice,
            d = o.toString,
            h = o.hasOwnProperty,
            f = Array.isArray,
            p = Object.keys,
            _ = l.bind,
            m = Object.create,
            g = function() {},
            v = function(t) {
                if(t instanceof v) return t;
                if(!(this instanceof v)) return new v(t);
                this._wrapped = t
            };
        if("undefined" != typeof exports) {
            if("undefined" != typeof module && module.exports) exports = module.exports = v;
            exports._ = v
        } else r._ = v;
        v.VERSION = "1.8.3";
        var y = function(t, e, i) {
                if(void 0 === e) return t;
                switch(null == i ? 3 : i) {
                    case 1:
                        return function(i) {
                            return t.call(e, i)
                        };
                    case 2:
                        return function(i, n) {
                            return t.call(e, i, n)
                        };
                    case 3:
                        return function(i, n, r) {
                            return t.call(e, i, n, r)
                        };
                    case 4:
                        return function(i, n, r, a) {
                            return t.call(e, i, n, r, a)
                        }
                }
                return function() {
                    return t.apply(e, arguments)
                }
            },
            b = function(t, e, i) {
                if(null == t) return v.identity;
                if(v.isFunction(t)) return y(t, e, i);
                if(v.isObject(t)) return v.matcher(t);
                else return v.property(t)
            };
        v.iteratee = function(t, e) {
            return b(t, e, 1 / 0)
        };
        var x = function(t, e) {
                return function(i) {
                    var n = arguments.length;
                    if(n < 2 || null == i) return i;
                    for(var r = 1; r < n; r++)
                        for(var a = arguments[r], s = t(a), o = s.length, l = 0; l < o; l++) {
                            var c = s[l];
                            if(!e || void 0 === i[c]) i[c] = a[c]
                        }
                    return i
                }
            },
            $ = function(t) {
                if(!v.isObject(t)) return {};
                if(m) return m(t);
                g.prototype = t;
                var e = new g;
                g.prototype = null;
                return e
            },
            w = function(t) {
                return function(e) {
                    return null == e ? void 0 : e[t]
                }
            },
            k = Math.pow(2, 53) - 1,
            S = w("length"),
            C = function(t) {
                var e = S(t);
                return "number" == typeof e && e >= 0 && e <= k
            };
        v.each = v.forEach = function(t, e, i) {
            e = y(e, i);
            var n, r;
            if(C(t))
                for(n = 0, r = t.length; n < r; n++) e(t[n], n, t);
            else {
                var a = v.keys(t);
                for(n = 0, r = a.length; n < r; n++) e(t[a[n]], a[n], t)
            }
            return t
        };
        v.map = v.collect = function(t, e, i) {
            e = b(e, i);
            for(var n = !C(t) && v.keys(t), r = (n || t).length, a = Array(r), s = 0; s < r; s++) {
                var o = n ? n[s] : s;
                a[s] = e(t[o], o, t)
            }
            return a
        };
        v.reduce = v.foldl = v.inject = t(1);
        v.reduceRight = v.foldr = t(-1);
        v.find = v.detect = function(t, e, i) {
            var n;
            if(C(t)) n = v.findIndex(t, e, i);
            else n = v.findKey(t, e, i);
            if(void 0 !== n && n !== -1) return t[n]
        };
        v.filter = v.select = function(t, e, i) {
            var n = [];
            e = b(e, i);
            v.each(t, function(t, i, r) {
                if(e(t, i, r)) n.push(t)
            });
            return n
        };
        v.reject = function(t, e, i) {
            return v.filter(t, v.negate(b(e)), i)
        };
        v.every = v.all = function(t, e, i) {
            e = b(e, i);
            for(var n = !C(t) && v.keys(t), r = (n || t).length, a = 0; a < r; a++) {
                var s = n ? n[a] : a;
                if(!e(t[s], s, t)) return !1
            }
            return !0
        };
        v.some = v.any = function(t, e, i) {
            e = b(e, i);
            for(var n = !C(t) && v.keys(t), r = (n || t).length, a = 0; a < r; a++) {
                var s = n ? n[a] : a;
                if(e(t[s], s, t)) return !0
            }
            return !1
        };
        v.contains = v.includes = v.include = function(t, e, i, n) {
            if(!C(t)) t = v.values(t);
            if("number" != typeof i || n) i = 0;
            return v.indexOf(t, e, i) >= 0
        };
        v.invoke = function(t, e) {
            var i = u.call(arguments, 2),
                n = v.isFunction(e);
            return v.map(t, function(t) {
                var r = n ? e : t[e];
                return null == r ? r : r.apply(t, i)
            })
        };
        v.pluck = function(t, e) {
            return v.map(t, v.property(e))
        };
        v.where = function(t, e) {
            return v.filter(t, v.matcher(e))
        };
        v.findWhere = function(t, e) {
            return v.find(t, v.matcher(e))
        };
        v.max = function(t, e, i) {
            var n, r, a = -(1 / 0),
                s = -(1 / 0);
            if(null == e && null != t) {
                t = C(t) ? t : v.values(t);
                for(var o = 0, l = t.length; o < l; o++) {
                    n = t[o];
                    if(n > a) a = n
                }
            } else {
                e = b(e, i);
                v.each(t, function(t, i, n) {
                    r = e(t, i, n);
                    if(r > s || r === -(1 / 0) && a === -(1 / 0)) {
                        a = t;
                        s = r
                    }
                })
            }
            return a
        };
        v.min = function(t, e, i) {
            var n, r, a = 1 / 0,
                s = 1 / 0;
            if(null == e && null != t) {
                t = C(t) ? t : v.values(t);
                for(var o = 0, l = t.length; o < l; o++) {
                    n = t[o];
                    if(n < a) a = n
                }
            } else {
                e = b(e, i);
                v.each(t, function(t, i, n) {
                    r = e(t, i, n);
                    if(r < s || r === 1 / 0 && a === 1 / 0) {
                        a = t;
                        s = r
                    }
                })
            }
            return a
        };
        v.shuffle = function(t) {
            for(var e, i = C(t) ? t : v.values(t), n = i.length, r = Array(n), a = 0; a < n; a++) {
                e = v.random(0, a);
                if(e !== a) r[a] = r[e];
                r[e] = i[a]
            }
            return r
        };
        v.sample = function(t, e, i) {
            if(null == e || i) {
                if(!C(t)) t = v.values(t);
                return t[v.random(t.length - 1)]
            }
            return v.shuffle(t).slice(0, Math.max(0, e))
        };
        v.sortBy = function(t, e, i) {
            e = b(e, i);
            return v.pluck(v.map(t, function(t, i, n) {
                return {
                    value: t,
                    index: i,
                    criteria: e(t, i, n)
                }
            }).sort(function(t, e) {
                var i = t.criteria,
                    n = e.criteria;
                if(i !== n) {
                    if(i > n || void 0 === i) return 1;
                    if(i < n || void 0 === n) return -1
                }
                return t.index - e.index
            }), "value")
        };
        var T = function(t) {
            return function(e, i, n) {
                var r = {};
                i = b(i, n);
                v.each(e, function(n, a) {
                    var s = i(n, a, e);
                    t(r, n, s)
                });
                return r
            }
        };
        v.groupBy = T(function(t, e, i) {
            if(v.has(t, i)) t[i].push(e);
            else t[i] = [e]
        });
        v.indexBy = T(function(t, e, i) {
            t[i] = e
        });
        v.countBy = T(function(t, e, i) {
            if(v.has(t, i)) t[i]++;
            else t[i] = 1
        });
        v.toArray = function(t) {
            if(!t) return [];
            if(v.isArray(t)) return u.call(t);
            if(C(t)) return v.map(t, v.identity);
            else return v.values(t);
        };
        v.size = function(t) {
            if(null == t) return 0;
            else return C(t) ? t.length : v.keys(t).length
        };
        v.partition = function(t, e, i) {
            e = b(e, i);
            var n = [],
                r = [];
            v.each(t, function(t, i, a) {
                (e(t, i, a) ? n : r).push(t)
            });
            return [n, r]
        };
        v.first = v.head = v.take = function(t, e, i) {
            if(null != t)
                if(null == e || i) return t[0];
                else return v.initial(t, t.length - e)
        };
        v.initial = function(t, e, i) {
            return u.call(t, 0, Math.max(0, t.length - (null == e || i ? 1 : e)))
        };
        v.last = function(t, e, i) {
            if(null != t)
                if(null == e || i) return t[t.length - 1];
                else return v.rest(t, Math.max(0, t.length - e))
        };
        v.rest = v.tail = v.drop = function(t, e, i) {
            return u.call(t, null == e || i ? 1 : e)
        };
        v.compact = function(t) {
            return v.filter(t, v.identity)
        };
        var E = function(t, e, i, n) {
            for(var r = [], a = 0, s = n || 0, o = S(t); s < o; s++) {
                var l = t[s];
                if(C(l) && (v.isArray(l) || v.isArguments(l))) {
                    if(!e) l = E(l, e, i);
                    var c = 0,
                        u = l.length;
                    r.length += u;
                    for(; c < u;) r[a++] = l[c++]
                } else if(!i) r[a++] = l
            }
            return r
        };
        v.flatten = function(t, e) {
            return E(t, e, !1)
        };
        v.without = function(t) {
            return v.difference(t, u.call(arguments, 1))
        };
        v.uniq = v.unique = function(t, e, i, n) {
            if(!v.isBoolean(e)) {
                n = i;
                i = e;
                e = !1
            }
            if(null != i) i = b(i, n);
            for(var r = [], a = [], s = 0, o = S(t); s < o; s++) {
                var l = t[s],
                    c = i ? i(l, s, t) : l;
                if(e) {
                    if(!s || a !== c) r.push(l);
                    a = c
                } else if(i) {
                    if(!v.contains(a, c)) {
                        a.push(c);
                        r.push(l)
                    }
                } else if(!v.contains(r, l)) r.push(l)
            }
            return r
        };
        v.union = function() {
            return v.uniq(E(arguments, !0, !0))
        };
        v.intersection = function(t) {
            for(var e = [], i = arguments.length, n = 0, r = S(t); n < r; n++) {
                var a = t[n];
                if(!v.contains(e, a)) {
                    for(var s = 1; s < i && v.contains(arguments[s], a); s++);
                    if(s === i) e.push(a)
                } else;
            }
            return e
        };
        v.difference = function(t) {
            var e = E(arguments, !0, !0, 1);
            return v.filter(t, function(t) {
                return !v.contains(e, t)
            })
        };
        v.zip = function() {
            return v.unzip(arguments)
        };
        v.unzip = function(t) {
            for(var e = t && v.max(t, S).length || 0, i = Array(e), n = 0; n < e; n++) i[n] = v.pluck(t, n);
            return i
        };
        v.object = function(t, e) {
            for(var i = {}, n = 0, r = S(t); n < r; n++)
                if(e) i[t[n]] = e[n];
                else i[t[n][0]] = t[n][1];
            return i
        };
        v.findIndex = e(1);
        v.findLastIndex = e(-1);
        v.sortedIndex = function(t, e, i, n) {
            i = b(i, n, 1);
            for(var r = i(e), a = 0, s = S(t); a < s;) {
                var o = Math.floor((a + s) / 2);
                if(i(t[o]) < r) a = o + 1;
                else s = o
            }
            return a
        };
        v.indexOf = i(1, v.findIndex, v.sortedIndex);
        v.lastIndexOf = i(-1, v.findLastIndex);
        v.range = function(t, e, i) {
            if(null == e) {
                e = t || 0;
                t = 0
            }
            i = i || 1;
            for(var n = Math.max(Math.ceil((e - t) / i), 0), r = Array(n), a = 0; a < n; a++, t += i) r[a] = t;
            return r
        };
        var I = function(t, e, i, n, r) {
            if(!(n instanceof e)) return t.apply(i, r);
            var a = $(t.prototype),
                s = t.apply(a, r);
            if(v.isObject(s)) return s;
            else return a
        };
        v.bind = function(t, e) {
            if(_ && t.bind === _) return _.apply(t, u.call(arguments, 1));
            if(!v.isFunction(t)) throw new TypeError("Bind must be called on a function");
            var i = u.call(arguments, 2),
                n = function() {
                    return I(t, n, e, this, i.concat(u.call(arguments)))
                };
            return n
        };
        v.partial = function(t) {
            var e = u.call(arguments, 1),
                i = function() {
                    for(var n = 0, r = e.length, a = Array(r), s = 0; s < r; s++) a[s] = e[s] === v ? arguments[n++] : e[s];
                    for(; n < arguments.length;) a.push(arguments[n++]);
                    return I(t, i, this, this, a)
                };
            return i
        };
        v.bindAll = function(t) {
            var e, i, n = arguments.length;
            if(n <= 1) throw new Error("bindAll must be passed function names");
            for(e = 1; e < n; e++) {
                i = arguments[e];
                t[i] = v.bind(t[i], t)
            }
            return t
        };
        v.memoize = function(t, e) {
            var i = function(n) {
                var r = i.cache,
                    a = "" + (e ? e.apply(this, arguments) : n);
                if(!v.has(r, a)) r[a] = t.apply(this, arguments);
                return r[a]
            };
            i.cache = {};
            return i
        };
        v.delay = function(t, e) {
            var i = u.call(arguments, 2);
            return setTimeout(function() {
                return t.apply(null, i)
            }, e)
        };
        v.defer = v.partial(v.delay, v, 1);
        v.throttle = function(t, e, i) {
            var n, r, a, s = null,
                o = 0;
            if(!i) i = {};
            var l = function() {
                o = i.leading === !1 ? 0 : v.now();
                s = null;
                a = t.apply(n, r);
                if(!s) n = r = null
            };
            return function() {
                var c = v.now();
                if(!o && i.leading === !1) o = c;
                var u = e - (c - o);
                n = this;
                r = arguments;
                if(u <= 0 || u > e) {
                    if(s) {
                        clearTimeout(s);
                        s = null
                    }
                    o = c;
                    a = t.apply(n, r);
                    if(!s) n = r = null
                } else if(!s && i.trailing !== !1) s = setTimeout(l, u);
                return a
            }
        };
        v.debounce = function(t, e, i) {
            var n, r, a, s, o, l = function() {
                var c = v.now() - s;
                if(c < e && c >= 0) n = setTimeout(l, e - c);
                else {
                    n = null;
                    if(!i) {
                        o = t.apply(a, r);
                        if(!n) a = r = null
                    }
                }
            };
            return function() {
                a = this;
                r = arguments;
                s = v.now();
                var c = i && !n;
                if(!n) n = setTimeout(l, e);
                if(c) {
                    o = t.apply(a, r);
                    a = r = null
                }
                return o
            }
        };
        v.wrap = function(t, e) {
            return v.partial(e, t)
        };
        v.negate = function(t) {
            return function() {
                return !t.apply(this, arguments)
            }
        };
        v.compose = function() {
            var t = arguments,
                e = t.length - 1;
            return function() {
                for(var i = e, n = t[e].apply(this, arguments); i--;) n = t[i].call(this, n);
                return n
            }
        };
        v.after = function(t, e) {
            return function() {
                if(--t < 1) return e.apply(this, arguments)
            }
        };
        v.before = function(t, e) {
            var i;
            return function() {
                if(--t > 0) i = e.apply(this, arguments);
                if(t <= 1) e = null;
                return i
            }
        };
        v.once = v.partial(v.before, 2);
        var A = !{
                toString: null
            }.propertyIsEnumerable("toString"),
            M = ["valueOf", "isPrototypeOf", "toString", "propertyIsEnumerable", "hasOwnProperty", "toLocaleString"];
        v.keys = function(t) {
            if(!v.isObject(t)) return [];
            if(p) return p(t);
            var e = [];
            for(var i in t)
                if(v.has(t, i)) e.push(i);
            if(A) n(t, e);
            return e
        };
        v.allKeys = function(t) {
            if(!v.isObject(t)) return [];
            var e = [];
            for(var i in t) e.push(i);
            if(A) n(t, e);
            return e
        };
        v.values = function(t) {
            for(var e = v.keys(t), i = e.length, n = Array(i), r = 0; r < i; r++) n[r] = t[e[r]];
            return n
        };
        v.mapObject = function(t, e, i) {
            e = b(e, i);
            for(var n, r = v.keys(t), a = r.length, s = {}, o = 0; o < a; o++) {
                n = r[o];
                s[n] = e(t[n], n, t)
            }
            return s
        };
        v.pairs = function(t) {
            for(var e = v.keys(t), i = e.length, n = Array(i), r = 0; r < i; r++) n[r] = [e[r], t[e[r]]];
            return n
        };
        v.invert = function(t) {
            for(var e = {}, i = v.keys(t), n = 0, r = i.length; n < r; n++) e[t[i[n]]] = i[n];
            return e
        };
        v.functions = v.methods = function(t) {
            var e = [];
            for(var i in t)
                if(v.isFunction(t[i])) e.push(i);
            return e.sort()
        };
        v.extend = x(v.allKeys);
        v.extendOwn = v.assign = x(v.keys);
        v.findKey = function(t, e, i) {
            e = b(e, i);
            for(var n, r = v.keys(t), a = 0, s = r.length; a < s; a++) {
                n = r[a];
                if(e(t[n], n, t)) return n
            }
        };
        v.pick = function(t, e, i) {
            var n, r, a = {},
                s = t;
            if(null == s) return a;
            if(v.isFunction(e)) {
                r = v.allKeys(s);
                n = y(e, i)
            } else {
                r = E(arguments, !1, !1, 1);
                n = function(t, e, i) {
                    return e in i
                };
                s = Object(s)
            }
            for(var o = 0, l = r.length; o < l; o++) {
                var c = r[o],
                    u = s[c];
                if(n(u, c, s)) a[c] = u
            }
            return a
        };
        v.omit = function(t, e, i) {
            if(v.isFunction(e)) e = v.negate(e);
            else {
                var n = v.map(E(arguments, !1, !1, 1), String);
                e = function(t, e) {
                    return !v.contains(n, e)
                }
            }
            return v.pick(t, e, i)
        };
        v.defaults = x(v.allKeys, !0);
        v.create = function(t, e) {
            var i = $(t);
            if(e) v.extendOwn(i, e);
            return i
        };
        v.clone = function(t) {
            if(!v.isObject(t)) return t;
            else return v.isArray(t) ? t.slice() : v.extend({}, t)
        };
        v.tap = function(t, e) {
            e(t);
            return t
        };
        v.isMatch = function(t, e) {
            var i = v.keys(e),
                n = i.length;
            if(null == t) return !n;
            for(var r = Object(t), a = 0; a < n; a++) {
                var s = i[a];
                if(e[s] !== r[s] || !(s in r)) return !1
            }
            return !0
        };
        var D = function(t, e, i, n) {
            if(t === e) return 0 !== t || 1 / t === 1 / e;
            if(null == t || null == e) return t === e;
            if(t instanceof v) t = t._wrapped;
            if(e instanceof v) e = e._wrapped;
            var r = d.call(t);
            if(r !== d.call(e)) return !1;
            switch(r) {
                case "[object RegExp]":
                case "[object String]":
                    return "" + t == "" + e;
                case "[object Number]":
                    if(+t !== +t) return +e !== +e;
                    else return 0 === +t ? 1 / +t === 1 / e : +t === +e;
                case "[object Date]":
                case "[object Boolean]":
                    return +t === +e
            }
            var a = "[object Array]" === r;
            if(!a) {
                if("object" != typeof t || "object" != typeof e) return !1;
                var s = t.constructor,
                    o = e.constructor;
                if(s !== o && !(v.isFunction(s) && s instanceof s && v.isFunction(o) && o instanceof o) && "constructor" in t && "constructor" in e) return !1
            }
            i = i || [];
            n = n || [];
            for(var l = i.length; l--;)
                if(i[l] === t) return n[l] === e;
            i.push(t);
            n.push(e);
            if(a) {
                l = t.length;
                if(l !== e.length) return !1;
                for(; l--;)
                    if(!D(t[l], e[l], i, n)) return !1
            } else {
                var c, u = v.keys(t);
                l = u.length;
                if(v.keys(e).length !== l) return !1;
                for(; l--;) {
                    c = u[l];
                    if(!v.has(e, c) || !D(t[c], e[c], i, n)) return !1
                }
            }
            i.pop();
            n.pop();
            return !0
        };
        v.isEqual = function(t, e) {
            return D(t, e)
        };
        v.isEmpty = function(t) {
            if(null == t) return !0;
            if(C(t) && (v.isArray(t) || v.isString(t) || v.isArguments(t))) return 0 === t.length;
            else return 0 === v.keys(t).length
        };
        v.isElement = function(t) {
            return !(!t || 1 !== t.nodeType)
        };
        v.isArray = f || function(t) {
                return "[object Array]" === d.call(t)
            };
        v.isObject = function(t) {
            var e = typeof t;
            return "function" === e || "object" === e && !!t
        };
        v.each(["Arguments", "Function", "String", "Number", "Date", "RegExp", "Error"], function(t) {
            v["is" + t] = function(e) {
                return d.call(e) === "[object " + t + "]"
            }
        });
        if(!v.isArguments(arguments)) v.isArguments = function(t) {
            return v.has(t, "callee")
        };
        if("function" != typeof /./ && "object" != typeof Int8Array) v.isFunction = function(t) {
            return "function" == typeof t || !1
        };
        v.isFinite = function(t) {
            return isFinite(t) && !isNaN(parseFloat(t))
        };
        v.isNaN = function(t) {
            return v.isNumber(t) && t !== +t
        };
        v.isBoolean = function(t) {
            return t === !0 || t === !1 || "[object Boolean]" === d.call(t)
        };
        v.isNull = function(t) {
            return null === t
        };
        v.isUndefined = function(t) {
            return void 0 === t
        };
        v.has = function(t, e) {
            return null != t && h.call(t, e)
        };
        v.noConflict = function() {
            r._ = a;
            return this
        };
        v.identity = function(t) {
            return t
        };
        v.constant = function(t) {
            return function() {
                return t
            }
        };
        v.noop = function() {};
        v.property = w;
        v.propertyOf = function(t) {
            return null == t ? function() {} : function(e) {
                return t[e]
            }
        };
        v.matcher = v.matches = function(t) {
            t = v.extendOwn({}, t);
            return function(e) {
                return v.isMatch(e, t)
            }
        };
        v.times = function(t, e, i) {
            var n = Array(Math.max(0, t));
            e = y(e, i, 1);
            for(var r = 0; r < t; r++) n[r] = e(r);
            return n
        };
        v.random = function(t, e) {
            if(null == e) {
                e = t;
                t = 0
            }
            return t + Math.floor(Math.random() * (e - t + 1))
        };
        v.now = Date.now || function() {
                return(new Date).getTime()
            };
        var P = {
                "&": "&amp;",
                "<": "&lt;",
                ">": "&gt;",
                '"': "&quot;",
                "'": "&#x27;",
                "`": "&#x60;"
            },
            N = v.invert(P),
            L = function(t) {
                var e = function(e) {
                        return t[e]
                    },
                    i = "(?:" + v.keys(t).join("|") + ")",
                    n = RegExp(i),
                    r = RegExp(i, "g");
                return function(t) {
                    t = null == t ? "" : "" + t;
                    return n.test(t) ? t.replace(r, e) : t
                }
            };
        v.escape = L(P);
        v.unescape = L(N);
        v.result = function(t, e, i) {
            var n = null == t ? void 0 : t[e];
            if(void 0 === n) n = i;
            return v.isFunction(n) ? n.call(t) : n
        };
        var R = 0;
        v.uniqueId = function(t) {
            var e = ++R + "";
            return t ? t + e : e
        };
        v.templateSettings = {
            evaluate: /<%([\s\S]+?)%>/g,
            interpolate: /<%=([\s\S]+?)%>/g,
            escape: /<%-([\s\S]+?)%>/g
        };
        var j = /(.)^/,
            O = {
                "'": "'",
                "\\": "\\",
                "\r": "r",
                "\n": "n",
                "\u2028": "u2028",
                "\u2029": "u2029"
            },
            F = /\\|'|\r|\n|\u2028|\u2029/g,
            z = function(t) {
                return "\\" + O[t]
            };
        v.template = function(t, e, i) {
            if(!e && i) e = i;
            e = v.defaults({}, e, v.templateSettings);
            var n = RegExp([(e.escape || j).source, (e.interpolate || j).source, (e.evaluate || j).source].join("|") + "|$", "g"),
                r = 0,
                a = "__p+='";
            t.replace(n, function(e, i, n, s, o) {
                a += t.slice(r, o).replace(F, z);
                r = o + e.length;
                if(i) a += "'+\n((__t=(" + i + "))==null?'':_.escape(__t))+\n'";
                else if(n) a += "'+\n((__t=(" + n + "))==null?'':__t)+\n'";
                else if(s) a += "';\n" + s + "\n__p+='";
                return e
            });
            a += "';\n";
            if(!e.variable) a = "with(obj||{}){\n" + a + "}\n";
            a = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + a + "return __p;\n";
            try {
                var s = new Function(e.variable || "obj", "_", a)
            } catch(t) {
                t.source = a;
                throw t
            }
            var o = function(t) {
                    return s.call(this, t, v)
                },
                l = e.variable || "obj";
            o.source = "function(" + l + "){\n" + a + "}";
            return o
        };
        v.chain = function(t) {
            var e = v(t);
            e._chain = !0;
            return e
        };
        var B = function(t, e) {
            return t._chain ? v(e).chain() : e
        };
        v.mixin = function(t) {
            v.each(v.functions(t), function(e) {
                var i = v[e] = t[e];
                v.prototype[e] = function() {
                    var t = [this._wrapped];
                    c.apply(t, arguments);
                    return B(this, i.apply(v, t))
                }
            })
        };
        v.mixin(v);
        v.each(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function(t) {
            var e = s[t];
            v.prototype[t] = function() {
                var i = this._wrapped;
                e.apply(i, arguments);
                if(("shift" === t || "splice" === t) && 0 === i.length) delete i[0];
                return B(this, i)
            }
        });
        v.each(["concat", "join", "slice"], function(t) {
            var e = s[t];
            v.prototype[t] = function() {
                return B(this, e.apply(this._wrapped, arguments))
            }
        });
        v.prototype.value = function() {
            return this._wrapped
        };
        v.prototype.valueOf = v.prototype.toJSON = v.prototype.value;
        v.prototype.toString = function() {
            return "" + this._wrapped
        };
        if("function" == typeof define && define.amd) define("underscore", [], function() {
            return v
        })
    }).call(this);
    return _
});
I$(704, function() {
    var t = function(t) {
            if(!t) return [];
            var e = t,
                i = ["m", "M", "l", "L", "z", "Z", "c", "C", "q", "Q", "a", "A"];
            e = e.replace(/  /g, " ");
            e = e.replace(/ /g, ",");
            e = e.replace(/,,/g, ",");
            var n;
            for(n = 0; n < i.length; n++) e = e.replace(new RegExp(i[n], "g"), "|" + i[n]);
            var r = e.split("|"),
                a = [];
            for(n = 1; n < r.length; n++) {
                var s = r[n],
                    o = s.charAt(0);
                s = s.slice(1);
                s = s.replace(new RegExp("e,-", "g"), "e-");
                var l = s.split(",");
                if(l.length > 0 && "" === l[0]) l.shift();
                for(var c = 0; c < l.length; c++) l[c] = parseFloat(l[c]);
                if(isNaN(l[l.length - 1])) l.pop();
                var u = [];
                u.push(o.toUpperCase());
                u = u.concat(l);
                a.push(u)
            }
            return a
        },
        e = {
            unfilled1: "M10,20 C15.5228475,20 20,15.5228475 20,10 C20,4.4771525 15.5228475,0 10,0 C4.4771525,0 0,4.4771525 0,10 C0,15.5228475 4.4771525,20 10,20 Z M10,19 C5.02943725,19 1,14.9705627 1,10 C1,5.02943725 5.02943725,1 10,1 C14.9705627,1 19,5.02943725 19,10 C19,14.9705627 14.9705627,19 10,19 Z",
            unfilled2: "M0,0 L20,0 L20,20 L0,20 L0,0 L0,0 Z M1,1 L1, 19 L19,19 L19,1 L1,1 L1,1 Z",
            unfilled3: "M10,0 L20,10 L10,20 L0,10 L10,0 L10,0 Z M2,10 L10,18 L18 10 L10,2 L2,10 L2,10 Z",
            unfilled4: "M0,11 L9,11 L9,20 L11,20 L11,11 L20,11 L20,9 L11,9 L11,0 L9,0 L9,9 L0,9 L0,11 Z",
            unfilled5: "M1.41421356,2.27373675e-13 L0,1.41421356 L6.36396103,7.77817459 L0,14.1421356 L1.41421356,15.5563492 L7.77817459,9.19238816 L14.1421356,15.5563492 L15.5563492,14.1421356 L9.19238816,7.77817459 L15.5563492,1.41421356 L14.1421356,2.27373675e-13 L7.77817459,6.36396103 L1.41421356,2.27373675e-13 Z",
            unfilled6: "M10.68098,0 L0,18.5 L21.36196,18.5 L10.68098,0 Z M19.6331188,17.4990281 L1.74454514,17.478878 L10.6809802,2.01092529 L19.6331188,17.4990281 Z",
            unfilled7: "M10.68098,18.5 L0,0 L21.36196,0 L10.68098,18.5 L10.68098,18.5 Z M19.6331188,1.0009719 L1.74454514,1.02112202 L10.6809802,16.4890747 L19.6331188,1.0009719 L19.6331188,1.0009719 Z",
            unfilled8: "M0,10.68098 L18.5,2.27373675e-13 L18.5,21.36196 L0,10.68098 L0,10.68098 L0,10.68098 Z M17.4990281,19.6331188 L17.478878,1.74454514 L2.01092529,10.6809802 L17.4990281,19.6331188 L17.4990281,19.6331188 L17.4990281,19.6331188 Z",
            unfilled9: "M18.5,10.68098 L0,0 L0,21.36196 L18.5,10.68098 L18.5,10.68098 L18.5,10.68098 Z M1.0009719,19.6331188 L1.02112202,1.74454514 L16.4890747,10.6809802 L1.0009719,19.6331188 L1.0009719,19.6331188 L1.0009719,19.6331188 Z",
            unfilled10: "M17.5852557,20.6727079 L15.4467599,12.8997731 L21.7365714,7.89627178 L13.6913813,7.54990672 L10.8682857,0 L8.04109667,7.54490801 L0,7.89627178 L6.30780519,12.8956014 L4.15131574,20.6727079 L10.8580394,16.2339618 L17.5852557,20.6727079 Z M5.82677344,18.3728313 L7.44409098,12.5401802 L2.7109787,8.77876706 L8.75201698,8.51479785 L10.8661343,2.84943005 L12.9845544,8.51479785 L18.9907612,8.80273052 L14.2924805,12.5401802 L15.9056892,18.3619345 L10.8682857,15.0280033 L5.82677344,18.3728313 Z",
            unfilled11: "M9.5,0.494384766 C9.5,0.221343599 9.73193359,0 10,0 C10.2761424,0 10.5,0.224609375 10.5,0.494384766 L10.5,8.79289322 L16.3679316,2.92496162 C16.5610009,2.73189236 16.8815162,2.73938061 17.0710678,2.92893219 C17.26633,3.12419433 17.2657984,3.44130839 17.0750384,3.6320684 L11.2071068,9.5 L19.5056152,9.5 C19.7786564,9.5 20,9.73193359 20,10 C20,10.2761424 19.7753906,10.5 19.5056152,10.5 L11.2071068,10.5 L17.0750384,16.3679316 C17.2681076,16.5610009 17.2606194,16.8815162 17.0710678,17.0710678 C16.8758057,17.26633 16.5586916,17.2657984 16.3679316,17.0750384 L10.5,11.2071068 L10.5,19.5056152 C10.5,19.7786564 10.2680664,20 10,20 C9.72385763,20 9.5,19.7753906 9.5,19.5056152 L9.5,11.2071068 L3.6320684,17.0750384 C3.43899914,17.2681076 3.11848376,17.2606194 2.92893219,17.0710678 C2.73367004,16.8758057 2.73420161,16.5586916 2.92496162,16.3679316 L8.79289322,10.5 L0.494384766,10.5 C0.221343599,10.5 0,10.2680664 0,10 C0,9.72385763 0.224609375,9.5 0.494384766,9.5 L8.79289322,9.5 L2.92496162,3.6320684 C2.73189236,3.43899914 2.73938061,3.11848376 2.92893219,2.92893219 C3.12419433,2.73367004 3.44130839,2.73420161 3.6320684,2.92496162 L9.5,8.79289322 L9.5,0.494384766 Z",
            unfilled12: "M19.0484793,7.71764336 L15.632951,18.2082039 L4.594465,18.2079998 L1.18995265,7.70696905 L10.0983508,1.19335137 L19.0484793,7.71764336 Z M10.0983504,-2.27373675e-13 L9.80445779,0.213525492 L0.293892626,7.12335555 L0,7.33688104 L0.112256994,7.68237254 L3.74496963,18.8627124 L3.85722663,19.2082039 L4.22049789,19.2082039 L15.9762029,19.2082039 L16.3394742,19.2082039 L16.4517312,18.8627124 L20.0844438,7.68237254 L20.1967008,7.33688104 L19.9028082,7.12335555 L10.392243,0.213525492 L10.0983504,-2.27373675e-13 Z",
            unfilled13: "M19.0484793,11.4905606 L15.632951,1.00000004 L4.594465,1.00020412 L1.18995265,11.5012349 L10.0983508,18.0148526 L19.0484793,11.4905606 L19.0484793,11.4905606 Z M10.0983504,19.2082039 L9.80445779,18.9946784 L0.293892626,12.0848484 L0,11.8713229 L0.112256994,11.5258314 L3.74496963,0.345491503 L3.85722663,0 L4.22049789,0 L15.9762029,0 L16.3394742,0 L16.4517312,0.345491503 L20.0844438,11.5258314 L20.1967008,11.8713229 L19.9028082,12.0848484 L10.392243,18.9946784 L10.0983504,19.2082039 L10.0983504,19.2082039 Z",
            unfilled14: "M12,32.2928932 L21.7530483,22.5398449 L22.1066017,22.1862915 L22.8137085,22.8933983 L22.4601551,23.2469517 L11.8535534,33.8535534 L11.6767767,34.0303301 L11.5,34.2071068 L11.1464466,33.8535534 L0.539844997,23.2469516 L0.18629161,22.8933982 L0.893398399,22.1862914 L1.24695179,22.5398448 L11,32.2928932 L11,0.5 L11,0 L12,0 L12,0.5 L12,32.2928932 Z",
            unfilled15: "M11,2.70710678 L1.2469517,12.4601551 L0.8933983,12.8137085 L0.1862915,12.1066017 L0.5398449,11.7530483 L11.1464466,1.14644661 L11.3232233,0.969669917 L11.5,0.792893219 L11.8535534,1.14644661 L22.460155,11.7530484 L22.8137084,12.1066018 L22.1066016,12.8137086 L21.7530482,12.4601552 L12,2.7071068 L12,34.5 L12,35 L11,35 L11,34.5 L11,2.70710678 Z",
            unfilled16: "M32.2928932,11 L22.5398449,1.2469517 L22.1862915,0.8933983 L22.8933983,0.1862915 L23.2469517,0.5398449 L33.8535534,11.1464466 L34.0303301,11.3232233 L34.2071068,11.5 L33.8535534,11.8535534 L23.2469516,22.460155 L22.8933982,22.8137084 L22.1862914,22.1066016 L22.5398448,21.7530482 L32.2928932,12 L0.5,12 L0,12 L0,11 L0.5,11 L32.2928932,11 Z",
            unfilled17: "M2.70710678,12 L12.4601551,21.7530483 L12.8137085,22.1066017 L12.1066017,22.8137085 L11.7530483,22.4601551 L1.14644661,11.8535534 L0.969669917,11.6767767 L0.792893219,11.5 L1.14644661,11.1464466 L11.7530484,0.539844997 L12.1066018,0.18629161 L12.8137086,0.893398399 L12.4601552,1.24695179 L2.7071068,11 L34.5,11 L35,11 L35,12 L34.5,12 L2.70710678,12 Z",
            unfilled18: "M31.5400673,16.5416306 L32.5400009,16.5416306 L32.5400009,32.5416306 L16.5410634,32.5416304 L16.5410634,31.5416304 L30.8330075,31.5416305 L8,8.70710678 L8.70705983,8 L31.5400673,30.8345238 L31.5400673,16.5416306 Z",
            unfilled19: "M23.6126987,1.6923885 L9.81980552,1.69238851 L9.31980551,1.69238851 L9.31980551,0.692388488 L9.81980552,0.692388488 L24.8198055,0.692388495 L25.0698055,0.6923885 L25.3198055,0.692388501 L25.3198055,1.19238851 L25.3198054,16.1923885 L25.3198054,16.6923885 L24.3198053,16.6923885 L24.3198054,16.1923885 L24.3198055,2.3994953 L1.83883511,24.8804657 L1.48528172,25.2340191 L0.778174939,24.5269123 L1.13172833,24.1733589 L23.6126987,1.6923885 Z",
            unfilled20: "M1.6923885,2.39949528 L1.69238851,16.1923885 L1.69238851,16.6923885 L0.692388488,16.6923885 L0.692388488,16.1923885 L0.692388495,1.19238851 L0.6923885,0.942388506 L0.692388501,0.692388501 L1.19238851,0.692388495 L16.1923885,0.692388627 L16.6923885,0.692388636 L16.6923885,1.69238866 L16.1923885,1.69238865 L2.3994953,1.69238851 L24.8804657,24.1733589 L25.2340191,24.5269123 L24.5269123,25.2340191 L24.1733589,24.8804657 L1.6923885,2.39949528 Z",
            unfilled21: "M2.39949528,24.3198055 L16.1923885,24.3198055 L16.6923885,24.3198055 L16.6923885,25.3198055 L16.1923885,25.3198055 L1.19238851,25.3198055 L0.942388506,25.3198055 L0.692388501,25.3198055 L0.692388495,24.8198055 L0.692388627,9.81980552 L0.692388636,9.31980552 L1.69238866,9.31980551 L1.69238865,9.81980552 L1.69238851,23.6126987 L24.1733589,1.13172833 L24.5269123,0.778174939 L25.2340191,1.48528172 L24.8804657,1.83883511 L2.39949528,24.3198055 Z"
        },
        i = {
            filled1: "M10,20 C15.5228475,20 20,15.5228475 20,10 C20,4.4771525 15.5228475,0 10,0 C4.4771525,0 0,4.4771525 0,10 C0,15.5228475 4.4771525,20 10,20 L10,20 Z",
            filled2: "M0,0 L20,0 L20,20 L0,20 L0,0 L0,0 Z",
            filled3: "M10,0 L20,10 L10,20 L0,10 L10,0 L10,0 Z",
            filled4: "M0,7 L0,13 L7,13 L7,20 L13,20 L13,13 L20,13 L20,7 L13,7 L13,1.10218212e-15 L7,0 L7,7 L0,7 Z",
            filled5: "M9.19238816,4.94974747 L4.24264069,0 L0,4.24264069 L4.94974747,9.19238816 L1.77635684e-15,14.1421356 L4.24264069,18.3847763 L9.19238816,13.4350288 L14.1421356,18.3847763 L18.3847763,14.1421356 L13.4350288,9.19238816 L18.3847763,4.24264069 L14.1421356,0 L9.19238816,4.94974747 L9.19238816,4.94974747 Z",
            filled6: "M10.68098,0 L0,18.5 L21.36196,18.5 L10.68098,0 Z",
            filled7: "M10.68098,18.5 L0,0 L21.36196,0 L10.68098,18.5 L10.68098,18.5 Z",
            filled8: "M0,10.68098 L18.5,2.27373675e-13 L18.5,21.36196 L0,10.68098 L0,10.68098 L0,10.68098 Z",
            filled9: "M18.5,10.68098 L0,0 L0,21.36196 L18.5,10.68098 L18.5,10.68098 L18.5,10.68098 Z",
            filled10: "M9.51056516,14.2 L3.63271264,18.0901699 L5.51612779,11.2978714 L0,6.90983006 L7.0418671,6.60212862 L9.51056516,0 L11.9792632,6.60212862 L19.0211303,6.90983006 L13.5050025,11.2978714 L15.3884177,18.0901699 L9.51056516,14.2 Z",
            filled11: "M8.57607832,6.56234896 C8.63516785,2.88895179 9.25010884,0 10,0 C10.7498912,0 11.3648321,2.88895179 11.4239217,6.56234896 C14.0631883,4.00664752 16.5408147,2.39867907 17.0710678,2.92893219 C17.6013209,3.45918531 15.9933525,5.93681166 13.437651,8.57607832 C17.1110482,8.63516785 20,9.25010884 20,10 C20,10.7498912 17.1110482,11.3648321 13.437651,11.4239217 C15.9933525,14.0631883 17.6013209,16.5408147 17.0710678,17.0710678 C16.5408147,17.6013209 14.0631883,15.9933525 11.4239217,13.437651 C11.3648321,17.1110482 10.7498912,20 10,20 C9.25010884,20 8.63516785,17.1110482 8.57607832,13.437651 C5.93681166,15.9933525 3.45918531,17.6013209 2.92893219,17.0710678 C2.39867907,16.5408147 4.00664752,14.0631883 6.56234896,11.4239217 C2.88895179,11.3648321 1.91410961e-15,10.7498912 1.77635684e-15,10 C1.63860407e-15,9.25010884 2.88895179,8.63516785 6.56234896,8.57607832 C4.00664752,5.93681166 2.39867907,3.45918531 2.92893219,2.92893219 C3.45918531,2.39867907 5.93681166,4.00664752 8.57607832,6.56234896 L8.57607832,6.56234896 Z",
            filled12: "M19.0484793,7.71764336 L15.632951,18.2082039 L4.594465,18.2079998 L1.18995265,7.70696905 L10.0983508,1.19335137 L19.0484793,7.71764336 Z",
            filled13: "M19.0484793,11.4905606 L15.632951,1.00000004 L4.594465,1.00020412 L1.18995265,11.5012349 L10.0983508,18.0148526 L19.0484793,11.4905606 L19.0484793,11.4905606 Z",
            filled14: "M12.2928932,28.0502524 L12.2928932,3.2071068 L12.2928932,0.2071068 L18.2928932,0.2071068 L18.2928932,3.2071068 L18.2928932,28.4644661 L23.9852814,22.7720779 L26.1066017,20.6507576 L30.3492424,24.8933983 L28.2279221,27.0147186 L17.6213203,37.6213203 L16.5606602,38.6819805 L15.5,39.7426407 L13.3786738,37.6213145 L2.77207803,27.0147185 L0.650757704,24.8933981 L4.89339843,20.6507575 L7.01471876,22.7720779 L12.2928932,28.0502524 Z",
            filled15: "M18.7071068,36.7928932 L18.7071068,39.7928932 L12.7071068,39.7928932 L12.7071068,36.7928932 L12.7071068,11.5355339 L7.0147186,17.2279221 L4.8933983,19.3492424 L0.6507576,15.1066017 L2.7720779,12.9852814 L13.3786797,2.37867966 L14.4393398,1.31801948 L15.5,0.257359335 L17.6213262,2.37868549 L28.227922,12.9852815 L30.3492423,15.1066019 L26.1066016,19.3492425 L23.9852812,17.2279221 L18.7071068,11.9497476 L18.7071068,36.7928932 Z",
            filled16: "M28.0502524,18.7071068 L3.2071068,18.7071068 L0.2071068,18.7071068 L0.2071068,12.7071068 L3.2071068,12.7071068 L28.4644661,12.7071068 L22.7720779,7.0147186 L20.6507576,4.8933983 L24.8933983,0.6507576 L27.0147186,2.7720779 L37.6213203,13.3786797 L38.6819805,14.4393398 L39.7426407,15.5 L37.6213145,17.6213262 L27.0147185,28.227922 L24.8933981,30.3492423 L20.6507575,26.1066016 L22.7720779,23.9852812 L28.0502524,18.7071068 Z",
            filled17: "M11.9497476,12.2928932 L36.7928932,12.2928932 L39.7928932,12.2928932 L39.7928932,18.2928932 L36.7928932,18.2928932 L11.5355339,18.2928932 L17.2279221,23.9852814 L19.3492424,26.1066017 L15.1066017,30.3492424 L12.9852814,28.2279221 L2.37867966,17.6213203 L1.31801948,16.5606602 L0.257359335,15.5 L2.37868549,13.3786738 L12.9852815,2.77207803 L15.1066019,0.650757704 L19.3492425,4.89339843 L17.2279221,7.01471876 L11.9497476,12.2928932 Z",
            filled18: "M20.5269121,24.062446 L2.96015538,6.49568931 L0.838835033,4.37436897 L5.08147572,0.131728278 L7.20279606,2.25304862 L25.0624461,20.1126987 L25.0624461,12.0624461 L25.0624461,9.06244612 L31.0624461,9.06244612 L31.0624461,12.0624461 L31.0624461,27.0624461 L31.0624461,28.5624461 L31.0624461,30.0624461 L28.0624378,30.0624461 L13.0624461,30.062446 L10.0624461,30.0624459 L10.0624461,24.0624459 L13.0624462,24.062446 L20.5269121,24.062446 Z",
            filled19: "M24.062446,10.6776699 L6.49568931,28.2444266 L4.37436897,30.365747 L0.131728278,26.1231063 L2.25304862,24.0017859 L20.1126987,6.1421359 L12.0624461,6.1421359 L9.06244612,6.1421359 L9.06244612,0.142135883 L12.0624461,0.142135883 L27.0624461,0.142135925 L28.5624461,0.142135868 L30.0624461,0.142135907 L30.0624461,3.14214416 L30.062446,18.1421359 L30.0624459,21.1421359 L24.0624459,21.1421359 L24.062446,18.1421358 L24.062446,10.6776699 Z",
            filled20: "M10.6776699,6.14213597 L28.2444266,23.7088927 L30.365747,25.830213 L26.1231063,30.0728537 L24.0017859,27.9515334 L6.1421359,10.0918833 L6.1421359,18.1421359 L6.1421359,21.1421359 L0.142135883,21.1421359 L0.142135883,18.1421359 L0.142135925,3.14213586 L0.142135868,1.64213591 L0.142135907,0.142135907 L3.14215962,0.142135918 L18.1421359,0.142136045 L21.1421359,0.142136097 L21.1421359,6.14213606 L18.1421358,6.14213601 L10.6776699,6.14213597 Z",
            filled21: "M6.14213597,20.5269121 L23.7088927,2.96015538 L25.830213,0.838835033 L30.0728537,5.08147572 L27.9515334,7.20279606 L10.0918833,25.0624461 L18.1421359,25.0624461 L21.1421359,25.0624461 L21.1421359,31.0624461 L18.1421359,31.0624461 L3.14213586,31.0624461 L1.64213591,31.0624461 L0.142135907,31.0624461 L0.142135875,28.0624378 L0.142136045,13.0624461 L0.142136097,10.0624461 L6.14213606,10.0624461 L6.14213601,13.0624462 L6.14213597,20.5269121 Z"
        },
        n = {
            unfilled: e,
            filled: i
        },
        r = function(e, i) {
            var r = n[e],
                a = t(r[i]);
            return a
        };
    r.defaultShape = "unfilled";
    r.defaultShapeSet = e;
    var a = "M2.00086422,5.00756175 C0.89456823,5.00756175 0,5.90152595 0,7.00428665 L0,25.5108369 C0,26.6116504 0.895817425,27.5075618 2.00086422,27.5075618 L20.9991358,27.5075618 C22.1054318,27.5075618 23,26.6135976 23,25.5108369 L23,7.00428665 C23,5.9034731 22.1041826,5.00756175 20.9991358,5.00756175 L15.05,5.00756175 L12.3219154,0.700059755 C11.7315954,-0.232024487 10.7700872,-0.234681071 10.1780846,0.700059755 L7.45,5.00756175 L2.00086422,5.00756175 L2.00086422,5.00756175 Z M6.5,9.5 L7.5,9.5 L7.5,22 L6.5,22 L6.5,9.5 L6.5,9.5 Z M11,9.5 L12,9.5 L12,22 L11,22 L11,9.5 L11,9.5 Z M15.5,9.5 L16.5,9.5 L16.5,22 L15.5,22 L15.5,9.5 L15.5,9.5 Z";
    r.sliderData = a;
    return r
});
I$(654, function(t, e, i, n, r, a, s, o, l) {
    function c(t, e, i) {
        if(e > i) return t;
        else if(e > t) return e;
        else if(t > i) return i;
        else return t
    }

    function u(t, e, i) {
        var n = t.select(function(t) {
                return "crossMark" == t.dynamicProperty("kind")
            }).data(["crossMark"]),
            r = i ? w : v;
        n.enter().append(r).setDynamicProperty("kind", "crossMark");
        n.exit();
        n = t.select(function(t) {
            return "crossMark" == t.dynamicProperty("kind")
        });
        e && n.setProperty(e);
        if(i) n.setProperty("pathElements", l.sliderData);
        return n
    }

    function d(t, e) {
        var i = typeof t;
        if(!t && e) return e;
        else if("function" == i) return t;
        else if("string" == i || e) {
            var n = t.match(T);
            if(n) return new Function("return " + t)();
            else if(e) return e;
            else return t
        } else return t
    }

    function h() {
        for(var t = arguments[0], e = t, i = 1; i < arguments.length; i++) {
            e = e[arguments[i]];
            if(null == e) return
        }
        return e
    }

    function f(t, e, i) {
        e = e || [];
        var n, r, a = s.AxisPositionHash,
            o = s.nonAxisPadding,
            l = [1, 1];
        if("x" == i) {
            n = t.x;
            r = t.x + t.width;
            for(var c = 0; c < e.length; c++)
                if(0 != e[c].dim) l[e[c].orient] = 0;
                else;
            if(l[0]) {
                var u = a[1][0];
                n += o[u]
            }
            if(l[1]) {
                u = a[1][1];
                r -= o[u]
            }
        } else {
            n = t.y + t.height;
            r = t.y;
            for(var c = 0; c < e.length; c++)
                if(1 != e[c].dim) l[e[c].orient] = 0;
                else;
            if(l[0]) {
                var u = a[0][0];
                n -= o[u]
            }
            if(l[1]) {
                u = a[0][1];
                r += o[u]
            }
        }
        return [n, r]
    }

    function p(t) {
        if(null === t) return s.escapeStringForNull;
        else return t
    }

    function _(t) {
        if(t == s.escapeStringForNull) return null;
        else return t
    }

    function m(t) {
        var e = "rgba(" + t.r + "," + t.g + "," + t.b;
        if(null == t.a) e += ",1)";
        else e += "," + t.a + ")";
        return e
    }
    var g = o.ContainerSprite,
        v = (o.Text, o.Circle),
        y = o.AutoWrapText,
        b = o.MultilineText,
        x = o.BubbleReceiver,
        $ = o.Annulus,
        w = o.Path,
        k = (o.selection, 0),
        S = {},
        C = y.create(),
        T = /\bfunction\b/;
    S.rectangle2Collision = function(t, e) {
        var i = t.width,
            n = t.height,
            r = t.x,
            a = t.y,
            s = e.x,
            o = e.y,
            l = e.width,
            c = e.height;
        return Math.abs(2 * (r - s) + i - l) <= i + l && Math.abs(2 * (a - o) + n - c) <= n + c
    };
    S.clamp = c;
    S.buildSlider = u;
    S.transformToFunction = d;
    S.markKeyFunctions = function(t) {
        var e, i, n = isAnimation && isAnimation.idField;
        if(n && "mark" == kindName) {
            e = isAnimation ? function(t) {
                var e = t.dynamicProperty("data");
                return e[n]
            } : void 0;
            i = isAnimation ? function(t) {
                return t[n]
            } : void 0
        }
        return [e, i]
    };
    S.composeValues = function() {
        for(var t = p(arguments[0]) + "", e = 1; e < arguments.length; e++) t += "_:_" + p(arguments[e]);
        return t
    };
    S.generateUniqueID = function() {
        k += 1;
        return "SYSTEM_ID_" + k
    };
    S.getValueInObject = h;
    S.calculateContinuousDomain = function(t, e) {
        var i = 1 / 0,
            n = -(1 / 0);
        e.map(function(e) {
            var r = e[t];
            if(null != r) {
                i = r < i ? r : i;
                n = r > n ? r : n
            }
        });
        return [i, n]
    };
    S.applySelectionMapTheme = function(t, e) {
        for(var i in e)
            if(t[i]) e[i].setProperty(t[i])
    };
    S.applyMarkSelectionMapTheme = function(t, e) {
        for(var i in e)
            if(t && t[i])
                if(e[i].Klass) e[i].setProperty(t[i]);
                else {
                    e[i].enter && e[i].enter.setProperty(t[i]);
                    e[i].update && e[i].update.setProperty(t[i])
                }
    };
    S.clipMultilLineTextInFixedSize = function(t, e, i, n) {
        var r, s = (o.bboxHelper.multilinetextBbox, []);
        t = a.isArray(t) ? t : [t];
        C.setstyles(e);
        C.setmaxWidth(n);
        for(var l = 0; l < t.length; l++) {
            C.settext(t[l]);
            var c = C.splitTexts(),
                u = c[0];
            if(c.length > 1) r = u.slice(0, u.length - 2) + "..";
            else r = u;
            s.push(r)
        }
        return s
    };
    S.calculateDiscreteDomain = function(t, e) {
        var i = [],
            n = [];
        if(null != t) {
            for(var r = 0; r < e.length; r++) {
                var i = e[r][t];
                if(void 0 !== i) n.push(i)
            }
            i = a.uniq(n)
        }
        return i
    };
    S.groupBy = function(t, e) {
        var i = a.groupBy(e, t[0]);
        if(1 == t.length) return i;
        else {
            var n = {};
            for(var r in i) {
                var s = groupBy(t.slice(1, t.length), i[r]);
                n[r] = s
            }
            return n
        }
    };
    S.getBarSizeRange = function(t, e, i, n) {
        var r;
        if("continuous" != t.type() && "continuous" != e.type())
            if("discrete" == t.type() && "discrete" == e.type()) {
                var a = t.step();
                r = [-a / 2, a / 2]
            } else if("constant" == t.type()) {
                var s = t.range(),
                    o = Math.abs(s[1] - s[0]);
                r = [-o / 2, o / 2]
            } else {
                var s = e.range(),
                    o = Math.abs(s[0] - s[1]);
                r = [o, 0]
            } else {
            var l = i.step();
            r = [0, l * n]
        }
        return r
    };
    S.getOffsetScaleRange = function(t, e) {
        var i, n = t.type();
        if("continuous" == n) {
            var r = s.continuousBarSize;
            i = [-r / 2, r / 2]
        } else {
            var a = t.step(),
                o = .5 - e / 2;
            i = [-o * a, o * a];
            i = [-.4 * a, .4 * a]
        }
        return i
    };
    S.getDoubleDiscreteSizeRange = f;
    S.shallowCloneObject = function(t) {
        var e = {};
        for(var i in t) e[i] = t[i];
        return e
    };
    S.deepCloneObject = function(t) {
        var e;
        switch(typeof t) {
            case "undefined":
                break;
            case "string":
                e = t + "";
                break;
            case "number":
                e = t - 0;
                break;
            case "boolean":
                e = t;
                break;
            case "object":
                if(null === t) e = null;
                else if(t instanceof Array) {
                    e = [];
                    for(var i = 0, n = t.length; i < n; i++) e.push(arguments.callee(t[i]))
                } else {
                    e = {};
                    for(var r in t) e[r] = arguments.callee(t[r])
                }
                break;
            default:
                e = t
        }
        return e
    };
    S.defaultFieldType = function(t, e) {
        var i;
        if(null == t) return null;
        for(var n = 0; n < e.length; n++)
            if(void 0 !== e[n][t]) {
                if(null === e[n][t]) {
                    i = "discrete";
                    continue
                } else if("string" == typeof e[n][t]) {
                    i = "discrete";
                    break
                } else if("number" == typeof e[n][t]) {
                    i = "continuous";
                    break
                }
            } else;
        return i
    };
    S.createDataByPrototype = function(t) {
        return t.map(function(t) {
            var e = S.createObjBasedPrototypeObj(t);
            e.originRecord = t;
            return e
        })
    };
    S.createOrdinalScale = function(e, i, n, r) {
        var a = t.create();
        a.setreverse(r);
        if(e)
            if(e) a.domain(e);
        if(i) a.rangeBands(i);
        if(n && a.field) a.field(n);
        return a
    };
    S.createNumberScale = function(t, e, n, r, a, s) {
        var o = i.create();
        o.setreverse(r);
        if(a) o.domainMode(a);
        if(t) o.domain(t);
        if(e) o.range(e);
        if(n && o.field) o.field(n);
        if(void 0 != s && null != s) o.minStep(s);
        return o
    };
    S.createConstantScale = function(t) {
        var i = e.create();
        if(t) i.range(t);
        return i
    };
    S.createDiscreteColorScale = function(t, e, i) {
        var r = n.create();
        if(t) r.domain(t);
        if(e) r.range(e);
        if(i && r.field) r.field(i);
        return r
    };
    S.createContinuousColorScale = function(t, e, i) {
        var n = r.create();
        if(t) n.domain(t);
        if(e) n.range(e);
        if(i && n.field) n.field(i);
        return n
    };
    S.createScale = function(t, e) {
        var i;
        if("color" != e)
            if("continuous" == t.type) i = S.createNumberScale(t.domain, t.range, t.name, t.reverse, t.domainMode, t.minStep);
            else if("discrete" == t.type) i = S.createOrdinalScale(t.domain, t.range, t.name, t.reverse);
            else if("constant" == t.type) i = S.createConstantScale(t.range);
            else throw "不支持的scale类型";
        else if("discrete" == t.type) i = S.createDiscreteColorScale(t.domain, t.range, t.name);
        else if("continuous" == t.type) i = S.createContinuousColorScale(t.domain, t.range, t.name);
        i.id(S.generateUniqueID());
        return i
    };
    S.escapeNull = p;
    S.unescapeNull = _;
    S.mergeOrdinalDomain = function(t) {
        var e = {},
            i = [];
        t.map(function(t) {
            if(t.value) t.value.map(function(t) {
                var n = S.escapeNull(t);
                if(void 0 === e[n]) {
                    e[n] = !0;
                    i.push(n)
                }
            })
        });
        return {
            type: "discrete",
            value: i,
            field: t[0].field
        }
    };
    S.mergeNumberInterval = function(t) {
        var e = 1 / 0,
            i = -(1 / 0);
        maxCount = -(1 / 0);
        t.map(function(t) {
            var n = t.value;
            if(n) {
                var r = t.meta;
                e = e > n[0] ? n[0] : e;
                i = i < n[1] ? n[1] : i;
                if(r && null != r.maxCount) maxCount = r.maxCount > maxCount ? r.maxCount : maxCount
            }
        });
        var n = {
            type: "continuous",
            value: [e, i],
            field: t[0].field
        };
        if(t.length && t[0].meta && null != t[0].meta.maxCount) n.meta = {
            maxCount: maxCount
        };
        return n
    };
    S.mergeDomainArray = function(t) {
        if(t && 0 != t.length) {
            for(var e, i = 0; i < t.length; i++) {
                e = t[i].type;
                if(e) break
            }
            var n;
            if("continuous" == e) n = S.mergeNumberInterval(t);
            else n = S.mergeOrdinalDomain(t);
            return n
        }
    };
    S.area4ToArea8 = function(t) {
        var e = {
            x: t.x,
            y: t.y,
            width: t.width,
            height: t.height,
            left: t.x,
            top: t.y,
            right: t.x + t.width,
            bottom: t.y + t.height
        };
        return e
    };
    S.getAxisInfoById = function(t, e) {
        var i;
        if("number" == typeof e && e >= 0 && e < t.length) i = t[e];
        else if("string" == typeof e)
            for(var n = 0; n < t.length; n++)
                if(t[n].id === e) {
                    i = t[n];
                    return i
                }
    };
    S.getCoordByName = function(t, e) {
        if(null != t) {
            if(a.isString(t)) {
                for(var i = 0; i < e.length; i++)
                    if(e[i].name == t) return e[i]
            } else if(a.isNumber(t)) return e[t];
            throw "未找到name为" + t + "的坐标系"
        }
    };
    S.getScaleByName = function(t, e) {
        if(null != t) {
            if(a.isString(t)) {
                for(var i = 0; i < e.length; i++)
                    if(e[i].name == t) return e[i]
            } else if(a.isNumber(t)) return e[t];
            throw "未找到name为" + t + "的scaleOption"
        }
    };
    S.getScaleOptionByCoordNameFac = function(t, e) {
        return function(i, n) {
            var r = S.getCoordByName(i, t);
            if("cartesian" == r.type)
                if(a.isArray(n)) return n.map(function(t, i) {
                    if(null == r.dims[t]) return null;
                    else return S.getScaleByName(r.dims[t], e)
                });
                else return S.getScaleByName(r.dims[n], e);
            else if("map" == r.type) return S.getScaleByName(i, e)
        }
    };
    S.createObjBasedPrototypeObj = function(t) {
        function e() {}
        e.prototype = t;
        var i = new e;
        return i
    };
    S.transveralRowfirst = function(t, e) {
        for(var i = [], n = 0; n < t.length; n++)
            for(var r = 0; r < t[n].length; r++)
                for(var a = t[n][r], s = 0; s < a.length; s++)
                    for(var o = n * a.length + s, l = 0; l < a[s].length; l++) {
                        var c = a[s][l];
                        if(!i[o]) i[o] = [];
                        i[o].push(e(c))
                    }
        return i
    };
    S.transveralColfirst = function(t, e) {
        for(var i = [], n = 0; n < t[0].length; n++)
            for(var r = 0; r < t.length; r++)
                for(var a = t[r][n], s = 0; s < a[0].length; s++)
                    for(var o = n * a[0].length + s, l = 0; l < a.length; l++) {
                        var c = a[l][s];
                        if(!i[o]) i[o] = [];
                        i[o].push(e(c))
                    }
        return i
    };
    S.depthFirstSearch = function(t, e) {
        var i = [];
        i.push(t[0]);
        for(var n; i.length > 0;) {
            n = i.pop();
            e(n);
            var r = n.subs;
            if(r && r.length > 0)
                for(var a = r.length - 1; a >= 0; a--) i.push(r[a])
        }
    };
    S.breadthFirstSearch = function(t, e) {
        var i = [];
        i.unshift(t[0]);
        for(var n; i.length > 0;) {
            n = i.shift();
            e(n);
            var r = n.subs;
            if(r)
                for(var a = 0; a < r.length; a++) i.unshift(r[a])
        }
    };
    S.getCellBbox = function(t, e, i, n, r, a, s) {
        var o = !!i.rangeBand && i.ticks()[0] != -1,
            l = !!n.rangeBand && n.ticks()[0] != -1,
            s = void 0 == s ? 0 : s,
            c = (o ? i.exec(Number(t)) : r.x + r.width / 2) + s,
            u = (l ? n.exec(Number(e)) : r.y + r.height / 2) + s,
            d = o ? i.step() : r.width,
            h = l ? n.step() : r.height,
            f = c - d / 2,
            p = u - h / 2;
        if(f < r.x || f + d > r.x + r.width) {
            if(f < r.x) d -= r.x - f;
            else d -= f + d - r.x - r.width;
            if(d > 0) f = r.x;
            else d = 0
        }
        if(p < r.y || p + h > r.y + r.height) {
            if(p < r.y) h -= r.y - p;
            else h -= p + h - r.y - r.height;
            if(h > 0) p = r.y;
            else h = 0
        }
        return {
            x: f,
            y: p,
            width: d > 0 ? d : 0,
            height: h > 0 ? h : 0
        }
    };
    S.sortByCategory = function(t, e, i) {
        for(var n = e.length, r = (t.length, {}), a = 0; a < n; a++) r[e[a]] = a;
        var s = function(t, e) {
            var n = p(t[i]),
                a = p(e[i]);
            return r[n] - r[a]
        };
        return t.sort(s)
    };
    S.youDataChoosePolicy = function(t, e, i, n) {
        if(t && e) return function(r) {
            return !(null == r[t] && "discrete" != i || null == r[e] && "discrete" != n)
        };
        else if(t && !e) return function(e) {
            return !("discrete" != i && null == e[t])
        };
        else if(e && !t) return function(t) {
            return !("discrete" != n && null == t[e])
        };
        else return function() {
                return !0
            }
    };
    S.calculateLinkArray = function(t) {
        for(var e = [], i = [], n = [], r = [], a = [], s = t[0], o = function(t) {
            return t - 1
        }, l = function(t) {
            return [t - 1, t]
        }, c = function(t) {
            return t
        }, u = t.length, d = 1; d < u; d++) {
            if(s + 1 === t[d]) {
                i.push(o(d));
                n.push(l(d))
            } else e.push(o(d));
            a.push(l(d));
            s = t[d]
        }
        if(u && t[0] + 1 !== t[1]) r.push(c(0));
        for(var d = 1; d < u - 1; d++)
            if(t[d - 1] + 1 != t[d] && t[d] + 1 != t[d + 1]) r.push(c(d));
        if(u && t[u - 2] + 1 !== t[u - 1]) r.push(c(u - 1));
        return {
            linkArray: n,
            containDashLinkArray: a,
            isolatedPointsIndex: r,
            normalLinesIndex: i,
            brokenLinesIndex: e
        }
    };
    S.rgb2string = m;
    S.calSuitableGap = function(t, e, i) {
        if(null == i) i = 10;
        if(t == e) {
            t -= 1;
            e += 1
        }
        var n = e - t,
            r = n > 0;
        n = Math.abs(n);
        var a = Math.pow(10, Math.floor(Math.log(n / i) / Math.LN10)),
            s = Math.ceil(n / a);
        a = r ? a : -a;
        return [a, s]
    };
    S.getGradientColor = function(t, e, i, n, r, a) {
        var s = o.createLinearGradient(i, n, r, a);
        s.addColorStop(0, m(t));
        s.addColorStop(1, m(e));
        return s
    };
    S.changeGradient = function(t, e, i, n, r, a, s) {
        var l = 0,
            c = 0,
            u = Math.abs(r - n),
            d = 0,
            h = o.createLinearGradient(l, c, u, d),
            f = (a - n) / (r - n),
            p = f + 1e-4,
            _ = (s - n) / (r - n),
            g = _ + 1e-4;
        if(p > 1) {
            g = 1;
            _ = g - 1e-5;
            p = _ - 1e-5;
            f = p - 1e-5
        }
        if(g > 1) {
            g = 1;
            _ = g - 1e-6
        }
        h.addColorStop(0, m(t));
        h.addColorStop(f, m(t));
        h.addColorStop(p, m(e));
        h.addColorStop(_, m(i));
        h.addColorStop(g, m(t));
        h.addColorStop(1, m(t));
        return h
    };
    S.buildForCalLayoutInfo = function(t, e, i) {
        var n = t.select(function(t) {
            return "pies" == t.dynamicProperty("kind")
        }).data(["pies"]);
        n.enter().append(x).setDynamicProperty("kind", "pies");
        n.exit().remove();
        n = t.selectAll(function(t) {
            return "pies" == t.dynamicProperty("kind")
        });
        var r = n.selectAll(function(t) {
            return "pie" == t.dynamicProperty("kind")
        }).data(e);
        r.enter().append($).setDynamicProperty("kind", "pie");
        r.exit().remove();
        if(i) {
            var a = t.select(function(t) {
                return "leads" == t.dynamicProperty("kind")
            }).data(["leads"]);
            a.enter().append(g).setDynamicProperty("kind", "leads");
            a.exit().remove();
            var a = t.select(function(t) {
                    return "leads" == t.dynamicProperty("kind")
                }),
                s = a.selectAll(function(t) {
                    return "lead" == t.dynamicProperty("kind")
                }).data(e);
            s.enter().append(w).setDynamicProperty("kind", "lead");
            s.exit().remove();
            var o = t.select(function(t) {
                return "annotations" == t.dynamicProperty("kind")
            }).data(["annotations"]);
            o.enter().append(g).setDynamicProperty("kind", "annotations");
            o.exit().remove();
            var o = t.select(function(t) {
                    return "annotations" == t.dynamicProperty("kind")
                }),
                l = o.selectAll(function(t) {
                    return "annotation" == t.dynamicProperty("kind")
                }).data(e);
            l.enter().append(b).setDynamicProperty("kind", "annotation");
            l.exit().remove()
        }
    };
    S.mult = function(t, e) {
        var i = t.toString(),
            n = e.toString(),
            r = void 0 === i.split(".")[1] ? 0 : i.split(".")[1].length;
        r += void 0 === n.split(".")[1] ? 0 : n.split(".")[1].length;
        return Number(i.replace(".", "")) * Number(n.replace(".", "")) / Math.pow(10, r)
    }, S.div = function(t, e) {
        var i, n, r = 0,
            a = 0,
            s = t.toString(),
            o = e.toString();
        r = void 0 === s.split(".")[1] ? 0 : s.split(".")[1].length;
        a = void 0 === o.split(".")[1] ? 0 : o.split(".")[1].length;
        i = Number(s.replace(".", ""));
        n = Number(o.replace(".", ""));
        return i / n * Math.pow(10, a - r)
    }, S.add = function(t, e) {
        var i, n, r, a = t.toString(),
            s = e.toString();
        i = void 0 === a.split(".")[1] ? 0 : a.split(".")[1].length;
        n = void 0 === s.split(".")[1] ? 0 : s.split(".")[1].length;
        r = Math.pow(10, Math.max(i, n));
        return(t * r + e * r) / r
    }, S.sub = function(t, e) {
        return this._t.__floatAdd(t, -e)
    };
    return S
}, 661, 699, 662, 697, 696, 656, 675, 566, 704);
I$(676, function() {
    return function() {
        var t = arguments;
        return function(e) {
            for(var i = !0, n = 0; n < t.length; n++)
                if(t[n]) i = i && void 0 !== e[t[n]];
            return i
        }
    }
});
I$(655, function(t, e, i, n, r, a, s, o) {
    var l = "___NULLKEY___",
        c = function(t) {
            var e = {};
            e.subs = [];
            if(null == t.children) {
                e.title = t.paneValue;
                return e
            } else {
                e.title = t.paneValue;
                var i = 0;
                for(var n in t.children) e.subs[i++] = c(t.children[n]);
                return e
            }
        },
        u = s.Klass.extend({
            initialize: function(t) {
                this.setpaneFieldValueMap({});
                this.setxPaneArray(t.xPane);
                this.setyPaneArray(t.yPane);
                this.setxCellArray(t.xCell);
                this.setyCellArray(t.yCell);
                this.setflatData(t.data);
                this.createDataTree();
                this._t.__maxtrixDataInfo();
                this.autoConfigScaleType()
            },
            iterativeLeaf: function(t, e) {
                function i(e, i) {
                    if(0 == i.length && void 0 !== e.paneValue) t(e);
                    else {
                        var n = i.slice(1, i.length);
                        for(var r in e.children) {
                            var a = e.children[r];
                            arguments.callee(a, n)
                        }
                    }
                }
                var n = "x" == e ? this.xRoot() : this.yRoot(),
                    r = "x" == e ? this.xPaneArray() : this.yPaneArray();
                i(n, r)
            },
            createDataTree: function() {
                function t(t, e, i, n, r) {
                    if(null == i) i = l;
                    for(var a = _.groupBy(e, function(t) {
                        return t[i]
                    }), s = _.keys(a), o = 0; o < s.length; o++) {
                        var c = ("undefined" == s[o] ? void 0 : s[o], {
                            pane: n,
                            paneValue: s[o]
                        });
                        if(r) c.data = a[s[o]];
                        if(!t.children) t.children = {};
                        t.children[s[o]] = c
                    }
                    return a
                }

                function e(i, n, r, a, o, l) {
                    if(0 == r.length) {
                        if(0 == l) t(i, n, null, void 0, !0);
                        s++
                    } else {
                        var c = r[0],
                            u = r.slice(1, r.length),
                            d = o == l,
                            h = t(i, n, c, u[0], d);
                        a[c] = _.union(a[c], _.keys(h));
                        for(var f in h) {
                            var p = i.children[f],
                                m = h[f];
                            e(p, m, u, a, o, l + 1)
                        }
                    }
                }
                var i = this.flatData(),
                    n = this.xPaneArray(),
                    r = this.yPaneArray(),
                    a = this.paneFieldValueMap();
                n.map(function(t) {
                    a[t] = []
                });
                r.map(function(t) {
                    a[t] = []
                });
                var s = 0,
                    o = {
                        pane: n[0]
                    },
                    c = {
                        pane: r[0]
                    },
                    u = n.length,
                    d = r.length;
                e(o, i, n, a, u - 1, 0);
                this.setxCellNum(s);
                s = 0;
                e(c, i, r, a, d - 1, 0);
                this.setyCellNum(s);
                s = 0;
                this.setxRoot(o);
                this.setyRoot(c)
            },
            autoConfigScaleType: function() {
                var t, e, i = this.flatData();
                t = this.xCellArray().map(function(t, e) {
                    return a.defaultFieldType(t, i)
                });
                e = this.yCellArray().map(function(t, e) {
                    return a.defaultFieldType(t, i)
                });
                this.setxScaleType(t);
                this.setyScaleType(e)
            },
            setCellSizeRange: function(t) {
                var e = -(1 / 0),
                    i = 1 / 0,
                    n = function(t) {
                        for(var n = 0; n < t.info.length; n++)
                            if("discrete" == t.info[n].scaleType) {
                                var r = t.info[n].cellSize;
                                if(r > e) e = r;
                                if(r < i) i = r
                            }
                    };
                this.iterativeLeaf(n, t);
                if(i == 1 / 0) {
                    i = 1;
                    e = 1
                }
                var r = 1 / 0,
                    a = -(1 / 0),
                    s = function(t) {
                        for(var n = 0, s = 0; s < t.info.length; s++) {
                            if("discrete" != t.info[s].scaleType) t.info[s].cellSize = (i + e) / 2;
                            n += t.info[s].cellSize
                        }
                        if(n > a) a = n;
                        if(n < r) r = n;
                        t.paneSize = n
                    };
                this.iterativeLeaf(s, t);
                var o = [r, a];
                if("x" == t) this.setxSizeRange(o);
                else this.setySizeRange(o);
                return o
            },
            getColsTree: function() {
                var t = this.xRoot(),
                    e = c(t),
                    i = this.xPaneArray();
                e.fieldNames = i;
                e.title = i.join("/");
                return e
            },
            getRowsTree: function() {
                var t = this.yRoot(),
                    e = c(t),
                    i = this.yPaneArray();
                e.fieldNames = i;
                e.title = i.join("/");
                return e
            },
            getPaneValues: function(t, e) {
                var i, n;
                i = "y" == e ? this.yRoot() : this.xRoot();
                for(var r = 0; r < t.length; r++)
                    if(i.pane != t[r][0]) return [];
                    else {
                        n = i.children;
                        if(void 0 == t[r][1]) return _.keys(n);
                        else {
                            i = n[t[r][1]];
                            if(null == i) return []
                        }
                    }
                var a = (i || []).children;
                return _.keys(a)
            },
            __maxtrixDataInfo: function() {
                function t(t) {
                    return function(e) {
                        t.push(e)
                    }
                }
                var e = [],
                    i = [],
                    n = [];
                this.iterativeLeaf(t(e), "x");
                this.iterativeLeaf(t(i), "y");
                this.setxNodeArray(e);
                this.setyNodeArray(i);
                for(var r = 0 == i.length ? 1 : i.length, a = 0 == e.length ? 1 : e.length, s = 0; s < r; s++) {
                    n[s] = [];
                    for(var o = i[s], l = 0; l < a; l++) {
                        var c = e[l];
                        if(c && o) var u = _.intersection(c.data, o.data);
                        else var u = c ? c.data : o ? o.data : [];
                        var d = {
                            data: u,
                            xNode: c,
                            yNode: o
                        };
                        n[s].push(d)
                    }
                }
                this.setmatrix(n)
            },
            iterateMatrx: function(t) {
                for(var e = this.matrix(), i = 0; i < e.length; i++)
                    for(var n = 0; n < e[i].length; n++) {
                        var r = e[i][n];
                        t(r)
                    }
            },
            generateCellsOptionMatrix: function(t) {
                for(var e = this.xCellArray(), i = this.yCellArray(), n = [], r = 0 == i.length ? 1 : i.length, a = 0 == e.length ? 1 : e.length, s = 0; s < r; s++) {
                    n[s] = [];
                    for(var o = 0; o < a; o++) {
                        var l = {
                            lengend: {
                                hidden: !0
                            },
                            xAxises: [{
                                allHidden: !0,
                                padding: 10
                            }],
                            yAxises: [{
                                allHidden: !0,
                                padding: 10
                            }],
                            series: [{
                                type: t,
                                xField: e[o],
                                yField: i[s]
                            }]
                        };
                        n[s][o] = l
                    }
                }
                return n
            },
            getPaneAllValues: function(t) {
                return this.paneFieldValueMap()[t]
            },
            getPaneFieldVaule_Data_Map: function(t) {
                var e = _.groupBy(this.flatData(), function(e) {
                    return e[t]
                });
                return e
            },
            getPaneValuesTrees: function(t) {
                "x" == t ? this.xRoot() : this.yRoot()
            },
            getPaneData: function(t, e) {
                var i, n, r, a, s = this.xRoot(),
                    o = this.yRoot();
                if(this.xPaneArray().length < t.length && this.yPaneArray().length < e.length) throw "索引值超界";
                else {
                    i = s;
                    for(var l = 0; l < t.length; l++)
                        if(_.isNumber(t[l])) {
                            var c = _.keys(i.children);
                            i = i.children[c[t[l]]]
                        } else i = i.children[t[l]];
                    r = i.data;
                    n = o;
                    for(var u = 0; u < e.length; u++)
                        if(_.isNumber(e[u])) {
                            var c = _.keys(n.children);
                            n = n.children[c[e[u]]]
                        } else n = n.children[e[u]];
                    a = n.data;
                    return _.intersection(r, a)
                }
            }
        }, ["xPaneArray", "xScaleType", "yScaleType", "paneFieldValueMap", "matrix", "xSizeRange", "ySizeRange", "xRoot", "xCellNum", "yCellNum", "yRoot", "yPaneArray", "xCellArray", "yCellArray", "xNodeArray", "yNodeArray", "dataTree", "flatData"]);
    return u
}, 651, 567, 652, 653, 656, 654, 571, 676);
I$(657, function(t, e, i) {
    function n(t) {
        var i, n = t.data.dataSets,
            u = t.data.orders,
            h = t.data.domains,
            f = t.cells,
            p = t.coords,
            _ = t.scales,
            m = e.getScaleOptionByCoordNameFac(p, _);
        i = s(n, f, p, u, h, m);
        var g = l(i, "radius"),
            v = l(i, "shape"),
            y = l(i, "y"),
            b = l(i, "x"),
            x = l(i, "group"),
            $ = l(i, "size"),
            w = l(i, "color"),
            k = o(y),
            S = o(b),
            C = r(k, "y"),
            T = r(S, "x"),
            E = o(g),
            I = o($),
            A = o(v),
            M = o(x),
            D = o(w),
            P = c(f, T, C, m),
            N = a(t, m),
            L = d(f, i, b, y, T, C, I, M, D, E, A, N);
        L.forbidCheckRange = P;
        return L
    }

    function r(t, i) {
        if(t) {
            for(var n, r = [], a = (t[0][0].length, t[0].length, 0); a < t.length; a++)
                for(var s = 0; s < t[a].length; s++) {
                    if("x" == i) n = s;
                    else n = a;
                    var o = t[a][s];
                    if(!r[n]) r[n] = [];
                    for(var l = 0; l < o.length; l++) {
                        var c = o[l];
                        if(!c) r[n][l] = null;
                        else {
                            if(!r[n][l]) r[n][l] = [];
                            r[n][l].push(c)
                        }
                    }
                }
            for(var u = [], d = 0; d < r.length; d++) {
                u[d] = [];
                for(var l = 0; l < r[d].length; l++) {
                    var h = r[d][l],
                        f = e.mergeDomainArray(h);
                    u[d][l] = f
                }
            }
            return u
        }
    }

    function a(t, i) {
        for(var n = t.cells, r = t.coords, a = {}, s = 0; s < n.length; s++)
            for(var o = 0; o < n[s].length; o++) {
                var l = n[s][o].marks;
                l.map(function(t, n) {
                    var s, o, l = t.coord,
                        c = e.getCoordByName(l, r).type;
                    if("cartesian" == c) {
                        var u = i(l, [0, 1]);
                        s = u[0] ? u[0].field : null;
                        o = u[1] ? u[1].field : null;
                        if(s && !a[s]) a[s] = u[0].domainIndependent;
                        if(o && !a[o]) a[o] = u[1].domainIndependent
                    }
                })
            }
        return a
    }

    function s(t, n, r, a, s, o) {
        for(var l = [], c = 0; c < t.length; c++) {
            l[c] = [];
            for(var u = 0; u < t[c].length; u++) {
                var d = [];
                l[c][u] = d;
                for(var p = (t[c][u], 0); p < n.length; p++) {
                    d[p] = [];
                    for(var _ = 0; _ < n[p].length; _++) {
                        var m = {};
                        d[p][_] = m;
                        var g = n[p][_].marks;
                        g.map(function(n, l) {
                            var d, p, _, g, v, y, b, x, $, w, k, S = t[c][u][n.from],
                                C = n.coord,
                                T = e.getCoordByName(C, r).type;
                            if("cartesian" == T) {
                                var E = o(C, [0, 1]);
                                d = E[0] ? E[0].field : null;
                                p = E[1] ? E[1].field : null;
                                _ = E[0] ? E[0].type : "constant";
                                g = E[1] ? E[1].type : "constant"
                            } else if("map" == T) {
                                longitude = n.longitude ? n.longitude : i.LONGITUDE;
                                latitude = n.latitude ? n.latitude : i.LATITUDE;
                                _ = "continuous";
                                g = "continuous"
                            }
                            b = n.size;
                            x = e.defaultFieldType(b, S);
                            $ = n.layout ? n.layout.parallel : null;
                            w = n.color;
                            k = e.defaultFieldType(w, S);
                            radiusField = n.radius;
                            radiusType = e.defaultFieldType(radiusField, S);
                            var I, A = n.shape,
                                M = e.defaultFieldType(A, S),
                                D = f(T, S, _, g, d, p, x, b, k, w, radiusType, radiusField, M, A),
                                P = D(n);
                            if(!m.size) m.size = [];
                            if(!m.radius) m.radius = [];
                            if(!m.shape) m.shape = [];
                            if(null != radiusField) {
                                I = P.radiusDomain;
                                m.radius[l] = {
                                    type: P.radiusScaleType,
                                    field: radiusField,
                                    value: I
                                }
                            }
                            if(A) {
                                I = P.shapeDomain;
                                m.shape[l] = {
                                    type: M,
                                    value: I,
                                    field: A
                                }
                            }
                            if("continuous" != _ && "continuous" != g || b) {
                                if(!b) b = i.doubleDiscreteDefaultSizeFieldName + l;
                                I = P.sizeDomain;
                                m.size[l] = {
                                    type: P.sizeScaleType,
                                    field: b,
                                    value: I,
                                    meta: P.meta
                                }
                            }
                            if(!m.color) m.color = [];
                            if(w) m.color[l] = {
                                type: k,
                                value: P.colorDomain,
                                field: w
                            };
                            if(!m.group && $) m.group = [];
                            if($) m.group[l] = {
                                type: "discrete",
                                field: $,
                                value: P.groupDomain
                            };
                            if(!m.x) m.x = [];
                            if(d && "map" != T) {
                                if(E[0] && a && "discrete" == _ && null != E[0].order) {
                                    v = a[c][u][E[0].order];
                                    I = h(P.xDomain, v)
                                } else if(E[0] && s && "continuous" == _ && "number" == typeof E[0].domain) I = s[c][u][E[0].domain];
                                else I = P.xDomain;
                                m.x[l] = {
                                    type: _,
                                    field: d,
                                    value: I
                                }
                            }
                            if(!m.y) m.y = [];
                            if(p && "map" != T) {
                                if(E[1] && a && "discrete" == g && null != E[1].order) {
                                    y = a[c][u][E[1].order];
                                    I = h(P.yDomain, y)
                                } else if(E[1] && s && "continuous" == g && "number" == typeof E[1].domain) I = s[c][u][E[1].domain];
                                else I = P.yDomain;
                                m.y[l] = {
                                    type: g,
                                    field: p,
                                    value: I
                                }
                            }
                        })
                    }
                }
            }
        }
        return l
    }

    function o(t) {
        if(t) {
            for(var i = [], n = 0; n < t.length; n++)
                for(var r = t[n], a = 0; a < r.length; a++) {
                    if(!i[a]) i[a] = [];
                    for(var s = 0; s < r[a].length; s++) {
                        var o = r[a][s];
                        if(!i[a][s]) i[a][s] = [];
                        for(var l = i[a][s], c = 0; c < o.length; c++) {
                            if(!l[c]) l[c] = [];
                            if(null != o[c]) l[c].push(o[c])
                        }
                    }
                }
            for(var u = [], n = 0; n < i.length; n++) {
                u[n] = [];
                for(var d = 0; d < i[n].length; d++) {
                    var l = [];
                    u[n][d] = l;
                    for(var o = i[n][d], c = 0; c < o.length; c++) {
                        var h = o[c],
                            f = e.mergeDomainArray(h);
                        l[c] = f
                    }
                }
            }
            return u
        }
    }

    function l(t, i) {
        var n, r = [];
        if(t[0][0][0][0][i]) {
            for(var a = 0; a < t.length; a++)
                for(var s = 0; s < t[a].length; s++) {
                    var o = t[a][s];
                    if("y" == i) n = a;
                    else n = s;
                    if(null == r[n]) r[n] = [];
                    for(var l = 0; l < o.length; l++)
                        for(var c = 0; c < o[l].length; c++) {
                            if(!r[n][l]) r[n][l] = [];
                            if(!r[n][l][c]) r[n][l][c] = [];
                            var u = r[n][l][c],
                                d = o[l][c],
                                h = d[i];
                            if(h)
                                for(var f = 0; f < h.length; f++) {
                                    if(null == u[f]) u[f] = [];
                                    if(null != h[f]) u[f].push(h[f])
                                }
                        }
                }
            for(var p = [], a = 0; a < r.length; a++) {
                var o = r[a];
                p[a] = [];
                for(var l = 0; l < o.length; l++) {
                    p[a][l] = [];
                    for(var c = 0; c < o[l].length; c++) {
                        var _ = [];
                        p[a][l][c] = _;
                        for(var d = o[l][c], f = 0; f < d.length; f++) {
                            var m = d[f],
                                g = e.mergeDomainArray(m);
                            _[f] = g
                        }
                    }
                }
            }
            return p
        }
    }

    function c(i, n, r, a) {
        for(var s, o = 0; o < i.length; o++)
            for(var l = 0; l < i[o].length; l++) {
                var c = i[o][l].marks;
                c.map(function(i, c) {
                    var u = i.coord,
                        d = a(u, [0, 1]),
                        h = d[0] ? d[0].type : "constant",
                        f = d[1] ? d[1].type : "constant";
                    if("continuous" == h && d[0] && d[0].domain) {
                        var p, _ = d[0].domain,
                            m = n[l][c].value,
                            g = typeof _;
                        if("function" == g || "string" == g) {
                            var v = e.transformToFunction(_);
                            p = v(m);
                            n[l][c].value = p
                        } else {
                            var y = t.isNumber(_[0]) ? _[0] : m[0],
                                b = t.isNumber(_[1]) ? _[1] : m[1];
                            if(y > b)
                                if(t.isNumber(_[0]))
                                    if(_[0] > 0) b = 2 * y;
                                    else b = y / 2;
                                else if(t.isNumber(_[1]))
                                    if(_[1] > 0) y = b / 2;
                                    else y = 2 * b;
                            p = [y, b];
                            n[l][c].value = p
                        }
                        if(p[0] > m[0] || p[1] < m[1]) s = !0
                    }
                    if("continuous" == f && d[1] && d[1].domain) {
                        var x, $ = d[1].domain,
                            m = r[o][c].value,
                            w = typeof $;
                        if("function" == w || "string" == w) {
                            var v = e.transformToFunction($);
                            x = v(m);
                            r[o][c].value = x
                        } else {
                            var y = t.isNumber($[0]) ? $[0] : m[0],
                                b = t.isNumber($[1]) ? $[1] : m[1];
                            if(y > b)
                                if(t.isNumber($[0]))
                                    if($[0] > 0) b = 2 * y;
                                    else b = y / 2;
                                else if(t.isNumber($[1]))
                                    if($[1] > 0) y = b / 2;
                                    else y = 2 * b;
                            x = [y, b];
                            r[o][c].value = x
                        }
                        if(x[0] > m[0] || x[1] < m[1]) s = !0
                    }
                })
            }
        return s
    }

    function u(t, e) {
        for(var i = [], n = 0; n < t.length; n++) {
            i[n] = [];
            for(var r = 0; r < t[n].length; r++) {
                i[n][r] = [];
                t[n][r].marks.map(function(t, a) {
                    i[n][r][a] = e
                })
            }
        }
        return i
    }

    function d(t, e, i, n, r, a, s, o, l, c, d, h) {
        var f = [];
        if(o) f.groupGlobalDomains = o;
        else f.groupGlobalDomains = u(t, {
            type: "discrete",
            field: null,
            value: ["undefined"]
        });
        if(s) f.sizeGlobalDomains = s;
        else f.sizeGlobalDomains = u(t, {
            type: "discrete",
            field: null,
            value: ["undefined"]
        });
        if(c) f.radiusGlobalDomains = c;
        else f.radiusGlobalDomains = {
            type: "discrete",
            field: null,
            value: ["undefined"]
        };
        if(l) f.colorGlobalDomains = l;
        else f.colorGlobalDomains = u(t, {
            type: "discrete",
            field: null,
            value: ["undefined"]
        });
        if(d) f.shapeGlobalDomains = d;
        else f.shapeGlobalDomains = u(t, {
            type: "discrete",
            field: null,
            value: ["undefined"]
        });
        for(var p = 0; p < e.length; p++) {
            f[p] = [];
            for(var _ = 0; _ < e[p].length; _++) {
                var m = [];
                f[p][_] = m;
                for(var g = e[p][_], v = 0; v < g.length; v++) {
                    m[v] = [];
                    for(var y = 0; y < g[v].length; y++) {
                        var b = {};
                        m[v][y] = b;
                        var x = _,
                            $ = p,
                            w = g[v][y];
                        b.x = [];
                        if(w.x)
                            for(var k = 0; k < w.x.length; k++) {
                                var S = w.x[k].type;
                                if("continuous" == S && !h[w.x[k].field]) b.x.push(r[y][k]);
                                else b.x.push(i[x][v][y][k])
                            }
                        b.y = [];
                        if(w.y)
                            for(var k = 0; k < w.y.length; k++) {
                                var S = w.y[k].type;
                                if("continuous" == S && !h[w.y[k].field]) b.y.push(a[v][k]);
                                else b.y.push(n[$][v][y][k])
                            }
                        b.size = [];
                        if(w.size)
                            for(var k = 0; k < w.size.length; k++) b.size.push(s[v][y][k]);
                        b.radius = [];
                        if(w.radius)
                            for(var k = 0; k < w.radius.length; k++) b.radius.push(c[v][y][k]);
                        b.shape = [];
                        if(w.shape)
                            for(var k = 0; k < w.shape.length; k++) b.shape.push(d[v][y][k])
                    }
                }
            }
        }
        return f
    }

    function h(t, e) {
        return e
    }

    function f(i, n, r, a, s, o, l, c, u, d, h, f, y, b) {
        return function(x) {
            var w, k, S, C, T, E, I, A, M;
            if("map" != i)
                if(("discrete" == r || "constant" == r) && "continuous" == a) {
                    S = $(s, n);
                    C = v(n, x, s, o)
                } else if("continuous" == r && ("discrete" == a || "constant" == a)) {
                    C = $(o, n);
                    S = v(n, x, o, s)
                } else if(!("discrete" != r && "constant" != r || "discrete" != a && "constant" != a)) {
                    S = $(s, n);
                    C = $(o, n)
                } else if("continuous" == r && "continuous" == r) {
                    C = v(n, x, s, o);
                    S = v(n, x, o, s)
                }
            if("continuous" != r && "continuous" != a) {
                if("bar" == x.type) T = p(n, x, s, o, c, l);
                else if("scatter" == x.type || "text" == x.type || "line" == x.type || "area" == x.type || "gradientLine" == x.type) {
                    var D = g(n, x, s, o, c, l);
                    T = D.domain;
                    w = {
                        maxCount: D.maxCount
                    }
                }
                I = "continuous"
            } else if("continuous" == l) {
                var P = e.calculateContinuousDomain(c, n),
                    N = P[0] > 0 ? 0 : P[0];
                T = [N, P[1]];
                I = "continuous"
            } else if("discrete" == l) {
                T = e.calculateDiscreteDomain(c, n);
                I = "discrete"
            }
            if("pie" == x.type) {
                A = _(n, s, o, f, h);
                M = h;
                if("continuous" == l) {
                    var P = e.calculateContinuousDomain(c, n);
                    T = [0, P[1]];
                    I = "continuous"
                } else if("discrete" == l) {
                    T = e.calculateDiscreteDomain(c, n);
                    I = "discrete"
                }
            }
            if("scatter" == x.type) var L = m(n, s, o, b, y);
            var R = x.layout && x.layout.parallel;
            if(R) {
                var D = t.map(n, function(t) {
                    return t[R]
                });
                E = t.uniq(D)
            }
            if(d)
                if("continuous" == u) k = e.calculateContinuousDomain(d, n);
                else if("discrete" == u) k = e.calculateDiscreteDomain(d, n);
                else k = [];
            return {
                xDomain: S,
                yDomain: C,
                sizeDomain: T,
                sizeScaleType: I,
                radiusDomain: A,
                radiusScaleType: M,
                groupDomain: E,
                colorDomain: k,
                shapeDomain: L,
                meta: w
            }
        }
    }

    function p(e, i, n, r, a, s) {
        var o = t.groupBy(e, function(t) {
                return t[n] + ":" + t[r]
            }),
            l = i.layout,
            c = l ? l.parallel : null,
            u = l ? l.stack : null,
            d = a,
            h = null != u && ("bar" == i.type || "area" == i.type),
            f = 1 / 0,
            p = -(1 / 0),
            _ = 0;
        for(var m in o) {
            var g = o[m],
                v = t.groupBy(g, function(t) {
                    return t[c]
                });
            for(var b in v) {
                var x = v[b];
                if("continuous" == s) {
                    var $ = y(h, x, d, f, p);
                    f = $[0];
                    p = $[1]
                } else if(!h) _ = 1;
                else _ = _ < x.length ? x.length : _
            }
        }
        var w;
        if("continuous" == s) w = [f, p];
        else w = [0, _];
        return w
    }

    function _(e, i, n, r, a) {
        var s = t.groupBy(e, function(t) {
                return t[i] + ":" + t[n]
            }),
            o = 1 / 0,
            l = -(1 / 0),
            c = 0;
        for(var u in s) {
            var d = s[u];
            f = 0;
            c = 0;
            for(var h = 0; h < d.length; h++) {
                var f = null == d[h][r] ? 1 : Number(d[h][r]);
                c += f
            }
            o = Math.min(o, c);
            l = Math.max(l, c)
        }
        o = o > 0 ? 0 : o;
        return [o, l]
    }

    function m(t, e, i, n, r) {
        if("discrete" != r) return [];
        for(var a, s = {}, o = new Array, l = 0; l < t.length; ++l) {
            a = t[l];
            if(null != a[n] && null == s[a[n]]) {
                o.push(a[n]);
                s[a[n]] = 1
            } else;
        }
        return o
    }

    function g(e, i, n, r, a, s) {
        var o = t.groupBy(e, function(t) {
                return t[n] + ":" + t[r]
            }),
            l = 1 / 0,
            c = -(1 / 0),
            u = -(1 / 0);
        for(var d in o) {
            var h = o[d];
            u = u < h.length ? h.length : u;
            for(var f = 0, p = 0; f < h.length; f++) {
                var p = void 0 === h[f][a] ? 1 : h[f][a] + 0;
                l = l > p ? p : l;
                c = c < p ? p : c
            }
        }
        l = l > 0 ? 0 : l;
        return {
            domain: [l, c],
            maxCount: u
        }
    }

    function v(e, i, n, r) {
        var a = i.layout,
            s = a ? a.parallel : null,
            o = a ? a.stack : null,
            l = (a && a.stackField ? a.stackField : r, null != o && ("bar" == i.type || "area" == i.type)),
            c = t.groupBy(e, function(t) {
                return t[n]
            }),
            u = 1 / 0,
            d = -(1 / 0);
        for(var h in c) {
            var f = c[h],
                p = t.groupBy(f, function(t) {
                    return t[s]
                });
            for(var _ in p) {
                var m = p[_];
                m = t.sortBy(m, function(t) {
                    return t[o]
                });
                var g = y(l, m, r, u, d);
                u = g[0];
                d = g[1]
            }
        }
        return [u, d]
    }

    function y(t, e, i, n, r) {
        var a = 0,
            s = 0;
        if(t)
            for(var o = 0; o < e.length; o++)
                if(e[o][i] > 0) a += e[o][i];
                else s += e[o][i];
        else
            for(var o = 0; o < e.length; o++) {
                a = e[o][i] > a ? e[o][i] : a;
                s = e[o][i] < s ? e[o][i] : s
            }
        r = r < a ? a : r;
        n = n > s ? s : n;
        return [n, r]
    }

    function b(t) {
        var e = 1 / 0,
            i = -(1 / 0);
        t.map(function(t) {
            e = e > t[0] ? t[0] : e;
            i = i < t[1] ? t[1] : i
        });
        return [e, i]
    }

    function x(e) {
        var i = {};
        e.map(function(t) {
            t.map(function(t) {
                if(void 0 === i[t]) i[t] = !0
            })
        });
        var n = t.keys(i);
        return n
    }
    var $ = e.calculateDiscreteDomain;
    return {
        calculatePosScaleDomainPerRowCol: n,
        mergeNumberInterval: b,
        mergeOrdinalDomain: x
    }
}, 656, 654, 675);
I$(568, function(t, e, i, n, r, a, s, o, l) {
    function c(t) {
        for(var e = t.xScaleType(), i = t.yScaleType(), n = t.xCellArray(), r = t.yCellArray(), a = [], s = [], o = [], l = {}, c = {}, u = 0 == n.length ? 1 : n.length, d = 0 == r.length ? 1 : r.length, h = [], f = 0; f < d; f++) {
            var p = [];
            h[f] = p;
            for(var _ = 0; _ < u; _++) {
                var m = {};
                h[f][_] = m;
                var g = n[_];
                if(g) {
                    l = {
                        name: "xCell_" + g + "_" + _,
                        field: g,
                        type: e[_]
                    };
                    a.push(l);
                    m.x = a.length - 1
                }
                var g = r[f];
                if(g) {
                    c = {
                        name: "yCell_" + g + "_" + f,
                        field: g,
                        type: i[f]
                    };
                    o.push(c);
                    m.y = o.length - 1
                }
                var v = {},
                    y = "coord" + f + "_" + _ + "_No.0",
                    b = "cartesian",
                    x = [l.name, c.name];
                v.name = y;
                v.type = b;
                v.dims = x;
                s.push(v)
            }
        }
        return {
            xScales: a,
            yScales: o,
            coords: s,
            scaleIndexMatrix: h
        }
    }

    function u(t, e) {
        for(var i = {}, n = {}, a = [], s = [], o = r.getScaleOptionByCoordNameFac(t, e), l = 0; l < t.length; l++) {
            var c, u, d = t[l].dims,
                h = d[0],
                f = d[1];
            if(!i[h]) c = 1;
            else c = 0;
            if(!n[f]) u = 1;
            else u = 0;
            if(c && null != h) {
                var p = o(l, 0),
                    _ = {
                        coord: t[l].name,
                        dim: 0,
                        orient: 1 - u,
                        caption: p.field
                    };
                a.push(_)
            }
            if(u && null != f) {
                var m = o(l, 1),
                    g = {
                        coord: t[l].name,
                        dim: 1,
                        orient: 1 - c,
                        caption: m.field
                    };
                s.push(g)
            }
        }
        return {
            xAxises: a,
            yAxises: s
        }
    }

    function d(t) {
        var e = t.matrix(),
            i = p(e),
            n = t.getColsTree(),
            r = t.getRowsTree(),
            a = {
                $type: "pivot",
                cols: t.yCellNum(),
                rows: t.xCellNum(),
                colTitleTree: n,
                rowTitleTree: r,
                dataSets: i
            };
        return a
    }

    function h(t, e, i) {
        for(var n = 0; n < i.length; n++) {
            var r = i[n].dims;
            if(r[0] == t && r[1] == e) return i[n]
        }
        throw "未找到匹配坐标系"
    }
    var f = {};
    f.convertUserOptionToUDData = function(t) {
        var e = (t.xCell, t.yCell, t.cells),
            i = a.create(t),
            n = {
                x: 0,
                y: 0,
                width: t.area.width,
                height: t.area.height
            },
            r = c(i),
            s = r.coords,
            o = r.xScales.concat(r.yScales),
            l = d(i);
        l.xGrid = !!t.xGrid;
        l.yGrid = !!t.yGrid;
        l.isCommonAxis = !!t.isCommonAxis;
        var u = _(i, r, e, o),
            h = Object.create(t);
        h.area = n;
        h.data = l;
        h.forbidScrollBar = !!t.forbidScrollBar;
        h.scales = o;
        h.coords = s;
        h.cells = u;
        return h
    };
    var p = function(t) {
            for(var e = [], i = 0; i < t.length; i++) {
                e[i] = [];
                for(var n = 0; n < t[i].length; n++) e[i][n] = [t[i][n].data]
            }
            return e
        },
        _ = function(t, e, i, n) {
            for(var r, a, s = [], o = e.coords, l = t.xCellArray(), c = t.yCellArray(), d = 0 == l.length ? 1 : l.length, f = 0 == c.length ? 1 : c.length, p = e.scaleIndexMatrix, _ = 0; _ < f; _++) {
                s[_] = [];
                for(var m = 0; m < d; m++) {
                    var g = [],
                        v = [],
                        y = p[_][m].x,
                        b = p[_][m].y;
                    if(null != y) r = e.xScales[y].name;
                    if(null != b) a = e.yScales[b].name;
                    var x = h(r, a, o);
                    v.push(x);
                    for(var $ = i(m, _).marks, w = 0; w < $.length; w++) {
                        var k = $[w],
                            S = {
                                from: 0,
                                type: k.type,
                                coord: x.name
                            };
                        if(null != k.colorBy) S.colorBy = k.colorBy;
                        S.color = k.color;
                        if(k.layout) S.layout = k.layout;
                        if(k.size) S.size = k.size;
                        if(k.angle) S.angle = k.angle;
                        if(k.radius) S.radius = k.radius;
                        if(k.text) S.text = k.text;
                        if(k.group) S.group = k.group;
                        if(k.smooth) S.smooth = !!k.smooth;
                        if(k.gradient) S.gradient = !!k.gradient;
                        if(k.hiddenMark) S.hiddenMark = !!k.hiddenMark;
                        if(k.shape) S.shape = k.shape;
                        if(k.className) S.className = k.className;
                        g.push(S)
                    }
                    var C = u(v, n),
                        T = C.xAxises.concat(C.yAxises),
                        E = {
                            axes: T,
                            marks: g
                        };
                    s[_][m] = E
                }
            }
            return s
        };
    return f
}, 651, 567, 652, 653, 654, 655, 656, 657, 571);
I$(737, function() {
    function t(t) {
        if("continuous" == t) return function(t) {
            return t
        };
        else return function(t) {
            return 1
        }
    }

    function e(e, i, n) {
        var r = t(n);
        return function(t) {
            var n = 0,
                a = 0,
                s = 0,
                o = 0;
            if(e)
                for(var l = 0, c = 0, u = t.map(function(t) {
                    c = r(t[i]);
                    l += c;
                    return c
                }), d = 0; d < u.length; d++) {
                    var c = u[d];
                    if(c > 0) {
                        t[d].layout_start = a;
                        o += c;
                        t[d].layout_end = o;
                        t[d].__percent = c / l;
                        a = o
                    } else {
                        t[d].layout_start = n;
                        s += c;
                        t[d].layout_end = s;
                        t[d].__percent = c / l;
                        n = s
                    }
                } else
                for(var d = 0; d < t.length; d++) {
                    t[d].layout_start = 0;
                    t[d].layout_end = r(t[d][i])
                }
        }
    }

    function i(t, i, n, r, a, s, o) {
        var l = e(i, n, r);
        data1 = _.groupBy(t, a);
        for(var c in data1) {
            var u = data1[c],
                d = _.groupBy(u, s),
                h = _.keys(d);
            h.sort();
            for(var f = 0; f < h.length; f++) {
                var p = h[f],
                    m = d[p];
                m = _.sortBy(m, o);
                l(m)
            }
        }
    }
    var n = {};
    n.stack = i;
    return n
});
I$(663, function(t, e, i) {
    function n(t, n, r) {
        var a, s, o, l, c, u, d = t.layout,
            h = t.data;
        if("vert" == t.direction) {
            a = t.xField;
            s = t.yField;
            o = t.xScale;
            l = t.yScale;
            u = n.width
        } else {
            a = t.yField;
            s = t.xField;
            o = t.yScale;
            l = t.xScale;
            u = n.height
        }
        var f = s;
        c = l.type();
        var p = d ? d.parallel ? d.parallel : null : null,
            _ = d ? d.stack ? d.stack : null : null,
            m = d ? d.stackOrder ? d.stackOrder : null : null,
            g = !1;
        if("continuous" != o.type() && "continuous" != l.type()) {
            s = t.sizeField ? t.sizeField : null;
            c = s && e.defaultFieldType(s, h);
            g = !0
        }
        var v = null != _,
            y = g ? function(t) {
                return t[a] + ":" + t[f]
            } : function(t) {
                return t[a]
            },
            b = function(t) {
                return t[p]
            };
        if(m) {
            var x = {};
            m.map(function(t, e) {
                x[t] = e
            })
        }
        var $ = x ? function(t) {
            return x[t[_]]
        } : function(t) {
            return t[_]
        };
        i.stack(h, v, s, c, y, b, $);
        t.baseScale = o;
        t.groupField = p;
        t.innerPadding = r.mark.innerPadding;
        t.outerPadding = r.mark.outerPadding;
        t.autoHidden = r.label.autoHidden;
        return t
    }
    return n
}, 656, 654, 737);
I$(669, function(t, e, i) {
    function n(e, i, n, r) {
        var a;
        if("x" == i) a = t.max(e, function(t) {
            return n.exec(t[r] + 0) + t.__layoutBBox.width / 2
        });
        else a = t.max(e, function(t) {
            return n.exec(t[r] + 0) + t.__layoutBBox.height / 2
        });
        return a
    }

    function r(e, i, n, r) {
        var a;
        if("x" == i) a = t.min(e, function(t) {
            return n.exec(t[r]) - t.__layoutBBox.width / 2
        });
        else a = t.min(e, function(t) {
            return n.exec(t[r]) - t.__layoutBBox.height / 2
        });
        return a
    }

    function a(t, e, i) {
        function a() {
            u = n(b, i, f, $);
            d = f.exec(u[$]) + ("x" == i ? u.__layoutBBox.width / 2 : u.__layoutBBox.height / 2) + p;
            if(d > w) {
                T = d - w;
                if(w - T - C > w / 2) {
                    S = w - T;
                    o(f, i, C, S);
                    u = n(b, i, f, $);
                    d = f.exec(u[$]) + ("x" == i ? u.__layoutBBox.width / 2 : u.__layoutBBox.height / 2) + p;
                    for(; d > w;) {
                        T += h;
                        if(w - T - C <= w / 2) {
                            E = !0;
                            return
                        }
                        S = w - T;
                        o(f, i, C, S);
                        u = n(b, i, f, $);
                        d = f.exec(u[$]) + ("x" == i ? u.__layoutBBox.width / 2 : u.__layoutBBox.height / 2) + p
                    }
                } else E = !0
            }
        }

        function s() {
            c = r(b, i, f, $);
            _ = f.exec(c[$]) - ("x" == i ? c.__layoutBBox.width / 2 : c.__layoutBBox.height / 2) - p;
            if(_ < 0) {
                T = -_;
                if(S - T > w / 2) {
                    C = T;
                    o(f, i, C, S);
                    c = r(b, i, f, $);
                    _ = f.exec(c[$]) - ("x" == i ? c.__layoutBBox.width / 2 : c.__layoutBBox.height / 2) - p;
                    for(; _ < 0;) {
                        T += h;
                        if(S - T <= w / 2) {
                            E = !0;
                            return
                        }
                        C = T;
                        o(f, i, C, S);
                        c = r(b, i, f, $);
                        _ = f.exec(c[$]) - ("x" == i ? c.__layoutBBox.width / 2 : c.__layoutBBox.height / 2) - p
                    }
                } else E = !0
            }
        }

        function l() {
            if(E) return !0;
            u = n(b, i, f, $);
            d = f.exec(u[$]) + ("x" == i ? u.__layoutBBox.width / 2 : u.__layoutBBox.height / 2) + p;
            c = r(b, i, f, $);
            _ = f.exec(c[$]) - ("x" == i ? c.__layoutBBox.width / 2 : c.__layoutBBox.height / 2) - p;
            return d > w || _ < 0 ? !1 : !0
        }
        var c, u, d, _, m = t.xScale,
            g = t.yScale,
            v = t.xField,
            y = t.yField,
            b = t.validData ? t.validData : t.data,
            x = "x" == i ? m : g,
            $ = "x" == i ? v : y,
            w = "x" == i ? e.width : e.height;
        f.domain(x.domain()).range(x.range());
        f.ticksCount(x.ticksCount());
        for(var k = x.range(), S = "x" == i ? k[1] : k[0], C = "x" == i ? k[0] : k[1], T = 0, E = !1; !l();) {
            a();
            s()
        }
        k = f.range();
        if("x" == i) return {
            left: k[0],
            right: k[1]
        };
        else return {
            top: k[1],
            bottom: k[0]
        }
    }

    function s(e, i, n, r) {
        var s = e.xScale,
            o = e.yScale,
            c = e.validData ? e.validData : e.data,
            u = r ? e.radiusScale : e.sizeScale,
            d = e.xField,
            h = e.yField,
            p = r ? e.radiusField : e.sizeField,
            _ = "x" == n ? s : o,
            m = "x" == n ? d : h;
        if(0 == c.length) {
            var g = _.range();
            return "x" == n ? {
                left: g[0],
                right: g[1]
            } : {
                top: g[1],
                bottom: g[0]
            }
        }
        if(!r) return a(e, i, n);
        f.domain(_.domain()).range(_.range());
        f.ticksCount(_.ticksCount());
        var v = "x" == n ? i.width : i.height,
            y = t.groupBy(c, function(t) {
                return t[d] + ":" + t[h]
            }),
            b = [];
        for(var x in y) {
            for(var $ = y[x], w = {}, k = 0, S = 0; S < $.length; S++) {
                w[d] = $[S][d];
                w[h] = $[S][h];
                k += $[S][p]
            }
            w[p] = k;
            b.push(w)
        }
        var g = l(f, m, p, u, b, v, n);
        if("x" == n) return {
            left: g[0],
            right: g[1]
        };
        else return {
            top: g[1],
            bottom: g[0]
        }
    }

    function o(t, e, i, n) {
        "x" == e ? t.range([i, n]) : t.range([n, i])
    }

    function l(e, i, n, r, a, s, l) {
        function c(t) {
            $ = e.exec(m);
            if(t + $ + p > s) {
                S = t + $ + p - s;
                if(s - S - b > s / 2) {
                    y = s - S;
                    o(e, l, b, y);
                    $ = e.exec(m);
                    for(; t + $ + p > s;) {
                        S += h;
                        if(s - S - b <= s / 2) {
                            C = !0;
                            return
                        }
                        y = s - S;
                        o(e, l, b, y);
                        $ = e.exec(m)
                    }
                } else C = !0
            }
        }

        function u(t) {
            x = e.exec(g);
            if(x - t - p < 0) {
                S = -(x - t - p);
                if(y - S > s / 2) {
                    b = S;
                    o(e, l, b, y);
                    x = e.exec(g);
                    for(; x - t - p < 0;) {
                        S += h;
                        if(y - S <= s / 2) {
                            C = !0;
                            return
                        }
                        b = S;
                        o(e, l, b, y);
                        x = e.exec(g)
                    }
                } else C = !0
            }
        }

        function d() {
            if(C) return !0;
            $ = e.exec(m);
            x = e.exec(g);
            if(k + $ + p > s || x - w - p < 0) return !1;
            else return !0
        }
        for(var f = t.max(a, function(t) {
            return e.exec(t[i]) + r.exec(t[n])
        }), _ = t.min(a, function(t) {
            return e.exec(t[i]) - r.exec(t[n])
        }), m = f[i], g = _[i], v = e.range(), y = "x" == l ? v[1] : v[0], b = "x" == l ? v[0] : v[1], x = e.exec(g), $ = e.exec(m), w = r.exec(_[n]), k = r.exec(f[n]), S = 0, C = !1; !d();) {
            c(k);
            u(w)
        }
        return e.range()
    }

    function c(t) {
        for(var e = [], i = 0; i < t.length; ++i) {
            e.push([]);
            for(var n = 0; n < t[i].length; ++n) {
                e[i].push([]);
                for(var r = t[i][n], a = 0; a < r.length; ++a) {
                    e[i][n].push([]);
                    for(var s = 0; s < r[a].length; ++s) {
                        e[i][n][a].push([]);
                        updateRangeSet = {};
                        for(var o = r[a][s].marks, l = 0; l < o.length; ++l) {
                            var c = o[l];
                            if(c.data.length && ("pie" == c.type || "scatter" == c.type || "text" == c.type || "line" == c.type || "gradientLine" == c.type)) {
                                var u = c.updateRange;
                                if(null != u.top) {
                                    updateRangeSet.top = null == updateRangeSet.top ? u.top : Math.max(u.top, updateRangeSet.top);
                                    updateRangeSet.bottom = null == updateRangeSet.bottom ? u.bottom : Math.min(u.bottom, updateRangeSet.bottom)
                                }
                                if(null != u.left) {
                                    updateRangeSet.left = null == updateRangeSet.left ? u.left : Math.max(u.left, updateRangeSet.left);
                                    updateRangeSet.right = null == updateRangeSet.right ? u.right : Math.min(u.right, updateRangeSet.right)
                                }
                            }
                            e[i][n][a][s] = updateRangeSet
                        }
                    }
                }
            }
        }
        return e
    }

    function u(t) {
        if("cartesian" == t.chartType) {
            var i = t.marksInfoMatrix,
                n = t.pivotAxis.commonAxisInfos,
                r = c(i),
                a = e.transveralRowfirst(r, function(t) {
                    return t
                }),
                s = e.transveralColfirst(r, function(t) {
                    return t
                }),
                o = s.map(function(t) {
                    return d(t)
                }),
                l = d(o),
                u = a.map(function(t) {
                    return d(t)
                }),
                h = d(u),
                f = e.transveralRowfirst(i, function(t) {
                    return t
                }),
                p = e.transveralColfirst(i, function(t) {
                    return t
                });
            if(h && null != h.top && null != h.bottom) {
                var _ = [h.bottom, h.top];
                f.map(function(t, e) {
                    t.map(function(t) {
                        var e = t.axis;
                        e.map(function(t) {
                            if(!t.isXAxis) {
                                t.scaleRange = _;
                                t.scale.range(_)
                            }
                        })
                    })
                });
                for(var m in n) {
                    var g = n[m];
                    if("bottom" != m && "top" != m) g.infos && g.infos.map(function(t) {
                        t.axisInfo.scaleRange = _;
                        t.axisInfo.scale.range(_)
                    });
                    else;
                }
            }
            if(l && null != l.left && null != l.right) {
                var _ = [l.left, l.right];
                p.map(function(t, e) {
                    t.map(function(t) {
                        var e = t.axis;
                        e.map(function(t) {
                            if(t.isXAxis) {
                                t.scaleRange = _;
                                t.scale.range(_)
                            }
                        })
                    })
                });
                for(var m in n) {
                    var g = n[m];
                    if("left" != m && "right" != m) g.infos && g.infos.map(function(t) {
                        t.axisInfo.scaleRange = _;
                        t.axisInfo.scale.range(_)
                    });
                    else;
                }
            }
        }
    }

    function d(e) {
        var i = -(1 / 0),
            n = 1 / 0,
            r = -(1 / 0),
            a = 1 / 0;
        e.map(function(t) {
            if(t) {
                if(null != t.top) i = i < t.top ? t.top : i;
                if(null != t.bottom) n = n > t.bottom ? t.bottom : n;
                if(null != t.left) r = r < t.left ? t.left : r;
                if(null != t.right) a = a > t.right ? t.right : a
            }
        });
        return {
            bottom: t.isFinite(n) ? n : void 0,
            top: t.isFinite(i) ? i : void 0,
            left: t.isFinite(r) ? r : void 0,
            right: t.isFinite(a) ? a : void 0
        }
    }
    var h = 3,
        f = (e.escapeNull, i.create()),
        p = 3;
    return {
        adjustRange: s,
        updateCellScaleRange: u
    }
}, 656, 654, 662);
I$(857, function() {
    var t;
    t = function(e, i) {
        var n, r, a, s, o, l, c, u, d, h, f, p;
        try {
            if("number" == typeof e && "number" == typeof i) s = [e, i], n = s[0], r = s[1];
            else if(null == i) n = e.x, r = e.y;
            else {
                o = [e, i], l = o[0], d = l.x, f = l.y, c = o[1], h = c.x, p = c.y;
                u = [h - d, p - f], n = u[0], r = u[1]
            }
            if("number" != typeof n || "number" != typeof r || isNaN(n) || isNaN(r)) throw "Coordinate Error"
        } catch(t) {
            a = t;
            console.error({
                a: e,
                b: i,
                err: a
            });
            throw Error("invalid vector: (" + e + ", " + i + ")")
        }
        return {
            x: n,
            y: r,
            add: function(e) {
                var i, a, s;
                i = t(e), a = i.x, s = i.y;
                return t(n + a, r + s)
            },
            sub: function(e) {
                var i, a, s;
                i = t(e), a = i.x, s = i.y;
                return t(n - a, r - s)
            },
            mul: function(e) {
                return t(n * e, r * e)
            },
            raw: function() {
                return {
                    x: n,
                    y: r
                }
            },
            toPolar: function() {
                var t, e;
                e = Math.sqrt(n * n + r * r);
                if(e < 1e-8) return {
                    rho: 0,
                    theta: NaN
                };
                else {
                    t = Math.acos(-r / e);
                    return {
                        rho: e,
                        theta: n >= 0 ? t : 2 * Math.PI - t
                    }
                }
            }
        }
    };
    t.rotate = function(e) {
        var i, n;
        i = e.x, n = e.y;
        return t(-n, i)
    };
    t.fromPolar = function(e) {
        var i, n;
        n = e.theta, i = e.rho;
        if(i < 1e-8) return t(0, 0);
        else return t(i * Math.sin(n), -i * Math.cos(n))
    };
    return t
});
I$(858, function() {
    var t;
    t = function(t, e, i) {
        var n, r, a, s, o, l;
        a = e[0], s = e[1];
        n = function(e, r, a, s) {
            var o, l;
            if(Math.abs(e - r) < i) return e;
            else {
                o = (e + r) / 2;
                l = t(o);
                if(l !== a) return n(e, o, a, l);
                else return n(o, r, l, s)
            }
        };
        r = [t(a), t(s)], o = r[0], l = r[1];
        if("boolean" != typeof o || "boolean" != typeof l || o === l) return "error";
        else return n(a, s, o, l)
    };
    return t
});
I$(820, function(t, e) {
    var i;
    i = function(i, n, r, a) {
        var s, o, l, c, u, d, h, f, p, _, m, g, v, y;
        u = r[0], c = r[1];
        y = i.width, l = i.height;
        o = function(t) {
            var e, i, r;
            i = n(t), r = i.width, e = i.height;
            return r < y && e < l
        };
        p = e(o, [u, c], a);
        if("error" == p) {
            var b = Math.min(i.width / 2, i.height / 2);
            return [b, {
                x: i.height / 2,
                y: i.width / 2
            }, i, "error"]
        }
        s = n(p);
        h = t(y / 2, l / 2).add(t(-s.width / 2, -s.height / 2));
        f = h.add(t(-(null != (_ = s.x) ? _ : s.left), -(null != (m = s.y) ? m : s.top)));
        d = f.add(t(null != (g = i.x) ? g : i.left, null != (v = i.y) ? v : i.top));
        return [p, d, s]
    };
    return i
}, 857, 858);
I$(738, function(t, e, i, n) {
    function r(e, i, n, r, a) {
        f = r && r.mark && r.mark.angleRange || [-90, 270];
        p = r && r.label && r.label.leadLength || 30;
        var o, l = (r.label, e.layout),
            d = e.data,
            h = (e.radiusField, e.radiusScale, e.sizeField, e.angle),
            _ = e.text,
            n = n || "inner",
            m = l && l.stack ? l.stack : null;
        o = null != m;
        var g = t.groupBy(d, function(t, e) {
            return t[m]
        });
        g = t.values(g);
        if(!(g.length < 1)) {
            s(g, _, h, n, a);
            u = c(i);
            if("error" == u[3]) {
                u[0] = 0;
                u[1].x = i.width / 2;
                u[2].y = i.width / 2
            }
            var v = (g.length, u[0] * $, {
                    x: u[1].x,
                    y: u[1].y
                }),
                y = u[0];
            return {
                r: y,
                center: v
            }
        }
    }

    function a(t) {
        for(var e = new Array, i = 0, n = 0; n < t.length; ++n) i += t[n];
        for(var n = 0; n < t.length; n++)
            if(0 != i) e.push(t[n] / i);
            else e.push(0);
        return e
    }

    function s(e, i, r, s, o) {
        var l = new Array,
            c = e[e.length - 1],
            u = _.create({}),
            g = m.select(u);
        n.buildForCalLayoutInfo(g, c, i);
        var x = v("annotation").apply(g);
        if(0 != x.size() && null != i) {
            var $ = t.map(c, function(t) {
                    if(null == r || "number" != typeof t[r]) return 1;
                    else return t[r]
                }),
                w = t.map(c, function(t) {
                    return i(t)
                }),
                k = a($);
            d = p / 4, h = 3 * p / 4;
            for(var S, C, T = f[0], E = f[1] - f[0], I = (Math.max.apply(null, $), 0); I < $.length; ++I) {
                S = T + E * k[I];
                C = (T + S) / 2;
                l.push({
                    startAngleDegree: f[0],
                    endAngleDegree: f[1],
                    startAngle: T / 180 * Math.PI,
                    sAngle: T,
                    endAngle: S / 180 * Math.PI,
                    eAngle: S,
                    averageAngle: C / 180 * Math.PI,
                    avAngle: C,
                    value: $[I],
                    annotation: w[I],
                    annotationLead: p,
                    position: s,
                    index: I,
                    apply: !0,
                    showOrNot: o[c[I].dimensionId],
                    dimensionId: c[I].dimensionId
                });
                T = S
            }
            x.each(function(t, e) {
                t.settexts(l[e].annotation);
                l[e].textInfo = {
                    width: t.width(),
                    height: t.height()
                };
                b = t.height()
            });
            y = l
        } else {
            for(var I = 0; I < c.length; I++) {
                l.push({});
                l[I].annotationLead = 0;
                l[I].startAngleDegree = f[0];
                l[I].endAngleDegree = f[1];
                l[I].textInfo = {
                    width: 0,
                    height: 0
                }
            }
            y = l
        }
    }

    function o(t, e, i) {
        var n, r, a, s, o, l = new Array,
            c = 0,
            u = 0,
            d = 0,
            h = 0;
        if(t < 0) {
            n = parseInt(-t / 360);
            t += 360 * (n + 1);
            e += 360 * (n + 1)
        }
        l.push(t, e);
        n = t % 90 == 0 ? t / 90 + 1 : Math.ceil(t / 90);
        r = 90 * n;
        for(; r < e;) {
            l.push(r);
            r += 90
        }
        for(var f = 0; f < l.length; f++) {
            a = l[f] / 180 * Math.PI;
            s = Math.sin(a);
            o = Math.cos(a);
            if(o >= 0) u = Math.max(i * o, u);
            else c = Math.min(i * o, c);
            if(s >= 0) h = Math.max(i * s, h);
            else d = Math.min(i * s, d)
        }
        return {
            top: d,
            bottom: h,
            left: c,
            right: u,
            width: u - c,
            height: h - d
        }
    }

    function l(t) {
        var e, i, n = y;
        if(n.length <= 0) return {
            top: -t - x,
            bottom: t + x,
            left: -t - x,
            right: t + x,
            width: 2 * (t + x),
            height: 2 * t + 20,
            x: l,
            y: a
        };
        var r = o(n[0].startAngleDegree, n[0].endAngleDegree, t),
            a = r.top,
            s = r.bottom,
            l = r.left,
            c = r.right;
        if("inner" === n[0].position || null == n[0].position) {
            a -= x;
            s += x;
            l -= x;
            c += x;
            e = Math.abs(l - c);
            i = Math.abs(a - s);
            return {
                top: a,
                bottom: s,
                left: l,
                right: c,
                width: e,
                height: i
            }
        } else {
            for(var u = 0; u < n.length; u++) {
                var d = T(n[u].startAngle, n[u].endAngle, t);
                n[u].mapHeight = 0 == d ? 1 : d;
                var h = A("outer", [0, t], t, n[u].averageAngle, {
                    x: 0,
                    y: 0
                }, n[u].annotationLead);
                n[u].cable = h.cable;
                n[u].apply = !0;
                n[u].applyHeight = void 0
            }
            for(var f, p, _ = E(n, {
                x: 0,
                y: 0
            }, t, b), u = 0; u < _.length; u++) {
                p = _[u];
                f = Math.cos(p.averageAngle);
                a = Math.min(p.cable[2].y - p.textInfo.height, a);
                s = Math.max(p.cable[2].y + p.textInfo.height, s);
                if(f >= 0) c = Math.max(p.cable[2].x + p.textInfo.width, c);
                else l = Math.min(p.cable[2].x - p.textInfo.width, l)
            }
            a -= x;
            s += x;
            l -= x;
            c += x;
            return {
                top: a,
                bottom: s,
                left: l,
                right: c,
                width: c - l,
                height: s - a,
                x: l,
                y: a
            }
        }
    }

    function c(t) {
        return e(t, l, [0, t.height], .1)
    }
    var u, d, h, f, p, _ = i.ContainerSprite,
        m = i.selection,
        g = i.selector,
        v = g.kind,
        y = (i.Circle, []),
        b = 0,
        x = 10,
        $ = .2,
        w = function(t, e) {
            var i = t.endAngle - t.startAngle,
                n = e.endAngle - e.startAngle;
            if(i != n) return i < n ? -1 : 1;
            else return t.index - e.index
        },
        k = function(t, e) {
            return t.index - e.index
        },
        S = function(t, e) {
            return e.index - t.index
        },
        C = function(t, e) {
            if(t.mapHeight < e.mapHeight) return -1;
            else if(t.mapHeight > e.mapHeight) return 1;
            else return t.index - e.index
        },
        T = function(t, e, i) {
            var n, r, a = t,
                s = e,
                o = (t + e) / 2;
            if(Math.cos(a) > 0 && Math.cos(s) < 0)
                if(Math.cos(o) >= 0) n = Math.sin(a), r = 1;
                else n = 1, r = Math.sin(s);
            else if(Math.cos(a) < 0 && Math.cos(s) > 0)
                if(Math.cos(o) <= 0) n = Math.sin(a), r = -1;
                else n = -1, r = Math.sin(s);
            else n = Math.sin(a), r = Math.sin(s);
            var l = Math.abs(i * n - i * r);
            return l
        },
        E = function(t, e, i, n, r) {
            if(0 == t.length || "inner" == t[0].position) return t;
            if(null != r) d = r / 4, h = 3 * r / 4;
            if(null != n) b = n;
            for(var a, s = !1, o = !1, l = !1, c = !1, u = [], f = [], p = [], _ = [], m = 0; m < t.length; m++) {
                a = t[m];
                if(Math.cos(a.averageAngle) >= 0) Math.sin(a.averageAngle) <= 0 ? u.push(a) : f.push(a);
                else Math.sin(a.averageAngle) >= 0 ? p.push(a) : _.push(a)
            }
            for(var m = 1; m < u.length; m++) {
                a = u[m];
                if(Math.abs(a.cable[2].y - u[m - 1].cable[2].y) <= b) {
                    s = !0;
                    break
                }
            }
            for(var m = 1; m < f.length; m++) {
                a = f[m];
                if(Math.abs(a.cable[2].y - f[m - 1].cable[2].y) <= b) {
                    o = !0;
                    break
                }
            }
            for(var m = p.length - 1; m >= 1; m--) {
                a = p[m];
                if(Math.abs(a.cable[2].y - p[m - 1].cable[2].y) <= b) {
                    l = !0;
                    break
                }
            }
            for(var m = _.length - 1; m >= 1; m--) {
                a = _[m];
                if(Math.abs(a.cable[2].y - _[m - 1].cable[2].y) <= b) {
                    c = !0;
                    break
                }
            }
            if(s) I(u, -Math.PI / 2, 0, !0, !0, i, e);
            if(o) I(f, 0, Math.PI / 2, !0, !1, i, e);
            if(l) I(p, Math.PI / 2, Math.PI, !1, !1, i, e);
            if(c) I(_, Math.PI, 3 * Math.PI / 2, !1, !0, i, e);
            return u.concat(f).concat(p).concat(_)
        },
        I = function(t, e, i, n, r, a, s) {
            if(t.length <= 0) return [];
            var o, l, a, c, u, f, p, _, m = 0,
                g = [];
            o = s.x, l = s.y;
            u = a + h;
            annotationRadius = a + d + h;
            m = 0;
            c = Math.abs(annotationRadius * Math.sin(i) - annotationRadius * Math.sin(e));
            t.sort(w);
            if(t.length * b > c)
                for(var v = 0; v < t.length; v++) {
                    t[v].apply = !1;
                    if((t.length - v - 1) * b <= c) break
                }
            for(var v = 0; v < t.length; v++)
                if(t[v].apply) {
                    g.push(t[v]);
                    m += t[v].mapHeight
                }
            if(0 != m) {
                var y = !1,
                    x = 0;
                g.sort(C);
                for(; !y;) {
                    for(var v = x; v < g.length; v++) {
                        f = g[v];
                        if(void 0 === f.applyHeight)
                            if(f.mapHeight / m * c >= b) {
                                y = !0;
                                f.applyHeight = f.mapHeight / m * c;
                                m -= f.mapHeight;
                                c -= f.applyHeight
                            } else {
                                if(c <= 0) f.applyHeight = 0;
                                else {
                                    f.applyHeight = b;
                                    c -= b
                                }
                                m -= f.mapHeight;
                                x = v + 1;
                                break
                            }
                        else;
                    }
                    if(x == g.length) break
                }
                var $ = n ? l + Math.sin(e) * annotationRadius : l + Math.sin(i) * annotationRadius;
                n ? g.sort(k) : g.sort(S);
                for(var v = 0; v < g.length; v++) {
                    f = g[v];
                    var T = void 0 === f.radius ? a : f.radius[1];
                    p = Math.cos(f.averageAngle), _ = Math.sin(f.averageAngle);
                    var E, I, A, M = u * p + s.x,
                        D = u * _ + s.y,
                        P = T * p + s.x,
                        N = T * _ + s.y,
                        L = a * p + s.x,
                        R = a * _ + s.y,
                        j = $ + f.applyHeight / 2;
                    if(j <= l) {
                        E = l - j > annotationRadius ? 0 : Math.acos((l - j) / annotationRadius);
                        I = n ? s.x + Math.sin(E) * annotationRadius : s.x - Math.sin(E) * annotationRadius;
                        A = n ? s.y - Math.cos(E) * annotationRadius : s.y - Math.cos(E) * annotationRadius
                    } else {
                        E = j - l > annotationRadius ? 0 : Math.acos((j - l) / annotationRadius);
                        I = n ? s.x + Math.sin(E) * annotationRadius : s.x - Math.sin(E) * annotationRadius;
                        A = n ? s.y + Math.cos(E) * annotationRadius : s.y + Math.cos(E) * annotationRadius
                    }
                    $ += f.applyHeight;
                    g[v].cable = [{
                        x: P,
                        y: N
                    }, {
                        x: L,
                        y: R
                    }, {
                        x: M,
                        y: D
                    }, {
                        x: I,
                        y: A
                    }];
                    g[v].annotation.x = I;
                    g[v].annotation.y = A
                }
                for(var v = 0; v < t.length; v++)
                    if(!t[v].apply) g.push(t[v]);
                return g.sort(k)
            }
        },
        A = function(t, e, i, n, r, a) {
            var s, o, l, c, u, d, h, f, p, _;
            o = Math.cos(n), s = Math.sin(n);
            p = e[0], _ = e[1];
            var m = Math.abs(p - 0) < 1e-5 ? .75 : .5;
            if("inner" == t) {
                h = r.x + o * ((_ - p) * m + p);
                f = r.y + s * ((_ - p) * m + p);
                return {
                    cable: [],
                    px: h,
                    py: f
                }
            } else {
                l = o * _ + r.x;
                c = s * _ + r.y;
                u = o * i + r.x;
                d = s * i + r.y;
                h = o < 0 ? u - a : u + a;
                f = d + s * a;
                cable = [{
                    x: l,
                    y: c
                }, {
                    x: u,
                    y: d
                }, {
                    x: u + o * a,
                    y: d + s * a
                }, {
                    x: h,
                    y: f
                }];
                return {
                    cable: cable,
                    px: h,
                    py: f
                }
            }
        };
    return {
        analysis: r,
        calCable: A,
        getMapHeight: T,
        checkYOverlap: E
    }
}, 656, 820, 566, 654);
I$(739, function(t, e, i) {
    function n(t, e, i, n, r, a) {
        if(t) {
            var s = e.width,
                o = e.height,
                l = e.x,
                c = e.y;
            if(i instanceof Array) t.settexts(i);
            else t.settext(i);
            for(var u = 2, d = 2, h = 0; h < y.length; h++)
                if(y[h] == n) {
                    u = h % 3;
                    d = Math.floor(h / 3)
                }
            t.setx(l + _[u] * s + f[u]);
            t.sety(c + m[d] * o + p[d]);
            t.setratioAnchor({
                ratiox: g[u],
                ratioy: v[d]
            })
        }
    }

    function r(t, e, i) {
        var n = t.bbox();
        if(u(i, e)) {
            var r = t.x(),
                a = t.y(),
                s = n.x - i.x,
                o = n.x + n.width - i.x - i.width,
                l = n.y - i.y,
                c = n.y + n.height - i.y - i.height;
            if(s < 0) t.setx(r - s);
            else if(o > 0) t.setx(r - o);
            if(l < 0) t.sety(a - l);
            else if(c > 0) t.sety(a - c)
        } else;
    }

    function a(t, e, i) {
        for(var n, r, a, s = {}, o = {}, l = {}, c = function(t) {
            var i = e(t),
                n = "" + i[0],
                r = parseFloat(n);
            if(isNaN(r)) r = n;
            return r
        }, u = 0, d = t.length; u < d; u++)
            if(t[u])
                if("null" !== c(t[u])) {
                    n = r = c(t[0]);
                    s[t[0][i]] = !0;
                    o[t[0][i]] = !0;
                    a = typeof n;
                    break
                }
        for(; u < d; u++) {
            var h = c(t[u]);
            if("null" !== h) {
                if(typeof h !== a) {
                    console.warn("label data format isn't same!");
                    break
                }
                if(n > h) {
                    n = h;
                    s = {};
                    s[t[u][i]] = !0
                } else if(n === h) s[t[u][i]] = !0;
                if(r < h) {
                    r = h;
                    o = {};
                    o[t[u][i]] = !0
                } else if(r === h) o[t[u][i]] = !0
            } else;
        }
        l.minValues = s;
        l.maxValues = o;
        return l
    }

    function s(t, e, i) {
        var n = t.dynamicProperty("data"),
            r = a(n, e, i);
        return r
    }

    function o(t, e, i, n, r, a) {
        var s = {},
            o = {},
            l = {},
            c = t.dynamicProperty("data"),
            u = e.type(),
            d = i.type();
        if("discrete" === u)
            for(var h = e.domain(), f = h[0], p = h[h.length - 1], _ = 0, m = c.length; _ < m; _++) {
                if(c[_][n] === f) s[c[_][a]] = !0;
                if(c[_][n] === p) o[c[_][a]] = !0
            } else if("discrete" === d)
            for(var g = i.domain(), f = g[0], p = g[g.length - 1], _ = 0, m = c.length; _ < m; _++) {
                if(c[_][r] === f) s[c[_][a]] = !0;
                if(c[_][r] === p) o[c[_][a]] = !0
            }
        l.firstArray = s;
        l.lastArray = o;
        return l
    }

    function l(t, e, i, n, a, s, o, l, c, u) {
        if(!(arguments.length < 8)) {
            var d = a.alwaysVisiableLabels,
                h = a.mayVisiableLabels,
                f = i.func,
                p = i.args,
                _ = i.src,
                m = t.dynamicProperty("data"),
                g = m[c];
            if(!n) {
                var v = l;
                p.push(v);
                if("none" === o) t.sethidden(!0);
                else if("minmax" === o) {
                    var y = s.minValues;
                    max = s.maxValues;
                    if(y[g] || max[g]) f.apply(_, p);
                    else t.sethidden(!0)
                } else if("firstlast" === o) {
                    var b = s.firstArray;
                    last = s.lastArray;
                    if(b[g] || last[g]) f.apply(_, p);
                    else t.sethidden(!0)
                } else f.apply(_, p);
                if(!t.hidden()) h.push(t)
            } else if(n[g] === !0) {
                var v = !1;
                p.push(v);
                f.apply(_, p);
                d.push(t)
            } else if(n[g] === !1) t.sethidden(!0);
            else {
                var v = l;
                p.push(v);
                if("none" === o) t.sethidden(!0);
                else if("minmax" === o) {
                    var y = s.minValues;
                    max = s.maxValues;
                    if(y[g] || max[g]) f.apply(_, p);
                    else t.sethidden(!0)
                } else if("firstlast" === o) {
                    var b = s.firstArray;
                    last = s.lastArray;
                    if(b[g] || last[g]) f.apply(_, p);
                    else t.sethidden(!0)
                } else f.apply(_, p);
                if(!t.hidden()) h.push(t)
            }
            r(t, e, u)
        } else console.warn("controlLabelToShow错误使用")
    }

    function c(t) {
        var e = [],
            i = t.alwaysVisiableLabels,
            n = t.mayVisiableLabels,
            r = i.length,
            a = n.length;
        if(n) {
            for(var s = function(t) {
                for(var i = e.length, n = 0; n < i; n++)
                    if(u(t, e[n])) return !1;
                return !0
            }, o = 0; o < r; o++) {
                var l = i[o].treeBbox();
                e.push(l)
            }
            for(var c = 0; c < a; c++) {
                var d = n[c],
                    l = d.treeBbox();
                if(0 !== e.length)
                    if(s(l)) e.push(l);
                    else d.sethidden(!0);
                else e.push(l)
            }
        }
    }
    var u = (t.PRIVATE, e.selection, e.selector.kind, i.rectangle2Collision),
        d = {},
        h = 2,
        f = [-h, 0, h],
        p = [-h, 0, h],
        _ = [-.5, 0, .5],
        m = [-.5, 0, .5],
        g = [1, .5, 0],
        v = [1, .5, 0],
        y = ["WN", "N", "EN", "W", "inner", "E", "WS", "S", "ES"];
    d.searchMinMax = s;
    d.searchFirstLast = o;
    d.controlLabelToShow = l;
    d.avoidLabelCollision = c;
    d.layoutText = n;
    d.offsetLabel = r;
    d.getIdMapOfMinMaxLabelValuesFromDatas = a;
    return d
}, 571, 566, 654);
I$(664, function(t, e, i, n, r, a) {
    function s(t, e) {
        var i = t.range();
        if(!(e <= 0)) t.range([i[0], i[1] * e])
    }

    function o(t, e, i) {
        function n(t, i) {
            var n = null == r[t[e]] ? a++ : r[t[e]],
                s = null == r[i[e]] ? a++ : r[i[e]];
            return n - s
        }
        if(null != e && null != i) {
            for(var r = {}, a = i.length, s = 0; s < i.length; ++s) r[i[s]] = s;
            t.sort(n)
        }
    }

    function l(t, e, i, n, r) {
        for(var s = {}, o = 0; o < t.length; ++o) {
            var l = t[o][r];
            s[l] = 0;
            if(null != e && null != e[l]) s[l] = e[l] ? 1 : -1
        }
        if(null == e) return s;
        if("none" == i) {
            for(var c in s)
                if(0 == s[c]) s[c] = -1
        } else if("minmax" == i) {
            var u = a.getIdMapOfMinMaxLabelValuesFromDatas(t, n, r);
            if(null == u) return s;
            for(var c in s)
                if(0 == s[c] && !u["minValues"][c] && !u["maxValues"][c]) s[c] = -1
        }
        return s
    }

    function c(e, r, a) {
        b = w.create({});
        v = [a.mark.angleRange[0] * Math.PI / 180, a.mark.angleRange[1] * Math.PI / 180];
        y = a.label.leadLength;
        a.label.leadLength = y;
        var c = e.layout,
            d = e.data;
        if(!d || !d.length) return e;
        var h, f, p, _, m, x, $ = e.xField,
            k = e.yField,
            S = {
                xField: $,
                yField: k
            },
            C = e.xScale,
            T = e.yScale,
            E = {
                xScale: C,
                yScale: T
            },
            I = "cartesian" == e.coordType,
            A = e.radiusField,
            M = e.radiusScale,
            D = e.sizeField,
            P = e.angle,
            N = M && M.ratio || 1,
            L = e.colorField,
            R = a.label,
            j = e.text,
            O = {};
        _ = c && c.stack ? c.stack : null;
        x = c && c.stackOrder ? c.stackOrder : null;
        var F = null != _,
            z = l(d, R.alwaysShowStateMap, R.showMode, j, e.idField);
        o(e.data, L, x);
        if(null == $ && null == k) {
            var B, H = a.topPadding,
                W = a.bottomPadding;
            if(null != H && null != W) B = {
                x: r.x,
                y: r.y + H,
                width: r.width,
                height: r.height - (H + W)
            };
            else B = r;
            f = n.analysis(e, B, R.position, a, z);
            p = f.center;
            M.range([0, 2 * f.r]);
            C.range([0, 2 * f.center.x]);
            T.range([0, 2 * f.center.y])
        }
        s(M, N);
        if(I && "continuous" === C.type()) {
            h = i.adjustRange(e, r, "x", !0);
            O.left = h.left;
            O.right = h.right
        }
        if(I && "continuous" === T.type()) {
            h = i.adjustRange(e, r, "y", !0);
            O.top = h.top;
            O.bottom = h.bottom
        }
        var q, G = t.groupBy(d, function(t) {
                return t[$] + ":" + t[k]
            }),
            G = t.values(G);
        q = [];
        for(var U = 0; U < G.length; ++U) {
            q[U] = [];
            var V = t.groupBy(G[U], function(t) {
                return t[_]
            });
            V = t.pairs(V);
            m = null == m ? $ : m;
            V = t.sortBy(V, function(t) {
                return t[0]
            });
            V = V.map(function(t, e) {
                return t[1]
            });
            q[U] = V
        }
        q.isStack = F;
        for(var U = 0; U < q.length; ++U)
            for(var Y = u(q[U], A), X = 0; X < q[U].length; ++X) g(q[U][X], P, D, q[U].length, X + 1, M, Y, j, F, a, p, S, E, z);
        e.layoutData = q;
        e.updateRange = O;
        return e
    }

    function u(t, e) {
        for(var i = 0, n = 0; n < t.length; ++n)
            for(var r = 0; r < t[n].length; ++r) i += Math.abs(t[n][r][e]);
        return i
    }

    function d(t, e) {
        var i = null;
        if(null == e) return null;
        for(var n = 0; n < t.length; ++n)
            if(null == i) i = Math.abs(Number(t[n][e]));
            else i = Math.max(i, Math.abs(Number(t[n][e])));
        return i
    }

    function h(t, e) {
        if(t.length <= 0) return -1;
        if("string" == typeof t[0][e]) return t.length;
        for(var i = 0, n = 0; n < t.length; ++n)
            if(null != t[n][e]) i += Math.abs(t[n][e]);
            else;
        return i
    }

    function f(t, e, i, n) {
        if(null == n) n = 0;
        if(n < 0 || n >= 1) {
            console.log("内半径比例错误!");
            n = 0
        }
        var r = i * n,
            a = i;
        if(e > t) return [0, 0];
        if(0 == t) return [0, 0];
        if(1 == t) return [r, a];
        var s = 0,
            o = 0,
            l = (a - r - (t - 1) * x) / t;
        s = (e - 1) * (x + l) + r;
        o = s + l;
        return [s, o]
    }

    function p(t, e, i, n) {
        if(n || null == i || null == e) return t;
        var r = t[0],
            a = t[1];
        if(r >= a) throw "扇半内半径大于外半径!";
        var s = a - r;
        return [r, r + .1 * s + .9 * s * (i / e)]
    }

    function _(t, e, i, r, a, s) {
        var o, l, c;
        if(null == t) {
            o = [];
            var u = Math.cos(r),
                d = Math.sin(r);
            l = a.x + (e[1] + $) * u;
            c = a.y + (e[1] + $) * d;
            return {
                cable: o,
                px: l,
                py: c
            }
        } else {
            var h = n.calCable(t, e, i, r, a, y);
            return h
        }
    }

    function m(t) {
        b.settexts(t);
        return b.bbox().height
    }

    function g(t, e, i, r, a, s, o, l, c, u, g, b, x, $) {
        var w = u.label,
            k = 0,
            S = w.position,
            C = w.autoHidden,
            T = b.xField,
            E = b.yField,
            I = x.xScale,
            A = x.yScale;
        if(!(t.length <= 0)) {
            var M, D = t.length,
                P = v[0],
                N = v[1] - v[0],
                L = d(t, i),
                R = h(t, e);
            if(null != T || null != E) y = 15;
            M = f(r, a, s.exec(o), u.mark.innerRadiusRatio);
            for(var j = 0; j < D; j++) {
                t[j].position = S;
                t[j].center = null == g ? {
                    x: I.exec(t[j][T]),
                    y: A.exec(t[j][E])
                } : g;
                t[j].startAngle = P;
                var O = 0,
                    F = 0;
                if(null == e || "string" == typeof t[0][e] || 0 == R) {
                    O = N / D;
                    F = 1 / D
                } else {
                    O = null == t[j][e] ? 0 : Math.abs(t[j][e] / R) * N;
                    F = null == t[j][e] ? 1 / D : Math.abs(t[j][e] / R)
                }
                P += O;
                P = P > 2 * Math.PI ? 2 * Math.PI : P;
                t[j].ratio = F;
                t[j].endAngle = P;
                t[j].averageAngle = (t[j].startAngle + t[j].endAngle) / 2;
                t[j].piesNum = r;
                t[j].piesNumber = a;
                t[j].radius = null == i ? M : p(M, L, t[j][i], c);
                t[j].maxRadius = M;
                t[j].autoHidden = C;
                if(l) {
                    t[j].label = l(t[j]);
                    t[j].showOrNot = $[t[j].dimensionId];
                    k = Math.max(k, m(t[j].label));
                    var z = _(S, t[j].radius, M[1], (t[j].startAngle + t[j].endAngle) / 2, t[j].center, y);
                    t[j].cable = z.cable;
                    t[j].annotation = {
                        x: z.px,
                        y: z.py,
                        text: t[j].label
                    };
                    t[j].apply = !0;
                    t[j].index = j;
                    var B = n.getMapHeight(t[j].startAngle, t[j].endAngle, M[1]);
                    t[j].mapHeight = 0 == B ? 1 : B
                }
            }
            if("outer" == S && l && t.length > 0)
                if(null != T || null != E) n.checkYOverlap(t, t[0].center, M[1], k, y);
                else n.checkYOverlap(t, t[0].center, M[1])
        }
    }
    var v, y, b, x = 1,
        $ = 5,
        w = r.MultilineText;
    return c
}, 656, 654, 669, 738, 566, 739);
I$(665, function(t, e, i, n, r, a) {
    function s(t, e, i, n, r, s, o, u) {
        if("scatter" == n && null != u) return t.map(function(t) {
            var n = t[o],
                r = t[e];
            if(null != n || null != r || !e) {
                var s = .7 * i.exec(r),
                    l = u.exec(n),
                    c = a(u.kind, l),
                    d = h(c, 1, s);
                t.__layoutBBox = d;
                t.__scaleRatio = s
            } else t.__layoutBBox = {
                width: 0,
                height: 0
            }
        });
        else if("text" == n) return t.map(function(t, n) {
            var a = t[e];
            if(null != a || !e) {
                var o, l = i.exec(a),
                    u = r(t);
                if("function" == typeof s.styles) o = c(u, s.styles(t.originRecord, n));
                else o = c(u, s.styles);
                o.width *= l;
                o.height *= l;
                t.__layoutBBox = o;
                t.__scaleRatio = l
            } else t.__layoutBBox = {
                width: 0,
                height: 0
            }
        });
        else return t.map(function(t) {
                if("[object Function]" === Object.prototype.toString.call(s.radius)) var n = s.radius(t);
                else var n = s.radius;
                var r = i.exec(t[e]),
                    a = r * n,
                    o = l(a, 1, f);
                t.__layoutBBox = o;
                t.__scaleRatio = r;
                return o
            })
    }

    function o(t, e, i) {
        var r = t.sizeField,
            a = t.sizeScale,
            o = i.shape;
        t.shapeScale = o;
        var l, c = t.shape,
            u = t.validData ? t.validData : t.data,
            d = {},
            h = t.type,
            f = "cartesian" == t.coordType,
            p = t.text ? t.text : function() {
                return ["Abc"]
            };
        if("text" == t.type) t.text = p;
        var _ = t.xScale,
            m = t.yScale;
        s(u, r, a, h, p, i.mark, c, o);
        if(f && _ && "continuous" === _.type()) {
            l = n.adjustRange(t, e, "x", !1);
            d.left = l.left;
            d.right = l.right
        }
        if(f && m && "continuous" === m.type()) {
            l = n.adjustRange(t, e, "y", !1);
            d.top = l.top;
            d.bottom = l.bottom
        }
        t.updateRange = d;
        return t
    }
    var l = r.bboxHelper.circleBbox,
        c = r.bboxHelper.multilinetextBbox,
        u = r.Path,
        d = u.create({}),
        h = function(t, e, i) {
            d.setpathElements(t);
            d.setlineWidth(e);
            d.setscale({
                sx: i,
                sy: i
            });
            return d.bbox()
        },
        f = {
            r: 255,
            g: 0,
            b: 0
        };
    return o
}, 656, 654, 675, 669, 566, 704);
I$(666, function(t, e, i, n) {
    function r(r, s, o) {
        var l = r.group,
            c = r.xScale,
            u = r.yScale,
            d = r.xField,
            h = r.yField,
            f = (r.sizeField, r.sizeScale, n.youDataChoosePolicy(d, h, c.type(), u.type())),
            p = a(c, u, d, h, f, "line"),
            _ = r.data,
            m = [],
            g = [],
            v = t.groupBy(_, function(t) {
                return t[l]
            });
        for(var y in v) {
            var b = {
                value: y,
                info: {}
            };
            m.push(b);
            for(var x = v[y], $ = p(x), w = [], k = 0; k < x.length; k++)
                if(f(x[k])) w.push(k);
            b.info.data = x;
            b.info.validPointsIndex = w;
            var S = (w ? w : []).map(function(t, e) {
                g.push(x[t]);
                return x[t]
            });
            b.info.validData = S;
            b.info.brokenLinesIndex = $.brokenLinesIndex;
            var C = $.normalLinesIndex;
            b.info.normalLinesIndex = C;
            var T = $.isolatedPointsIndex;
            T.map(function(t) {
                S[t].__isIsolated = !0
            });
            b.info.isolatedPointsIndex = T;
            b.info.linkArray = $.linkArray;
            var E = null == r.nullType ? "broken" : "dash";
            b.info.nullType = E;
            b.info.gradient = !!r.gradient;
            b.info.text = r.text;
            b.info.smooth = r.smooth;
            var I = [];
            if("dash" === E)
                for(var k = 0; k < S.length - 1; k++) {
                    var A = [S[k], S[k + 1]];
                    A[e.SPRITEINDEX] = k;
                    I.push(A)
                } else if(C)
                for(var k = 0; k < C.length; k++) {
                    var M = C[k],
                        A = [S[M], S[M + 1]];
                    A[e.SPRITEINDEX] = k;
                    I.push(A)
                }
            b.info.lineDatas = I
        }
        r.groupDatas = m;
        r.validData = g;
        i(r, s, o);
        return r
    }

    function a(e, i, r, a, o, l) {
        return function(c) {
            var u, d;
            if("discrete" == e.type()) {
                n.sortByCategory(c, e.domain(), r);
                u = e.domain();
                d = r
            } else if("discrete" == i.type()) {
                n.sortByCategory(c, i.domain(), a);
                u = i.domain();
                d = a
            } else if("continuous" == e.type()) c = t.sortBy(c, function(t) {
                return t[r]
            });
            else if("continuous" == i.type()) c = t.sortBy(c, function(t) {
                return t[a]
            });
            var h = [];
            if(u) {
                for(var f = {}, p = 0; p < u.length; p++) {
                    var _ = s(u[p]);
                    f[_] = p
                }
                for(var m, g, v, y = 0, p = 0; p < c.length; p++) {
                    m = c[p][d];
                    g = f[s(m)];
                    if(g + y == v) y++;
                    g += y;
                    if(o(c[p])) h.push(g);
                    v = g
                }
            } else
                for(var p = 0; p < c.length; p++) h.push(p);
            var b = n.calculateLinkArray(h, l);
            return b
        }
    }
    var s = n.escapeNull;
    return r
}, 656, 675, 665, 654);
I$(667, function(t, e, i, n) {
    function r(r, l, c) {
        var u = r.group,
            d = r.xScale,
            h = r.yScale,
            f = r.xField,
            p = r.yField,
            _ = r.data,
            m = (r.sizeField, r.sizeScale, r.layout),
            g = m ? m.stack ? m.stack : null : null;
        r.stackField = g;
        var v = i.youDataChoosePolicy(f, p, d.type(), h.type()),
            y = s(d, h, f, p, _),
            b = y.baseField,
            x = null != g,
            $ = y.extentField,
            w = y.extentScale.type(),
            k = function(t) {
                return t[b]
            },
            S = function(t) {
                return 1
            },
            C = function(t) {
                return t[g]
            };
        n.stack(_, x, $, w, k, S, C);
        var $, w, T = (y.direction, y.baseScale),
            E = T.domain(),
            I = o(E, b, v),
            A = [],
            x = null != g,
            M = t.groupBy(_, function(t) {
                return t[u]
            }),
            D = t.keys(M);
        D.sort();
        for(var P = 0; P < D.length; P++) {
            var N = D[P],
                L = {
                    value: N,
                    info: {}
                };
            A.push(L);
            var R = M[N];
            R = a(R, b, T);
            for(var j = I(R), O = [], F = 0; F < R.length; F++)
                if(v(R[F])) O.push(F);
            L.info.data = R;
            L.info.validPointsIndex = O;
            var z = (O ? O : []).map(function(t, e) {
                return R[t]
            });
            L.info.validData = z;
            L.info.brokenLinesIndex = j.brokenLinesIndex;
            var B = j.normalLinesIndex;
            L.info.normalLinesIndex = B;
            var H = j.isolatedPointsIndex;
            H.map(function(t) {
                z[t].__isIsolated = !0
            });
            L.info.isolatedPointsIndex = H;
            L.info.linkArray = j.linkArray;
            L.info.nullType = null == r.nullType ? "broken" : "dash";
            L.info.gradient = !!r.gradient;
            L.info.text = r.text;
            L.info.smooth = r.smooth;
            var W = [],
                q = "broken";
            if("dash" === q)
                for(var F = 0; F < z.length - 1; F++) {
                    var G = [z[F], z[F + 1]];
                    W.push(G)
                } else if(B)
                for(var F = 0; F < B.length; F++) {
                    var U = B[F],
                        G = [z[U], z[U + 1]];
                    W.push(G)
                }
            L.info.lineDatas = W
        }
        e(r, l, c);
        r.baseInfo = y;
        r.groupDatas = A;
        r.smooth = r.smooth;
        return r
    }

    function a(e, i, n) {
        var r = [];
        if("continuous" != n.type())
            for(var a = n.domain(), s = t.groupBy(e, function(t) {
                return l(t[i])
            }), o = 0; o < a.length; o++) {
                var c = s[a[o]];
                if(c)
                    if(c.length > 1) {
                        var u = t.sortBy(c, function(t) {
                            return t.layout_end
                        });
                        u.map(function(t) {
                            r.push(t)
                        })
                    } else r.push(c[0]);
                else;
            } else r = t.sortBy(e, function(t) {
            return t[i]
        });
        return r
    }

    function s(e, n, r, a, s) {
        var o, l, c, u, d, h;
        if("discrete" == e.type()) {
            i.sortByCategory(s, e.domain(), r);
            o = e.domain();
            l = r;
            u = a;
            c = e;
            d = n;
            h = "vert"
        } else if("discrete" == n.type()) {
            i.sortByCategory(s, n.domain(), a);
            o = n.domain();
            l = a;
            u = r;
            c = n;
            d = e;
            h = "horiz"
        } else if("continuous" == e.type()) {
            s = t.sortBy(s, function(t) {
                return t[r]
            });
            l = r;
            u = a;
            c = e;
            d = n;
            h = "vert"
        } else if("continuous" == n.type()) {
            s = t.sortBy(s, function(t) {
                return t[a]
            });
            l = r;
            u = a;
            c = e;
            d = n;
            h = "horiz"
        }
        return {
            baseScale: c,
            baseField: l,
            extentScale: d,
            extentField: u,
            direction: h
        }
    }

    function o(t, e, n) {
        return function(r) {
            var a = [];
            if(t) {
                for(var s = {}, o = 0; o < t.length; o++) {
                    var c = l(t[o]);
                    s[c] = o
                }
                for(var u, d, h, f = 0, o = 0; o < r.length; o++) {
                    u = r[o][e];
                    d = s[l(u)];
                    if(d + f == h) f++;
                    d += f;
                    if(n(r[o])) {
                        r[o].__isValid = !0;
                        a.push(d)
                    } else r[o].__isValid = !1;
                    h = d
                }
            } else
                for(var o = 0; o < r.length; o++) a.push(o);
            var p = i.calculateLinkArray(a);
            return p
        }
    }
    var l = i.escapeNull;
    return r
}, 656, 665, 654, 737);
I$(681, function(t, e, i, n, r, a) {
    var s = a.Klass.extend({
        initialize: function(t, e) {
            this.setgeojson(t);
            this.setkey(e)
        },
        geojsonMap: function() {
            var t = this.geojsonMap_();
            if(!t) {
                t = this.createGeoJSONMap();
                this.setgeojsonMap_(t)
            }
            return t
        },
        createGeoJSONMap: function(t) {
            if(null != t) this.setkey(t);
            else t = this.key();
            if(t) {
                var e = this.geojson(),
                    i = [],
                    n = {},
                    r = e.type;
                if("FeatureCollection" == r)
                    for(var a = 0; a < e.features.length; a++) i.push(e.features[a]);
                for(a = 0; a < i.length; a++) {
                    var s = i[a].properties[t];
                    if(!n[s]) n[s] = i[a];
                    else console.warn("geomap data contain the same " + t + ":" + s)
                }
                this.setgeojsonMap_(n);
                return n
            }
        }
    }, ["geojson", "key", "geojsonMap_"]);
    return s
}, 656, 654, 675, 669, 566, 571);
I$(668, function(t, e, i, n, r, a) {
    function s(t, e, i) {
        var n, r, s, o, l, c, u, d, h, f, p;
        n = t.data;
        r = t.geojson;
        s = t.user2geoMap;
        o = t.geo;
        if(o) {
            l = o[1] ? o[1] : "name";
            if(o[0]) c = o[0];
            else throw "geo value invalid"
        } else throw "mark must contain geo field value";
        u = a.create(r, l);
        d = u.geojsonMap();
        n.map(function(t) {
            h = t[c];
            f = s && s[h] ? s[h] : h;
            p = d[f];
            t.__geometry = p
        });
        t.userKey = c;
        t.geoKey = l;
        return t
    }
    return s
}, 656, 654, 675, 669, 566, 681);
I$(670, function(t, e) {
    function i(t, e) {
        return "horizontal" == e ? 0 : 3 * Math.PI / 2
    }

    function n(t, e) {
        return t ? !1 : e ? !0 : !1
    }
    var r = {};
    r.preprocessAxis = function(r, a) {
        var s, o = {},
            l = "top" == r.orient || "bottom" == r.orient;
        o.isXAxis = l;
        o.className = r.className;
        var c = r.orient;
        if(a)
            if(l) s = a.getProp("xAxis", o.className);
            else s = a.getProp("yAxis", o.className);
        else s = {};
        var u = {};
        if(e.isObject(r.caption)) {
            u.text = r.caption.text;
            if(e.isString(u.text)) u.text = [u.text];
            u.align = r.caption.align ? r.caption.align : s.caption.align;
            u.orient = r.caption.orient ? r.caption.orient : s.caption.orient;
            u.rotation = i(l, u.orient)
        } else {
            if(e.isString(r.caption)) u.text = [r.caption];
            else if(e.isArray(r.caption)) u.text = r.caption;
            else u.text = "";
            u.align = s.caption.align;
            u.orient = s.caption.orient;
            u.rotation = i(l, u.orient)
        }
        o.captionToLabelPadding = s.captionToLabelPadding;
        o.captionToBoundaryPadding = s.captionToBoundaryPadding;
        o.labelToTickPadding = s.labelToTickPadding;
        o.tickSize = r.tick && "number" == typeof r.tick.size ? r.tick.size : s.tick.size;
        var d = !r.label || r.label && void 0 === r.label.adapter ? s.label.adapter : r.label.adapter,
            h = {
                adapter: d
            };
        if(r.label) {
            if(void 0 !== r.label.condition) h.condition = r.label.condition;
            if(void 0 !== r.label.adaptLabel) h.adaptLabel = r.label.adaptLabel;
            if(void 0 !== r.label.tryAdaptLabel) h.tryAdaptLabel = r.label.tryAdaptLabel;
            if(void 0 !== r.label.hidden) h.hidden = r.label.hidden;
            if(null != r.label.full) h.full = !!r.label.full;
            if(void 0 !== r.label.format) o.format = t.transformToFunction(r.label.format);
            else o.format = function(t) {
                return t
            }
        } else o.format = function(t) {
            return t
        };
        o.scale = r.scale;
        o.labelOption = h;
        o.offset = void 0 === r.offset ? 0 : r.offset;
        o.id = void 0 !== r.id ? r.id : t.generateUniqueID();
        o.hidden = !!r.hidden;
        o.fixedDimension = r.fixedDimension;
        o.allHidden = !!r.allHidden;
        o.padding = null == r.padding ? 0 : r.padding;
        o.forceHidden = r.forceHidden;
        o.fieldName = r.fieldName;
        if(e.isObject(r.grid)) o.grid = r.grid && void 0 != r.grid.hidden ? !r.grid.hidden : n(l, !1);
        else o.grid = !!r.grid;
        o.caption = u;
        o.position = c;
        if(r.tick && e.isArray(r.tick.number) && r.tick.number.length >= 2) {
            var f = r.tick.number;
            if("count" == f[0] && NaN !== Number(f[1]) && Number(f[1]) > 0) {
                o.tickCount = Math.ceil(f[1]);
                o.tickDensity = s.tick.density
            } else if("density" == f[0] && NaN !== Number(f[1]) && Number(f[1]) > 0) {
                o.tickCount = -1;
                o.tickDensity = f[1]
            } else {
                o.tickCount = -1;
                o.tickDensity = s.tick.density
            }
        } else if(e.isArray(r.tick)) {
            var f = r.tick;
            if("count" == f[0] && NaN !== Number(f[1]) && Number(f[1]) > 0) {
                o.tickCount = Math.ceil(f[1]);
                o.tickDensity = s.tick.density
            } else if("density" == f[0] && NaN !== Number(f[1]) && Number(f[1]) > 0) {
                o.tickCount = -1;
                o.tickDensity = f[1]
            } else {
                o.tickCount = -1;
                o.tickDensity = s.tick.density
            }
        } else {
            o.tickCount = -1;
            o.tickDensity = s.tick.density
        }
        o.userCategory = void 0 === r.category ? [] : e.isArray(r.category) ? r.category : [];
        return o
    };
    return r
}, 654, 656);
I$(735, function(t) {
    function e(t) {
        return t.dynamicProperty("data") + ""
    }

    function i(t) {
        return t + ""
    }

    function n(t, n, l, c) {
        var u = {};
        if(l.allHidden) return [];
        if(!l.hidden) {
            var d = t.select(function(t) {
                    return "line" === t.dynamicProperty("kind")
                }).data(["line"]),
                h = d.enter().append(a);
            h.setDynamicProperty("kind", "line");
            var f = d.exit();
            f.__parentSel__ = t;
            f.remove();
            u.line = {
                update: d,
                enter: f,
                exit: f
            };
            var p = t.select(function(t) {
                return "ticks" === t.dynamicProperty("kind")
            }).data(["ticks"]);
            p.enter().append(r).setDynamicProperty("kind", "ticks");
            p.exit().remove();
            p = t.select(function(t) {
                return "ticks" === t.dynamicProperty("kind")
            });
            var _ = p.selectAll(function(t) {
                    return "tick" === t.dynamicProperty("kind")
                }).data(n),
                m = _.enter().append(a);
            m.setDynamicProperty("kind", "tick");
            var g = _.exit();
            g.__parentSel__ = p;
            g.remove();
            u.tick = {
                update: _,
                enter: m,
                exit: g
            }
        }
        if(l.tableGrid) {
            var v = t.select(function(t) {
                return "tableGrids" === t.dynamicProperty("kind")
            }).data(["tableGrids"]);
            v.enter().append(r).setDynamicProperty("kind", "tableGrids");
            v.exit().remove();
            v = t.select(function(t) {
                return "tableGrids" === t.dynamicProperty("kind")
            });
            var y, b, x = [];
            if(l.isXAxis) {
                y = 0;
                b = n.length
            } else {
                y = 1;
                b = n.length
            }
            for(var $ = y; $ < b; $++) x.push(n[$]);
            var w = v.selectAll(function(t) {
                    return "tableGrid" === t.dynamicProperty("kind")
                }).data(x),
                k = w.enter().append(a);
            k.setDynamicProperty("kind", "tableGrid");
            var S = w.exit();
            S.__parentSel__ = v;
            S.remove();
            u.tableGrid = {
                update: w,
                enter: k,
                exit: S
            }
        }
        var C = t.select(function(t) {
            return "labels" === t.dynamicProperty("kind")
        }).data(["labels"]);
        C.enter().append(r).setDynamicProperty("kind", "labels");
        C.exit().remove();
        C = t.select(function(t) {
            return "labels" === t.dynamicProperty("kind")
        });
        var T = c && c._info().theme.transition,
            E = T ? [n, e, i] : [n],
            I = C.selectAll(function(t) {
                return "label" === t.dynamicProperty("kind")
            });
        I = I.data.apply(I, E);
        var A = I.enter().append(s);
        A.setDynamicProperty("kind", "label");
        var M = I.exit();
        M.remove();
        M.__parentSel__ = C;
        M.remove();
        u.label = {
            update: I,
            enter: A,
            exit: M
        };
        if(l.grid) {
            var D = t.select(function(t) {
                return "grids" === t.dynamicProperty("kind")
            }).data(["grids"]);
            D.enter().append(r).setDynamicProperty("kind", "grids");
            D.exit().remove();
            D = t.select(function(t) {
                return "grids" === t.dynamicProperty("kind")
            });
            var P = D.selectAll(function(t) {
                    return "grid" === t.dynamicProperty("kind")
                }).data(n),
                N = P.enter().append(a);
            N.setDynamicProperty("kind", "grid");
            var L = P.exit();
            L.__parentSel__ = D;
            L.remove();
            u.grid = {
                update: P,
                enter: N,
                exit: L
            }
        }
        if(l.caption.text) {
            var R = t.select(function(t) {
                    return "caption" === t.dynamicProperty("kind")
                }).data([l.caption]),
                j = R.enter().append(s);
            j.setProperty("text", function(t) {
                if(t) return t.text
            }).setDynamicProperty("kind", "caption");
            var O = R.exit();
            O.__parentSel__ = t;
            O.remove();
            u.caption = {
                update: R,
                enter: j,
                exit: O
            }
        }
        var F = t.select(function(t) {
            return "background" === t.dynamicProperty("kind")
        }).data(["background"]);
        F.enter().append(o).setDynamicProperty("kind", "background");
        var z = F.exit();
        z.__parentSel__ = t;
        z.remove();
        return [u]
    }
    var r = t.ContainerSprite,
        a = t.Line,
        s = t.AutoWrapText,
        o = (t.Text, t.Rect);
    t.Circle, t.MultilineText;
    return n
}, 566);
I$(845, function(t) {
    var e = {};
    t.selection;
    e.lineFeed = {
        conditionResult: null,
        type: "lineFeed",
        condition: function(t, e, i) {
            if(!t) return !0;
            var n = e.width,
                r = Math.abs(e.height),
                a = !1;
            t.setmaxWidth(1 / 0);
            t.setmaxHeight(1 / 0);
            t.setrotation(0);
            var s = t.height(),
                o = t.height();
            i = void 0 === i ? 1 : i;
            t.setmaxWidth(n);
            if(r > s) t.setmaxHeight(r);
            var l = t.dynamicProperty("originTexts");
            t.settext(l);
            var c = t.splitTexts(),
                u = c.length,
                d = Math.min(u, i),
                h = c.slice(0, d).join("");
            if(h === l) a = !0;
            else a = !1;
            t.setmaxWidth(1 / 0);
            t.setmaxHeight(1 / 0);
            this.conditionResult = {
                isOK: a,
                actualLineNum: d,
                singleLineTextHeight: o
            };
            return this.conditionResult
        },
        adaptLabel: function(t, e, i, n) {
            if(e) {
                var r, a, s = i.width;
                Math.abs(i.height);
                this.conditionResult = this.condition(e, i, n);
                r = this.conditionResult.actualLineNum;
                a = this.conditionResult.singleLineTextHeight;
                t.each(function(t, e) {
                    t.setrotation(0);
                    t.setmaxWidth(s);
                    t.setmaxHeight(1 / 0);
                    var i = t.dynamicProperty("originTexts");
                    t.settext(i);
                    var n, o = t.splitTexts(),
                        l = o.length;
                    if(l <= r) n = t.text();
                    else {
                        n = o.slice(0, r);
                        n = n.join("");
                        var c = n.length;
                        n = n.slice(0, c - 1) + ".."
                    }
                    t.settext(n);
                    t.setmaxHeight(r * a + 1)
                })
            }
        }
    };
    e.labelRotate = {
        conditionResult: null,
        type: "labelRotate",
        condition: function(t, e, i, n) {
            var r, a, s, o, l, c, u;
            if(e.isY) {
                o = e.rotationHeight;
                l = e.width;
                c = o / l
            } else {
                o = e.rotationWidth;
                l = e.height;
                c = l / o
            }
            t.setmaxWidth(1 / 0);
            t.setmaxHeight(1 / 0);
            var d = t.height();
            i = void 0 === i ? 1 : i;
            var h = t.dynamicProperty("originTexts");
            t.settext(h);
            t.width();
            if(null == n) {
                s = Math.sqrt(Math.pow(o, 2) + Math.pow(l, 2)) - 2 * d * c / (Math.pow(c, 2) + 1);
                a = -Math.atan(c)
            } else {
                var u, f;
                if(e.isY) {
                    u = e.height * Math.sin(n);
                    f = e.height * Math.cos(n)
                } else {
                    u = e.width * Math.sin(n);
                    f = e.width * Math.cos(n)
                }
                if(d > Math.abs(u)) s = Math.sqrt(Math.pow(o, 2) + Math.pow(l, 2));
                else s = Math.min(Math.abs(e.height / Math.sin(n)), Math.abs(e.width / Math.cos(n)));
                a = -n
            }
            t.setrotation(a);
            t.setmaxWidth(s);
            var p = t.width(),
                _ = t.height(),
                c = _ / p,
                m = t.splitTexts(),
                g = m.length;
            if(g <= i) r = !0;
            else r = !1;
            var v = Math.min(g, i);
            t.setrotation(0);
            t.setmaxWidth(1 / 0);
            t.setmaxHeight(1 / 0);
            this.conditionResult = {
                isOK: r,
                actualLineNum: v,
                rotationArc: a,
                singleLineTextHeight: d,
                maxTextsPixelLength: s
            };
            return this.conditionResult
        },
        adaptLabel: function(t, e, i, n, r) {
            if(e) {
                void 0 === i.rotationWidth ? i.width : i.rotationWidth, void 0 === i.rotationHeight ? i.height : i.rotationHeight;
                this.condition(e, i, n, r);
                var a = this.conditionResult.actualLineNum,
                    s = this.conditionResult.rotationArc,
                    o = this.conditionResult.maxTextsPixelLength;
                t.each(function(t) {
                    var e = t.dynamicProperty("originTexts");
                    t.settext(e);
                    t.setmaxWidth(o);
                    t.setrotation(s);
                    var i = t.splitTexts(),
                        n = i.length,
                        r = Math.min(n, a),
                        l = i.slice(0, r);
                    l = l.join("");
                    if(e != l) {
                        l = l.slice(0, l.length - 2);
                        l += "..";
                        t.settext(l)
                    }
                })
            }
        }
    };
    return e
}, 566);
I$(846, function(t) {
    var e = function() {
        var e = [],
            i = !1,
            n = {},
            r = "hur",
            a = /([hur]{1})/,
            s = 0,
            o = {
                h: "lineFeed",
                u: "user",
                r: "labelRotate"
            },
            l = {
                lineFeed: "h",
                user: "u",
                labelRotate: "r"
            };
        for(var c in t) {
            e.push(t[c]);
            n[c] = s;
            s++
        }
        this.labelPolicyArray = e;
        this.tryAdaptLabel = this._tryAdaptLabel;
        this._tryAdaptLabel = function(t) {
            return function(e, i, n) {
                for(var r = 0, a = t.length; r < a; ++r)
                    if(t[r].condition(i, n, this.configuredMaxLineNumArray[0], this.configuredMaxLineNumArray[2]).isOK) {
                        t[r].adaptLabel(e, i, n, this.configuredMaxLineNumArray[0], this.configuredMaxLineNumArray[2]);
                        return ["", l[t[r].type], this.configuredMaxLineNumArray[0], this.configuredMaxLineNumArray[1], this.configuredMaxLineNumArray[2]]
                    }
                this.lastExeced.adaptLabel(e, i, n, this.configuredMaxLineNumArray[1], this.configuredMaxLineNumArray[2]);
                return ["", l[this.lastExeced.type], this.configuredMaxLineNumArray[0], this.configuredMaxLineNumArray[1], this.configuredMaxLineNumArray[2]]
            }
        };
        this._registerLabelPolicy = function(t) {
            var e = {};
            if("object" == typeof t) {
                if(void 0 === t.adaptLabel || "function" != typeof t.adaptLabel) return;
                else e.adaptLabel = t.adaptLabel;
                if(void 0 === t.condition || "function" != typeof t.condition) e.condition = function(t, e, i) {
                    return !0
                };
                else e.condition = t.condition;
                this.labelPolicyArray.push(e);
                n.user = s;
                i = !0
            }
        };
        this.configLabelAdapter = function(t) {
            var i = [],
                s = [];
            this._registerLabelPolicy(t);
            var l;
            if("function" == typeof t.tryAdaptLabel) l = t.tryAdaptLabel;
            if(void 0 !== t.adapter) {
                for(var c = 0; c < t.adapter.length; c++)
                    if("number" == typeof t.adapter[c]) i.push(t.adapter[c]);
                    else if("string" == typeof t.adapter[c]) s.push(t.adapter[c]);
                if(0 === i.length) i = [1, 1 / 0];
                else if(1 === i.length) i.push(1 / 0)
            } else i = [1, 1 / 0];
            if(s.length > 2) s = s.slice(0, 2);
            else if(1 === s.length) s.push("h");
            else if(0 === s.length) s = ["uhr", "h"];
            this.configuredMaxLineNumArray = i;
            if(s[0].match(a)) {
                for(var u = [], d = s[0], h = r, c = 0; c < d.length; c++)
                    if(h.indexOf(d[c]) !== -1) {
                        var f = o[d[c]];
                        h = h.replace(d[c], []);
                        if(f in n) {
                            var p = e[n[f]];
                            u.push(p)
                        }
                        if("" == h) break
                    }
            } else {
                var u = [];
                if("user" in n) {
                    var _ = e[n["user"]];
                    u.push(_);
                    u = u.concat(e.slice(0, e.length - 1))
                } else u = []
            }
            this.tryAdaptLabel = l ? l(u) : this._tryAdaptLabel(u);
            if(s[1].match(a)) {
                var u = [],
                    d = s[1],
                    m = d.match(a)[0],
                    f = o[m],
                    p = e[n[f]];
                this.lastExeced = p
            } else {
                var _;
                if("user" in n) _ = e[n["user"]];
                else _ = e[n["lineFeed"]];
                this.lastExeced = _
            }
        }
    };
    return e
}, 845);
I$(847, function(t, e) {
    var i = (t.selection, e.Klass.extend({
        initialize: function() {},
        layout: function(t, e, i) {
            var n = {};
            return n
        }
    }, ["typeId"]));
    return i
}, 566, 571);
I$(778, function(t, e, i, n, r, a, s, o, l) {
    var c = t.PRIVATE,
        u = (r.selection, r.Line, {
            height: 1 / 6,
            width: .2
        }),
        d = function(t, e, i, n, r) {
            if("bottom" == e) {
                y = i.bottom - r;
                x = 0
            } else if("top" == e) {
                y = i.top + r;
                x = 0
            } else if("right" == e) {
                y = 0;
                x = i.right - n
            } else {
                y = 0;
                x = i.left + n
            }
            t.setProperty("x", x);
            t.setProperty("y", y);
            return {
                x: x,
                y: y
            }
        },
        h = l.extend({
            initialize: function() {
                this._t.set_scale(null);
                this._t.set_orient("bottom");
                this._t.set_defaultOrient({
                    top: 1,
                    right: 1,
                    bottom: 1,
                    left: 1
                });
                this._t.set_ticks(10);
                this._t.set_tickValues(null);
                this._t.set_tickFormat(null);
                this._t.set_labelRange(null)
            },
            layout: function(t, e, i, n) {
                this.setlimitedBboxDimension(t.fixedDimension);
                var r = t.captionToLabelPadding,
                    a = t.captionToBoundaryPadding,
                    s = t.labelToTickPadding,
                    o = t.tickSize,
                    l = t.gridEndPadding ? 7 : 0,
                    c = i.getElement(0, 0),
                    h = t.position,
                    f = t.range,
                    p = t.scale;
                this.setaxisTheme(n);
                this._t.set_scale(p);
                this._t.set_root(c);
                this._t.set_id(t.id);
                this._t.set_orient(h);
                this._t.set_labelOption(t.labelOption);
                this._t.set_tickFormat(t.format);
                this.setfinalAdapter(t.finalAdapter);
                var _, m = e,
                    g = t.caption,
                    v = g.align,
                    y = g.rotation,
                    b = isNaN(t.gridEnd) ? 0 : t.gridEnd,
                    x = t.caption.orient,
                    $ = "horizontal" === x,
                    w = (i.getElement(0, 0), []),
                    p = t.scale,
                    k = 0;
                if(t.tickCount == -1) {
                    var S = p.range(),
                        C = Math.abs(S[0] - S[1]),
                        T = t.tickDensity;
                    k = C * T / 100
                } else k = t.tickCount;
                k = k <= 0 ? 1 : k;
                p.ticksCount(Math.round(k));
                var E = p.ticks();
                this._t.set_tickValues(E);
                _ = this.lastLabelActor();
                w = t.scaleRange ? t.scaleRange : f;
                p.rangeBand ? p.rangeBands(w) : p.range(w);
                this.setscaleRange(w);
                var I = 0 == E.length;
                o = I ? 0 : o;
                var A = (i.selectAll(function(t) {
                    return "tick" == t.dynamicProperty("kind")
                }), i.selectAll(function(t) {
                    return "grid" == t.dynamicProperty("kind")
                }), i.selectAll(function(t) {
                    return "tableGrid" == t.dynamicProperty("kind")
                }));
                i.selectAll(function(t) {
                    return "slider" == t.dynamicProperty("kind")
                });
                if(t.labelOption.hidden);
                else;
                var M = i.selectAll(function(t) {
                    return "label" == t.dynamicProperty("kind")
                });
                this.setrange(f);
                var D = i.select(function(t) {
                        return "line" == t.dynamicProperty("kind")
                    }),
                    P = i.select(function(t) {
                        return "ticks" == t.dynamicProperty("kind")
                    });
                if(!t.allHidden) {
                    if("left" === h || "top" === h) b -= l;
                    else b += l;
                    var N, L, R = this._t.__calcuCaptionRatioAncher(f, h, v, $);
                    if("bottom" == h || "top" == h) {
                        L = "height";
                        N = "width"
                    } else {
                        L = "width";
                        N = "height"
                    }
                    var j = 0;
                    i.select(function(t) {
                        return "caption" == t.dynamicProperty("kind")
                    }).each(function(t, e) {
                        t.setratioAnchor(R.ratioAnchor);
                        t.setrotation(y);
                        t.setmaxWidth(Math.abs(f[1] - f[0]));
                        var i = t.bbox();
                        j = i[L]
                    });
                    var O;
                    if(null != this.limitedBboxDimension()) O = this.limitedBboxDimension() - o - j - s - (0 != j ? a : 0) - r;
                    else O = t.labelOption.full ? m[L] : m[L] * u[L];
                    var F = [];
                    if(M.size()) F = this._t.__labelBbox(i, e, t, O);
                    var z = M.property("rotation")[0],
                        B = this._t.__initialParam(h, f, b, o, z),
                        H = {
                            initialParam: B,
                            captionParam: R,
                            axisLine: D,
                            tableGridSel: A,
                            axisSelection: i,
                            range: f,
                            captionRotation: y,
                            isCaptionHori: $,
                            scale: p,
                            tickSize: o,
                            area: m,
                            tickValues: E,
                            orient: h,
                            labelToTickPadding: s,
                            captionToBoundaryPadding: a,
                            captionAlign: v,
                            captionToLabelPadding: r,
                            padding: t.padding,
                            onlyLine: I,
                            gridEnd: b
                        },
                        W = this._t.__axisLayout(H),
                        q = W,
                        G = {
                            left: q.x,
                            right: q.x + q.width,
                            top: q.y,
                            bottom: q.y + q.height,
                            width: q.width,
                            height: q.height
                        }
                } else {
                    var G = {
                        left: 0,
                        right: 0,
                        top: 0,
                        bottom: 0,
                        width: t.padding,
                        height: t.padding
                    };
                    d(i, h, m, t.padding, t.padding)
                }
                var U = this._t.__remainResource(t, e, G);
                if(U.ok) return {
                    ok: !0,
                    remainingSpace: U.remainingSpace,
                    info: {
                        treeBbox: G,
                        axisLine: D,
                        axisTicks: P,
                        adapterExeced: F
                    },
                    scene: i
                };
                else return {
                    ok: !1,
                    msg: "The givenSpace is not enough",
                    remainingSpace: U.remainingSpace,
                    info: {
                        treeBbox: G,
                        axisLine: D,
                        axisTicks: P,
                        adapterExeced: F
                    },
                    scene: i
                }
            },
            __axisLayout: function(t) {
                var e, n, r = t.captionParam,
                    a = t.initialParam,
                    s = t.tickSize,
                    o = {},
                    l = t.captionRotation,
                    c = t.axisLine,
                    u = t.axisSelection,
                    h = (t.range, t.orient),
                    f = t.scale,
                    p = (t.isCaptionHori, t.area),
                    _ = (t.tickValues, t.labelToTickPadding),
                    m = t.captionToBoundaryPadding,
                    g = (t.captionAlign, t.captionToLabelPadding),
                    v = t.onlyLine,
                    y = (t.gridEnd, a.dimension),
                    b = a.labelHorizRatioAncher,
                    x = a.labelRotationRatioAncher,
                    $ = a.tickRatioAncher,
                    w = a.axisStartPoint,
                    k = a.axisEndPoint,
                    S = a.tickStartPoint,
                    C = a.tickEndPoint,
                    T = a.gridStartPoint,
                    E = a.gridEndPoint,
                    I = "height" == y ? "width" : "height",
                    A = 0,
                    M = void 0,
                    D = this.limitedBboxDimension(),
                    P = null != D;
                c.setProperty("vertexes", [w, k]);
                A += Number(c.property(y));
                if(!v) {
                    var N = u.selectAll(function(t) {
                        return "tick" == t.dynamicProperty("kind")
                    });
                    N.each(function(t, e) {
                        var n = t.lineWidth(),
                            r = t.dynamicProperty("data");
                        if("height" == y) {
                            var a = f.exec(r);
                            t.setx(a);
                            t.sety(0);
                            var s = t.worldX(),
                                o = i.fixPosBlurry(s, n),
                                l = o - s;
                            t.setx(a + l)
                        } else {
                            var c = f.exec(r);
                            t.setx(0);
                            t.sety(c);
                            var u = t.worldY(),
                                d = i.fixPosBlurry(u, n),
                                h = d - u;
                            t.sety(c + h)
                        }
                        t.setvertexes([S, C]);
                        t.setratioAnchor($)
                    });
                    var L = u.selectAll(function(t) {
                        return "grid" == t.dynamicProperty("kind")
                    });
                    L.each(function(t, e) {
                        var i = (t.lineWidth(), t.dynamicProperty("data"));
                        if("height" == y) {
                            var n = f.exec(i);
                            t.setx(n);
                            t.sety(0);
                            t.setfixBlur(!0)
                        } else {
                            var r = f.exec(i);
                            t.setx(0);
                            t.sety(r);
                            t.setfixBlur(!0)
                        }
                        t.setvertexes([T, E])
                    });
                    var R = u.selectAll(function(t) {
                        return "label" == t.dynamicProperty("kind")
                    });
                    R.each(function(t, i) {
                        var n = t.dynamicProperty("data");
                        if("bottom" == h) {
                            t.setx(f.exec(n));
                            t.sety(s + _)
                        } else if("top" == h) {
                            t.setx(f.exec(n));
                            t.sety(-s - _)
                        } else if("left" == h) {
                            t.setx(-s - _);
                            t.sety(f.exec(n))
                        } else if("right" == h) {
                            t.setx(s + _);
                            t.sety(f.exec(n))
                        }
                        var r = t.bbox();
                        if(0 == i) {
                            M = t;
                            e = r[y]
                        } else if(e < r[y]) {
                            M = t;
                            e = r[y]
                        }
                        t.setratioAnchor(!t.rotation() ? b : x)
                    });
                    var j = R.getElement(0, R.size() - 1);
                    this.setlastLabelActor(j);
                    var O, F, z, B = f.step ? f.step() : 0;
                    t.tableGridSel.size();
                    t.tableGridSel.each(function(t, e) {
                        var i = t.dynamicProperty("data");
                        if("bottom" == h) {
                            F = f.exec(i) + B / 2;
                            z = D;
                            O = [{
                                x: F,
                                y: 0
                            }, {
                                x: F,
                                y: z
                            }]
                        } else if("top" == h) {
                            F = f.exec(i) + B / 2;
                            z = -D;
                            O = [{
                                x: F,
                                y: 0
                            }, {
                                x: F,
                                y: z
                            }]
                        } else if("left" == h) {
                            z = f.exec(i) + B / 2;
                            F = -D;
                            O = [{
                                x: 0,
                                y: z
                            }, {
                                x: F,
                                y: z
                            }]
                        } else if("right" == h) {
                            z = f.exec(i) + B / 2;
                            F = D;
                            O = [{
                                x: 0,
                                y: z
                            }, {
                                x: F,
                                y: z
                            }]
                        }
                        t.setvertexes(O);
                        t.setfixBlur(!0)
                    })
                }
                e = (M ? M.treeBbox()[y] + _ : 0) + s + A;
                var H, W = u.select(function(t) {
                    return "caption" == t.dynamicProperty("kind")
                });
                W.each(function(t, e) {
                    t.setrotation(l);
                    H = t;
                    var i, n;
                    if("bottom" == h) {
                        if(P) n = D - t.bbox()[y] - m;
                        else n = m + g + (M ? M.bbox()[y] + _ + s : s);
                        i = r.x
                    } else if("top" == h) {
                        if(P) n = -(D - t.bbox()[y] - m);
                        else n = (M ? -(M.bbox()[y] + s + _) : -s) - g - m;
                        i = r.x
                    } else if("right" == h) {
                        if(P) i = D - t.bbox()[y] - m;
                        else i = m + g + (M ? M.bbox()[y] + s + _ : s);
                        n = r.y
                    } else if("left" == h) {
                        if(P) i = -(D - t.bbox()[y] - m);
                        else i = (M ? -(M.bbox()[y] + s + _) : -s) - g - m;
                        n = r.y
                    }
                    t.setx(i);
                    t.sety(n);
                    t.setratioAnchor(r.ratioAnchor)
                });
                if(P) e = D;
                else e = e + g + (H && H.bbox()[y] && H.bbox()[I] ? H.bbox()[y] + m : 0);
                A += H && H.bbox()[y] && H.bbox()[I] ? H.bbox()[y] + m : 0;
                if(v) {
                    o[y] = A + t.padding;
                    n = o
                } else {
                    var q = this._t._root();
                    n = {};
                    n[y] = e + t.padding;
                    n[I] = q.treeBbox()[I]
                }
                var G, U;
                if(null == this.limitedBboxDimension())
                    if("height" == y) {
                        U = n.height;
                        G = 0
                    } else {
                        G = n.width;
                        U = 0
                    }
                else if("height" == y) {
                    U = this.limitedBboxDimension();
                    G = 0
                } else {
                    G = this.limitedBboxDimension();
                    U = 0
                }
                d(u, h, p, G, U);
                var V = u.select(function(t) {
                    return "background" == t.dynamicProperty("kind")
                });
                V.each(function(t, e) {
                    t.setheight(p.height);
                    t.setwidth(p.width);
                    if("left" == h) t.setratioAnchor({
                        ratiox: 1,
                        ratioy: 0
                    });
                    else if("top" == h) t.setratioAnchor({
                        ratiox: 0,
                        ratioy: 1
                    })
                });
                return n
            },
            __calcuCaptionRatioAncher: function(t, e, i, n) {
                var r;
                if("bottom" == e || "top" == e) {
                    var a = "bottom" == e ? 0 : 1;
                    switch(i) {
                        case "middle":
                            var s = (t[0] + t[1]) / 2;
                            r = n ? {
                                ratiox: .5,
                                ratioy: a
                            } : {
                                ratiox: 1,
                                ratioy: .5
                            };
                            break;
                        case "high":
                            var s = t[1];
                            r = n ? {
                                ratiox: 1,
                                ratioy: a
                            } : {
                                ratiox: 1,
                                ratioy: 1
                            };
                            break;
                        case "low":
                            var s = t[0];
                            r = n ? {
                                ratiox: 0,
                                ratioy: a
                            } : {
                                ratiox: 1,
                                ratioy: 0
                            }
                    }
                } else {
                    var o = "left" == e ? 1 : 0,
                        l = o;
                    switch(i) {
                        case "middle":
                            var c = (t[0] + t[1]) / 2;
                            r = n ? {
                                ratiox: o,
                                ratioy: .5
                            } : {
                                ratiox: .5,
                                ratioy: l
                            };
                            break;
                        case "high":
                            var c = t[0];
                            r = n ? {
                                ratiox: o,
                                ratioy: 0
                            } : {
                                ratiox: 1,
                                ratioy: l
                            };
                            break;
                        case "low":
                            var c = t[1];
                            r = n ? {
                                ratiox: o,
                                ratioy: 1
                            } : {
                                ratiox: 0,
                                ratioy: l
                            }
                    }
                }
                return {
                    ratioAnchor: r,
                    x: s,
                    y: c
                }
            },
            __initialParam: function(t, e, i, r, a) {
                var s, o, l, c, u, d, h, f, p, _, m = {},
                    g = Math.abs(a) / Math.PI * 2,
                    v = g - Math.floor(g);
                if("bottom" == t) {
                    s = "height";
                    o = {
                        ratiox: .5,
                        ratioy: 0
                    };
                    l = v < .001 ? {
                        ratiox: 1,
                        ratioy: .5
                    } : {
                        ratiox: 1,
                        ratioy: 0
                    };
                    f = {
                        ratiox: 0,
                        ratioy: 0
                    };
                    c = n(e[0], 0);
                    u = n(e[1], 0);
                    d = n(0, 0);
                    h = n(0, i);
                    p = n(0, 0);
                    _ = n(0, r)
                } else if("top" == t) {
                    s = "height";
                    o = {
                        ratiox: .5,
                        ratioy: 1
                    };
                    l = v < .01 ? {
                        ratiox: 0,
                        ratioy: .5
                    } : {
                        ratiox: 0,
                        ratioy: 1
                    };
                    f = {
                        ratiox: 0,
                        ratioy: 0
                    };
                    c = n(e[0], 0);
                    u = n(e[1], 0);
                    d = n(0, 0);
                    h = n(0, i);
                    p = n(0, 0);
                    _ = n(0, -r)
                } else if("left" == t) {
                    s = "width";
                    o = {
                        ratiox: 1,
                        ratioy: .5
                    };
                    l = v < .01 ? {
                        ratiox: .5,
                        ratioy: 1
                    } : {
                        ratiox: 1,
                        ratioy: 1
                    };
                    f = {
                        ratiox: 0,
                        ratioy: 0
                    };
                    c = n(-1, e[0]);
                    u = n(-1, e[1]);
                    d = n(0, 0);
                    h = n(i, 0);
                    p = n(0, 0);
                    _ = n(-r, 0)
                } else if("right" == t) {
                    s = "width";
                    o = {
                        ratiox: 0,
                        ratioy: .5
                    };
                    l = v < .01 ? {
                        ratiox: .5,
                        ratioy: 0
                    } : {
                        ratiox: 0,
                        ratioy: 0
                    };
                    f = {
                        ratiox: 0,
                        ratioy: 0
                    };
                    c = n(0, e[0]);
                    u = n(0, e[1]);
                    d = n(0, 0);
                    h = n(i, 0);
                    p = n(0, 0);
                    _ = n(r, 0)
                }
                m.dimension = s;
                m.labelHorizRatioAncher = o;
                m.labelRotationRatioAncher = l;
                m.axisStartPoint = c;
                m.axisEndPoint = u;
                m.gridStartPoint = d;
                m.gridEndPoint = h;
                m.tickRatioAncher = f;
                m.tickStartPoint = p;
                m.tickEndPoint = _;
                return m
            },
            __remainResource: function(t, e, i) {
                var n;
                if(!i || "center" == t.position) n = e;
                else if("top" == t.position) n = {
                    left: e.left,
                    right: e.width,
                    top: e.top + i.height,
                    bottom: e.bottom,
                    width: e.width,
                    height: e.height - i.height
                };
                else if("bottom" == t.position) n = {
                    left: e.left,
                    right: e.right,
                    top: e.top,
                    bottom: e.bottom - i.height,
                    width: e.width,
                    height: e.height - i.height
                };
                else if("left" == t.position) n = {
                    left: e.left + i.width,
                    right: e.right,
                    top: e.top,
                    bottom: e.bottom,
                    width: e.width - i.width,
                    height: e.height
                };
                else if("right" == t.position) n = {
                    left: e.left,
                    right: e.right - i.width,
                    top: e.top,
                    bottom: e.bottom,
                    width: e.width - i.width,
                    height: e.height
                };
                if(n.left - e.left > -1 && n.right - e.right < 1 && n.bottom - e.bottom < 1 && n.top - e.top > -1) return {
                    ok: !0,
                    remainingSpace: n
                };
                else return {
                    ok: !1,
                    remainingSpace: n
                }
            },
            __labelBbox: function(t, e, i, n) {
                var r, a, s = i.isCategory,
                    o = i.scale,
                    l = (this.tickValues(), this._t._tickFormat()),
                    c = this._t._orient(),
                    u = this.scaleRange(),
                    d = null,
                    h = 0,
                    f = (t.select(function(t) {
                        if("tick" === t.dynamicProperty("kind")) {
                            var e = t.vertexes();
                            h = Math.max(Math.abs(e[0].x - e[1].x), Math.abs(e[0].y - e[1].y))
                        }
                    }), t.selectAll(function(t) {
                        return "label" === t.dynamicProperty("kind")
                    }).each(function(t, e) {
                        var i = t.dynamicProperty("data");
                        i = s ? o.getCategoryByIndex(i) : i;
                        t.settext(l(i));
                        t.setDynamicProperty("originTexts", l(i) + "");
                        t.setrotation(0);
                        t.setmaxWidth(1 / 0);
                        var n = t.bbox();
                        if(0 == e) {
                            d = t;
                            a = n.width
                        } else if(a < n.width) {
                            d = t;
                            a = n.width
                        }
                    }));
                r = null == d ? {
                    x: 0,
                    y: 0,
                    width: 0,
                    height: 0
                } : d.bbox();
                switch(c) {
                    case "bottom":
                        var p = {
                            x: e.left,
                            y: e.bottom,
                            width: Math.abs(u[1] - u[0]),
                            height: n
                        };
                        return this._t.__execXLabel(f, d, p);
                    case "top":
                        var p = {
                            x: u[0],
                            y: e.top,
                            width: Math.abs(u[1] - u[0]),
                            height: n
                        };
                        return this._t.__execXLabel(f, d, p);
                    case "left":
                        var p = {
                            x: e.left,
                            y: u[0],
                            width: n,
                            height: Math.abs(u[1] - u[0])
                        };
                        return this._t.__execYLabel(f, d, p);
                    case "right":
                        var p = {
                            x: e.right,
                            y: u[0],
                            width: n,
                            height: Math.abs(u[1] - u[0])
                        };
                        return this._t.__execYLabel(f, d, p)
                }
            },
            __execXLabel: function(t, e, i) {
                var n, r = this._t._scale().type(),
                    a = ("linear" == r ? 0 : i.width / (t.size() + 1) / 2, this.finalAdapter() ? this.finalAdapter() : this._t._labelOption()),
                    o = this._t._labelOption().full,
                    l = "hr" === a.adapter[0];
                if(o) {
                    var c = 0;
                    t.each(function(t, e) {
                        c += t.width()
                    });
                    if(l) n = c > i.width ? i.width / t.size() : i.width;
                    else n = i.width
                } else n = i.width / t.size();
                var u = n - 5,
                    d = u,
                    h = {
                        width: u,
                        height: i.height,
                        rotationWidth: 1.7 * d
                    },
                    f = new s;
                f.configLabelAdapter(a);
                var p = f.tryAdaptLabel.call(f, t, e, h);
                return p
            },
            __execYLabel: function(t, e, i) {
                var n = this._t._scale().type(),
                    r = i.height / t.size(),
                    a = ("linear" == n ? 0 : i.height / (t.size() + 1) / 2, {
                        width: i.width + 1,
                        height: r,
                        rotationHeight: 2 * r,
                        isY: !0
                    }),
                    o = this.finalAdapter() ? this.finalAdapter() : this._t._labelOption(),
                    l = new s;
                l.configLabelAdapter(o);
                var c = l.tryAdaptLabel.call(l, t, e, a);
                return c
            },
            scale: function(t) {
                return this._t._scale()
            },
            tickValues: function() {
                return this._t._tickValues()
            },
            id: function() {
                return this._t._id()
            },
            orient: function() {
                return this._t._orient()
            },
            root: function() {
                return this._t._root()
            },
            __getAxisLayoutById: function(t, i) {
                var n;
                if("continuous" == typeof i && i >= 0 && i < t.length) n = t[i];
                else if("string" == typeof i)
                    for(var r = 0; r < t.length; r++)
                        if(t[r].id() === i) n = t[r];
                e(n, "can not find axis:" + i);
                return n
            }
        }, [c("_scale"), c("_orient"), c("_defaultOrient"), c("_ticks"), c("_tickValues"), c("_tickFormat"), c("_labelOption"), c("_labelRange"), c("_root"), c("_hidden"), c("_caption"), c("_id"), "range", "axisTheme", "finalAdapter", "scaleRange", "maxbbox", "lastLabelActor", "limitedBboxDimension"]);
    return h
}, 571, 567, 652, 651, 566, 845, 846, 654, 847);
I$(740, function(t, e, i, n, r) {
    function a(t, n, a, s, c) {
        if(0 == t.length) return 0;
        var u, d = o.create(),
            h = l.select(d),
            f = "x" == s ? "height" : "width",
            p = i.create(),
            _ = -(1 / 0),
            m = function(t) {
                return function(e) {
                    var i, n;
                    if("y" == t) {
                        i = {
                            x: 0,
                            left: 0,
                            top: 0,
                            y: 0,
                            width: a[f],
                            right: a[f],
                            height: e,
                            bottom: e
                        };
                        n = [i.height, 0]
                    } else {
                        i = {
                            x: 0,
                            left: 0,
                            y: 0,
                            top: 0,
                            right: e,
                            width: e,
                            height: a[f],
                            bottom: a[f]
                        };
                        n = [0, i.width]
                    }
                    return {
                        resource: i,
                        range: n
                    }
                }
            }(s),
            g = "x" == s ? "xAxis" : "yAxis";
        t.map(function(t, i) {
            var a = c.getProp(g, t.className),
                s = (t.position, m(n[i]));
            t.range = s.range;
            var o = t.scale,
                l = 0;
            if(t.tickCount == -1) {
                var d = s.range,
                    v = Math.abs(d[0] - d[1]),
                    y = t.tickDensity;
                l = v * y / 100
            } else l = t.tickCount;
            l = Math.round(l);
            l = l <= 0 ? 1 : l;
            o.ticksCount(l);
            o.range(s.range);
            t.tickCount = l;
            if(t.domain) o.domain(t.domain);
            var b = e(h, o.ticks(), t);
            b.forEach(function(t) {
                r.applyMarkSelectionMapTheme(a, t)
            });
            var x = s.resource,
                $ = p.layout(t, x, h, a),
                w = $.info.treeBbox[f];
            if(_ < w) {
                _ = w;
                u = $.info.adapterExeced
            }
        });
        return {
            maxDimSize: _,
            adapterExeced: u
        }
    }

    function s(t, e) {
        var i = [],
            n = 0;
        if("x" == e)
            for(var r = 0; r < t[0].length; r++)
                for(var a = t[0][r], s = 0; s < a[0].length; s++) {
                    var o = a[0][s];
                    i.push(o.logicSpace.width)
                } else
            for(var r = 0; r < t.length; r++)
                for(var a = t[r][0], s = 0; s < a.length; s++) {
                    var o = a[s][0];
                    i.push(o.logicSpace.height)
                }
        n = i.reduce(function(t, e) {
            return t + e
        });
        return {
            sizeArray: i,
            totalSize: n
        }
    }
    var o = t.ContainerSprite,
        l = t.selection,
        c = {};
    c.calculateDimSizeArrayInAlignedAxes = s;
    c.getMaxDimSizeInAlignedAxes = a;
    return c
}, 566, 735, 778, 656, 654);
I$(821, function(t, e, i, n, r, a) {
    function s(t, e) {
        for(var i, n = t.chartType, r = t.domainMatrix, a = [], s = t.data.dataSets, l = t.cells, c = l[0][0].marks[0], u = e.getProp(c.type, c.className).mark, d = 0, h = 0, f = u.styles, p = "function" == typeof f, _ = 0; _ < r.length; _++) {
            a[_] = [];
            for(var m = 0; m < r[_].length; m++) {
                a[_][m] = [];
                for(var g = r[_][m], v = 0; v < g.length; v++) {
                    a[_][m][v] = [];
                    for(var y = 0; y < g[v].length; y++) {
                        var b = g[v][y],
                            c = l[v][y].marks[0];
                        if("cartesian" == n && "text" == c.type) {
                            var x = (b.x[0], b.y[0], c.xField, c.yField, s[_][m][c.from]);
                            x.map(function(t, e) {
                                var n = c.text ? c.text(t) : ["Abc"];
                                if(p) i = o(n, f(t, e), 0);
                                else i = o(n, f, 0);
                                d = i.width > d ? i.width : d;
                                h = i.height > h ? i.height : h
                            })
                        }
                    }
                }
            }
        }
        return {
            width: d,
            height: h
        }
    }
    var o = r.bboxHelper.multilinetextBbox;
    return s
}, 654, 740, 670, 656, 566, 675);
I$(822, function(t, e, i, n, r, a) {
    function s(e, i) {
        var r, a, s = e.chartType,
            l = e.domainMatrix,
            c = (e.data.dataSets, e.cells),
            u = c[0][0].marks[0],
            d = (i.getProp(u.type, u.className).mark, 0),
            h = 0,
            f = {},
            p = c[0][0].axes,
            _ = n.find(p, function(t) {
                return 1 == t.dim
            });
        if(_) {
            a = i.getProp("yAxis", _.className).label.styles;
            h = o("NEV", a[0].font, 0).height
        } else h = 0;
        for(var m = 0; m < l[0].length; m++)
            for(var g = l[0][m], v = 0; v < g[0].length; v++) {
                var y = g[0][v],
                    b = c[0][v];
                if("cartesian" == s && "text" == u.type) {
                    var x = y.x && y.x.length && y.x[0].value,
                        p = b.axes,
                        _ = n.find(p, function(t) {
                            return 0 == t.dim
                        });
                    if(x && _) {
                        var $ = t.transformToFunction(_.format, function(t) {
                            return t
                        });
                        a = i.getProp("xAxis", _.className).label.styles;
                        x.forEach(function(t) {
                            var e = $(t);
                            if(!f[e]) {
                                r = o(e, a[0].font, 0);
                                d = Math.max(d, r.width);
                                f[e] = !0
                            }
                        })
                    } else d = 0
                }
            }
        return {
            width: d,
            height: h
        }
    }
    var o = (r.MultilineText.create(), r.bboxHelper.textBbox);
    return s
}, 654, 740, 670, 656, 566, 675);
I$(741, function(t, e, i, n, r, a) {
    function s(t, e, i, n, s, u) {
        var _, m, g = s && s.textTable,
            u = u || 0;
        if(g) {
            var v = a(t, n),
                y = r(t, n);
            _ = Math.max(u, Math.max(v.width, y.width)) + f;
            m = Math.max(v.height, y.height) + p
        } else {
            _ = d < u ? u : d;
            m = h
        }
        for(var b = t.chartType, x = t.domainMatrix, $ = [], w = 0; w < x.length; w++) {
            $[w] = [];
            for(var k = 0; k < x[w].length; k++) {
                $[w][k] = [];
                for(var S = x[w][k], C = 0; C < S.length; C++) {
                    $[w][k][C] = [];
                    for(var T = 0; T < S[C].length; T++) {
                        var E = S[C][T];
                        if("cartesian" == b) {
                            var I = E.x[0],
                                A = E.y[0],
                                M = c(I),
                                D = c(A);
                            $[w][k][C][T] = {
                                xRangeCount: M,
                                yRangeCount: D,
                                left: i.left,
                                right: i.right,
                                top: i.top,
                                bottom: i.bottom
                            }
                        } else if("map" == b) $[w][k][C][T] = {
                            xRangeCount: 1,
                            yRangeCount: 1,
                            left: 0,
                            right: 0,
                            top: 0,
                            bottom: 0
                        }
                    }
                }
            }
        }
        var P = (t.cells, o($, e, s, _, m));
        l($, P, e);
        return {
            gSpaceMatrix: $,
            perSizeObj: P,
            xNeedScroll: P.xNeedScroll,
            yNeedScroll: P.yNeedScroll
        }
    }

    function o(t, e, i, n, r) {
        function a(t, i, n, r, a, s) {
            var t, i, n, o, l, c = (r && r.xDiscreteMaxSizeRatio ? r.xDiscreteMaxSizeRatio : 1) * a,
                d = (r && r.yDiscreteMaxSizeRatio ? r.yDiscreteMaxSizeRatio : 1) * s,
                h = "width" == t ? c : d,
                f = !1;
            l = i ? (e[t] - n) / i : 0;
            if(i < 0) {
                o = -l;
                if(o < u) {
                    o = u;
                    f = !0
                }
            } else if(l < h) {
                o = h;
                f = !0
            } else if(i) {
                o = h;
                f = o > l
            } else o = 0;
            return {
                perSize: o,
                needScroll: f
            }
        }

        function s(t, i, n, r, a, s) {
            var o = i ? (e[t] - n) / i : 0;
            if(i < 0) o = -o;
            return {
                perSize: o,
                needScroll: !1
            }
        }

        function o(t, i, n, r, a, s) {
            var t, i, n, o, l, c = !1,
                d = (r && r.xDiscreteMaxSizeRatio ? r.xDiscreteMaxSizeRatio : 1) * a,
                h = (r && r.yDiscreteMaxSizeRatio ? r.yDiscreteMaxSizeRatio : 1) * s,
                f = "width" == t ? d : h;
            l = i ? (e[t] - n) / i : 0;
            if(i < 0) {
                o = -l;
                if(o < u) {
                    o = u;
                    c = !0
                }
            } else if(l < f) {
                o = f;
                c = !0
            } else o = l;
            return {
                perSize: o,
                needScroll: c
            }
        }
        for(var l, c, d = i && i.view, h = 0, f = 0, p = 0, _ = 0, m = 0; m < t.length; m++)
            for(var g = t[m][0], v = 0; v < g.length; v++) {
                var y = g[v][0];
                h += y.yRangeCount;
                p += y.top + y.bottom
            }
        for(var m = 0; m < t[0].length; m++)
            for(var g = t[0][m], v = 0; v < g[0].length; v++) {
                var y = g[0][v];
                f += y.xRangeCount;
                _ += y.left + y.right
            }
        if("fitWidth" == d) {
            l = s("width", f, _, i, n, r);
            c = o("height", h, p, i, n, r)
        } else if("fitHeight" == d) {
            l = o("width", f, _, i, n, r);
            c = s("height", h, p, i, n, r)
        } else if("normal" == d) {
            l = a("width", f, _, i, n, r);
            c = a("height", h, p, i, n, r)
        } else if("fitNormal" == d) {
            l = o("width", f, _, i, n, r);
            c = o("height", h, p, i, n, r)
        } else if("tableFitWidth" == d) {
            l = o("width", f, _, i, n, r);
            c = a("height", h, p, i, n, r)
        } else {
            l = s("width", f, _, i, n, r);
            c = s("height", h, p, i, n, r)
        }
        return {
            xPerSize: l.perSize,
            yPerSize: c.perSize,
            xNeedScroll: l.needScroll,
            yNeedScroll: c.needScroll
        }
    }

    function l(t, e, i) {
        for(var n, r, a = e.xPerSize, s = e.yPerSize, o = 0, l = 0, c = 0, u = 0, d = i.x, h = i.y, f = 0; f < t.length; f++) {
            h += u;
            d = i.x;
            c = 0;
            for(var p = 0; p < t[f].length; p++) {
                var _ = t[f][p];
                d += c;
                r = 0;
                u = 0;
                for(var m = {
                    x: d,
                    y: h
                }, g = 0; g < _.length; g++) {
                    c = 0;
                    n = 0;
                    for(var v = 0; v < _[g].length; v++) {
                        var y = _[g][v];
                        o = Math.abs(y.xRangeCount * a) + y.left + y.right || .5;
                        l = Math.abs(y.yRangeCount * s) + y.top + y.bottom || .5;
                        var b = {
                                x: n + d,
                                y: r + h,
                                width: o,
                                height: l
                            },
                            x = {
                                x: y.left,
                                y: y.top,
                                width: b.width - y.left - y.right,
                                height: b.height - y.bottom - y.top
                            };
                        y.logicSpace = b;
                        y.marklogicSpace = x;
                        n += o;
                        c += o
                    }
                    r += l;
                    u += l
                }
                m.width = c;
                m.height = u;
                _.logicSpace = m
            }
        }
    }

    function c(t) {
        if(null == t) return 1;
        else if("continuous" == t.type) return -1;
        else return t.value.length
    }
    var u = (n.discreteTickMinStep, n.continuousCellDimMinSize),
        d = (n.AxisPositionHash, n.xDiscreteTickMaxStep),
        h = n.yDiscreteTickMaxStep,
        f = 20,
        p = 18;
    return s
}, 654, 740, 670, 675, 821, 822);
I$(742, function(t, e) {
    function i(t, e, i, a, l, c, h, f, p) {
        if(a && (0 != a.fieldNames.length || "" != a.title)) {
            var _ = f && f.textTable,
                m = f && f.view,
                g = a.fieldNames,
                v = a.title,
                y = a.titleArray;
            if(!y)
                if(v) y = v.split("/");
                else y = g;
            var b = y.map(function(t) {
                var e = p && p[t];
                return e || t
            });
            y = b;
            var x = {};
            if(g.length) {
                var $ = "x" == l ? t[0].length : t.length,
                    w = o(a, g);
                w.fields = g;
                var k, S;
                k = $ / w[g.length - 1].length;
                S = w[g.length - 1];
                var C = "x" == l ? t[0] : t.map(function(t) {
                    return t[0]
                });
                if(_) var C = function() {
                    for(var t = [], e = {
                        x: "width",
                        y: "height"
                    }, i = 0; i < C.length; ++i) {
                        var n = C[i],
                            r = n[0][0][l + "RangeCount"],
                            a = n[0][0]["logicSpace"];
                        if(r <= 1) t.push(n);
                        else
                            for(var s = a[e[l]], o = s / r, c = a[l], u = 0; u < r; ++u) {
                                var d = {
                                    xRangeCount: n[0][0]["xRangeCount"],
                                    yRangeCount: n[0][0]["yRangeCount"],
                                    left: 0,
                                    right: 0,
                                    top: 0,
                                    bottom: 0,
                                    logicSpace: {
                                        x: a["x"],
                                        y: a["y"],
                                        width: a["width"],
                                        height: a["height"]
                                    },
                                    marklogicSpace: {
                                        x: 0,
                                        y: 0,
                                        width: a["width"],
                                        height: a["height"]
                                    }
                                };
                                d[l + "RangeCount"] = 1;
                                d["logicSpace"][l] = c + o * u;
                                d["logicSpace"][e[l]] = o;
                                d["marklogicSpace"][e[l]] = o;
                                t.push(d)
                            }
                    }
                    return t
                }();
                var T = s(g, y, w, l, c, h),
                    E = u(l, i),
                    I = "x" == l && ("fitHeight" == m || "fitNormal" == m || "tableFitWidth" == m) ? d(w, h) : 0,
                    A = 0,
                    M = [],
                    D = 0;
                S.map(function(t, e) {
                    for(var i = 0, n = 0; n < T.length - 1; n++) i += T[n];
                    var r = E([C[e].logicSpace], i, T[g.length - 1], !0);
                    if(r.width < I) {
                        D += I - r.width;
                        r.width = I
                    }
                    r.x += D;
                    t.logicSpace = r;
                    M.push(r)
                });
                S.logicSpace = n(M);
                for(var P = g.length - 2; P > -1; P--) {
                    for(var A = 0, N = 0, M = [], L = 0; L < P; L++) N += T[L];
                    C = w[P + 1];
                    var S = w[P];
                    S.map(function(t) {
                        for(var e = [], i = A; i < A + t.childrenNumber; i++) e.push(C[i].logicSpace);
                        var n = E(e, N, T[P]);
                        t.logicSpace = n;
                        M.push(n);
                        A += t.childrenNumber
                    });
                    S.logicSpace = n(M)
                }
                w.minLastLevelWidth = I;
                x.titleValuesMatrix = w
            } else x.titleValuesMatrix = [];
            var R = r(g, y, T, t.space, l, c, h, e);
            x.titleNameArray = R;
            return x
        }
    }

    function n(t) {
        for(var e = 1 / 0, i = -(1 / 0), n = 1 / 0, r = -(1 / 0), a = 0; a < t.length; a++) {
            var s = t[a];
            e = e > s.x ? s.x : e;
            i = i < s.x + s.width ? s.x + s.width : i;
            n = n > s.y ? s.y : n;
            r = r < s.y + s.height ? s.y + s.height : r
        }
        return {
            x: e,
            y: n,
            width: i - e,
            height: r - n
        }
    }

    function r(t, e, i, n, r, s, o, l) {
        var c, u, d, h = [],
            f = 0;
        if(null == l) d = a(t, e, r, s, o) + _[r];
        else d = l;
        if("y" == r) t.map(function(t, n) {
            if(n) f += i[n - 1];
            c = {
                x: f,
                y: 0,
                width: i[n],
                height: d
            };
            u = {
                logicSpace: c,
                value: t,
                text: e[n]
            };
            h.push(u)
        });
        else {
            titleString = e.join("/");
            c = {
                x: 0,
                y: 0,
                width: n.width,
                height: d
            };
            u = {
                logicSpace: c,
                value: titleString
            };
            h.push(u)
        }
        return h
    }

    function a(t, e, i, n, r) {
        var a, s = -(1 / 0),
            o = r.backgroundText.textFont;
        if("y" == i)
            for(var l = 0; l < t.length; l++) {
                a = p(t[l], o);
                s = s < a.height ? a.height : s
            } else {
            text = e.join("/");
            s = p(text, o).height
        }
        return s
    }

    function s(t, e, i, n, r, a) {
        var s, o, l, c = [];
        if("x" == n) l = "height";
        else l = "width";
        f.setmaxWidth(1 / 0);
        f.setmaxHeight(1 / 0);
        for(var u = r.backgroundText.textFont, d = a.backgroundText.textFont, h = (a.format, r.format), m = 0; m < t.length; m++) {
            var g = -(1 / 0);
            if("y" == n) {
                s = e[m];
                o = p(s, d);
                g = o[l]
            }
            var v = i[m];
            v.map(function(t) {
                if(void 0 == t.text) {
                    var e = h ? h(t.value, m) : t.value;
                    t.text = e
                }
                o = p(t.text, u);
                g = o[l] > g ? o[l] : g
            });
            g += _[n];
            c.push(g)
        }
        return c
    }

    function o(t, e) {
        for(var i = [], n = 0; n < e.length; n++) {
            var r = l(t, n);
            if(0 == r.length) break;
            i[n] = r
        }
        return i
    }

    function l(t, e) {
        var i = [];
        c(t, -1, i, e);
        return i
    }

    function c(t, e, i, n) {
        if(e < n)
            for(var r = 0; r < t.subs.length; r++) {
                var a = t.subs[r];
                c(a, e + 1, i, n)
            } else i.push({
            value: t.value ? t.value : t.title,
            text: t.value ? t.title : void 0,
            childrenNumber: t.subs && t.subs.length ? t.subs.length : 0
        });
        return i
    }

    function u(t, e) {
        var i = "x" == t ? "height" : "width",
            n = "x" == t ? "width" : "height";
        return function(e, r, a, s) {
            var o = e[0].x,
                l = e[0].y;
            if("x" == t) {
                l = r;
                o = o
            } else {
                o = r;
                l = l
            }
            for(var c = {
                x: o,
                y: l
            }, u = 0, d = 0; d < e.length; d++) u += e[d][n];
            c[i] = a;
            c[n] = u;
            return c
        }
    }

    function d(t, e) {
        for(var i = e.backgroundText.textFont, n = e.format, r = t.length - 1; r >= 0; r--)
            for(var a = t[r], s = 0, o = 0, l = a.length; o < l; o++) {
                for(var c = a[o], u = c.childrenNumber, d = 0, h = s; h < s + u; h++) {
                    var f = t[r + 1][h];
                    d += f.lastChildrenNumber
                }
                c.lastChildrenNumber = 0 == d ? 1 : d;
                s += u
            }
        for(var m = 0, r = 0, l = t.length; r < l; r++) {
            var g = t[r],
                v = 0;
            g.map(function(t) {
                t.text = t.text ? t.text : n ? n(t.value, r) : t.value;
                bbox = p(t.text, i);
                var e = (bbox.width + _["x"]) / t.lastChildrenNumber;
                v = v < e ? e : v
            });
            m = m < v ? v : m
        }
        return m
    }
    var h = t.AutoWrapText,
        f = h.create(),
        p = (t.bboxHelper.circleBbox, t.bboxHelper.textBbox),
        _ = (t.bboxHelper.multilinetextBbox, {
            x: 20,
            y: 20
        });
    return i
}, 566, 656);
I$(743, function(t, e, i, n, r, a, s) {
    function o(t, i, n, r, a) {
        var o = {};
        for(var u in n) {
            var d = n[u],
                h = "left" == u || "right" == u ? "y" : "x",
                f = "x" == h ? "height" : "width",
                p = i && i[u],
                _ = t[h],
                m = e.getMaxDimSizeInAlignedAxes(d, _, r, h, a),
                g = null == m.maxDimSize ? 0 : m.maxDimSize,
                v = c[f] + s.axisSliderOffset;
            g = n[u].guidelineSlider ? v > g ? v : g : g;
            var y = l(d, _, m, p, r, h),
                b = {
                    commonAxisInfoAndResource: y,
                    maxDimSize: g
                };
            o[u] = b
        }
        return o
    }

    function l(t, e, i, n, a, s) {
        if(0 != t.length) {
            var o = 0,
                l = 0,
                c = ("x" == s ? a.height : a.width, null == n ? i.maxDimSize : Math.max(i.maxDimSize, n)),
                u = i.adapterExeced,
                d = t.map(function(t, i) {
                    var n;
                    t.position;
                    t.fixedDimension = c;
                    t.finalAdapter = {
                        adapter: u
                    };
                    if("x" == s) {
                        n = {
                            x: o,
                            y: 0,
                            width: e[i],
                            height: c
                        };
                        o = n.x + e[i]
                    } else {
                        n = {
                            x: 0,
                            y: l,
                            width: c,
                            height: e[i]
                        };
                        l = n.y + e[i]
                    }
                    return {
                        axisInfo: t,
                        logicSpace: r.area4ToArea8(n)
                    }
                });
            d.tickGrid = t.tickGrid;
            d.tableGrid = t.tableGrid;
            return d
        }
    }
    var c = (t.ContainerSprite, t.selection, t.Path.create({
        pathElements: a.sliderData
    }).localBbox());
    return o
}, 566, 740, 735, 778, 654, 704, 675);
I$(744, function() {
    function t() {
        var t = window.document.location.href,
            e = new RegExp(".*(?=/examples/)"),
            i = e.exec(t);
        if(!i || !i.length) src = "/res/map";
        else src = i[0] + "/res";
        return src
    }

    function e(e, i, r) {
        var a, s = Object.create(e);
        if(e && e.src) a = e.src;
        else a = t();
        var o = e && e.tools ? e.tools : ["reset", "zoomin", "zoomout", "frameChoose", "search"],
            l = e && e.position ? e.position : "middle_bottom",
            c = n(l, i, o, a);
        s.src = a;
        s.tools = o;
        s.position = l;
        s.toolsMap = c[0];
        s.space = c[1];
        return s
    }

    function i(t, e, i, n, o) {
        var l = {},
            u = i.length,
            d = (i.map(function(e, i) {
                var u = {
                    x: "V" === o ? t.x : t.x + (a + s) * i,
                    y: "V" === o ? t.y + (r + s) * i : t.y,
                    width: a,
                    height: r
                };
                if("reset" == e) stateImgSrc = {
                    initial: n + c[e],
                    dirty: n + c[e + "_dirty"]
                };
                else if("frameChoose" == e) stateImgSrc = {
                    initial: n + c[e],
                    on: n + c[e + "_clicked"]
                };
                else stateImgSrc = {
                        initial: n + c[e]
                    };
                l[e] = {
                    bbox: u,
                    stateImgSrc: stateImgSrc
                }
            }), {
                x: t.x,
                y: t.y,
                width: "V" === o ? a : (a + s) * u,
                height: "V" === o ? (r + s) * u : r
            });
        return [l, d]
    }

    function n(t, e, n, c) {
        var u = {},
            d = n.length;
        if("left_top" == t) {
            u.x = e.x + s;
            u.y = e.y + s
        } else if("right_bottom" == t) {
            var h = e.y + e.height - l - d * r;
            if(e.y > h) u.y = e.y + e.height - s - d * r;
            else u.y = h;
            var f = e.x + e.width - o - a;
            if(e.x > f) u.x = e.x + e.width - s - a;
            else u.x = f
        } else if("middle_bottom" == t) {
            var p = (e.width - d * (a + s)) / 2;
            if(p < 0) p = 0;
            u.x = e.x + p;
            u.y = e.y + e.height - l
        }
        if("left_top" == t || "right_bottom" == t) return i(u, e, n, c, "V");
        if("middle_bottom" == t) return i(u, e, n, c, "H");
        else return []
    }
    var r = 30,
        a = 30,
        s = 0,
        o = 25,
        l = 60,
        c = {
            reset: "/fix.svg",
            reset_dirty: "/fix-a.svg",
            search: "/search.svg",
            frameChoose: "/region.svg",
            frameChoose_clicked: "/region-a.svg",
            zoomin: "/zoomin.svg",
            zoomout: "/zoomout.svg"
        };
    return e
});
I$(671, function(t, e, i, n, r, a, s) {
    function o(s, o) {
        function c(t, e, i) {
            if(!i || i.changed === !0) return i;
            var n = 0 == t.length ? e : t;
            if(0 == n.length) return i;
            if(!n[0].scale || "discrete" != n[0].scale.type()) return i;
            for(var r = n[0].isXAxis, s = [], o = [i]; 0 != o.length;) {
                var l = o[0];
                if(l.subs && l.subs.length > 0)
                    for(var c = 0; c < l.subs.length; ++c) o.push(l.subs[c]);
                else s.push(l);
                o.shift()
            }
            for(var c = 0; c < s.length; ++c) {
                var u = n[c].format;
                s[c].subs = n[c].scale.domain().map(function(t) {
                    return {
                        title: u(a.unescapeNull(t)),
                        value: a.unescapeNull(t),
                        subs: []
                    }
                });
                if(!r) s[c].subs.reverse()
            }
            i.fieldNames.push(n[0].fieldName || "");
            i.changed = !0;
            return i
        }

        function u(t) {
            function e(t, i) {
                if(t) {
                    if("总计 " == t.title)
                        if(!i) i = !0;
                        else t.title = "";
                    for(var n = 0; n < t.subs.length; n++) {
                        var r = t.subs[n];
                        e(r, i)
                    }
                }
            }
            e(t, !1)
        }

        function v(e, i, n) {
            var a, c, u, g, v, w, S, I, A, P = {},
                N = e[0].length * e[0][0][0].length,
                j = R ? 1 : 1 / N,
                z = e.length * e[0][0].length,
                B = R ? 1 : 1 / z,
                H = !0,
                G = n.titlesToHideX,
                U = n.categoriesToHideX,
                V = n.titlesToHideY,
                Y = n.categoriesToHideY,
                lt = n.commonAxisesToHide,
                ct = 0,
                ut = 0;
            do {
                ct = w && w.xPivotAxisInfo && w.xPivotAxisInfo.titleValuesMatrix && w.xPivotAxisInfo.titleValuesMatrix.minLastLevelWidth;
                c = b(ot, it, ct);
                u = c.gSpaceMatrix;
                X = c.xNeedScroll;
                K = c.yNeedScroll;
                Q = X ? m.horizontal : 0;
                tt = K ? m.vertical : 0;
                var g, v, dt = t.calculateDimSizeArrayInAlignedAxes(u, "x");
                at = dt.totalSize;
                g = dt.sizeArray;
                var ht = t.calculateDimSizeArrayInAlignedAxes(u, "y");
                st = ht.totalSize;
                v = ht.sizeArray;
                var ft = {
                    x: 0,
                    y: 0,
                    width: at,
                    height: st
                };
                if(rt + at + et.left + et.right >= i.width) W = !0;
                if(nt + st + et.top + et.bottom >= i.height) q = !0;
                var pt = {
                    x: ot.x,
                    y: ot.y,
                    width: W ? ot.width : at,
                    height: q ? ot.height : st
                };
                u.space = pt;
                u.logicSpace = ft;
                P.x = g;
                P.y = v;
                cartesianAxisResource = {
                    x: rt + i.x,
                    y: nt + i.y,
                    width: at * j + et.left + et.right,
                    height: st * B + et.top + et.bottom
                };
                cartesianAxisResource.width = et.left + et.right + (W ? at * j : i.width - rt);
                cartesianAxisResource.height = et.top + et.bottom + (q ? st * B : i.height - nt);
                if(C) I = {
                    top: c.perSizeObj.yPerSize
                };
                a = k(P, null, cartesianAxisResource, lt);
                if("cartesian" == O)
                    if(R) {
                        et.bottom = a.bottom.maxDimSize;
                        et.left = a.left.maxDimSize;
                        et.top = a.top.maxDimSize;
                        et.right = a.right.maxDimSize
                    } else {
                        H = H && a.bottom.maxDimSize == it.bottom;
                        it.bottom = a.bottom.maxDimSize;
                        H = H && a.left.maxDimSize == it.left;
                        it.left = a.left.maxDimSize;
                        H = H && a.top.maxDimSize == it.top;
                        it.top = a.top.maxDimSize;
                        H = H && a.right.maxDimSize == it.right;
                        it.right = a.right.maxDimSize
                    }
                else if("map" == O) {
                    it.left = 0;
                    it.right = 0;
                    it.top = 0;
                    it.bottom = 0;
                    H = !0
                }
                w = x(u, et.top, null, G, U);
                A = null;
                if(T && w) {
                    var _t = w.xPivotAxisInfo && w.xPivotAxisInfo.titleValuesMatrix,
                        mt = w.xPivotAxisInfo && w.xPivotAxisInfo.titleNameArray,
                        gt = _t && _t[_t.length - 1] && _t[_t.length - 1].logicSpace,
                        vt = mt && mt[mt.length - 1] && mt[mt.length - 1].logicSpace;
                    A = gt.height || vt.height || null
                }
                S = $(u, et.left, et.top, nt, A, V, Y);
                nt = w ? w.height : 0;
                rt = S ? S.width : 0;
                var yt = S ? S.titleHeight : 0,
                    bt = nt + et.top > yt ? nt + et.top : yt,
                    xt = {
                        x: rt + et.left + i.x,
                        y: bt + i.y
                    };
                if(W) {
                    xt.width = i.width - rt - et.left - et.right - tt;
                    if(xt.width < 0) J = !0;
                    else if(Z) xt.width -= m.horizontal
                } else xt.width = at;
                if(q) {
                    xt.height = i.height - et.bottom - bt - Q;
                    if(xt.height < 0) Z = !0;
                    else if(J) xt.height -= m.vertical
                } else xt.height = st;
                var $t = .8;
                if(rt > $t * i.width && (xt.width < i.width * $t || xt.width < 0)) {
                    xt.width = Math.min(at, Math.floor(i.width * $t));
                    J = !0
                }
                if(nt > $t * i.height && (xt.height < i.height * $t || xt.height < 0)) {
                    xt.height = Math.min(st, Math.floor(i.height * $t));
                    Z = !0
                }
                var wt = ot.x == xt.x && ot.y == xt.y && ot.width == xt.width && ot.height == xt.height && H;
                ot = xt;
                H = !0;
                ut++
            } while (!wt && ut < 5);
            if(5 == ut) console.warn("sceneanalysis iterate too much times, maybe caused by a illegal input babel");
            var kt = {
                x: ft.x,
                y: ft.y,
                width: ft.width,
                height: ft.height
            };
            if(F) c.zoomInfo = r(F, ot, o);
            if(X) c.xScrollSpace = {
                x: ot.x,
                y: ot.y + ot.height + et.bottom,
                width: ot.width,
                height: Q
            };
            if("xy" == D) u.crossMark = !0;
            if(K) c.yScrollSpace = {
                x: ot.x + ot.width + et.right,
                y: ot.y,
                width: tt,
                height: ot.height
            };
            if(R) {
                c.commonAxisInfos = {};
                for(var St in L) {
                    var Ct, Tt, Et;
                    Et = L[St];
                    if(Et && Et.length) {
                        if("bottom" == St) {
                            Ct = {
                                x: rt + et.left + i.x,
                                y: ot.y + ot.height,
                                width: ot.width,
                                height: et.bottom
                            };
                            Tt = {
                                x: 0,
                                y: 0,
                                width: at,
                                height: et.bottom
                            };
                            M = "x" == D
                        } else if("top" == St) {
                            Ct = {
                                x: rt + et.left + i.x,
                                y: ot.y - et.top,
                                width: ot.width,
                                height: et.top
                            };
                            Tt = {
                                x: 0,
                                y: 0,
                                width: at,
                                height: et.top
                            };
                            M = "x" == D
                        } else if("left" == St) {
                            Ct = {
                                x: rt + i.x,
                                y: ot.y,
                                width: et.left,
                                height: ot.height
                            };
                            Tt = {
                                x: 0,
                                y: 0,
                                width: et.left,
                                height: st
                            };
                            M = "y" == D
                        } else {
                            Ct = {
                                x: rt + ot.width + et.left + i.x,
                                y: ot.y,
                                width: et.right,
                                height: ot.height
                            };
                            Tt = {
                                x: 0,
                                y: 0,
                                width: et.right,
                                height: st
                            };
                            M = "y" == D
                        }
                        c.commonAxisInfos[St] = {
                            dimSize: et[_[St]],
                            infos: a[St].commonAxisInfoAndResource,
                            space: Ct,
                            logicSpace: Tt,
                            orient: St,
                            slider: M
                        }
                    } else;
                }
            }
            l(E, w, S, u, c.commonAxisInfos, c.xScrollSpace, c.yScrollSpace);
            var It = !(1 == u.length && 1 == u[0].length && 1 == u[0][0].length && 1 == u[0][0][0].length);
            c.xPivotAxisInfo = w ? w.xPivotAxisInfo : null;
            c.yPivotAxisInfo = S ? S.yPivotAxisInfo : null;
            h(E, c.xPivotAxisInfo, C, c.yPivotAxisInfo, T);
            f(E, c.yPivotAxisInfo, C, X, K, T);
            var At = !(c.xPivotAxisInfo || L && L.top && L.top.length);
            p(E, u, It, C, w, S, At, X, K);
            for(var St in c.commonAxisInfos) d(E, c.commonAxisInfos[St], It, C, c.xPivotAxisInfo, c.yPivotAxisInfo, X, K);
            if(s.graph) y(u, c.perSizeObj);
            u.scrollLogicSpace = kt;
            if(X) kt.width += E;
            if(K) kt.height += E;
            return c
        }

        function y(t, e) {
            for(var i, n = (e.xPerSize, e.yPerSize), r = t.logicSpace, a = [], o = r.y, l = 0; l < t.length; l++)
                for(var c = t[l][0], u = 0; u < c.length; u++)
                    for(var d = c[u][0], h = 0; h < d.yRangeCount; h++) {
                        i = {
                            x: r.x,
                            y: o,
                            width: r.width,
                            height: n
                        };
                        a.push(i);
                        o += n
                    }
            a.className = s.graph.className;
            t.colorRects = a;
            return a
        }

        function b(t, i, n) {
            var r = {
                    x: 0,
                    y: 0,
                    width: t.width,
                    height: t.height
                },
                a = e(s, r, i, o, j, n);
            return a
        }

        function x(t, e, n, r, a) {
            var s = "x",
                l = o.getProp("pivotAxis", U),
                c = o.getProp("pivotAxisTitle", G),
                u = i(t, n, e, P, s, l, c, j, S);
            if(u) {
                if(r || a) w(u, r, a, s);
                var d = u.titleValuesMatrix,
                    h = u.titleNameArray;
                u.className = U;
                h.className = G;
                d.className = U;
                var f = 0;
                d.map(function(t) {
                    f += t[0].logicSpace.height
                });
                var p = u.titleNameArray[0].logicSpace,
                    _ = {
                        x: t.space.x,
                        y: A.y,
                        width: p.width,
                        height: p.height
                    };
                u.titleNameArray.space = _;
                var m = {
                    x: 0,
                    y: 0,
                    width: u.titleNameArray.space.width,
                    height: u.titleNameArray.space.height
                };
                u.titleNameArray.logicSpace = m;
                var g = {
                    x: t.space.x,
                    y: u.titleNameArray.space.height + A.y,
                    width: ot.width,
                    height: nt - p.height
                };
                u.titleValuesMatrix.space = g;
                var v = u.titleValuesMatrix;
                v.map(function(t, e) {
                    var i = t[0].logicSpace;
                    t.space = {
                        x: i.x,
                        y: i.y,
                        width: i.width,
                        height: i.height
                    }
                });
                var y = {
                    x: 0,
                    y: 0,
                    width: at,
                    height: u.titleValuesMatrix.space.height
                };
                u.titleValuesMatrix.logicSpace = y;
                return {
                    height: f + h[0].logicSpace.height,
                    xPivotAxisInfo: u
                }
            }
        }

        function $(t, e, n, r, a, s, l) {
            var c = "y",
                u = o.getProp("pivotAxis", Y),
                d = o.getProp("pivotAxisTitle", V),
                h = i(t, a, e, N, c, u, d, j, S);
            if(h) {
                if(s || l) w(h, s, l, c);
                var f = h.titleValuesMatrix;
                f.className = Y;
                var p = 0;
                f.map(function(t) {
                    p += t[0].logicSpace.width
                });
                if(h.titleNameArray[0]) {
                    h.titleNameArray.className = V;
                    for(var _ = {
                        height: 0,
                        width: 0,
                        x: 0,
                        y: 0
                    }, m = h.titleNameArray.length - 1; m >= 0; m--)
                        if(!h.titleNameArray[m].hidden) _ = h.titleNameArray[m].logicSpace;
                        else;
                    var g = _.height < n + r ? n + r : _.height,
                        v = {
                            x: A.x,
                            y: t.space.y - g,
                            width: p + e,
                            height: g
                        };
                    h.titleNameArray.space = v;
                    h.titleNameArray.map(function(t) {
                        var e = t.logicSpace;
                        e.y += g - _.height
                    });
                    var y = {
                        x: 0,
                        y: 0,
                        width: h.titleNameArray.space.width,
                        height: h.titleNameArray.space.height
                    };
                    h.titleNameArray.logicSpace = y;
                    var b = {
                        x: A.x,
                        y: t.space.y,
                        width: p,
                        height: ot.height
                    };
                    h.titleValuesMatrix.space = b;
                    var x = {
                        x: 0,
                        y: 0,
                        height: st,
                        width: h.titleValuesMatrix.space.width
                    };
                    h.titleValuesMatrix.logicSpace = x;
                    var $ = h.titleValuesMatrix;
                    $.map(function(t, e) {
                        var i = t[0].logicSpace;
                        t.space = {
                            x: i.x,
                            y: i.y,
                            width: i.width,
                            height: $.space.height
                        }
                    });
                    return {
                        width: p,
                        titleHeight: h.titleNameArray.space.height,
                        yPivotAxisInfo: h
                    }
                }
            }
        }

        function w(t, e, i, n) {
            if(t && (e || i)) {
                if("x" == n) {
                    if(e)
                        for(var r = e.length - 1; r >= 0; r--) {
                            var a = e[r];
                            if(!(a > t.titleNameArray.length - 1)) {
                                t.titleNameArray[a].hidden = !0;
                                t.titleNameArray[a].logicSpace.height = 0
                            } else;
                        }
                    if(i)
                        for(var r = i.length - 1; r >= 0; r--) {
                            var s = i[r];
                            if(!(s > t.titleValuesMatrix.length - 1)) {
                                t.titleValuesMatrix[s].map(function(e) {
                                    e.logicSpace.height = 0;
                                    t.titleValuesMatrix[s].hidden = !0;
                                    if(e.childrenNumber > 0) {
                                        t.titleValuesMatrix[s + 1].map(function(t) {
                                            t.logicSpace.y = e.logicSpace.y
                                        });
                                        t.titleValuesMatrix[s + 1].logicSpace.y = e.logicSpace.y
                                    }
                                });
                                t.titleValuesMatrix[s].logicSpace.height = 0
                            } else;
                        }
                } else {
                    if(e)
                        for(var r = e.length - 1; r >= 0; r--) {
                            var a = e[r];
                            if(!(a > t.titleNameArray.length - 1)) {
                                t.titleNameArray[a].hidden = !0;
                                t.titleNameArray[a].logicSpace.width = 0
                            } else;
                        }
                    if(i)
                        for(var r = i.length - 1; r >= 0; r--) {
                            var s = i[r];
                            if(!(s > t.titleValuesMatrix.length - 1)) {
                                t.titleValuesMatrix[s].map(function(e) {
                                    e.logicSpace.width = 0;
                                    t.titleValuesMatrix[s].hidden = !0;
                                    if(s < t.titleNameArray.length) t.titleNameArray[s].hidden = !0;
                                    var i = t.titleNameArray[s].logicSpace.width;
                                    t.titleNameArray[s].logicSpace.width = 0;
                                    for(var n = t.titleNameArray.length - 1; n > s; n--) t.titleNameArray[n].logicSpace.x -= i;
                                    if(e.childrenNumber > 0) {
                                        t.titleValuesMatrix[s + 1].map(function(t) {
                                            t.logicSpace.x = e.logicSpace.x
                                        });
                                        t.titleValuesMatrix[s + 1].logicSpace.x = e.logicSpace.x
                                    }
                                });
                                t.titleValuesMatrix[s].logicSpace.width = 0
                            } else;
                        }
                }
                return !0
            }
            return !1
        }

        function k(t, e, i, r) {
            if(r)
                for(var a = r.length - 1; a >= 0; a--) {
                    var s = r[a];
                    L[s].allHidden = !0;
                    for(var l = L[s].length - 1; l >= 0; l--) L[s][l].allHidden = !0
                }
            var c = n(t, e, L, cartesianAxisResource, o);
            return c
        }
        var S = s.data.aliasMap,
            C = s.setting && s.setting.textTable,
            T = s.setting && s.setting.textTable,
            E = T ? g : 0,
            I = s.domainMatrix,
            A = s.dataArea;
        A.x += E;
        A.y += E;
        A.width -= 2 * E;
        A.height -= 2.5 * E;
        var M, D, P = s.data.colTitleTree,
            N = s.data.rowTitleTree,
            L = s.data.commonAxisInfos,
            R = s.data.isCommonAxis,
            j = s.setting,
            O = s.chartType,
            F = s.controls && s.controls.zoom,
            z = s.choose;
        if(z) {
            D = z.guideline && z.guideline.type;
            for(var B in L) {
                var H = "left" == B || "right" == B ? "y" : "x";
                if(L[B].length) L[B].guidelineSlider = H == D
            }
        }
        var W, q, G = s.colTitleTree && s.colTitleTree.pivotAxisTitle && s.colTitleTree.pivotAxisTitle.className,
            U = s.colTitleTree && s.colTitleTree.pivotAxis && s.colTitleTree.pivotAxis.className,
            V = s.rowTitleTree && s.rowTitleTree.pivotAxisTitle && s.rowTitleTree.pivotAxisTitle.className,
            Y = s.rowTitleTree && s.rowTitleTree.pivotAxis && s.rowTitleTree.pivotAxis.className,
            X = !1,
            K = !1,
            J = !1,
            Z = !1,
            Q = 0,
            tt = 0,
            et = {
                left: 0,
                right: 0,
                bottom: 0,
                top: 0
            },
            it = {
                left: 0,
                right: 0,
                bottom: 0,
                top: 0
            },
            nt = 0,
            rt = 0,
            at = A.width,
            st = A.height,
            ot = A,
            lt = [],
            ct = [],
            ut = [],
            dt = [];
        if(s.colTitleTree && s.colTitleTree.pivotAxisTitle && s.colTitleTree.pivotAxisTitle.forceHidden) lt = s.colTitleTree.pivotAxisTitle.forceHidden;
        if(s.colTitleTree && s.colTitleTree.pivotAxis && s.colTitleTree.pivotAxis.forceHidden) ut = s.colTitleTree.pivotAxis.forceHidden;
        if(s.rowTitleTree && s.rowTitleTree.pivotAxisTitle && s.rowTitleTree.pivotAxisTitle.forceHidden) ct = s.rowTitleTree.pivotAxisTitle.forceHidden;
        if(s.rowTitleTree && s.rowTitleTree.pivotAxis && s.rowTitleTree.pivotAxis.forceHidden) dt = s.rowTitleTree.pivotAxis.forceHidden;
        var ht = [];
        for(var ft in L)
            if(L[ft].length > 0 && L[ft][0].forceHidden) ht.push(ft);
        if(T) {
            if(P) {
                var pt = a.deepCloneObject(P);
                s.data["oldColTitleTree"] = pt
            }
            if(N) {
                var _t = a.deepCloneObject(N);
                s.data["oldRowTitleTree"] = _t
            }
            P = c(L["top"], L["bottom"], P);
            N = c(L["left"], L["right"], N);
            u(P);
            u(N);
            for(var ft in L)
                if(L[ft].length > 0) ht.push(ft)
        }
        var mt = {
                titlesToHideX: lt,
                titlesToHideY: ct,
                categoriesToHideX: ut,
                categoriesToHideY: dt,
                commonAxisesToHide: ht
            },
            gt = v(I, A, mt);
        return gt
    }

    function l(t, e, i, n, r, a, s) {
        var o;
        if(e) {
            var l = e.xPivotAxisInfo,
                d = l.titleNameArray;
            if(d && d[0]) {
                var h = d.space,
                    f = d.logicSpace;
                h.width += t
            }
            var p = l.titleValuesMatrix,
                _ = p.space;
            p.logicSpace;
            _.width += t
        }
        if(i) {
            var m = i.yPivotAxisInfo,
                d = m.titleNameArray;
            if(d && d[0]) {
                var h = d.space,
                    f = d.logicSpace;
                c(h, t);
                u(f, t);
                for(var g = 0; g < d.length; g++) {
                    o = d[g].logicSpace;
                    u(o, t)
                }
            }
            var p = m.titleValuesMatrix,
                _ = p.space;
            p.logicSpace;
            _.height += t;
            _.width += t
        }
        if(n) {
            var v = n.space;
            v.width += t;
            v.height += t
        }
        if(r)
            for(var y in r) {
                var b = r[y];
                if(b) {
                    var x = b.space,
                        o = b.logicSpace;
                    c(x, t);
                    u(o, t);
                    b.infos && b.infos.forEach(function(e) {
                        o = e.logicSpace;
                        u(o, t)
                    })
                }
            }
        if(a) c(a, t);
        if(s) c(s, t)
    }

    function c(t, e) {
        t.x -= e;
        t.y -= e;
        t.width += 2 * e;
        t.height += 2 * e
    }

    function u(t, e) {
        t.x += e;
        t.y += e
    }

    function d(t, e, i, n, r, a, s, o) {
        var l = e.orient,
            c = e.infos;
        if(c) {
            var u, d, h, f = [],
                p = e.logicSpace,
                _ = (e.space, !1);
            if(a) {
                var m = a.titleNameArray;
                if(m)
                    for(var g = m.length - 1; g >= 0; g--)
                        if(1 != m[g].hidden) _ = !0;
                        else;
                var v = a.titleValuesMatrix;
                if(v)
                    for(var g = v.length - 1; g >= 0; g--)
                        if(1 != v[g].hidden) _ = !0;
                        else;
            }
            if("bottom" == l) {
                c.map(function(t, e) {
                    u = t.logicSpace;
                    if(0 != e) {
                        d = {
                            x: u.x,
                            y: u.y
                        };
                        h = {
                            x: d.x,
                            y: d.y + u.height
                        };
                        f.push([d, h])
                    }
                });
                if(_ || n) {
                    d = {
                        x: p.x,
                        y: p.y
                    };
                    h = {
                        x: d.x,
                        y: d.y + p.height
                    };
                    f.push([d, h]);
                    d = {
                        x: p.x + p.width,
                        y: p.y
                    };
                    h = {
                        x: d.x,
                        y: d.y + p.height
                    };
                    f.push([d, h])
                }
            } else if("top" == l) {
                if(!a && n) {
                    d = {
                        x: p.x,
                        y: p.y
                    };
                    h = {
                        x: d.x,
                        y: d.y + p.height
                    };
                    f.push([d, h])
                }
                if(n) {
                    d = {
                        x: p.x + p.width,
                        y: p.y
                    };
                    h = {
                        x: d.x,
                        y: d.y + p.height
                    };
                    f.push([d, h])
                }
                c.map(function(t, e) {
                    u = t.logicSpace;
                    if(0 != e) {
                        d = {
                            x: u.x,
                            y: u.y
                        };
                        h = {
                            x: u.x + u.width,
                            y: d.y
                        };
                        f.push([d, h])
                    }
                })
            } else {
                c.map(function(t, e) {
                    u = t.logicSpace;
                    if(0 != e) {
                        d = {
                            x: u.x,
                            y: u.y
                        };
                        h = {
                            x: u.x + u.width,
                            y: d.y
                        };
                        f.push([d, h])
                    }
                });
                if(_ || n) {
                    d = {
                        x: p.x,
                        y: p.y
                    };
                    h = {
                        x: d.x + p.width,
                        y: d.y
                    };
                    f.push([d, h]);
                    var y = 0;
                    d = {
                        x: p.x,
                        y: p.y + p.height + y
                    };
                    h = {
                        x: p.x + p.width,
                        y: d.y
                    };
                    f.push([d, h])
                }
            }
            if(n) {
                u = e.logicSpace;
                if("top" == l) {
                    d = {
                        x: u.x,
                        y: u.y
                    };
                    h = {
                        x: d.x + u.width,
                        y: d.y
                    };
                    f.push([d, h])
                } else if("bottom" == l) {
                    d = {
                        x: u.x,
                        y: u.y + u.height
                    };
                    h = {
                        x: d.x + u.width,
                        y: d.y
                    };
                    f.push([d, h]);
                    d = {
                        x: u.x,
                        y: u.y
                    };
                    h = {
                        x: d.x,
                        y: d.y + u.height
                    };
                    f.push([d, h]);
                    d = {
                        x: u.x + u.width,
                        y: u.y
                    };
                    h = {
                        x: d.x,
                        y: d.y + u.height
                    };
                    f.push([d, h])
                } else if("left" == l) {
                    if(!a) {
                        d = {
                            x: u.x,
                            y: u.y
                        };
                        h = {
                            x: d.x,
                            y: d.y + u.height
                        };
                        f.push([d, h])
                    }
                    if(1) {
                        d = {
                            x: u.x,
                            y: u.y
                        };
                        h = {
                            x: d.x + u.width,
                            y: d.y
                        };
                        f.push([d, h])
                    }
                } else if("right" == l) {
                    d = {
                        x: u.x + u.width,
                        y: u.y
                    };
                    h = {
                        x: d.x,
                        y: d.y + u.height
                    };
                    f.push([d, h])
                }
            }
            e.gridInfo = {
                type: "commonAxisGrid",
                data: f
            }
        }
    }

    function h(t, e, i, n, r) {
        if(e) {
            for(var a, s, o, l = [], c = [], u = e.titleValuesMatrix, d = u.logicSpace, h = 0; h < u.length; h++) {
                for(var f = 0; f < u[h].length; f++) {
                    o = u[h][f].logicSpace;
                    if(0 != f) {
                        a = {
                            x: o.x,
                            y: o.y
                        };
                        s = {
                            x: a.x,
                            y: a.y + d.height
                        };
                        l.push([a, s])
                    }
                }
                if(r) {
                    var p = u[h].logicSpace;
                    a = {
                        x: p.x + d.x,
                        y: p.y + d.y
                    };
                    s = {
                        x: a.x + p.width,
                        y: a.y
                    };
                    l.push([a, s])
                }
            }
            if(u.length) {
                if(i) {
                    a = {
                        x: d.x,
                        y: d.y
                    };
                    s = {
                        x: a.x + d.width,
                        y: a.y
                    };
                    l.push([a, s]);
                    if(!n || !n.titleNameArray) {
                        a = {
                            x: d.x,
                            y: d.y
                        };
                        s = {
                            x: a.x,
                            y: a.y + d.height
                        };
                        l.push([a, s])
                    }
                    a = {
                        x: d.x + d.width,
                        y: d.y
                    };
                    s = {
                        x: a.x,
                        y: a.y + d.height
                    };
                    l.push([a, s])
                }
                a = {
                    x: d.x,
                    y: d.y + d.height
                };
                s = {
                    x: a.x + d.width,
                    y: a.y
                };
                l.push([a, s])
            }
            u.gridInfo = {
                data: l,
                type: "pivotAxisGrid"
            };
            if(i) {
                var _ = (e.titleNameArray.space, e.titleNameArray.logicSpace);
                a = {
                    x: _.x,
                    y: _.y
                };
                s = {
                    x: a.x + _.width,
                    y: a.y
                };
                c.push([a, s]);
                a = {
                    x: _.x,
                    y: _.y + _.height
                };
                s = {
                    x: a.x + _.width,
                    y: a.y
                };
                c.push([a, s]);
                if(!n) {
                    a = {
                        x: _.x,
                        y: _.y
                    };
                    s = {
                        x: a.x,
                        y: a.y + _.height
                    };
                    c.push([a, s])
                }
                a = {
                    x: _.x + _.width,
                    y: _.y
                };
                s = {
                    x: a.x,
                    y: a.y + _.height
                };
                c.push([a, s]);
                e.titleNameArray.gridInfo = {
                    data: c,
                    type: "pivotAxGrid"
                }
            }
        }
    }

    function f(t, e, i, n, r, a) {
        if(e) {
            for(var s, o, l, c = [], u = e.titleValuesMatrix, d = u.logicSpace, h = 0; h < u.length; h++) {
                for(var f = 0; f < u[h].length; f++) {
                    l = u[h][f].logicSpace;
                    if(0 != f) {
                        s = {
                            x: l.x,
                            y: l.y
                        };
                        o = {
                            x: d.x + d.width,
                            y: l.y
                        };
                        c.push([s, o])
                    }
                }
                if(i) {
                    s = {
                        x: l.x,
                        y: d.y
                    };
                    o = {
                        x: l.x,
                        y: d.y + d.height
                    };
                    c.push([s, o])
                }
            }
            if(i) {
                s = {
                    x: d.x + d.width,
                    y: d.y
                };
                o = {
                    x: s.x,
                    y: s.y + d.height
                };
                c.push([s, o])
            }
            var p = 0;
            s = {
                x: d.x,
                y: d.y + d.height + p
            };
            o = {
                x: d.x + d.width,
                y: s.y
            };
            c.push([s, o]);
            u.gridInfo = {
                data: c,
                type: "pivotAxisGrid"
            };
            var _ = e.titleNameArray,
                m = [],
                d = _.logicSpace;
            s = {
                x: d.x,
                y: d.y + d.height
            };
            o = {
                x: s.x + d.width,
                y: s.y
            };
            m.push([s, o]);
            s = {
                x: d.x + d.width,
                y: d.y
            };
            o = {
                x: s.x,
                y: s.y + d.height
            };
            m.push([s, o]);
            if(e.titleNameArray[0] && i) {
                var g = (e.titleNameArray.space, e.titleNameArray.logicSpace);
                s = {
                    x: g.x,
                    y: g.y
                };
                o = {
                    x: s.x,
                    y: s.y + g.height
                };
                m.push([s, o]);
                s = {
                    x: g.x,
                    y: g.y
                };
                o = {
                    x: s.x + g.width,
                    y: s.y
                };
                m.push([s, o]);
                var v = e.titleNameArray[0].logicSpace;
                s = {
                    x: v.x,
                    y: v.y
                };
                o = {
                    x: s.x + g.width,
                    y: s.y
                };
                m.push([s, o]);
                var y = e.titleNameArray.length;
                if(a)
                    for(var h = 0; h < y; h++) {
                        var b = e.titleNameArray[h].logicSpace;
                        s = {
                            x: b.x + b.width,
                            y: b.y
                        };
                        o = {
                            x: s.x,
                            y: s.y + b.height
                        };
                        m.push([s, o])
                    } else {
                    var x = e.titleNameArray[y - 1].logicSpace;
                    s = {
                        x: x.x + x.width,
                        y: x.y
                    };
                    o = {
                        x: s.x,
                        y: s.y + x.height
                    };
                    m.push([s, o])
                }
            }
            _.gridInfo = {
                data: m,
                type: "pivotTitleGrid"
            }
        }
    }

    function p(t, e, i, n, r, a, s, o, l) {
        for(var c, u, d, h = e.logicSpace, f = [], p = [], _ = 0; _ < e[0].length; _++)
            for(var m = 0; m < e[0][_][0].length; m++) {
                d = e[0][_][0][m].logicSpace;
                p.push(d)
            }
        for(var _ = 1; _ < p.length; _++) {
            d = p[_];
            c = {
                x: d.x,
                y: d.y
            };
            u = {
                x: c.x,
                y: c.y + h.height
            };
            f.push([c, u])
        }
        p = [];
        for(var _ = 0; _ < e.length; _++)
            for(var m = 0; m < e[_][0].length; m++) {
                d = e[_][0][m][0].logicSpace;
                p.push(d)
            }
        for(var _ = 1; _ < p.length; _++) {
            d = p[_];
            c = {
                x: d.x,
                y: d.y
            };
            u = {
                x: c.x + h.width,
                y: c.y
            };
            f.push([c, u])
        }
        if(n) {
            if(!a) {
                c = {
                    x: h.x,
                    y: h.y
                };
                u = {
                    x: c.x,
                    y: c.y + h.height
                };
                f.push([c, u])
            }
            var g = 0;
            c = {
                x: h.x + h.width + g,
                y: h.y
            };
            u = {
                x: c.x,
                y: c.y + h.height
            };
            f.push([c, u]);
            var g = 0;
            c = {
                x: h.x,
                y: h.y + h.height + g
            };
            u = {
                x: c.x + h.width,
                y: c.y
            };
            f.push([c, u]);
            if(s) {
                c = {
                    x: h.x,
                    y: h.y
                };
                u = {
                    x: c.x + h.width,
                    y: c.y
                };
                f.push([c, u])
            }
        }
        e.gridInfo = {
            data: f,
            type: "graphGrid"
        }
    }
    var _ = {
            left: "left",
            right: "right",
            top: "top",
            bottom: "bottom"
        },
        m = s.ScrollSize,
        g = s.textTableCanvasMargin;
    return o
}, 740, 741, 742, 743, 744, 654, 675);
I$(745, function(t, e) {
    function i(t, e, i, n) {
        var r, a = 150,
            s = 20,
            o = 10,
            l = 5,
            c = 20,
            u = 10,
            d = 0,
            h = 3,
            f = e.direction || "H";
        s = e && e.height ? Number(e.height) : s;
        a = e && e.width ? Number(e.width) : a;
        o = e && e.slider ? Number(e.slider) : o;
        l = e && e.paddingCaptionV ? Number(e.paddingCaptionV) : l;
        c = e && e.paddingCaptionH ? Number(e.paddingCaptionH) : c;
        var p = Math.max(a, s),
            _ = Math.min(s, a);
        if("H" == f) s = _, a = p;
        else s = p, a = _;
        var g = m("caption").apply(t),
            v = g.getElement(0, 0);
        v.settext(v.dynamicProperty("data"));
        r = v.bbox();
        d = "H" == f ? d + r.width + c : d;
        h = "H" == f ? h : h + r.height + l + o;
        var y = m("frame").apply(t),
            b = y.getElement(0, 0);
        b.setx(d);
        b.sety(h);
        b.setwidth(a);
        b.setheight(s);
        var x, $ = [];
        if("color" == i)
            if("H" == f) {
                x = [{
                    x: 0,
                    y: o + u
                }, {
                    x: 0,
                    y: o + u
                }];
                $ = [{
                    x: 0,
                    y: s
                }, {
                    x: a,
                    y: s
                }]
            } else {
                x = [{
                    x: o + u,
                    y: 0
                }, {
                    x: o + u,
                    y: 0
                }];
                $ = [{
                    x: a,
                    y: 0
                }, {
                    x: a,
                    y: s
                }]
            }
        else if("H" == f) {
            x = [{
                x: 0,
                y: o + u
            }, {
                x: 0,
                y: o + u
            }];
            $ = [{
                x: 0,
                y: s
            }, {
                x: a,
                y: s
            }]
        } else {
            x = [{
                x: o + u,
                y: 0
            }, {
                x: o + u,
                y: 0
            }];
            $ = [{
                x: a,
                y: 0
            }, {
                x: a,
                y: s
            }]
        }
        var w = m("mark").apply(y);
        w.each(function(t, e) {
            t.setratioAnchor({
                ratiox: .5,
                ratioy: .5
            });
            t.setx($[e].x);
            t.sety($[e].y - s / 2);
            t.setradius(o);
            var i = t.dynamicProperty("data"),
                r = t.children()[0];
            r.settext(n(i.data));
            r.setDynamicProperty("format", n);
            r.setx(x[e].x);
            r.sety(x[e].y);
            if("H" == f && 0 == e) r.setratioAnchor({
                ratiox: 1,
                ratioy: 0
            });
            else if("V" == f && 0 == e) r.setratioAnchor({
                ratiox: 0,
                ratioy: 1
            })
        })
    }

    function n(t, e, i, n) {
        var r = {};
        i = g[i];
        var a = t.selectAll(function(t) {
                return "caption" == t.dynamicProperty("kind")
            }).data([e.caption]),
            s = a.enter().append(f).setDynamicProperty("kind", "caption"),
            o = a.exit();
        o.remove();
        r.caption = {
            update: a,
            enter: s,
            exit: o
        };
        e.map(function(t) {
            t.data = n(t.data)
        });
        var l = t.selectAll(function(t) {
            return "markroot" == t.dynamicProperty("kind")
        }).data(e);
        markUpdate = l.selectAll(function(t) {
            return "mark" == t.dynamicProperty("kind")
        });
        textUpdate = l.selectAll(function(t) {
            return "text" == t.dynamicProperty("kind")
        });
        var u = l.enter().append(c).setDynamicProperty("kind", "markroot"),
            d = l.exit();
        markExit = d.selectAll(function(t) {
            return "mark" == t.dynamicProperty("kind")
        });
        textExit = d.selectAll(function(t) {
            return "text" == t.dynamicProperty("kind")
        });
        d.remove();
        u.each(function(t, n) {
            var r = t.dynamicProperty("data"),
                a = i.create({}),
                s = f.create({});
            a.setDynamicProperty("data", r);
            a.setDynamicProperty("kind", "mark");
            s.setDynamicProperty("kind", "text");
            e[n].innerMark = a;
            t.addChild(a);
            t.addChild(s)
        });
        markEnter = u.selectAll(function(t) {
            return "mark" == t.dynamicProperty("kind")
        });
        textEnter = u.selectAll(function(t) {
            return "text" == t.dynamicProperty("kind")
        });
        r.mark = {
            update: markUpdate,
            enter: markEnter,
            exit: markExit
        };
        r.text = {
            update: textUpdate,
            enter: textEnter,
            exit: markExit
        };
        var h = (t.selectAll(function(t) {
                return "caption" == t.dynamicProperty("kind")
            }), t.selectAll(function(t, e) {
                return "mark" == t.dynamicProperty("kind")
            })),
            p = t.selectAll(function(t, e) {
                return "text" == t.dynamicProperty("kind")
            });
        p.each(function(t, i) {
            var n = {
                innerMark: t,
                field: e[i].field,
                data: e[i].data,
                type: "text"
            };
            t.setDynamicProperty("data", n)
        });
        h.each(function(t, i) {
            e[i].innerMark = t;
            t.setDynamicProperty("data", e[i])
        });
        return r
    }

    function r(t, e, i) {
        var n = {},
            r = t.selectAll(function(t) {
                return "caption" == t.dynamicProperty("kind")
            }).data([e.caption]),
            a = r.enter().append(f).setDynamicProperty("kind", "caption"),
            s = r.exit();
        s.remove();
        n.caption = {
            update: r,
            exit: s,
            enter: a
        };
        var o = t.selectAll(function(t) {
                return "frame" == t.dynamicProperty("kind")
            }).data([e]),
            l = o.enter().append(u).setDynamicProperty("kind", "frame").setDynamicProperty("__legendType", "color"),
            c = o.exit();
        c.remove();
        n.frame = {
            update: o,
            exit: c,
            enter: l
        };
        var d = t.select(function(t) {
                return "frame" == t.dynamicProperty("kind")
            }),
            p = d.selectAll(function(t) {
                return "mark" == t.dynamicProperty("kind")
            }).data(e),
            _ = d.selectAll(function(t) {
                return "text" == t.dynamicProperty("kind")
            }),
            m = p.enter().append(h);
        m.setDynamicProperty("kind", "mark").setDynamicProperty("__which", function(t, e) {
            return 0 == e ? "left" : "right"
        }).append(f).setDynamicProperty("kind", "text");
        var g = m.selectAll(function(t) {
                return "text" == t.dynamicProperty("kind")
            }),
            v = p.exit(),
            y = v.selectAll(function(t) {
                return "text" == t.dynamicProperty("kind")
            });
        v.remove();
        y.remove();
        n.mark = {
            update: p,
            exit: v,
            enter: m
        };
        n.text = {
            update: _,
            exit: y,
            enter: g
        };
        var b = d.selectAll(function(t, e) {
            return "mark" == t.dynamicProperty("kind")
        });
        b.each(function(t, i) {
            e[i].innerMark = t;
            e[i].frameMark = d.getElement(0, 0)
        });
        t.selectAll(function(t) {
            return "caption" == t.dynamicProperty("kind")
        }), t.selectAll(function(t) {
            return "text" == t.dynamicProperty("kind")
        });
        return n
    }

    function a(t, e, i) {
        var n = {},
            r = t.selectAll(function(t) {
                return "caption" == t.dynamicProperty("kind")
            }).data([e.caption]),
            a = r.enter().append(f).setDynamicProperty("kind", "caption"),
            s = r.exit();
        s.remove();
        n.caption = {
            update: r,
            exit: s,
            enter: a
        };
        var o = t.selectAll(function(t) {
                return "frame" == t.dynamicProperty("kind")
            }).data([e]),
            l = o.enter().append(u).setDynamicProperty("kind", "frame").setDynamicProperty("__legendType", "size"),
            c = o.exit();
        c.remove();
        n.frame = {
            update: o,
            exit: c,
            enter: l
        };
        rect = t.select(function(t) {
            return "frame" == t.dynamicProperty("kind")
        });
        var d = rect.selectAll(function(t) {
                return "mark" == t.dynamicProperty("kind")
            }).data(e),
            p = d.selectAll(function(t) {
                return "text" == t.dynamicProperty("kind")
            }),
            _ = d.enter().append(h);
        _.setDynamicProperty("kind", "mark").setDynamicProperty("__which", function(t, e) {
            return 0 == e ? "left" : "right"
        }).append(f).setDynamicProperty("kind", "text");
        var m = _.selectAll(function(t) {
                return "text" == t.dynamicProperty("kind")
            }),
            g = d.exit(),
            v = g.selectAll(function(t) {
                return "text" == t.dynamicProperty("kind")
            });
        g.remove();
        v.remove();
        n.mark = {
            update: d,
            exit: g,
            enter: _
        };
        n.text = {
            update: p,
            exit: v,
            enter: m
        };
        var y = rect.selectAll(function(t, e) {
            return "mark" == t.dynamicProperty("kind")
        });
        y.each(function(t, i) {
            e[i].innerMark = t;
            e[i].frameMark = rect.getElement(0, 0)
        });
        t.selectAll(function(t) {
            return "caption" == t.dynamicProperty("kind")
        }), t.selectAll(function(t) {
            return "text" == t.dynamicProperty("kind")
        });
        return n
    }

    function s(t, e, i) {
        var n = t.select(function(t) {
            return t.dynamicProperty("kind") == i
        }).data([e]);
        n.enter().append(c).setDynamicProperty("kind", i);
        n.exit().remove();
        n = t.select(function(t) {
            return t.dynamicProperty("kind") == i
        });
        var r = n.selectAll(function(t) {
            return "legend" == t.dynamicProperty("kind")
        }).data(e);
        r.enter().append(c).setDynamicProperty("kind", "legend");
        r.exit().remove();
        r = n.selectAll(function(t) {
            return "legend" == t.dynamicProperty("kind")
        });
        return r
    }

    function o(t, s, o, l, c, u) {
        var d = {},
            h = c.format ? c.format : v;
        if("colorOrdinal" == o)
            if("mobile" == u) d = n(t, s, "color-mobile", h);
            else d = n(t, s, "color", h);
        if("shape" == o) d = n(t, s, "shape", h);
        if("colorLinear" == o) {
            d = r(t, s, l);
            e.applyMarkSelectionMapTheme(c, d);
            i(t, l, "color", h)
        }
        if("sizeLinear" == o) {
            d = a(t, s, l);
            e.applyMarkSelectionMapTheme(c, d);
            i(t, l, "size", h)
        }
        return d
    }

    function l(t, o, l, c, u, d) {
        var h, f = {},
            h = u.getProp(["legend", l]),
            _ = h.format ? h.format : v;
        if("colorOrdinal" == l) {
            var m = s(t, o, "colorOrdinal");
            m.each(function(t, i) {
                var r = p.select(t),
                    a = o[i];
                h = u.getProp(["legends", a.scale.__name]);
                var s = "mobile" == d ? "color-mobile" : "color";
                f = n(r, a, s, _);
                e.applyMarkSelectionMapTheme(h, f)
            })
        }
        if("shape" == l) {
            var m = s(t, o, "shape");
            m.each(function(t, i) {
                var r = p.select(t),
                    a = o[i];
                h = u.getProp(["legends", a.scale.__name]);
                f = n(r, a, "shape", _);
                e.applyMarkSelectionMapTheme(h, f)
            })
        }
        if("colorLinear" == l) {
            var m = s(t, o, "colorLinear");
            m.each(function(t, n) {
                var a = p.select(t),
                    s = o[n];
                f = r(a, s, c);
                h = u.getProp(["legends", s.scale.__name]);
                e.applyMarkSelectionMapTheme(h, f);
                i(a, c, "color", _)
            })
        }
        if("sizeLinear" == l) {
            var m = s(t, o, "sizeLinear");
            m.each(function(t, n) {
                var r = p.select(t),
                    s = o[n];
                f = a(r, s, c);
                h = u.getProp(["legends", s.scale.__name]);
                e.applyMarkSelectionMapTheme(h, f);
                i(r, c, "size", _)
            })
        }
    }
    var c = t.ContainerSprite,
        u = t.Rect,
        d = t.Path,
        h = (t.Polygon, t.Circle),
        f = t.Text,
        p = t.selection,
        _ = t.selector,
        m = _.kind,
        g = {
            color: u,
            "color-mobile": h,
            shape: d
        },
        v = function(t) {
            return t
        };
    return {
        build: l,
        singleBuild: o
    }
}, 566, 654);
I$(823, function() {
    function t(t) {
        return {
            isPropConverter: !0,
            convertF: t,
            isScaleConverter: !0
        }
    }
    return t
});
I$(746, function(t, e, i, n) {
    function r() {
        var t = {
            visualScales: {
                defaultFill: {
                    visualType: "color",
                    domainType: "any",
                    range: "defaultColor"
                }
            },
            defaultColor: l[0],
            defaultColorRange: l,
            defaultSizeRange: [0, 1],
            defaultShapeRange: u,
            graph: {
                z: -9999999
            },
            title: {
                xPosition: "center",
                yPosition: "top",
                rotation: 0,
                styles: [{
                    font: {
                        size: 12,
                        family: a
                    },
                    align: "center",
                    lineSpacing: 10,
                    fillStyle: s(121, 121, 121)
                }],
                z: 1e4
            },
            tooltip: {
                root: {
                    z: 9999
                },
                position: "ES",
                background: {
                    fillStyle: s(255, 255, 255),
                    strokeStyle: s(139, 139, 139),
                    lineWidth: 1,
                    z: 9900
                },
                text: {
                    texts: function(t, e) {
                        return t.outText
                    },
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "left",
                        lineSpacing: 10,
                        fillStyle: s(121, 121, 121)
                    }],
                    z: 9991
                }
            },
            legend: {
                colorOrdinal: {
                    visualProperties: {
                        width: 10,
                        height: 10
                    },
                    caption: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102)
                    },
                    text: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102)
                    },
                    mark: {
                        strokeStyle: o(0, 0, 0, 0),
                        lineWidth: 1
                    },
                    hover: {
                        mark: {
                            fillStyle: i(function(t) {
                                return s(t.r + 30, t.g + 30, t.b + 30)
                            }),
                            strokeStyle: s(0, 0, 0)
                        }
                    },
                    focus: {
                        mark: {
                            fillStyle: i(function(t) {
                                return t
                            }),
                            strokeStyle: s(0, 0, 0)
                        }
                    },
                    gray: {
                        mark: {
                            fillStyle: i(function(t) {
                                if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                                else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                            }),
                            strokeStyle: o(0, 0, 0, 0)
                        }
                    }
                },
                colorLinear: {
                    visualProperties: {
                        rect: {
                            width: 150,
                            height: 5
                        },
                        slider: {
                            size: 10
                        }
                    },
                    mark: {
                        fillStyle: o(255, 255, 255),
                        strokeStyle: o(221, 221, 221),
                        lineWidth: 1,
                        z: 2e3
                    },
                    text: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102)
                    },
                    frame: {
                        fillStyle: s(72, 176, 247),
                        strokeStyle: o(0, 0, 0, 0),
                        lineWidth: 1,
                        z: 1990
                    },
                    caption: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102)
                    },
                    focus: {},
                    drag: {
                        mark: {
                            strokeStyle: s(200, 200, 200)
                        },
                        frame: {
                            unselected: s(236, 236, 236),
                            selected: s(72, 176, 247)
                        }
                    },
                    hover: {
                        mark: {
                            strokeStyle: s(160, 160, 160)
                        }
                    }
                },
                sizeLinear: {
                    visualProperties: {
                        rect: {
                            width: 150,
                            height: 5
                        },
                        slider: {
                            size: 10
                        },
                        fillStyle: o(255, 255, 0),
                        strokeStyle: o(255, 0, 0)
                    },
                    mark: {
                        fillStyle: o(255, 255, 255),
                        strokeStyle: o(221, 221, 221),
                        lineWidth: 1,
                        z: 2e3
                    },
                    text: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102)
                    },
                    frame: {
                        fillStyle: s(72, 176, 247),
                        strokeStyle: o(0, 0, 0, 0),
                        lineWidth: 1,
                        z: 1990
                    },
                    caption: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102)
                    },
                    drag: {
                        mark: {
                            strokeStyle: s(200, 200, 200)
                        },
                        frame: {
                            unselected: s(236, 236, 236),
                            selected: s(72, 176, 247)
                        }
                    },
                    hover: {
                        mark: {
                            strokeStyle: s(160, 160, 160)
                        }
                    }
                },
                shape: {
                    visualProperties: {
                        width: 10,
                        height: 10
                    },
                    caption: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102)
                    },
                    text: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102)
                    },
                    mark: {
                        strokeStyle: o(0, 0, 0),
                        lineWidth: 2,
                        scale: {
                            sx: .5,
                            sy: .5
                        },
                        fillStyle: o(0, 0, 0)
                    },
                    hover: {
                        mark: {
                            fillStyle: i(function(t) {
                                return s(t.r, t.g, t.b)
                            }),
                            strokeStyle: o(0, 0, 0, 1)
                        }
                    },
                    focus: {
                        mark: {
                            fillStyle: i(function(t) {
                                return t
                            }),
                            strokeStyle: o(0, 0, 0)
                        }
                    },
                    gray: {
                        mark: {
                            fillStyle: s(128, 128, 128),
                            strokeStyle: o(128, 128, 128)
                        }
                    }
                },
                layoutArgus: {
                    position: {
                        x: 14,
                        y: 14
                    },
                    rowSpace: 15,
                    caption2Frame: 20,
                    frame2Text: 5,
                    frame2Frame: 15,
                    mark2Text: 5,
                    legend2Legend: 35
                }
            },
            pivotAxisTitle: {
                backgroundText: {
                    backgroundFillStyle: o(210, 210, 210, 0),
                    backgroundStrokeStyle: o(210, 210, 210, 0),
                    textFillStyle: s(102, 102, 102),
                    backgroundLineWidth: 1,
                    textFont: {
                        size: 12,
                        family: a
                    },
                    textX: "center",
                    textY: "center",
                    textAlign: "center",
                    textLineSpacing: 3
                }
            },
            pivotAxis: {
                backgroundText: {
                    backgroundFillStyle: o(200, 200, 200, 0),
                    textFillStyle: s(102, 102, 102),
                    backgroundLineWidth: 0,
                    textFont: {
                        size: 12,
                        family: a
                    },
                    textX: "center",
                    textY: "center",
                    textAlign: "center",
                    textLineSpacing: 3
                },
                hover: {
                    backgroundText: {
                        backgroundFillStyle: s(240, 240, 240)
                    }
                },
                focus: {
                    backgroundText: {
                        backgroundFillStyle: s(210, 210, 210)
                    }
                },
                gray: {
                    backgroundText: {
                        backgroundFillStyle: o(240, 240, 240, 0)
                    }
                }
            },
            pivotAxisGrid: {
                strokeStyle: o(221, 221, 221, 1),
                lineWidth: 1,
                lineDash: [],
                z: 1
            },
            pivotTitleGrid: {
                strokeStyle: o(221, 221, 221, 1),
                lineWidth: 1,
                lineDash: [],
                z: 1
            },
            commonAxisGrid: {
                strokeStyle: o(221, 221, 221, 1),
                lineDash: [],
                z: 1
            },
            graphGrid: {
                strokeStyle: o(221, 221, 221, 1),
                lineWidth: 1,
                lineDash: [],
                z: 1
            },
            axisGrid: {
                strokeStyle: o(230, 230, 230, .8),
                lineWidth: 1,
                lineDash: [2],
                z: 1
            },
            tableGrid: {
                strokeStyle: o(221, 221, 221, 1),
                lineWidth: 1,
                lineDash: [],
                z: 1
            },
            xAxis: {
                captionToLabelPadding: 5,
                captionToBoundaryPadding: 5,
                labelToTickPadding: 4,
                caption: {
                    align: "middle",
                    orient: "horizontal",
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102),
                        align: "center",
                        lineSpacing: 3
                    }],
                    z: 5
                },
                label: {
                    full: !1,
                    maxWidth: 1 / 0,
                    maxHeight: 1 / 0,
                    adapter: ["hur", "r", 1, 1, Math.PI / 2],
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102)
                    }],
                    z: 4
                },
                line: {
                    strokeStyle: s(221, 221, 221),
                    lineWidth: 1,
                    z: 3
                },
                tick: {
                    density: 3,
                    strokeStyle: o(221, 221, 221, 0),
                    lineWidth: 1,
                    size: 6,
                    z: 2
                },
                tableGrid: {
                    strokeStyle: o(221, 221, 221, 1),
                    lineWidth: 1,
                    lineDash: [],
                    z: 2
                },
                background: {
                    z: 0,
                    fillStyle: s(255, 255, 255)
                },
                hover: {
                    background: {
                        fillStyle: s(240, 240, 240)
                    }
                }
            },
            yAxis: {
                captionToLabelPadding: 5,
                captionToBoundaryPadding: 5,
                labelToTickPadding: 4,
                caption: {
                    align: "middle",
                    orient: "vertical",
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102),
                        align: "center",
                        lineSpacing: 3
                    }],
                    z: 5
                },
                label: {
                    full: !1,
                    maxWidth: 1 / 0,
                    maxHeight: 1 / 0,
                    adapter: ["hur", "r", 1, 1],
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102)
                    }],
                    z: 4
                },
                line: {
                    strokeStyle: s(221, 221, 221),
                    lineWidth: 1,
                    z: 3
                },
                tick: {
                    density: 3,
                    size: 6,
                    strokeStyle: o(221, 221, 221, 0),
                    lineWidth: 1,
                    z: 2
                },
                tableGrid: {
                    strokeStyle: o(221, 221, 221, 1),
                    lineWidth: 1,
                    lineDash: [],
                    z: 2
                },
                background: {
                    z: 0,
                    fillStyle: s(255, 255, 255)
                },
                hover: {
                    background: {
                        fillStyle: s(240, 240, 240)
                    }
                }
            },
            xCartesianAxis: {
                captionToLabelPadding: 5,
                captionToBoundaryPadding: 5,
                labelToTickPadding: 4,
                caption: {
                    align: "high",
                    orient: "horizontal",
                    styles: [{
                        font: {
                            size: 14,
                            family: a
                        },
                        fillStyle: s(102, 102, 102),
                        align: "center",
                        lineSpacing: 3
                    }],
                    z: 5
                },
                label: {
                    maxWidth: 1 / 0,
                    maxHeight: 1 / 0,
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102)
                    }],
                    z: 4
                },
                line: {
                    strokeStyle: s(221, 221, 221),
                    lineWidth: 1,
                    z: 3
                },
                tick: {
                    strokeStyle: o(0, 0, 0, 0),
                    lineWidth: 1,
                    size: 6,
                    z: 2
                }
            },
            yCartesianAxis: {
                captionToLabelPadding: 5,
                captionToBoundaryPadding: 5,
                labelToTickPadding: 4,
                caption: {
                    align: "high",
                    orient: "vertical",
                    styles: [{
                        font: {
                            size: 14,
                            family: a
                        },
                        fillStyle: s(102, 102, 102),
                        align: "center",
                        lineSpacing: 3
                    }],
                    z: 5
                },
                label: {
                    maxWidth: 1 / 0,
                    maxHeight: 1 / 0,
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102)
                    }],
                    z: 4
                },
                line: {
                    strokeStyle: s(221, 221, 221),
                    lineWidth: 1,
                    z: 3
                },
                tick: {
                    strokeStyle: o(0, 0, 0, 0),
                    lineWidth: 1,
                    size: 6,
                    z: 2
                }
            },
            mapCoord: {
                path: {
                    fillStyle: o(242, 242, 242, 1),
                    strokeStyle: o(221, 221, 221, 1),
                    lineWidth: .5,
                    hidden: !1,
                    z: 10
                },
                text: {
                    font: {
                        size: 12,
                        family: a
                    },
                    fillStyle: s(102, 102, 102),
                    z: 1e10
                }
            },
            bar: {
                mark: {
                    lineWidth: 1,
                    fillStyle: "defaultFill",
                    strokeStyle: void 0,
                    innerPadding: .1,
                    outerPadding: .2,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        var e = this.__index;
                        return e + 1
                    }
                },
                label: {
                    orient: "horizontal",
                    autoHidden: !1,
                    position: "waist",
                    text: function(t) {
                        return ["Abc"]
                    },
                    styles: [{
                        fillStyle: s(0, 0, 0),
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }],
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return 1e5 + 2 * (e + 1)
                    }
                },
                hover: {
                    mark: {
                        lineWidth: 1,
                        strokeStyle: s(20, 20, 20),
                        fillStyle: i(function(t) {
                            return o(t.r + 30, t.g + 30, t.b + 30, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return 1e5 + e + 1
                        }
                    }
                },
                focus: {
                    mark: {
                        lineWidth: 1,
                        strokeStyle: s(20, 20, 20),
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return 1e5 + e + 1
                        }
                    }
                },
                gray: {
                    mark: {
                        lineWidth: 0,
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        }
                    }
                }
            },
            pie: {
                mark: {
                    fillStyle: "defaultFill",
                    strokeStyle: void 0,
                    lineWidth: .5,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 1
                    },
                    disCenter: 0,
                    angleRange: [-90, 270]
                },
                label: {
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return 1e5 + 2 * (e + 1)
                    },
                    position: "inner",
                    leadLength: 30,
                    leadRatio: .1,
                    autoHidden: !0,
                    fillStyle: "defaultFill",
                    autoHidden: !1,
                    styles: [{
                        fillStyle: s(0, 0, 0),
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }]
                },
                hover: {
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r + 30, t.g + 30, t.b + 30, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        lineWidth: 1,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return 1e5 + e + 1
                        },
                        disCenter: 5
                    }
                },
                focus: {
                    mark: {
                        strokeStyle: s(20, 20, 20),
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        lineWidth: 1,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return 1e5 + e + 1
                        },
                        disCenter: 5
                    }
                },
                gray: {
                    mark: {
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        lineWidth: 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        },
                        disCenter: 0
                    }
                }
            },
            line: {
                line: {
                    lineWidth: 3,
                    strokeStyle: "defaultFill",
                    smooth: !1,
                    nullType: "broken",
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 1
                    }
                },
                mark: {
                    radius: function(t) {
                        if(t.__isIsolated) return e.isolatedPointRadius;
                        else return e.lineBaseRadius
                    },
                    fillStyle: "defaultFill",
                    lineWidth: 1,
                    strokeStyle: void 0,
                    hidden: !1,
                    strokeScaleInvariant: !0,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 101
                    }
                },
                label: {
                    position: "N",
                    fillStyle: "defaultFill",
                    z: 4799,
                    styles: [{
                        fillStyle: s(0, 0, 0),
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }]
                },
                hover: {
                    line: {
                        strokeStyle: function() {
                            var t = this.strokeStyle();
                            return o(t.r, t.g, t.b, t.a)
                        },
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20001
                        }
                    },
                    mark: {
                        radius: e.interactiveRadius,
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20501
                        }
                    }
                },
                focus: {
                    line: {
                        strokeStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20001
                        }
                    },
                    mark: {
                        radius: e.interactiveRadius,
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20501
                        }
                    }
                },
                gray: {
                    line: {
                        strokeStyle: function() {
                            var t = this.strokeStyle();
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        },
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        }
                    },
                    mark: {
                        radius: function(t) {
                            if(t.__isIsolated) return e.isolatedPointRadius;
                            else return e.lineBaseRadius
                        },
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 101
                        }
                    }
                }
            },
            gradientLine: {
                line: {
                    lineWidth: 3,
                    strokeStyle: "defaultFill",
                    smooth: !1,
                    nullType: "broken",
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 1
                    }
                },
                mark: {
                    radius: e.lineBaseRadius,
                    fillStyle: "defaultFill",
                    lineWidth: 1,
                    strokeStyle: void 0,
                    hidden: !1,
                    strokeScaleInvariant: !0,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return 3 * (e + 1)
                    },
                    scale: e.radiusScale.normalScale
                },
                label: {
                    position: "E",
                    fillStyle: "defaultFill",
                    z: 799,
                    styles: [{
                        fillStyle: s(0, 0, 0),
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }]
                },
                hover: {
                    line: {
                        strokeStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20001
                        }
                    },
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20501
                        },
                        scale: e.radiusScale.hoverScale(1)
                    }
                },
                focus: {
                    line: {
                        strokeStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20001
                        }
                    },
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20501
                        },
                        scale: e.radiusScale.focusScale(1)
                    }
                },
                gray: {
                    line: {
                        strokeStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        }
                    },
                    mark: {
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return 3 * (e + 1)
                        },
                        scale: e.radiusScale.grayScale
                    }
                }
            },
            area: {
                line: {
                    lineWidth: 1,
                    strokeStyle: void 0,
                    smooth: !1,
                    hidden: !1,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 1
                    }
                },
                mark: {
                    radius: function(t) {
                        if(t.__isIsolated) return e.isolatedPointRadius;
                        else return e.areaBaseRadius
                    },
                    fillStyle: "defaultFill",
                    strokeStyle: void 0,
                    hidden: !1,
                    strokeScaleInvariant: !0,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return 3 * (e + 1)
                    },
                    scale: e.radiusScale.normalScale
                },
                label: {
                    position: "N",
                    fillStyle: "defaultFill",
                    z: 699,
                    styles: [{
                        fillStyle: s(0, 0, 0),
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }]
                },
                zone: {
                    fillStyle: "defaultFill",
                    strokeStyle: void 0,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 1
                    }
                },
                hover: {
                    line: {
                        strokeStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 9e3
                        }
                    },
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 9500
                        },
                        scale: e.radiusScale.hoverScale(1)
                    }
                },
                focus: {
                    line: {
                        strokeStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 9e3
                        }
                    },
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 9500
                        },
                        scale: e.radiusScale.focusScale(1)
                    }
                },
                gray: {
                    line: {
                        strokeStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        }
                    },
                    mark: {
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return 3 * (e + 1)
                        },
                        scale: e.radiusScale.grayScale
                    }
                }
            },
            path: {
                mark: {
                    fillStyle: "defaultFill",
                    strokeStyle: o(204, 204, 204, 1),
                    lineWidth: .5,
                    hidden: !1,
                    strokeScaleInvariant: !0,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return 3 * -(e + 1)
                    }
                },
                label: {
                    styles: [{
                        fillStyle: s(102, 102, 102),
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }],
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return 3 * (e + 1) + 1e3
                    }
                },
                hover: {
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r + 30, t.g + 30, t.b + 30, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1e3
                        }
                    }
                },
                focus: {
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1e3
                        }
                    }
                },
                gray: {
                    mark: {
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        }
                    }
                }
            },
            scatter: {
                mark: {
                    lineWidth: 1,
                    fillStyle: "defaultFill",
                    strokeStyle: void 0,
                    strokeScaleInvariant: !0,
                    radius: e.scatterBaseSize,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 1
                    }
                },
                label: {
                    position: "ES",
                    fillStyle: "defaultFill",
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 500
                    },
                    styles: [{
                        fillStyle: s(0, 0, 0),
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }]
                },
                hover: {
                    mark: {
                        strokeStyle: s(20, 20, 20),
                        fillStyle: i(function(t) {
                            return o(t.r + 30, t.g + 30, t.b + 30, t.a)
                        }),
                        lineWidth: 1,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1e5
                        }
                    }
                },
                focus: {
                    mark: {
                        strokeStyle: s(20, 20, 20),
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        lineWidth: 1,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1e5
                        }
                    }
                },
                gray: {
                    mark: {
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        lineWidth: 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        }
                    }
                }
            },
            text: {
                mark: {
                    lineWidth: 1,
                    xAlign: "center",
                    yAlign: "center",
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 1
                    },
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }]
                },
                hover: {
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r + 30, t.g + 30, t.b + 30, t.a)
                        }),
                        lineWidth: 1,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1e5
                        }
                    }
                },
                focus: {
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        lineWidth: 1,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1e5
                        }
                    }
                },
                gray: {
                    mark: {
                        fillStyle: i(function(t) {
                            console.log("c", t);
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        lineWidth: 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        }
                    }
                }
            },
            xGuideline: {
                line: {
                    strokeStyle: s(255, 0, 0),
                    lineWidth: 3,
                    z: 2e5
                }
            },
            yGuideline: {
                line: {
                    strokeStyle: s(0, 235, 0),
                    lineWidth: 3,
                    z: 2e5
                }
            },
            statisticLine: {
                mark: {
                    strokeStyle: o(0, 0, 0, .5),
                    lineWidth: 1,
                    lineDash: [0],
                    z: 3e5
                },
                text: {
                    fillStyle: s(0, 0, 0),
                    font: {
                        size: 12,
                        family: a
                    },
                    z: 300001
                },
                hover: {
                    mark: {
                        strokeStyle: function() {
                            var t = this.strokeStyle();
                            return o(t.r, t.g, t.b, .8)
                        },
                        lineWidth: function() {
                            return this.lineWidth()
                        }
                    }
                },
                layoutArgus: {
                    begin: {
                        orient: ["M", "T"],
                        position: "horizontal"
                    },
                    end: {
                        orient: ["M", "T"],
                        position: "horizontal"
                    },
                    area: {}
                }
            },
            statisticArea: {
                area: {
                    fillStyle: o(130, 130, 130, .2),
                    z: 1
                },
                beginLine: {
                    strokeStyle: o(0, 0, 0, .5),
                    lineWidth: 1,
                    lineDash: [0],
                    z: 3e5
                },
                endLine: {
                    strokeStyle: o(0, 0, 0, .5),
                    lineWidth: 1,
                    lineDash: [0],
                    z: 3e5
                },
                areaText: {
                    fillStyle: o(150, 150, 150, 1),
                    font: {
                        size: 12,
                        family: a
                    },
                    z: 300001
                },
                beginText: {
                    fillStyle: o(150, 150, 150, 1),
                    font: {
                        size: 12,
                        family: a
                    },
                    z: 300001
                },
                endText: {
                    fillStyle: o(150, 150, 150, 1),
                    font: {
                        size: 12,
                        family: a
                    },
                    z: 300001
                },
                hover: {
                    beginLine: {
                        strokeStyle: function() {
                            var t = this.strokeStyle();
                            return o(t.r, t.g, t.b, .8)
                        },
                        lineWidth: function() {
                            return this.lineWidth()
                        }
                    },
                    endLine: {
                        strokeStyle: function() {
                            var t = this.strokeStyle();
                            return o(t.r, t.g, t.b, .8)
                        },
                        lineWidth: function() {
                            return this.lineWidth()
                        }
                    }
                },
                layoutArgus: {
                    begin: {
                        orient: ["M", "T"],
                        position: "horizontal"
                    },
                    end: {
                        orient: ["M", "T"],
                        position: "horizontal"
                    },
                    area: {}
                }
            },
            frame: {
                strokeStyle: {
                    r: 12,
                    g: 12,
                    b: 120
                },
                fillStyle: {
                    r: 12,
                    g: 12,
                    b: 120,
                    a: .2
                },
                z: 400001
            },
            emphasis: {
                background: {
                    fillStyle: o(0, 0, 0, 0),
                    strokeStyle: o(0, 0, 0, 0),
                    lineWidth: 1,
                    z: 9900
                },
                textInfo: {
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "left",
                        lineSpacing: 10,
                        fillStyle: s(121, 121, 121)
                    }],
                    x: 10,
                    y: 10,
                    z: 9991
                },
                textTitle: {
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "left",
                        lineSpacing: 10,
                        fillStyle: s(121, 121, 121)
                    }],
                    x: 10,
                    y: 30,
                    z: 9992
                },
                size: 50,
                align: "center"
            }
        };
        return t
    }
    var a = "Helvetica,Tahoma,Arial,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif",
        s = function(t, e, i) {
            return {
                r: t,
                g: e,
                b: i
            }
        },
        o = function(t, e, i, n) {
            return {
                r: t,
                g: e,
                b: i,
                a: n
            }
        },
        l = [s(13, 161, 237), s(255, 161, 53), s(56, 204, 72), s(245, 86, 70), s(177, 103, 255), s(255, 217, 45), s(57, 227, 221), s(250, 138, 109), s(113, 147, 255), s(255, 104, 207), s(173, 194, 187), s(157, 238, 60), s(95, 74, 246), s(234, 201, 118), s(102, 204, 255), s(252, 174, 85), s(79, 224, 95), s(255, 140, 128), s(163, 85, 245), s(209, 221, 67), s(55, 216, 210), s(247, 121, 89), s(104, 135, 235), s(240, 77, 189), s(47, 167, 127), s(159, 206, 52), s(161, 40, 190), s(82, 206, 182), s(95, 78, 217), s(244, 190, 55)],
        c = n.defaultShapeSet,
        u = [];
    for(var d in c) u.push(d);
    [t.Circle, t.Rect, t.Diamond];
    return r
}, 566, 675, 823, 704);
I$(672, function(t, e, i, n, r, a, s, o, l) {
    function c(t) {
        R.setpathElements(t);
        R.setscale({
            sx: .5,
            sy: .5
        });
        return R.bbox()
    }

    function u(t) {
        for(var e, i, n, r = t.scale, a = 10, s = 0; s < t.length; ++s) {
            i = r.exec(t[s].data);
            e = l(r.kind, i);
            n = c(e);
            a = Math.max(a, n.height)
        }
        return a
    }

    function d(t, e, i, n, r, a, o, c) {
        var d, h, f, p, _, m, g, v, w, S;
        d = P.select(t);
        t.setx(e);
        t.sety(i);
        var C = {
            x: e,
            y: i
        };
        ldd = t.dynamicProperty("data");
        p = ldd.scale;
        var T = new Array;
        _ = 0, m = 0;
        h = L("caption").apply(d).getElement(0, 0);
        f = h.dynamicProperty("data");
        h.settext(f);
        v = h.bbox();
        if("color" == o || "color-mobile" == o) g = Math.max(x, v.height);
        else g = Math.max(u(ldd), v.height);
        m += g / 2;
        h.setx(_);
        h.sety(m);
        h.setratioAnchor({
            ratiox: 0,
            ratioy: .5
        });
        T.caption = {
            x: _,
            y: m,
            text: f
        };
        T.scale = p;
        field = p.field();
        _ += v.width + y;
        var E = L("markroot").apply(d),
            I = L("text").apply(d),
            A = L("mark").apply(d),
            M = _;
        E.each(function(t, e) {
            var r = t.dynamicProperty("data"),
                u = I.getElement(0, e),
                d = A.getElement(0, e);
            u.settext(r.data);
            u.setratioAnchor({
                ratiox: 0,
                ratioy: .5
            });
            var h = b,
                f = x;
            if("color" == o) {
                d.setwidth(b);
                d.setheight(x)
            } else if("color-mobile" == o) d.setradius(b / 2);
            else {
                w = p.exec(r.data);
                S = l(p.kind, w);
                d.setpathElements(S);
                v = d.bbox();
                h = v.width;
                f = v.height
            }
            u.setx(h + k);
            v = t.treeBbox();
            if(_ + v.width - a > n - j && "mobile" != c) {
                _ = M;
                m += v.height;
                i += v.height
            }
            t.setx(_);
            t.sety(m);
            d.setratioAnchor({
                ratiox: 0,
                ratioy: .5
            });
            T.push({
                x: _,
                y: m,
                data: r.data,
                field: field,
                width: h,
                height: f,
                pathElements: S,
                padding: k,
                __state__: s.state.normal
            });
            _ += v.width + $
        });
        v = t.treeBbox();
        C.width = v.width, C.height = v.height;
        T.space = C;
        return {
            layoutData: T,
            x: e + _,
            y: i,
            rowHeight: g
        }
    }

    function h(t, e) {
        var i, n, r, a, s, o, c, u;
        i = P.select(t);
        a = 0, s = 0;
        var d = t.dynamicProperty("data").scale;
        n = L("caption").apply(i).getElement(0, 0);
        r = n.dynamicProperty("data");
        n.settext(r);
        o = n.bbox();
        n.setx(a);
        n.sety(s);
        a += o.width + y;
        var h = L("markroot").apply(i),
            f = L("mark").apply(i),
            p = L("text").apply(i);
        h.each(function(t, i) {
            var n = t.dynamicProperty("data"),
                r = p.getElement(0, i),
                h = f.getElement(0, i);
            r.settext(n.data);
            r.setratioAnchor({
                ratiox: 0,
                ratioy: .5
            });
            if("color" == e) {
                h.setwidth(b);
                h.setheight(x);
                r.setx(b + k)
            } else if("color-mobile" == e) h.setradius(b / 2);
            else {
                c = d.exec(n.data);
                u = l(d.kind, c);
                h.setpathElements(u);
                o = h.bbox();
                r.setx(o.width + k)
            }
            o = t.treeBbox();
            t.setx(a);
            t.sety(s);
            a += o.width + $
        });
        return t.treeBbox()
    }

    function f(t, e, i, n, r, a, s, o) {
        var l, c = L("legend").apply(t),
            u = [],
            f = e,
            p = i;
        if(0 == c.size()) return {
            x: e,
            y: i,
            data: u
        };
        c.each(function(t, i) {
            if(0 != i) {
                l = h(t, s);
                if(f + S + l.width - a > n) {
                    f = e;
                    p += l.height + w
                } else f += S
            }
            var c = d(t, f, p, n, r, a, s, o);
            f = c.x;
            p = c.y;
            u.push(c.layoutData)
        });
        l = t.getElement(0, 0).treeBbox();
        return {
            x: e,
            y: i + l.height,
            data: u,
            bbox: l
        }
    }

    function p(t, e, i) {
        for(var n = [], r = 0; r < t.length; ++r) {
            var a = t[r];
            if(a.type() == e) {
                var s = a.domain();
                if(!("number" != typeof s[0] || isFinite(s[0]) && isFinite(s[1]))) continue;
                s = s.map(function(t, e) {
                    return {
                        data: t
                    }
                });
                var o = a.field() || "";
                if(i && i[o]) s.caption = i[o];
                else s.caption = o;
                s.scale = a;
                n.push(s)
            }
        }
        return n
    }

    function _(t, e, i, n, r, a, s) {
        var o, l, c, u, d = 0,
            h = N.kind("legend").apply(t),
            f = new Array;
        if(0 == h.size()) return {
            x: i,
            y: n,
            legendHeight: 0,
            data: f,
            isStart: !0
        };
        h.each(function(t, h) {
            var p = t.dynamicProperty("data");
            c = p.scale;
            u = p.caption;
            l = p.scale.field();
            p = p.map(function(t, e) {
                t.field = l;
                return t
            });
            o = t.treeBbox();
            d = Math.max(o.height, d);
            if(i + o.width + 5 - r > a) {
                i = v.x;
                n += o.height + w;
                s = !0
            }
            t.setx(i);
            t.sety(n);
            var _ = t.treeBbox();
            if(_.x < i) {
                i += i - _.x;
                if(s) i -= v.x;
                if(i + o.width + 5 - r > a) {
                    i = v.x;
                    n += o.height + w;
                    s = !0
                }
                t.setx(i);
                t.sety(n)
            }
            var m = {
                x: i,
                y: n,
                width: o.width,
                height: o.height
            };
            p.space = m;
            p.option = e;
            p.field = l;
            p.scale = c;
            p.caption = u;
            f.push(p);
            i = i + o.width + S;
            s = !1
        });
        return {
            data: f,
            x: i,
            y: n,
            legendHeight: d,
            isStart: s
        }
    }

    function m(t) {
        var e = t.getProp(["legend", "layoutArgus"]),
            i = t.getProp(["legend", "colorOrdinal"]),
            n = t.getProp(["legend", "colorLinear"]);
        v = e.position;
        y = e.caption2Frame;
        b = i["visualProperties"].width, x = i["visualProperties"].height;
        $ = e["frame2Frame"], w = e.rowSpace;
        k = e.frame2Text, S = e["legend2Legend"];
        C = n["visualProperties"]["rect"].width, T = n["visualProperties"]["rect"].height;
        E = n["visualProperties"]["slider"].size, I = e["mark2Text"];
        A = {
            direction: "H",
            width: C,
            height: T,
            slider: E,
            paddingCaptionH: y,
            paddingCaptionV: w,
            padding: I
        }
    }

    function g(t, e, i, r, a, s, o) {
        m(a);
        var l, c = [],
            u = [],
            d = [],
            h = [],
            g = [],
            y = {};
        u = p(e, "continuous", s);
        c = p(e, "discrete", s);
        h = p(i, "continuous", s);
        d = p(i, "discrete", s);
        g = p(r, "discrete", s);
        var b = M.create({}),
            x = P.select(b);
        b.setDynamicProperty("kind", "legendRoot");
        n.build(x, c, "colorOrdinal", A, a, o);
        n.build(x, u, "colorLinear", A, a, o);
        n.build(x, h, "sizeLinear", A, a, o);
        n.build(x, g, "shape", A, a, o);
        var $ = N.kind("colorOrdinal").apply(x),
            k = N.kind("colorLinear").apply(x),
            S = N.kind("sizeLinear").apply(x),
            C = N.kind("shape").apply(x),
            T = L("legend").apply($).size() > 0,
            E = L("legend").apply(C).size() > 0,
            I = L("legend").apply(S).size() > 0,
            D = L("legend").apply(k).size() > 0,
            R = v.x,
            j = v.y,
            F = !0,
            z = "mobile" == o ? "color-mobile" : "color";
        obj = f($, R, j, t.width, t.height, t.x, z, o);
        R = obj.x, j = obj.y;
        obj.bbox;
        y["colorOrdinal"] = obj.data;
        if(obj.bbox && (E || D || I)) j += w;
        obj = f(C, R, j, t.width, t.height, t.x, "shape");
        R = obj.x, j = obj.y;
        y["shape"] = obj.data;
        if(obj.bbox && (I || D)) j += w;
        var B = _(k, A, R, j, t.x, t.width, F),
            l = B.data;
        R = B.x, j = B.y;
        F = B.isStart;
        y["colorLinear"] = l;
        var H = _(S, A, R, j, t.x, t.width, F),
            l = H.data;
        j = 0 != l.length ? H.y + H.legendHeight : B.y + B.legendHeight;
        y["sizeLinear"] = l;
        if(!(E || T || D || I)) j = 0;
        else j += O;
        if(j > t.height) j = t.height;
        var W = {
            x: t.x,
            y: t.y + j,
            width: t.width,
            height: t.height - j
        };
        return {
            data: y,
            space: {
                x: t.x,
                y: t.y,
                height: j,
                width: t.width
            },
            remainingSpace: W,
            platform: o
        }
    }
    var v, y, b, x, $, w, k, S, C, T, E, I, A, M = i.ContainerSprite,
        D = (i.Rect, i.Polygon, i.Text, i.Path),
        P = i.selection,
        N = i.selector,
        L = N.kind,
        R = D.create({}),
        j = 20,
        O = 20;
    return g
}, 656, 654, 566, 745, 696, 662, 675, 746, 704);
I$(673, function(t, e, i, n, r) {
    function a(t, e, i, n, r) {
        var a;
        if(void 0 != e) a = e.emphasis;
        if(!a) return {
            add: !1,
            space: {
                x: t.x,
                y: t.y,
                height: 0,
                width: 0
            },
            remainingSpace: t
        };
        var s = i.getProp(["emphasis"]).size;
        s = i.getProp(["emphasis"]).textTitle.styles[0].font.size + i.getProp(["emphasis"]).textTitle.styles[0].lineSpacing;
        if(0 == a.oneline) s += i.getProp(["emphasis"]).textInfo.styles[0].font.size + i.getProp(["emphasis"]).textInfo.styles[0].lineSpacing;
        s *= 2;
        if(a.size) s = a.size;
        var o = "top";
        if(a.position) o = a.position;
        var l = {
                x: t.x,
                y: t.y,
                height: t.height,
                width: t.width
            },
            c = {
                x: t.x,
                y: t.y,
                width: t.width,
                height: t.height
            };
        if("top" == o)
            if("mobile" == n && 0 != a.oneline && r && r.space && r.space.height > 0) {
                l = r.space;
                c = r.remainingSpace
            } else {
                l.height = s;
                c.y = t.y + s;
                c.height = t.height - s
            }
        else if("bottom" == o) {
            l.y = t.y + t.height - s;
            l.height = s;
            c.height = t.height - s
        } else {
            l.height = s;
            c.y = t.y + s;
            c.height = t.height - s
        }
        return {
            add: !0,
            space: l,
            remainingSpace: c,
            position: o,
            align: a.align,
            context: a.context,
            oneline: a.oneline,
            platform: n
        }
    }
    return a
}, 656, 654, 566, 675, 746);
I$(674, function(t, e, i, n, r, a, s) {
    function o(t, e, i) {
        if(!t || !t.text) return {
            remainingSpace: e
        };
        var n, r, a, s, o, l, c, d, h = i.getProp("title"),
            f = h.xPosition,
            p = h.yPosition,
            _ = t.text;
        u.setrotation(h.rotation);
        u.settexts(_);
        u.setstyles(h.styles);
        var m = u.bbox();
        switch(f) {
            case "left":
                n = e.x + m.width;
                a = e.width - m.width;
                o = 0;
                c = n;
                break;
            case "right":
                n = e.x;
                a = e.width - m.width;
                o = 1;
                c = n + a;
                break;
            default:
                n = e.x;
                a = e.width;
                o = .5;
                c = n + a / 2
        }
        switch(p) {
            case "center":
                r = e.y;
                s = e.height;
                l = .5;
                d = r + s / 2;
                break;
            case "bottom":
                r = e.y;
                s = e.height - m.height;
                l = 1;
                d = r + s;
                break;
            default:
                r = e.y + m.height;
                s = e.height - m.height;
                l = 0;
                d = e.y
        }
        var g = {
                x: n,
                y: r,
                width: a,
                height: s
            },
            v = {
                ratiox: o,
                ratioy: l
            };
        return {
            remainingSpace: g,
            ratioAnchor: v,
            text: _,
            titleXPos: c,
            titleYPos: d
        }
    }
    var l = (i.ContainerSprite, i.Rect, i.Polygon, i.Text, i.MultilineText),
        c = (i.selection, i.selector),
        u = (c.kind, i.bboxHelper.multilinetextBbox, l.create());
    return o
}, 656, 654, 566, 745, 696, 662, 675);
I$(677, function() {
    return function() {
        var t = arguments;
        return function(e) {
            for(var i = !0, n = 0; n < t.length; n++)
                if(t[n]) i = i && null != e[t[n]];
            return i
        }
    }
});
I$(678, function(t, e) {
    function i() {
        return "statistics" + _++
    }

    function n(t, e) {
        if("y" == e) {
            for(var i = 0, n = 0, r = 0; r < t[0].length; ++r)
                for(var a = t[0][r], s = 0; s < a[0].length; ++s) {
                    var o = a[0][s];
                    n = o.logicSpace.height;
                    if(0 == r && 0 == s) i += o.marklogicSpace.width;
                    else i += o.logicSpace.width
                }
            return {
                height: n,
                width: i
            }
        } else {
            for(var i = 0, n = 0, r = 0; r < t.length; ++r)
                for(var a = t[r][0], s = 0; s < a.length; ++s) {
                    var o = a[s][0];
                    if(0 == s) n += o.marklogicSpace.height;
                    else n += o.logicSpace.height;
                    i = o.logicSpace.width
                }
            return {
                height: n,
                width: i
            }
        }
    }

    function r(t, e, i, n, r, a, s) {
        var o, l, c, u = e.realDomain(),
            d = r[s].value,
            h = e.range(),
            f = !1;
        if("string" == typeof d) {
            c = "top" == d ? h[1] : h[0];
            c += "top" == d ? 1 : -1;
            d = e.exec(c, !0)
        } else {
            if(d > Math.max(u[0], u[1])) {
                d = Math.max(u[0], u[1]);
                f = !0
            } else if(d < Math.min(u[0], u[1])) {
                d = Math.min(u[0], u[1]);
                f = !0
            } else f = !1;
            c = e.exec(d)
        }
        if("y" == a) {
            o = {
                x: n.logicSpace.x,
                y: n.logicSpace.y + c
            };
            l = {
                x: n.logicSpace.x + n.logicSpace.width,
                y: n.logicSpace.y + c
            }
        } else {
            o = {
                x: n.logicSpace.x + c,
                y: n.logicSpace.y
            };
            l = {
                x: n.logicSpace.x + c,
                y: n.logicSpace.y + n.logicSpace.height
            }
        }
        t.push({
            value: d,
            begin: o,
            end: l,
            field: i,
            type: "constant",
            __key: a,
            hidden: f
        })
    }

    function a(t, e, i, n, r, a) {
        for(var s, o, l, c, u = 0; u < e.length; ++u)
            if(null != i[u]) {
                var d = e[u],
                    h = d.marks[r],
                    f = h.xScale,
                    p = h.yScale,
                    _ = h.xField,
                    m = h.yField,
                    g = "x" == n ? f : p,
                    v = "x" == n ? _ : m,
                    y = g.realDomain(),
                    b = g.range(),
                    x = i[u][a].value;
                if("string" == typeof x) {
                    l = "top" == x ? b[1] : b[0];
                    l += "top" == x ? 1 : -1;
                    x = g.exec(l, !0)
                } else {
                    if(x > Math.max(y[0], y[1])) {
                        x = Math.max(y[0], y[1]);
                        c = !0
                    } else if(x < Math.min(y[0], y[1])) {
                        x = Math.min(y[0], y[1]);
                        c = !0
                    } else c = !1;
                    l = g.exec(x)
                }
                if("y" == n) {
                    s = {
                        x: d.logicSpace.x,
                        y: d.logicSpace.y + l
                    };
                    o = {
                        x: d.logicSpace.x + d.logicSpace.width,
                        y: d.logicSpace.y + l
                    }
                } else {
                    s = {
                        x: d.logicSpace.x + l,
                        y: d.logicSpace.y
                    };
                    o = {
                        x: d.logicSpace.x + l,
                        y: d.logicSpace.y + d.logicSpace.height
                    }
                }
                t.push({
                    value: x,
                    begin: s,
                    end: o,
                    field: v,
                    type: "constant",
                    __key: n,
                    hidden: c
                })
            } else;
    }

    function s(t, e, i, n, r, a) {
        function s(t) {
            if("continuous" == v.type()) return !0;
            else return 1 == b[t]
        }
        for(var o, l, c = 0; c < e.length; ++c)
            if(null != i[c]) {
                for(var u = e[c], d = u.marks[r], h = d.xScale, f = d.yScale, p = d.xField, _ = d.yField, m = "x" == n ? h : f, g = "x" == n ? p : _, v = "x" == n ? f : h, y = "discrete" == v.type() ? v.domain() : [], b = {}, x = m.range(), $ = m.realDomain(), w = 0; w < y.length; ++w) b[y[w]] = !0;
                var k = i[c];
                if("y" == n)
                    for(var S = 0; S < k.length; ++S) {
                        var C = k[S][a].value;
                        if(s(k[S][a].name)) {
                            var T = h.exec(k[S][a].name),
                                E = h.step ? h.step() : 10;
                            if("string" == typeof C) {
                                o = "top" == C ? x[1] : x[0];
                                o += "top" == C ? 1 : -1;
                                C = m.exec(o, !0)
                            } else {
                                if(C > Math.max($[0], $[1])) {
                                    C = Math.max($[0], $[1]);
                                    l = !0
                                } else if(C < Math.min($[0], $[1])) {
                                    C = Math.min($[0], $[1]);
                                    l = !0
                                } else l = !1;
                                o = f.exec(C)
                            }
                            var I = {
                                    x: u.logicSpace.x + T - E / 2,
                                    y: u.logicSpace.y + o
                                },
                                A = {
                                    x: u.logicSpace.x + T + E / 2,
                                    y: u.logicSpace.y + o
                                };
                            t.push({
                                value: C,
                                begin: I,
                                end: A,
                                field: g,
                                type: "constant",
                                __key: n,
                                hidden: l
                            })
                        } else;
                    } else
                    for(var S = 0; S < k.length; ++S) {
                        var C = k[S][a].value;
                        if(s(k[S][a].name)) {
                            var M = f.exec(k[S][a].name),
                                E = f.step ? f.step() : 10;
                            if("string" == typeof C) {
                                o = "top" == C ? x[1] : x[0];
                                o += "top" == C ? 1 : -1;
                                C = m.exec(o, !0)
                            } else {
                                if(C > Math.max($[0], $[1])) {
                                    o = Math.max($[0], $[1]);
                                    l = !0
                                } else if(C < Math.min($[0], $[1])) {
                                    o = Math.min($[0], $[1]);
                                    l = !0
                                } else l = !1;
                                o = h.exec(C)
                            }
                            var I = {
                                    x: u.logicSpace.x + o,
                                    y: u.logicSpace.y + M - E / 2
                                },
                                A = {
                                    x: u.logicSpace.x + o,
                                    y: u.logicSpace.y + M + E / 2
                                };
                            t.push({
                                value: C,
                                begin: I,
                                end: A,
                                field: g,
                                type: "constant",
                                __key: n,
                                hidden: l
                            })
                        } else;
                    }
            } else;
    }

    function o(t, e) {
        for(var i = [], n = t.length, r = (t[0].length, 0); r < n; ++r) i.push(t[r][e]);
        return i
    }

    function l(t, e, i, n, l, u, d) {
        for(var h, f, p = c(t, u, e), _ = new Array, m = 0; m < e; ++m)
            for(var g = 0; g < p.length; ++g)
                if(null != p[g] && 0 != p[g].length) {
                    var v = p[g][0].marks[m],
                        y = p[g][0],
                        b = y.whichPane.paneRow,
                        x = y.whichPane.paneCol,
                        $ = v.xScale,
                        w = v.yScale,
                        k = v.xField,
                        S = v.yField;
                    h = "x" == u ? $ : w;
                    f = "x" == u ? k : S;
                    if(f == n) {
                        if("table" == l) r(_, h, f, p[g], i, u, d);
                        if("pane" == l) {
                            var C = "y" == u ? i[b] : o(i, x);
                            a(_, p[g], C, u, m, d)
                        }
                        if("cell" == l) {
                            var C = "y" == u ? i[b] : o(i, x);
                            s(_, p[g], C, u, m, d)
                        }
                    }
                } else;
        return _
    }

    function c(t, e, i) {
        for(var r, a = [], s = n(t, e), o = 0; o < t.length; o++)
            for(var l = 0; l < t[o].length; l++)
                for(var c = t[o][l], u = 0; u < c.length; u++)
                    for(var d = 0; d < c[u].length; d++) {
                        if("y" == e) r = o * c.length + u;
                        else r = l * c[0].length + d;
                        var h = c[u][d];
                        if(null == a[r]) {
                            a[r] = [];
                            if("y" == e) {
                                var f = t[o][0][u][0].logicSpace,
                                    p = t[o][0][u][0].marklogicSpace;
                                a[r].logicSpace = {
                                    x: f.x + p.x,
                                    y: f.y + p.y,
                                    width: s.width,
                                    height: s.height
                                }
                            } else {
                                var f = t[0][l][0][d].logicSpace,
                                    p = t[0][l][0][d].marklogicSpace;
                                a[r].logicSpace = {
                                    x: f.x + p.x,
                                    y: f.y + p.y,
                                    width: s.width,
                                    height: s.height
                                }
                            }
                        }
                        h.whichPane = {
                            paneRow: o,
                            paneCol: l
                        };
                        a[r].push(h)
                    }
        return a
    }

    function u(t, e) {
        var i = "";
        i += "continuous" == t.type() ? "x" : "";
        i += "continuous" == e.type() ? "y" : "";
        return i
    }

    function d(t, e, i) {
        var n = [];
        if("y" == i)
            for(var r = 0; r < t.length; ++r) {
                var a = {},
                    s = t[r].begin.y < e[r].begin.y ? !0 : !1;
                a.rect = {
                    x: s ? t[r].begin.x : e[r].begin.x,
                    y: s ? t[r].begin.y : e[r].begin.y,
                    width: Math.abs(t[r].begin.x - t[r].end.x),
                    height: Math.abs(t[r].begin.y - e[r].begin.y),
                    __key: t[r].__key,
                    beginValue: t[r].value,
                    endValue: e[r].value
                };
                a.beginLine = t[r];
                a.endLine = e[r];
                n.push(a)
            } else if("x" == i)
            for(var r = 0; r < t.length; ++r) {
                var a = {},
                    o = t[r].begin.x < e[r].begin.x ? !0 : !1;
                a.rect = {
                    x: o ? t[r].begin.x : e[r].begin.x,
                    y: o ? t[r].begin.y : e[r].begin.y,
                    width: Math.abs(t[r].begin.x - e[r].begin.x),
                    height: Math.abs(t[r].begin.y - t[r].end.y),
                    __key: t[r].__key,
                    beginValue: t[r].value,
                    endValue: e[r].value
                };
                a.beginLine = t[r];
                a.endLine = e[r];
                n.push(a)
            }
        return n
    }

    function h(t) {
        for(var e = [], i = 0; i < t.length; ++i) {
            e.push([]);
            for(var n = 0; n < t[i].length; ++n) e[i].push(t[i][n][0])
        }
        return e
    }

    function f(t, e) {
        for(var i = 0; i < t.length; ++i)
            if(null == t[i].hidden || !t[i].hidden) t[i].hidden = e;
            else;
    }

    function p(t, e) {
        var n = {};
        n.space = t.space;
        if(null == e || 0 == e.length) return n;
        var r = t[0][0][0][0].marks.length;
        if(0 == r) return n;
        var a = t[0][0][0][0].marks[0].xScale,
            s = t[0][0][0][0].marks[0].yScale,
            o = u(a, s);
        n.line = [];
        n.area = [];
        for(var c = 0; c < e.length; ++c) {
            var p = [],
                _ = e[c],
                m = _.data,
                g = _.pid,
                v = _.tags,
                y = null == _.type ? "line" : _.type,
                b = null == _.extension ? "table" : _.extension,
                x = null == _.id ? i() : _.id,
                $ = _.hidden,
                w = null != $ && null != $.begin ? $.begin : !1,
                k = null != $ && null != $.end ? $.end : !1;
            if("xy" == o && "cell" == b) {
                m = h(m);
                b = "pane"
            }
            if("line" == y) {
                switch(o) {
                    case "x":
                        p = l(t, r, m, g, b, "x", "beginline");
                        break;
                    case "y":
                        p = l(t, r, m, g, b, "y", "beginline");
                        break;
                    default:
                        p = l(t, r, m, g, b, "x", "beginline");
                        if(p.length <= 0) p = p = l(t, r, m, g, b, "y", "beginline")
                }
                f(p, w);
                if(p.length <= 0) continue;
                p.tags = v;
                p.id = x;
                if(_.className) p.className = _.className;
                n.line.push(p)
            } else if("area" == y) {
                if(null == m.length && m.length <= 2) continue;
                switch(o) {
                    case "x":
                        begin_result = l(t, r, m, g, b, "x", "beginline");
                        end_result = l(t, r, m, g, b, "x", "endline");
                        f(begin_result, w);
                        f(end_result, k);
                        p = d(begin_result, end_result, "x");
                        break;
                    case "y":
                        begin_result = l(t, r, m, g, b, "y", "beginline");
                        end_result = l(t, r, m, g, b, "y", "endline");
                        f(begin_result, w);
                        f(end_result, k);
                        p = d(begin_result, end_result, "y");
                        break;
                    default:
                        var S = "x";
                        begin_result = l(t, r, m, g, b, "x", "beginline");
                        end_result = l(t, r, m, g, b, "x", "endline");
                        if(begin_result.length <= 0) {
                            S = "y";
                            begin_result = l(t, r, m, g, b, "y", "beginline");
                            end_result = l(t, r, m, g, b, "y", "endline")
                        }
                        f(begin_result, w);
                        f(end_result, k);
                        p = d(begin_result, end_result, S)
                }
                if(p.length <= 0) continue;
                p.tags = v;
                p.id = x;
                if(_.className) p.className = _.className;
                n.area.push(p)
            } else p = []
        }
        return n
    }
    var _ = 0;
    return p
}, 656, 654);
I$(747, function() {
    function t(t, e) {
        return t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN
    }

    function e(t) {
        return null === t ? NaN : +t
    }

    function i(t) {
        return !isNaN(t)
    }

    function n(t) {
        return {
            left: function(e, i, n, r) {
                if(arguments.length < 3) n = 0;
                if(arguments.length < 4) r = e.length;
                for(; n < r;) {
                    var a = n + r >>> 1;
                    if(t(e[a], i) < 0) n = a + 1;
                    else r = a
                }
                return n
            },
            right: function(e, i, n, r) {
                if(arguments.length < 3) n = 0;
                if(arguments.length < 4) r = e.length;
                for(; n < r;) {
                    var a = n + r >>> 1;
                    if(t(e[a], i) > 0) r = a;
                    else n = a + 1
                }
                return n
            }
        }
    }

    function r(t) {
        return t.length
    }

    function a(t) {
        for(var e = 1; t * e % 1;) e *= 10;
        return e
    }

    function s(t, e) {
        for(var i in e) Object.defineProperty(t.prototype, i, {
            value: e[i],
            enumerable: !1
        })
    }

    function o() {
        this._ = Object.create(null)
    }

    function l(t) {
        return(t += "") === xi || t[0] === $i ? $i + t : t
    }

    function c(t) {
        return(t += "")[0] === $i ? t.slice(1) : t
    }

    function u(t) {
        return l(t) in this._
    }

    function d(t) {
        return(t = l(t)) in this._ && delete this._[t]
    }

    function h() {
        var t = [];
        for(var e in this._) t.push(c(e));
        return t
    }

    function f() {
        var t = 0;
        for(var e in this._) ++t;
        return t
    }

    function p() {
        for(var t in this._) return !1;
        return !0
    }

    function _(t) {
        return t
    }

    function m(t, e, i) {
        return function() {
            var n = i.apply(e, arguments);
            return n === e ? t : n
        }
    }

    function g(t, e) {
        if(e in t) return e;
        e = e.charAt(0).toUpperCase() + e.slice(1);
        for(var i = 0, n = wi.length; i < n; ++i) {
            var r = wi[i] + e;
            if(r in t) return r
        }
    }

    function v() {}

    function y() {}

    function b(t) {
        function e() {
            for(var e, n = i, r = -1, a = n.length; ++r < a;)
                if(e = n[r].on) e.apply(this, arguments);
            return t
        }
        var i = [],
            n = new o;
        e.on = function(e, r) {
            var a, s = n.get(e);
            if(arguments.length < 2) return s && s.on;
            if(s) {
                s.on = null;
                i = i.slice(0, a = i.indexOf(s)).concat(i.slice(a + 1));
                n.remove(e)
            }
            if(r) i.push(n.set(e, {
                on: r
            }));
            return t
        };
        return e
    }

    function x() {
        _i.event.preventDefault()
    }

    function $() {
        for(var t, e = _i.event; t = e.sourceEvent;) e = t;
        return e
    }

    function w(t) {
        for(var e = new y, i = 0, n = arguments.length; ++i < n;) e[arguments[i]] = b(e);
        e.of = function(i, n) {
            return function(r) {
                try {
                    var a = r.sourceEvent = _i.event;
                    r.target = t;
                    _i.event = r;
                    e[r.type].apply(i, n)
                } finally {
                    _i.event = a
                }
            }
        };
        return e
    }

    function k(t) {
        var e = ".dragsuppress-" + ++Ii,
            i = "click" + e,
            n = _i.select(d3_window(t)).on("touchmove" + e, x).on("dragstart" + e, x).on("selectstart" + e, x);
        if(null == Ei) Ei = "onselectstart" in t ? !1 : g(t.style, "userSelect");
        if(Ei) {
            var r = d3_documentElement(t).style,
                a = r[Ei];
            r[Ei] = "none"
        }
        return function(t) {
            n.on(e, null);
            if(Ei) r[Ei] = a;
            if(t) {
                var s = function() {
                    n.on(i, null)
                };
                n.on(i, function() {
                    x();
                    s()
                }, !0);
                setTimeout(s, 0)
            }
        }
    }

    function S(t, e) {
        if(e.changedTouches) e = e.changedTouches[0];
        var i = t.ownerSVGElement || t;
        if(i.createSVGPoint) {
            var n = i.createSVGPoint();
            if(Ai < 0) {
                var r = d3_window(t);
                if(r.scrollX || r.scrollY) {
                    i = _i.select("body").append("svg").style({
                        position: "absolute",
                        top: 0,
                        left: 0,
                        margin: 0,
                        padding: 0,
                        border: "none"
                    }, "important");
                    var a = i[0][0].getScreenCTM();
                    Ai = !(a.f || a.e);
                    i.remove()
                }
            }
            if(Ai) n.x = e.pageX, n.y = e.pageY;
            else n.x = e.clientX, n.y = e.clientY;
            n = n.matrixTransform(t.getScreenCTM().inverse());
            return [n.x, n.y]
        }
        var s = t.getBoundingClientRect();
        return [e.clientX - s.left - t.clientLeft, e.clientY - s.top - t.clientTop]
    }

    function C() {
        return _i.event.changedTouches[0].identifier
    }

    function T(t) {
        return t > 0 ? 1 : t < 0 ? -1 : 0
    }

    function E(t, e, i) {
        return(e[0] - t[0]) * (i[1] - t[1]) - (e[1] - t[1]) * (i[0] - t[0])
    }

    function I(t) {
        return t > 1 ? 0 : t < -1 ? Pi : Math.acos(t)
    }

    function A(t) {
        return t > 1 ? Li : t < -1 ? -Li : Math.asin(t)
    }

    function M(t) {
        return((t = Math.exp(t)) - 1 / t) / 2
    }

    function D(t) {
        return((t = Math.exp(t)) + 1 / t) / 2
    }

    function P(t) {
        return((t = Math.exp(2 * t)) - 1) / (t + 1)
    }

    function N(t) {
        return(t = Math.sin(t / 2)) * t
    }

    function L() {}

    function R(t, e, i) {
        return this instanceof R ? void(this.h = +t, this.s = +e, this.l = +i) : arguments.length < 2 ? t instanceof R ? new R(t.h, t.s, t.l) : X("" + t, K, R) : new R(t, e, i)
    }

    function j(t, e, i) {
        function n(t) {
            if(t > 360) t -= 360;
            else if(t < 0) t += 360;
            if(t < 60) return a + (s - a) * t / 60;
            if(t < 180) return s;
            if(t < 240) return a + (s - a) * (240 - t) / 60;
            else return a
        }

        function r(t) {
            return Math.round(255 * n(t))
        }
        var a, s;
        t = isNaN(t) ? 0 : (t %= 360) < 0 ? t + 360 : t;
        e = isNaN(e) ? 0 : e < 0 ? 0 : e > 1 ? 1 : e;
        i = i < 0 ? 0 : i > 1 ? 1 : i;
        s = i <= .5 ? i * (1 + e) : i + e - i * e;
        a = 2 * i - s;
        return new U(r(t + 120), r(t), r(t - 120))
    }

    function O(t, e, i) {
        return this instanceof O ? void(this.h = +t, this.c = +e, this.l = +i) : arguments.length < 2 ? t instanceof O ? new O(t.h, t.c, t.l) : t instanceof z ? H(t.l, t.a, t.b) : H((t = J((t = _i.rgb(t)).r, t.g, t.b)).l, t.a, t.b) : new O(t, e, i)
    }

    function F(t, e, i) {
        if(isNaN(t)) t = 0;
        if(isNaN(e)) e = 0;
        return new z(i, Math.cos(t *= Ri) * e, Math.sin(t) * e)
    }

    function z(t, e, i) {
        return this instanceof z ? void(this.l = +t, this.a = +e, this.b = +i) : arguments.length < 2 ? t instanceof z ? new z(t.l, t.a, t.b) : t instanceof O ? F(t.h, t.c, t.l) : J((t = U(t)).r, t.g, t.b) : new z(t, e, i)
    }

    function B(t, e, i) {
        var n = (t + 16) / 116,
            r = n + e / 500,
            a = n - i / 200;
        r = W(r) * Vi;
        n = W(n) * Yi;
        a = W(a) * Xi;
        return new U(G(3.2404542 * r - 1.5371385 * n - .4985314 * a), G(-.969266 * r + 1.8760108 * n + .041556 * a), G(.0556434 * r - .2040259 * n + 1.0572252 * a))
    }

    function H(t, e, i) {
        return t > 0 ? new O(Math.atan2(i, e) * ji, Math.sqrt(e * e + i * i), t) : new O(NaN, NaN, t)
    }

    function W(t) {
        return t > .206893034 ? t * t * t : (t - 4 / 29) / 7.787037
    }

    function q(t) {
        return t > .008856 ? Math.pow(t, 1 / 3) : 7.787037 * t + 4 / 29
    }

    function G(t) {
        return Math.round(255 * (t <= .00304 ? 12.92 * t : 1.055 * Math.pow(t, 1 / 2.4) - .055))
    }

    function U(t, e, i) {
        return this instanceof U ? void(this.r = ~~t, this.g = ~~e, this.b = ~~i) : arguments.length < 2 ? t instanceof U ? new U(t.r, t.g, t.b) : X("" + t, U, j) : new U(t, e, i)
    }

    function V(t) {
        return new U(t >> 16, t >> 8 & 255, 255 & t)
    }

    function Y(t) {
        return t < 16 ? "0" + Math.max(0, t).toString(16) : Math.min(255, t).toString(16)
    }

    function X(t, e, i) {
        var n, r, a, s = 0,
            o = 0,
            l = 0;
        n = /([a-z]+)\((.*)\)/.exec(t = t.toLowerCase());
        if(n) {
            r = n[2].split(",");
            switch(n[1]) {
                case "hsl":
                    return i(parseFloat(r[0]), parseFloat(r[1]) / 100, parseFloat(r[2]) / 100);
                case "rgb":
                    return e(Q(r[0]), Q(r[1]), Q(r[2]))
            }
        }
        if(a = Zi.get(t)) return e(a.r, a.g, a.b);
        if(null != t && "#" === t.charAt(0) && !isNaN(a = parseInt(t.slice(1), 16)))
            if(4 === t.length) {
                s = (3840 & a) >> 4;
                s = s >> 4 | s;
                o = 240 & a;
                o = o >> 4 | o;
                l = 15 & a;
                l = l << 4 | l
            } else if(7 === t.length) {
                s = (16711680 & a) >> 16;
                o = (65280 & a) >> 8;
                l = 255 & a
            }
        return e(s, o, l)
    }

    function K(t, e, i) {
        var n, r, a = Math.min(t /= 255, e /= 255, i /= 255),
            s = Math.max(t, e, i),
            o = s - a,
            l = (s + a) / 2;
        if(o) {
            r = l < .5 ? o / (s + a) : o / (2 - s - a);
            if(t == s) n = (e - i) / o + (e < i ? 6 : 0);
            else if(e == s) n = (i - t) / o + 2;
            else n = (t - e) / o + 4;
            n *= 60
        } else {
            n = NaN;
            r = l > 0 && l < 1 ? 0 : n
        }
        return new R(n, r, l)
    }

    function J(t, e, i) {
        t = Z(t);
        e = Z(e);
        i = Z(i);
        var n = q((.4124564 * t + .3575761 * e + .1804375 * i) / Vi),
            r = q((.2126729 * t + .7151522 * e + .072175 * i) / Yi),
            a = q((.0193339 * t + .119192 * e + .9503041 * i) / Xi);
        return z(116 * r - 16, 500 * (n - r), 200 * (r - a))
    }

    function Z(t) {
        return(t /= 255) <= .04045 ? t / 12.92 : Math.pow((t + .055) / 1.055, 2.4)
    }

    function Q(t) {
        var e = parseFloat(t);
        return "%" === t.charAt(t.length - 1) ? Math.round(2.55 * e) : e
    }

    function tt(t) {
        return "function" == typeof t ? t : function() {
            return t
        }
    }

    function et(t) {
        return function(e, i, n) {
            if(2 === arguments.length && "function" == typeof i) n = i, i = null;
            return it(e, i, t, n)
        }
    }

    function it(t, e, i, n) {
        function r() {
            var t, e = l.status;
            if(!e && rt(l) || e >= 200 && e < 300 || 304 === e) {
                try {
                    t = i.call(a, l)
                } catch(t) {
                    s.error.call(a, t);
                    return
                }
                s.load.call(a, t)
            } else s.error.call(a, l)
        }
        var a = {},
            s = _i.dispatch("beforesend", "progress", "load", "error"),
            o = {},
            l = new XMLHttpRequest,
            c = null;
        if(this.XDomainRequest && !("withCredentials" in l) && /^(http(s)?:)?\/\//.test(t)) l = new XDomainRequest;
        "onload" in l ? l.onload = l.onerror = r : l.onreadystatechange = function() {
            l.readyState > 3 && r()
        };
        l.onprogress = function(t) {
            var e = _i.event;
            _i.event = t;
            try {
                s.progress.call(a, l)
            } finally {
                _i.event = e
            }
        };
        a.header = function(t, e) {
            t = (t + "").toLowerCase();
            if(arguments.length < 2) return o[t];
            if(null == e) delete o[t];
            else o[t] = e + "";
            return a
        };
        a.mimeType = function(t) {
            if(!arguments.length) return e;
            e = null == t ? null : t + "";
            return a
        };
        a.responseType = function(t) {
            if(!arguments.length) return c;
            c = t;
            return a
        };
        a.response = function(t) {
            i = t;
            return a
        };
        ["get", "post"].forEach(function(t) {
            a[t] = function() {
                return a.send.apply(a, [t].concat(gi(arguments)))
            }
        });
        a.send = function(i, n, r) {
            if(2 === arguments.length && "function" == typeof n) r = n, n = null;
            l.open(i, t, !0);
            if(null != e && !("accept" in o)) o["accept"] = e + ",*/*";
            if(l.setRequestHeader)
                for(var u in o) l.setRequestHeader(u, o[u]);
            if(null != e && l.overrideMimeType) l.overrideMimeType(e);
            if(null != c) l.responseType = c;
            if(null != r) a.on("error", r).on("load", function(t) {
                r(null, t)
            });
            s.beforesend.call(a, l);
            l.send(null == n ? null : n);
            return a
        };
        a.abort = function() {
            l.abort();
            return a
        };
        _i.rebind(a, s, "on");
        return null == n ? a : a.get(nt(n))
    }

    function nt(t) {
        return 1 === t.length ? function(e, i) {
            t(null == e ? i : null)
        } : t
    }

    function rt(t) {
        var e = t.responseType;
        return e && "text" !== e ? t.response : t.responseText
    }

    function at(t, e) {
        return e - (t ? Math.ceil(Math.log(t) / Math.LN10) : 1)
    }

    function st(t, e) {
        var i = Math.pow(10, 3 * bi(8 - e));
        return {
            scale: e > 8 ? function(t) {
                return t / i
            } : function(t) {
                return t * i
            },
            symbol: t
        }
    }

    function ot() {
        this._ = new Date(arguments.length > 1 ? Date.UTC.apply(this, arguments) : arguments[0])
    }

    function lt(t, e, i) {
        function n(e) {
            var i = t(e),
                n = a(i, 1);
            return e - i < n - e ? i : n
        }

        function r(i) {
            e(i = t(new en(i - 1)), 1);
            return i
        }

        function a(t, i) {
            e(t = new en(+t), i);
            return t
        }

        function s(t, n, a) {
            var s = r(t),
                o = [];
            if(a > 1)
                for(; s < n;) {
                    if(!(i(s) % a)) o.push(new Date(+s));
                    e(s, 1)
                } else
                for(; s < n;) o.push(new Date(+s)), e(s, 1);
            return o
        }

        function o(t, e, i) {
            try {
                en = ot;
                var n = new ot;
                n._ = t;
                return s(n, e, i)
            } finally {
                en = Date
            }
        }
        t.floor = t;
        t.round = n;
        t.ceil = r;
        t.offset = a;
        t.range = s;
        var l = t.utc = ct(t);
        l.floor = l;
        l.round = ct(n);
        l.ceil = ct(r);
        l.offset = ct(a);
        l.range = o;
        return t
    }

    function ct(t) {
        return function(e, i) {
            try {
                en = ot;
                var n = new ot;
                n._ = e;
                return t(n, i)._
            } finally {
                en = Date
            }
        }
    }

    function ut() {}

    function dt(t, e, i) {
        var n = i.s = t + e,
            r = n - t,
            a = n - r;
        i.t = t - a + (e - r)
    }

    function ht(t, e) {
        if(t && sn.hasOwnProperty(t.type)) sn[t.type](t, e)
    }

    function ft(t, e, i) {
        var n, r = -1,
            a = t.length - i;
        e.lineStart();
        for(; ++r < a;) n = t[r], e.point(n[0], n[1], n[2]);
        e.lineEnd()
    }

    function pt(t, e) {
        var i = -1,
            n = t.length;
        e.polygonStart();
        for(; ++i < n;) ft(t[i], e, 1);
        e.polygonEnd()
    }

    function _t() {
        function t(t, e) {
            t *= Ri;
            e = e * Ri / 2 + Pi / 4;
            var i = t - n,
                s = i >= 0 ? 1 : -1,
                o = s * i,
                l = Math.cos(e),
                c = Math.sin(e),
                u = a * c,
                d = r * l + u * Math.cos(o),
                h = u * s * Math.sin(o);
            ln.add(Math.atan2(h, d));
            n = t, r = l, a = c
        }
        var e, i, n, r, a;
        cn.point = function(s, o) {
            cn.point = t;
            n = (e = s) * Ri, r = Math.cos(o = (i = o) * Ri / 2 + Pi / 4), a = Math.sin(o)
        };
        cn.lineEnd = function() {
            t(e, i)
        }
    }

    function mt(t) {
        var e = t[0],
            i = t[1],
            n = Math.cos(i);
        return [n * Math.cos(e), n * Math.sin(e), Math.sin(i)]
    }

    function gt(t, e) {
        return t[0] * e[0] + t[1] * e[1] + t[2] * e[2]
    }

    function vt(t, e) {
        return [t[1] * e[2] - t[2] * e[1], t[2] * e[0] - t[0] * e[2], t[0] * e[1] - t[1] * e[0]]
    }

    function yt(t, e) {
        t[0] += e[0];
        t[1] += e[1];
        t[2] += e[2]
    }

    function bt(t, e) {
        return [t[0] * e, t[1] * e, t[2] * e]
    }

    function xt(t) {
        var e = Math.sqrt(t[0] * t[0] + t[1] * t[1] + t[2] * t[2]);
        t[0] /= e;
        t[1] /= e;
        t[2] /= e
    }

    function $t(t) {
        return [Math.atan2(t[1], t[0]), A(t[2])]
    }

    function wt(t, e) {
        return bi(t[0] - e[0]) < Mi && bi(t[1] - e[1]) < Mi
    }

    function kt(t, e) {
        t *= Ri;
        var i = Math.cos(e *= Ri);
        St(i * Math.cos(t), i * Math.sin(t), Math.sin(e))
    }

    function St(t, e, i) {
        ++un;
        hn += (t - hn) / un;
        fn += (e - fn) / un;
        pn += (i - pn) / un
    }

    function Ct() {
        function t(t, r) {
            t *= Ri;
            var a = Math.cos(r *= Ri),
                s = a * Math.cos(t),
                o = a * Math.sin(t),
                l = Math.sin(r),
                c = Math.atan2(Math.sqrt((c = i * l - n * o) * c + (c = n * s - e * l) * c + (c = e * o - i * s) * c), e * s + i * o + n * l);
            dn += c;
            _n += c * (e + (e = s));
            mn += c * (i + (i = o));
            gn += c * (n + (n = l));
            St(e, i, n)
        }
        var e, i, n;
        xn.point = function(r, a) {
            r *= Ri;
            var s = Math.cos(a *= Ri);
            e = s * Math.cos(r);
            i = s * Math.sin(r);
            n = Math.sin(a);
            xn.point = t;
            St(e, i, n)
        }
    }

    function Tt() {
        xn.point = kt
    }

    function Et() {
        function t(t, e) {
            t *= Ri;
            var i = Math.cos(e *= Ri),
                s = i * Math.cos(t),
                o = i * Math.sin(t),
                l = Math.sin(e),
                c = r * l - a * o,
                u = a * s - n * l,
                d = n * o - r * s,
                h = Math.sqrt(c * c + u * u + d * d),
                f = n * s + r * o + a * l,
                p = h && -I(f) / h,
                _ = Math.atan2(h, f);
            vn += p * c;
            yn += p * u;
            bn += p * d;
            dn += _;
            _n += _ * (n + (n = s));
            mn += _ * (r + (r = o));
            gn += _ * (a + (a = l));
            St(n, r, a)
        }
        var e, i, n, r, a;
        xn.point = function(s, o) {
            e = s, i = o;
            xn.point = t;
            s *= Ri;
            var l = Math.cos(o *= Ri);
            n = l * Math.cos(s);
            r = l * Math.sin(s);
            a = Math.sin(o);
            St(n, r, a)
        };
        xn.lineEnd = function() {
            t(e, i);
            xn.lineEnd = Tt;
            xn.point = kt
        }
    }

    function It(t, e) {
        function i(i, n) {
            return i = t(i, n), e(i[0], i[1])
        }
        if(t.invert && e.invert) i.invert = function(i, n) {
            return i = e.invert(i, n), i && t.invert(i[0], i[1])
        };
        return i
    }

    function At() {
        return !0
    }

    function Mt(t, e, i, n, r) {
        var a = [],
            s = [];
        t.forEach(function(t) {
            if(!((e = t.length - 1) <= 0)) {
                var e, i = t[0],
                    n = t[e];
                if(!wt(i, n)) {
                    var o = new Pt(i, t, null, !0),
                        l = new Pt(i, null, o, !1);
                    o.o = l;
                    a.push(o);
                    s.push(l);
                    o = new Pt(n, t, null, !1);
                    l = new Pt(n, null, o, !0);
                    o.o = l;
                    a.push(o);
                    s.push(l)
                } else {
                    r.lineStart();
                    for(var c = 0; c < e; ++c) r.point((i = t[c])[0], i[1]);
                    r.lineEnd()
                }
            }
        });
        s.sort(e);
        Dt(a);
        Dt(s);
        if(a.length) {
            for(var o = 0, l = i, c = s.length; o < c; ++o) s[o].e = l = !l;
            for(var u, d, h = a[0];;) {
                for(var f = h, p = !0; f.v;)
                    if((f = f.n) === h) return;
                u = f.z;
                r.lineStart();
                do {
                    f.v = f.o.v = !0;
                    if(f.e) {
                        if(p)
                            for(var o = 0, c = u.length; o < c; ++o) r.point((d = u[o])[0], d[1]);
                        else n(f.x, f.n.x, 1, r);
                        f = f.n
                    } else {
                        if(p) {
                            u = f.p.z;
                            for(var o = u.length - 1; o >= 0; --o) r.point((d = u[o])[0], d[1])
                        } else n(f.x, f.p.x, -1, r);
                        f = f.p
                    }
                    f = f.o;
                    u = f.z;
                    p = !p
                } while (!f.v);
                r.lineEnd()
            }
        }
    }

    function Dt(t) {
        if(e = t.length) {
            for(var e, i, n = 0, r = t[0]; ++n < e;) {
                r.n = i = t[n];
                i.p = r;
                r = i
            }
            r.n = i = t[0];
            i.p = r
        }
    }

    function Pt(t, e, i, n) {
        this.x = t;
        this.z = e;
        this.o = i;
        this.e = n;
        this.v = !1;
        this.n = this.p = null
    }

    function Nt(t, e, i, n) {
        return function(r, a) {
            function s(e, i) {
                var n = r(e, i);
                if(t(e = n[0], i = n[1])) a.point(e, i)
            }

            function o(t, e) {
                var i = r(t, e);
                m.point(i[0], i[1])
            }

            function l() {
                v.point = o;
                m.lineStart()
            }

            function c() {
                v.point = s;
                m.lineEnd()
            }

            function u(t, e) {
                _.push([t, e]);
                var i = r(t, e);
                b.point(i[0], i[1])
            }

            function d() {
                b.lineStart();
                _ = []
            }

            function h() {
                u(_[0][0], _[0][1]);
                b.lineEnd();
                var t, e = b.clean(),
                    i = y.buffer(),
                    n = i.length;
                _.pop();
                p.push(_);
                _ = null;
                if(n)
                    if(!(1 & e)) {
                        if(n > 1 && 2 & e) i.push(i.pop().concat(i.shift()));
                        f.push(i.filter(Lt))
                    } else {
                        t = i[0];
                        var r, n = t.length - 1,
                            s = -1;
                        if(n > 0) {
                            if(!x) a.polygonStart(), x = !0;
                            a.lineStart();
                            for(; ++s < n;) a.point((r = t[s])[0], r[1]);
                            a.lineEnd()
                        }
                    }
            }
            var f, p, _, m = e(a),
                g = r.invert(n[0], n[1]),
                v = {
                    point: s,
                    lineStart: l,
                    lineEnd: c,
                    polygonStart: function() {
                        v.point = u;
                        v.lineStart = d;
                        v.lineEnd = h;
                        f = [];
                        p = []
                    },
                    polygonEnd: function() {
                        v.point = s;
                        v.lineStart = l;
                        v.lineEnd = c;
                        f = _i.merge(f);
                        var t = Bt(g, p);
                        if(f.length) {
                            if(!x) a.polygonStart(), x = !0;
                            Mt(f, jt, t, i, a)
                        } else if(t) {
                            if(!x) a.polygonStart(), x = !0;
                            a.lineStart();
                            i(null, null, 1, a);
                            a.lineEnd()
                        }
                        if(x) a.polygonEnd(), x = !1;
                        f = p = null
                    },
                    sphere: function() {
                        a.polygonStart();
                        a.lineStart();
                        i(null, null, 1, a);
                        a.lineEnd();
                        a.polygonEnd()
                    }
                },
                y = Rt(),
                b = e(y),
                x = !1;
            return v
        }
    }

    function Lt(t) {
        return t.length > 1
    }

    function Rt() {
        var t, e = [];
        return {
            lineStart: function() {
                e.push(t = [])
            },
            point: function(e, i) {
                t.push([e, i])
            },
            lineEnd: v,
            buffer: function() {
                var i = e;
                e = [];
                t = null;
                return i
            },
            rejoin: function() {
                if(e.length > 1) e.push(e.pop().concat(e.shift()))
            }
        }
    }

    function jt(t, e) {
        return((t = t.x)[0] < 0 ? t[1] - Li - Mi : Li - t[1]) - ((e = e.x)[0] < 0 ? e[1] - Li - Mi : Li - e[1])
    }

    function Ot(t) {
        var e, i = NaN,
            n = NaN,
            r = NaN;
        return {
            lineStart: function() {
                t.lineStart();
                e = 1
            },
            point: function(a, s) {
                var o = a > 0 ? Pi : -Pi,
                    l = bi(a - i);
                if(bi(l - Pi) < Mi) {
                    t.point(i, n = (n + s) / 2 > 0 ? Li : -Li);
                    t.point(r, n);
                    t.lineEnd();
                    t.lineStart();
                    t.point(o, n);
                    t.point(a, n);
                    e = 0
                } else if(r !== o && l >= Pi) {
                    if(bi(i - r) < Mi) i -= r * Mi;
                    if(bi(a - o) < Mi) a -= o * Mi;
                    n = Ft(i, n, a, s);
                    t.point(r, n);
                    t.lineEnd();
                    t.lineStart();
                    t.point(o, n);
                    e = 0
                }
                t.point(i = a, n = s);
                r = o
            },
            lineEnd: function() {
                t.lineEnd();
                i = n = NaN
            },
            clean: function() {
                return 2 - e
            }
        }
    }

    function Ft(t, e, i, n) {
        var r, a, s = Math.sin(t - i);
        return bi(s) > Mi ? Math.atan((Math.sin(e) * (a = Math.cos(n)) * Math.sin(i) - Math.sin(n) * (r = Math.cos(e)) * Math.sin(t)) / (r * a * s)) : (e + n) / 2
    }

    function zt(t, e, i, n) {
        var r;
        if(null == t) {
            r = i * Li;
            n.point(-Pi, r);
            n.point(0, r);
            n.point(Pi, r);
            n.point(Pi, 0);
            n.point(Pi, -r);
            n.point(0, -r);
            n.point(-Pi, -r);
            n.point(-Pi, 0);
            n.point(-Pi, r)
        } else if(bi(t[0] - e[0]) > Mi) {
            var a = t[0] < e[0] ? Pi : -Pi;
            r = i * a / 2;
            n.point(-a, r);
            n.point(0, r);
            n.point(a, r)
        } else n.point(e[0], e[1])
    }

    function Bt(t, e) {
        var i = t[0],
            n = t[1],
            r = [Math.sin(i), -Math.cos(i), 0],
            a = 0,
            s = 0;
        ln.reset();
        for(var o = 0, l = e.length; o < l; ++o) {
            var c = e[o],
                u = c.length;
            if(u)
                for(var d = c[0], h = d[0], f = d[1] / 2 + Pi / 4, p = Math.sin(f), _ = Math.cos(f), m = 1;;) {
                    if(m === u) m = 0;
                    t = c[m];
                    var g = t[0],
                        v = t[1] / 2 + Pi / 4,
                        y = Math.sin(v),
                        b = Math.cos(v),
                        x = g - h,
                        $ = x >= 0 ? 1 : -1,
                        w = $ * x,
                        k = w > Pi,
                        S = p * y;
                    ln.add(Math.atan2(S * $ * Math.sin(w), _ * b + S * Math.cos(w)));
                    a += k ? x + $ * Ni : x;
                    if(k ^ h >= i ^ g >= i) {
                        var C = vt(mt(d), mt(t));
                        xt(C);
                        var T = vt(r, C);
                        xt(T);
                        var E = (k ^ x >= 0 ? -1 : 1) * A(T[2]);
                        if(n > E || n === E && (C[0] || C[1])) s += k ^ x >= 0 ? 1 : -1
                    }
                    if(!m++) break;
                    h = g, p = y, _ = b, d = t
                } else;
        }
        return(a < -Mi || a < Mi && ln < -Mi) ^ 1 & s
    }

    function Ht(t) {
        function e(t, e) {
            return Math.cos(t) * Math.cos(e) > a
        }

        function i(t) {
            var i, a, l, c, u;
            return {
                lineStart: function() {
                    c = l = !1;
                    u = 1
                },
                point: function(d, h) {
                    var f, p = [d, h],
                        _ = e(d, h),
                        m = s ? _ ? 0 : r(d, h) : _ ? r(d + (d < 0 ? Pi : -Pi), h) : 0;
                    if(!i && (c = l = _)) t.lineStart();
                    if(_ !== l) {
                        f = n(i, p);
                        if(wt(i, f) || wt(p, f)) {
                            p[0] += Mi;
                            p[1] += Mi;
                            _ = e(p[0], p[1])
                        }
                    }
                    if(_ !== l) {
                        u = 0;
                        if(_) {
                            t.lineStart();
                            f = n(p, i);
                            t.point(f[0], f[1])
                        } else {
                            f = n(i, p);
                            t.point(f[0], f[1]);
                            t.lineEnd()
                        }
                        i = f
                    } else if(o && i && s ^ _) {
                        var g;
                        if(!(m & a) && (g = n(p, i, !0))) {
                            u = 0;
                            if(s) {
                                t.lineStart();
                                t.point(g[0][0], g[0][1]);
                                t.point(g[1][0], g[1][1]);
                                t.lineEnd()
                            } else {
                                t.point(g[1][0], g[1][1]);
                                t.lineEnd();
                                t.lineStart();
                                t.point(g[0][0], g[0][1])
                            }
                        }
                    }
                    if(_ && (!i || !wt(i, p))) t.point(p[0], p[1]);
                    i = p, l = _, a = m
                },
                lineEnd: function() {
                    if(l) t.lineEnd();
                    i = null
                },
                clean: function() {
                    return u | (c && l) << 1
                }
            }
        }

        function n(t, e, i) {
            var n = mt(t),
                r = mt(e),
                s = [1, 0, 0],
                o = vt(n, r),
                l = gt(o, o),
                c = o[0],
                u = l - c * c;
            if(!u) return !i && t;
            var d = a * l / u,
                h = -a * c / u,
                f = vt(s, o),
                p = bt(s, d),
                _ = bt(o, h);
            yt(p, _);
            var m = f,
                g = gt(p, m),
                v = gt(m, m),
                y = g * g - v * (gt(p, p) - 1);
            if(!(y < 0)) {
                var b = Math.sqrt(y),
                    x = bt(m, (-g - b) / v);
                yt(x, p);
                x = $t(x);
                if(!i) return x;
                var $, w = t[0],
                    k = e[0],
                    S = t[1],
                    C = e[1];
                if(k < w) $ = w, w = k, k = $;
                var T = k - w,
                    E = bi(T - Pi) < Mi,
                    I = E || T < Mi;
                if(!E && C < S) $ = S, S = C, C = $;
                if(I ? E ? S + C > 0 ^ x[1] < (bi(x[0] - w) < Mi ? S : C) : S <= x[1] && x[1] <= C : T > Pi ^ (w <= x[0] && x[0] <= k)) {
                    var A = bt(m, (-g + b) / v);
                    yt(A, p);
                    return [x, $t(A)]
                }
            }
        }

        function r(e, i) {
            var n = s ? t : Pi - t,
                r = 0;
            if(e < -n) r |= 1;
            else if(e > n) r |= 2;
            if(i < -n) r |= 4;
            else if(i > n) r |= 8;
            return r
        }
        var a = Math.cos(t),
            s = a > 0,
            o = bi(a) > Mi,
            l = _e(t, 6 * Ri);
        return Nt(e, i, l, s ? [0, -t] : [-Pi, t - Pi])
    }

    function Wt(t, e, i, n) {
        return function(r) {
            var a, s = r.a,
                o = r.b,
                l = s.x,
                c = s.y,
                u = o.x,
                d = o.y,
                h = 0,
                f = 1,
                p = u - l,
                _ = d - c;
            a = t - l;
            if(p || !(a > 0)) {
                a /= p;
                if(p < 0) {
                    if(a < h) return;
                    if(a < f) f = a
                } else if(p > 0) {
                    if(a > f) return;
                    if(a > h) h = a
                }
                a = i - l;
                if(p || !(a < 0)) {
                    a /= p;
                    if(p < 0) {
                        if(a > f) return;
                        if(a > h) h = a
                    } else if(p > 0) {
                        if(a < h) return;
                        if(a < f) f = a
                    }
                    a = e - c;
                    if(_ || !(a > 0)) {
                        a /= _;
                        if(_ < 0) {
                            if(a < h) return;
                            if(a < f) f = a
                        } else if(_ > 0) {
                            if(a > f) return;
                            if(a > h) h = a
                        }
                        a = n - c;
                        if(_ || !(a < 0)) {
                            a /= _;
                            if(_ < 0) {
                                if(a > f) return;
                                if(a > h) h = a
                            } else if(_ > 0) {
                                if(a < h) return;
                                if(a < f) f = a
                            }
                            if(h > 0) r.a = {
                                x: l + h * p,
                                y: c + h * _
                            };
                            if(f < 1) r.b = {
                                x: l + f * p,
                                y: c + f * _
                            };
                            return r
                        }
                    }
                }
            }
        }
    }

    function qt(t, e, i, n) {
        function r(n, r) {
            return bi(n[0] - t) < Mi ? r > 0 ? 0 : 3 : bi(n[0] - i) < Mi ? r > 0 ? 2 : 1 : bi(n[1] - e) < Mi ? r > 0 ? 1 : 0 : r > 0 ? 3 : 2
        }

        function a(t, e) {
            return s(t.x, e.x)
        }

        function s(t, e) {
            var i = r(t, 1),
                n = r(e, 1);
            return i !== n ? i - n : 0 === i ? e[1] - t[1] : 1 === i ? t[0] - e[0] : 2 === i ? t[1] - e[1] : e[0] - t[0]
        }
        return function(o) {
            function l(t) {
                for(var e = 0, i = m.length, n = t[1], r = 0; r < i; ++r)
                    for(var a, s = 1, o = m[r], l = o.length, c = o[0]; s < l; ++s) {
                        a = o[s];
                        if(c[1] <= n) {
                            if(a[1] > n && E(c, a, t) > 0) ++e
                        } else if(a[1] <= n && E(c, a, t) < 0) --e;
                        c = a
                    }
                return 0 !== e
            }

            function c(a, o, l, c) {
                var u = 0,
                    d = 0;
                if(null == a || (u = r(a, l)) !== (d = r(o, l)) || s(a, o) < 0 ^ l > 0) {
                    do c.point(0 === u || 3 === u ? t : i, u > 1 ? n : e); while ((u = (u + l + 4) % 4) !== d)
                } else c.point(o[0], o[1])
            }

            function u(r, a) {
                return t <= r && r <= i && e <= a && a <= n
            }

            function d(t, e) {
                if(u(t, e)) o.point(t, e)
            }

            function h() {
                A.point = p;
                if(m) m.push(g = []);
                k = !0;
                w = !1;
                x = $ = NaN
            }

            function f() {
                if(_) {
                    p(v, y);
                    if(b && w) T.rejoin();
                    _.push(T.buffer())
                }
                A.point = d;
                if(w) o.lineEnd()
            }

            function p(t, e) {
                t = Math.max(-wn, Math.min(wn, t));
                e = Math.max(-wn, Math.min(wn, e));
                var i = u(t, e);
                if(m) g.push([t, e]);
                if(k) {
                    v = t, y = e, b = i;
                    k = !1;
                    if(i) {
                        o.lineStart();
                        o.point(t, e)
                    }
                } else if(i && w) o.point(t, e);
                else {
                    var n = {
                        a: {
                            x: x,
                            y: $
                        },
                        b: {
                            x: t,
                            y: e
                        }
                    };
                    if(I(n)) {
                        if(!w) {
                            o.lineStart();
                            o.point(n.a.x, n.a.y)
                        }
                        o.point(n.b.x, n.b.y);
                        if(!i) o.lineEnd();
                        S = !1
                    } else if(i) {
                        o.lineStart();
                        o.point(t, e);
                        S = !1
                    }
                }
                x = t, $ = e, w = i
            }
            var _, m, g, v, y, b, x, $, w, k, S, C = o,
                T = Rt(),
                I = Wt(t, e, i, n),
                A = {
                    point: d,
                    lineStart: h,
                    lineEnd: f,
                    polygonStart: function() {
                        o = T;
                        _ = [];
                        m = [];
                        S = !0
                    },
                    polygonEnd: function() {
                        o = C;
                        _ = _i.merge(_);
                        var e = l([t, n]),
                            i = S && e,
                            r = _.length;
                        if(i || r) {
                            o.polygonStart();
                            if(i) {
                                o.lineStart();
                                c(null, null, 1, o);
                                o.lineEnd()
                            }
                            if(r) Mt(_, a, e, c, o);
                            o.polygonEnd()
                        }
                        _ = m = g = null
                    }
                };
            return A
        }
    }

    function Gt(t) {
        var e = 0,
            i = Pi / 3,
            n = oe(t),
            r = n(e, i);
        r.parallels = function(t) {
            if(!arguments.length) return [e / Pi * 180, i / Pi * 180];
            else return n(e = t[0] * Pi / 180, i = t[1] * Pi / 180)
        };
        return r
    }

    function Ut(t, e) {
        function i(t, e) {
            var i = Math.sqrt(a - 2 * r * Math.sin(e)) / r;
            return [i * Math.sin(t *= r), s - i * Math.cos(t)]
        }
        var n = Math.sin(t),
            r = (n + Math.sin(e)) / 2,
            a = 1 + n * (2 * r - n),
            s = Math.sqrt(a) / r;
        i.invert = function(t, e) {
            var i = s - e;
            return [Math.atan2(t, i) / r, A((a - (t * t + i * i) * r * r) / (2 * r))]
        };
        return i
    }

    function Vt() {
        function t(t, e) {
            Sn += r * t - n * e;
            n = t, r = e
        }
        var e, i, n, r;
        An.point = function(a, s) {
            An.point = t;
            e = n = a, i = r = s
        };
        An.lineEnd = function() {
            t(e, i)
        }
    }

    function Yt(t, e) {
        if(t < Cn) Cn = t;
        if(t > En) En = t;
        if(e < Tn) Tn = e;
        if(e > In) In = e
    }

    function Xt() {
        function t(t, e) {
            s.push("M", t, ",", e, a)
        }

        function e(t, e) {
            s.push("M", t, ",", e);
            o.point = i
        }

        function i(t, e) {
            s.push("L", t, ",", e)
        }

        function n() {
            o.point = t
        }

        function r() {
            s.push("Z")
        }
        var a = Kt(4.5),
            s = [],
            o = {
                point: t,
                lineStart: function() {
                    o.point = e
                },
                lineEnd: n,
                polygonStart: function() {
                    o.lineEnd = r
                },
                polygonEnd: function() {
                    o.lineEnd = n;
                    o.point = t
                },
                pointRadius: function(t) {
                    a = Kt(t);
                    return o
                },
                result: function() {
                    if(s.length) {
                        var t = s.join("");
                        s = [];
                        return t
                    }
                }
            };
        return o
    }

    function Kt(t) {
        return "m0," + t + "a" + t + "," + t + " 0 1,1 0," + -2 * t + "a" + t + "," + t + " 0 1,1 0," + 2 * t + "z"
    }

    function Jt(t, e) {
        hn += t;
        fn += e;
        ++pn
    }

    function Zt() {
        function t(t, n) {
            var r = t - e,
                a = n - i,
                s = Math.sqrt(r * r + a * a);
            _n += s * (e + t) / 2;
            mn += s * (i + n) / 2;
            gn += s;
            Jt(e = t, i = n)
        }
        var e, i;
        Dn.point = function(n, r) {
            Dn.point = t;
            Jt(e = n, i = r)
        }
    }

    function Qt() {
        Dn.point = Jt
    }

    function te() {
        function t(t, e) {
            var i = t - n,
                a = e - r,
                s = Math.sqrt(i * i + a * a);
            _n += s * (n + t) / 2;
            mn += s * (r + e) / 2;
            gn += s;
            s = r * t - n * e;
            vn += s * (n + t);
            yn += s * (r + e);
            bn += 3 * s;
            Jt(n = t, r = e)
        }
        var e, i, n, r;
        Dn.point = function(a, s) {
            Dn.point = t;
            Jt(e = n = a, i = r = s)
        };
        Dn.lineEnd = function() {
            t(e, i)
        }
    }

    function ee(t) {
        function e(e, i) {
            t.moveTo(e + s, i);
            t.arc(e, i, s, 0, Ni)
        }

        function i(e, i) {
            t.moveTo(e, i);
            o.point = n
        }

        function n(e, i) {
            t.lineTo(e, i)
        }

        function r() {
            o.point = e
        }

        function a() {
            t.closePath()
        }
        var s = 4.5,
            o = {
                point: e,
                lineStart: function() {
                    o.point = i
                },
                lineEnd: r,
                polygonStart: function() {
                    o.lineEnd = a
                },
                polygonEnd: function() {
                    o.lineEnd = r;
                    o.point = e
                },
                pointRadius: function(t) {
                    s = t;
                    return o
                },
                result: v
            };
        return o
    }

    function ie(t) {
        function e(t) {
            return(o ? n : i)(t)
        }

        function i(e) {
            return ae(e, function(i, n) {
                i = t(i, n);
                e.point(i[0], i[1])
            })
        }

        function n(e) {
            function i(i, n) {
                i = t(i, n);
                e.point(i[0], i[1])
            }

            function n() {
                y = NaN;
                k.point = a;
                e.lineStart()
            }

            function a(i, n) {
                var a = mt([i, n]),
                    s = t(i, n);
                r(y, b, v, x, $, w, y = s[0], b = s[1], v = i, x = a[0], $ = a[1], w = a[2], o, e);
                e.point(y, b)
            }

            function s() {
                k.point = i;
                e.lineEnd()
            }

            function l() {
                n();
                k.point = c;
                k.lineEnd = u
            }

            function c(t, e) {
                a(d = t, h = e), f = y, p = b, _ = x, m = $, g = w;
                k.point = a
            }

            function u() {
                r(y, b, v, x, $, w, f, p, d, _, m, g, o, e);
                k.lineEnd = s;
                s()
            }
            var d, h, f, p, _, m, g, v, y, b, x, $, w, k = {
                point: i,
                lineStart: n,
                lineEnd: s,
                polygonStart: function() {
                    e.polygonStart();
                    k.lineStart = l
                },
                polygonEnd: function() {
                    e.polygonEnd();
                    k.lineStart = n
                }
            };
            return k
        }

        function r(e, i, n, o, l, c, u, d, h, f, p, _, m, g) {
            var v = u - e,
                y = d - i,
                b = v * v + y * y;
            if(b > 4 * a && m--) {
                var x = o + f,
                    $ = l + p,
                    w = c + _,
                    k = Math.sqrt(x * x + $ * $ + w * w),
                    S = Math.asin(w /= k),
                    C = bi(bi(w) - 1) < Mi || bi(n - h) < Mi ? (n + h) / 2 : Math.atan2($, x),
                    T = t(C, S),
                    E = T[0],
                    I = T[1],
                    A = E - e,
                    M = I - i,
                    D = y * A - v * M;
                if(D * D / b > a || bi((v * A + y * M) / b - .5) > .3 || o * f + l * p + c * _ < s) {
                    r(e, i, n, o, l, c, E, I, C, x /= k, $ /= k, w, m, g);
                    g.point(E, I);
                    r(E, I, C, x, $, w, u, d, h, f, p, _, m, g)
                }
            }
        }
        var a = .5,
            s = Math.cos(30 * Ri),
            o = 16;
        e.precision = function(t) {
            if(!arguments.length) return Math.sqrt(a);
            o = (a = t * t) > 0 && 16;
            return e
        };
        return e
    }

    function ne(t) {
        var e = ie(function(e, i) {
            return t([e * ji, i * ji])
        });
        return function(t) {
            return le(e(t))
        }
    }

    function re(t) {
        this.stream = t
    }

    function ae(t, e) {
        return {
            point: e,
            sphere: function() {
                t.sphere()
            },
            lineStart: function() {
                t.lineStart()
            },
            lineEnd: function() {
                t.lineEnd()
            },
            polygonStart: function() {
                t.polygonStart()
            },
            polygonEnd: function() {
                t.polygonEnd()
            }
        }
    }

    function se(t) {
        return oe(function() {
            return t
        })()
    }

    function oe(t) {
        function e(t) {
            console.log(t);
            t = o(t[0] * Ri, t[1] * Ri);
            return [t[0] * h + l, c - t[1] * h]
        }

        function i(t) {
            t = o.invert((t[0] - l) / h, (c - t[1]) / h);
            return t && [t[0] * ji, t[1] * ji]
        }

        function n() {
            o = It(s = de(v, y, b), a);
            var t = a(m, g);
            l = f - t[0] * h;
            c = p + t[1] * h;
            return r()
        }

        function r() {
            if(u) u.valid = !1, u = null;
            return e
        }
        var a, s, o, l, c, u, d = ie(function(t, e) {
                t = a(t, e);
                return [t[0] * h + l, c - t[1] * h]
            }),
            h = 150,
            f = 480,
            p = 250,
            m = 0,
            g = 0,
            v = 0,
            y = 0,
            b = 0,
            x = $n,
            $ = _,
            w = null,
            k = null;
        e.stream = function(t) {
            if(u) u.valid = !1;
            u = le(x(s, d($(t))));
            u.valid = !0;
            return u
        };
        e.clipAngle = function(t) {
            if(!arguments.length) return w;
            x = null == t ? (w = t, $n) : Ht((w = +t) * Ri);
            return r()
        };
        e.clipExtent = function(t) {
            if(!arguments.length) return k;
            k = t;
            $ = t ? qt(t[0][0], t[0][1], t[1][0], t[1][1]) : _;
            return r()
        };
        e.scale = function(t) {
            if(!arguments.length) return h;
            h = +t;
            return n()
        };
        e.translate = function(t) {
            if(!arguments.length) return [f, p];
            f = +t[0];
            p = +t[1];
            return n()
        };
        e.center = function(t) {
            if(!arguments.length) return [m * ji, g * ji];
            m = t[0] % 360 * Ri;
            g = t[1] % 360 * Ri;
            return n()
        };
        e.rotate = function(t) {
            if(!arguments.length) return [v * ji, y * ji, b * ji];
            v = t[0] % 360 * Ri;
            y = t[1] % 360 * Ri;
            b = t.length > 2 ? t[2] % 360 * Ri : 0;
            return n()
        };
        _i.rebind(e, d, "precision");
        return function() {
            a = t.apply(this, arguments);
            e.invert = a.invert && i;
            return n()
        }
    }

    function le(t) {
        return ae(t, function(e, i) {
            t.point(e * Ri, i * Ri)
        })
    }

    function ce(t, e) {
        return [t, e]
    }

    function ue(t, e) {
        return [t > Pi ? t - Ni : t < -Pi ? t + Ni : t, e]
    }

    function de(t, e, i) {
        return t ? e || i ? It(fe(t), pe(e, i)) : fe(t) : e || i ? pe(e, i) : ue
    }

    function he(t) {
        return function(e, i) {
            return e += t, [e > Pi ? e - Ni : e < -Pi ? e + Ni : e, i]
        }
    }

    function fe(t) {
        var e = he(t);
        e.invert = he(-t);
        return e
    }

    function pe(t, e) {
        function i(t, e) {
            var i = Math.cos(e),
                o = Math.cos(t) * i,
                l = Math.sin(t) * i,
                c = Math.sin(e),
                u = c * n + o * r;
            return [Math.atan2(l * a - u * s, o * n - c * r), A(u * a + l * s)]
        }
        var n = Math.cos(t),
            r = Math.sin(t),
            a = Math.cos(e),
            s = Math.sin(e);
        i.invert = function(t, e) {
            var i = Math.cos(e),
                o = Math.cos(t) * i,
                l = Math.sin(t) * i,
                c = Math.sin(e),
                u = c * a - l * s;
            return [Math.atan2(l * a + c * s, o * n + u * r), A(u * n - o * r)]
        };
        return i
    }

    function _e(t, e) {
        var i = Math.cos(t),
            n = Math.sin(t);
        return function(r, a, s, o) {
            var l = s * e;
            if(null != r) {
                r = me(i, r);
                a = me(i, a);
                if(s > 0 ? r < a : r > a) r += s * Ni
            } else {
                r = t + s * Ni;
                a = t - .5 * l
            }
            for(var c, u = r; s > 0 ? u > a : u < a; u -= l) o.point((c = $t([i, -n * Math.cos(u), -n * Math.sin(u)]))[0], c[1])
        }
    }

    function me(t, e) {
        var i = mt(e);
        i[0] -= t;
        xt(i);
        var n = I(-i[1]);
        return((-i[2] < 0 ? -n : n) + 2 * Math.PI - Mi) % (2 * Math.PI)
    }

    function ge(t, e, i) {
        var n = _i.range(t, e - Mi, i).concat(e);
        return function(t) {
            return n.map(function(e) {
                return [t, e]
            })
        }
    }

    function ve(t, e, i) {
        var n = _i.range(t, e - Mi, i).concat(e);
        return function(t) {
            return n.map(function(e) {
                return [e, t]
            })
        }
    }

    function ye(t) {
        return t.source
    }

    function be(t) {
        return t.target
    }

    function xe(t, e, i, n) {
        var r = Math.cos(e),
            a = Math.sin(e),
            s = Math.cos(n),
            o = Math.sin(n),
            l = r * Math.cos(t),
            c = r * Math.sin(t),
            u = s * Math.cos(i),
            d = s * Math.sin(i),
            h = 2 * Math.asin(Math.sqrt(N(n - e) + r * s * N(i - t))),
            f = 1 / Math.sin(h),
            p = h ? function(t) {
                var e = Math.sin(t *= h) * f,
                    i = Math.sin(h - t) * f,
                    n = i * l + e * u,
                    r = i * c + e * d,
                    s = i * a + e * o;
                return [Math.atan2(r, n) * ji, Math.atan2(s, Math.sqrt(n * n + r * r)) * ji]
            } : function() {
                return [t * ji, e * ji]
            };
        p.distance = h;
        return p
    }

    function $e() {
        function t(t, r) {
            var a = Math.sin(r *= Ri),
                s = Math.cos(r),
                o = bi((t *= Ri) - e),
                l = Math.cos(o);
            Pn += Math.atan2(Math.sqrt((o = s * Math.sin(o)) * o + (o = n * a - i * s * l) * o), i * a + n * s * l);
            e = t, i = a, n = s
        }
        var e, i, n;
        Nn.point = function(r, a) {
            e = r * Ri, i = Math.sin(a *= Ri), n = Math.cos(a);
            Nn.point = t
        };
        Nn.lineEnd = function() {
            Nn.point = Nn.lineEnd = v
        }
    }

    function we(t, e) {
        function i(e, i) {
            var n = Math.cos(e),
                r = Math.cos(i),
                a = t(n * r);
            return [a * r * Math.sin(e), a * Math.sin(i)]
        }
        i.invert = function(t, i) {
            var n = Math.sqrt(t * t + i * i),
                r = e(n),
                a = Math.sin(r),
                s = Math.cos(r);
            return [Math.atan2(t * a, n * s), Math.asin(n && i * a / n)]
        };
        return i
    }

    function ke(t, e) {
        function i(t, e) {
            if(s > 0) {
                if(e < -Li + Mi) e = -Li + Mi
            } else if(e > Li - Mi) e = Li - Mi;
            var i = s / Math.pow(r(e), a);
            return [i * Math.sin(a * t), s - i * Math.cos(a * t)]
        }
        var n = Math.cos(t),
            r = function(t) {
                return Math.tan(Pi / 4 + t / 2)
            },
            a = t === e ? Math.sin(t) : Math.log(n / Math.cos(e)) / Math.log(r(e) / r(t)),
            s = n * Math.pow(r(t), a) / a;
        if(!a) return Ce;
        i.invert = function(t, e) {
            var i = s - e,
                n = T(a) * Math.sqrt(t * t + i * i);
            return [Math.atan2(t, i) / a, 2 * Math.atan(Math.pow(s / n, 1 / a)) - Li]
        };
        return i
    }

    function Se(t, e) {
        function i(t, e) {
            var i = a - e;
            return [i * Math.sin(r * t), a - i * Math.cos(r * t)]
        }
        var n = Math.cos(t),
            r = t === e ? Math.sin(t) : (n - Math.cos(e)) / (e - t),
            a = n / r + t;
        if(bi(r) < Mi) return ce;
        i.invert = function(t, e) {
            var i = a - e;
            return [Math.atan2(t, i) / r, a - T(r) * Math.sqrt(t * t + i * i)]
        };
        return i
    }

    function Ce(t, e) {
        return [t, Math.log(Math.tan(Pi / 4 + e / 2))]
    }

    function Te(t) {
        var e, i = se(t),
            n = i.scale,
            r = i.translate,
            a = i.clipExtent;
        i.scale = function() {
            var t = n.apply(i, arguments);
            return t === i ? e ? i.clipExtent(null) : i : t
        };
        i.translate = function() {
            var t = r.apply(i, arguments);
            return t === i ? e ? i.clipExtent(null) : i : t
        };
        i.clipExtent = function(t) {
            var s = a.apply(i, arguments);
            if(s === i) {
                if(e = null == t) {
                    var o = Pi * n(),
                        l = r();
                    a([
                        [l[0] - o, l[1] - o],
                        [l[0] + o, l[1] + o]
                    ])
                }
            } else if(e) s = null;
            return s
        };
        return i.clipExtent(null)
    }

    function Ee(t, e) {
        return [Math.log(Math.tan(Pi / 4 + e / 2)), -t]
    }

    function Ie(t) {
        return t[0]
    }

    function Ae(t) {
        return t[1]
    }

    function Me(t) {
        for(var e = t.length, i = [0, 1], n = 2, r = 2; r < e; r++) {
            for(; n > 1 && E(t[i[n - 2]], t[i[n - 1]], t[r]) <= 0;) --n;
            i[n++] = r
        }
        return i.slice(0, n)
    }

    function De(t, e) {
        return t[0] - e[0] || t[1] - e[1]
    }

    function Pe(t, e, i) {
        return(i[0] - e[0]) * (t[1] - e[1]) < (i[1] - e[1]) * (t[0] - e[0])
    }

    function Ne(t, e, i, n) {
        var r = t[0],
            a = i[0],
            s = e[0] - r,
            o = n[0] - a,
            l = t[1],
            c = i[1],
            u = e[1] - l,
            d = n[1] - c,
            h = (o * (l - c) - d * (r - a)) / (d * s - o * u);
        return [r + h * s, l + h * u]
    }

    function Le(t) {
        var e = t[0],
            i = t[t.length - 1];
        return !(e[0] - i[0] || e[1] - i[1])
    }

    function Re() {
        ni(this);
        this.edge = this.site = this.circle = null
    }

    function je(t) {
        var e = Un.pop() || new Re;
        e.site = t;
        return e
    }

    function Oe(t) {
        Ye(t);
        Wn.remove(t);
        Un.push(t);
        ni(t)
    }

    function Fe(t) {
        var e = t.circle,
            i = e.x,
            n = e.cy,
            r = {
                x: i,
                y: n
            },
            a = t.P,
            s = t.N,
            o = [t];
        Oe(t);
        for(var l = a; l.circle && bi(i - l.circle.x) < Mi && bi(n - l.circle.cy) < Mi;) {
            a = l.P;
            o.unshift(l);
            Oe(l);
            l = a
        }
        o.unshift(l);
        Ye(l);
        for(var c = s; c.circle && bi(i - c.circle.x) < Mi && bi(n - c.circle.cy) < Mi;) {
            s = c.N;
            o.push(c);
            Oe(c);
            c = s
        }
        o.push(c);
        Ye(c);
        var u, d = o.length;
        for(u = 1; u < d; ++u) {
            c = o[u];
            l = o[u - 1];
            ti(c.edge, l.site, c.site, r)
        }
        l = o[0];
        c = o[d - 1];
        c.edge = Ze(l.site, c.site, null, r);
        Ve(l);
        Ve(c)
    }

    function ze(t) {
        for(var e, i, n, r, a = t.x, s = t.y, o = Wn._; o;) {
            n = Be(o, s) - a;
            if(n > Mi) o = o.L;
            else {
                r = a - He(o, s);
                if(r > Mi) {
                    if(!o.R) {
                        e = o;
                        break
                    }
                    o = o.R
                } else {
                    if(n > -Mi) {
                        e = o.P;
                        i = o
                    } else if(r > -Mi) {
                        e = o;
                        i = o.N
                    } else e = i = o;
                    break
                }
            }
        }
        var l = je(t);
        Wn.insert(e, l);
        if(e || i)
            if(e !== i)
                if(i) {
                    Ye(e);
                    Ye(i);
                    var c = e.site,
                        u = c.x,
                        d = c.y,
                        h = t.x - u,
                        f = t.y - d,
                        p = i.site,
                        _ = p.x - u,
                        m = p.y - d,
                        g = 2 * (h * m - f * _),
                        v = h * h + f * f,
                        y = _ * _ + m * m,
                        b = {
                            x: (m * v - f * y) / g + u,
                            y: (h * y - _ * v) / g + d
                        };
                    ti(i.edge, c, p, b);
                    l.edge = Ze(c, t, null, b);
                    i.edge = Ze(t, p, null, b);
                    Ve(e);
                    Ve(i)
                } else l.edge = Ze(e.site, l.site);
            else {
                Ye(e);
                i = je(e.site);
                Wn.insert(l, i);
                l.edge = i.edge = Ze(e.site, l.site);
                Ve(e);
                Ve(i)
            }
    }

    function Be(t, e) {
        var i = t.site,
            n = i.x,
            r = i.y,
            a = r - e;
        if(!a) return n;
        var s = t.P;
        if(!s) return -(1 / 0);
        i = s.site;
        var o = i.x,
            l = i.y,
            c = l - e;
        if(!c) return o;
        var u = o - n,
            d = 1 / a - 1 / c,
            h = u / c;
        if(d) return(-h + Math.sqrt(h * h - 2 * d * (u * u / (-2 * c) - l + c / 2 + r - a / 2))) / d + n;
        else return(n + o) / 2
    }

    function He(t, e) {
        var i = t.N;
        if(i) return Be(i, e);
        var n = t.site;
        return n.y === e ? n.x : 1 / 0
    }

    function We(t) {
        this.site = t;
        this.edges = []
    }

    function qe(t) {
        for(var e, i, n, r, a, s, o, l, c, u, d = t[0][0], h = t[1][0], f = t[0][1], p = t[1][1], _ = Hn, m = _.length; m--;) {
            a = _[m];
            if(a && a.prepare()) {
                o = a.edges;
                l = o.length;
                s = 0;
                for(; s < l;) {
                    u = o[s].end(), n = u.x, r = u.y;
                    c = o[++s % l].start(), e = c.x, i = c.y;
                    if(bi(n - e) > Mi || bi(r - i) > Mi) {
                        o.splice(s, 0, new ei(Qe(a.site, u, bi(n - d) < Mi && p - r > Mi ? {
                            x: d,
                            y: bi(e - d) < Mi ? i : p
                        } : bi(r - p) < Mi && h - n > Mi ? {
                            x: bi(i - p) < Mi ? e : h,
                            y: p
                        } : bi(n - h) < Mi && r - f > Mi ? {
                            x: h,
                            y: bi(e - h) < Mi ? i : f
                        } : bi(r - f) < Mi && n - d > Mi ? {
                            x: bi(i - f) < Mi ? e : d,
                            y: f
                        } : null), a.site, null));
                        ++l
                    }
                }
            } else;
        }
    }

    function Ge(t, e) {
        return e.angle - t.angle
    }

    function Ue() {
        ni(this);
        this.x = this.y = this.arc = this.site = this.cy = null
    }

    function Ve(t) {
        var e = t.P,
            i = t.N;
        if(e && i) {
            var n = e.site,
                r = t.site,
                a = i.site;
            if(n !== a) {
                var s = r.x,
                    o = r.y,
                    l = n.x - s,
                    c = n.y - o,
                    u = a.x - s,
                    d = a.y - o,
                    h = 2 * (l * d - c * u);
                if(!(h >= -Di)) {
                    var f = l * l + c * c,
                        p = u * u + d * d,
                        _ = (d * f - c * p) / h,
                        m = (l * p - u * f) / h,
                        d = m + o,
                        g = Vn.pop() || new Ue;
                    g.arc = t;
                    g.site = r;
                    g.x = _ + s;
                    g.y = d + Math.sqrt(_ * _ + m * m);
                    g.cy = d;
                    t.circle = g;
                    for(var v = null, y = Gn._; y;)
                        if(g.y < y.y || g.y === y.y && g.x <= y.x)
                            if(y.L) y = y.L;
                            else {
                                v = y.P;
                                break
                            }
                        else if(y.R) y = y.R;
                        else {
                            v = y;
                            break
                        }
                    Gn.insert(v, g);
                    if(!v) qn = g
                }
            }
        }
    }

    function Ye(t) {
        var e = t.circle;
        if(e) {
            if(!e.P) qn = e.N;
            Gn.remove(e);
            Vn.push(e);
            ni(e);
            t.circle = null
        }
    }

    function Xe(t) {
        for(var e, i = Bn, n = Wt(t[0][0], t[0][1], t[1][0], t[1][1]), r = i.length; r--;) {
            e = i[r];
            if(!Ke(e, t) || !n(e) || bi(e.a.x - e.b.x) < Mi && bi(e.a.y - e.b.y) < Mi) {
                e.a = e.b = null;
                i.splice(r, 1)
            }
        }
    }

    function Ke(t, e) {
        var i = t.b;
        if(i) return !0;
        var n, r, a = t.a,
            s = e[0][0],
            o = e[1][0],
            l = e[0][1],
            c = e[1][1],
            u = t.l,
            d = t.r,
            h = u.x,
            f = u.y,
            p = d.x,
            _ = d.y,
            m = (h + p) / 2,
            g = (f + _) / 2;
        if(_ === f) {
            if(m < s || m >= o) return;
            if(h > p) {
                if(!a) a = {
                    x: m,
                    y: l
                };
                else if(a.y >= c) return;
                i = {
                    x: m,
                    y: c
                }
            } else {
                if(!a) a = {
                    x: m,
                    y: c
                };
                else if(a.y < l) return;
                i = {
                    x: m,
                    y: l
                }
            }
        } else {
            n = (h - p) / (_ - f);
            r = g - n * m;
            if(n < -1 || n > 1)
                if(h > p) {
                    if(!a) a = {
                        x: (l - r) / n,
                        y: l
                    };
                    else if(a.y >= c) return;
                    i = {
                        x: (c - r) / n,
                        y: c
                    }
                } else {
                    if(!a) a = {
                        x: (c - r) / n,
                        y: c
                    };
                    else if(a.y < l) return;
                    i = {
                        x: (l - r) / n,
                        y: l
                    }
                }
            else if(f < _) {
                if(!a) a = {
                    x: s,
                    y: n * s + r
                };
                else if(a.x >= o) return;
                i = {
                    x: o,
                    y: n * o + r
                }
            } else {
                if(!a) a = {
                    x: o,
                    y: n * o + r
                };
                else if(a.x < s) return;
                i = {
                    x: s,
                    y: n * s + r
                }
            }
        }
        t.a = a;
        t.b = i;
        return !0
    }

    function Je(t, e) {
        this.l = t;
        this.r = e;
        this.a = this.b = null
    }

    function Ze(t, e, i, n) {
        var r = new Je(t, e);
        Bn.push(r);
        if(i) ti(r, t, e, i);
        if(n) ti(r, e, t, n);
        Hn[t.i].edges.push(new ei(r, t, e));
        Hn[e.i].edges.push(new ei(r, e, t));
        return r
    }

    function Qe(t, e, i) {
        var n = new Je(t, null);
        n.a = e;
        n.b = i;
        Bn.push(n);
        return n
    }

    function ti(t, e, i, n) {
        if(!t.a && !t.b) {
            t.a = n;
            t.l = e;
            t.r = i
        } else if(t.l === i) t.b = n;
        else t.a = n
    }

    function ei(t, e, i) {
        var n = t.a,
            r = t.b;
        this.edge = t;
        this.site = e;
        this.angle = i ? Math.atan2(i.y - e.y, i.x - e.x) : t.l === e ? Math.atan2(r.x - n.x, n.y - r.y) : Math.atan2(n.x - r.x, r.y - n.y)
    }

    function ii() {
        this._ = null
    }

    function ni(t) {
        t.U = t.C = t.L = t.R = t.P = t.N = null
    }

    function ri(t, e) {
        var i = e,
            n = e.R,
            r = i.U;
        if(r)
            if(r.L === i) r.L = n;
            else r.R = n;
        else t._ = n;
        n.U = r;
        i.U = n;
        i.R = n.L;
        if(i.R) i.R.U = i;
        n.L = i
    }

    function ai(t, e) {
        var i = e,
            n = e.L,
            r = i.U;
        if(r)
            if(r.L === i) r.L = n;
            else r.R = n;
        else t._ = n;
        n.U = r;
        i.U = n;
        i.L = n.R;
        if(i.L) i.L.U = i;
        n.R = i
    }

    function si(t) {
        for(; t.L;) t = t.L;
        return t
    }

    function oi(t, e) {
        var i, n, r, a = t.sort(li).pop();
        Bn = [];
        Hn = new Array(t.length);
        Wn = new ii;
        Gn = new ii;
        for(;;) {
            r = qn;
            if(a && (!r || a.y < r.y || a.y === r.y && a.x < r.x)) {
                if(a.x !== i || a.y !== n) {
                    Hn[a.i] = new We(a);
                    ze(a);
                    i = a.x, n = a.y
                }
                a = t.pop()
            } else if(r) Fe(r.arc);
            else break
        }
        if(e) Xe(e), qe(e);
        var s = {
            cells: Hn,
            edges: Bn
        };
        Wn = Gn = Bn = Hn = null;
        return s
    }

    function li(t, e) {
        return e.y - t.y || e.x - t.x
    }

    function ci(t, e, i) {
        return(t.x - i.x) * (e.y - t.y) - (t.x - e.x) * (i.y - t.y)
    }

    function ui(t) {
        return t.x
    }

    function di(t) {
        return t.y
    }

    function hi() {
        return {
            leaf: !0,
            nodes: [],
            point: null,
            x: null,
            y: null
        }
    }

    function fi(t, e, i, n, r, a) {
        if(!t(e, i, n, r, a)) {
            var s = .5 * (i + r),
                o = .5 * (n + a),
                l = e.nodes;
            if(l[0]) fi(t, l[0], i, n, s, o);
            if(l[1]) fi(t, l[1], s, n, r, o);
            if(l[2]) fi(t, l[2], i, o, s, a);
            if(l[3]) fi(t, l[3], s, o, r, a)
        }
    }

    function pi(t, e, i, n, r, a, s) {
        var o, l = 1 / 0;
        ! function t(c, u, d, h, f) {
            if(!(u > a || d > s || h < n || f < r)) {
                if(p = c.point) {
                    var p, _ = e - c.x,
                        m = i - c.y,
                        g = _ * _ + m * m;
                    if(g < l) {
                        var v = Math.sqrt(l = g);
                        n = e - v, r = i - v;
                        a = e + v, s = i + v;
                        o = p
                    }
                }
                for(var y = c.nodes, b = .5 * (u + h), x = .5 * (d + f), $ = e >= b, w = i >= x, k = w << 1 | $, S = k + 4; k < S; ++k)
                    if(c = y[3 & k]) switch(3 & k) {
                        case 0:
                            t(c, u, d, b, x);
                            break;
                        case 1:
                            t(c, b, d, h, x);
                            break;
                        case 2:
                            t(c, u, x, b, f);
                            break;
                        case 3:
                            t(c, b, x, h, f)
                    }
            }
        }(t, n, r, a, s);
        return o
    }
    var _i = {},
        mi = [].slice,
        gi = function(t) {
            return mi.call(t)
        },
        vi = this.document;
    _i.ascending = t;
    _i.descending = function(t, e) {
        return e < t ? -1 : e > t ? 1 : e >= t ? 0 : NaN
    };
    _i.min = function(t, e) {
        var i, n, r = -1,
            a = t.length;
        if(1 === arguments.length) {
            for(; ++r < a;)
                if(null != (n = t[r]) && n >= n) {
                    i = n;
                    break
                }
            for(; ++r < a;)
                if(null != (n = t[r]) && i > n) i = n
        } else {
            for(; ++r < a;)
                if(null != (n = e.call(t, t[r], r)) && n >= n) {
                    i = n;
                    break
                }
            for(; ++r < a;)
                if(null != (n = e.call(t, t[r], r)) && i > n) i = n
        }
        return i
    };
    _i.max = function(t, e) {
        var i, n, r = -1,
            a = t.length;
        if(1 === arguments.length) {
            for(; ++r < a;)
                if(null != (n = t[r]) && n >= n) {
                    i = n;
                    break
                }
            for(; ++r < a;)
                if(null != (n = t[r]) && n > i) i = n
        } else {
            for(; ++r < a;)
                if(null != (n = e.call(t, t[r], r)) && n >= n) {
                    i = n;
                    break
                }
            for(; ++r < a;)
                if(null != (n = e.call(t, t[r], r)) && n > i) i = n
        }
        return i
    };
    _i.extent = function(t, e) {
        var i, n, r, a = -1,
            s = t.length;
        if(1 === arguments.length) {
            for(; ++a < s;)
                if(null != (n = t[a]) && n >= n) {
                    i = r = n;
                    break
                }
            for(; ++a < s;)
                if(null != (n = t[a])) {
                    if(i > n) i = n;
                    if(r < n) r = n
                }
        } else {
            for(; ++a < s;)
                if(null != (n = e.call(t, t[a], a)) && n >= n) {
                    i = r = n;
                    break
                }
            for(; ++a < s;)
                if(null != (n = e.call(t, t[a], a))) {
                    if(i > n) i = n;
                    if(r < n) r = n
                }
        }
        return [i, r]
    };
    _i.sum = function(t, e) {
        var n, r = 0,
            a = t.length,
            s = -1;
        if(1 === arguments.length) {
            for(; ++s < a;)
                if(i(n = +t[s])) r += n
        } else
            for(; ++s < a;)
                if(i(n = +e.call(t, t[s], s))) r += n; return r
    };
    _i.mean = function(t, n) {
        var r, a = 0,
            s = t.length,
            o = -1,
            l = s;
        if(1 === arguments.length)
            for(; ++o < s;)
                if(i(r = e(t[o]))) a += r;
                else --l;
        else
            for(; ++o < s;)
                if(i(r = e(n.call(t, t[o], o)))) a += r;
                else --l; if(l) return a / l
    };
    _i.quantile = function(t, e) {
        var i = (t.length - 1) * e + 1,
            n = Math.floor(i),
            r = +t[n - 1],
            a = i - n;
        return a ? r + a * (t[n] - r) : r
    };
    _i.median = function(n, r) {
        var a, s = [],
            o = n.length,
            l = -1;
        if(1 === arguments.length) {
            for(; ++l < o;)
                if(i(a = e(n[l]))) s.push(a)
        } else
            for(; ++l < o;)
                if(i(a = e(r.call(n, n[l], l)))) s.push(a); if(s.length) return _i.quantile(s.sort(t), .5)
    };
    _i.variance = function(t, n) {
        var r, a, s = t.length,
            o = 0,
            l = 0,
            c = -1,
            u = 0;
        if(1 === arguments.length) {
            for(; ++c < s;)
                if(i(r = e(t[c]))) {
                    a = r - o;
                    o += a / ++u;
                    l += a * (r - o)
                }
        } else
            for(; ++c < s;)
                if(i(r = e(n.call(t, t[c], c)))) {
                    a = r - o;
                    o += a / ++u;
                    l += a * (r - o)
                } if(u > 1) return l / (u - 1)
    };
    _i.deviation = function() {
        var t = _i.variance.apply(this, arguments);
        return t ? Math.sqrt(t) : t
    };
    var yi = n(t);
    _i.bisectLeft = yi.left;
    _i.bisect = _i.bisectRight = yi.right;
    _i.bisector = function(e) {
        return n(1 === e.length ? function(i, n) {
            return t(e(i), n)
        } : e)
    };
    _i.shuffle = function(t, e, i) {
        if((a = arguments.length) < 3) {
            i = t.length;
            if(a < 2) e = 0
        }
        for(var n, r, a = i - e; a;) {
            r = Math.random() * a-- | 0;
            n = t[a + e], t[a + e] = t[r + e], t[r + e] = n
        }
        return t
    };
    _i.permute = function(t, e) {
        for(var i = e.length, n = new Array(i); i--;) n[i] = t[e[i]];
        return n
    };
    _i.pairs = function(t) {
        for(var e, i = 0, n = t.length - 1, r = t[0], a = new Array(n < 0 ? 0 : n); i < n;) a[i] = [e = r, r = t[++i]];
        return a
    };
    _i.transpose = function(t) {
        if(!(a = t.length)) return [];
        for(var e = -1, i = _i.min(t, r), n = new Array(i); ++e < i;)
            for(var a, s = -1, o = n[e] = new Array(a); ++s < a;) o[s] = t[s][e];
        return n
    };
    _i.zip = function() {
        return _i.transpose(arguments)
    };
    _i.keys = function(t) {
        var e = [];
        for(var i in t) e.push(i);
        return e
    };
    _i.values = function(t) {
        var e = [];
        for(var i in t) e.push(t[i]);
        return e
    };
    _i.entries = function(t) {
        var e = [];
        for(var i in t) e.push({
            key: i,
            value: t[i]
        });
        return e
    };
    _i.merge = function(t) {
        for(var e, i, n, r = t.length, a = -1, s = 0; ++a < r;) s += t[a].length;
        i = new Array(s);
        for(; --r >= 0;) {
            n = t[r];
            e = n.length;
            for(; --e >= 0;) i[--s] = n[e]
        }
        return i
    };
    var bi = Math.abs;
    _i.range = function(t, e, i) {
        if(arguments.length < 3) {
            i = 1;
            if(arguments.length < 2) {
                e = t;
                t = 0
            }
        }
        if((e - t) / i === 1 / 0) throw new Error("infinite range");
        var n, r = [],
            s = a(bi(i)),
            o = -1;
        t *= s, e *= s, i *= s;
        if(i < 0)
            for(;
                (n = t + i * ++o) > e;) r.push(n / s);
        else
            for(;
                (n = t + i * ++o) < e;) r.push(n / s);
        return r
    };
    _i.map = function(t, e) {
        var i = new o;
        if(t instanceof o) t.forEach(function(t, e) {
            i.set(t, e)
        });
        else if(Array.isArray(t)) {
            var n, r = -1,
                a = t.length;
            if(1 === arguments.length)
                for(; ++r < a;) i.set(r, t[r]);
            else
                for(; ++r < a;) i.set(e.call(t, n = t[r], r), n)
        } else
            for(var s in t) i.set(s, t[s]);
        return i
    };
    var xi = "__proto__",
        $i = "\0";
    s(o, {
        has: u,
        get: function(t) {
            return this._[l(t)]
        },
        set: function(t, e) {
            return this._[l(t)] = e
        },
        remove: d,
        keys: h,
        values: function() {
            var t = [];
            for(var e in this._) t.push(this._[e]);
            return t
        },
        entries: function() {
            var t = [];
            for(var e in this._) t.push({
                key: c(e),
                value: this._[e]
            });
            return t
        },
        size: f,
        empty: p,
        forEach: function(t) {
            for(var e in this._) t.call(this, c(e), this._[e])
        }
    });
    _i.behavior = {};
    _i.rebind = function(t, e) {
        for(var i, n = 1, r = arguments.length; ++n < r;) t[i = arguments[n]] = m(t, e, e[i]);
        return t
    };
    var wi = ["webkit", "ms", "moz", "Moz", "o", "O"];
    _i.dispatch = function() {
        for(var t = new y, e = -1, i = arguments.length; ++e < i;) t[arguments[e]] = b(t);
        return t
    };
    y.prototype.on = function(t, e) {
        var i = t.indexOf("."),
            n = "";
        if(i >= 0) {
            n = t.slice(i + 1);
            t = t.slice(0, i)
        }
        if(t) return arguments.length < 2 ? this[t].on(n) : this[t].on(n, e);
        if(2 === arguments.length) {
            if(null == e)
                for(t in this)
                    if(this.hasOwnProperty(t)) this[t].on(n, null);
            return this
        }
    };
    _i.event = null;
    _i.requote = function(t) {
        return t.replace(ki, "\\$&")
    };
    var ki = /[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,
        Si = {}.__proto__ ? function(t, e) {
            t.__proto__ = e
        } : function(t, e) {
            for(var i in e) t[i] = e[i]
        },
        Ci = "http://www.w3.org/1999/xhtml",
        Ti = {
            svg: "http://www.w3.org/2000/svg",
            xhtml: Ci,
            xlink: "http://www.w3.org/1999/xlink",
            xml: "http://www.w3.org/XML/1998/namespace",
            xmlns: "http://www.w3.org/2000/xmlns/"
        };
    _i.ns = {
        prefix: Ti,
        qualify: function(t) {
            var e = t.indexOf(":"),
                i = t;
            if(e >= 0 && "xmlns" !== (i = t.slice(0, e))) t = t.slice(e + 1);
            return Ti.hasOwnProperty(i) ? {
                space: Ti[i],
                local: t
            } : t
        }
    };
    var Ei, Ii = 0;
    _i.mouse = function(t) {
        return S(t, $())
    };
    var Ai = this.navigator && /WebKit/.test(this.navigator.userAgent) ? -1 : 0;
    _i.touch = function(t, e, i) {
        if(arguments.length < 3) i = e, e = $().changedTouches;
        if(e)
            for(var n, r = 0, a = e.length; r < a; ++r)
                if((n = e[r]).identifier === i) return S(t, n)
    };
    _i.behavior.drag = function() {
        function t() {
            this.on("mousedown.drag", r).on("touchstart.drag", a)
        }

        function e(t, e, r, a, s) {
            return function() {
                function o() {
                    var t, i, n = e(h, _);
                    if(n) {
                        t = n[0] - y[0];
                        i = n[1] - y[1];
                        p |= t | i;
                        y = n;
                        f({
                            type: "drag",
                            x: n[0] + c[0],
                            y: n[1] + c[1],
                            dx: t,
                            dy: i
                        })
                    }
                }

                function l() {
                    if(e(h, _)) {
                        g.on(a + m, null).on(s + m, null);
                        v(p);
                        f({
                            type: "dragend"
                        })
                    }
                }
                var c, u = this,
                    d = _i.event.target.correspondingElement || _i.event.target,
                    h = u.parentNode,
                    f = i.of(u, arguments),
                    p = 0,
                    _ = t(),
                    m = ".drag" + (null == _ ? "" : "-" + _),
                    g = _i.select(r(d)).on(a + m, o).on(s + m, l),
                    v = k(d),
                    y = e(h, _);
                if(n) {
                    c = n.apply(u, arguments);
                    c = [c.x - y[0], c.y - y[1]]
                } else c = [0, 0];
                f({
                    type: "dragstart"
                })
            }
        }
        var i = w(t, "drag", "dragstart", "dragend"),
            n = null,
            r = e(v, _i.mouse, d3_window, "mousemove", "mouseup"),
            a = e(C, _i.touch, _, "touchmove", "touchend");
        t.origin = function(e) {
            if(!arguments.length) return n;
            n = e;
            return t
        };
        return _i.rebind(t, i, "on")
    };
    _i.touches = function(t, e) {
        if(arguments.length < 2) e = $().touches;
        return e ? gi(e).map(function(e) {
            var i = S(t, e);
            i.identifier = e.identifier;
            return i
        }) : []
    };
    var Mi = 1e-6,
        Di = Mi * Mi,
        Pi = Math.PI,
        Ni = 2 * Pi,
        Li = Pi / 2,
        Ri = Pi / 180,
        ji = 180 / Pi,
        Oi = Math.SQRT2,
        Fi = 2,
        zi = 4;
    _i.interpolateZoom = function(t, e) {
        var i, n, r = t[0],
            a = t[1],
            s = t[2],
            o = e[0],
            l = e[1],
            c = e[2],
            u = o - r,
            d = l - a,
            h = u * u + d * d;
        if(h < Di) {
            n = Math.log(c / s) / Oi;
            i = function(t) {
                return [r + t * u, a + t * d, s * Math.exp(Oi * t * n)]
            }
        } else {
            var f = Math.sqrt(h),
                p = (c * c - s * s + zi * h) / (2 * s * Fi * f),
                _ = (c * c - s * s - zi * h) / (2 * c * Fi * f),
                m = Math.log(Math.sqrt(p * p + 1) - p),
                g = Math.log(Math.sqrt(_ * _ + 1) - _);
            n = (g - m) / Oi;
            i = function(t) {
                var e = t * n,
                    i = D(m),
                    o = s / (Fi * f) * (i * P(Oi * e + m) - M(m));
                return [r + o * u, a + o * d, s * i / D(Oi * e + m)]
            }
        }
        i.duration = 1e3 * n;
        return i
    };
    _i.behavior.zoom = function() {
        function t(t) {
            t.on(M, u).on(Hi + ".zoom", h).on("dblclick.zoom", f).on(N, d)
        }

        function e(t) {
            return [(t[0] - C.x) / C.k, (t[1] - C.y) / C.k]
        }

        function i(t) {
            return [t[0] * C.k + C.x, t[1] * C.k + C.y]
        }

        function n(t) {
            C.k = Math.max(E[0], Math.min(E[1], t))
        }

        function r(t, e) {
            e = i(e);
            C.x += t[0] - e[0];
            C.y += t[1] - e[1]
        }

        function a(e, i, a, s) {
            e.__chart__ = {
                x: C.x,
                y: C.y,
                k: C.k
            };
            n(Math.pow(2, s));
            r(_ = i, a);
            e = _i.select(e);
            if(I > 0) e = e.transition().duration(I);
            e.call(t.event)
        }

        function s() {
            if(b) b.domain(y.range().map(function(t) {
                return(t - C.x) / C.k
            }).map(y.invert));
            if(S) S.domain($.range().map(function(t) {
                return(t - C.y) / C.k
            }).map($.invert))
        }

        function o(t) {
            if(!A++) t({
                type: "zoomstart"
            })
        }

        function l(t) {
            s();
            t({
                type: "zoom",
                scale: C.k,
                translate: [C.x, C.y]
            })
        }

        function c(t) {
            if(!--A) t({
                type: "zoomend"
            }), _ = null
        }

        function u() {
            function t() {
                s = 1;
                r(_i.mouse(n), d);
                l(a)
            }

            function i() {
                u.on(D, null).on(P, null);
                h(s);
                c(a)
            }
            var n = this,
                a = L.of(n, arguments),
                s = 0,
                u = _i.select(d3_window(n)).on(D, t).on(P, i),
                d = e(_i.mouse(n)),
                h = k(n);
            d3_selection_interrupt.call(n);
            o(a)
        }

        function d() {
            function t() {
                var t = _i.touches(p);
                f = C.k;
                t.forEach(function(t) {
                    if(t.identifier in m) m[t.identifier] = e(t)
                });
                return t
            }

            function i() {
                var e = _i.event.target;
                _i.select(e).on(b, s).on($, h);
                w.push(e);
                for(var i = _i.event.changedTouches, n = 0, r = i.length; n < r; ++n) m[i[n].identifier] = null;
                var o = t(),
                    l = Date.now();
                if(1 === o.length) {
                    if(l - v < 500) {
                        var c = o[0];
                        a(p, c, m[c.identifier], Math.floor(Math.log(C.k) / Math.LN2) + 1);
                        x()
                    }
                    v = l
                } else if(o.length > 1) {
                    var c = o[0],
                        u = o[1],
                        d = c[0] - u[0],
                        f = c[1] - u[1];
                    g = d * d + f * f
                }
            }

            function s() {
                var t, e, i, a, s = _i.touches(p);
                d3_selection_interrupt.call(p);
                for(var o = 0, c = s.length; o < c; ++o, a = null) {
                    i = s[o];
                    if(a = m[i.identifier]) {
                        if(e) break;
                        t = i, e = a
                    }
                }
                if(a) {
                    var u = (u = i[0] - t[0]) * u + (u = i[1] - t[1]) * u,
                        d = g && Math.sqrt(u / g);
                    t = [(t[0] + i[0]) / 2, (t[1] + i[1]) / 2];
                    e = [(e[0] + a[0]) / 2, (e[1] + a[1]) / 2];
                    n(d * f)
                }
                v = null;
                r(t, e);
                l(_)
            }

            function h() {
                if(_i.event.touches.length) {
                    for(var e = _i.event.changedTouches, i = 0, n = e.length; i < n; ++i) delete m[e[i].identifier];
                    for(var r in m) return void t()
                }
                _i.selectAll(w).on(y, null);
                S.on(M, u).on(N, d);
                T();
                c(_)
            }
            var f, p = this,
                _ = L.of(p, arguments),
                m = {},
                g = 0,
                y = ".zoom-" + _i.event.changedTouches[0].identifier,
                b = "touchmove" + y,
                $ = "touchend" + y,
                w = [],
                S = _i.select(p),
                T = k(p);
            i();
            o(_);
            S.on(M, null).on(N, i)
        }

        function h() {
            var t = L.of(this, arguments);
            if(g) clearTimeout(g);
            else d3_selection_interrupt.call(this), p = e(_ = m || _i.mouse(this)), o(t);
            g = setTimeout(function() {
                g = null;
                c(t)
            }, 50);
            x();
            n(Math.pow(2, .002 * Bi()) * C.k);
            r(_, p);
            l(t)
        }

        function f() {
            var t = _i.mouse(this),
                i = Math.log(C.k) / Math.LN2;
            a(this, t, e(t), _i.event.shiftKey ? Math.ceil(i) - 1 : Math.floor(i) + 1)
        }
        var p, _, m, g, v, y, b, $, S, C = {
                x: 0,
                y: 0,
                k: 1
            },
            T = [960, 500],
            E = Wi,
            I = 250,
            A = 0,
            M = "mousedown.zoom",
            D = "mousemove.zoom",
            P = "mouseup.zoom",
            N = "touchstart.zoom",
            L = w(t, "zoomstart", "zoom", "zoomend");
        if(!Hi) Hi = "onwheel" in vi ? (Bi = function() {
            return -_i.event.deltaY * (_i.event.deltaMode ? 120 : 1)
        }, "wheel") : "onmousewheel" in vi ? (Bi = function() {
            return _i.event.wheelDelta
        }, "mousewheel") : (Bi = function() {
            return -_i.event.detail
        }, "MozMousePixelScroll");
        t.event = function(t) {
            t.each(function() {
                var t = L.of(this, arguments),
                    e = C;
                if(d3_transitionInheritId) _i.select(this).transition().each("start.zoom", function() {
                    C = this.__chart__ || {
                            x: 0,
                            y: 0,
                            k: 1
                        };
                    o(t)
                }).tween("zoom:zoom", function() {
                    var i = T[0],
                        n = T[1],
                        r = _ ? _[0] : i / 2,
                        a = _ ? _[1] : n / 2,
                        s = _i.interpolateZoom([(r - C.x) / C.k, (a - C.y) / C.k, i / C.k], [(r - e.x) / e.k, (a - e.y) / e.k, i / e.k]);
                    return function(e) {
                        var n = s(e),
                            o = i / n[2];
                        this.__chart__ = C = {
                            x: r - n[0] * o,
                            y: a - n[1] * o,
                            k: o
                        };
                        l(t)
                    }
                }).each("interrupt.zoom", function() {
                    c(t)
                }).each("end.zoom", function() {
                    c(t)
                });
                else {
                    this.__chart__ = C;
                    o(t);
                    l(t);
                    c(t)
                }
            })
        };
        t.translate = function(e) {
            if(!arguments.length) return [C.x, C.y];
            C = {
                x: +e[0],
                y: +e[1],
                k: C.k
            };
            s();
            return t
        };
        t.scale = function(e) {
            if(!arguments.length) return C.k;
            C = {
                x: C.x,
                y: C.y,
                k: null
            };
            n(+e);
            s();
            return t
        };
        t.scaleExtent = function(e) {
            if(!arguments.length) return E;
            E = null == e ? Wi : [+e[0], +e[1]];
            return t
        };
        t.center = function(e) {
            if(!arguments.length) return m;
            m = e && [+e[0], +e[1]];
            return t
        };
        t.size = function(e) {
            if(!arguments.length) return T;
            T = e && [+e[0], +e[1]];
            return t
        };
        t.duration = function(e) {
            if(!arguments.length) return I;
            I = +e;
            return t
        };
        t.x = function(e) {
            if(!arguments.length) return b;
            b = e;
            y = e.copy();
            C = {
                x: 0,
                y: 0,
                k: 1
            };
            return t
        };
        t.y = function(e) {
            if(!arguments.length) return S;
            S = e;
            $ = e.copy();
            C = {
                x: 0,
                y: 0,
                k: 1
            };
            return t
        };
        return _i.rebind(t, L, "on")
    };
    var Bi, Hi, Wi = [0, 1 / 0];
    _i.color = L;
    L.prototype.toString = function() {
        return this.rgb() + ""
    };
    _i.hsl = R;
    var qi = R.prototype = new L;
    qi.brighter = function(t) {
        t = Math.pow(.7, arguments.length ? t : 1);
        return new R(this.h, this.s, this.l / t)
    };
    qi.darker = function(t) {
        t = Math.pow(.7, arguments.length ? t : 1);
        return new R(this.h, this.s, t * this.l)
    };
    qi.rgb = function() {
        return j(this.h, this.s, this.l)
    };
    _i.hcl = O;
    var Gi = O.prototype = new L;
    Gi.brighter = function(t) {
        return new O(this.h, this.c, Math.min(100, this.l + Ui * (arguments.length ? t : 1)))
    };
    Gi.darker = function(t) {
        return new O(this.h, this.c, Math.max(0, this.l - Ui * (arguments.length ? t : 1)))
    };
    Gi.rgb = function() {
        return F(this.h, this.c, this.l).rgb()
    };
    _i.lab = z;
    var Ui = 18,
        Vi = .95047,
        Yi = 1,
        Xi = 1.08883,
        Ki = z.prototype = new L;
    Ki.brighter = function(t) {
        return new z(Math.min(100, this.l + Ui * (arguments.length ? t : 1)), this.a, this.b)
    };
    Ki.darker = function(t) {
        return new z(Math.max(0, this.l - Ui * (arguments.length ? t : 1)), this.a, this.b)
    };
    Ki.rgb = function() {
        return B(this.l, this.a, this.b)
    };
    _i.rgb = U;
    var Ji = U.prototype = new L;
    Ji.brighter = function(t) {
        t = Math.pow(.7, arguments.length ? t : 1);
        var e = this.r,
            i = this.g,
            n = this.b,
            r = 30;
        if(!e && !i && !n) return new U(r, r, r);
        if(e && e < r) e = r;
        if(i && i < r) i = r;
        if(n && n < r) n = r;
        return new U(Math.min(255, e / t), Math.min(255, i / t), Math.min(255, n / t))
    };
    Ji.darker = function(t) {
        t = Math.pow(.7, arguments.length ? t : 1);
        return new U(t * this.r, t * this.g, t * this.b)
    };
    Ji.hsl = function() {
        return K(this.r, this.g, this.b)
    };
    Ji.toString = function() {
        return "#" + Y(this.r) + Y(this.g) + Y(this.b)
    };
    var Zi = _i.map({
        aliceblue: 15792383,
        antiquewhite: 16444375,
        aqua: 65535,
        aquamarine: 8388564,
        azure: 15794175,
        beige: 16119260,
        bisque: 16770244,
        black: 0,
        blanchedalmond: 16772045,
        blue: 255,
        blueviolet: 9055202,
        brown: 10824234,
        burlywood: 14596231,
        cadetblue: 6266528,
        chartreuse: 8388352,
        chocolate: 13789470,
        coral: 16744272,
        cornflowerblue: 6591981,
        cornsilk: 16775388,
        crimson: 14423100,
        cyan: 65535,
        darkblue: 139,
        darkcyan: 35723,
        darkgoldenrod: 12092939,
        darkgray: 11119017,
        darkgreen: 25600,
        darkgrey: 11119017,
        darkkhaki: 12433259,
        darkmagenta: 9109643,
        darkolivegreen: 5597999,
        darkorange: 16747520,
        darkorchid: 10040012,
        darkred: 9109504,
        darksalmon: 15308410,
        darkseagreen: 9419919,
        darkslateblue: 4734347,
        darkslategray: 3100495,
        darkslategrey: 3100495,
        darkturquoise: 52945,
        darkviolet: 9699539,
        deeppink: 16716947,
        deepskyblue: 49151,
        dimgray: 6908265,
        dimgrey: 6908265,
        dodgerblue: 2003199,
        firebrick: 11674146,
        floralwhite: 16775920,
        forestgreen: 2263842,
        fuchsia: 16711935,
        gainsboro: 14474460,
        ghostwhite: 16316671,
        gold: 16766720,
        goldenrod: 14329120,
        gray: 8421504,
        green: 32768,
        greenyellow: 11403055,
        grey: 8421504,
        honeydew: 15794160,
        hotpink: 16738740,
        indianred: 13458524,
        indigo: 4915330,
        ivory: 16777200,
        khaki: 15787660,
        lavender: 15132410,
        lavenderblush: 16773365,
        lawngreen: 8190976,
        lemonchiffon: 16775885,
        lightblue: 11393254,
        lightcoral: 15761536,
        lightcyan: 14745599,
        lightgoldenrodyellow: 16448210,
        lightgray: 13882323,
        lightgreen: 9498256,
        lightgrey: 13882323,
        lightpink: 16758465,
        lightsalmon: 16752762,
        lightseagreen: 2142890,
        lightskyblue: 8900346,
        lightslategray: 7833753,
        lightslategrey: 7833753,
        lightsteelblue: 11584734,
        lightyellow: 16777184,
        lime: 65280,
        limegreen: 3329330,
        linen: 16445670,
        magenta: 16711935,
        maroon: 8388608,
        mediumaquamarine: 6737322,
        mediumblue: 205,
        mediumorchid: 12211667,
        mediumpurple: 9662683,
        mediumseagreen: 3978097,
        mediumslateblue: 8087790,
        mediumspringgreen: 64154,
        mediumturquoise: 4772300,
        mediumvioletred: 13047173,
        midnightblue: 1644912,
        mintcream: 16121850,
        mistyrose: 16770273,
        moccasin: 16770229,
        navajowhite: 16768685,
        navy: 128,
        oldlace: 16643558,
        olive: 8421376,
        olivedrab: 7048739,
        orange: 16753920,
        orangered: 16729344,
        orchid: 14315734,
        palegoldenrod: 15657130,
        palegreen: 10025880,
        paleturquoise: 11529966,
        palevioletred: 14381203,
        papayawhip: 16773077,
        peachpuff: 16767673,
        peru: 13468991,
        pink: 16761035,
        plum: 14524637,
        powderblue: 11591910,
        purple: 8388736,
        rebeccapurple: 6697881,
        red: 16711680,
        rosybrown: 12357519,
        royalblue: 4286945,
        saddlebrown: 9127187,
        salmon: 16416882,
        sandybrown: 16032864,
        seagreen: 3050327,
        seashell: 16774638,
        sienna: 10506797,
        silver: 12632256,
        skyblue: 8900331,
        slateblue: 6970061,
        slategray: 7372944,
        slategrey: 7372944,
        snow: 16775930,
        springgreen: 65407,
        steelblue: 4620980,
        tan: 13808780,
        teal: 32896,
        thistle: 14204888,
        tomato: 16737095,
        turquoise: 4251856,
        violet: 15631086,
        wheat: 16113331,
        white: 16777215,
        whitesmoke: 16119285,
        yellow: 16776960,
        yellowgreen: 10145074
    });
    Zi.forEach(function(t, e) {
        Zi.set(t, V(e))
    });
    _i.functor = tt;
    _i.xhr = et(_);
    this[g(this, "requestAnimationFrame")] || function(t) {
        setTimeout(t, 17)
    };
    _i.round = function(t, e) {
        return e ? Math.round(t * (e = Math.pow(10, e))) / e : Math.round(t)
    };
    var Qi = ["y", "z", "a", "f", "p", "n", "µ", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"].map(st);
    _i.formatPrefix = function(t, e) {
        var i = 0;
        if(t = +t) {
            if(t < 0) t *= -1;
            if(e) t = _i.round(t, at(t, e));
            i = 1 + Math.floor(1e-12 + Math.log(t) / Math.LN10);
            i = Math.max(-24, Math.min(24, 3 * Math.floor((i - 1) / 3)))
        }
        return Qi[8 + i / 3]
    };
    var tn = (_i.map({
            b: function(t) {
                return t.toString(2)
            },
            c: function(t) {
                return String.fromCharCode(t)
            },
            o: function(t) {
                return t.toString(8)
            },
            x: function(t) {
                return t.toString(16)
            },
            X: function(t) {
                return t.toString(16).toUpperCase()
            },
            g: function(t, e) {
                return t.toPrecision(e)
            },
            e: function(t, e) {
                return t.toExponential(e)
            },
            f: function(t, e) {
                return t.toFixed(e)
            },
            r: function(t, e) {
                return(t = _i.round(t, at(t, e))).toFixed(Math.max(0, Math.min(20, at(t * (1 + 1e-15), e))))
            }
        }), _i.time = {}),
        en = Date;
    ot.prototype = {
        getDate: function() {
            return this._.getUTCDate()
        },
        getDay: function() {
            return this._.getUTCDay()
        },
        getFullYear: function() {
            return this._.getUTCFullYear()
        },
        getHours: function() {
            return this._.getUTCHours()
        },
        getMilliseconds: function() {
            return this._.getUTCMilliseconds()
        },
        getMinutes: function() {
            return this._.getUTCMinutes()
        },
        getMonth: function() {
            return this._.getUTCMonth()
        },
        getSeconds: function() {
            return this._.getUTCSeconds()
        },
        getTime: function() {
            return this._.getTime()
        },
        getTimezoneOffset: function() {
            return 0
        },
        valueOf: function() {
            return this._.valueOf()
        },
        setDate: function() {
            nn.setUTCDate.apply(this._, arguments)
        },
        setDay: function() {
            nn.setUTCDay.apply(this._, arguments)
        },
        setFullYear: function() {
            nn.setUTCFullYear.apply(this._, arguments)
        },
        setHours: function() {
            nn.setUTCHours.apply(this._, arguments)
        },
        setMilliseconds: function() {
            nn.setUTCMilliseconds.apply(this._, arguments)
        },
        setMinutes: function() {
            nn.setUTCMinutes.apply(this._, arguments)
        },
        setMonth: function() {
            nn.setUTCMonth.apply(this._, arguments)
        },
        setSeconds: function() {
            nn.setUTCSeconds.apply(this._, arguments)
        },
        setTime: function() {
            nn.setTime.apply(this._, arguments)
        }
    };
    var nn = Date.prototype;
    tn.year = lt(function(t) {
        t = tn.day(t);
        t.setMonth(0, 1);
        return t
    }, function(t, e) {
        t.setFullYear(t.getFullYear() + e)
    }, function(t) {
        return t.getFullYear()
    });
    tn.years = tn.year.range;
    tn.years.utc = tn.year.utc.range;
    tn.day = lt(function(t) {
        var e = new en(2e3, 0);
        e.setFullYear(t.getFullYear(), t.getMonth(), t.getDate());
        return e
    }, function(t, e) {
        t.setDate(t.getDate() + e)
    }, function(t) {
        return t.getDate() - 1
    });
    tn.days = tn.day.range;
    tn.days.utc = tn.day.utc.range;
    tn.dayOfYear = function(t) {
        var e = tn.year(t);
        return Math.floor((t - e - 6e4 * (t.getTimezoneOffset() - e.getTimezoneOffset())) / 864e5)
    };
    ["sunday", "monday", "tuesday", "wednesday", "thursday", "friday", "saturday"].forEach(function(t, e) {
        e = 7 - e;
        var i = tn[t] = lt(function(t) {
            (t = tn.day(t)).setDate(t.getDate() - (t.getDay() + e) % 7);
            return t
        }, function(t, e) {
            t.setDate(t.getDate() + 7 * Math.floor(e))
        }, function(t) {
            var i = tn.year(t).getDay();
            return Math.floor((tn.dayOfYear(t) + (i + e) % 7) / 7) - (i !== e)
        });
        tn[t + "s"] = i.range;
        tn[t + "s"].utc = i.utc.range;
        tn[t + "OfYear"] = function(t) {
            var i = tn.year(t).getDay();
            return Math.floor((tn.dayOfYear(t) + (i + e) % 7) / 7)
        }
    });
    tn.week = tn.sunday;
    tn.weeks = tn.sunday.range;
    tn.weeks.utc = tn.sunday.utc.range;
    tn.weekOfYear = tn.sundayOfYear;
    _i.geo = {};
    ut.prototype = {
        s: 0,
        t: 0,
        add: function(t) {
            dt(t, this.t, rn);
            dt(rn.s, this.s, this);
            if(this.s) this.t += rn.t;
            else this.s = rn.t
        },
        reset: function() {
            this.s = this.t = 0
        },
        valueOf: function() {
            return this.s
        }
    };
    var rn = new ut;
    _i.geo.stream = function(t, e) {
        if(t && an.hasOwnProperty(t.type)) an[t.type](t, e);
        else ht(t, e)
    };
    var an = {
            Feature: function(t, e) {
                ht(t.geometry, e)
            },
            FeatureCollection: function(t, e) {
                for(var i = t.features, n = -1, r = i.length; ++n < r;) ht(i[n].geometry, e)
            }
        },
        sn = {
            Sphere: function(t, e) {
                e.sphere()
            },
            Point: function(t, e) {
                t = t.coordinates;
                e.point(t[0], t[1], t[2])
            },
            MultiPoint: function(t, e) {
                for(var i = t.coordinates, n = -1, r = i.length; ++n < r;) t = i[n], e.point(t[0], t[1], t[2])
            },
            LineString: function(t, e) {
                ft(t.coordinates, e, 0)
            },
            MultiLineString: function(t, e) {
                for(var i = t.coordinates, n = -1, r = i.length; ++n < r;) ft(i[n], e, 0)
            },
            Polygon: function(t, e) {
                pt(t.coordinates, e)
            },
            MultiPolygon: function(t, e) {
                for(var i = t.coordinates, n = -1, r = i.length; ++n < r;) pt(i[n], e)
            },
            GeometryCollection: function(t, e) {
                for(var i = t.geometries, n = -1, r = i.length; ++n < r;) ht(i[n], e)
            }
        };
    _i.geo.area = function(t) {
        on = 0;
        _i.geo.stream(t, cn);
        return on
    };
    var on, ln = new ut,
        cn = {
            sphere: function() {
                on += 4 * Pi
            },
            point: v,
            lineStart: v,
            lineEnd: v,
            polygonStart: function() {
                ln.reset();
                cn.lineStart = _t
            },
            polygonEnd: function() {
                var t = 2 * ln;
                on += t < 0 ? 4 * Pi + t : t;
                cn.lineStart = cn.lineEnd = cn.point = v
            }
        };
    _i.geo.bounds = function() {
        function t(t, e) {
            y.push(b = [u = t, h = t]);
            if(e < d) d = e;
            if(e > f) f = e
        }

        function e(e, i) {
            var n = mt([e * Ri, i * Ri]);
            if(g) {
                var r = vt(g, n),
                    a = [r[1], -r[0], 0],
                    s = vt(a, r);
                xt(s);
                s = $t(s);
                var l = e - p,
                    c = l > 0 ? 1 : -1,
                    _ = s[0] * ji * c,
                    m = bi(l) > 180;
                if(m ^ (c * p < _ && _ < c * e)) {
                    var v = s[1] * ji;
                    if(v > f) f = v
                } else if(_ = (_ + 360) % 360 - 180, m ^ (c * p < _ && _ < c * e)) {
                    var v = -s[1] * ji;
                    if(v < d) d = v
                } else {
                    if(i < d) d = i;
                    if(i > f) f = i
                }
                if(m) {
                    if(e < p) {
                        if(o(u, e) > o(u, h)) h = e
                    } else if(o(e, h) > o(u, h)) u = e
                } else if(h >= u) {
                    if(e < u) u = e;
                    if(e > h) h = e
                } else if(e > p) {
                    if(o(u, e) > o(u, h)) h = e
                } else if(o(e, h) > o(u, h)) u = e
            } else t(e, i);
            g = n, p = e
        }

        function i() {
            x.point = e
        }

        function n() {
            b[0] = u, b[1] = h;
            x.point = t;
            g = null
        }

        function r(t, i) {
            if(g) {
                var n = t - p;
                v += bi(n) > 180 ? n + (n > 0 ? 360 : -360) : n
            } else _ = t, m = i;
            cn.point(t, i);
            e(t, i)
        }

        function a() {
            cn.lineStart()
        }

        function s() {
            r(_, m);
            cn.lineEnd();
            if(bi(v) > Mi) u = -(h = 180);
            b[0] = u, b[1] = h;
            g = null
        }

        function o(t, e) {
            return(e -= t) < 0 ? e + 360 : e
        }

        function l(t, e) {
            return t[0] - e[0]
        }

        function c(t, e) {
            return e[0] <= e[1] ? e[0] <= t && t <= e[1] : t < e[0] || e[1] < t
        }
        var u, d, h, f, p, _, m, g, v, y, b, x = {
            point: t,
            lineStart: i,
            lineEnd: n,
            polygonStart: function() {
                x.point = r;
                x.lineStart = a;
                x.lineEnd = s;
                v = 0;
                cn.polygonStart()
            },
            polygonEnd: function() {
                cn.polygonEnd();
                x.point = t;
                x.lineStart = i;
                x.lineEnd = n;
                if(ln < 0) u = -(h = 180), d = -(f = 90);
                else if(v > Mi) f = 90;
                else if(v < -Mi) d = -90;
                b[0] = u, b[1] = h
            }
        };
        return function(t) {
            f = h = -(u = d = 1 / 0);
            y = [];
            _i.geo.stream(t, x);
            var e = y.length;
            if(e) {
                y.sort(l);
                for(var i, n = 1, r = y[0], a = [r]; n < e; ++n) {
                    i = y[n];
                    if(c(i[0], r) || c(i[1], r)) {
                        if(o(r[0], i[1]) > o(r[0], r[1])) r[1] = i[1];
                        if(o(i[0], r[1]) > o(r[0], r[1])) r[0] = i[0]
                    } else a.push(r = i)
                }
                for(var s, i, p = -(1 / 0), e = a.length - 1, n = 0, r = a[e]; n <= e; r = i, ++n) {
                    i = a[n];
                    if((s = o(r[1], i[0])) > p) p = s, u = i[0], h = r[1]
                }
            }
            y = b = null;
            return u === 1 / 0 || d === 1 / 0 ? [
                [NaN, NaN],
                [NaN, NaN]
            ] : [
                [u, d],
                [h, f]
            ]
        }
    }();
    _i.geo.centroid = function(t) {
        un = dn = hn = fn = pn = _n = mn = gn = vn = yn = bn = 0;
        _i.geo.stream(t, xn);
        var e = vn,
            i = yn,
            n = bn,
            r = e * e + i * i + n * n;
        if(r < Di) {
            e = _n, i = mn, n = gn;
            if(dn < Mi) e = hn, i = fn, n = pn;
            r = e * e + i * i + n * n;
            if(r < Di) return [NaN, NaN]
        }
        return [Math.atan2(i, e) * ji, A(n / Math.sqrt(r)) * ji]
    };
    var un, dn, hn, fn, pn, _n, mn, gn, vn, yn, bn, xn = {
            sphere: v,
            point: kt,
            lineStart: Ct,
            lineEnd: Tt,
            polygonStart: function() {
                xn.lineStart = Et
            },
            polygonEnd: function() {
                xn.lineStart = Ct
            }
        },
        $n = Nt(At, Ot, zt, [-Pi, -Pi / 2]),
        wn = 1e9;
    _i.geo.clipExtent = function() {
        var t, e, i, n, r, a, s = {
            stream: function(t) {
                if(r) r.valid = !1;
                r = a(t);
                r.valid = !0;
                return r
            },
            extent: function(o) {
                if(!arguments.length) return [
                    [t, e],
                    [i, n]
                ];
                a = qt(t = +o[0][0], e = +o[0][1], i = +o[1][0], n = +o[1][1]);
                if(r) r.valid = !1, r = null;
                return s
            }
        };
        return s.extent([
            [0, 0],
            [960, 500]
        ])
    };
    (_i.geo.conicEqualArea = function() {
        return Gt(Ut)
    }).raw = Ut;
    _i.geo.albers = function() {
        return _i.geo.conicEqualArea().rotate([96, 0]).center([-.6, 38.7]).parallels([29.5, 45.5]).scale(1070)
    };
    _i.geo.albersUsa = function() {
        function t(t) {
            var a = t[0],
                s = t[1];
            e = null;
            (i(a, s), e) || (n(a, s), e) || r(a, s);
            return e
        }
        var e, i, n, r, a = _i.geo.albers(),
            s = _i.geo.conicEqualArea().rotate([154, 0]).center([-2, 58.5]).parallels([55, 65]),
            o = _i.geo.conicEqualArea().rotate([157, 0]).center([-3, 19.9]).parallels([8, 18]),
            l = {
                point: function(t, i) {
                    e = [t, i]
                }
            };
        t.invert = function(t) {
            var e = a.scale(),
                i = a.translate(),
                n = (t[0] - i[0]) / e,
                r = (t[1] - i[1]) / e;
            return(r >= .12 && r < .234 && n >= -.425 && n < -.214 ? s : r >= .166 && r < .234 && n >= -.214 && n < -.115 ? o : a).invert(t)
        };
        t.stream = function(t) {
            var e = a.stream(t),
                i = s.stream(t),
                n = o.stream(t);
            return {
                point: function(t, r) {
                    e.point(t, r);
                    i.point(t, r);
                    n.point(t, r)
                },
                sphere: function() {
                    e.sphere();
                    i.sphere();
                    n.sphere()
                },
                lineStart: function() {
                    e.lineStart();
                    i.lineStart();
                    n.lineStart()
                },
                lineEnd: function() {
                    e.lineEnd();
                    i.lineEnd();
                    n.lineEnd()
                },
                polygonStart: function() {
                    e.polygonStart();
                    i.polygonStart();
                    n.polygonStart()
                },
                polygonEnd: function() {
                    e.polygonEnd();
                    i.polygonEnd();
                    n.polygonEnd()
                }
            }
        };
        t.precision = function(e) {
            if(!arguments.length) return a.precision();
            a.precision(e);
            s.precision(e);
            o.precision(e);
            return t
        };
        t.scale = function(e) {
            if(!arguments.length) return a.scale();
            a.scale(e);
            s.scale(.35 * e);
            o.scale(e);
            return t.translate(a.translate())
        };
        t.translate = function(e) {
            if(!arguments.length) return a.translate();
            var c = a.scale(),
                u = +e[0],
                d = +e[1];
            i = a.translate(e).clipExtent([
                [u - .455 * c, d - .238 * c],
                [u + .455 * c, d + .238 * c]
            ]).stream(l).point;
            n = s.translate([u - .307 * c, d + .201 * c]).clipExtent([
                [u - .425 * c + Mi, d + .12 * c + Mi],
                [u - .214 * c - Mi, d + .234 * c - Mi]
            ]).stream(l).point;
            r = o.translate([u - .205 * c, d + .212 * c]).clipExtent([
                [u - .214 * c + Mi, d + .166 * c + Mi],
                [u - .115 * c - Mi, d + .234 * c - Mi]
            ]).stream(l).point;
            return t
        };
        return t.scale(1070)
    };
    var kn, Sn, Cn, Tn, En, In, An = {
            point: v,
            lineStart: v,
            lineEnd: v,
            polygonStart: function() {
                Sn = 0;
                An.lineStart = Vt
            },
            polygonEnd: function() {
                An.lineStart = An.lineEnd = An.point = v;
                kn += bi(Sn / 2)
            }
        },
        Mn = {
            point: Yt,
            lineStart: v,
            lineEnd: v,
            polygonStart: v,
            polygonEnd: v
        },
        Dn = {
            point: Jt,
            lineStart: Zt,
            lineEnd: Qt,
            polygonStart: function() {
                Dn.lineStart = te
            },
            polygonEnd: function() {
                Dn.point = Jt;
                Dn.lineStart = Zt;
                Dn.lineEnd = Qt
            }
        };
    _i.geo.path = function() {
        function t(t) {
            if(t) {
                if("function" == typeof o) a.pointRadius(+o.apply(this, arguments));
                if(!s || !s.valid) s = r(a);
                _i.geo.stream(t, s)
            }
            return a.result()
        }

        function e() {
            s = null;
            return t
        }
        var i, n, r, a, s, o = 4.5;
        t.area = function(t) {
            kn = 0;
            _i.geo.stream(t, r(An));
            return kn
        };
        t.centroid = function(t) {
            hn = fn = pn = _n = mn = gn = vn = yn = bn = 0;
            _i.geo.stream(t, r(Dn));
            return bn ? [vn / bn, yn / bn] : gn ? [_n / gn, mn / gn] : pn ? [hn / pn, fn / pn] : [NaN, NaN]
        };
        t.bounds = function(t) {
            En = In = -(Cn = Tn = 1 / 0);
            _i.geo.stream(t, r(Mn));
            return [
                [Cn, Tn],
                [En, In]
            ]
        };
        t.projection = function(t) {
            if(!arguments.length) return i;
            r = (i = t) ? t.stream || ne(t) : _;
            return e()
        };
        t.context = function(t) {
            if(!arguments.length) return n;
            a = null == (n = t) ? new Xt : new ee(t);
            if("function" != typeof o) a.pointRadius(o);
            return e()
        };
        t.pointRadius = function(e) {
            if(!arguments.length) return o;
            o = "function" == typeof e ? e : (a.pointRadius(+e), +e);
            return t
        };
        return t.projection(_i.geo.albersUsa()).context(null)
    };
    _i.geo.transform = function(t) {
        return {
            stream: function(e) {
                var i = new re(e);
                for(var n in t) i[n] = t[n];
                return i
            }
        }
    };
    re.prototype = {
        point: function(t, e) {
            this.stream.point(t, e)
        },
        sphere: function() {
            this.stream.sphere()
        },
        lineStart: function() {
            this.stream.lineStart()
        },
        lineEnd: function() {
            this.stream.lineEnd()
        },
        polygonStart: function() {
            this.stream.polygonStart()
        },
        polygonEnd: function() {
            this.stream.polygonEnd()
        }
    };
    _i.geo.projection = se;
    _i.geo.projectionMutator = oe;
    (_i.geo.equirectangular = function() {
        return se(ce)
    }).raw = ce.invert = ce;
    _i.geo.rotation = function(t) {
        function e(e) {
            e = t(e[0] * Ri, e[1] * Ri);
            return e[0] *= ji, e[1] *= ji, e
        }
        t = de(t[0] % 360 * Ri, t[1] * Ri, t.length > 2 ? t[2] * Ri : 0);
        e.invert = function(e) {
            e = t.invert(e[0] * Ri, e[1] * Ri);
            return e[0] *= ji, e[1] *= ji, e
        };
        return e
    };
    ue.invert = ce;
    _i.geo.circle = function() {
        function t() {
            var t = "function" == typeof n ? n.apply(this, arguments) : n,
                e = de(-t[0] * Ri, -t[1] * Ri, 0).invert,
                r = [];
            i(null, null, 1, {
                point: function(t, i) {
                    r.push(t = e(t, i));
                    t[0] *= ji, t[1] *= ji
                }
            });
            return {
                type: "Polygon",
                coordinates: [r]
            }
        }
        var e, i, n = [0, 0],
            r = 6;
        t.origin = function(e) {
            if(!arguments.length) return n;
            n = e;
            return t
        };
        t.angle = function(n) {
            if(!arguments.length) return e;
            i = _e((e = +n) * Ri, r * Ri);
            return t
        };
        t.precision = function(n) {
            if(!arguments.length) return r;
            i = _e(e * Ri, (r = +n) * Ri);
            return t
        };
        return t.angle(90)
    };
    _i.geo.distance = function(t, e) {
        var i, n = (e[0] - t[0]) * Ri,
            r = t[1] * Ri,
            a = e[1] * Ri,
            s = Math.sin(n),
            o = Math.cos(n),
            l = Math.sin(r),
            c = Math.cos(r),
            u = Math.sin(a),
            d = Math.cos(a);
        return Math.atan2(Math.sqrt((i = d * s) * i + (i = c * u - l * d * o) * i), l * u + c * d * o)
    };
    _i.geo.graticule = function() {
        function t() {
            return {
                type: "MultiLineString",
                coordinates: e()
            }
        }

        function e() {
            return _i.range(Math.ceil(a / m) * m, r, m).map(h).concat(_i.range(Math.ceil(c / g) * g, l, g).map(f)).concat(_i.range(Math.ceil(n / p) * p, i, p).filter(function(t) {
                return bi(t % m) > Mi
            }).map(u)).concat(_i.range(Math.ceil(o / _) * _, s, _).filter(function(t) {
                return bi(t % g) > Mi
            }).map(d))
        }
        var i, n, r, a, s, o, l, c, u, d, h, f, p = 10,
            _ = p,
            m = 90,
            g = 360,
            v = 2.5;
        t.lines = function() {
            return e().map(function(t) {
                return {
                    type: "LineString",
                    coordinates: t
                }
            })
        };
        t.outline = function() {
            return {
                type: "Polygon",
                coordinates: [h(a).concat(f(l).slice(1), h(r).reverse().slice(1), f(c).reverse().slice(1))]
            }
        };
        t.extent = function(e) {
            if(!arguments.length) return t.minorExtent();
            else return t.majorExtent(e).minorExtent(e)
        };
        t.majorExtent = function(e) {
            if(!arguments.length) return [
                [a, c],
                [r, l]
            ];
            a = +e[0][0], r = +e[1][0];
            c = +e[0][1], l = +e[1][1];
            if(a > r) e = a, a = r, r = e;
            if(c > l) e = c, c = l, l = e;
            return t.precision(v)
        };
        t.minorExtent = function(e) {
            if(!arguments.length) return [
                [n, o],
                [i, s]
            ];
            n = +e[0][0], i = +e[1][0];
            o = +e[0][1], s = +e[1][1];
            if(n > i) e = n, n = i, i = e;
            if(o > s) e = o, o = s, s = e;
            return t.precision(v)
        };
        t.step = function(e) {
            if(!arguments.length) return t.minorStep();
            else return t.majorStep(e).minorStep(e)
        };
        t.majorStep = function(e) {
            if(!arguments.length) return [m, g];
            m = +e[0], g = +e[1];
            return t
        };
        t.minorStep = function(e) {
            if(!arguments.length) return [p, _];
            p = +e[0], _ = +e[1];
            return t
        };
        t.precision = function(e) {
            if(!arguments.length) return v;
            v = +e;
            u = ge(o, s, 90);
            d = ve(n, i, v);
            h = ge(c, l, 90);
            f = ve(a, r, v);
            return t
        };
        return t.majorExtent([
            [-180, -90 + Mi],
            [180, 90 - Mi]
        ]).minorExtent([
            [-180, -80 - Mi],
            [180, 80 + Mi]
        ])
    };
    _i.geo.greatArc = function() {
        function t() {
            return {
                type: "LineString",
                coordinates: [e || n.apply(this, arguments), i || r.apply(this, arguments)]
            }
        }
        var e, i, n = ye,
            r = be;
        t.distance = function() {
            return _i.geo.distance(e || n.apply(this, arguments), i || r.apply(this, arguments))
        };
        t.source = function(i) {
            if(!arguments.length) return n;
            n = i, e = "function" == typeof i ? null : i;
            return t
        };
        t.target = function(e) {
            if(!arguments.length) return r;
            r = e, i = "function" == typeof e ? null : e;
            return t
        };
        t.precision = function() {
            return arguments.length ? t : 0
        };
        return t
    };
    _i.geo.interpolate = function(t, e) {
        return xe(t[0] * Ri, t[1] * Ri, e[0] * Ri, e[1] * Ri)
    };
    _i.geo.length = function(t) {
        Pn = 0;
        _i.geo.stream(t, Nn);
        return Pn
    };
    var Pn, Nn = {
            sphere: v,
            point: v,
            lineStart: $e,
            lineEnd: v,
            polygonStart: v,
            polygonEnd: v
        },
        Ln = we(function(t) {
            return Math.sqrt(2 / (1 + t))
        }, function(t) {
            return 2 * Math.asin(t / 2)
        });
    (_i.geo.azimuthalEqualArea = function() {
        return se(Ln)
    }).raw = Ln;
    var Rn = we(function(t) {
        var e = Math.acos(t);
        return e && e / Math.sin(e)
    }, _);
    (_i.geo.azimuthalEquidistant = function() {
        return se(Rn)
    }).raw = Rn;
    (_i.geo.conicConformal = function() {
        return Gt(ke)
    }).raw = ke;
    (_i.geo.conicEquidistant = function() {
        return Gt(Se)
    }).raw = Se;
    var jn = we(function(t) {
        return 1 / t
    }, Math.atan);
    (_i.geo.gnomonic = function() {
        return se(jn)
    }).raw = jn;
    Ce.invert = function(t, e) {
        return [t, 2 * Math.atan(Math.exp(e)) - Li]
    };
    (_i.geo.mercator = function() {
        return Te(Ce)
    }).raw = Ce;
    var On = we(function() {
        return 1
    }, Math.asin);
    (_i.geo.orthographic = function() {
        return se(On)
    }).raw = On;
    var Fn = we(function(t) {
        return 1 / (1 + t)
    }, function(t) {
        return 2 * Math.atan(t)
    });
    (_i.geo.stereographic = function() {
        return se(Fn)
    }).raw = Fn;
    Ee.invert = function(t, e) {
        return [-e, 2 * Math.atan(Math.exp(t)) - Li]
    };
    (_i.geo.transverseMercator = function() {
        var t = Te(Ee),
            e = t.center,
            i = t.rotate;
        t.center = function(t) {
            return t ? e([-t[1], t[0]]) : (t = e(), [t[1], -t[0]])
        };
        t.rotate = function(t) {
            return t ? i([t[0], t[1], t.length > 2 ? t[2] + 90 : 90]) : (t = i(), [t[0], t[1], t[2] - 90])
        };
        return i([0, 0, 90])
    }).raw = Ee;
    _i.geom = {};
    _i.geom.hull = function(t) {
        function e(t) {
            if(t.length < 3) return [];
            var e, r = tt(i),
                a = tt(n),
                s = t.length,
                o = [],
                l = [];
            for(e = 0; e < s; e++) o.push([+r.call(this, t[e], e), +a.call(this, t[e], e), e]);
            o.sort(De);
            for(e = 0; e < s; e++) l.push([o[e][0], -o[e][1]]);
            var c = Me(o),
                u = Me(l),
                d = u[0] === c[0],
                h = u[u.length - 1] === c[c.length - 1],
                f = [];
            for(e = c.length - 1; e >= 0; --e) f.push(t[o[c[e]][2]]);
            for(e = +d; e < u.length - h; ++e) f.push(t[o[u[e]][2]]);
            return f
        }
        var i = Ie,
            n = Ae;
        if(arguments.length) return e(t);
        e.x = function(t) {
            return arguments.length ? (i = t, e) : i
        };
        e.y = function(t) {
            return arguments.length ? (n = t, e) : n
        };
        return e
    };
    _i.geom.polygon = function(t) {
        Si(t, zn);
        return t
    };
    var zn = _i.geom.polygon.prototype = [];
    zn.area = function() {
        for(var t, e = -1, i = this.length, n = this[i - 1], r = 0; ++e < i;) {
            t = n;
            n = this[e];
            r += t[1] * n[0] - t[0] * n[1]
        }
        return .5 * r
    };
    zn.centroid = function(t) {
        var e, i, n = -1,
            r = this.length,
            a = 0,
            s = 0,
            o = this[r - 1];
        if(!arguments.length) t = -1 / (6 * this.area());
        for(; ++n < r;) {
            e = o;
            o = this[n];
            i = e[0] * o[1] - o[0] * e[1];
            a += (e[0] + o[0]) * i;
            s += (e[1] + o[1]) * i
        }
        return [a * t, s * t]
    };
    zn.clip = function(t) {
        for(var e, i, n, r, a, s, o = Le(t), l = -1, c = this.length - Le(this), u = this[c - 1]; ++l < c;) {
            e = t.slice();
            t.length = 0;
            r = this[l];
            a = e[(n = e.length - o) - 1];
            i = -1;
            for(; ++i < n;) {
                s = e[i];
                if(Pe(s, u, r)) {
                    if(!Pe(a, u, r)) t.push(Ne(a, s, u, r));
                    t.push(s)
                } else if(Pe(a, u, r)) t.push(Ne(a, s, u, r));
                a = s
            }
            if(o) t.push(t[0]);
            u = r
        }
        return t
    };
    var Bn, Hn, Wn, qn, Gn, Un = [],
        Vn = [];
    We.prototype.prepare = function() {
        for(var t, e = this.edges, i = e.length; i--;) {
            t = e[i].edge;
            if(!t.b || !t.a) e.splice(i, 1)
        }
        e.sort(Ge);
        return e.length
    };
    ei.prototype = {
        start: function() {
            return this.edge.l === this.site ? this.edge.a : this.edge.b
        },
        end: function() {
            return this.edge.l === this.site ? this.edge.b : this.edge.a
        }
    };
    ii.prototype = {
        insert: function(t, e) {
            var i, n, r;
            if(t) {
                e.P = t;
                e.N = t.N;
                if(t.N) t.N.P = e;
                t.N = e;
                if(t.R) {
                    t = t.R;
                    for(; t.L;) t = t.L;
                    t.L = e
                } else t.R = e;
                i = t
            } else if(this._) {
                t = si(this._);
                e.P = null;
                e.N = t;
                t.P = t.L = e;
                i = t
            } else {
                e.P = e.N = null;
                this._ = e;
                i = null
            }
            e.L = e.R = null;
            e.U = i;
            e.C = !0;
            t = e;
            for(; i && i.C;) {
                n = i.U;
                if(i === n.L) {
                    r = n.R;
                    if(r && r.C) {
                        i.C = r.C = !1;
                        n.C = !0;
                        t = n
                    } else {
                        if(t === i.R) {
                            ri(this, i);
                            t = i;
                            i = t.U
                        }
                        i.C = !1;
                        n.C = !0;
                        ai(this, n)
                    }
                } else {
                    r = n.L;
                    if(r && r.C) {
                        i.C = r.C = !1;
                        n.C = !0;
                        t = n
                    } else {
                        if(t === i.L) {
                            ai(this, i);
                            t = i;
                            i = t.U
                        }
                        i.C = !1;
                        n.C = !0;
                        ri(this, n)
                    }
                }
                i = t.U
            }
            this._.C = !1
        },
        remove: function(t) {
            if(t.N) t.N.P = t.P;
            if(t.P) t.P.N = t.N;
            t.N = t.P = null;
            var e, i, n, r = t.U,
                a = t.L,
                s = t.R;
            if(!a) i = s;
            else if(!s) i = a;
            else i = si(s);
            if(r)
                if(r.L === t) r.L = i;
                else r.R = i;
            else this._ = i;
            if(a && s) {
                n = i.C;
                i.C = t.C;
                i.L = a;
                a.U = i;
                if(i !== s) {
                    r = i.U;
                    i.U = t.U;
                    t = i.R;
                    r.L = t;
                    i.R = s;
                    s.U = i
                } else {
                    i.U = r;
                    r = i;
                    t = i.R
                }
            } else {
                n = t.C;
                t = i
            }
            if(t) t.U = r;
            if(!n)
                if(!t || !t.C) {
                    do {
                        if(t === this._) break;
                        if(t === r.L) {
                            e = r.R;
                            if(e.C) {
                                e.C = !1;
                                r.C = !0;
                                ri(this, r);
                                e = r.R
                            }
                            if(e.L && e.L.C || e.R && e.R.C) {
                                if(!e.R || !e.R.C) {
                                    e.L.C = !1;
                                    e.C = !0;
                                    ai(this, e);
                                    e = r.R
                                }
                                e.C = r.C;
                                r.C = e.R.C = !1;
                                ri(this, r);
                                t = this._;
                                break
                            }
                        } else {
                            e = r.L;
                            if(e.C) {
                                e.C = !1;
                                r.C = !0;
                                ai(this, r);
                                e = r.L
                            }
                            if(e.L && e.L.C || e.R && e.R.C) {
                                if(!e.L || !e.L.C) {
                                    e.R.C = !1;
                                    e.C = !0;
                                    ri(this, e);
                                    e = r.L
                                }
                                e.C = r.C;
                                r.C = e.L.C = !1;
                                ai(this, r);
                                t = this._;
                                break
                            }
                        }
                        e.C = !0;
                        t = r;
                        r = r.U
                    } while (!t.C);
                    if(t) t.C = !1
                } else t.C = !1
        }
    };
    _i.geom.voronoi = function(t) {
        function e(t) {
            var e = new Array(t.length),
                n = o[0][0],
                r = o[0][1],
                a = o[1][0],
                s = o[1][1];
            oi(i(t), o).cells.forEach(function(i, o) {
                var l = i.edges,
                    c = i.site,
                    u = e[o] = l.length ? l.map(function(t) {
                        var e = t.start();
                        return [e.x, e.y]
                    }) : c.x >= n && c.x <= a && c.y >= r && c.y <= s ? [
                        [n, s],
                        [a, s],
                        [a, r],
                        [n, r]
                    ] : [];
                u.point = t[o]
            });
            return e
        }

        function i(t) {
            return t.map(function(t, e) {
                return {
                    x: Math.round(a(t, e) / Mi) * Mi,
                    y: Math.round(s(t, e) / Mi) * Mi,
                    i: e
                }
            })
        }
        var n = Ie,
            r = Ae,
            a = n,
            s = r,
            o = Yn;
        if(t) return e(t);
        e.links = function(t) {
            return oi(i(t)).edges.filter(function(t) {
                return t.l && t.r
            }).map(function(e) {
                return {
                    source: t[e.l.i],
                    target: t[e.r.i]
                }
            })
        };
        e.triangles = function(t) {
            var e = [];
            oi(i(t)).cells.forEach(function(i, n) {
                for(var r, a, s = i.site, o = i.edges.sort(Ge), l = -1, c = o.length, u = o[c - 1].edge, d = u.l === s ? u.r : u.l; ++l < c;) {
                    r = u;
                    a = d;
                    u = o[l].edge;
                    d = u.l === s ? u.r : u.l;
                    if(n < a.i && n < d.i && ci(s, a, d) < 0) e.push([t[n], t[a.i], t[d.i]])
                }
            });
            return e
        };
        e.x = function(t) {
            return arguments.length ? (a = tt(n = t), e) : n
        };
        e.y = function(t) {
            return arguments.length ? (s = tt(r = t), e) : r
        };
        e.clipExtent = function(t) {
            if(!arguments.length) return o === Yn ? null : o;
            o = null == t ? Yn : t;
            return e
        };
        e.size = function(t) {
            if(!arguments.length) return o === Yn ? null : o && o[1];
            else return e.clipExtent(t && [
                    [0, 0], t
                ])
        };
        return e
    };
    var Yn = [
        [-1e6, -1e6],
        [1e6, 1e6]
    ];
    _i.geom.delaunay = function(t) {
        return _i.geom.voronoi().triangles(t)
    };
    _i.geom.quadtree = function(t, e, i, n, r) {
        function a(t) {
            function a(t, e, i, n, r, a, s, o) {
                if(!isNaN(i) && !isNaN(n))
                    if(t.leaf) {
                        var l = t.x,
                            u = t.y;
                        if(null != l)
                            if(bi(l - i) + bi(u - n) < .01) c(t, e, i, n, r, a, s, o);
                            else {
                                var d = t.point;
                                t.x = t.y = t.point = null;
                                c(t, d, l, u, r, a, s, o);
                                c(t, e, i, n, r, a, s, o)
                            }
                        else t.x = i, t.y = n, t.point = e
                    } else c(t, e, i, n, r, a, s, o)
            }

            function c(t, e, i, n, r, s, o, l) {
                var c = .5 * (r + o),
                    u = .5 * (s + l),
                    d = i >= c,
                    h = n >= u,
                    f = h << 1 | d;
                t.leaf = !1;
                t = t.nodes[f] || (t.nodes[f] = hi());
                if(d) r = c;
                else o = c;
                if(h) s = u;
                else l = u;
                a(t, e, i, n, r, s, o, l)
            }
            var u, d, h, f, p, _, m, g, v, y = tt(o),
                b = tt(l);
            if(null != e) _ = e, m = i, g = n, v = r;
            else {
                g = v = -(_ = m = 1 / 0);
                d = [], h = [];
                p = t.length;
                if(s)
                    for(f = 0; f < p; ++f) {
                        u = t[f];
                        if(u.x < _) _ = u.x;
                        if(u.y < m) m = u.y;
                        if(u.x > g) g = u.x;
                        if(u.y > v) v = u.y;
                        d.push(u.x);
                        h.push(u.y)
                    } else
                    for(f = 0; f < p; ++f) {
                        var x = +y(u = t[f], f),
                            $ = +b(u, f);
                        if(x < _) _ = x;
                        if($ < m) m = $;
                        if(x > g) g = x;
                        if($ > v) v = $;
                        d.push(x);
                        h.push($)
                    }
            }
            var w = g - _,
                k = v - m;
            if(w > k) v = m + w;
            else g = _ + k;
            var S = hi();
            S.add = function(t) {
                a(S, t, +y(t, ++f), +b(t, f), _, m, g, v)
            };
            S.visit = function(t) {
                fi(t, S, _, m, g, v)
            };
            S.find = function(t) {
                return pi(S, t[0], t[1], _, m, g, v)
            };
            f = -1;
            if(null == e) {
                for(; ++f < p;) a(S, t[f], d[f], h[f], _, m, g, v);
                --f
            } else t.forEach(S.add);
            d = h = t = u = null;
            return S
        }
        var s, o = Ie,
            l = Ae;
        if(s = arguments.length) {
            o = ui;
            l = di;
            if(3 === s) {
                r = i;
                n = e;
                i = e = 0
            }
            return a(t)
        }
        a.x = function(t) {
            return arguments.length ? (o = t, a) : o
        };
        a.y = function(t) {
            return arguments.length ? (l = t, a) : l
        };
        a.extent = function(t) {
            if(!arguments.length) return null == e ? null : [
                [e, i],
                [n, r]
            ];
            if(null == t) e = i = n = r = null;
            else e = +t[0][0], i = +t[0][1], n = +t[1][0], r = +t[1][1];
            return a
        };
        a.size = function(t) {
            if(!arguments.length) return null == e ? null : [n - e, r - i];
            if(null == t) e = i = n = r = null;
            else e = i = 0, n = +t[0], r = +t[1];
            return a
        };
        return a
    };
    if("function" == typeof define && define.amd) this.d3 = _i, define(_i);
    else if("object" == typeof module && module.exports) module.exports = _i;
    else this.d3 = _i;
    return _i
});
I$(748, function(t, e) {
    var i = t.PRIVATE,
        n = t.Klass.extend({
            initialize: function() {
                this._t.set_domain([0, 1]);
                this._t.set_range([0, 1])
            },
            domain: function(t) {
                if(null == t) return this._t._domain();
                else this._t.set_domain(t);
                return this
            },
            type: function() {
                return "continuous"
            },
            range: function(t) {
                if(null == t) return this._t._range();
                else this._t.set_range(t);
                return this
            },
            exec: function() {}
        }, [i("_domain"), i("_range")]);
    return n
}, 571, 566);
I$(679, function(t, e, i, n) {
    function r(t) {
        return 180 * t / s
    }
    var a = t.PRIVATE,
        s = Math.PI,
        o = t.Klass.extend({
            initialize: function() {
                this._t.set_scale(1);
                this._t.set_space({
                    x: 0,
                    y: 0,
                    width: 2 * s,
                    height: 2 * s
                });
                this._t.set_translate([0, 0]);
                this._t.setTILE_SIZE(2 * s);
                this._t.set_xScale(n.create());
                this._t.set_yScale(n.create())
            },
            scale: function(t) {
                if(null == t) return this._t._scale();
                var t = Number(t);
                if(t <= 0) return this;
                this._t.set_scale(t);
                return this
            },
            translate: function(t) {
                if(null == t || "[object Array]" != Object.prototype.toString.call(t, null) || t.length < 2) return this._t._translate();
                this._t.set_translate(t);
                return this
            },
            _bound: function(t, e, i) {
                if(null != e) t = Math.max(t, e);
                if(null != i) t = Math.min(t, i);
                return t
            },
            invert: function(t, e) {
                var i = this._t._scale(),
                    n = this._t._translate(),
                    a = this._t.TILE_SIZE(),
                    o = a / 360,
                    l = a / (2 * s),
                    c = {
                        x: 0,
                        y: 0
                    },
                    u = {
                        x: null,
                        y: null
                    };
                if(null == e || !e) {
                    if(t[0] < -180 || t[0] > 180 || t[1] < -90 || t[1] > 90) throw new Error("longitude or latitude is overflowed!");
                    u.x = c.x + t[0] * o;
                    var d = this._bound(Math.sin(t[1] * s / 180), -.9999, .9999);
                    u.y = c.y + .5 * Math.log((1 + d) / (1 - d) * l);
                    return [u.x * i + n[0], -u.y * i + n[1]]
                } else {
                    var h = (t[0] - n[0]) / i,
                        f = -(t[1] - n[1]) / i,
                        p = (h - c.x) / o,
                        _ = (f - c.y) / l,
                        m = r(2 * Math.atan(Math.exp(_)) - s / 2);
                    return [p, m]
                }
            },
            constraint: function(t, e) {
                var i = e.width,
                    n = e.height;
                this._t.set_space(e);
                var r, a;
                dx = t[1][0] - t[0][0], dy = t[1][1] - t[0][1], x = (t[0][0] + t[1][0]) / 2, y = (t[0][1] + t[1][1]) / 2, r = .95 / Math.max(dx / i, dy / n), a = [i / 2 - r * x + e.x, n / 2 - r * y + e.y];
                return {
                    scale: r,
                    translate: a
                }
            },
            center: function(t, e) {
                var i = this._t._space();
                if(null == t || null == e) return this.invert([i.x + i.width / 2, i.y + i.height / 2], !0);
                this._t.set_translate([0, 0]);
                var n = this.invert(e);
                this._t.set_translate([t[0] - n[0], t[1] - n[1]]);
                return this
            },
            xScale: function(t) {
                var e = this._t._xScale(),
                    i = this,
                    n = this._t._space();
                e.exec = function(t) {
                    return i.invert([t, 0])[0]
                };
                e.range([n.x, n.x + n.width]);
                return e
            },
            yScale: function(t) {
                var e = this._t._yScale(),
                    i = this,
                    n = this._t._space();
                e.exec = function(t) {
                    return i.invert([0, t])[1]
                };
                e.range([n.y + n.height, n.y]);
                return e
            }
        }, [a("_scale"), a("_translate"), a("_rotate"), a("TILE_SIZE"), a("_xScale"), a("_yScale"), a("_space")]);
    return o
}, 571, 566, 747, 748);
I$(680, function(t, e, i, n) {
    var r = t.PRIVATE,
        a = (e.Path, t.Klass.extend({
            initialize: function() {
                this._t.set_projection(n.create({}))
            },
            projection: function(t) {
                if(null == t) return this._t._projection();
                this._t.set_projection(t);
                return this
            },
            _polygon: function(t) {
                for(var e, i = "", n = this._t._projection(), r = 0; r < t.length; ++r) {
                    for(var a = t[r], s = 0; s < a.length; ++s)
                        if(!(a[s][1] > 85 || a[s][1] < -65)) {
                            e = n.invert(a[s]);
                            if(0 == s) i += " M " + e[0] + " " + e[1];
                            else i += " L " + e[0] + " " + e[1]
                        } else;
                    if(a.length > 0) i += " Z "
                }
                return i
            },
            _multiPolygon: function(t) {
                for(var e = "", i = 0; i < t.length; i++) e = e + " " + this._polygon(t[i]);
                return e
            },
            _feature: function(t) {
                var e = "",
                    i = t.geometry;
                if(null == i) return "M 0 0 Z";
                if("MultiPolygon" == i.type) e = this._multiPolygon(i.coordinates);
                else e = this._polygon(i.coordinates);
                return e
            },
            _featureCollection: function(t) {
                for(var e = "", i = t.features, n = 0; n < i.length; n++)
                    if(null != i[n].geometry) e = e + " " + this._feature(i[n]);
                return e
            },
            exec: function(t) {
                if(null == t || null == t.type) return "M 0 0";
                if("FeatureCollection" == t.type) return this._featureCollection(t);
                else if("Feature" == t.type) return this._feature(t);
                else if("MultiPolygon" == t.type) return this._multiPolygon(t.coordinates);
                else if("Polygon" == t.type) return this._polygon(t.coordinates);
                else return "M 0 0"
            },
            _boxBigger: function(t, e) {
                var i, n, r, a;
                i = null == t.left ? e.left : null == e.left ? t.left : Math.min(t.left, e.left);
                n = null == t.right ? e.right : null == e.right ? t.right : Math.max(t.right, e.right);
                r = null == t.top ? e.top : null == e.top ? t.top : Math.min(t.top, e.top);
                a = null == t.bottom ? e.bottom : null == e.bottom ? t.bottom : Math.max(t.bottom, e.bottom);
                t.left = i;
                t.right = n;
                t.top = r;
                t.bottom = a
            },
            _polygonBbox: function(t, e) {
                for(var i = this._t._projection(), n = 0; n < t.length; ++n)
                    for(var r = t[n], a = 0; a < r.length; ++a)
                        if(!(r[a][1] > 85 || r[a][1] < -65)) {
                            point = i.invert(r[a]);
                            if(null == e.left) e.left = point[0];
                            else e.left = Math.min(point[0], e.left);
                            if(null == e.right) e.right = point[0];
                            else e.right = Math.max(point[0], e.right);
                            if(null == e.top) e.top = point[1];
                            else e.top = Math.min(point[1], e.top);
                            if(null == e.bottom) e.bottom = point[1];
                            else e.bottom = Math.max(point[1], e.bottom)
                        } else;
            },
            _multiPolygonBbox: function(t, e) {
                for(var i = 0; i < t.length; i++) this._polygonBbox(t[i], e)
            },
            bounds: function(t) {
                var e, i = {
                    left: null,
                    top: null,
                    bottom: null,
                    right: null
                };
                if("FeatureCollection" == t.type)
                    for(var n = 0; n < t.features.length; n++) {
                        feature = t.features[n];
                        e = this.bounds(feature);
                        this._boxBigger(i, e)
                    } else if("Feature" == t.type) {
                    if(null != t.geometry) {
                        e = this.bounds(t.geometry);
                        this._boxBigger(i, e)
                    }
                } else if("MultiPolygon" == t.type) this._multiPolygonBbox(t.coordinates, i);
                else if("Polygon" == t.type) this._polygonBbox(t.coordinates, i);
                return i
            },
            _polygonSignedArea: function(t) {
                var e = t.length;
                if(e <= 1) return 0;
                for(var i = 0, n = 0; n < e - 1; n++) i += t[n][0] * t[n + 1][1] - t[n + 1][0] * t[n][1];
                return i / 2
            },
            _polygonArea: function(t) {
                var e = t.length;
                if(e <= 0) return 0;
                for(var i = this._polygonSignedArea(t[0]), n = 1; n < e; n++) i -= this._polygonSignedArea(t[n]);
                return i
            },
            area: function(t) {
                var e;
                if("Feature" != t.type) throw new Error("the provided para is not a 'Feature' type in the path.area.");
                if(null != t.geometry && "Polygon" == t.geometry.type) {
                    e = this._polygonArea(t.geometry.coordinates);
                    return Math.abs(e)
                } else if(null != t.geometry && "MultiPolygon" == t.geometry.type) {
                    e = 0;
                    for(var i = 0; i < t.geometry.coordinates.length; i++) e += this._polygonArea(t.geometry.coordinates[i]);
                    return Math.abs(e)
                } else return 0
            },
            _CxCy: function(t) {
                for(var e, i = t.length, n = 0, r = 0, a = 0; a < i - 1; a++) {
                    e = t[a][0] * t[a + 1][1] - t[a + 1][0] * t[a][1];
                    n += (t[a][0] + t[a + 1][0]) * e;
                    r += (t[a][1] + t[a + 1][1]) * e
                }
                return [n, r]
            },
            _getMaxAreaIndexFromMultiPolygon: function(t) {
                for(var e, i = 0, n = Math.abs(this._polygonArea(t[0])), r = 1; r < t.length; ++r) {
                    e = this._polygonArea(t[r]);
                    e = Math.abs(e);
                    if(e > n) {
                        n = e;
                        i = r
                    }
                }
                return i
            },
            centroid: function(t) {
                if("Feature" != t.type && "FeatureCollection" != t.type) throw new Error("the provided para is not a 'Feature' type in the path.area.");
                var e, i, n;
                if(null != t.geometry && "Polygon" == t.geometry.type) {
                    n = t.geometry.coordinates[0];
                    var r = this._polygonSignedArea(n),
                        a = this._CxCy(n);
                    e = a[0] / 6 / r;
                    i = a[1] / 6 / r;
                    return [e, i]
                }
                if(null != t.geometry && "MultiPolygon" == t.geometry.type) {
                    var s = this._getMaxAreaIndexFromMultiPolygon(t.geometry.coordinates);
                    n = t.geometry.coordinates[s][0];
                    var r = this._polygonSignedArea(n),
                        a = this._CxCy(n);
                    e = a[0] / 6 / r;
                    i = a[1] / 6 / r;
                    return [e, i]
                }
                if("FeatureCollection" == t.type) {
                    var o = this.bounds(t);
                    return [(o.left + o.right) / 2, (o.top + o.bottom) / 2]
                }
                return [0, 0]
            }
        }, [r("_projection"), r("_bounds")]));
    return a
}, 571, 566, 747, 679);
I$(569, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f, p, _, m, g, v, y, b, x, $, w, k, S) {
    function C(t, e) {
        var i = e.type(),
            n = t.type();
        return y.barDirection[n][i]
    }

    function T(t) {
        return function(e) {
            for(var i = [], n = 0; n < t.length; n++) {
                i[n] = [];
                for(var r = 0; r < t[n].length; r++) i[n][r] = e(n, r, t[n][r])
            }
            return i
        }
    }

    function E(t, e) {
        function i(t, e, i, a) {
            var s;
            if("x" == a) s = 0;
            else s = 1;
            t.map(function(t) {
                var a = t.coord,
                    o = h(a, s);
                if(o && !d[o.index][i]) {
                    var l = n.find(e, function(t) {
                            return t.field == o.field
                        }),
                        c = {
                            type: o.type,
                            domain: l.value,
                            domainMode: "fitNumber" == o.domainMode ? "fitNumber" : "niceNumber",
                            reverse: o.reverse,
                            minStep: o.minStep
                        },
                        u = r.createScale(c);
                    d[o.index][i] = u
                }
            })
        }

        function a(t, e, i, n) {
            var r, a, s, o;
            t.map(function(t) {
                if("x" == i) {
                    r = 1;
                    a = 0;
                    s = "xAxis"
                } else {
                    r = 0;
                    a = 1;
                    s = "yAxis"
                }
                if(t.dim != r) {
                    o = n.getProp(s, t.className);
                    var l = t.coord,
                        c = h(l, a),
                        u = y.AxisPositionHash[t.dim][t.orient],
                        _ = d[c.index][e],
                        m = o.tick.number ? o.tick.number : "discrete" == _.type() ? ["count", 1 / 0] : ["density", o.tick.density],
                        g = {
                            number: m,
                            size: o.tick.size
                        },
                        v = o.caption,
                        b = "" == t.caption ? void 0 : t.caption,
                        x = {
                            align: v.align,
                            orient: v.orient,
                            text: b
                        },
                        $ = {
                            full: o.label.full,
                            adapter: o.label.adapter,
                            format: t.format ? t.format : function(t) {
                                return t
                            }
                        },
                        w = Object.create(t);
                    w.orient = u;
                    w.scale = _;
                    w.caption = x;
                    w.tick = g;
                    w.label = $;
                    w.className = t.className;
                    w.forceHidden = void 0 == t.forceHidden ? !1 : t.forceHidden;
                    w.fieldName = c.field || "";
                    var k = f.preprocessAxis(w, n);
                    p[u].push(k)
                }
            })
        }
        var s = t.setting && t.setting.textTable,
            o = t.domainMatrix,
            l = t.cells,
            c = t.coords,
            u = t.scales,
            d = {},
            h = r.getScaleOptionByCoordNameFac(c, u);
        c.map(function(t, e) {
            var i = h(e, [0, 1]);
            i.map(function(t) {
                if(t && !d[t.index]) d[t.index] = []
            })
        });
        for(var p = {
            left: [],
            top: [],
            right: [],
            bottom: []
        }, _ = "x", m = o[0][0][0].length, g = 0; g < o[0].length; g++)
            for(var v = 0; v < o[0][g][0].length; v++) {
                var b = m * g + v,
                    x = o[0][g][0][v].x,
                    $ = l[0][v],
                    w = $.axes || [],
                    k = $.marks || [];
                i(k, x, b, _);
                a(w, b, _, e)
            }
        for(var _ = "y", S = o[0][0].length, g = 0; g < o.length; g++)
            for(var v = 0; v < o[g][0].length; v++) {
                var C = S * g + v,
                    T = o[g][0][v][0].y,
                    $ = l[v][0],
                    w = $.axes || [],
                    k = $.marks || [];
                i(k, T, C, _);
                a(w, C, _, e)
            }
        if("Babel" == t.type) {
            var E = p.left.length > 0 ? p.left : p.right,
                I = p.bottom.length > 0 ? p.bottom : p.top;
            if(!s)[I, E].forEach(function(e) {
                if(e && e[0] && "continuous" == e[0].scale.type()) e.tickGrid = "mobile" == t.platform ? !1 : !0
            });
            else [I, E].forEach(function(t) {
                if(t && t[0] && "discrete" == t[0].scale.type()) {
                    t.tableGrid = !0;
                    t.forEach(function(t) {
                        t.tableGrid = !0
                    })
                }
            })
        } else {
            if(t.data.xGrid) {
                p.bottom.tickGrid = !0;
                p.top.tickGrid = !0
            }
            if(t.data.yGrid) {
                p.left.tickGrid = !0;
                p.right.tickGrid = !0
            }
        }
        return {
            commonAxisInfos: p,
            commonAxisScaleHash: d
        }
    }

    function I(t) {
        var e = {};
        if(t.statistics)
            for(var i = t.statistics, n = 0; n < i.length; ++n)
                if(i[n].className) {
                    if("line" == i[n].type) e[i[n].className] = H;
                    if("area" == i[n].type) e[i[n].className] = W
                }
        if(t.cells)
            for(var n = 0; n < t.cells.length; ++n)
                for(var r = t.cells[n], a = 0; a < r.length; ++a) {
                    var s = r[a];
                    if(s.axes)
                        for(var o = 0; o < s.axes.length; ++o) {
                            var l = s.axes[o];
                            if(l.className)
                                if(0 == l.dim) e[l.className] = "xAxis";
                                else if(1 == l.dim) e[l.className] = "yAxis"
                        }
                    if(s.marks)
                        for(var o = 0; o < s.marks.length; o++) {
                            var c = s.marks[o];
                            if(c.className) e[c.className] = {
                                type: c.type,
                                isMark: !0,
                                which: {
                                    cellRow: n,
                                    cellCol: a,
                                    markIndex: o
                                }
                            }
                        }
                }
        if(t.graph) {
            var u = t.graph;
            if(u.className) e[u.className] = "graph"
        }
        var d = t.rowTitleTree,
            h = t.colTitleTree;
        if(d) {
            if(d.pivotAxis && d.pivotAxis.className) e[d.pivotAxis.className] = "pivotAxis";
            if(d.pivotAxisTitle && d.pivotAxisTitle.className) e[d.pivotAxisTitle.className] = "pivotAxisTitle"
        }
        if(h) {
            if(h.pivotAxis && h.pivotAxis.className) e[h.pivotAxis.className] = "pivotAxis";
            if(h.pivotAxisTitle && h.pivotAxisTitle.className) e[h.pivotAxisTitle.className] = "pivotAxisTitle"
        }
        return e
    }

    function A(t, e) {
        for(var i = t.data.dataSets, n = t.cells, a = t.coords, s = t.scales, o = r.getScaleOptionByCoordNameFac(a, s), l = 0; l < n.length; l++)
            for(var c = 0; c < n[l].length; c++) {
                var u = n[l][c].marks;
                u.map(function(t, e) {
                    var n, s, l, c, u = (i[0][0][t.from], t.coord),
                        d = r.getCoordByName(u, a).type;
                    if("cartesian" == d) {
                        var h = o(u, [0, 1]);
                        n = h[0] ? h[0].field : null;
                        s = h[1] ? h[1].field : null;
                        l = h[0] ? h[0].type : "constant";
                        c = h[1] ? h[1].type : "constant";
                        t.xField = n;
                        t.yField = s;
                        t.xType = l;
                        t.yType = c
                    }
                })
            }
    }

    function M(t, e) {
        function i(t, e) {
            var i = B(t, e),
                n = T(a)(i);
            return n
        }
        A(t, e);
        e.setclassTypeMap(I(t));
        var n = t.coords,
            r = n[0].type;
        t.chartType = r;
        var a = t.cells,
            s = t.scales;
        s.map(function(t, e) {
            t.index = e
        });
        var o = t.statistics,
            l = h.calculatePosScaleDomainPerRowCol(t),
            c = l.forbidCheckRange;
        t.domainMatrix = l;
        var u = t.data.dataSets,
            f = t.data.domains,
            v = l.sizeGlobalDomains,
            y = l.colorGlobalDomains,
            b = (P(v), P(y, "color"), t.data.isCommonAxis);
        e.update(t.theme, {
            cells: t.cells,
            colorScaleOption: l.colorGlobalDomains,
            sizeScaleOption: l.sizeGlobalDomains,
            radiusScaleOption: l.radiusGlobalDomains,
            shapeScaleOption: l.shapeGlobalDomains
        });
        var x, w = e.getLegendScales("color"),
            k = e.getLegendScales("size"),
            S = e.getLegendScales("radius"),
            C = e.getLegendScales("shape");
        if("cartesian" == r) {
            var M = E(t, e);
            t.data.commonAxisInfos = M.commonAxisInfos;
            x = N
        } else if("map" == r) x = L;
        var R = g(t.title, t.area, e);
        k = k.concat(S);
        var j = t.data && t.data.aliasMap ? t.data.aliasMap : null,
            O = _(R.remainingSpace, w, k, C, e, j, t.platform),
            F = m(O.remainingSpace, t.response, e, t.platform, O);
        t.dataArea = F.remainingSpace;
        for(var z = p(t, e), B = x(f, n, s, u, t, z, l, M, e), H = T(u)(i), W = 0; W < H.length; W++)
            for(var q = 0; q < H[W].length; q++) H[W][q].logicSpace = z.gSpaceMatrix[W][q].logicSpace;
        if(t.choose && t.choose.pointer) {
            H[0][0][0][0].marks[0].chooser = t.choose.pointer;
            H.needDragPie = !0
        }
        H.space = z.gSpaceMatrix.space;
        H.logicSpace = z.gSpaceMatrix.logicSpace;
        H.scrollLogicSpace = z.gSpaceMatrix.scrollLogicSpace;
        H.gridInfo = z.gSpaceMatrix.gridInfo;
        H.mainAxis = H[0][0][0][0].mainAxis;
        H.colorRects = z.gSpaceMatrix.colorRects;
        H.crossMark = z.gSpaceMatrix.crossMark;
        var G = l.colorGlobalDomains,
            U = l.sizeGlobalDomains,
            V = {
                chartType: r,
                forbidScrollBar: t.forbidScrollBar,
                setting: t.setting,
                pivotAxis: {
                    xPivotAxisInfo: z.xPivotAxisInfo,
                    yPivotAxisInfo: z.yPivotAxisInfo,
                    commonAxisInfos: z.commonAxisInfos,
                    isCommonAxis: b
                },
                area: t.area,
                colorScaleOption: G,
                sizeScaleOption: U,
                marksInfoMatrix: H,
                xScrollSpace: z.xScrollSpace,
                yScrollSpace: z.yScrollSpace,
                legendInfo: O,
                emphasisInfo: F,
                zoom: z.zoomInfo
            };
        V.choose = t.choose;
        V.response = t.response;
        if("cartesian" == r && !c) d.updateCellScaleRange(V);
        var Y = $(V.marksInfoMatrix, o);
        V.statisticsInfo = Y;
        var X = D(V.pivotAxis.commonAxisInfos, V.marksInfoMatrix.logicSpace, t);
        V.marksInfoMatrix.commonAxisGridInfos = X;
        window.__nevInnerData = V;
        if(t.data && t.data.aliasMap) V.aliasMap = t.data.aliasMap;
        return V
    }

    function D(t, e, i) {
        var n = i.setting && i.setting.textTable,
            r = {};
        for(var a in t) {
            var s = t[a];
            if(s.infos && (s.infos.tickGrid || s.infos.tableGrid)) {
                var o, l;
                if("left" == a || "right" == a) {
                    r[a] = [];
                    s.infos.map(function(t) {
                        for(var i = t.axisInfo.scale, s = t.logicSpace, c = n ? i.domain() : i.ticks(), u = "discrete" != i.type() && !n ? 0 : i.step() / 2 - B, d = 1; d < c.length; d++) {
                            var h = c[d];
                            o = {
                                x: e.x,
                                y: i.exec(h) + s.y + u
                            };
                            l = {
                                x: e.x + e.width,
                                y: o.y
                            };
                            r[a].push([o, l])
                        }
                    })
                } else {
                    r[a] = [];
                    s.infos.map(function(t) {
                        for(var i = t.axisInfo.scale, s = n ? i.domain() : i.ticks(), c = t.logicSpace, u = "discrete" != i.type() && !n ? 0 : i.step() / 2 - B, d = 0; d < s.length - 1; d++) {
                            var h = s[d];
                            o = {
                                x: i.exec(h) + c.x + u,
                                y: e.y
                            };
                            l = {
                                x: o.x,
                                y: e.y + e.height
                            };
                            r[a].push([o, l])
                        }
                    })
                }
            } else;
        }
        r.type = n ? "tableGrid" : "axisGrid";
        return r
    }

    function P(t, e) {
        for(var i = [], n = 0; n < t.length; n++) {
            i[n] = [];
            for(var a = 0; a < t[n].length; a++) {
                var s = [];
                i[n][a] = s;
                for(var o = t[n][a], l = 0; l < o.length; l++) {
                    var c = o[l];
                    if(c) {
                        var u = {
                                type: c.type,
                                domain: c.value,
                                name: c.field
                            },
                            d = r.createScale(u, e);
                        s[l] = d;
                        s[l + "used"] = !1
                    } else s[l] = null
                }
            }
        }
        return i
    }

    function N(t, e, i, u, d, h, f, p, _) {
        var m, g = p.commonAxisScaleHash,
            v = p.commonAxisInfos,
            x = h.gSpaceMatrix,
            $ = f.groupGlobalDomains,
            w = (f.sizeGlobalDomains, f.colorGlobalDomains, r.getScaleOptionByCoordNameFac(e, i)),
            k = d.data.isCommonAxis,
            S = P($);
        return function(t, i) {
            var d, h, p, $, T, E, I, A = x[t][i],
                M = f[t][i];
            return function(f, x, D) {
                function P(t, e) {
                    var i = [],
                        n = t.axes ? t.axes : [];
                    n.map(function(t) {
                        var n, r = y.AxisPositionHash[t.dim][t.orient],
                            a = e[r];
                        if("top" == r || "bottom" == r) {
                            n = v[r][z];
                            var s = n.scale.ticksCount();
                            d.ticksCount(s)
                        } else {
                            n = v[r][B];
                            var s = n.scale.ticksCount();
                            h.ticksCount(s);
                            n.scale = h
                        }
                        n.fixedDimension = a;
                        i.push(n)
                    });
                    return i
                }
                var N = A[f][x],
                    L = M[f][x],
                    j = {},
                    z = i * M[0].length + x,
                    B = t * M.length + f,
                    H = D.marks.map(function(v, y) {
                        var A = _.getProp(v.type, v.className),
                            M = w(v.coord, [0, 1]),
                            P = r.getCoordByName(v.coord, e).dims,
                            H = M[0],
                            W = M[1];
                        p = H ? H.field : null;
                        $ = W ? W.field : null;
                        v.coord;
                        if(H)
                            if(!k) {
                                var q = L.x[y].value;
                                E = {
                                    type: H.type,
                                    name: H.name,
                                    reverse: H.reverse,
                                    domain: q,
                                    domainMode: "fitNumber" == W.domainMode ? "fitNumber" : "niceNumber",
                                    range: r.getDoubleDiscreteSizeRange(N.marklogicSpace, D.axes, "x")
                                };
                                d = r.createScale(E);
                                j[P[0]] = d
                            } else d = g[H.index][z];
                        else {
                            E = {
                                type: "constant",
                                range: r.getDoubleDiscreteSizeRange(N.marklogicSpace, v.axes, "x")
                            };
                            d = r.createScale(E)
                        }
                        if(W)
                            if(!k) {
                                var G = L.y[y].value;
                                I = {
                                    type: W.type,
                                    name: W.name,
                                    reverse: H.reverse,
                                    domain: G,
                                    domainMode: "fitNumber" == W.domainMode ? "fitNumber" : "niceNumber",
                                    range: r.getDoubleDiscreteSizeRange(N.marklogicSpace, D.axes, "y")
                                };
                                h = r.createScale(I);
                                j[P[1]] = h
                            } else h = g[W.index][B];
                        else {
                            I = {
                                type: "constant",
                                range: [N.marklogicSpace.y + N.marklogicSpace.height, N.marklogicSpace.y]
                            };
                            h = r.createScale(I)
                        }
                        if(!m) {
                            var U = C(d, h);
                            m = "vert" == U ? "x" : "y"
                        }
                        var V, Y = u[t][i][v.from],
                            X = r.createDataByPrototype(Y),
                            K = b(p, $),
                            J = n.filter(X, K),
                            Z = v.text;
                        if(Z) V = r.transformToFunction(Z, function(t) {
                            return ["Abc"]
                        });
                        var Q = v.animation && v.animation.idField,
                            tt = Object.create(v),
                            et = {
                                xScale: d,
                                yScale: h,
                                xField: p,
                                yField: $,
                                coordType: "cartesian",
                                className: v.className,
                                data: J,
                                idField: Q,
                                colorField: v.color,
                                text: V,
                                shape: v.shape ? v.shape : void 0,
                                strokeScaleInvariant: A.mark.strokeScaleInvariant
                            };
                        tt = n.extend(tt, et);
                        var it;
                        T = v.size;
                        if("bar" == v.type) {
                            tt.direction = v.direction ? v.direction : C(d, h);
                            tt.sizeField = T;
                            it = a(tt, N.marklogicSpace, A);
                            var nt = it.baseScale,
                                rt = (it.groupField, S[f][x][y]);
                            if(rt && !S[f][x][y + "used"]) {
                                var at = r.getOffsetScaleRange(nt, tt.outerPadding);
                                rt.rangeBands(at);
                                S[f][x][y + "used"] = !0
                            }
                            it.offsetScale = rt;
                            O(A.size, L.size, it, d, h, rt, y)
                        } else if("pie" == v.type) {
                            tt.sizeField = v.size;
                            var st = A.radius,
                                ot = A.size;
                            R(v, tt, L, d, h, st, ot);
                            it = s(tt, N.marklogicSpace, A)
                        } else if("scatter" == v.type || "text" == v.type) {
                            if("text" != v.type) tt.labelPosition = null == v.labelPosition ? A.label.position : v.labelPosition;
                            F(A.size, v, tt, d, h);
                            it = o(tt, N.marklogicSpace, A)
                        } else if("line" == v.type || "gradientLine" == v.type) {
                            tt.labelPosition = null == v.labelPosition ? A.label.position : v.labelPosition;
                            tt.smooth = null == v.smooth ? A.line.smooth : v.smooth;
                            tt.markHidden = null == v.markHidden ? A.mark.hidden : v.markHidden;
                            tt.gradient = "gradientLine" == v.type || v.gradient ? !0 : !1;
                            F(A.size, v, tt, d, h);
                            it = l(tt, N.marklogicSpace, A)
                        } else if("area" == v.type) {
                            tt.labelPosition = null == v.labelPosition ? A.label.position : v.labelPosition;
                            tt.smooth = null == v.smooth ? A.line.smooth : v.smooth;
                            tt.markHidden = null == v.markHidden ? A.mark.hidden : v.markHidden;
                            tt.lineHidden = null == v.lineHidden ? A.line.hidden : v.lineHidden;
                            F(A.size, v, tt, d, h);
                            it = c(tt, N.marklogicSpace, A)
                        }
                        return it
                    }),
                    W = [];
                if(!k) W = P(D, N);
                return {
                    marks: H,
                    axis: W,
                    mainAxis: m,
                    logicSpace: N.logicSpace,
                    marklogicSpace: N.marklogicSpace
                }
            }
        }
    }

    function L(t, e, i, a, l, c, d, h, f) {
        function p(t, e) {
            t.index;
            m = w.create({});
            var i = k.create({}).projection(m),
                n = t.data,
                r = i.bounds(n),
                a = [
                    [r.left, r.top],
                    [r.right, r.bottom]
                ],
                s = {
                    x: e.x,
                    y: e.y,
                    width: e.width,
                    height: e.height
                },
                o = m.constraint(a, s);
            m.scale(o.scale).translate(o.translate);
            return i
        }
        var _, m, g, v, b = c.gSpaceMatrix,
            $ = r.getScaleOptionByCoordNameFac(e, i),
            S = {};
        return function(t, i) {
            var l, c, h, w = b[t][i],
                k = d[t][i];
            return function(d, b, C) {
                var T, E, I, A = w[d][b],
                    M = k[d][b],
                    D = A.marklogicSpace;
                if(C.map) {
                    var P = C.map.coord,
                        N = e[P],
                        L = $(P);
                    if(S[L.index]) _ = S[L.index];
                    else {
                        _ = p(N, D);
                        S[L.index] = _
                    }
                    m = _.projection();
                    if(L.ratio && L.center) {
                        E = L.center;
                        I = Number(L.ratio);
                        I = I > .2 ? I : .2;
                        m.scale(m.scale() * I);
                        m.center(E.pixelCenter, E.geoCenter)
                    }
                    T = {
                        path: _,
                        text: C.map.text,
                        data: N.data.features
                    }
                }
                var j = C.marks.map(function(d, b) {
                    var w = f.getProp(d.type, d.className),
                        k = a[t][i][d.from],
                        C = r.createDataByPrototype(k);
                    g = d.longitude ? d.longitude : y.LONGITUDE;
                    v = d.latitude ? d.latitude : y.LATITUDE;
                    var T = x(g, v),
                        E = n.filter(C, T);
                    P = d.coord;
                    N = e[P];
                    d.geo;
                    L = $(P);
                    if(S[P]) _ = S[P];
                    else {
                        _ = p(N, D);
                        S[L.index] = _
                    }
                    h = d.type;
                    l = m.xScale();
                    c = m.yScale();
                    var I, A = d.text;
                    if(A || "text" == h) I = r.transformToFunction(A, function(t) {
                        return ["Abc"]
                    });
                    var j = d.animation && d.animation.idField,
                        O = {
                            path: _,
                            data: E,
                            geojson: N.data,
                            geo: d.geo,
                            coordType: "map",
                            projectionScale: m,
                            xField: g,
                            yField: v,
                            xScale: l,
                            yScale: c,
                            idField: j,
                            sizeField: d.size,
                            colorField: d.color,
                            radiusField: d.radius,
                            text: I,
                            strokeScaleInvariant: w.mark.strokeScaleInvariant
                        },
                        z = Object.create(d);
                    z = n.extend(z, O);
                    if("path" == h || "map" == h) u(z, D, w);
                    else if("scatter" == h || "text" == h) {
                        if("text" != h) z.labelPosition = null == d.labelPosition ? w.label.position : d.labelPosition;
                        F(w.size, d, z, l, c);
                        markAnalysised = o(z, D, w)
                    } else if("pie" == h) {
                        z.sizeField = d.size;
                        var B = w.radius;
                        w.size;
                        R(d, z, M, l, c, B);
                        markAnalysised = s(z, D, w)
                    } else throw new Error("地图暂不支持图表类型为" + h + "的图表");
                    return z
                });
                return {
                    marks: j,
                    map: T,
                    logicSpace: A.logicSpace,
                    marklogicSpace: D
                }
            }
        }
    }

    function R(t, e, i, a, s, o, l) {
        var c, u, d = o && o.ratio ? o.ratio : 0,
            h = l && l.ratio ? l.ratio : 0,
            f = Math.max(d, h);
        f = f <= 0 ? 1 : f;
        u = t.radius;
        e.radiusField = u;
        if(u) {
            var p = n.find(i.radius, function(t) {
                    return t.field == u
                }),
                _ = j(a, s);
            c = {
                type: p.type,
                domain: p.value,
                range: _
            }
        } else {
            var _ = j(a, s);
            c = {
                type: "constant",
                range: [0, 2 * _[1]]
            }
        }
        if(null == u || null == o) {
            o = r.createScale(c);
            o.ratio = f
        } else {
            o.domain(c.domain);
            o.range(c.range);
            o.ratio = f
        }
        e.radiusScale = o
    }

    function j(t, e) {
        var i, n, r;
        if("continuous" != t.type()) i = Math.abs(t.step()) / 2;
        else {
            r = t.range();
            i = .05 * Math.abs(r[1] - r[0])
        }
        if("continuous" != e.type()) n = Math.abs(e.step()) / 2;
        else {
            r = e.range();
            n = .05 * Math.abs(r[1] - r[0])
        }
        var a = 3 * Math.min(i, n) / 5;
        a = a < 5 ? 5 : a;
        a *= y.radiusOffsetRatio;
        return [y.pieBaseRadius, a]
    }

    function O(t, e, i, a, s, o, l) {
        var c, u, d, h, f, p = i.sizeField,
            _ = !1,
            m = t ? "number" != typeof t.ratio ? 1 : t.ratio : 1;
        if("continuous" != a.type() && "continuous" != s.type() && !p) {
            p = y.doubleDiscreteDefaultSizeFieldName + l;
            _ = !0
        }
        if(t && "constant" != t.type() || _) {
            c = r.getBarSizeRange(a, s, o, m);
            u = c;
            if(_) {
                var g = n.find(e, function(t) {
                        return t && t.field == p
                    }),
                    g = e[l];
                d = {
                    type: g.type,
                    domain: g.value
                };
                t = r.createScale(d)
            }
            if("discrete" == t.type()) t.rangeBands(u);
            else t.range(u);
            h = t
        } else {
            f = o.step();
            u = [0, 2 * f * m];
            if(!t) {
                d = {
                    type: "constant",
                    range: u
                };
                h = r.createScale(d)
            } else {
                if("discrete" == t.type()) t.rangeBands(u);
                else t.range(u);
                h = t
            }
        }
        h.ratio = m;
        i.sizeScale = h
    }

    function F(t, e, i, n, a) {
        var s, o, l, c;
        o = e.size;
        var u, d, c = e.type,
            h = i.coordType,
            f = t ? "number" != typeof t.ratio ? 1 : t.ratio : 1;
        if(t && "constant" != t.type()) {
            d = z(n, a, t.meta, c, h);
            u = [f * d[0], f * d[1]];
            t.range(u);
            l = t
        } else {
            d = z(n, a, {
                maxCount: 1
            }, c, h);
            if(t) {
                u = [0, 2 * f * d[0]];
                t.range(u);
                l = t
            } else {
                s = {
                    type: "constant",
                    range: [0, 2 * d[0]]
                };
                l = r.createScale(s)
            }
        }
        i.sizeField = o;
        i.sizeScale = l
    }

    function z(t, e, i, n, r) {
        var a, s, o = "cartesian" == r;
        if("continuous" != t.type()) a = t.step();
        else {
            var l = t.range();
            a = Math.abs(l[0] - l[1]) * (o ? y.xContinuousDensityRatio : .05)
        }
        if("continuous" != e.type()) s = e.step();
        else {
            var l = e.range();
            s = Math.abs(l[0] - l[1]) * (o ? y.yContinuousDensityRatio : .05)
        }
        var c = (a > s ? s : a) / 2;
        if(i && null != i.maxCount) c /= i.maxCount;
        c *= y.sizeOffsetRatio;
        switch(n) {
            case "scatter":
                start = y.scatterBaseSize;
                break;
            case "line":
                start = y.lineBaseRadius;
                break;
            case "area":
                start = y.areaBaseRadius;
                break;
            case "text":
                start = y.textBaseSize;
                break;
            default:
                start = 2
        }
        var u = c / start < 2 ? 2 : c / start;
        return [1, u]
    }
    var B = (y.AxisPositionHash, y.textTableCanvasMargin),
        H = ["statisticLine"],
        W = ["statisticArea"];
    return {
        convertUDDataToInnerData: M
    }
}, 651, 661, 662, 656, 654, 663, 664, 665, 666, 667, 668, 669, 657, 670, 671, 672, 673, 674, 571, 675, 676, 677, 678, 679, 680, 681);
I$(812, function(t, e, i, n, r, a, s) {
    function o(t) {
        if("invisible" == t) return function(t, e) {
            return t && e
        };
        else return function(t, e) {
            return e
        }
    }

    function l(t, i, n, r, a, s) {
        var l, u, h = a.getProp(t.type, t.className),
            f = t.xScale,
            p = t.yScale,
            _ = t.xField,
            m = t.yField,
            g = (t.baseField, t.colorField, t.colorScale, t.direction),
            v = t.offsetScale,
            y = t.groupField,
            b = t.sizeScale,
            x = t.sizeField;
        o("invisible");
        if("horiz" == g) l = e.getOffsetScaleRange(p, t.outerPadding);
        else l = e.getOffsetScaleRange(f, t.outerPadding);
        v.rangeBands(l);
        u = v.step() * (1 - t.innerPadding / 2);
        var $ = d("mark").apply(i);
        $.each(function(t, e) {
            var i, n, r, a, s, o = t.dynamicProperty("data");
            if("horiz" == g) {
                if("continuous" != f.type() && "continuous" != p.type()) {
                    a = p.exec(o[m]);
                    if(null != y) a += v.exec(o[y]);
                    i = b.exec(o["layout_end"]) - b.exec(o["layout_start"]);
                    r = f.exec(o[_]) + b.exec(o["layout_start"]);
                    var l = null == b.ratio ? 1 : b.ratio;
                    n = u * l
                } else if("continuous" == f.type()) {
                    a = p.exec(o[m]);
                    if(null != y) a += v.exec(o[y]);
                    i = f.exec(o["layout_end"]) - f.exec(o["layout_start"]);
                    r = f.exec(o["layout_start"]);
                    n = b.exec(o[x])
                }
                if(i < 0) {
                    i = -i;
                    s = {
                        ratiox: 1,
                        ratioy: .5
                    }
                } else s = {
                    ratiox: 0,
                    ratioy: .5
                }
            } else {
                if("continuous" == p.type()) {
                    n = p.exec(o["layout_start"]) - p.exec(o["layout_end"]);
                    r = f.exec(o[_]);
                    if(null != y) r += v.exec(o[y]);
                    a = p.exec(o["layout_start"]);
                    i = b.exec(o[x])
                } else {
                    n = b.exec(o["layout_start"]) - b.exec(o["layout_end"]);
                    r = f.exec(o[_]);
                    if(null != y) r += v.exec(o[y]);
                    a = b.exec(o["layout_start"]);
                    i = u
                }
                if(n < 0) {
                    n = -n;
                    s = {
                        ratiox: .5,
                        ratioy: 0
                    }
                } else s = {
                    ratiox: .5,
                    ratioy: 1
                }
            }
            t.setratioAnchor(s);
            t.sety(a);
            t.setx(r);
            t.setwidth(n && i);
            t.setheight(i && n);
            t.setfixBlur(!0);
            t.setlineWidth(1)
        });
        if(t.text) {
            var w = h.label,
                k = w.orient,
                S = w.autoHidden,
                C = (w.alwaysShowStateMap, "inner" == w.position ? "waist" : w.position),
                T = d("label").apply(i);
            c($, T, g, S, k, C, t.text || w.text, w, t, n)
        }
    }

    function c(t, e, n, r, a, s, o, l, c, d) {
        var h, f, p = u(n, a, s, e, o),
            _ = ["left-head", "head", "right-head", "left", "waist", "right", "left-foot", "foot", "right-foot"];
        if("horiz" == n) {
            f = "width";
            h = function(t, e, i) {
                var n, r, n = t.ratioAnchor().ratiox,
                    l = 1 == n,
                    c = l ? -1 : 1;
                if("top" == s) {
                    if("horizontal" == a) {
                        n = l ? 1 : 0;
                        r = .5
                    } else {
                        n = .5;
                        r = l ? 0 : 1
                    }
                    p(function(t) {
                        return t.width * c
                    }, function(t) {
                        return 0
                    }, n, r, t, e, i)
                } else {
                    for(var u = l ? [6, 0, -6] : [-6, 0, 6], d = l ? [-6, 0, 6] : [6, 0, -6], h = l ? [-1, -.5, 0] : [1, .5, 0], f = l ? [.5, 0, -.5] : [-.5, 0, .5], m = l ? [1, .5, 0] : [0, .5, 1], g = l ? [0, .5, 1] : [1, .5, 0], v = l ? [0, .5, 1] : [1, .5, 0], y = l ? [0, .5, 1] : [1, .5, 0], b = 1, x = 1, $ = 0; $ < _.length; $++)
                        if(_[$] == s) {
                            x = $ % 3;
                            b = Math.floor($ / 3)
                        }! function() {
                        var i = o(e.dynamicProperty("data"));
                        e.settexts(i);
                        if("vertical" == a) e.setrotation(-Math.PI / 2);
                        else e.setrotation(0);
                        if(l) {
                            var n = t.x() + t.width() * h[b] + u[b],
                                r = t.y() + t.height() * f[x] + d[x];
                            if(0 === b && n + e.width() / 2 > t.x() - t.width() / 2 || 2 === b && n - e.width() / 2 < t.x() - t.width() / 2) b = 1;
                            if(0 === x && r - e.height() / 2 < t.y() || 2 === x && r + e.height() / 2 > t.y()) x = 1
                        } else {
                            var n = t.x() + t.width() * h[b] + u[b],
                                r = t.y() + t.height() * f[x] + d[x];
                            if(0 === b && n - e.width() / 2 < t.x() + t.width() / 2 || 2 === b && n + e.width() / 2 > t.x() + t.width() / 2) b = 1;
                            if(0 === x && r + e.height() / 2 > t.y() || 2 === x && r - e.height() / 2 < t.y()) x = 1
                        }
                    }();
                    if("horizontal" == a) {
                        n = g[b];
                        r = m[x]
                    } else {
                        n = y[x];
                        r = v[b]
                    }
                    p(function(t) {
                        return t.width * h[b] + u[b]
                    }, function(t) {
                        return t.height * f[x] + d[x]
                    }, n, r, t, e, i)
                }
            }
        } else {
            f = "height";
            h = function(t, e, i) {
                var n, r, r = t.ratioAnchor().ratioy,
                    l = 0 == r,
                    c = l ? -1 : 1;
                if("top" == s) {
                    if("horizontal" == a) {
                        n = .5;
                        r = l ? 0 : 1
                    } else {
                        n = l ? 1 : 0;
                        r = .5
                    }
                    p(function() {
                        return 0
                    }, function(t) {
                        return -t.height * c
                    }, n, r, t, e, i)
                } else {
                    for(var u = l ? [-6, 0, 6] : [6, 0, -6], d = l ? [-6, 0, 6] : [6, 0, -6], h = l ? [.5, 0, -.5] : [-.5, 0, .5], f = l ? [1, .5, 0] : [-1, -.5, 0], m = l ? [1, .5, 0] : [0, .5, 1], g = l ? [1, .5, 0] : [0, .5, 1], v = l ? [0, .5, 1] : [1, .5, 0], y = l ? [1, .5, 0] : [0, .5, 1], b = 1, x = 1, $ = 0; $ < _.length; $++)
                        if(_[$] == s) {
                            b = $ % 3;
                            x = Math.floor($ / 3)
                        }! function() {
                        var i = o(e.dynamicProperty("data"));
                        e.settexts(i);
                        if("vertical" == a) e.setrotation(-Math.PI / 2);
                        else e.setrotation(0);
                        if(l) {
                            var n = t.x() + t.width() * h[b] + u[b],
                                r = t.y() + t.height() * f[x] + d[x];
                            if(0 === b && n + e.width() / 2 < t.x() || 2 === b && n - e.width() / 2 > t.x()) b = 1;
                            if(0 === x && r - e.height() / 2 < t.y() + t.height() / 2 || 2 === x && r + e.height() / 2 > t.y() + t.height() / 2) x = 1
                        } else {
                            var n = t.x() + t.width() * h[b] + u[b],
                                r = t.y() + t.height() * f[x] + d[x];
                            if(0 === b && n + e.width() / 2 > t.x() || 2 === b && n - e.width() / 2 < t.x()) b = 1;
                            if(0 === x && r + e.height() / 2 > t.y() - t.height() / 2 || 2 === x && r - e.height() / 2 < t.y() - t.height() / 2) x = 1
                        }
                    }();
                    if("horizontal" == a) {
                        n = m[b];
                        r = g[x]
                    } else {
                        n = v[x];
                        r = y[b]
                    }
                    p(function(t) {
                        return t.width * h[b] + u[b]
                    }, function(t) {
                        return t.height * f[x] + d[x]
                    }, n, r, t, e, i)
                }
            }
        }
        var m = l.alwaysShowStateMap,
            g = l.showMode,
            v = c.idField;
        visiableLabels = {
            alwaysVisiableLabels: [],
            mayVisiableLabels: []
        }, extremum = {};
        if("minmax" === g) extremum = i.searchMinMax(e, o, v);
        else if("firstlast" === g) {
            var y = c.xScale,
                b = c.yScale,
                x = c.xField,
                $ = c.yField;
            if("discrete" === y.type() || "discrete" === b.type()) extremum = i.searchFirstLast(e, y, b, x, $, v);
            else g = "all"
        }
        t.each(function(t, n) {
            var a = e.getElement(0, n),
                s = [t, a],
                o = {
                    func: h,
                    args: s,
                    src: this
                };
            i.controlLabelToShow(a, t.bbox(), o, m, visiableLabels, extremum, g, r, v, d)
        });
        if(r) i.avoidLabelCollision(visiableLabels)
    }

    function u(t, e, i, n, r) {
        var a = "horiz" == t ? "width" : "height",
            s = {
                "left-head": !0,
                head: !0,
                "right-head": !0,
                left: !0,
                waist: !0,
                right: !0,
                "left-foot": !0,
                foot: !0,
                "right-foot": !0
            };
        return function(t, n, o, l, c, u, d) {
            var h = r(u.dynamicProperty("data"));
            u.settexts(h);
            if("vertical" == e) u.setrotation(-Math.PI / 2);
            else u.setrotation(0);
            var f = c.bbox(),
                p = f[a];
            if(d && s[i])
                if(p < u.treeBbox()[a]) {
                    u.sethidden(!0);
                    return
                }
            var _ = c.x() + t(f),
                m = c.y() + n(f);
            u.setx(_);
            u.sety(m);
            u.setratioAnchor({
                ratiox: o,
                ratioy: l
            })
        }
    }
    var d = (a.selection, a.selector.kind);
    a.selector.id, a.Rect;
    return l
}, 567, 654, 739, 652, 651, 566, 653);
I$(813, function(t, e, i, n) {
    function r(t, e) {
        if(t.x == t.y && 0 == t.x) return !1;
        if(e.x == e.y && 0 == e.x) return !1;
        var i = t.x >= e.x && t.x <= e.x + e.width && t.y >= e.y && t.y <= e.y + e.height,
            n = t.x + t.width >= e.x && t.x + t.width <= e.x + e.width && t.y >= e.y && t.y <= e.y + e.height,
            r = t.x >= e.x && t.x <= e.x + e.width && t.y + t.height >= e.y && t.y + t.height <= e.y + e.height,
            a = t.x + t.width >= e.x && t.x + t.width <= e.x + e.width && t.y + t.height >= e.y && t.y + t.height <= e.y + e.height;
        return i || n || r || a
    }

    function a(t, e, i) {
        var n, a = new Array;
        t.each(function(t, n) {
            a.push(t);
            var r = t.bbox();
            if(r.x < i.x) t.moveBy(-r.x, 0);
            if(r.x + r.width > i.x + i.width) t.moveBy(i.x + i.width - (r.x + r.width), 0);
            if(r.y < i.y || r.y + r.height > i.y + i.height) {
                t.settexts([]);
                t.setx(0);
                t.sety(0);
                if(e.size() > n) e.getElement(0, n).setpathElements([])
            }
        });
        for(var s = t.size(), o = 0; o < s; ++o) {
            n = a[o];
            if(!(null == n.texts() || n.texts().length <= 0)) {
                var l = n.bbox(),
                    c = n.dynamicProperty("data");
                if(c.showOrNot != -1)
                    for(var u = o + 1; u < s; ++u) {
                        var d = a[u].bbox(),
                            c = a[u].dynamicProperty("data"),
                            h = r(l, d),
                            f = r(d, l);
                        if((h || f) && 1 != c.showOrNot) {
                            a[u].settexts([]);
                            a[u].setx(0);
                            a[u].sety(0);
                            if(e.size() > u) e.getElement(0, u).setpathElements([])
                        }
                    } else {
                    n.settexts([]);
                    n.setx(0);
                    n.sety(0);
                    if(e.size() > o) e.getElement(0, o).setpathElements([])
                }
            } else;
        }
    }

    function s(t, e, i) {
        for(var n = t.cable, r = 0; null != n && r < n.length; r++) {
            n[r].x += e;
            n[r].y += i
        }
        var a = t.annotation;
        a.x += e;
        a.y += i
    }

    function o(t, e, i, n) {
        var r, o, l = t.xScale,
            d = t.yScale,
            h = t.xField,
            f = t.yField,
            p = (t.colorField, t.colorScale, c("mark").apply(e));
        p.each(function(t, e) {
            var i = t.dynamicProperty("data"),
                n = (i.piesNum, i.piesNumber, i.center, l.exec(i[h])),
                r = d.exec(i[f]);
            t.setx(n);
            t.sety(r);
            t.setProperty("startAngle", i.startAngle);
            t.setProperty("endAngle", i.endAngle);
            t.setProperty("innerradius", i.radius[0]);
            t.setProperty("outerradius", i.radius[1])
        });
        var _ = c("lead").apply(e),
            m = c("label").apply(e);
        m.each(function(t, e) {
            var i = _.getElement(0, e),
                n = t.dynamicProperty("data"),
                a = n.label,
                c = n.center,
                m = l.exec(n[h]),
                g = d.exec(n[f]);
            s(n, m - c.x, g - c.y);
            r = n.position;
            o = n.autoHidden;
            var v = p.getElement(0, e).fillStyle();
            if(!n.apply) t.settexts([]);
            else t.settexts(a);
            var y = (n.startAngle + n.endAngle) / 2;
            if(n.cable) {
                var b, x = n.cable;
                if("outer" == n.position && n.apply)
                    if(Math.cos(y) >= 0) b = [
                        ["M", x[0].x, x[0].y],
                        ["L", x[1].x, x[1].y],
                        ["Q", x[2].x, x[2].y, x[3].x - 1, x[3].y]
                    ];
                    else b = [
                        ["M", x[0].x, x[0].y],
                        ["L", x[1].x, x[1].y],
                        ["Q", x[2].x, x[2].y, x[3].x + 1, x[3].y]
                    ];
                else b = [];
                i.setpathElements(b);
                i.setstrokeStyle(v);
                t.setx(n.annotation.x);
                t.sety(n.annotation.y)
            } else {
                i.setpathElements([]);
                var m = l.exec(n[h]),
                    g = d.exec(n[f]),
                    $ = m + (n.radius[1] + u) * Math.cos(y),
                    w = g + (n.radius[1] + u) * Math.sin(y);
                t.setx($);
                t.sety(w)
            }
            if("inner" == n.position) t.setratioAnchor({
                ratiox: .5,
                ratioy: .5
            });
            else Math.cos(y) >= 0 ? t.setratioAnchor({
                ratiox: 0,
                ratioy: .5
            }) : t.setratioAnchor({
                ratiox: 1,
                ratioy: .5
            })
        });
        if(m.size() > 0 && o) a(m, _, i)
    }
    var l = (i.selection, i.selector),
        c = (i.Rect, l.kind),
        u = (l.id, 5);
    return o
}, 567, 652, 566);
I$(853, function(t, e, i, n) {
    function r(e, i, n) {
        var r = n && n.getProp(e.type, e.className),
            c = e.xScale,
            u = e.yScale,
            h = e.xField,
            f = e.yField,
            p = e.validData ? e.validData : e.data,
            _ = e.coordType;
        if("cartesian" == _) {
            if("scatter" == e.type || "text" == e.type || "line" == e.type || "gradientLine" == e.type || "continuous" != c.type() && "continuous" != u.type()) {
                h = e.xField;
                f = e.yField
            } else if("vert" == e.baseInfo.direction) {
                h = e.xField;
                f = "layout_end"
            } else {
                h = "layout_end";
                f = e.yField
            }
            if("continuous" != c.type() && "continuous" != u.type()) {
                var m = r && r.mark.xAlign,
                    g = r && r.mark.yAlign,
                    v = t.groupBy(p, function(t) {
                        return d(t[h], t[f])
                    }),
                    y = o(c, u, i);
                for(var b in v) {
                    for(var x = v[b], $ = y[b], w = [], k = 0; k < x.length; k++) {
                        var S = x[k].__layoutBBox;
                        if(S) w.push(S)
                    }
                    l(w, $, c.type(), u.type(), m, g)
                }
            } else s(p, c, u, h, f)
        } else if("map" == _) a(p, e.projectionScale, h, f);
        return e
    }

    function a(t, e, i, n) {
        var r;
        t.map(function(t, a) {
            if(t.__layoutBBox) {
                r = e.invert([t[i], t[n]]);
                t.__layoutBBox.x = r[0];
                t.__layoutBBox.y = r[1]
            }
        })
    }

    function s(t, e, i, n, r) {
        t.map(function(t, a) {
            if(t.__layoutBBox) {
                var s = e.exec(t[n]),
                    o = i.exec(t[r]);
                t.__layoutBBox.x = s;
                t.__layoutBBox.y = o
            }
        })
    }

    function o(t, e, i) {
        for(var n = t.domain(), r = e.domain(), a = (i.x, "constant" == t.type() ? i.width : t.step()), s = "constant" == e.type() ? i.height : e.step(), o = (i.y, {}), l = 0; l < n.length; l++)
            for(var c = 0; c < r.length; c++) {
                var u = d(n[l], r[c]),
                    h = t.exec(n[l]),
                    f = e.exec(r[c]),
                    p = {
                        x: h - a / 2,
                        y: f - s / 2,
                        width: a,
                        height: s
                    };
                o[u] = p
            }
        return o
    }

    function l(e, i, n, r, a, s) {
        var o, l = "width",
            d = "height",
            p = "x",
            _ = "y";
        if("discrete" == n && "constant" == r) {
            isR = !0;
            l = "height";
            d = "width";
            p = "y";
            _ = "x";
            var m = f[a];
            a = h[s];
            s = m
        }
        isT = !0;
        o = i;
        var g = {
                heightOffset: u + o[_],
                nextIndex: 0,
                accX: u
            },
            v = [];
        do {
            var y = c(e, g, o, p, _, l, d);
            g = y;
            v.push(y)
        } while (y.nextIndex < e.length);
        var b, x, $ = v[v.length - 1].heightOffset;
        t.max(v, function(t) {
            return t.accX
        }).accX;
        if("top" == s) b = 0;
        else if("bottom" == s) b = o[_] + o[d] - $;
        else b = (o[_] + o[d] - $) / 2;
        b = b > 0 ? b : 0;
        for(var w = 0, k = 0, S = 0; S < v.length; S++) {
            var y = v[S];
            if("left" == a) x = 0;
            else if("right" == a) x = o[p] + o[l] - y.accX;
            else x = (o[p] + o[l] - y.accX) / 2;
            if(y.heightOffset > o[_] + o[d] + u) k++;
            for(var C = w; C < y.nextIndex; C++) {
                var T = e[C];
                if(y.heightOffset > o[_] + o[d] + u) {
                    T.isOutOfSpace = !0;
                    T[p] += x;
                    T[_] = S < k ? o[_] + o[d] - u : v[S - k].heightOffset;
                    T[_] = T[_] < o[_] + o[d] ? T[_] : o[_] + o[d]
                } else {
                    T.isOutOfSpace = !1;
                    T[p] += x;
                    T[_] += b
                }
            }
            w = y.nextIndex
        }
        return v
    }

    function c(t, e, i, n, r, a, s) {
        for(var o, l = i.width, c = e.heightOffset, d = e.nextIndex, h = i[r] + c, f = u + i[n], p = 0, _ = -(1 / 0), m = 0, g = d; g < t.length && (f < l + i[n] || 0 == g); g++) {
            var v = t[g];
            o = f + v[a] / 2;
            v[n] = o;
            f += v[a] + u;
            _ = _ < v[s] ? v[s] : _;
            m++
        }
        if(1 != m && f > l + i[n]) {
            f -= v[a] + u;
            _ = v[s] > _ ? v[s] : _;
            g -= 1
        }
        h = c + _ / 2;
        for(var y = d; y < g; y++) t[y][r] = h;
        p += c + u + _;
        var b = {
            heightOffset: p,
            nextIndex: g,
            accX: f
        };
        return b
    }
    var u = n.shapePadding,
        d = e.composeValues,
        h = {
            top: "left",
            center: "center",
            bottom: "right"
        },
        f = {
            left: "top",
            center: "center",
            right: "bottom"
        };
    return r
}, 656, 654, 669, 675);
I$(814, function(t, e, i, n, r) {
    var a = (t.PRIVATE, e.selection),
        s = e.selector.kind,
        o = (e.Text, e.MultilineText),
        l = function(t, e) {
            if(t)
                if(e.length > 0)
                    for(var i = 0, n = e.length; i < n; ++i) {
                        var r = e[i];
                        if(r.mark) t.replaceWith(function(t, e) {
                            var i = t.dynamicProperty("data");
                            i.__layoutBBox.width = 21;
                            i.__layoutBBox.height = 12;
                            var n, a = (t.parent(), t.dynamicProperty("value")),
                                s = t.dynamicProperty("accValue"),
                                o = t.dynamicProperty("axisfields"),
                                l = t.dynamicProperty("graphic"),
                                c = t.dynamicProperty("chart"),
                                u = r.mark,
                                d = t.fillStyle() ? t.fillStyle() : t.strokeStyle(),
                                h = t.dynamicProperty("originObj");
                            t.dynamicProperty("lineDash");
                            if("function" == typeof u) n = u.call(t, i, e);
                            else n = u;
                            var f = t.dynamicProperty("kind"),
                                p = n.create();
                            p.setDynamicProperty("data", i);
                            p.setDynamicProperty("value", a);
                            p.setDynamicProperty("accValue", s);
                            p.setDynamicProperty("axisfields", o);
                            p.setDynamicProperty("kind", f);
                            p.setDynamicProperty("chart", c);
                            p.setfillStyle(d);
                            p.setDynamicProperty("originObj", h);
                            p.setx(t.x());
                            p.sety(t.y());
                            p.setz(t.z());
                            p.setDynamicProperty("graphic", l);
                            i.innerMark = p;
                            p.setscale({
                                sx: 1,
                                sy: 1
                            });
                            return p
                        });
                        if(r.style) t.setProperty(r.style)
                    } else t.replaceWith(function() {
                    return e
                })
        },
        c = [{
            selector: s("scatter"),
            mark: o,
            style: {
                texts: ["···"],
                styles: [{
                    font: {
                        size: 20
                    }
                }]
            }
        }],
        u = function(t, e, o, u, d, h) {
            n(t, o, d);
            var f = (t.colorScale, t.colorField, d.getProp(t.type, t.className)),
                p = t.labelPosition,
                _ = t.strokeScaleInvariant,
                m = s("mark").apply(e);
            m.each(function(e, i) {
                var n = e.dynamicProperty("data"),
                    s = n.__layoutBBox;
                if("text" == t.type) {
                    var o = t.text(n);
                    e.settexts(o)
                }
                if("scatter" == t.type && null != t.shapeScale) {
                    var u = t.shape,
                        d = t.shapeScale,
                        h = d.exec(n[u]),
                        f = r(d.kind, h);
                    e.setpathElements(f)
                }
                var p = null == n.__scaleRatio ? 1 : n.__scaleRatio;
                if(s.isOutOfSpace) {
                    p = 1;
                    var m = a.select(e);
                    l(m, c);
                    e = m.getElement(0, 0)
                }
                e.setx(s.x);
                e.sety(s.y);
                e.setscale({
                    sx: p,
                    sy: p
                });
                e.setstrokeScaleInvariant(_);
                e.setratioAnchor({
                    ratiox: .5,
                    ratioy: .5
                })
            });
            if(t.text && "text" != t.type) {
                var g = s("label").apply(e),
                    v = "map" != t.coordType,
                    y = t.idField,
                    b = f.label,
                    x = b.alwaysShowStateMap,
                    $ = b.showMode,
                    w = b.autoHidden,
                    k = t.text || f.text,
                    S = {
                        alwaysVisiableLabels: [],
                        mayVisiableLabels: []
                    },
                    C = {};
                if("minmax" === $) C = i.searchMinMax(g, k, y);
                else if("firstlast" === $) {
                    var T = t.xScale,
                        E = t.yScale,
                        I = t.xField,
                        A = t.yField;
                    if("discrete" === T.type() || "discrete" === E.type()) C = i.searchFirstLast(g, T, E, I, A, y);
                    else $ = "all"
                }
                g.each(function(e, n) {
                    var r = e.dynamicProperty("data"),
                        a = t.text(r),
                        s = r.__layoutBBox,
                        o = [e, s, a, p, u, v],
                        l = {
                            func: i.layoutText,
                            args: o,
                            src: this
                        };
                    i.controlLabelToShow(e, s, l, x, S, C, $, w, y, u)
                });
                if(w) i.avoidLabelCollision(S)
            }
        };
    return u
}, 571, 566, 739, 853, 704);
I$(854, function() {
    var t = function() {
            var t = 0,
                e = arguments.length,
                i = arguments;
            i[0].map(function(t, n) {
                for(var r = 1, a = -1; ++a < e;) r *= i[a][n];
                return r
            }).map(function(e) {
                t += e
            });
            return t
        },
        e = function(e, n, r) {
            var a = t(e, n),
                s = a / i(e) / i(n),
                o = Math.acos(s);
            if("angle" == r) o = o / Math.PI * 180;
            return o
        },
        i = function(t) {
            var e = 0;
            t.map(function(t) {
                e += t * t
            });
            e = Math.sqrt(e);
            return e
        },
        n = function(t) {
            var e = i(t);
            return t.map(function(t) {
                return t / e
            })
        },
        r = function(t, e) {
            var i = arguments.length,
                n = arguments;
            return n[0].map(function(t, e) {
                for(var r = 1, a = -1; ++a < i;) r *= n[a][e];
                return r
            })
        },
        a = function() {
            var t = arguments.length,
                e = arguments;
            return e[0].map(function(i, n) {
                for(var r = 0, a = -1; ++a < t;) r += e[a][n];
                return r
            })
        },
        s = function() {
            var t = arguments.length,
                e = arguments;
            return e[0].map(function(i, n) {
                for(var r = e[0][n], a = -1; ++a < t;)
                    if(0 != a) r -= e[a][n];
                    else;
                return r
            })
        },
        o = function(t, e) {
            var i = Math.cos(e),
                n = Math.sin(e),
                r = [t[0] * i - t[1] * n, t[0] * n + t[1] * i];
            return r
        },
        l = function(t, e) {
            return t.map(function(t) {
                return t * e
            })
        };
    return {
        vectorScale: l,
        vectorLength: i,
        vectorSub: s,
        vectorAdd: a,
        vectorProduct: r,
        vectorRotationBy: o,
        dotProduct: t,
        angleFor2Vector: e,
        normalization: n
    }
});
I$(855, function(t, e) {
    function i(t, e) {
        function i(t, e) {
            if(e) {
                if(t[1].y >= t[0].y && t[1].y >= t[2].y) return !0;
                if(t[1].y <= t[0].y && t[1].y <= t[2].y) return !0
            } else {
                if(t[1].x >= t[0].x && t[1].x >= t[2].x) return !0;
                if(t[1].x <= t[0].x && t[1].x <= t[2].x) return !0
            }
            return !1
        }
        var n = (t.length, []),
            a = .5,
            s = t[1],
            o = t[0];
        nxtPoint = t[2];
        var l = i(t, e);
        if(l) {
            var c, u = r.distance(o, nxtPoint);
            if(e) c = Math.abs(nxtPoint.x - o.x);
            else c = Math.abs(nxtPoint.y - o.y);
            if(u > c) u = c;
            var d = u * a,
                h = {},
                f = {};
            if(e) {
                h.x = o.x + .5 * d;
                h.y = o.y
            } else {
                h.y = o.y - .5 * d;
                h.x = o.x
            }
            n.push(h);
            if(e) {
                f.x = s.x - .5 * d;
                f.y = s.y
            } else {
                f.y = s.y + .5 * d;
                f.x = s.x
            }
            n.push(f)
        } else {
            var p = {};
            r.sub(p, nxtPoint, o);
            var d = {};
            d.x = p.x * a;
            d.y = p.y * a;
            var _, m;
            if(e) {
                _ = Math.abs(s.y - o.y);
                m = Math.abs(s.y - nxtPoint.y)
            } else {
                _ = Math.abs(s.x - o.x);
                m = Math.abs(s.y - nxtPoint.y)
            }
            var g = _ / (_ + m),
                h = {},
                f = {};
            h.x = o.x + d.x * g;
            h.y = o.y + d.y * g;
            f.x = s.x - d.x * (1 - g);
            f.y = s.y - d.y * (1 - g);
            n.push(h);
            n.push(f)
        }
        return n
    }

    function n(t, e) {
        function i(t, e, i) {
            if(0 === t || t === e.length - 1) return !0;
            if(i) {
                if(e[t].y >= e[t - 1].y && e[t].y >= e[t + 1].y) return !0;
                if(e[t].y <= e[t - 1].y && e[t].y <= e[t + 1].y) return !0
            } else {
                if(e[t].x >= e[t - 1].x && e[t].x >= e[t + 1].x) return !0;
                if(e[t].x <= e[t - 1].x && e[t].x <= e[t + 1].x) return !0
            }
            return !1
        }
        for(var n = t.length, a = [], s = .5, o = 0; o < n; o++) {
            var l = t[o],
                c = t[o];
            if(o > 0) c = t[o - 1];
            var u = t[o];
            if(o < n - 1) u = t[o + 1];
            var d = i(o, t, e);
            if(d) {
                var h, f = r.distance(c, u);
                if(e) h = Math.abs(u.x - c.x);
                else h = Math.abs(u.y - c.y);
                if(f > h) f = h;
                var p = f * s,
                    _ = {},
                    m = {};
                if(o > 0) {
                    if(e) {
                        _.x = l.x - .5 * p;
                        _.y = l.y
                    } else {
                        _.y = l.y + .5 * p;
                        _.x = l.x
                    }
                    a.push(_)
                }
                if(o < n - 1) {
                    if(e) {
                        m.x = l.x + .5 * p;
                        m.y = l.y
                    } else {
                        m.y = l.y - .5 * p;
                        m.x = l.x
                    }
                    a.push(m)
                }
            } else {
                var g = {};
                r.sub(g, u, c);
                var p = {};
                p.x = g.x * s;
                p.y = g.y * s;
                var v, y;
                if(e) {
                    v = Math.abs(l.y - c.y);
                    y = Math.abs(l.y - u.y)
                } else {
                    v = Math.abs(l.x - c.x);
                    y = Math.abs(l.x - u.x)
                }
                var b = v / (v + y),
                    _ = {},
                    m = {};
                _.x = l.x - p.x * b;
                _.y = l.y - p.y * b;
                m.x = l.x + p.x * (1 - b);
                m.y = l.y + p.y * (1 - b);
                a.push(_);
                a.push(m)
            }
        }
        return a
    }
    var r = {
        add: function(t, e, i) {
            t.x = e.x + i.x;
            t.y = e.y + i.y;
            return t
        },
        sub: function(t, e, i) {
            t.x = e.x - i.x;
            t.y = e.y - i.y;
            return t
        },
        scale: function(t, e, i) {
            t.x = e.x * i;
            t.y = e.y * i;
            return t
        },
        distance: function(t, e) {
            return Math.sqrt((t.x - e.x) * (t.x - e.x) + (t.y - e.y) * (t.y - e.y))
        }
    };
    e.smoothBezier = n;
    e.smoothBezier1 = i
}, 567);
I$(856, function(t, e, i, n, r) {
    function a(t, e) {
        var i, n, r = [t.x, t.y],
            a = [e.x, e.y],
            s = v(g(r, a)),
            o = t.r * s / Math.abs(e.r - t.r),
            l = (t.r / Math.abs(e.r - t.r), Math.abs(t.r / o)),
            c = Math.sqrt(1 - Math.pow(l, 2)),
            u = [t.x - e.x, t.y - e.y];
        if(0 == u[0] && 0 == u[1]) {
            i = [0, 0];
            n = [0, 0]
        } else {
            i = [u[0] * t.r / s, u[1] * t.r / s];
            n = [u[0] * e.r / s, u[1] * e.r / s]
        }
        var d = [t.x - i[0], t.y - i[1]],
            h = [e.x + n[0], e.y + n[1]],
            f = [i[0] * l - i[1] * c, i[0] * c + i[1] * l],
            p = [i[0] * l + i[1] * c, -i[0] * c + i[1] * l],
            _ = [n[0] * l - n[1] * c, n[0] * c + n[1] * l],
            y = [n[0] * l + n[1] * c, -n[0] * c + n[1] * l],
            b = m(f, r),
            x = m(p, r),
            $ = m(_, a),
            w = m(y, a);
        return {
            p10: b,
            p11: x,
            p20: $,
            p21: w,
            l1: d,
            l2: h
        }
    }

    function s(t, e) {
        var i = t.type;
        return function(t, n) {
            var r = t.dynamicProperty("data"),
                a = r[0].innerMark,
                s = r[1].innerMark;
            if("gradientLine" == i) o(t, a, s, e);
            else if("line" == i) l(t, a, s)
        }
    }

    function o(t, e, i, n) {
        var r = {
                x: e.x(),
                y: e.y(),
                r: b(e.bbox())
            },
            s = {
                x: i.x(),
                y: i.y(),
                r: b(i.bbox())
            };
        if(r.r > s.r) {
            var o = r;
            r = s;
            s = o;
            o = e;
            e = i;
            i = o
        }
        var l = a(r, s),
            u = e.fillStyle(),
            d = i.fillStyle();
        c(l, u, d, t, n)
    }

    function l(t, e, a) {
        var s = e.fillStyle(),
            o = a.fillStyle(),
            l = e.x(),
            c = e.y(),
            u = a.x(),
            d = a.y();
        if(n.isEqual(s, o)) t.setstrokeStyle(s);
        else {
            var h = i.createLinearGradient(l, c, u, d);
            h.addColorStop(0, r.rgb2string(s));
            h.addColorStop(1, r.rgb2string(o));
            t.setstrokeStyle(h)
        }
    }

    function c(t, e, n, a, s) {
        var o = t.p10,
            l = t.p11,
            c = t.p20,
            u = t.p21,
            d = t.l1,
            h = t.l2,
            f = i.createLinearGradient(d[0], d[1], h[0], h[1]);
        f.addColorStop(0, r.rgb2string(e));
        f.addColorStop(1, r.rgb2string(n));
        var p = [{
            x: o[0],
            y: o[1]
        }, {
            x: c[0],
            y: c[1]
        }, {
            x: u[0],
            y: u[1]
        }, {
            x: l[0],
            y: l[1]
        }];
        if(s) a.setvertexes(p);
        a.setfillStyle(f);
        a.setstrokeStyle({
            r: 0,
            g: 0,
            b: 0,
            a: 0
        });
        a.setlineWidth(0)
    }

    function u(t, e) {
        for(var i in t) {
            var n = t[i].series;
            if(n.length == e) n[e] = {
                data: null
            }
        }
    }

    function d(t, e, i, n) {
        return function(r) {
            var a = {};
            if("continuous" != n.type())
                if("vert" == e) {
                    a.x = i.exec(r);
                    a.y = t.y
                } else {
                    a.x = t.x;
                    a.y = i.exec(r)
                }
            else if("vert" == e) {
                a.x = i.exec(r);
                a.y = n.exec(0)
            } else {
                a.x = n.exec(0);
                a.y = i.exec(r)
            }
            return a
        }
    }

    function h(t, e, n, a, s, o, l) {
        if(s) return function(s) {
            var o, c, u, h, f, p, _, m = d(t, e, n, l),
                g = 0,
                v = s;
            o = v[0][a];
            c = v[v.length - 1][a];
            fp = m(o);
            lp = m(c);
            var y = Math.abs(n.exec(o) - n.exec(c));
            if(0 != y) {
                for(var b = i.createLinearGradient(fp.x, fp.y, lp.x, lp.y), x = 0; x < v.length - 1; x++) {
                    u = n.exec(v[x][a]);
                    h = n.exec(v[x + 1][a]);
                    f = Math.abs(u - h) / y;
                    _ = s[x].innerMark.fillStyle();
                    p = Object.create(_);
                    b.addColorStop(g, r.rgb2string(p));
                    g += f
                }
                _ = s[x].innerMark.fillStyle();
                p = Object.create(_);
                b.addColorStop(g, r.rgb2string(p));
                g += f;
                _ = s[x].innerMark.fillStyle();
                p = Object.create(_);
                b.addColorStop(1, r.rgb2string(p))
            } else b = s[0].innerMark.fillStyle();
            return b
        };
        else return function(t) {
            return t[0].innerMark.fillStyle()
        }
    }

    function f(t, e) {
        for(var i, n = {}, r = t.baseScale, a = t.baseField, s = (t.extentField, r.domain()), o = s.length - 1; o >= 0; o--) {
            var l = y(s[o]);
            n[l] = {
                index: o,
                series: [],
                next: i,
                key: l
            };
            i = n[l]
        }
        for(var o = 0; o < e.length; o++) {
            for(var c = e[o].info.data, d = 0; d < c.length; d++)
                if(c[d].__isValid) {
                    var h = c[d][a],
                        l = y(h),
                        f = n[l].series[o];
                    if(!f) n[l].series[o] = {
                        data: [c[d]]
                    };
                    else n[l].series[o].data.push(c[d])
                } else;
            u(n, o)
        }
        return n
    }
    var p = i.selection,
        _ = i.selector.kind,
        m = (t.actorSetProperty, e.vectorAdd),
        g = e.vectorSub,
        v = e.vectorLength,
        y = r.escapeNull,
        b = function(t) {
            var e = (t.width > t.height ? t.height : t.width) / 2;
            return e
        },
        x = function(t, e, i) {
            var n = p.select(t),
                r = s(e, i);
            _("line").apply(n).each(r)
        },
        $ = function(t, e) {
            var i = _("mark").apply(p.select(t)),
                n = null;
            i.each(function(t, e) {
                if(0 == e) n = t.dynamicAttrs.graphic._info().logicSpace
            });
            var r = {
                    x: n.x,
                    y: n.y + n.height
                },
                a = t.parent().dynamicAttrs.data,
                s = a.baseInfo,
                o = s.direction,
                l = s.baseScale,
                c = s.baseField,
                u = s.extentScale,
                d = a.colorField,
                m = f(s, a.groupDatas);
            _("zone").apply(p.select(t)).each(function(t) {
                if(0 != e.validData.length) {
                    var i = h(r, o, l, c, d, m, u),
                        n = i(e.validData);
                    t.setfillStyle(n)
                }
            })
        };
    return {
        eachLinkLayout: s,
        setLinkColor: x,
        zoneGradientColor: $
    }
}, 703, 854, 566, 656, 654);
I$(815, function(t, e, i, n, r, a, s, o, l) {
    function c(t, e, i, r, a, s) {
        var c = t.xScale,
            p = t.yScale,
            _ = t.xField,
            m = t.yField,
            g = (t.colorField, t.colorScale, t.sizeScale, t.sizeField, t.markHidden),
            v = t.labelPosition,
            y = t.strokeScaleInvariant;
        l(t, i);
        var b = h("mark").apply(e);
        b.each(function(e, i) {
            var n = e.dynamicProperty("data"),
                r = n.__layoutBBox;
            if("text" == t.type) {
                var a = t.text(n);
                e.settext(a)
            }
            var s = n.__scaleRatio;
            e.setx(r.x);
            e.sety(r.y);
            e.setstrokeScaleInvariant(y);
            e.setscale({
                sx: s,
                sy: s
            });
            e.setratioAnchor({
                ratiox: .5,
                ratioy: .5
            });
            if(!n.__isIsolated && g) e.sethidden(!0)
        });
        if(t.text && "text" != t.type) {
            var x = h("label").apply(e),
                $ = "map" != t.coordType,
                w = t.idField,
                k = a.getProp(t.type, t.className),
                S = k.label,
                C = S.alwaysShowStateMap,
                T = S.showMode,
                E = S.autoHidden,
                I = t.text || k.text,
                A = {
                    alwaysVisiableLabels: [],
                    mayVisiableLabels: []
                },
                M = {};
            if("minmax" === T) M = o.searchMinMax(x, I, w);
            else if("firstlast" === T) {
                var c = t.xScale,
                    p = t.yScale,
                    _ = t.xField,
                    m = t.yField;
                if("discrete" === c.type() || "discrete" === p.type()) M = o.searchFirstLast(x, c, p, _, m, w);
                else T = "all"
            }
            x.each(function(e, i) {
                var n = e.dynamicProperty("data"),
                    a = t.text(n),
                    s = n.__layoutBBox,
                    l = [e, s, a, v, r, $],
                    c = {
                        func: o.layoutText,
                        args: l,
                        src: this
                    };
                o.controlLabelToShow(e, s, c, C, A, M, T, E, w, r)
            });
            if(E) o.avoidLabelCollision(A)
        }
        h("series").apply(e).each(function(e, i) {
            var r = t.groupDatas[i].info,
                a = u(r);
            if(!r.gradient) {
                var s = h("line").apply(d.select(e));
                if(!r.smooth) s.each(function(t, e) {
                    var i = a[t.dynamicProperty("data")[f]];
                    t.setvertexes(i)
                });
                else s.each(function(t, e) {
                    var i = a[t.dynamicProperty("data")[f]],
                        n = [
                            ["M", i[0].x, i[0].y],
                            ["C", i[1].x, i[1].y, i[2].x, i[2].y, i[3].x, i[3].y]
                        ];
                    t.setpathElements(n)
                })
            } else;
            n.setLinkColor(e, t, !0)
        })
    }

    function u(t) {
        var e = t.validData,
            n = t.linkArray,
            r = [];
        if(!t.smooth)
            for(var a = 0; a < n.length; a++) {
                var s = n[a],
                    o = e[s[0]].__layoutBBox,
                    l = e[s[1]].__layoutBBox,
                    c = {
                        x: o.x,
                        y: o.y
                    },
                    u = {
                        x: l.x,
                        y: l.y
                    };
                r.push([c, u])
            } else
            for(var d = e.map(function(t, e) {
                var i = t.__layoutBBox;
                return {
                    x: i.x,
                    y: i.y
                }
            }), h = i.smoothBezier(d, !0), a = 0; a < n.length; a++) {
                var s = n[a];
                r.push([d[s[0]], h[2 * s[0]], h[2 * s[0] + 1], d[s[1]]])
            }
        return r
    }
    var d = (t.PRIVATE, s.selection),
        h = s.selector.kind,
        f = (s.MultilineText, s.Polygon, e.vectorAdd, e.vectorSub, e.vectorScale, e.vectorRotationBy, e.normalization, e.vectorLength, e.angleFor2Vector, a.SPRITEINDEX);
    return c
}, 571, 854, 855, 856, 654, 675, 566, 739, 853);
I$(816, function(t, e, i, n, r, a, s, o) {
    function l(t, e) {
        for(var i in t) {
            var n = t[i].series;
            if(n.length == e) n[e] = {
                data: null
            }
        }
    }

    function c(t, e, i, n, r, o) {
        var l = t.baseInfo,
            c = l.baseScale,
            h = l.baseField,
            m = l.extentScale,
            b = (l.extentField, l.direction),
            x = t.xScale,
            $ = t.yScale,
            w = t.xField,
            k = t.yField,
            S = t.colorField,
            C = (t.sizeScale, t.sizeField, t.stackField),
            T = t.markHidden,
            E = t.labelPosition,
            I = t.strokeScaleInvariant;
        s(t, i);
        var A = u(l, t.groupDatas),
            M = y("mark").apply(e);
        M.each(function(e, i) {
            var n = e.dynamicProperty("data"),
                r = n.__layoutBBox;
            if("text" == t.type) {
                var a = t.text(n);
                e.settext(a)
            }
            var s = n.__scaleRatio;
            e.setx(r.x);
            e.sety(r.y);
            e.setscale({
                sx: s,
                sy: s
            });
            e.setstrokeScaleInvariant(I);
            e.setratioAnchor({
                ratiox: .5,
                ratioy: .5
            });
            if(T) e.sethidden(!0)
        });
        if(t.text && "text" != t.type) {
            var D = y("label").apply(e),
                P = "map" != t.coordType,
                N = t.idField,
                L = r.getProp(t.type, t.className),
                R = L.label,
                j = R.alwaysShowStateMap,
                O = R.showMode,
                F = R.autoHidden,
                z = t.text || L.text,
                B = {
                    alwaysVisiableLabels: [],
                    mayVisiableLabels: []
                },
                H = {};
            if("minmax" === O) H = a.searchMinMax(D, z, N);
            else if("firstlast" === O) {
                var x = t.xScale,
                    $ = t.yScale,
                    w = t.xField,
                    k = t.yField;
                if("discrete" === x.type() || "discrete" === $.type()) H = a.searchFirstLast(D, x, $, w, k, N);
                else O = "all"
            }
            D.each(function(e, i) {
                var r = e.dynamicProperty("data"),
                    s = t.text(r),
                    o = r.__layoutBBox,
                    l = [e, o, s, E, n, P],
                    c = {
                        func: a.layoutText,
                        args: l,
                        src: this
                    };
                a.controlLabelToShow(e, o, c, j, B, H, O, F, N, n)
            });
            if(F) a.avoidLabelCollision(B)
        }
        var W, q, G = ["Z"],
            U = ["Z"],
            V = {
                x: i.x,
                y: i.y + i.height
            },
            Y = (f(A, V, b, c, m), d(V, b, c, h, S, A, m));
        y("series").apply(e).each(function(t, e) {
            var i = t.dynamicProperty("data").info,
                n = g(i, A, e, h),
                r = v.select(t);
            if(!i.smooth) y("line").apply(r).each(function(t, e) {
                t.setvertexes(n[e])
            });
            else y("line").apply(r).each(function(t, e) {
                var i = n[e],
                    r = [
                        ["L", i[0].x, i[0].y],
                        ["C", i[1].x, i[1].y, i[2].x, i[2].y, i[3].x, i[3].y]
                    ];
                t.setpathElements(r)
            });
            var a = c.domain();
            if(C) {
                W = p(a, e, e - 1, A, V, b, c, h, m);
                if(e > 0) G = _(U, !0);
                U = W;
                q = W.concat(G)
            } else {
                W = p(a, e, -1, A, V, b, c, h, m);
                W.push(["Z"]);
                q = W
            }
            y("zone").apply(r).each(function(t) {
                if(0 != i.validData.length) {
                    t.setpathElements(q);
                    var e = Y(i.validData);
                    t.setfillStyle(e)
                }
            })
        })
    }

    function u(t, e) {
        for(var i, n = {}, r = t.baseScale, a = t.baseField, s = (t.extentField, r.domain()), o = s.length - 1; o >= 0; o--) {
            var c = b(s[o]);
            n[c] = {
                index: o,
                series: [],
                next: i,
                key: c
            };
            i = n[c]
        }
        for(var o = 0; o < e.length; o++) {
            for(var u = e[o].info.data, d = 0; d < u.length; d++)
                if(u[d].__isValid) {
                    var h = u[d][a],
                        c = b(h),
                        f = n[c].series[o];
                    if(!f) n[c].series[o] = {
                        data: [u[d]]
                    };
                    else n[c].series[o].data.push(u[d])
                } else;
            l(n, o)
        }
        return n
    }

    function d(t, e, i, a, s, o, l) {
        if(s) return function(s) {
            var o, c, u, d, h, f, p, _ = m(t, e, i, l),
                g = 0,
                v = s;
            o = v[0][a];
            c = v[v.length - 1][a];
            fp = _(o);
            lp = _(c);
            var y = Math.abs(i.exec(o) - i.exec(c));
            if(0 != y) {
                for(var b = r.createLinearGradient(fp.x, fp.y, lp.x, lp.y), x = 0; x < v.length - 1; x++) {
                    u = i.exec(v[x][a]);
                    d = i.exec(v[x + 1][a]);
                    h = Math.abs(u - d) / y;
                    p = s[x].innerMark.fillStyle();
                    f = Object.create(p);
                    b.addColorStop(g, n.rgb2string(f));
                    g += h
                }
                p = s[x].innerMark.fillStyle();
                f = Object.create(p);
                b.addColorStop(g, n.rgb2string(f));
                g += h;
                p = s[x].innerMark.fillStyle();
                f = Object.create(p);
                b.addColorStop(1, n.rgb2string(f))
            } else b = s[0].innerMark.fillStyle();
            return b
        };
        else return function(t) {
            return t[0].innerMark.fillStyle()
        }
    }

    function h(t, e, i, n, r, a) {
        var s = m(i, n, r, a);
        return function(i) {
            var n, r, a = e;
            if(a > -1)
                do {
                    r = t[i].series[a];
                    a--
                } while (!r.data && a > -1);
            if(r && r.data) {
                var o = r.data;
                n = o[o.length - 1].__point
            } else n = s(i);
            return n
        }
    }

    function f(t, e, i, n, r) {
        var a = m(e, i, n, r);
        return function(e, i) {
            for(var n, r, s = [], o = e[0], l = e[e.length - 1], c = t[o]; c.key != l;) {
                var u = c.key,
                    d = i;
                r = null;
                for(var h = !1; d > -1 && !r;) {
                    var f = c.next.series[d].data;
                    if(f) {
                        h = f[f.length - 1].__isIsolated;
                        if(h) break
                    }
                    r = c.series[d].path;
                    d--
                }
                if(r) r.map(function(t) {
                    s.push(t)
                });
                else {
                    n = a(u);
                    s.push(["L", n.x, n.y]);
                    var p = c.next.key;
                    n = a(p);
                    s.push(["L", n.x, n.y]);
                    var _ = c.next.series[i].data;
                    if(_ && !h) {
                        var m = _[_.length - 1].__point;
                        s.push(["L", m.x, m.y])
                    }
                }
                c = c.next
            }
            if(n) {
                var d = i - 1;
                r = null;
                for(; d > -1 && !r;) {
                    r = c.series[d].path;
                    d--
                }
                if(r) r.map(function(t) {
                    s.push(t)
                });
                else {
                    n = a(c.key);
                    s.push(["L", n.x, n.y])
                }
            }
            return s
        }
    }

    function p(t, e, i, n, r, a, s, o, l) {
        var c, u = (m(r, a, s, l), h(n, i, r, a, s, l)),
            d = [],
            f = t[0],
            p = n[f],
            _ = p.series[e].data,
            g = u(p.key);
        d.push(["M", g.x, g.y]);
        if(_) {
            var v = _[_.length - 1].__point;
            d.push(["L", v.x, v.y])
        }
        for(var y = 0; y < t.length - 1; y++) {
            var b = t[y],
                p = n[b],
                x = p.series[e],
                $ = t[y + 1],
                w = n[$],
                k = w.series[e];
            c = x.path;
            if(!x.path) x.path = [];
            if(!c) {
                var g = u(p.key);
                c = [
                    ["L", g.x, g.y]
                ];
                c.map(function(t) {
                    d.push(t);
                    x.path.push(t)
                });
                if(e > 0 && p.series[e - 1].path) {
                    c = p.series[e - 1].path;
                    c.map(function(t) {
                        d.push(t);
                        x.path.push(t)
                    });
                    if(k.data) {
                        var g = u($);
                        c = [
                            ["L", g.x, g.y]
                        ];
                        c.map(function(t) {
                            d.push(t);
                            x.path.push(t)
                        });
                        var S = k.data,
                            C = S[S.length - 1].__point;
                        c = [
                            ["L", C.x, C.y]
                        ];
                        c.map(function(t) {
                            d.push(t);
                            x.path.push(t)
                        })
                    }
                } else if(k.data) {
                    var g = u($);
                    c = [
                        ["L", g.x, g.y]
                    ];
                    c.map(function(t) {
                        d.push(t);
                        x.path.push(t)
                    });
                    var S = k.data,
                        C = S[S.length - 1].__point;
                    c = [
                        ["L", C.x, C.y]
                    ];
                    c.map(function(t) {
                        d.push(t);
                        x.path.push(t)
                    })
                }
            } else c.map(function(t) {
                d.push(t)
            })
        }
        b = t[y];
        p = n[b];
        axisCurrentPoint = u(p.key);
        d.push(["L", axisCurrentPoint.x, axisCurrentPoint.y]);
        return d
    }

    function _(t, e) {
        var i = [];
        if(t.length < 2) {
            i = t.concat(["Z"]);
            return i
        }
        var n, r;
        if(!e) r = t.length - 2;
        else r = t.length - 1;
        for(var a = r; a >= 1; a--) {
            var s = t[a],
                o = t[a - 1];
            if("C" == s[0] && "C" == o[0]) n = ["C", s[3], s[4], s[1], s[2], o[5], o[6]];
            else if("C" == s[0] && "L" == o[0]) n = ["C", s[3], s[4], s[1], s[2], o[1], o[2]];
            else if("L" == s[0] && "C" == o[0]) n = ["L", o[5], o[6]];
            else if("L" == s[0] && "L" == s[0]) n = ["L", o[1], o[2]];
            i.push(n)
        }
        i.push(["Z"]);
        return i
    }

    function m(t, e, i, n) {
        return function(r) {
            var a = {};
            if("continuous" != n.type())
                if("vert" == e) {
                    a.x = i.exec(r);
                    a.y = t.y
                } else {
                    a.x = t.x;
                    a.y = i.exec(r)
                }
            else if("vert" == e) {
                a.x = i.exec(r);
                a.y = n.exec(0)
            } else {
                a.x = n.exec(0);
                a.y = i.exec(r)
            }
            return a
        }
    }

    function g(t, e, n, r) {
        var a = t.validData,
            s = t.linkArray,
            o = [],
            l = a.map(function(t) {
                var e = t.__layoutBBox,
                    i = {
                        x: e.x,
                        y: e.y
                    };
                t.__point = i;
                return i
            });
        if(!t.smooth)
            for(var c = 0; c < s.length; c++) {
                var u = s[c],
                    d = l[u[0]],
                    h = l[u[1]];
                o.push([d, h]);
                var f = b(a[u[0]][r]),
                    p = b(a[u[1]][r]),
                    _ = e[f].series[n];
                if(!_.path) _.path = [];
                _.path.push(["L", h.x, h.y])
            } else
            for(var m = i.smoothBezier(l, !0), c = 0; c < s.length; c++) {
                var u = s[c],
                    d = l[u[0]],
                    g = m[2 * u[0]],
                    v = m[2 * u[0] + 1],
                    h = l[u[1]];
                o.push([d, g, v, h]);
                var f = b(a[u[0]][r]),
                    p = b(a[u[1]][r]),
                    _ = e[f].series[n];
                if(!_.path) _.path = [];
                if(f != p) {
                    if(0 == c) _.path.push(["L", d.x, d.y]);
                    _.path.push(["C", g.x, g.y, v.x, v.y, h.x, h.y])
                } else _.path.push(["L", h.x, h.y]);
            }
        return o
    }
    var v = (t.PRIVATE, r.selection),
        y = r.selector.kind,
        b = (r.MultilineText, r.Polygon, e.vectorAdd, e.vectorSub, e.vectorScale, e.vectorRotationBy, e.normalization, e.vectorLength, e.angleFor2Vector, n.escapeNull);
    return c
}, 571, 854, 855, 654, 566, 739, 853, 656);
I$(817, function(t, e, i, n) {
    function r(t, e, i) {
        var n, r, a, s, o = t.getElement(0, 0);
        o.setx(e.space.x);
        o.sety(e.space.y);
        s = e.scale;
        n = l.kind("caption").apply(t);
        r = n.getElement(0, 0);
        a = r.dynamicProperty("data");
        r.setx(a.x);
        r.sety(a.y);
        r.settext(a.text);
        r.setratioAnchor({
            ratiox: 0,
            ratioy: .5
        });
        var u = c("markroot").apply(t),
            d = c("mark").apply(t),
            h = c("text").apply(t);
        u.each(function(t, e) {
            var n = t.dynamicProperty("data"),
                r = h.getElement(0, e),
                a = d.getElement(0, e);
            r.settext(n.data);
            r.setx(n.width + n.padding);
            r.sety(0);
            r.setratioAnchor({
                ratiox: 0,
                ratioy: .5
            });
            t.setx(n.x);
            t.sety(n.y);
            if("color" == i) {
                a.setheight(n.height);
                a.setwidth(n.width)
            } else if("color-mobile" == i) a.setradius(n.height / 2);
            else if("shape" == i) a.setpathElements(n.pathElements);
            a.setratioAnchor({
                ratiox: 0,
                ratioy: .5
            });
            if("color" == i) a.setfixBlur(!0)
        })
    }

    function a(t, e) {
        var i, n, r, a, s = t.getElement(0, 0);
        i = e.scale;
        s.setx(e.space.x);
        s.sety(e.space.y);
        n = l.kind("frame").apply(t);
        r = n.getElement(0, 0);
        var o = l.kind("mark").apply(t);
        o.each(function(t, e) {
            a = t.dynamicProperty("data")
        })
    }

    function s(t, e) {
        var i, r, a, s, o = t.getElement(0, 0);
        i = e.scale;
        o.setx(e.space.x);
        o.sety(e.space.y);
        r = l.kind("frame").apply(t);
        a = r.getElement(0, 0);
        var c = i.exec(e[0].data),
            u = i.exec(e[1].data),
            d = n.getGradientColor(c, u, 0, 0, a.width(), 0);
        a.setfillStyle(d);
        var h = l.kind("mark").apply(t);
        h.each(function(t, e) {
            s = t.dynamicProperty("data");
            t.setDynamicProperty("color", i.exec(s.data))
        })
    }

    function o(t, e, i, n, o, l, c) {
        e.getElement(0, 0);
        if("colorOrdinal" == l) {
            var u = "mobile" == c ? "color-mobile" : "color";
            r(e, t, u)
        }
        if("sizeLinear" == l) a(e, t);
        if("colorLinear" == l) s(e, t);
        if("shape" == l) r(e, t, "shape")
    }
    var l = (i.selection, i.selector),
        c = l.kind;
    l.id;
    return o
}, 567, 652, 566, 654);
I$(818, function(t) {
    function e(t) {
        for(var e = [], i = 0; i < t.length; ++i)
            if(!t[i].hidden) e.push(t[i]);
            else;
        return e
    }

    function i(t, i) {
        var n = i.id,
            r = e(i),
            o = t.selectAll(function(t) {
                return "beginLine" == t.dynamicProperty("kind")
            }).data(r);
        o.enter().append(a).setDynamicProperty("kind", "beginLine").setDynamicProperty("key_id", n).setProperty("tolerance", 2).append(s).setDynamicProperty("kind", "text");
        o.exit().remove();
        var o = t.selectAll(function(t) {
                return "beginLine" == t.dynamicProperty("kind")
            }),
            l = t.selectAll(function(t) {
                return "text" == t.dynamicProperty("kind")
            });
        return {
            mark: o,
            text: l
        }
    }

    function n(t, e) {
        var i = e.id,
            n = t.selectAll(function(t) {
                return "mark" == t.dynamicProperty("kind")
            }).data(e);
        n.enter().append(r).setDynamicProperty("kind", "mark");
        n.exit().remove();
        var c = t.selectAll(function(t) {
            return "mark" == t.dynamicProperty("kind")
        });
        c.each(function(t, e) {
            var n = (t.dynamicProperty("data"), l.select(t)),
                r = n.selectAll(function(t) {
                    return "area" == t.dynamicProperty("kind")
                }).data(function(t) {
                    return [t.rect]
                });
            r.enter().append(o).setDynamicProperty("kind", "area").setDynamicProperty("key_id", i).append(s).setDynamicProperty("kind", "areaText");
            r.exit().remove();
            var c = n.selectAll(function(t) {
                return "beginLine" == t.dynamicProperty("kind")
            }).data(function(t) {
                return [t.beginLine]
            });
            c.enter().append(a).setDynamicProperty("kind", "beginLine").setDynamicProperty("key_id", i).append(s).setDynamicProperty("kind", "beginText");
            c.exit().remove();
            var u = n.selectAll(function(t) {
                return "endLine" == t.dynamicProperty("kind")
            }).data(function(t) {
                return [t.endLine]
            });
            u.enter().append(a).setDynamicProperty("kind", "endLine").setDynamicProperty("key_id", i).append(s).setDynamicProperty("kind", "endText");
            u.exit().remove()
        });
        var d = u("area").apply(c),
            h = u("areaText").apply(c),
            f = u("beginLine").apply(c),
            p = u("beginText").apply(c),
            _ = u("endLine").apply(c),
            m = u("endText").apply(c);
        return {
            area: d,
            beginLine: f,
            endLine: _,
            areaText: h,
            beginText: p,
            endText: m
        }
    }
    var r = t.ContainerSprite,
        a = t.Line,
        s = t.Text,
        o = t.Rect,
        l = t.selection,
        c = t.selector,
        u = c.kind;
    return {
        buildLine: i,
        buildArea: n
    }
}, 566);
I$(819, function(t, e, i, n) {
    function r(t, e, i, n, r) {
        if(null == t) t = "L";
        if(null == e) e = "T";
        if("y" == r) {
            if("L" == t) return {
                x: i.x,
                y: i.y
            };
            if("R" == t) return {
                x: n.x,
                y: n.y
            };
            else return {
                x: (i.x + n.x) / 2,
                y: i.y
            }
        } else if("T" == e) return {
            x: i.x,
            y: i.y
        };
        else if("B" == e) return {
            x: n.x,
            y: n.y
        };
        else return {
                x: i.x,
                y: (i.y + n.y) / 2
            }
    }

    function a(t, e, i) {
        var n, r, a = (i.x, i.y, i.width),
            s = i.height;
        if(null == t) t = "L";
        if(null == e) e = "T";
        var o = 0,
            l = 0;
        if("L" == t) {
            o = 0;
            n = v
        } else if("R" == t) {
            o = a;
            n = -v
        } else {
            o = a / 2;
            n = 0
        }
        if("T" == e) {
            l = 0;
            r = v
        } else if("B" == e) {
            l = s;
            r = -v
        } else {
            l = s / 2;
            r = 0
        }
        return {
            x: o,
            y: l,
            paddingX: n,
            paddingY: r
        }
    }

    function s(t, e, i) {
        var n = 0,
            r = 0;
        if("y" == i) {
            switch(e) {
                case "T":
                    r = 1;
                    break;
                case "M":
                    r = .5;
                    break;
                default:
                    r = 0
            }
            switch(t) {
                case "L":
                    n = 0;
                    break;
                case "M":
                    n = .5;
                    break;
                default:
                    n = 1
            }
        } else {
            switch(e) {
                case "T":
                    r = 0;
                    break;
                case "M":
                    r = .5;
                    break;
                default:
                    r = 1
            }
            switch(t) {
                case "L":
                    n = 1;
                    break;
                case "M":
                    n = .5;
                    break;
                default:
                    n = 0
            }
        }
        return {
            ratiox: n,
            ratioy: r
        }
    }

    function o(t, e, i) {
        var n = 0,
            r = 0;
        if("y" == i) {
            switch(e) {
                case "T":
                    n = 0;
                    break;
                case "M":
                    n = .5;
                    break;
                default:
                    n = 1
            }
            switch(t) {
                case "L":
                    r = 0;
                    break;
                case "M":
                    r = .5;
                    break;
                default:
                    r = 1
            }
        } else {
            switch(e) {
                case "T":
                    n = -1;
                    break;
                case "M":
                    n = -.5;
                    break;
                default:
                    n = 0
            }
            switch(t) {
                case "L":
                    r = 1;
                    break;
                case "M":
                    r = .5;
                    break;
                default:
                    r = 0
            }
        }
        return {
            ratiox: n,
            ratioy: r
        }
    }

    function l(t, e, i, n) {
        if("vertical" == i) return o(t, e, n);
        else return s(t, e, n)
    }

    function c(t, e, i) {
        var n = 0,
            r = 0;
        if("vertical" == i) {
            switch(e) {
                case "T":
                    n = 1;
                    break;
                case "M":
                    n = .5;
                    break;
                default:
                    n = 0
            }
            switch(t) {
                case "L":
                    r = 0;
                    break;
                case "M":
                    r = .5;
                    break;
                default:
                    r = 1
            }
        } else {
            switch(e) {
                case "T":
                    r = 0;
                    break;
                case "M":
                    r = .5;
                    break;
                default:
                    r = 1
            }
            switch(t) {
                case "L":
                    n = 0;
                    break;
                case "M":
                    n = .5;
                    break;
                default:
                    n = 1
            }
        }
        return {
            ratiox: n,
            ratioy: r
        }
    }

    function u(t, e, i) {
        var n = 0,
            r = 0;
        if("L" == t) n = v;
        else if("R" == t) n = -v;
        if("T" == e) r = -v;
        else if("B" == e) r = v;
        if("x" == i) {
            n *= -1;
            r *= -1
        }
        return {
            x: n,
            y: r
        }
    }

    function d(t, e, i) {
        var n = 0,
            r = 0;
        if("L" == t) n = v;
        else if("R" == t) n = -v;
        if("T" == e) r = v;
        else if("B" == e) r = -v;
        return {
            x: n,
            y: r
        }
    }

    function h(t, e) {
        var i, n, a, s = e && e.text ? e.text : "";
        i = e && e.orient ? e.orient[0] : "L";
        n = e && e.orient ? e.orient[1] : "T";
        a = e && e.position ? e.position : "horizontal";
        t.each(function(t, e) {
            var o = t.dynamicProperty("data"),
                c = t.children()[0];
            if(o.hidden) {
                t.setvertexes([{
                    x: NaN,
                    y: NaN
                }, {
                    x: NaN,
                    y: NaN
                }]);
                c.settext("")
            } else {
                var d = o.begin,
                    h = o.end,
                    f = o.__key,
                    p = l(i, n, a, f),
                    _ = r(i, n, d, h, f);
                t.setvertexes([d, h]);
                t.setfixBlur(!0);
                c.setx(_.x);
                c.sety(_.y);
                if("string" == typeof s) c.settext(s);
                else if("function" == typeof s) c.settext(s(o.value));
                else c.settext("");
                if("vertical" == a) c.setrotation(-Math.PI / 2);
                c.setratioAnchor(p);
                var m = u(i, n, f);
                c.moveBy(m.x, m.y)
            }
        })
    }

    function f(t, e) {
        var i = g("beginLine").apply(t);
        h(i, e)
    }

    function p(t, e) {
        var i, n, r, s, o = g("beginLine").apply(t),
            l = e ? e.begin : void 0;
        h(o, l);
        var u = g("endLine").apply(t),
            f = e ? e.end : void 0;
        h(u, f);
        var p = t.selectAll(function(t) {
                return "area" == t.dynamicProperty("kind")
            }),
            _ = e.area;
        r = _ && _.text ? _.text : "";
        i = _ && _.orient ? _.orient[0] : "L";
        n = _ && _.orient ? _.orient[1] : "T";
        s = _ && _.position ? _.position : "horizontal";
        p.each(function(t, e) {
            var o = t.dynamicProperty("data"),
                l = t.children()[0],
                u = o.__key;
            t.setx(o.x);
            t.sety(o.y);
            t.setwidth(o.width);
            t.setheight(o.height);
            var h = c(i, n, s),
                f = a(i, n, o);
            l.setx(f.x);
            l.sety(f.y);
            if("string" == typeof r) l.settext(r);
            else if("function" == typeof r) l.settext(r(o.beginValue, o.endValue));
            else l.settext("");
            if("vertical" == s) l.setrotation(-Math.PI / 2);
            var p = d(i, n, u);
            l.setratioAnchor(h);
            l.moveBy(p.x, p.y)
        })
    }

    function _(t, e, i) {
        if("line" == e) f(t, i);
        if("area" == e) p(t, i)
    }
    var m = (i.selection, i.selector),
        g = m.kind,
        v = (m.id, 8);
    return _
}, 567, 652, 566, 654);
I$(734, function(t, e, i, n, r, a, s, o, l) {
    var c = {};
    c.creatorMap = {
        bar: {
            layout: t
        },
        pie: {
            layout: e
        },
        scatter: {
            layout: i
        },
        text: {
            layout: i
        },
        line: {
            layout: n
        },
        gradientLine: {
            layout: n
        },
        area: {
            layout: r
        },
        legend: {
            layout: s,
            sceneBuilder: a.singleBuild
        },
        statistics: {
            statisticLine: {
                sceneBuilder: o.buildLine,
                layout: l
            },
            statisticArea: {
                sceneBuilder: o.buildArea,
                layout: l
            }
        }
    };
    return c
}, 812, 813, 814, 815, 816, 745, 817, 818, 819);
I$(658, function(t, e, i, n, r) {
    function a(t, e) {
        var i = e.scale,
            n = 0;
        if(e.tickCount == -1) {
            var a = i.range(),
                s = Math.abs(a[0] - a[1]),
                o = e.tickDensity;
            n = s * o / 100
        } else n = e.tickCount;
        e.tickCount = n;
        i.ticksCount(Math.round(n));
        r(t, i.ticks(), e);
        return !0
    }

    function s(t, e, i) {
        var n = t.select(function(t) {
            return t.dynamicProperty("id") == i
        }).data([i]);
        n.enter().append(c).setDynamicProperty("id", i).setDynamicProperty("kind", "axes");
        n.exit().remove();
        n = t.select(function(t) {
            return t.dynamicProperty("id") == i
        });
        var r = n.selectAll(function(t) {
            return "axis" == t.dynamicProperty("kind")
        }).data(e);
        r.enter().append(c).setDynamicProperty("kind", "axis");
        r.exit().remove();
        r = n.selectAll(function(t) {
            return "axis" == t.dynamicProperty("kind")
        });
        r.each(function(t, e) {
            var i = t.dynamicProperty("data");
            t.setDynamicProperty("id", i.id);
            i.scene = t;
            a(u.select(t), i)
        })
    }

    function o(t, i) {
        var n = t.select(function(t) {
            return "marks" == t.dynamicProperty("kind")
        }).data(["marks"]);
        n.enter().append(c).setDynamicProperty("kind", "marks");
        n.exit().remove();
        n = t.select(function(t) {
            return "marks" == t.dynamicProperty("kind")
        });
        var r = n.selectAll(function(t) {
            return "mark" == t.dynamicProperty("kind")
        }).data(i);
        r.enter().append(c).setDynamicProperty("kind", "mark");
        r.exit().remove();
        r = n.selectAll(function(t) {
            return "mark" == t.dynamicProperty("kind")
        });
        r.each(function(t, i) {
            var n = t.dynamicProperty("data");
            creator = e.creatorMap[n.type];
            creator.sceneBuilder(u.select(t), n)
        })
    }

    function l(t, e, i) {
        var n = e.axis,
            r = [],
            a = [];
        n.map(function(t) {
            if("left" == t.position || "right" == t.position) a.push(t);
            else if("top" == t.position || "bottom" == t.position) r.push(t)
        });
        if(!i) {
            s(t, r, "xAxises");
            s(t, a, "yAxises")
        }
        o(t, e.marks);
        return !0
    }
    var c = t.ContainerSprite,
        u = (t.Rect, t.selection);
    return l
}, 566, 734, 662, 661, 735);
I$(659, function(t) {
    function e(t, e, r) {
        for(var a = [], s = 0, o = 0; o < e.length; o++)
            if(!e[o].hidden) {
                var l = "level" + o,
                    c = t.select(function(t) {
                        return t.dynamicProperty("id") == l
                    }).data([l]);
                c.enter().append(i).setDynamicProperty("id", l).setDynamicProperty("kind", "level");
                c.exit().remove();
                c = t.select(function(t) {
                    return t.dynamicProperty("id") == l
                });
                var u = c.selectAll(function(t) {
                        return "titleValue" == t.dynamicProperty("kind")
                    }).data(e[o]),
                    d = u.enter().append(n);
                d.setDynamicProperty("kind", "titleValue");
                var h = u.exit(),
                    f = c.selectAll(function(t) {
                        return "titleValue" == t.dynamicProperty("kind")
                    });
                f.each(function(t, e) {
                    var i = t.dynamicProperty("data");
                    t.setDynamicProperty("graphic", r);
                    i.innerMark = t
                });
                a.push({
                    backgroundText: {
                        update: u,
                        enter: d,
                        exit: h
                    }
                });
                e[o].graphIndex = s++
            } else;
        return {
            rootSelection: t,
            selections: a
        }
    }
    var i = t.ContainerSprite,
        n = (t.selection, t.AutoWrapText, t.Rect, t.Text, t.BackgroundText);
    return e
}, 566);
I$(660, function(t) {
    function e(t, e, n) {
        for(var r = [], a = 0; a < e.length; a++)
            if(!e[a].hidden) r.push(e[a]);
            else;
        var s = t.selectAll(function(t) {
                return "titleField" == t.dynamicProperty("kind")
            }).data(r),
            o = s.enter().append(i);
        o.setDynamicProperty("kind", "titleField");
        var l = s.exit(),
            c = t.selectAll(function(t) {
                return "titleField" == t.dynamicProperty("kind")
            });
        c.each(function(t) {
            t.setbackgroundFillStyle({
                r: 125,
                g: 125,
                b: 125
            })
        });
        return {
            rootSelection: t,
            backgroundTextSelection: {
                update: s,
                enter: o,
                exit: l
            }
        }
    }
    var i = (t.ContainerSprite, t.AutoWrapText, t.Rect, t.Text, t.selection, t.BackgroundText);
    return e
}, 566);
I$(570, function(t, e, i, n) {
    function r(t, e) {
        var i = e.pivotAxis.isCommonAxis,
            n = e.marksInfoMatrix,
            r = t.select(function(t) {
                return "pivot" == t.dynamicProperty("id")
            }).data(["pivot"]);
        r.enter().append(h).setDynamicProperty("id", "pivot");
        r.exit().remove();
        var r = t.select(function(t) {
            return "pivot" == t.dynamicProperty("id")
        });
        a(r, n, i);
        s(r, e.pivotAxis);
        if(i) o(r, e.pivotAxis.commonAxisInfos)
    }

    function a(t, e, i) {
        var n = t.select(function(t) {
            return "panes" == t.dynamicProperty("kind")
        }).data(["panes"]);
        n.enter().append(h).setDynamicProperty("kind", "panes");
        n = t.select(function(t) {
            return "panes" == t.dynamicProperty("kind")
        });
        d(n, e, i)
    }

    function s(t, e) {
        var i = e.xPivotAxisInfo,
            n = e.yPivotAxisInfo;
        c(t, i);
        u(t, n)
    }

    function o(t, e) {
        for(var i in e)
            if(null != e[i].infos) l(t, e[i], i);
            else;
    }

    function l(t, e, i) {
        var n = t.select(function(t) {
            return t.dynamicProperty("id") == i
        }).data([i]);
        n.enter().append(f).setDynamicProperty("id", i).setDynamicProperty("kind", "commonAxis");
        n.exit().remove();
        n = t.select(function(t) {
            return t.dynamicProperty("id") == i
        });
        n.each(function(t) {
            t.setstrokeStyle({
                r: 0,
                g: 0,
                b: 0
            });
            t.setlineWidth(2)
        });
        var r = n.selectAll(function(t, e) {
            return "cartesianAxis" == t.dynamicProperty("kind")
        }).data(e.infos);
        r.enter().append(h).setDynamicProperty("kind", "cartesianAxis");
        r.exit().remove();
        r = n.selectAll(function(t) {
            return "cartesianAxis" == t.dynamicProperty("kind")
        });
        r.each(function(t, i) {
            var n = p.select(t),
                r = e.infos[i],
                a = r.axisInfo;
            mAxisSceneBuilder(n, a.scale.ticks(), a)
        })
    }

    function c(t, e) {
        var r = t.select(function(t) {
            return "xPivotAxis" == t.dynamicProperty("id")
        }).data(["xPivotAxis"]);
        r.enter().append(h).setDynamicProperty("id", "xPivotAxis").setDynamicProperty("kind", "pivotAxis");
        r.exit().remove();
        r = t.select(function(t) {
            return "xPivotAxis" == t.dynamicProperty("id")
        });
        var a = i(null, e.titleValuesMatrix);
        r.append(a.root);
        var a = n(null, e.titleNameArray);
        r.append(a.root)
    }

    function u(t, e) {
        var r = t.select(function(t) {
            return "yPivotAxis" == t.dynamicProperty("id")
        }).data(["yPivotAxis"]);
        r.enter().append(h).setDynamicProperty("id", "yPivotAxis").setDynamicProperty("kind", "pivotAxis");
        r.exit().remove();
        r = t.select(function(t) {
            return "yPivotAxis" == t.dynamicProperty("id")
        });
        var a = i(null, e.titleValuesMatrix);
        r.append(a.root);
        var a = n(null, e.titleNameArray);
        r.append(a.root)
    }

    function d(t, i, n) {
        for(var r = 0; r < i.length; r++)
            for(var a = 0; a < i[r].length; a++) {
                var s = i[r][a],
                    o = "pane" + r + "," + a,
                    l = t.select(function(t) {
                        return t.dynamicProperty("id") == o
                    }).data([o]);
                l.enter().append(h).setDynamicProperty("id", o).setDynamicProperty("kind", "pane");
                l.exit().remove();
                l = t.select(function(t) {
                    return t.dynamicProperty("id") == o
                });
                for(var c = [], u = 0; u < s.length; u++) {
                    c[u] = [];
                    for(var d = 0; d < s[u].length; d++) {
                        var p = s[u][d],
                            _ = u + "," + d,
                            m = l.select(function(t) {
                                return t.dynamicProperty("id") == _
                            }).data([_]);
                        m.enter().append(f).setDynamicProperty("id", _).setDynamicProperty("kind", "cell");
                        m.exit().remove();
                        m = l.select(function(t) {
                            return t.dynamicProperty("id") == _
                        });
                        m.each(function(t) {
                            t.setstrokeStyle({
                                r: 0,
                                g: 0,
                                b: 0
                            });
                            t.setlineWidth(2)
                        });
                        e(m, p, n);
                        c[u][d] = m
                    }
                }
                s.cellSelMatrix = c
            }
    }
    var h = t.ContainerSprite,
        f = (t.Line, t.AutoWrapText, t.Rect),
        p = (t.MultilineText, t.Text, t.selection);
    t.selector.kind, t.selector.id;
    return r
}, 566, 658, 659, 660);
I$(824, function(t, e, i, n) {
    var r = e.Trait.extend({
        __init: function() {},
        processInputMsg: function(t) {
            if("logic" == t.eventType) this.onLogicMsg(t);
            else if("operation" == t.eventType) {
                result = this.onOperationMsg(t);
                if(void 0 != result) {
                    t.chooseResult = result;
                    this.responseWithMsg(t)
                }
            }
        },
        onLogicMsg: function(t) {
            if("moveBy" == t.type) {
                this.notify("output", {
                    eventType: "logic",
                    type: "moveByed",
                    morph: this,
                    dx: t.dx,
                    dy: t.dy,
                    oriEvt: t
                });
                this.outputMsg({
                    type: "tooltipHide",
                    morph: this
                })
            } else if("select" == t.type) {
                var e = this.stateMgr();
                if(e && e.processFocusWithCondition(t.predicate)) {
                    this.updateRetina();
                    this.notify("output", {
                        eventType: "logic",
                        type: "redraw",
                        morph: this
                    })
                }
            } else if("cancelSelect" == t.type) {
                var e = this.stateMgr();
                if(e && e.cancelState(n.state.focus)) {
                    this.updateRetina();
                    this.notify("output", {
                        eventType: "logic",
                        type: "redraw",
                        morph: this
                    })
                }
            }
        },
        onOperationMsg: function(t) {}
    }, []);
    return r
}, 566, 571, 703, 675);
I$(749, function(t, e, i) {
    var n = 0,
        r = e.Klass.extend({
            initialize: function(t, e, i) {
                this.subTraits(0).__init();
                this._t.settheme(e);
                this.setspace(t.space);
                this.setlogicSpace(t.logicSpace);
                this.set_morphMgr(i);
                this.createEventStream("input");
                this.createEventStream("output");
                this.createEventStream("chart");
                var r = this;
                this.subscribe("input", function(t) {
                    r.processInputMsg(t)
                });
                this.setid(n++);
                this.setchooseActors([])
            },
            resetData: function(t, e) {
                this.settheme(e);
                this.setspace(t.space)
            },
            outputMsg: function(t) {
                this.notify("output", t)
            },
            listenOutputMsg: function(t) {
                return this.subscribe("output", t)
            },
            inputMsg: function(t) {
                this.notify("input", t)
            },
            updateRetina: function() {},
            updateTheme: function() {},
            animations: function() {},
            addChooseSelection: function(t) {
                var e = this.chooseActors();
                t.each(function(t) {
                    e.push(t)
                })
            },
            choose: function(t, e) {
                var i = this.spaceTree();
                if(i) return i.choose(t, e);
                else
                    for(var n = this.chooseActors(), r = 0; r < n.length; ++r)
                        if(n[r].inside(t, e)) return [n[r]]; return []
            }
        }, ["_morphMgr", "space", "logicSpace", "scene", "id", "dataMgr", "stateMgr", "theme", "type", "spaceTree", "chooseActors"], [t.EventStreamTrait, i]);
    return r
}, 566, 571, 824);
I$(682, function(t, e, i) {
    var n = t.ContainerSprite,
        r = t.selection,
        a = t.Rect,
        s = t.MultilineText,
        o = 999,
        l = 999,
        c = 0,
        u = 0,
        d = i.extend({
            initialize: function(t, e, i) {
                this.execProto("initialize", t, e, i);
                this.setroot(n.create());
                this.setrootSelection(r.select(this.root()));
                this.build(t.tooltips)
            },
            build: function(e) {
                if(null == e) e = [];
                var i = this.rootSelection(),
                    r = i.select(function(t) {
                        return "tooltip" === t.dynamicProperty("kind")
                    }).data(e);
                r.enter().append(n).setDynamicProperty("kind", "tooltip");
                r.exit().remove();
                r = i.select(function(t) {
                    return "tooltip" === t.dynamicProperty("kind")
                });
                var d = r.select(function(t) {
                    return "background" === t.dynamicProperty("kind")
                }).data(e);
                d.enter().append(a).setDynamicProperty("kind", "background");
                d.exit().remove();
                d = r.select(function(t) {
                    return "background" === t.dynamicProperty("kind")
                });
                var h = r.select(function(t) {
                    return "text" === t.dynamicProperty("kind")
                }).data(e);
                h.enter().append(s).setDynamicProperty("kind", "text");
                h.exit().remove();
                h = r.select(function(t) {
                    return "text" === t.dynamicProperty("kind")
                });
                h.setProperty("x", 10);
                h.setProperty("y", 10);
                this._backgroundSelection = d;
                this._textSelection = h;
                this.applyTheme();
                var f = e[0] && e[0].outText ? e[0].outText : "",
                    p = this.theme().getProp(["tooltip"]),
                    _ = t.bboxHelper.multilinetextBbox(f, p.text.styles);
                _.width = Math.ceil(_.width + 20);
                _.height = Math.ceil(_.height + 20);
                d.setProperty("width", _.width);
                d.setProperty("height", _.height);
                c = o;
                u = l;
                o = _.width;
                l = _.height;
                var m = this.space();
                m.width = _.width;
                m.height = _.height
            },
            applyTheme: function() {
                var t = this.theme(),
                    e = t.getProp(["tooltip"]);
                this.rootSelection().setProperty(e.root);
                this._backgroundSelection.setProperty(e.background);
                this._textSelection.setProperty(e.text)
            },
            removeScene: function() {
                var t = this.rootSelection(),
                    e = t.select(function(t) {
                        return "tooltip" === t.dynamicProperty("kind")
                    }).data([]);
                e.exit().remove()
            },
            processInputMsg: function(t) {
                if("tooltipShow" == t.type) {
                    this.build(t.tooltips);
                    var e = this.space();
                    e.x = t.x;
                    e.y = t.y;
                    if(Math.abs(e.width - c) < .1 && Math.abs(e.height - u) < .1) this.outputMsg({
                        type: "updateTooltip",
                        morph: this
                    });
                    else this.outputMsg({
                        type: "updateTooltipSize",
                        morph: this
                    })
                } else if("tooltipHide" == t.type) {
                    this.removeScene();
                    this.outputMsg({
                        type: "updateTooltip",
                        morph: this
                    })
                }
            },
            resetData: function(t, e) {
                this.settheme(e);
                var i = this.space();
                i.x = t.space.x;
                i.y = t.space.y
            }
        }, ["root", "rootSelection"]);
    return d
}, 566, 571, 749);
I$(859, function(t, e, i, n) {
    function r(t, e) {
        var i;
        if("bar" == t) i = k;
        else if("scatter" == t) i = null == e ? $ : E;
        else if("line" == t) i = $;
        else if("gradientLine" == t) i = $;
        else if("area" == t) i = $;
        else if("pie" == t) i = w;
        else if("text" == t) i = C;
        else if("lead" == t) i = E;
        else if("map" == t || "path" == t) i = E;
        return i
    }

    function a(t, e, i) {
        this.rootSelection = t;
        this.markInfo = e;
        this.graphicRef = i
    }

    function s() {
        var t = this.rootSelection,
            e = t.select(function(t) {
                return "clip" === t.dynamicProperty("kind")
            }).data(["clip"]);
        e.enter().append(x).setDynamicProperty("kind", "clip");
        e.exit().remove();
        e = t.select(function(t) {
            return "clip" === t.dynamicProperty("kind")
        });
        this.clipSel = e;
        return this
    }

    function o() {
        var t, e = this.markInfo,
            i = this.clipSel,
            n = i ? i : this.rootSelection,
            r = this.graphicRef;
        if("line" == e.type || "gradientLine" == e.type || "area" == e.type) t = f(e, n, r, p);
        else t = [p(e, n, e.type, r)];
        this.markSels = t;
        return this
    }

    function l() {
        var t = this.markInfo,
            e = this.clipSel,
            i = e ? e : this.rootSelection,
            n = this.graphicRef,
            r = t.gradient ? v : m,
            a = f(t, i, n, r);
        this.lineSels = a;
        return this
    }

    function c() {
        var t = this.markInfo,
            e = this.clipSel,
            i = e ? e : this.rootSelection,
            n = this.graphicRef,
            r = f(t, i, n, y);
        this.areaSels = r;
        return this
    }

    function u() {
        var t, e = this.markInfo,
            i = this.clipSel,
            n = i ? i : this.rootSelection,
            r = this.graphicRef;
        if("line" == e.type || "area" == e.type) t = f(e, n, r, _);
        else t = [_(e, n)];
        this.labelSels = t;
        return this
    }

    function d() {
        var t = this.markInfo,
            e = this.clipSel,
            i = e ? e : this.rootSelection,
            n = this.graphicRef,
            r = [p(t, i, "lead", n)];
        this.leadSels = r;
        return this
    }

    function h() {
        var t = this.labelSels,
            e = this.markSels,
            i = this.lineSels,
            n = this.areaSels,
            r = (this.markInfo.type, []),
            a = e || t || i || n;
        a.map(function(a, s) {
            var o = {};
            if(e && e[s]) o.mark = e[s];
            if(t && t[s]) o.label = t[s];
            if(i && i[s]) o.line = i[s];
            if(n && n[s]) o.zone = n[s];
            r.push(o)
        });
        return r
    }

    function f(t, e, i, n) {
        var r, a = [],
            s = t.groupDatas,
            o = e.selectAll(function(t) {
                return "series" === t.dynamicProperty("kind")
            }).data(s),
            l = o.enter().append(b);
        l.setDynamicProperty("kind", "series");
        var c = o.exit();
        c.remove();
        r = e.selectAll(function(t) {
            return "series" === t.dynamicProperty("kind")
        });
        r.each(function(e, s) {
            e.setDynamicProperty("seriesIndex", s);
            e.setz(200 * (s + 1));
            var o = e.dynamicProperty("data"),
                l = n(o.info, r.at(s), t.type, i);
            a.push(l)
        });
        return a
    }

    function p(t, e, i, n) {
        var a, s, o, l = r(i, t.shapeScale),
            c = t.validData ? t.validData : t.data,
            u = "lead" == i ? "lead" : "mark",
            d = n.theme().transition,
            h = n._info().data.animation,
            f = d && h && h.idField;
        if(f && "mark" == u) {
            s = function(t) {
                var e = t.dynamicProperty("data");
                return e[f]
            };
            o = function(t) {
                return t[f]
            }
        }
        var p = e.selectAll(function(t) {
                return t.dynamicProperty("kind") === u
            }).data(c, s, o),
            _ = p.enter().append(l);
        _.setDynamicProperty("kind", u);
        var m = p.exit();
        m.remove();
        m.__parentSel__ = e;
        m.remove();
        a = e.selectAll(function(t) {
            return t.dynamicProperty("kind") === u
        });
        if(T[i]) a.each(function(t, e) {
            var i = t.dynamicProperty("data");
            i.innerMark = t;
            t.setDynamicProperty("graphic", n)
        });
        return {
            update: p,
            enter: _,
            exit: m
        }
    }

    function _(t, e) {
        var i, n = (t.text, t.validData ? t.validData : t.data),
            r = e.selectAll(function(t) {
                return "label" === t.dynamicProperty("kind")
            }).data(n),
            a = r.enter().append(C);
        a.setDynamicProperty("kind", "label").each(function(t) {
            t.setinteractable(!1)
        });
        var s = r.exit();
        s.__parentSel__ = e;
        s.remove();
        i = e.selectAll(function(t) {
            return "label" === t.dynamicProperty("kind")
        });
        return {
            update: r,
            enter: a,
            exit: s
        }
    }

    function m(e, i, n, r) {
        var a, s, o, l = (e.validData, e.nullType),
            c = e.lineDatas,
            u = e.brokenLinesIndex,
            d = r.theme().transition,
            h = r._info().data.animation,
            f = d && h && h.idField;
        if(f) {
            var p = g(f);
            s = p[0];
            o = p[1]
        }
        var _ = i.selectAll(function(t) {
                return "line" === t.dynamicProperty("kind")
            }).data(c, s, o),
            m = !e.smooth ? t.Line : t.Path,
            v = _.enter().append(m);
        v.setDynamicProperty("kind", "line");
        var y = _.exit();
        y.__parentSel__ = i;
        y.remove();
        a = i.selectAll(function(t) {
            return "line" === t.dynamicProperty("kind")
        });
        if("dash" === l && u)
            for(var b = 0; b < u.length; b++) a.at(u[b]).getElement(0, 0).setlineDash([10]);
        return {
            update: _,
            enter: v,
            exit: y
        }
    }

    function g(t) {
        var e = function(e) {
                var n = e.dynamicProperty("data"),
                    r = n[0][t],
                    a = n[1][t];
                return i.composeValues(r, a)
            },
            n = function(e) {
                var n = e[0][t],
                    r = e[1][t];
                return i.composeValues(n, r)
            };
        return [e, n]
    }

    function v(t, e, i, n) {
        var r, a, s, o = (t.validData, t.nullType, t.lineDatas),
            l = n.theme().transition,
            c = n._info().data.animation,
            u = l && c && c.idField;
        if(u) {
            var d = g(u);
            a = d[0];
            s = d[1]
        }
        var h = e.selectAll(function(t) {
                return "line" === t.dynamicProperty("kind")
            }).data(o, a, s),
            f = h.enter().append(S);
        f.setDynamicProperty("kind", "line");
        var p = h.exit();
        p.__parentSel__ = e;
        p.remove();
        r = e.selectAll(function(t) {
            return "line" === t.dynamicProperty("kind")
        });
        return {
            update: h,
            enter: f,
            exit: p
        }
    }

    function y(t, e) {
        var i, n = e.select(function(t) {
                return "zone" === t.dynamicProperty("kind")
            }).data(["zone"]),
            r = n.enter().append(E);
        r.setDynamicProperty("kind", "zone");
        var a = n.exit();
        a.__parentSel__ = e;
        a.remove();
        i = e.select(function(t) {
            return "zone" === t.dynamicProperty("kind")
        });
        return {
            update: n,
            enter: r,
            exit: a
        }
    }
    var b = t.ContainerSprite,
        x = t.ClipContainer,
        $ = t.Circle,
        w = t.Annulus,
        k = t.Rect,
        S = (t.Text, t.Polygon),
        C = t.MultilineText,
        T = (t.BubbleReceiver, n.innerMarkMap),
        E = t.Path;
    a.prototype.addCliper = s;
    a.prototype.addMark = o;
    a.prototype.addLine = l;
    a.prototype.addArea = c;
    a.prototype.addLabel = u;
    a.prototype.addLead = d;
    a.prototype.getSelectionCach = h;
    return a
}, 566, 567, 654, 675);
I$(862, function(t, e, i) {
    function n(t, e) {
        for(var n in t) {
            var r = t[n];
            if(r.length > 0) e[n] = new Array(r.length);
            for(var a = e[n], s = 0; s < r.length; ++s) {
                var o = r[s];
                a[s] = Object.create(o);
                if(i.isObject(a[s].from)) a[s].from = Object.create(a[s].from);
                if(i.isObject(a[s].to)) a[s].to = Object.create(a[s].to)
            }
        }
    }

    function r(t) {
        var e = {};
        if(t.enter) {
            e.enter = {};
            n(t.enter, e.enter)
        }
        if(t.update) {
            e.update = {};
            n(t.update, e.update)
        }
        if(t.exit) {
            e.exit = {};
            n(t.exit, e.exit)
        }
        return e
    }

    function a(t, e, n, r) {
        var a = t[n];
        if(a)
            for(var s in a)
                if(e[s]) {
                    var o = e[s][n];
                    if(o && !(o.size() < 1))
                        for(var l = a[s], c = 0; c < l.length; ++c) {
                            var u = l[c].attr;
                            l[c].target = o;
                            if(i.isString(u)) l[c][r] = o.property(u);
                            else
                                for(var d = 0; d < u.length; ++d) {
                                    var h = u[d],
                                        f = l[c][r];
                                    if(!f) {
                                        f = {};
                                        l[c][r] = f
                                    }
                                    if(null == f[h]) f[h] = o.property(h);
                                    else if(i.isFunction(f[h])) f[h].oriValue = o.property(h)
                                }
                        } else;
                } else;
    }

    function s(t, e, n) {
        for(var r in t)
            if(i.isFunction(t[r])) t[r] = t[r](t[r].oriValue, n)
    }

    function o(e, i) {
        var n = [];
        if(!i) return n;
        for(var r in i)
            for(var a = i[r], o = 0; o < a.length; ++o)
                if(a[o].target) {
                    a[o].from;
                    s(a[o].from, "from", a[o]);
                    s(a[o].to, "to", a[o]);
                    var l = t.animate.AttrAnimation.create(a[o]);
                    e.push(l);
                    n.push(l)
                }
        return n
    }

    function l(t, e) {
        return function() {
            e.remove()
        }
    }

    function c(t) {
        if(!(t.length < 1))
            for(var e = 0; e < t.length; ++e) {
                var i = t[e],
                    n = i.target(),
                    r = n.__parentSel__.getElement(0, 0);
                n.each(function(t) {
                    r.addChild(t)
                });
                i.regCBByPercent(1, l(t[e], n))
            }
    }
    var u = e.Trait.extend({
        _graphicTransitionInit: function() {
            this._t.setanimations([])
        },
        collectTransitionFrom: function(t, e) {
            if(e) {
                var i = r(e);
                this._t.settransitionAnimationInfo(i);
                for(var n = 0; n < t.length; ++n) {
                    a(i, t[n], "enter", "from");
                    a(i, t[n], "update", "from");
                    a(i, t[n], "exit", "from")
                }
                this._t.settransitionAnimationInfo(i)
            }
        },
        collectTransitionTo: function(t, e) {
            if(e)
                for(var i = this._t.transitionAnimationInfo(), n = 0; n < t.length; ++n) {
                    a(i, t[n], "enter", "to");
                    a(i, t[n], "update", "to");
                    a(i, t[n], "exit", "to")
                }
        },
        createAnimations: function() {
            var t = [];
            this._t.setanimations(t);
            var e = this._t.transitionAnimationInfo();
            if(!e) return [];
            o(t, e.enter);
            o(t, e.update);
            var i = o(t, e.exit);
            c(i)
        },
        animations: function() {
            return this._t.animations()
        }
    }, ["animations", "transitionAnimationInfo"]);
    return u
}, 566, 571, 703);
I$(863, function(t) {
    var e = {
        line: {
            mark: {
                over: !0,
                click: !0,
                out: !0
            }
        },
        gradientLine: {
            mark: {
                over: !0,
                click: !0,
                out: !0
            }
        },
        area: {
            mark: {
                over: !0,
                click: !0,
                out: !0
            }
        },
        bar: {
            mark: {
                over: !0,
                click: !0,
                out: !0
            }
        },
        pie: {
            mark: {
                over: !0,
                click: !0,
                out: !0,
                drag: !0
            }
        },
        scatter: {
            mark: {
                over: !0,
                click: !0,
                out: !0
            }
        },
        text: {
            mark: {
                click: !0
            }
        },
        path: {
            mark: {
                over: !0,
                click: !0,
                out: !0
            }
        },
        statisticLine: {
            mark: {
                over: !0,
                out: !0
            }
        },
        statisticArea: {
            area: {
                over: !0,
                out: !0
            },
            beginLine: {
                over: !0,
                out: !0
            },
            endLine: {
                over: !0,
                out: !0
            }
        },
        pivotAxis: {
            titleValue: {
                over: !0,
                out: !0,
                click: !0,
                rightClick: !0
            }
        },
        x: {
            background: {
                over: !0,
                out: !0,
                click: !0,
                rightClick: !0
            }
        },
        y: {
            background: {
                over: !0,
                out: !0,
                click: !0,
                rightClick: !0
            }
        },
        guideline: {},
        colorOrdinal: {
            mark: {
                over: !0,
                out: !0,
                click: !0
            },
            text: {
                over: !0,
                out: !0,
                click: !0
            }
        },
        colorLinear: {
            mark: {
                over: !0,
                out: !0,
                drag: !0
            }
        },
        sizeLinear: {
            mark: {
                over: !0,
                out: !0,
                drag: !0
            }
        },
        shape: {
            mark: {
                over: !0,
                out: !0,
                click: !0
            },
            text: {
                over: !0,
                out: !0,
                click: !0
            }
        }
    };
    return e
}, 566);
I$(832, function(t, e, i, n, r, a, s) {
    var o = (t.PRIVATE, e.ContainerSprite, e.selection, n.actorSetProperty),
        l = a.applyMarkSelectionMapTheme,
        c = t.Klass.extend({
            initialize: function(t) {
                this.settype(t.type);
                this._graphicTransitionInit();
                this.info(t);
                this.reset();
                t.rootSelection.setDynamicProperty("themeOwner", this);
                this.buildScene();
                this.applyTheme();
                this.layout();
                return this
            },
            updateScene: function(t) {
                this.set_info(t);
                this.setclassName(t.data.className);
                this.buildScene();
                return this
            },
            collectFrom: function() {
                var t = this._info(),
                    e = t.theme.transition,
                    i = this.type();
                if(e) {
                    this.setgraphictransition(e[i]);
                    this.collectTransitionFrom(this.graphicSelections(), this.graphictransition())
                }
                return this
            },
            collectTo: function() {
                if(this.graphictransition()) {
                    this.collectTransitionTo(this.graphicSelections(), this.graphictransition());
                    this.createAnimations(this._graphicSelection())
                }
                return this
            },
            updateLayout: function() {
                this.applyTheme();
                this.layout();
                return this
            },
            update: function(t) {
                this.updateScene(t);
                this.collectFrom();
                this.updateLayout();
                this.collectTo();
                return this
            },
            buildScene: function() {},
            layout: function(t) {},
            rootSelection: function() {
                return this._graphicSelection()
            },
            applyTheme: function() {
                var t = this.graphicSelections();
                if(null != t)
                    for(var e = this._info().data, i = this.theme(), n = e.className, r = i.getProp(e.type, n), a = 0; a < t.length; ++a) l(r, t[a])
            },
            changeMarkState: function(t, e) {
                var i = this._changeMark(),
                    r = n.bInArray(i, t);
                if(r < 0) i.push(t);
                else i[r] = e
            },
            onlyUpdateRetina: function() {
                var t = this._changeMark();
                if(0 != t.length) {
                    var e = this._info().data,
                        i = this.theme(),
                        n = e.className,
                        r = i.getProp(e.type, n);
                    t.forEach(function(t) {
                        var e = t.state;
                        if("normal" == e) style = r[t.dynamicProperty("kind")];
                        else style = r[e][t.dynamicProperty("kind")];
                        o(t, style)
                    })
                }
            },
            updateRetina: function() {
                this.onlyUpdateRetina();
                this.reset()
            },
            reset: function() {
                this.set_changeMark([])
            },
            info: function(t) {
                if(t) {
                    this.set_info(t);
                    null != t.theme && this.settheme(t.theme);
                    null != t.className && this.setclassName(t.className);
                    t.rootSelection && this.set_graphicSelection(t.rootSelection);
                    t.rootSelection && t.rootSelection.setDynamicProperty("themeOwner", this)
                } else return this._info()
            },
            isActorNeedOperationMsg: function(t, e) {
                var i = s[this.type()];
                if(i) return i[t.dynamicProperty("kind")] ? i[t.dynamicProperty("kind")][e] : !1
            }
        }, ["_graphicSelection", "graphicActor", "_info", "theme", "_changeMark", "className", "graphicSelections", "graphictransition", "type"], [r]);
    return c
}, 571, 566, 656, 703, 862, 654, 863);
I$(860, function(t, e, i, n, r, a, s, o, l, c) {
    var u = (t.PRIVATE, e.creatorMap),
        d = (n.ContainerSprite, n.selection, n.selector.kind, s.actorSetProperty, o.applyMarkSelectionMapTheme, 2 * Math.PI, a.extend({
            initialize: function(t) {
                if(t) {
                    this.execProto("initialize", t);
                    this._graphicSelection().setDynamicProperty("themeOwner", this);
                    this.set_changeContainers([])
                }
            },
            buildScene: function() {
                var t = this.sceneObj();
                markSelections = t.getSelectionCach();
                this.setgraphicSelections(markSelections);
                return markSelections
            },
            changeMarkState: function(t, e) {
                var i = t.parent(),
                    n = this._changeMark(),
                    r = s.bInArray(n, t);
                t.state = e;
                if(r < 0) {
                    n.push(t);
                    if(!i.state) i.state = e;
                    else if(c.statePriority[i.state] < c.statePriority[e]) i.state = e;
                    this.recordChangeContainer(i)
                } else {
                    if(c.statePriority[i.state] < c.statePriority[e]) i.state = e;
                    n[r].state = e
                }
            },
            recordChangeContainer: function(t) {
                var e = this._changeContainers();
                if(s.bInArray(e, t) < 0) e.push(t)
            },
            updateRetina: function() {
                this.execProto("onlyUpdateRetina")
            },
            reset: function() {
                this.set_changeMark([]);
                var t = this._changeContainers();
                if(t) t.forEach(function(t) {
                    t.state = c.state.gray
                });
                this.set_changeContainers([])
            },
            getFields: function() {
                var t = this._fieldNames(),
                    e = {};
                if(!t) {
                    t = [];
                    var i = this._info().data,
                        n = i.xField,
                        a = i.yField,
                        s = i.sizeField,
                        o = i.colorField,
                        l = i.group,
                        c = i.angle;
                    l = l ? r.isArray(l) ? l : [l] : [];
                    if("map" != i.coordType) {
                        if(n) e[n] = !0;
                        if(a) e[a] = !0
                    }
                    if(o) e[o] = !0;
                    if(s) e[s] = !0;
                    l.map(function(t) {
                        e[t] = !0
                    });
                    if(c) e[c] = !0;
                    if(i.radiusField) e[i.radiusField] = !0;
                    for(var u in e) t.push(u);
                    this.set_fieldNames(t)
                }
                return t
            },
            layout: function() {
                var t = this._info(),
                    e = this._graphicSelection();
                t.logicSpace;
                this._layout(e)
            },
            _layout: function(t) {
                var e = this._info(),
                    i = e.data;
                this._changeMark();
                u[i.type].layout(i, t, e.logicSpace, e.cellLogicSpace, e.theme, e.which);
                this._clip(t)
            },
            _clip: function(t) {
                var e = this._info(),
                    i = e.logicSpace;
                t.each(function(t) {
                    var e = t.clipper(),
                        r = e ? e.gprim() : null;
                    if(!r) t.setclipperGprim(n.Rect.create({
                        width: i.width,
                        height: i.height
                    }));
                    else {
                        r.setwidth(i.width);
                        r.setheight(i.height)
                    }
                })
            }
        }, ["_fieldNames", "sceneObj", "_changeContainers", "selectShowLabelMap"]));
    return d
}, 571, 734, 859, 566, 656, 832, 703, 654, 854, 675);
I$(825, function(t, e, i, n, r, a, s, o, l, c) {
    var u = (t.PRIVATE, i.ContainerSprite, i.selection, i.selector.kind, a.actorSetProperty, s.applySelectionMapTheme, 2 * Math.PI, c.extend({
        initialize: function(t) {
            if(t) this.execProto("initialize", t)
        },
        buildScene: function() {
            var t = this._graphicSelection(),
                i = this._info().data,
                n = new e(t, i, this);
            n.addMark();
            if(i.text && "text" != i.type) n.addLabel();
            this.setsceneObj(n);
            this.execProto("buildScene")
        },
        updateRetina: function() {
            this.execProto("updateRetina");
            this.reset()
        }
    }, []));
    return u
}, 571, 859, 566, 656, 832, 703, 654, 854, 675, 860);
I$(826, function(t, e, i, n, r, a, s, o, l, c) {
    var u = (t.PRIVATE, i.ContainerSprite, i.selection, i.selector.kind, a.actorSetProperty, s.applySelectionMapTheme, 2 * Math.PI, c.extend({
        initialize: function(t) {
            if(t) this.execProto("initialize", t)
        },
        buildScene: function() {
            var t = this._graphicSelection(),
                i = this._info().data,
                n = new e(t, i, this);
            n.addMark();
            if(i.text && "text" != i.type) n.addLabel();
            this.setsceneObj(n);
            this.execProto("buildScene")
        },
        updateRetina: function() {
            this.execProto("updateRetina");
            this.reset()
        }
    }, []));
    return u
}, 571, 859, 566, 656, 832, 703, 654, 854, 675, 860);
I$(827, function(t, e, i, n, r, a, s, o, l, c) {
    var u = (t.PRIVATE, i.ContainerSprite, i.Polygon),
        d = (i.selection, i.selector.kind, a.actorSetProperty, s.applySelectionMapTheme, 2 * Math.PI),
        h = Math.PI / 2,
        f = c.extend({
            initialize: function(t) {
                if(t) this.execProto("initialize", t)
            },
            buildScene: function() {
                var t = this._graphicSelection(),
                    i = this._info().data;
                if(!(i.data.length <= 0)) {
                    if(null != i.chooser) {
                        var n = i.data[0].center,
                            r = i.data[0].radius[1],
                            a = n.y - r,
                            s = .15 * r,
                            o = [{
                                x: n.x,
                                y: a + s / 2
                            }, {
                                x: n.x - Math.sqrt(3) / 3 * s,
                                y: a - s / 2
                            }, {
                                x: n.x + Math.sqrt(3) / 3 * s,
                                y: a - s / 2
                            }],
                            l = u.create({
                                vertexes: o,
                                fillStyle: {
                                    r: 74,
                                    g: 74,
                                    b: 74
                                },
                                z: 2e5
                            });
                        t.getElement(0, 0).addChild(l);
                        this.triangle = l
                    }
                    var c = new e(t, i, this);
                    c.addMark();
                    if(i.text && "text" != i.type) {
                        c.addLabel();
                        c.addLead()
                    }
                    this.setsceneObj(c);
                    this.execProto("buildScene")
                }
            },
            updateRetina: function() {
                this.execProto("updateRetina");
                for(var t = (this.graphicSelections(), this.theme()), e = this._info().data, i = e.className, n = t.getProp(e.type, i), r = this._changeMark(), a = 0; a < r.length; ++a) {
                    var s, o = r[a],
                        e = o.dynamicProperty("data");
                    if("normal" == e.__state__) s = n.mark;
                    else s = n[e.__state__].mark;
                    var l = (o.startAngle() + o.endAngle()) / 2;
                    if(null !== s.disCenter && Math.abs(Math.abs(e.endAngle - e.startAngle) - d) >= 1e-4) {
                        var c = s.disCenter * Math.cos(l),
                            u = s.disCenter * Math.sin(l);
                        if(o.__lastMoveBy) o.moveBy(-o.__lastMoveBy.dx, -o.__lastMoveBy.dy);
                        o.moveBy(c, u);
                        o.__lastMoveBy = {
                            dx: c,
                            dy: u
                        }
                    }
                }
                this.reset()
            },
            selectMarkActor: function(t) {
                var e = this.triangle,
                    i = e.vertexes(),
                    n = (i[0], []);
                this.graphicSelections()[0].mark.enter.each(function(t) {
                    var e = t.startAngle(),
                        i = t.endAngle();
                    if(parseInt(e / d) == parseInt(i / d)) {
                        e %= d;
                        i %= d
                    } else {
                        e %= d;
                        i = i % d + d
                    }
                    if(i >= d - h && e <= d - h || i >= -h && e <= -h) n.push(t)
                });
                this.graphicSelections()[0].mark.update.each(function(t) {
                    var e = t.startAngle(),
                        i = t.endAngle();
                    if(parseInt(e / d) == parseInt(i / d)) {
                        e %= d;
                        i %= d
                    } else {
                        e %= d;
                        i = i % d + d
                    }
                    if(i >= d - h && e <= d - h || i >= -h && e <= -h) n.push(t)
                });
                if(n.length > 0) return n[0]
            },
            dragged: function(t) {
                var e = this._info().data.data,
                    i = e[0].center,
                    n = (this._graphicSelection().getElement(0, 0), t.preX - i.x),
                    r = t.preY - i.y,
                    a = t.x - i.x,
                    s = t.y - i.y,
                    o = Math.sqrt((r - s) * (r - s) + (a - n) * (a - n) + (n * s - r * a) * (n * s - r * a)) / (Math.sqrt(n * n + r * r + 1) * Math.sqrt(a * a + s * s + 1)),
                    l = Math.asin(o),
                    c = n * s - r * a;
                if(c < 0) l *= -1;
                this.graphicSelections()[0].mark.enter.each(function(t) {
                    t.setstartAngle(t.startAngle() + l);
                    t.setendAngle(t.endAngle() + l)
                });
                this.graphicSelections()[0].mark.update.each(function(t) {
                    t.setstartAngle(t.startAngle() + l);
                    t.setendAngle(t.endAngle() + l)
                })
            }
        }, []);
    return f
}, 571, 859, 566, 656, 832, 703, 654, 854, 675, 860);
I$(828, function(t, e, i, n, r, a, s, o, l, c, u) {
    var d = (t.PRIVATE, i.ContainerSprite, i.selection),
        h = i.selector.kind,
        f = (a.actorSetProperty, s.applySelectionMapTheme, 2 * Math.PI, u.extend({
            initialize: function(t) {
                if(t) {
                    t.type = "line";
                    this.execProto("initialize", t)
                }
            },
            buildScene: function() {
                var t = this._graphicSelection(),
                    i = this._info().data,
                    n = new e(t, i, this);
                n.addMark().addLine();
                if(i.text && "text" != i.type) n.addLabel();
                this.setsceneObj(n);
                this.execProto("buildScene")
            },
            _changLineStyle: function() {
                for(var t = this._info().data, e = this._changeContainers(), i = 0; i < e.length; i++) {
                    var n = e[i],
                        r = h("line").apply(d.select(n)),
                        s = this.theme(),
                        o = t.className,
                        c = s.getProp(t.type, o);
                    if("normal" != n.state) {
                        style = c[n.state].line;
                        r.setProperty(style)
                    } else {
                        style = c.line;
                        r.setProperty(style)
                    }
                    if("gray" == n.state)
                        for(var u = h("mark").apply(d.select(n)), f = 0; f < u.size(); f++) {
                            var p = u.at(f),
                                _ = p.property("fillStyle"),
                                m = a.RGB2HSV(_[0]);
                            if(m.v + .4 > .9) m.v = .9;
                            else m.v = m.v + .4;
                            m.s = m.s / 2;
                            var g = a.HSV2RGB(m);
                            p.setProperty("fillStyle", {
                                r: g.r,
                                g: g.g,
                                b: g.b
                            })
                        }
                    l.setLinkColor(n, t, !1)
                }
            },
            updateRetina: function() {
                this.execProto("onlyUpdateRetina");
                this._changLineStyle();
                this.reset()
            }
        }, []));
    return f
}, 571, 859, 566, 656, 832, 703, 654, 854, 856, 675, 860);
I$(829, function(t, e, i, n, r, a, s, o, l, c, u) {
    var d = (t.PRIVATE, i.ContainerSprite, i.selection),
        h = i.selector.kind,
        f = (a.actorSetProperty, s.applySelectionMapTheme, 2 * Math.PI, c.extend({
            initialize: function(t) {
                if(t) this.execProto("initialize", t)
            },
            buildScene: function() {
                var t = this._graphicSelection(),
                    i = this._info().data,
                    n = new e(t, i, this);
                n.addMark().addArea();
                if(i.text && "text" != i.type) n.addLabel();
                this.setsceneObj(n);
                this.execProto("buildScene")
            },
            updateRetina: function() {
                this.execProto("updateRetina");
                this._changeAreaStyle();
                this.reset()
            },
            _changeAreaStyle: function() {
                for(var t = this._changeContainers(), e = 0; e < t.length; e++) {
                    var i = t[e],
                        n = i.state,
                        r = i.dynamicAttrs.data.info.lineDatas,
                        a = null,
                        s = i.parent().dynamicAttrs.data.colorField ? "gradientArea" : "normalArea";
                    if("normalArea" == s)
                        if("hover" == n || "focus" == n) {
                            var o = h("zone").apply(d.select(i));
                            o.each(function(t, e) {
                                if(r[e]) {
                                    a = r[e][0].innerMark.fillStyle();
                                    t.setfillStyle({
                                        r: a.r,
                                        g: a.g,
                                        b: a.b,
                                        a: l.zoneOpacity
                                    })
                                }
                            })
                        } else {
                            var o = h("zone").apply(d.select(i));
                            o.each(function(t, e) {
                                if(r[e]) {
                                    a = r[e][0].innerMark.fillStyle();
                                    t.setfillStyle({
                                        r: a.r,
                                        g: a.g,
                                        b: a.b,
                                        a: a.a
                                    })
                                }
                            })
                        }
                    else if("hover" == n || "focus" == n) {
                        var c = h("mark").apply(d.select(i));
                        c.each(function(t, e) {
                            var i = t.fillStyle();
                            t.setfillStyle({
                                r: i.r,
                                g: i.g,
                                b: i.b,
                                a: l.zoneOpacity
                            })
                        });
                        var f = this._info().data.groupDatas,
                            p = i.dynamicProperty("seriesIndex"),
                            _ = f[p].info;
                        u.zoneGradientColor(i, _)
                    } else {
                        var f = this._info().data.groupDatas,
                            p = i.dynamicProperty("seriesIndex"),
                            _ = f[p].info;
                        u.zoneGradientColor(i, _)
                    }
                }
            }
        }, []));
    return f
}, 571, 859, 566, 656, 832, 703, 654, 854, 675, 860, 856);
I$(861, function(t, e, i, n, r) {
    function a(t, e, i, n) {
        var a = n.xField,
            s = n.yField,
            o = t.selectAll(function(t) {
                return t.dynamicProperty("kind") == i
            }),
            l = o.size() > 0 ? o.size() : 10;
        r.create({}).domain([0, l]).range({
            r: 255,
            g: 0,
            b: 0
        });
        o.each(function(t, i) {
            var n = t.dynamicProperty("data");
            t.setpathElements(e.exec(n.__geometry))
        });
        var c = t.selectAll(function(t) {
                return "label" == t.dynamicProperty("kind")
            }),
            u = n.xScale,
            d = n.yScale,
            h = n.text;
        c.each(function(t, e) {
            var i = t.dynamicProperty("data");
            t.settexts(h(i));
            t.setx(u.exec(i[a]));
            t.sety(d.exec(i[s]));
            t.setratioAnchor({
                ratiox: .5,
                ratioy: .5
            })
        })
    }

    function s(t, e, i) {
        var n = t.selectAll(function(t) {
            return t.dynamicProperty("kind") == i
        });
        n.each(function(t, i) {
            var n = t.dynamicProperty("data");
            t.setpathElements(e.exec(n))
        });
        var r = t.selectAll(function(t) {
            return "text" == t.dynamicProperty("kind")
        });
        r.each(function(t, i) {
            var n = t.dynamicProperty("data"),
                r = e.centroid(n),
                a = e.projection().invert(r);
            t.setx(a[0]);
            t.sety(a[1]);
            t.setratioAnchor({
                ratiox: .5,
                ratioy: .5
            })
        })
    }

    function o(t, e, i, n) {
        if("mark" == i) a(t, e, i, n);
        if("path" == i) s(t, e, i)
    }
    var l = (i.selection, i.selector);
    l.kind, l.id;
    return o
}, 567, 652, 566, 654, 696);
I$(830, function(t, e, i, n, r, a, s, o, l, c, u) {
    var d = (t.PRIVATE, i.ContainerSprite, i.selection, i.selector.kind, a.actorSetProperty, s.applySelectionMapTheme, 2 * Math.PI, c.extend({
        initialize: function(t) {
            if(t) this.execProto("initialize", t)
        },
        buildScene: function() {
            var t = this._graphicSelection(),
                i = this._info().data,
                n = new e(t, i, this);
            n.addMark();
            if(i.text && "text" != i.type) n.addLabel();
            this.setsceneObj(n);
            this.execProto("buildScene")
        },
        _layout: function(t) {
            var e = this._info();
            u(t, e.data.path, "mark", e.data);
            this._clip(t)
        },
        updateRetina: function() {
            this.execProto("updateRetina");
            this.reset()
        }
    }, []));
    return d
}, 571, 859, 566, 656, 832, 703, 654, 854, 675, 860, 861);
I$(750, function(t, e, i, n, r, a) {
    var s = {};
    s.typeToGraphicMap = {
        line: n,
        scatter: t,
        text: t,
        pie: i,
        gradientLine: n,
        area: r,
        bar: e,
        path: a
    };
    return s
}, 825, 826, 827, 828, 829, 830);
I$(751, function(t, e, i) {
    var n = e.Klass.extend({
        initialize: function() {
            this.set_children([]);
            this.set_primitives([])
        },
        setSize: function(t) {
            this.setbbox(t)
        },
        setParent: function(t) {
            this.set_parent(t)
        },
        addChild: function(t) {
            this._children().push(t)
        },
        addPrimitive: function(t) {
            this._primitives().push(t)
        },
        isInside: function(t, e) {
            var i = this.bbox();
            if(t >= i.x && t < i.x + i.width && e >= i.y && e < i.y + i.height) return !0;
            else return !1
        },
        isOverlapRegion: function(t, e, i, n) {
            var r = this.bbox();
            if(r.x >= t + i || r.x + r.width <= t || r.y >= e + n || r.t + r.height <= e) return !1;
            else return !0
        },
        inWhichPrimtive: function(t, e) {
            var i = this._primitives(),
                n = [];
            i.forEach(function(i) {
                var r = i.dynamicProperty("needTolerance");
                if(r) bIn = i.toleranceInside(t, e, 1.5);
                else bIn = i.inside(t, e);
                if(bIn) n.push(i)
            });
            if(n.length > 1) {
                for(var r, a = 99999999, s = 0; s < n.length; s++) {
                    var o = n[s],
                        l = o.bbox(),
                        c = l.x + .5 * l.width,
                        u = l.y + .5 * l.height,
                        d = (c - t) * (c - t) + (u - e) * (u - e);
                    if(d < a) {
                        r = o;
                        a = d
                    }
                }
                n = [r]
            }
            return n
        },
        primtivesInRegion: function(t, e, n, r) {
            var a = this._primitives(),
                s = [];
            a.forEach(function(a) {
                var o = a.bbox();
                if(i.rectOverlap(o.x, o.y, o.width, o.height, t, e, n, r)) s.push(a)
            });
            return s
        },
        removeChildren: function() {
            var t = this._children();
            t.forEach(function(t) {
                t.removeChildren()
            });
            this.set_children([])
        },
        removePrimtives: function() {
            this.set_primitives([])
        }
    }, ["bbox", "_parent", "_children", "_primitives"]);
    return n
}, 566, 571, 703);
I$(752, function(t, e, i) {
    var n = e.Klass.extend({
        initialize: function() {
            this.set_root(null);
            this.set_offset({
                x: 0,
                y: 0
            })
        },
        setRoot: function(t) {
            this.set_root(t)
        },
        moveTree: function(t, e) {
            var i = this._offset();
            i.x += t;
            i.y += e
        },
        choose: function(t, e, i, n) {
            var r = this._offset(),
                a = t - r.x,
                s = e - r.y;
            if(void 0 === i && void 0 === n) return this._chooseByPoint(a, s);
            else if(0 === i && 0 === n) return this._chooseByPoint(a, s);
            else return this._chooseByRegion(a, s, i, n)
        },
        removeAllNodes: function() {
            this._root().removeChildren();
            this.set_root(null)
        },
        inWhichNode: function(t, e) {
            for(var i = this._root()._children().concat(); i.length > 0;) {
                var n = i.pop();
                if(n.isInside(t, e))
                    if(n._children().length > 0) n._children().forEach(function(t) {
                        i.push(t)
                    });
                    else return n
            }
            return null
        },
        _chooseByPoint: function(t, e) {
            for(var i = [], n = [this._root()]; n.length > 0;) {
                var r = n.pop();
                if(r.isInside(t, e))
                    if(r._children().length > 0) r._children().forEach(function(t) {
                        n.push(t)
                    });
                    else {
                        i = r.inWhichPrimtive(t, e);
                        if(i.length > 0) break
                    }
            }
            return i
        },
        _chooseByRegion: function(t, e, i, n) {
            for(var r = [], a = this._root()._children().concat(); a.length > 0;) {
                var s = a.pop();
                if(s.isOverlapRegion(t, e, i, n))
                    if(s._children().length > 0) s._children().forEach(function(t) {
                        a.push(t)
                    });
                    else {
                        var o = s.primtivesInRegion(t, e, i, n);
                        if(o.length > 0) r = r.concat(o)
                    }
            }
            return r
        }
    }, ["_root", "_offset"]);
    return n
}, 566, 571, 751);
I$(753, function(t, e, i, n) {
    var r = n.extend({
        initialize: function(t) {
            this.execProto("initialize");
            this.setxDir(t);
            this.setbinary(!0)
        },
        isInside: function(t, e) {
            var i = this.xDir(),
                n = this.bbox();
            if(i)
                if(t >= n.x && t < n.x + n.width) return !0;
                else return !1;
            else if(e >= n.y && e < n.y + n.height) return !0;
            else return !1
        },
        isOverlapRegion: function(t, e, i, n) {
            var r = this.xDir(),
                a = this.bbox();
            if(r)
                if(a.x >= t + i || a.x + a.width <= t) return !1;
                else return !0;
            else if(a.y >= e + n || a.y + a.height <= e) return !1;
            else return !0
        }
    }, ["xDir", "binary"]);
    return r
}, 566, 571, 703, 751);
I$(754, function(t, e, i, n) {
    var r = n.extend({
        initialize: function() {
            this.set_root(null);
            this.setleafNodes([])
        },
        setRoot: function(t) {
            this.set_root(t)
        },
        _divideRect: function(t, e) {
            var i;
            if(t) i = .5 * e.width;
            else i = .5 * e.height;
            var n = [];
            if(t) {
                n[0] = {
                    x: e.x,
                    y: e.y,
                    width: i,
                    height: e.height
                };
                n[1] = {
                    x: e.x + i,
                    y: e.y,
                    width: i,
                    height: e.height
                }
            } else {
                n[0] = {
                    x: e.x,
                    y: e.y,
                    width: e.width,
                    height: i
                };
                n[1] = {
                    x: e.x,
                    y: e.y + i,
                    width: e.width,
                    height: i
                }
            }
            return n
        },
        genTree: function(t, e) {
            this.setxDir(t);
            for(var n, r = this._root(), a = r.bbox(), s = (a.width, a.height, this.leafNodes()), o = [r], l = 1; l < e; l++) {
                n = o;
                o = [];
                for(var c = 0; c < n.length; c++)
                    for(var u = n[c], d = u.bbox(), h = this._divideRect(t, d), f = 0; f < 2; f++) {
                        var p = i.create(t);
                        p.setSize(h[f]);
                        u.addChild(p);
                        o.push(p);
                        if(l == e - 1) {
                            p.idx = s.length;
                            s.push(p)
                        }
                    }
            }
            if(1 == e) {
                r.idx = 0;
                s.push(r)
            }
        },
        inWhichNode: function(t, e) {
            for(var i = this._root(), n = [i]; n.length > 0;) {
                var r = n.pop();
                if(r.isInside(t, e)) {
                    var a = r._children();
                    if(a.length > 0) a.forEach(function(t) {
                        n.push(t)
                    });
                    else return r
                }
            }
            return null
        },
        inWhichBinaryNode: function(t, e) {
            for(var i = this._root(), n = [i]; n.length > 0;) {
                var r = n.pop();
                if(r.isInside(t, e)) {
                    var a = r._children();
                    if(0 === a.length) return r;
                    else {
                        var s = !1;
                        a.forEach(function(t) {
                            if(t.binary && t.binary()) {
                                n.push(t);
                                s = !0
                            }
                        })
                    }
                    if(!s) return r
                }
            }
            return null
        },
        _calbxNodes: function(t) {
            var e = [{
                    x: t.x,
                    y: t.y
                }],
                i = this.xDir();
            if(i) e.push({
                x: t.x + t.width,
                y: t.y
            });
            else e.push({
                x: t.x,
                y: t.y + t.height
            });
            for(var n = [], r = 0; r < 2; r++) {
                var a = this.inWhichBinaryNode(e[r].x, e[r].y);
                n.push(a)
            }
            if(null == n[0] && null == n[1]) {
                if(i) {
                    e[0].y += t.height;
                    e[1].y += t.height
                } else {
                    e[0].x += t.width;
                    e[1].x += t.width
                }
                for(var r = 0; r < 2; r++) {
                    var a = this.inWhichBinaryNode(e[r].x, e[r].y);
                    n[r] = a
                }
            }
            if(null == n[0] && null == n[1]) return [];
            if(null == n[0] && n[1]) return [n[1]];
            if(n[0] && null == n[1]) return [n[0]];
            for(var s = Math.min(n[0].idx, n[1].idx), o = Math.max(n[0].idx, n[1].idx), l = this.leafNodes(), c = [], r = s; r <= o; r++) c.push(l[r]);
            return c
        },
        addPrimtive: function(t) {
            for(var e = t.bx, i = this._calbxNodes(e), n = 0; n < i.length; n++) i[n].addPrimitive(t)
        },
        addNode: function(t) {
            for(var e = t.bbox(), i = this._calbxNodes(e), n = 0; n < i.length; n++) i[n].addChild(t)
        }
    }, ["xDir", "leafNodes"]);
    return r
}, 566, 571, 753, 752);
I$(755, function(t, e, i, n) {
    var r = n.extend({
        initialize: function(t) {
            this.execProto("initialize");
            this.setxDir(t);
            this.set_primGroup(null)
        },
        inWhichPrimtive: function(t, e) {
            var i = [],
                n = this._primitives();
            if(1 === n.length) {
                i.push(n[0]);
                return i
            }
            var r = this.xDir(),
                a = r ? e : t;
            maxDist = 999999.99;
            for(var s, o = 0; o < n.length; o++) {
                var l, c = n[o],
                    u = c.bbox();
                if(r) l = u.y + .5 * u.height;
                else l = u.x + .5 * u.width;
                var d = Math.abs(a - l);
                if(d < maxDist) {
                    s = c;
                    maxDist = d
                }
            }
            i.push(s);
            return i
        }
    }, ["xDir", "_primGroup"]);
    return r
}, 566, 571, 703, 751);
I$(831, function(t, e, i) {
    var n = (t.PRIVATE, t.Klass.extend({
        initialize: function(t) {
            this.set_data(t);
            this._t.__initializeState();
            return this
        },
        data: function() {
            return this._data()
        },
        filter: function(t) {
            var i, n = [];
            if(e.isArray(t)) i = function() {
                return !0
            };
            else i = function(e) {
                if(t(e)) n.push(e)
            };
            this.traverse(i);
            return n
        },
        set: function(t) {
            this.traverse(t);
            return this
        },
        traverse: function(t) {
            throw "can't nstantiation"
        },
        __initializeState: function() {
            this.traverse(function(t) {
                t.__state__ = i.state.normal
            })
        }
    }, ["_data"]));
    return n
}, 571, 656, 675);
I$(756, function(t, e, i) {
    var n = (t.PRIVATE, i.extend({
        initialize: function(t) {
            this.execProto("initialize", t);
            this.set_data(t);
            return this
        },
        traverse: function(t) {
            for(var e = this._data(), i = 0; i < e.length; i++)
                for(var n = 0; n < e[i].length; n++)
                    for(var r = e[i][n], a = 0; a < r.length; a++)
                        for(var s = 0; s < r[a].length; s++) {
                            var o = r[a][s];
                            o.marks.map(function(e) {
                                var i = e.data;
                                i.map(function(e) {
                                    t(e)
                                })
                            })
                        }
        }
    }, []));
    return n
}, 571, 656, 831);
I$(767, function(t, e, i, n) {
    var r = n.state,
        a = e.Klass.extend({
            initialize: function(t) {
                this.setdata(t);
                this.set_hoverMarks([]);
                this.set_focusData([]);
                this.set_focusPredicate(null);
                this.set_curDefaultState(r.normal)
            },
            processStateChangeWithMarks: function(t, e) {
                var i = !1;
                if(e === r.hover) i = this._processHover(t);
                else if(e === r.focus) i = this._processFocus(t);
                else if(e === r.drag) i = this._processDrag(t);
                return i
            },
            setAllDataState: function(t) {
                var e = this.data(),
                    i = this,
                    n = 0;
                e.set(function(e) {
                    var r = e.innerMark;
                    if(r) {
                        i.setOneMarkState(r, t);
                        n++
                    }
                })
            },
            processFocusWithCondition: function(t) {
                var e = this._curDefaultState();
                if(e === r.gray) this._cancelFocus();
                if(e === r.normal) this.setAllDataState(r.gray);
                var i = this.data(),
                    n = r.focus;
                if(t) {
                    var a = this;
                    i.set(function(e) {
                        if(t(e)) {
                            var i = e.innerMark;
                            if(i) a.setOneMarkState(i, n)
                        }
                    })
                }
                this.set_focusPredicate(t);
                this.set_curDefaultState(r.gray);
                return !0
            },
            cancelState: function(t) {
                var e;
                if(t === r.hover) e = this._cancelHover();
                else if(t === r.focus) {
                    e = this._cancelFocus();
                    if(e) {
                        this.setAllDataState(r.normal);
                        this.set_curDefaultState(r.normal)
                    }
                }
                return e
            },
            _processHover: function(t) {
                if(!t || 0 === t.length) return !1;
                var e = this._hoverMarks(),
                    i = !0;
                if(0 === e.length) i = !1;
                else
                    for(var n = 0; n < e.length; n++)
                        if(e[n] != t[n]) i = !1; if(i) return !1;
                this._cancelHover();
                this.set_hoverMarks(t);
                for(var a = [], n = 0; n < t.length; n++)
                    if(!this._markInFocus(t[n])) a.push(t[n]);
                if(a.length > 0) this.setMarksState(t, r.hover);
                return !0
            },
            _processFocus: function(t) {
                if(!t || 0 === t.length) return !1;
                var e = this._curDefaultState();
                if(e === r.gray) this._cancelFocus();
                var i = [],
                    n = r.focus;
                t.map(function(t) {
                    var e = t.dynamicProperty("data");
                    i.push(e)
                });
                this.set_focusData(i);
                if(e === r.normal) this.setAllDataState(r.gray);
                this.setMarksState(t, n);
                this.set_curDefaultState(r.gray);
                return !0
            },
            _processDrag: function(t) {
                if(!t || 0 === t.length) return !1;
                var e = this._curDefaultState();
                if(e === r.gray) {
                    this.setAllDataState(r.normal);
                    this.set_focusData([]);
                    this.set_curDefaultState(r.normal)
                }
                this.setMarksState(t, r.drag);
                return !0
            },
            _cancelHover: function() {
                var t = this._curDefaultState(),
                    e = this._hoverMarks();
                if(0 === e.length) return !1;
                if(t === r.normal) this.setMarksState(e, t);
                else
                    for(var i = 0; i < e.length; i++) {
                        var n = t,
                            a = this._markInFocus(e[i]);
                        if(a) n = r.focus;
                        this.setOneMarkState(e[i], n)
                    }
                this.set_hoverMarks([]);
                return !0
            },
            _cancelFocus: function() {
                var t = this.data(),
                    e = this._curDefaultState(),
                    i = this._focusData();
                if(0 === i.length && null === this._focusPredicate()) return !1;
                for(var n = 0; n < i.length; n++) {
                    var r = i[n].innerMark;
                    if(r) this.setOneMarkState(r, e)
                }
                this.set_focusData([]);
                var a = this._focusPredicate();
                if(a) {
                    var s = this,
                        o = t.filter(function(t) {
                            return a(t)
                        });
                    o.map(function(t) {
                        var i = t.innerMark;
                        if(i) s.setOneMarkState(i, e)
                    })
                }
                this.set_focusPredicate(null);
                return !0
            },
            setOneMarkState: function(t, e) {
                var i = t.dynamicProperty("data");
                i.__state__ = e;
                var n = t.dynamicProperty("graphic");
                if(n) {
                    t.state = e;
                    n.changeMarkState(t, e)
                }
            },
            setMarksState: function(t, e) {
                var i = this;
                t.map(function(t) {
                    i.setOneMarkState(t, e)
                })
            },
            _markInFocus: function(t) {
                for(var e = this._focusData(), i = t.dynamicProperty("data"), n = 0; n < e.length; n++)
                    if(i === e[n]) return !0;
                focusPredicate = this._focusPredicate();
                if(focusPredicate)
                    if(focusPredicate(i)) return !0;
                return !1
            }
        }, ["data", "_curDefaultState", "_hoverMarks", "_focusData", "_focusPredicate"]);
    return a
}, 566, 571, 703, 675);
I$(757, function(t, e, i, n, r) {
    var a = t.selection,
        s = t.selector.kind,
        o = n.state,
        l = r.extend({
            initialize: function(t) {
                this.execProto("initialize", t);
                this.set_focusContainers([]);
                this.set_bAffectLinkMarks(!0)
            },
            _processHover: function(t) {
                if(!t || 0 === t.length) return !1;
                var e = this._hoverMarks(),
                    i = !0;
                if(0 === e.length) i = !1;
                else
                    for(var n = 0; n < e.length; n++)
                        if(e[n] != t[n]) i = !1; if(i) return !1;
                this._cancelHover();
                this.set_hoverMarks(t);
                this._processLinkMarkState(t, o.hover, !0, this._curDefaultState());
                for(var r = [], n = 0; n < t.length; n++)
                    if(!this._markInFocus(t[n])) r.push(t[n]);
                if(1 === r.length) this.setOneMarkState(r[0], o.hover);
                else if(r.length > 1) this.setMarksState(t, o.hover);
                return !0
            },
            _setLinkState: function(t, e, n) {
                var r = [];
                t.forEach(function(t) {
                    var e = t.parent(),
                        n = t.dynamicProperty("graphic");
                    if(i.bInArray(r, e) < 0) r.push({
                        parent: e,
                        graphic: n
                    })
                });
                var l = this;
                r.forEach(function(t) {
                    var i = a.select(t.parent),
                        r = s("mark").apply(i),
                        c = 0;
                    r.each(function(t) {
                        if(n) l.setOneMarkState(t, e);
                        else if(l._markInFocus(t)) l.setOneMarkState(t, o.focus);
                        else l.setOneMarkState(t, e);
                        c++
                    })
                });
                return !0
            },
            _calLinkState: function(t, e, i, n) {
                var r;
                if(i)
                    if(e == o.focus || e == o.hover) r = o.normal;
                    else r = n;
                else {
                    var a = this._fatherInFocusContainer(t[0]);
                    if(a) r = o.normal;
                    else r = n
                }
                return r
            },
            _processLinkMarkState: function(t, e, i, n, r) {
                if(!this._bAffectLinkMarks()) return !1;
                var a = {
                    line: [],
                    gradientLine: [],
                    area: []
                };
                t.forEach(function(t) {
                    var e = t.dynamicProperty("graphic")._info().data.type;
                    if("line" == e || "gradientLine" == e || "area" == e) a[e].push(t)
                });
                if(a.line.length > 0) {
                    var s = this._calLinkState(a.line, e, i, n);
                    return this._setLinkState(a.line, s, r)
                }
                if(a.gradientLine.length > 0) {
                    var s = this._calLinkState(a.gradientLine, e, i, n);
                    return this._setLinkState(a.gradientLine, s, r)
                }
                if(a.area.length > 0) {
                    var s = this._calLinkState(a.area, e, i, n);
                    return this._setLinkState(a.area, s, r)
                }
                return !1
            },
            _processFocus: function(t) {
                if(!t || 0 === t.length) return !1;
                var e = this._curDefaultState();
                if(e === o.gray) this._cancelFocus();
                var n = [],
                    r = [],
                    a = o.focus;
                t.forEach(function(t) {
                    var e = t.dynamicProperty("data");
                    r.push(e);
                    var a = t.parent();
                    if(i.bInArray(n, a) < 0) n.push(a)
                });
                if(e === o.normal) this.setAllDataState(o.gray);
                this.set_focusData(r);
                this.set_focusContainers(n);
                this._processLinkMarkState(t, o.focus, !0, e);
                this.setMarksState(t, a);
                this.set_curDefaultState(o.gray);
                return !0
            },
            _processDrag: function(t) {
                if(!t || 0 === t.length) return !1;
                var e = this._curDefaultState();
                if(e === o.gray) {
                    this.setAllDataState(o.normal);
                    this.set_focusData([]);
                    this.set_focusContainers([]);
                    this.set_curDefaultState(o.normal)
                }
                this.setMarksState(t, o.drag);
                return !0
            },
            _cancelHover: function() {
                var t = this._hoverMarks();
                if(0 === t.length) return !1;
                var e = this._curDefaultState(),
                    i = this._processLinkMarkState(t, o.hover, !1, e);
                if(e === o.normal) this.setMarksState(t, e);
                else
                    for(var n = 0; n < t.length; n++) {
                        var r = e;
                        if(i && this._fatherInFocusContainer(t[0])) r = o.normal;
                        var a = this._markInFocus(t[n]);
                        if(a) r = o.focus;
                        this.setOneMarkState(t[n], r)
                    }
                this.set_hoverMarks([]);
                return !0
            },
            _cancelFocus: function() {
                var t = this._focusData();
                if(0 === t.length && null === this._focusPredicate()) return !1;
                for(var e = this.data(), i = this._curDefaultState(), n = [], r = 0; r < t.length; r++) {
                    var a = t[r].innerMark;
                    if(a) n.push(a)
                }
                this.set_focusData([]);
                this.set_focusContainers([]);
                this._processLinkMarkState(n, o.focus, !1, i, !0);
                var s = this;
                n.forEach(function(t) {
                    s.setOneMarkState(t, i)
                });
                var l = this._focusPredicate();
                if(l) {
                    var s = this,
                        c = e.filter(function(t) {
                            return l(t)
                        });
                    c.forEach(function(t) {
                        var e = t.innerMark;
                        if(e) s.setOneMarkState(e, i)
                    })
                }
                this.set_focusPredicate(null);
                return !0
            },
            _fatherInFocusContainer: function(t) {
                for(var e = this._focusContainers(), i = t.parent(), n = 0; n < e.length; n++)
                    if(i == e[n]) return !0;
                return !1
            },
            resetPreHover: function() {
                this.set_hoverMarks([])
            }
        }, ["data", "_curDefaultState", "_hoverMarks", "_focusData", "_focusPredicate", "_focusContainers", "_bAffectLinkMarks"]);
    return l
}, 566, 571, 703, 675, 767);
I$(833, function(t, e, i, n, r, a, s, o, l, c) {
    function u(t, e) {
        var i = {},
            n = {},
            r = {},
            a = {},
            s = [],
            o = [];
        for(var l in f) {
            i[l] = f[l];
            n[l] = 0
        }
        t.map(function(t) {
            var e = t._graphicSelection(),
                n = e.dynamicProperty("data")[0];
            n.rootSelection = e;
            var l = n.position;
            a[l] = t;
            r[l] = n;
            i[l] = 0;
            if("left" == l || "right" == l) o.push(n);
            else s.push(n);
            i[l] = 0
        });
        for(var c = {}, u = {}, p = 0, _ = [], m = [], g = 0; g < s.length; g++) {
            var v = s[g];
            if(2 === s.length) v.gridEndPadding = !1;
            else v.gridEndPadding = !0;
            v.range = [0, e.width]
        }
        for(var g = 0; g < o.length; g++) {
            var y = o[g];
            if(2 === o.length) y.gridEndPadding = !1;
            else y.gridEndPadding = !0;
            y.range = [e.height, 0]
        }
        do {
            for(var l in i) {
                var b = r[l];
                if(b) {
                    var x = b.rootSelection,
                        $ = a[l],
                        w = $.layout(b, e, x);
                    u[l] = w.info;
                    if("bottom" == l || "top" == l) {
                        n[l] = w.info.treeBbox.height - i[l];
                        i[l] = w.info.treeBbox.height
                    } else {
                        n[l] = w.info.treeBbox.width - i[l];
                        i[l] = w.info.treeBbox.width
                    }
                    c[l] = w.info.treeBbox
                } else {
                    n[l] = i[l];
                    i[l] = 0
                }
            }
            var v = r["bottom"] ? r["bottom"] : r["top"] ? r["top"] : null,
                y = r["left"] ? r["left"] : r["right"] ? r["right"] : null;
            if(v) {
                _[0] = v.range[0] + n["left"];
                _[1] = v.range[1] - n["right"]
            }
            if(y) {
                m[0] = y.range[0] - n["bottom"];
                m[1] = y.range[1] + n["top"]
            }
            for(var l in r)
                if("left" == l || "right" == l) r[l].range = m;
                else r[l].range = _;
            var w = h(c, e);
            for(var l in r) switch(l) {
                case "left":
                    r[l].gridEnd = w.remainingSpace.width;
                    break;
                case "right":
                    r[l].gridEnd = -w.remainingSpace.width;
                    break;
                case "bottom":
                    r[l].gridEnd = -w.remainingSpace.height;
                    break;
                case "top":
                    r[l].gridEnd = w.remainingSpace.height
            }
            p++;
            var k = !0;
            for(var l in n) k = k && Math.abs(n[l]) < 1.1
        } while (!k && p < 10);
        d(r, u, a, s, o);
        if(w.ok) return {
            ok: !0,
            remainingSpace: w.remainingSpace,
            info: []
        };
        else return {
            ok: !1,
            msg: "The givenSpace is not enough",
            remainingSpace: w.remainingSpace,
            info: []
        }
    }

    function d(t, e, n, a, s) {
        var o = {};
        for(var l in e) {
            var c = "bottom" == l || "top" == l,
                u = c ? s : a,
                d = e[l].axisLine,
                h = e[l].axisTicks,
                f = t[l],
                p = f.offset,
                _ = typeof p,
                m = 0;
            switch(_) {
                case "number":
                    m = p;
                    break;
                case "object":
                    var g = i.getAxisInfoById(u, p.which);
                    m = g.scale.exec(p.value) - n[l]._graphicSelection().property("y")[0];
                    break;
                default:
                    throw "illegal offset ---> " + p
            }
            m = !isNaN(m) ? m : o[l];
            o[l] = m;
            var v = c ? "y" : "x";
            d.setProperty(v, m);
            h.setProperty(v, m);
            if(c) d.each(function(t, e) {
                var i = t.lineWidth(),
                    n = t.worldY(),
                    a = r.fixPosBlurry(n, i),
                    s = a - n;
                t.sety(m + s)
            });
            else d.each(function(t, e) {
                var i = t.lineWidth(),
                    n = t.worldX(),
                    a = r.fixPosBlurry(n, i),
                    s = a - n;
                t.setx(m + s)
            })
        }
    }

    function h(t, e) {
        var i = e.left,
            n = e.right,
            r = e.bottom,
            a = e.top;
        for(var s in t) {
            var o = t[s];
            switch(s) {
                case "left":
                    i += o.width;
                    break;
                case "right":
                    n -= o.width;
                    break;
                case "bottom":
                    r -= o.height;
                    break;
                case "top":
                    a += o.height
            }
        }
        var l = {
            left: i,
            right: n,
            bottom: r,
            top: a,
            width: n - i,
            height: r - a
        };
        if(l.width >= 0 && l.height >= 0) return {
            ok: !0,
            remainingSpace: l
        };
        else return {
            ok: !1,
            remainingSpace: e
        }
    }
    var f = (t.PRIVATE, s.selection, s.selector.kind, n.nonAxisPadding);
    return u
}, 571, 567, 654, 675, 652, 651, 566, 653, 778, 847);
I$(834, function(t, e, i, n, r, a, s, o) {
    var l = (e.PRIVATE, n.ContainerSprite, n.selection, t.extend({
        initialize: function(t) {
            this._graphicTransitionInit();
            this.set_info(t);
            var e = "left" == t.data.position || "right" == t.data.position ? "yAxis" : "xAxis";
            this.settype(e);
            this.setclassName(t.data.className);
            this.set_graphicSelection(t.rootSelection);
            return this
        },
        buildScene: function() {
            var t = this._graphicSelection(),
                e = this._info().data,
                i = e.scale,
                n = 0;
            if(e.tickCount == -1) {
                var r = i.range(),
                    a = Math.abs(r[0] - r[1]),
                    o = e.tickDensity;
                n = a * o / 100
            } else n = e.tickCount;
            e.tickCount = n;
            n = n <= 0 ? 1 : n;
            i.ticksCount(Math.round(n));
            var l = i.ticks(),
                c = s(t, l, e, this);
            this.setgraphicSelections(c);
            return c
        },
        layout: function() {
            var t = this._info(),
                e = t.data,
                i = t.logicSpace,
                n = this._axisLayouter(),
                r = this._graphicSelection();
            if(!n) {
                n = o.create();
                this.set_axisLayouter(n)
            }
            var a = "top" == e.position || "bottom" == e.position ? "xAxis" : "yAxis",
                s = t.theme.getProp(a, this.className()),
                l = n.layout(e, t.logicSpace, r, s, t.type);
            if("xAxis" == a) r.setProperty("x", i.x);
            else r.setProperty("y", i.y);
            return l
        },
        applyTheme: function() {
            var t = this._info(),
                e = this.type(),
                i = t.theme.getProp(e, this.className());
            for(var n in i) t.rootSelection.selectAll(function(t) {
                return t.dynamicProperty("kind") === n
            }).setProperty(i[n]);
            return this
        }
    }, ["_info", "_graphicSelection", "_axisLayouter", "className"]));
    return l
}, 832, 571, 750, 566, 656, 832, 735, 778);
I$(758, function(t, e, i, n, r, a, s, o, l) {
    function c(t, e) {
        var i = e.selectAll(function(t) {
            return "axis" == t.dynamicProperty("kind")
        }).data(t);
        i.enter().append(u).setDynamicProperty("kind", "axis");
        i.exit().remove();
        i = e.selectAll(function(t) {
            return "axis" == t.dynamicProperty("kind")
        });
        i.each(function(t) {
            var e = t.dynamicProperty("data");
            if("left" == e.position || "right" == e.position) t.setDynamicProperty("kind", "yAxises");
            else t.setDynamicProperty("kind", "xAxises")
        });
        return i
    }
    var u = (t.PRIVATE, n.ContainerSprite),
        d = (n.selection, a.extend({
            initialize: function(t) {
                if(t) {
                    var e = t.data;
                    if(e) {
                        var n = t.logicSpace,
                            r = t.rootSelection,
                            a = t.theme,
                            s = c(e, r),
                            o = e.map(function(t, e) {
                                var r = {
                                    data: t,
                                    logicSpace: i.area4ToArea8(n),
                                    theme: a,
                                    rootSelection: s.at(e)
                                };
                                return l.create(r)
                            });
                        this.setcartesianAxisGraphics(o)
                    }
                    this.execProto("initialize", t)
                }
            },
            update: function(t) {
                this.set_info(t);
                var e = t.data;
                if(e) {
                    var n = t.logicSpace,
                        r = t.rootSelection,
                        a = t.theme,
                        s = c(e, r),
                        o = this.cartesianAxisGraphics();
                    e.map(function(t, e) {
                        var r = {
                            data: t,
                            logicSpace: i.area4ToArea8(n),
                            theme: a,
                            rootSelection: s.at(e)
                        };
                        o[e].update(r)
                    })
                }
            },
            buildScene: function() {
                var t = this.cartesianAxisGraphics();
                if(t) t.map(function(t) {
                    t.buildScene()
                })
            },
            applyTheme: function() {
                var t = this.cartesianAxisGraphics();
                if(t) t.map(function(t) {
                    t.applyTheme()
                })
            },
            layout: function() {
                var t = this.cartesianAxisGraphics();
                if(t) {
                    var e = this._info(),
                        i = e.logicSpace;
                    o(t, i)
                }
            }
        }, ["cartesianAxisGraphics"]));
    return d
}, 571, 750, 654, 566, 656, 832, 735, 833, 834);
I$(835, function(t, e, i, n, r, a, s, o) {
    var l = (t.PRIVATE, n.ContainerSprite, n.Path),
        c = (n.Rect, n.Text),
        u = (n.selection, a.extend({
            initialize: function(t) {
                if(t) this.execProto("initialize", t)
            },
            buildScene: function() {
                var t = this._info(),
                    e = t.data.data,
                    i = t.data.text,
                    n = t.rootSelection,
                    r = n.selectAll(function(t) {
                        return "path" == t.dynamicProperty("kind")
                    }).data(e);
                r.enter().append(l).setDynamicProperty("kind", "path");
                r.exit().remove();
                if(i && "function" == typeof i) {
                    var a = n.selectAll(function(t) {
                        return "text" == t.dynamicProperty("kind")
                    }).data(e);
                    a.enter().append(c).setDynamicProperty("kind", "text").setProperty("text", function(t, e) {
                        var n = t && t.properties && t.properties.name ? t.properties.name : "";
                        return i(n)
                    });
                    a.exit().remove()
                }
            },
            applyTheme: function() {
                var t = this._info(),
                    e = "mapCoord",
                    i = t.theme.getProp(e, this.className());
                for(var n in i) t.rootSelection.selectAll(function(t) {
                    return t.dynamicProperty("kind") === n
                }).setProperty(i[n])
            },
            update: function(t) {
                this.set_info(t);
                var e = this._graphicSelection(),
                    i = t.data.path;
                o(e, i, "path");
                this._clip()
            },
            layout: function() {
                var t = this._info(),
                    e = t.rootSelection,
                    i = t.logicSpace;
                o(e, t.data.path, "path");
                this._clip();
                e.each(function(t) {
                    t.setx(i.x);
                    t.sety(i.y)
                })
            },
            _clip: function() {
                var t = this.rootSelection(),
                    e = this._info().logicSpace;
                t.each(function(t) {
                    var i = t.clipper(),
                        r = i ? i.gprim() : null;
                    if(!r) t.setclipperGprim(n.Rect.create({
                        width: e.width,
                        height: e.height
                    }));
                    else {
                        r.setwidth(e.width);
                        r.setheight(e.height)
                    }
                })
            }
        }, ["cartesianAxisGraphics"]));
    return u
}, 571, 750, 654, 566, 656, 832, 735, 861);
I$(759, function(t, e, i, n, r, a, s, o) {
    function l(t, e, i) {
        var n = "map" == i ? "mapCoord" : "cartesianCoord",
            r = e.selectAll(function(t) {
                return t.dynamicProperty("kind") === n
            }).data([t]);
        r.enter().append(u).setDynamicProperty("kind", n);
        r.exit().remove();
        r = e.selectAll(function(t) {
            return t.dynamicProperty("kind") === n;
        });
        return r
    }

    function c(t, e) {
        var i = e.selectAll(function(t) {
            return "markRoot" == t.dynamicProperty("kind")
        }).data(t);
        i.enter().append(u).setDynamicProperty("kind", "markRoot");
        i.exit().remove();
        i = e.selectAll(function(t) {
            return "markRoot" == t.dynamicProperty("kind")
        });
        return i
    }
    var u = (t.PRIVATE, n.ContainerSprite, n.ClipContainer),
        d = (n.selection, n.BubbleReceiver, n.selector.kind, e.typeToGraphicMap),
        h = a.extend({
            initialize: function(t) {
                this.setanimations([]);
                var e = this.constructCoordInfo(t),
                    i = this.mCoordKlass();
                if(i) {
                    var n = i.create(e);
                    this.setcoordGraphic(n)
                }
                var r = this.constructMarkInfos(t),
                    a = r.map(function(t) {
                        return d[t.data.type].create(t)
                    });
                this.setmarkGraphics(a);
                this.execProto("initialize", t)
            },
            constructMarkInfos: function(t) {
                if(t) {
                    var e = t.logicSpace,
                        i = t.marklogicSpace,
                        n = t.data,
                        r = n.marks,
                        a = n.which,
                        s = t.rootSelection,
                        o = t.theme,
                        l = this;
                    if(r && r.length) {
                        var u = c(r, s),
                            d = r.map(function(t, n) {
                                var r = Object.create(a);
                                r.markIndex = n;
                                r.type = t.type;
                                var s = u.at(n).setProperty("z", 1e4 * (n + 1)),
                                    c = {
                                        rootSelection: s,
                                        cellLogicSpace: e,
                                        theme: o,
                                        data: t,
                                        type: t.type,
                                        logicSpace: i,
                                        which: r,
                                        this: l
                                    };
                                return c
                            });
                        return d
                    }
                }
            },
            constructCoordInfo: function(t) {
                if(t) {
                    var e, i, n = t.logicSpace,
                        r = (t.marklogicSpace, t.data),
                        a = (r.marks, r.which, t.rootSelection),
                        c = t.theme;
                    if(r.axis && r.axis.length) {
                        e = "axis";
                        i = s
                    } else if(r.map) {
                        e = "map";
                        i = o
                    }
                    if(i) {
                        var u = l([r[e]], a, e),
                            d = {
                                rootSelection: u,
                                theme: c,
                                data: r[e],
                                logicSpace: {
                                    x: 0,
                                    y: 0,
                                    width: n.width,
                                    height: n.height
                                }
                            };
                        this.setmCoordKlass(i);
                        return d
                    }
                }
            },
            updateCoordInfo: function(t) {
                var e = this.constructCoordInfo(t),
                    i = this.coordGraphic();
                e && i && i.update(e)
            },
            updateMarkInfo: function(t) {
                var e = this.constructMarkInfos(t),
                    i = [];
                this.markGraphics().map(function(t, n) {
                    t.update(e[n]);
                    i = i.concat(t.animations())
                });
                this.setanimations(i)
            },
            update: function(t) {
                this.updateCoordInfo(t);
                this.updateMarkInfo(t)
            },
            updateRetina: function() {
                for(var t = this.markGraphics(), e = 0; e < t.length; ++e) t[e].updateRetina()
            },
            updateTheme: function() {
                for(var t = this.markGraphics(), e = 0; e < t.length; ++e) {
                    t[e].applyTheme();
                    t[e].layout()
                }
            }
        }, ["coordGraphic", "markGraphics", "mCoordKlass", "animations"]);
    return h
}, 571, 750, 654, 566, 656, 832, 758, 835);
I$(836, function(t, e) {
    function i(t, e, i) {
        var r = t.selectAll(function(t) {
                return t.dynamicProperty("kind", i)
            }).data(e),
            a = r.enter().append(n);
        a.setDynamicProperty("kind", i);
        var s = r.exit();
        return {
            update: r,
            enter: a,
            exit: s
        }
    }
    var n = (t.ContainerSprite, t.ClipContainer, t.Circle, t.Polygon, t.Line);
    t.MultilineText, t.BubbleReceiver;
    return i
}, 566, 567);
I$(837, function(t, e, i, n, r, a) {
    function s(t, e, i, n, r) {
        o(i).apply(e).each(function(t, e) {
            var i = t.dynamicProperty("data");
            t.setvertexes(i);
            t.setfixBlur(!0)
        })
    }
    var o = (t.PRIVATE, r.selection, r.selector.kind);
    return s
}, 571, 854, 855, 654, 566, 739);
I$(760, function(t, e, i, n, r, a, s) {
    var o = (t.PRIVATE, i.ContainerSprite, i.selection, r.extend({
        initialize: function(t) {
            if(t) {
                this.setkindName(t.kindName);
                this.execProto("initialize", t);
                return this
            }
        },
        buildScene: function() {
            var t = this._info().data,
                e = this.kindName(),
                i = a(this._graphicSelection(), t, e);
            this.setselections(i)
        },
        layout: function() {
            var t = this._info(),
                e = this.kindName();
            s(t.data, this._graphicSelection(), e, t.theme, t.type)
        },
        applyTheme: function() {
            var t = this.theme(),
                e = (this._graphicSelection(), this.kindName()),
                i = t.getProp(e),
                n = this.selections();
            if(i)
                if(n.selectAll) n.setProperty(i);
                else {
                    n.update && n.update.setProperty(i);
                    n.enter && n.enter.setProperty(i)
                }
            return this
        }
    }, ["selections", "kindName"]));
    return o
}, 571, 750, 566, 656, 832, 836, 837);
I$(761, function(t, e, i, n, r, a, s) {
    var o = (t.PRIVATE, i.ContainerSprite, i.selection, i.Rect),
        l = r.extend({
            initialize: function(t) {
                if(t) {
                    this.setkindName("textTableBg");
                    this.execProto("initialize", t);
                    return this
                }
            },
            buildScene: function() {
                var t = this._info(),
                    e = t.data,
                    i = t.rootSelection,
                    n = i.selectAll(function(t) {
                        return "textTableBg" == t.dynamicProperty("kind")
                    }, 1).data(e);
                n.enter().append(o).setDynamicProperty("kind", "textTableBg");
                n.exit().remove();
                n = i.selectAll(function(t) {
                    return "textTableBg" == t.dynamicProperty("kind")
                }, 1);
                this.setselections(n)
            },
            layout: function() {
                var t = this.selections();
                t.each(function(t) {
                    var e = t.dynamicProperty("data");
                    t.setx(e.x);
                    t.sety(e.y);
                    t.setwidth(e.width);
                    t.setheight(e.height)
                })
            },
            applyTheme: function() {
                var t = this.theme(),
                    e = (this._graphicSelection(), this._info().data.className),
                    i = t.getProp("graph", e),
                    n = this.selections();
                if(i)
                    if(n.selectAll) n.setProperty(i);
                    else {
                        n.update && n.update.setProperty(i);
                        n.enter && n.enter.setProperty(i)
                    }
                return this
            }
        }, ["selections", "kindName"]);
    return l
}, 571, 750, 566, 656, 832, 836, 837);
I$(838, function(t) {
    function e(t, e, i) {
        if(!(null == e || null == t || e.length <= 0))
            for(var n = e[e.length - 1][t]; n;) {
                i.unshift(n.value);
                n = n.father
            }
    }

    function i(t, i) {
        var n = {};
        if(null == t || 0 == t.length) return n;
        var r, a, s, o, l, c, u, d, h, f;
        r = t[0].dynamicProperty("graphic");
        s = r._info();
        a = s.this;
        o = a.info().pivotAxis;
        l = o && null != o.xPivotAxisInfo && o.xPivotAxisInfo.titleValuesMatrix ? o.xPivotAxisInfo.titleValuesMatrix : null;
        c = o && null != o.yPivotAxisInfo && o.yPivotAxisInfo.titleValuesMatrix ? o.yPivotAxisInfo.titleValuesMatrix : null;
        for(var n = [], p = t.length - 1; p >= 0; --p) {
            var _ = [],
                m = [];
            f = t[p].dynamicProperty("data");
            r = t[p].dynamicProperty("graphic");
            s = r._info();
            d = s.data.xField, h = s.data.yField;
            u = s.which;
            if(null != d) {
                _.unshift(f[d]);
                if(u) e(u.paneCol, l, _)
            }
            if(null != h) {
                m.unshift(f[h]);
                if(u) e(u.paneRow, c, m)
            }
            n.push({
                xPath: _,
                yPath: m,
                record: f.originRecord,
                which: u
            })
        }
        return n
    }

    function n(t, e) {
        if(null == t) return {};
        var i = {},
            n = t.dynamicProperty("data");
        if("discrete" == e) {
            i.field = n.field;
            i.value = n.data;
            i.type = "discrete"
        } else {
            relativeActor = n.__relativeMark;
            var r = n.data,
                a = relativeActor.dynamicProperty("data").data;
            i.field = n.field;
            i.value = [Math.min(r, a), Math.max(r, a)];
            i.type = "continuous"
        }
        return i
    }
    return {
        graphPath: i,
        legendPath: n
    }
}, 654);
I$(762, function(t, e, i, n, r, a) {
    var s = function(t) {
            var e = Math.min(t.x, t.xe),
                i = Math.max(t.x, t.xe),
                n = Math.min(t.y, t.ye),
                r = Math.max(t.y, t.ye);
            return {
                x: e,
                y: n,
                width: i - e,
                height: r - n
            }
        },
        o = r.extend({
            __init: function() {
                this._t.setdragInfo({});
                this._t.setrcFrame({
                    x: 0,
                    y: 0,
                    xe: 0,
                    ye: 0
                })
            },
            sendAllMessages: function() {
                this.sendSliderPositionMsg()
            },
            sendSliderPositionMsg: function() {
                var t = this.slider();
                if(t) this.responseWithMsg({
                    msgType: "guideline",
                    morph: this,
                    wx: t.x(),
                    wy: t.y()
                })
            },
            _choose: function(t, e, i, n) {
                var r, a = this.spaceTree();
                if(a) r = a.choose(t, e, i, n);
                return r
            },
            onLogicMsg: function(t) {
                if("frameChoose" == t.type) {
                    var e, i = t.orient,
                        r = this.logicSpace();
                    if("left" == i || "right" == i) e = {
                        x: 0,
                        y: t.wy - .5,
                        width: r.width,
                        height: 1
                    };
                    else e = {
                        x: t.wx - .5,
                        y: 0,
                        width: 1,
                        height: r.height
                    };
                    var s = this._choose(e.x, e.y, e.width, e.height);
                    if(s.length) {
                        var o, l, c = s[0],
                            u = c.bbox();
                        if("left" == i || "right" == i) {
                            o = t.wx;
                            l = u.y + u.height / 2
                        } else {
                            o = u.x + u.width / 2;
                            l = t.wy
                        }
                        this.processInputMsg({
                            eventType: "operation",
                            msgType: "guideline",
                            wx: o,
                            wy: l
                        });
                        this.outputMsg({
                            eventType: "logic",
                            morph: this,
                            type: "sliderPosition",
                            wx: o,
                            wy: l
                        })
                    }
                    var d = this.stateMgr();
                    if(s[0] != this._t.lastChoose())
                        if(s.length) {
                            this._t.setlastChoose(s[0]);
                            d.processStateChangeWithMarks(s, n.state.focus);
                            this.outputMsg({
                                eventType: "logic",
                                morph: this,
                                type: "emphasisUpdate",
                                chooseActor: s
                            });
                            var h = a.graphPath(s);
                            this._t.setchooseData(h);
                            this.notify("chart", {
                                eventType: "logic",
                                type: "contextselect",
                                subtype: "graph",
                                sourceEvt: t.sourceEvt,
                                data: h
                            })
                        } else {
                            this._t.setlastChoose(null);
                            this.outputMsg({
                                eventType: "logic",
                                morph: this,
                                type: "emphasisHide"
                            });
                            this._t.setchooseData(null)
                        }
                    this.updateRetina()
                } else if("moveBy" == t.type) {
                    this.notify("output", {
                        eventType: "logic",
                        type: "moveByed",
                        morph: this,
                        dx: t.dx,
                        dy: t.dy,
                        oriEvt: t
                    });
                    this.outputMsg({
                        type: "tooltipHide",
                        morph: this
                    })
                } else if("select" == t.type) {
                    var f = this.stateMgr();
                    if(f && f.processFocusWithCondition(t.predicate)) {
                        this.updateRetina();
                        this.notify("output", {
                            eventType: "logic",
                            type: "redraw",
                            morph: this
                        })
                    }
                } else if("cancelSelect" == t.type) {
                    var f = this.stateMgr();
                    if(f && f.cancelState(n.state.focus)) {
                        this.updateRetina();
                        this.notify("output", {
                            eventType: "logic",
                            type: "redraw",
                            morph: this
                        })
                    }
                }
            },
            onOperationMsg: function(t) {
                var e = {
                    choose: void 0 == t.actors ? [] : t.actors,
                    redraw: !0
                };
                e.dragging = !1;
                e.genRect = s;
                e = this._morphMgr().actionMgr.exec("Graph", t, this, e);
                return e
            }
        }, ["chooseData", "dragInfo", "rcFrame", "lastChoose", "prePos", "sliderDragging"]);
    return o
}, 566, 571, 703, 675, 824, 838);
I$(864, function(t, e, i, n) {
    var r = e.Klass.extend({
        initialize: function(t) {
            this.set_enable(t.enable);
            this.set_morph(t.morph);
            this.set_logicSpace(t.logicSpace)
        },
        type: function() {
            return this._type()
        },
        update: function() {},
        onMsg: function(t) {
            if("move" == t.type || "over" == t.type || "click" == t.type)
                if(0 == t.chooseResult.choose.length || t.isStat) this._cancel(t);
                else this._process(t);
            else if("out" == t.type) this._cancel(t)
        },
        _cancel: function(t) {},
        _process: function(t) {}
    }, ["_hide", "_morph", "_enable", "_type", "_logicSpace"]);
    return r
}, 566, 571, 703, 675);
I$(839, function(t, e, i, n, r) {
    var a = n.extend({
        initialize: function(t) {
            this.update(t);
            this.set_type("tooltip")
        },
        update: function(t) {
            this.execProto("initialize", t);
            this.set_name(t.name);
            this.set_tooltipTheme(t.tooltipTheme);
            this.set_area(t.space);
            this.set_aliasMap(t.aliasMap)
        },
        _cancel: function(t) {
            var e = this._morph();
            e.outputMsg({
                eventType: "logic",
                type: "tooltipHide",
                morph: e
            })
        },
        _process: function(e) {
            var i = this._tooltipTheme(),
                n = this._area(),
                r = this._aliasMap(),
                a = this._genUserDefineText(e, r),
                s = t.bboxHelper.multilinetextBbox(a, i.text.styles);
            s.width = Math.ceil(s.width + 20);
            s.height = Math.ceil(s.height + 20);
            var o = this._morph(),
                l = {
                    x: e.mouseX,
                    y: e.mouseY
                },
                c = this._adjustPos(n, s, i.position, l);
            if(a.length > 0) o.outputMsg({
                eventType: "logic",
                type: "tooltipShow",
                x: c.x,
                y: c.y,
                tooltips: [{
                    outText: a
                }],
                morph: o
            });
            else o.outputMsg({
                eventType: "logic",
                type: "tooltipHide",
                morph: o
            })
        },
        _genDefaultText: function(t, e) {
            for(var i, n = [], r = {}, a = 0; a < t.chooseResult.choose.length; a++) {
                for(var s = t.chooseResult.choose[a], o = s.dynamicProperty("data"), l = s.dynamicProperty("graphic"), c = l.getFields(), u = 0; u < c.length; u++) {
                    var d = c[u],
                        h = d;
                    if(e) h = e[d];
                    var f = h + ": " + o[d];
                    n.push(f);
                    r[h] = o[d]
                }
                var p = l._info().data.response;
                if(p && p.tooltip) {
                    i = p.tooltip;
                    r = o.__proto__
                }
            }
            return {
                textStr: n,
                textObj: r,
                format: i
            }
        },
        _genUserDefineText: function(t, e) {
            var i, n = this._genDefaultText(t, e);
            if(n.format) i = n.format(n.textObj);
            else i = n.textStr;
            return i
        },
        _adjustPos: function(t, e, i, n) {
            var r = 0,
                a = 0,
                s = 0,
                o = 0,
                l = 0,
                c = 0;
            if(null == i || void 0 == i || "ES" == i) {
                s = t.x + n.x + 10;
                o = t.y + n.y + 10;
                l = s;
                c = o;
                r = n.x + e.width - t.width + 10;
                a = n.y + e.height - t.height + 10;
                if(r > 0) {
                    s -= r;
                    o += 8;
                    a += 8
                }
                if(a >= 0) o -= a;
                if(o < c) o = c - e.height - 15;
                return {
                    x: s,
                    y: o
                }
            } else {
                s = t.x + n.x - e.width - 5;
                o = t.y + n.y - e.height - 5;
                r = n.x - e.width;
                a = n.y - e.height;
                if(r < 0) s -= r;
                if(a < 0) o -= a;
                return {
                    x: s,
                    y: o
                }
            }
        }
    }, ["_func", "_tooltipTheme", "_area", "_name", "_aliasMap"]);
    return a
}, 566, 571, 703, 864, 682);
I$(865, function(t, e, i) {
    var n = t.Line,
        r = t.selector.kind,
        a = e.extend({
            initialize: function(t) {
                this.execProto("initialize", t)
            },
            buildScene: function() {
                var t = this._info().data,
                    e = t.type,
                    i = this._graphicSelection(),
                    a = i.selectAll(function(t) {
                        return t.dynamicProperty("kind") == e
                    }).data([t]);
                a.enter().append(n).setDynamicProperty("kind", e);
                a.exit().remove();
                var s = r(e).apply(i),
                    o = [{}];
                o[0].line = s;
                this.setgraphicSelections(o)
            },
            layout: function(t) {
                var e, i = this._info(),
                    n = i.data,
                    r = i.logicSpace,
                    a = n.type,
                    s = (n.moveStyle, this.graphicSelections());
                if(!t)
                    if("xGuideline" == a) {
                        e = 0;
                        vertexes = [{
                            x: r.x + e,
                            y: r.y
                        }, {
                            x: r.x + e,
                            y: r.y + r.height
                        }]
                    } else {
                        e = 0;
                        vertexes = [{
                            x: r.x,
                            y: r.y + e
                        }, {
                            x: r.x + r.width,
                            y: r.y + e
                        }]
                    }
                else if("xGuideline" == a) {
                    e = t.wx;
                    vertexes = [{
                        x: e,
                        y: r.y
                    }, {
                        x: e,
                        y: r.height
                    }]
                } else {
                    e = t.wy;
                    vertexes = [{
                        x: r.x,
                        y: e
                    }, {
                        x: r.width,
                        y: e
                    }]
                }
                s.forEach(function(t) {
                    var e = t.line;
                    e.setProperty("vertexes", vertexes)
                })
            }
        }, ["coordValue"]);
    return a
}, 566, 832, 703);
I$(866, function(t, e, i, n) {
    var r = (t.Line, t.selector.kind, t.Circle, e.extend({
        initialize: function(t) {
            this.execProto("initialize", t)
        },
        buildScene: function() {
            var t, e, n = this._info(),
                r = n.logicSpace,
                a = this._graphicSelection(),
                s = n.data.moveStyle;
            if(s) {
                if(s instanceof Array) {
                    var o = s.length;
                    if(!o) t = e = "smooth";
                    else {
                        t = s[0];
                        if(o < 2) e = t;
                        else e = s[1]
                    }
                }
            } else t = e = "smooth";
            var l = {
                    logicSpace: r,
                    data: {
                        type: "xGuideline",
                        moveStyle: t
                    },
                    theme: n.theme,
                    rootSelection: a
                },
                c = {
                    logicSpace: r,
                    data: {
                        type: "yGuideline",
                        moveStyle: e
                    },
                    theme: n.theme,
                    rootSelection: a
                },
                u = [l, c].map(function(t) {
                    return i.create(t)
                });
            this.setgraphics(u)
        },
        layout: function(t) {
            var e = this.graphics();
            e.forEach(function(e) {
                e.layout(t)
            })
        }
    }, ["graphics", "crossMark"]));
    return r
}, 566, 832, 865, 703);
I$(840, function(t, e, i, n, r, a) {
    var s = {
            x: n,
            y: n,
            xy: r
        },
        o = a.extend({
            initialize: function(t) {
                this.execProto("initialize", t);
                var e = t.type,
                    i = s[t.type];
                t.data.type = e + "Guideline";
                this.set_guidelineGraphic(i.create(t));
                this.set_width(t.logicSpace.width);
                this.set_height(t.logicSpace.height);
                this.set_type("guideline")
            },
            onMsg: function(t) {
                if("guideline" == t.msgType) this._process(t);
                else if("mouseOut" == t.msgType) this._cancel(t)
            },
            _process: function(t) {
                var e = this._guidelineGraphic();
                e.layout(t);
                var i = this._morph(),
                    n = {
                        eventType: "logic",
                        type: "redraw",
                        morph: i
                    };
                i.outputMsg(n)
            },
            _cancel: function(t) {
                var e = this._guidelineGraphic();
                e.buildScene()
            }
        }, ["_guidelineGraphic", "_width", "_height"]);
    return o
}, 566, 571, 703, 865, 866, 864);
I$(867, function(t, e, i) {
    var n = t.Rect,
        r = t.selector.kind,
        a = e.extend({
            initialize: function(t) {
                this.execProto("initialize", t)
            },
            buildScene: function(t) {
                if(!t) t = {};
                var e = this._graphicSelection(),
                    i = e.selectAll(function(t) {
                        return "boxselection" == t.dynamicProperty("kind")
                    }).data([t]);
                i.enter().append(n).setDynamicProperty("kind", "boxselection");
                i.exit().remove()
            },
            applyTheme: function() {
                var t = this._graphicSelection(),
                    e = r("boxselection").apply(t),
                    i = this.theme();
                e.setProperty(i.getProp(["frame"]))
            },
            layout: function(t) {
                var e = this._graphicSelection(),
                    i = r("boxselection").apply(e);
                i.each(function(t) {
                    var e = t.dynamicProperty("data");
                    t.setx(e.x);
                    t.sety(e.y);
                    t.setwidth(e.width);
                    t.setheight(e.height);
                    t.setfixBlur(!0)
                })
            }
        }, []);
    return a
}, 566, 832, 703);
I$(841, function(t, e, i, n, r) {
    var a = n.extend({
        initialize: function(t) {
            this.execProto("initialize", t);
            this.set_width(t.logicSpace.width);
            this.set_height(t.logicSpace.height);
            this.set_frameGraphic(r.create(t));
            this.set_type("frameChoose")
        },
        onMsg: function(t) {
            if("drag" == t.type)
                if(t.chooseResult && t.chooseResult.dragging) this._process(t);
                else this._cancel(t)
        },
        _process: function(t) {
            var e = this._frameGraphic();
            if(t.chooseResult && t.chooseResult.rect) {
                e.buildScene(t.chooseResult.rect);
                e.applyTheme();
                e.layout()
            }
            var i = this._morph(),
                n = {
                    eventType: "logic",
                    type: "redraw",
                    morph: i
                };
            i.outputMsg(n)
        },
        _cancel: function(t) {
            var e = this._frameGraphic();
            e.buildScene();
            e.applyTheme();
            e.layout();
            var i = this._morph(),
                n = {
                    eventType: "logic",
                    type: "redraw",
                    morph: i
                };
            i.outputMsg(n)
        }
    }, ["_frameGraphic", "_width", "_height"]);
    return a
}, 566, 571, 703, 864, 867);
I$(842, function(t, e, i, n, r) {
    var a = (t.Rect.create({}), n.extend({
        initialize: function(t) {
            this.execProto("initialize", t);
            this.set_type("dragTranslate")
        },
        onMsg: function(t) {
            if("drag" == t.type) this._process(t)
        },
        _process: function(t) {
            var e, i, n = this._morph(),
                r = this.prePos();
            if(r && t.chooseResult.dragging) {
                e = t.gameX - r[0];
                i = t.gameY - r[1];
                r = [t.gameX, t.gameY];
                this.setprePos(r)
            } else if(!t.chooseResult.dragging) {
                e = 0;
                i = 0;
                r = [t.gameX, t.gameY];
                this.setprePos(r)
            }
            var a = (this._logicSpace(), n.cellGraphics());
            a.map(function(t) {
                var n = t.markGraphics();
                n.map(function(t) {
                    var n = t.rootSelection();
                    n.each(function(t) {
                        var n = t.clipper(),
                            r = n ? n.gprim() : null;
                        t.moveBy(e, i);
                        if(r) r.moveBy(-e, -i)
                    })
                });
                var r = t.coordGraphic();
                if(r) {
                    var a = r.rootSelection();
                    a.each(function(t) {
                        var n = t.clipper(),
                            r = n ? n.gprim() : null;
                        t.moveBy(e, i);
                        if(r) r.moveBy(-e, -i)
                    })
                }
            });
            var s = {
                eventType: "logic",
                type: "redraw",
                morph: n
            };
            n.outputMsg(s)
        }
    }, ["prePos"]));
    return a
}, 566, 571, 703, 864, 867);
I$(763, function(t, e, i, n, r, a, s, o) {
    var l = {
            tooltip: r,
            guideline: a,
            frameChoose: s,
            dragTranslate: o
        },
        c = e.Trait.extend({
            __init: function(t) {
                this._t.setresponseParam(t);
                this._t.setresponseArr([]);
                var e = this;
                for(var i in t) {
                    var n = t[i];
                    if(n) e.addResponse(i, n)
                }
            },
            addResponse: function(t, e) {
                var i = l[t],
                    n = i.create(e),
                    r = this._t.responseArr();
                r.push(n)
            },
            updateResponseMgr: function(t) {
                var e = this._t.responseArr();
                e.forEach(function(e) {
                    var i = e.type(),
                        n = t[i];
                    e.update && e.update(n)
                })
            },
            responseWithMsg: function(t) {
                var e = this._t.responseArr(),
                    i = this.responseEnable("frameChoose");
                e.forEach(function(e) {
                    if("dragTranslate" == e.type()) {
                        if(e._enable() && !i) e.onMsg(t)
                    } else if(e._enable()) e.onMsg(t)
                })
            },
            enableResponse: function(t, e) {
                var i = this._t.responseArr();
                i.forEach(function(i) {
                    if(i.type() == t) i.set_enable(e)
                })
            },
            responseEnable: function(t) {
                for(var e = this._t.responseArr(), i = 0; i < e.length; i++) {
                    var n = e[i];
                    if(n.type() == t) return n._enable()
                }
                return !1
            }
        }, ["responseArr", "responseParam"]);
    return c
}, 566, 571, 703, 675, 839, 840, 841, 842);
I$(764, function(t, e, i, n, r, a, s, o) {
    function l(t, e, i, n) {
        var r = d(t);
        r.clipSpace = i;
        r.xDir = "x" == n;
        if(r.xDiscrete || r.yDiscrete) p(r, t, e, i, n);
        else _(r, t, e, i)
    }

    function c(t, e, i) {
        if(e <= 20 || i < 8) return 1;
        var n;
        if(t < 0) n = Math.floor(Math.sqrt(i));
        else n = Math.floor(t / 8 + 1);
        for(var r = 1, a = 1; a <= n;) {
            r++;
            a *= 2
        }
        return r - 1
    }

    function u(t, e) {
        for(var i = 0; i < e.marksArr.length; i++) {
            var n = e.marksArr[i],
                r = e.marksArr[i].type;
            n.each(function(i) {
                i.bx = h(i.bbox(), e.clipSpace);
                t.addPrimtive(i);
                if("scatter" == r || "text" == r || "line" == r || "area" == r) i.setDynamicProperty("needTolerance", !0)
            })
        }
    }

    function d(t) {
        var i = {};
        i.xDiscrete = !1;
        i.yDiscrete = !1;
        i.xTickNum = -999;
        i.yTickNum = -999;
        i.markCount = 0;
        i.marksArr = [];
        for(var n = {}, r = 0; r < e.markMap.length; r++) n[e.markMap[r]] = 0;
        t.each(function(e, r) {
            var a, s = e.dynamicProperty("data");
            if("map" == s.coordType) {
                i.xTickNum = 1;
                i.yTickNum = 1
            } else {
                var o = s.xScale.type();
                if("discrete" === o) {
                    i.xDiscrete = !0;
                    a = s.xScale.domain().length
                } else a = s.xScale.ticksCount();
                if(a > i.xTickNum) {
                    i.xTickNum = a;
                    i.xScale = s.xScale
                }
                var l = s.yScale.type();
                if("discrete" === l) {
                    i.yDiscrete = !0;
                    a = s.yScale.domain().length
                } else a = s.yScale.ticksCount();
                if(a > i.yTickNum) {
                    i.yTickNum = a;
                    i.yScale = s.yScale
                }
            }
            var c = t.at(r).selectAll(function(t) {
                return "mark" == t.dynamicProperty("kind")
            });
            i.markCount += c.size();
            i.marksArr.push(c);
            c.type = s.type;
            c.xField = s.xField;
            c.yField = s.yFiels;
            n[s.type]++
        });
        i.needExactChoose = !1;
        if(i.xScale && i.yScale && ("constant" == i.xScale.type() || "constant" == i.yScale.type())) i.needExactChoose = !0;
        else
            for(var r = e.markExactChooseStartIdx; r < e.markMap.length; r++)
                if(n[e.markMap[r]] > 0) {
                    i.needExactChoose = !0;
                    break
                } return i
    }

    function h(t, e) {
        var i = Math.max(t.x, e.x),
            n = Math.max(t.y, e.y),
            r = Math.min(t.x + t.width, e.x + e.width),
            a = Math.min(t.y + t.height, e.y + e.height);
        if(r >= i && a >= n) return {
            x: i,
            y: n,
            width: r - i,
            height: a - n
        };
        else return t
    }

    function f(t, e, n) {
        for(var r = e.span, a = e.xDir, s = e.posStart, l = [], c = 0; c < e.tickCount; c++) l.push([]);
        for(var u = function(t) {
            return Math.floor((t - s) / r)
        }, c = 0; c < e.marksArr.length; c++) {
            var d = e.marksArr[c],
                f = d.type;
            d.each(function(t) {
                var e = t.bbox();
                t.markType = f;
                t.bx = h(e, n);
                e = t.bx;
                t.markCenter = a ? e.x + .5 * e.width : e.y + .5 * e.height;
                var i = u(t.markCenter),
                    r = l[i];
                if(r) r.push(t);
                else console.log("baddddddd  spanIdx", i)
            })
        }
        var p = -999999;
        l.forEach(function(t) {
            if(t.length > 0) {
                var e = [];
                t.forEach(function(t) {
                    for(var r = !0, a = 0; a < e.length; a++) {
                        var s = e[a].center;
                        if(Math.abs(s - t.markCenter) < 1) {
                            e[a].push(t);
                            r = !1;
                            e[a].bx = i.rectMerge(e[a].bx.x, e[a].bx.y, e[a].bx.width, e[a].bx.height, t.bx.x, t.bx.y, t.bx.width, t.bx.height)
                        }
                    }
                    if(r) {
                        var o = [t];
                        o.center = t.markCenter;
                        o.bx = h(t.bbox(), n);
                        e.push(o)
                    }
                });
                t.posMarkArr = e;
                if(e.length > p) p = e.length
            }
        });
        var _ = r / p;
        l.forEach(function(e) {
            if(e.length > 0) {
                var i = !1,
                    r = e.posMarkArr;
                r.forEach(function(e) {
                    var r = e.bx;
                    if(a) {
                        if(r.width < _) {
                            var s = .5 * (_ - r.width);
                            r.x -= s;
                            r.width = _;
                            if(!i) {
                                var l = n.y + .5 * (r.y - n.y),
                                    c = n.y + n.height - .5 * (n.y + n.height - r.y - r.height);
                                r.y = l;
                                r.height = c - l
                            }
                        }
                    } else {
                        var u = .5 * (_ - r.height);
                        r.y -= u;
                        r.height = _;
                        if(!i) {
                            var d = n.x + .5 * (r.x - n.x),
                                f = n.x + n.width - .5 * (n.x + n.width - r.x - r.width);
                            r.x = d;
                            r.width = f - d
                        }
                    }
                    var p = o.create(a);
                    r = h(r, n);
                    p.setSize(r);
                    p.center = e.center;
                    e.forEach(function(t) {
                        p.addPrimitive(t)
                    });
                    t.addNode(p)
                })
            }
        })
    }

    function p(t, e, i, n, r) {
        var a, o, l = 0;
        if("x" == r) {
            a = t.xTickNum;
            o = (n.width - a * l) / a
        } else {
            a = t.yTickNum;
            o = (n.height - a * l) / a
        }
        var d = c(a, n.width, t.markCount),
            h = s.create();
        h.setRoot(i);
        h.genTree(t.xDir, d);
        if(t.needExactChoose || 1 == t.markCount && 1 == d) u(h, t);
        else {
            t.span = o;
            t.tickCount = a;
            t.posStart = t.xDir ? n.x + l : n.y + l;
            f(h, t, n)
        }
    }

    function _(t, e, i, n) {
        var r = (Math.sqrt(t.markCount), c(-1, n.width, t.markCount)),
            a = s.create();
        a.setRoot(i);
        a.genTree(t.xDir, r);
        u(a, t)
    }
    var m = t.selector.kind,
        g = function(t) {
            var e = r.create(),
                i = n.create(),
                a = t.logicSpace;
            i.setSize(a);
            e.setRoot(i);
            for(var s = 0; s < t.length; s++)
                for(var o = 0; o < t[s].length; o++) {
                    var c = t[s][o],
                        u = c.logicSpace,
                        d = n.create();
                    d.setSize(u);
                    i.addChild(d);
                    for(var h = 0; h < c.length; h++)
                        for(var f = 0; f < c[h].length; f++) {
                            var p = c[h][f],
                                _ = p.logicSpace,
                                g = n.create();
                            g.setSize(_);
                            d.addChild(g);
                            var v = c[h][f].cellSelection,
                                y = m("markRoot").apply(v);
                            l(y, g, _, t.mainAxis)
                        }
                }
            return e
        };
    return g
}, 566, 675, 703, 751, 752, 753, 754, 755);
I$(683, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f, p, _, m, g, v, y, b) {
    function x(t) {
        var i = [g, v],
            n = e.extend({
                initialize: function(t, e, i) {
                    this.settype("graph");
                    this.execProto("initialize", t, e, i);
                    this.subTraits(0).__init();
                    new Date;
                    this.setmarksMatrix(t);
                    var n = u.create(t);
                    this.setdataMgr(n);
                    var a = h.create(n);
                    this.setstateMgr(a);
                    this.setspace(t.space);
                    this.setroot($.create());
                    var s = w.select(this.root());
                    this.setrootSelection(s);
                    new Date;
                    this.createGraphGraphic(t);
                    var o = t.gridInfo;
                    this.createGridGraphic(o);
                    var l = t.commonAxisGridInfos;
                    this.createCommonAxisGridInGraph(l);
                    this.createTextTableBg(t.colorRects);
                    if(t.crossMark) {
                        var c = r.buildSlider(s, e.getProp("slider"));
                        if(c.size()) {
                            var d = c.getElement(0, 0),
                                f = d.bbox(),
                                p = t.space;
                            d.setx(f.width / 2);
                            d.sety(p.height - f.height / 2);
                            this.setslider(d)
                        }
                    }
                    new Date;
                    this.buildSpaceTree(t);
                    this.createResponse(e, t)
                },
                rebuildSpaceTree: function() {
                    this.setspaceTree(b(this.marksMatrix()))
                },
                constructTextTableBgInfo: function(t) {
                    if(t) {
                        var e = this.rootSelection();
                        return {
                            rootSelection: e,
                            data: t,
                            theme: this.theme()
                        }
                    }
                },
                createTextTableBg: function(t) {
                    var e = this.constructTextTableBgInfo(t);
                    if(e) {
                        var i = m.create(e);
                        this.settextTableBgGraphic(i)
                    }
                },
                updateTextTableBg: function() {
                    var t = this.marksMatrix().colorRects,
                        e = this.textTableBgGraphic();
                    if(t && e) {
                        var i = this.constructTextTableBgInfo(t);
                        e.update(i)
                    }
                },
                createResponse: function(t, e) {
                    var i = this.constructResponseInfo(t, e);
                    this.subTraits(1).__init(i)
                },
                constructResponseInfo: function(e, i) {
                    var n = {},
                        r = this._morphMgr()._globalVals(),
                        a = r.choose,
                        s = r.response,
                        o = {};
                    o.name = "mark0", o.morph = this;
                    o.enable = "web" == t;
                    var l = e.getProp(["tooltip"]);
                    o.tooltipTheme = l;
                    o.space = i.space;
                    var c = this._morphMgr()._globalVals();
                    if(c.aliasMap) o.aliasMap = c.aliasMap;
                    n.tooltip = o;
                    if(a) {
                        var u = a.guideline;
                        if(u) {
                            var d = {},
                                h = u.type,
                                f = Object.create(u);
                            d.morph = this;
                            d.type = h;
                            d.theme = e;
                            d.enable = null == u.enable ? !0 : u.enable;
                            d.rootSelection = this.rootSelection();
                            d.logicSpace = i.logicSpace;
                            d.data = f;
                            if("x" == h || "y" == h) n.guideline = d;
                            else if("xy" == h) n.guideline = d
                        }
                    }
                    if(s) {
                        var p = s.dragTranslate;
                        if(p) {
                            var _ = {};
                            _.enable = null == p.enable ? !0 : p.enable;
                            _.morph = this;
                            _.logicSpace = i.logicSpace;
                            n.dragTranslate = _
                        }
                        var m = s.frameChoose;
                        if(m) {
                            var g = {};
                            g.enable = null == m.enable ? !0 : m.enable;
                            g.morph = this;
                            g.theme = e;
                            g.rootSelection = this.rootSelection();
                            g.logicSpace = i.logicSpace;
                            n.frameChoose = g
                        }
                    }
                    return n
                },
                updateResponse: function(t, e) {
                    var i = this.constructResponseInfo(t, e);
                    this.updateResponseMgr(i)
                },
                onInputMsg: function(t) {
                    this.processInputMsg(t)
                },
                createGraphGraphic: function(t) {
                    var e = this.constructCellGraphcInfo(t),
                        i = this.pivotAxis(),
                        n = e.map(function(t) {
                            t.pivotAxis = i;
                            return p.create(t)
                        });
                    this.setcellGraphics(n)
                },
                constructCellGraphcInfo: function(t) {
                    for(var e = this.theme(), i = t.length, n = t[0].length, r = [], a = [], s = 0; s < i; ++s)
                        for(var o = 0; o < n; ++o)
                            for(var l = t[s][o], c = 0; c < l.length; ++c)
                                for(var u = 0; u < l[c].length; ++u) {
                                    var d = l[c][u];
                                    d.which = {
                                        paneRow: s,
                                        paneCol: o,
                                        cellRow: c,
                                        cellCol: u,
                                        cellIndex: c
                                    };
                                    r.push(d)
                                }
                    var h = this.rootSelection(),
                        f = S("cell").apply(h).data(r);
                    f.enter().append(k).setDynamicProperty("kind", "cell");
                    f.exit().remove();
                    f = S("cell").apply(h);
                    f.each(function(t) {
                        var i = t.dynamicProperty("data"),
                            n = w.select(t);
                        i.cellSelection = n;
                        var r = i.logicSpace;
                        t.setx(r.x);
                        t.sety(r.y);
                        t.setwidth(r.width);
                        t.setheight(r.height);
                        var s = {
                            theme: e,
                            data: i,
                            logicSpace: r,
                            marklogicSpace: i.marklogicSpace,
                            rootSelection: n
                        };
                        a.push(s)
                    });
                    return a
                },
                resetData: function(t, e) {
                    t = t || this.marksMatrix();
                    e = e || this.theme();
                    this.execProto("resetData", t, e);
                    this.setmarksMatrix(t);
                    this.updateCellGraphics();
                    this.updateGridGraphic();
                    this.updateTextTableBg();
                    this.updateCommonAxisGridGraphic();
                    this.setspace(t.space);
                    this.setspaceTree(b(t));
                    var i = u.create(t);
                    this.setdataMgr(i);
                    var n = h.create(i);
                    this.setstateMgr(n);
                    this.updateResponse(e, t)
                },
                constructGridGraphcInfo: function(t) {
                    t.theme = this.theme();
                    t.kindName = "graphGrid";
                    return t
                },
                createGridGraphic: function(t) {
                    var e = this.constructGridGraphcInfo(t),
                        i = e.kindName,
                        n = this.rootSelection(),
                        r = S(i).apply(n).data([e]);
                    r.enter().append($).setDynamicProperty("kind", i);
                    r.exit().remove();
                    r = S(i).apply(n);
                    t.rootSelection = r;
                    var a = _.create(t);
                    this.setgridGraphic(a)
                },
                constructCommonAxisGridInfo: function(t) {
                    var e = {},
                        i = t.type,
                        n = this.rootSelection(),
                        r = [];
                    for(var a in t) r = r.concat(t[a]);
                    var s = S(i).apply(n).data([r]);
                    s.enter().append($).setDynamicProperty("kind", i);
                    s.exit().remove();
                    s = S(i).apply(n);
                    e.rootSelection = s;
                    e.theme = this.theme();
                    e.data = r;
                    e.kindName = i;
                    return e
                },
                createCommonAxisGridInGraph: function(t) {
                    var e = this.constructCommonAxisGridInfo(t),
                        i = _.create(e);
                    this.setcommonAxisGridGraphic(i)
                },
                updateCommonAxisGridGraphic: function() {
                    var t = this.marksMatrix().commonAxisGridInfos,
                        e = this.commonAxisGridGraphic(),
                        i = this.constructCommonAxisGridInfo(t);
                    e.update(i)
                },
                updateCellGraphics: function() {
                    var t = this.marksMatrix(),
                        e = this.constructCellGraphcInfo(t),
                        i = this.cellGraphics();
                    i.map(function(t, i) {
                        t.update(e[i])
                    })
                },
                updateGridGraphic: function() {
                    var t = this.marksMatrix(),
                        e = this.gridGraphic(),
                        i = this.constructGridGraphcInfo(t.gridInfo);
                    e.update(i)
                },
                updateTheme: function(t) {
                    for(var e = this.cellGraphics(), i = 0; i < e.length; ++i) e[i].updateTheme()
                },
                updateRetina: function() {
                    for(var t = this.cellGraphics(), e = 0; e < t.length; ++e) t[e].updateRetina()
                },
                posRestore: function() {
                    var t = this.cellGraphics();
                    t.map(function(t) {
                        var e = t.markGraphics();
                        e.map(function(t) {
                            var e = t.rootSelection();
                            e.each(function(t) {
                                t.setx(0);
                                t.sety(0);
                                var e = t.clipper(),
                                    i = e ? e.gprim() : null;
                                if(i) {
                                    i.setx(0);
                                    i.sety(0)
                                }
                            })
                        });
                        var i = t.coordGraphic(),
                            n = i.rootSelection();
                        n.each(function(t) {
                            t.setx(0);
                            t.sety(0);
                            var e = t.clipper(),
                                i = e ? e.gprim() : null;
                            if(i) {
                                i.setx(0);
                                i.sety(0)
                            }
                        })
                    })
                },
                animations: function() {
                    for(var t = this.cellGraphics(), e = [], i = 0; i < t.length; ++i) e = e.concat(t[i].animations());
                    return e
                },
                buildSpaceTree: function(t) {
                    var e = (this.rootSelection(), b(t));
                    this.setspaceTree(e)
                }
            }, ["root", "rootSelection", "slider", "textTableBgGraphic", "gridGraphic", "commonAxisGridGraphic", "axisInfos", "spaceTree", "marksMatrix", "cellGraphics", "pivotAxis"], i);
        return n
    }
    var $ = t.ContainerSprite,
        w = (t.BubbleReceiver, t.selection),
        k = t.Rect,
        S = (t.Circle, t.selector.kind);
    t.selector.id;
    return x
}, 566, 749, 658, 750, 654, 751, 752, 753, 754, 755, 756, 675, 757, 758, 759, 760, 761, 762, 763, 703, 764);
I$(765, function(t, e) {
    function i(t, e, i) {
        function n(t, e) {
            var i = t.dynamicProperty("data"),
                n = i.logicSpace;
            t.setx(n.x);
            t.sety(n.y);
            t.setbackgroundWidth(n.width - 1);
            t.setbackgroundHeight(n.height);
            var r = void 0 === i.text ? i.value : i.text;
            t.settext(r + "")
        }
        if(t instanceof Object) {
            t.update && t.update.each(n);
            t.enter && t.enter.each(n)
        } else if(t.selectAll) t.each(n)
    }
    return i
}, 566, 571);
I$(766, function(t, e, i, n) {
    function r(t) {
        var e = t.length;
        if(0 == e) return t;
        for(var i = null, n = t[0], r = 0; r < n.length; r++) {
            var a = n[r];
            a.layerIdx = 0;
            a.father = i;
            a.subs = []
        }
        for(var s = 0; s < e - 1; s++)
            for(var n = t[s], o = t[s + 1], l = 0, r = 0; r < n.length; r++) {
                var c = n[r];
                c.layerIdx = s;
                c.subs = [];
                for(var u = l; u < l + c.childrenNumber; u++) {
                    c.subs.push(o[u]);
                    o[u].father = c;
                    o[u].layerIdx = s + 1;
                    o[u].subs = []
                }
                l += c.childrenNumber
            }
        return t
    }
    var a = (t.PRIVATE, n.extend({
        initialize: function(t) {
            var e = (t.fields, r(t));
            this.execProto("initialize", e);
            return this
        },
        traverse: function(t) {
            var e = this._data()[0];
            if(e)
                for(var n = 0; n < e.length; n++) {
                    var r = e[n];
                    i.depthFirstSearch([r], t)
                }
        }
    }, []));
    return a
}, 571, 656, 654, 831);
I$(768, function(t, e, i, n, r, a, s, o) {
    var l = (t.PRIVATE, i.ContainerSprite, i.selection, o.actorSetProperty),
        c = r.extend({
            initialize: function(t) {
                if(t) {
                    t.type = "pivotAxis";
                    this.execProto("initialize", t)
                }
            },
            buildScene: function() {
                var t = this._info().data,
                    e = a(this._graphicSelection(), t, this);
                this.setselections(e.selections)
            },
            layout: function() {
                for(var t = this._info(), e = this.selections(), i = 0; i < e.length; i++) s(e[i].backgroundText, t.theme, t.type)
            },
            applyTheme: function() {
                for(var t = this.theme(), e = this.selections(), i = this._info().data.className, n = t.getProp("pivotAxis", i), r = 0; r < e.length; ++r) {
                    var a = e[r];
                    for(var s in a) {
                        a[s].update.setProperty(n[s]);
                        a[s].enter.setProperty(n[s])
                    }
                }
            },
            changeMarkState: function(t, e) {
                if(t) {
                    var i = this.theme(),
                        n = this._info().data.className,
                        r = i.getProp("pivotAxis", n);
                    if("normal" == e) var a = r.backgroundText;
                    else {
                        r = i.getProp("pivotAxis", n);
                        var a = r[e].backgroundText
                    }
                    l(t, a)
                }
            }
        }, ["selections"]);
    return c
}, 571, 750, 566, 656, 832, 659, 765, 703);
I$(769, function(t, e, i, n, r) {
    var a = r.extend({
        onOperationMsg: function(t) {
            var e = {
                choose: void 0 == t.actors ? [] : t.actors,
                redraw: !0
            };
            e = this._morphMgr().actionMgr.exec("PivotAxis", t, this, e);
            return e
        }
    }, []);
    return a
}, 566, 571, 703, 675, 824);
I$(684, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f) {
    function p(t) {
        var i = [h, d],
            n = e.extend({
                initialize: function(t, e, i) {
                    this.execProto("initialize", t, e, i);
                    this.subTraits(0).__init();
                    this._initializeParam(t, e);
                    this.setroot(_.create());
                    this.setrootSelection(m.select(this.root()));
                    this.createPivotAxisGraphic(t);
                    this.createGridGraphic(t.gridInfo);
                    this.setspaceTree(null);
                    this.buildSpaceTree(t)
                },
                _initializeParam: function(t, e) {
                    var i = s.create(t);
                    this.setdataMgr(i);
                    var n = l.create(i);
                    this.setstateMgr(n);
                    var r = t.type;
                    this.settype(r);
                    var a = "x" == r ? "top" : "left";
                    this.setorient(a)
                },
                constructGridInfo: function(t) {
                    var e = this.rootSelection(),
                        i = "pivotAxisGrid",
                        n = g(i).apply(e).data([t]);
                    n.enter().append(_).setDynamicProperty("kind", i);
                    n.exit().remove();
                    n = g(i).apply(e);
                    t.rootSelection = n;
                    t.theme = this.theme();
                    t.kindName = i;
                    return t
                },
                constructPivotAxisInfo: function(t) {
                    var e = this.rootSelection(),
                        i = g("pivotAxis").apply(e).data([t]);
                    i.enter().append(_).setDynamicProperty("kind", "pivotAxis");
                    i.exit().remove();
                    i = g("pivotAxis").apply(e);
                    var n = this.theme(),
                        r = {
                            theme: n,
                            data: t,
                            rootSelection: i,
                            logicSpace: t.logicSpace
                        };
                    return r
                },
                updateGrid: function(t) {
                    var e = this.gridGraphic();
                    t = this.constructGridInfo(t);
                    e.update(t)
                },
                updatePivotAxis: function(t) {
                    var e = this.pivotAxisGraphic();
                    if(e) {
                        var i = this.constructPivotAxisInfo(t);
                        e.update(i);
                        var n = e.selections();
                        this.setselections(n)
                    }
                },
                createGridGraphic: function(t) {
                    t = this.constructGridInfo(t);
                    var e = c.create(t);
                    this.setgridGraphic(e)
                },
                createPivotAxisGraphic: function(t) {
                    var e = this.constructPivotAxisInfo(t),
                        i = u.create(e),
                        n = i.selections();
                    this.setselections(n);
                    this.setpivotAxisGraphic(i);
                },
                resetData: function(t, e) {
                    this.execProto("resetData", t, e);
                    this._initializeParam(t, e);
                    this.updateGrid(t.gridInfo);
                    this.updatePivotAxis(t);
                    this.buildSpaceTree(t)
                },
                onInputMsg: function(t) {
                    this.processInputMsg(t)
                },
                buildSpaceTree: function(t) {
                    function e(t, e, i) {
                        t.each(function(t, n) {
                            var a = e[n].logicSpace,
                                s = r.create();
                            s.setSize(a);
                            i.addChild(s);
                            s.addPrimitive(t)
                        })
                    }
                    var i = a.create(),
                        n = r.create(),
                        s = t.logicSpace;
                    n.setSize(s);
                    i.setRoot(n);
                    this.setspaceTree(i);
                    for(var o = this.selections(), l = 0; l < t.length; l++)
                        if(!t[l].hidden) {
                            var c = t[l],
                                u = void 0 == t[l].graphIndex ? l : t[l].graphIndex,
                                d = c.logicSpace,
                                h = r.create();
                            h.setSize(d);
                            n.addChild(h);
                            var f = o[u].backgroundText;
                            if(f.selectAll) e(f, c, h);
                            else {
                                f.update && e(f.update, c, h);
                                f.enter && e(f.enter, c, h)
                            }
                        } else;
                }
            }, ["root", "rootSelection", "orient", "pivotAxisGraphic", "gridGraphic", "type", "selections", "spaceTree"], i);
        return n
    }
    var _ = t.ContainerSprite,
        m = t.selection,
        g = (f.actorSetProperty, t.selector.kind);
    return p
}, 566, 749, 659, 765, 751, 752, 766, 675, 767, 760, 768, 769, 763, 703);
I$(770, function(t, e, i, n, r, a, s) {
    var o = (t.PRIVATE, i.ContainerSprite),
        l = i.selection,
        c = r.extend({
            initialize: function(t) {
                if(t) {
                    if(!t.rootSelection) {
                        var e = l.select(o.create());
                        t.rootSelection = e
                    }
                    this.execProto("initialize", t)
                }
            },
            buildScene: function(t) {
                var e = this._info().data,
                    i = this._graphicSelection(),
                    n = a(i, e, this);
                this.setbackgroundTextSelection(n.backgroundTextSelection)
            },
            layout: function() {
                s(this.backgroundTextSelection(), this._info())
            },
            applyTheme: function() {
                var t = this.theme(),
                    e = this._info().data.className,
                    i = t.getProp(["pivotAxisTitle"], e),
                    n = this.backgroundTextSelection();
                this._info().data.isTextTable;
                if(n.selectAll) n.setProperty(i.backgroundText);
                else {
                    n.update && n.update.setProperty(i.backgroundText);
                    n.enter && n.enter.setProperty(i.backgroundText)
                }
            }
        }, ["backgroundTextSelection"]);
    return c
}, 571, 750, 566, 656, 832, 660, 765);
I$(771, function(t, e, i, n, r) {
    var a = r.extend({
        onOperationMsg: function(t) {
            var e = {
                choose: void 0 == t.actors ? [] : t.actors,
                redraw: !0
            };
            e = this._morphMgr().actionMgr.exec("PivotAxisTitle", t, this, e);
            return e
        }
    }, []);
    return a
}, 566, 571, 703, 675, 824);
I$(685, function(t, e, i, n, r, a) {
    var s = t.ContainerSprite,
        o = t.selection,
        l = t.selector.kind,
        c = e.extend({
            initialize: function(t, e, i) {
                this.execProto("initialize", t, e, i);
                this.subTraits(1).__init();
                this.subscribe("input", function(t) {
                    if("mouseOver" == t.type);
                });
                var n = s.create(),
                    r = o.select(n);
                this.setroot(n);
                this.setrootSelection(r);
                this.createPivotTitleGraphic(t, e);
                if(t.gridInfo) this.createGridGraphic(t.gridInfo)
            },
            constructPivotTitleInfo: function(t, e) {
                var i = t.logicSpace,
                    n = this.rootSelection(),
                    r = {
                        theme: e,
                        data: t,
                        space: t.space,
                        logicSpace: i,
                        rootSelection: n
                    };
                return r
            },
            constructGridInfo: function(t) {
                var e = this.rootSelection(),
                    i = "pivotTitleGrid",
                    n = l(i).apply(e).data([t]);
                n.enter().append(s).setDynamicProperty("kind", i);
                n.exit().remove();
                n = l(i).apply(e);
                t.rootSelection = n;
                t.theme = this.theme();
                t.kindName = i;
                return t
            },
            createPivotTitleGraphic: function(t, e) {
                var n = this.constructPivotTitleInfo(t, e),
                    r = i.create(n);
                this.setpivotTitleGraphic(r)
            },
            createGridGraphic: function(t) {
                t = this.constructGridInfo(t);
                var e = n.create(t);
                this.setgridGraphic(e)
            },
            updatePivotTitleGraphic: function(t, e) {
                var i = this.constructPivotTitleInfo(t, e),
                    n = this.pivotTitleGraphic();
                n.update(i)
            },
            updateGridGraphic: function(t) {
                t = this.constructGridInfo(t);
                var e = this.gridGraphic(t);
                e.update(t)
            },
            onInputMsg: function(t) {
                if("mouseClicked" == t.type) this.processInputMsg(t)
            },
            resetData: function(t, e) {
                this.execProto("resetData", t, e);
                this.updatePivotTitleGraphic(t, e);
                if(t.gridInfo) this.updateGridGraphic(t.gridInfo)
            }
        }, ["rootSelection", "root", "pivotTitleGraphic", "gridGraphic"], [r, a]);
    return c
}, 566, 749, 770, 760, 771, 763);
I$(772, function(t, e, i) {
    t.CUSTOM_SETTER;
    Scrollbar = e.extend({
        initialize: function(t, e, i) {
            this.execProto("initialize", t, e, i);
            this.setlogicSize(t.logicSize);
            this.setscreenSize(t.screenSize);
            this.setorient(t.orient);
            var n = t.orient,
                r = document.createElement("div");
            r.className = t.orient + "_scroll";
            this.setscrollEle(r);
            r.style.position = "absolute";
            var a = document.createElement("div");
            this.setinnerEle(a);
            a.style.position = "absolute";
            r.appendChild(a);
            this.updateSpace(t);
            var s = this,
                o = 0,
                l = 0,
                c = {
                    eventType: "logic",
                    type: "moveBy",
                    dx: 0,
                    dy: 0,
                    x: 0,
                    y: 0
                };
            if("horizontal" == n) var u = function(t) {
                var e = t.srcElement ? t.srcElement : t.target;
                c.orient = "horizontal";
                c.dx = -e.scrollLeft + o;
                c.dy = 0;
                c.x = -e.scrollLeft;
                c.y = -e.scrollTop;
                o = e.scrollLeft;
                l = e.scrollTop;
                s.notify("output", c)
            };
            else var u = function(t) {
                var e = t.srcElement ? t.srcElement : t.target;
                c.dx = 0;
                c.dy = -e.scrollTop + l;
                c.orient = "vertical";
                c.x = -e.scrollLeft;
                c.y = -e.scrollTop;
                o = e.scrollLeft;
                l = e.scrollTop;
                s.notify("output", c)
            };
            r.onscroll = u
        },
        updateSpace: function(t) {
            var e = this.scrollEle(),
                i = this.innerEle(),
                n = this.orient();
            e.style.left = t.x + "px";
            e.style.top = t.y + "px";
            e.style.height = t.screenSize.height + "px";
            e.style.width = t.screenSize.width + "px";
            i.style.height = t.logicSize.height + "px";
            i.style.width = t.logicSize.width + "px";
            i.style.left = 0;
            i.style.top = 0;
            if("horizontal" == n) {
                if(t.logicSize.width - t.screenSize.width > .2) e.style.overflowX = "scroll";
                else e.style.overflowX = "hidden";
                e.style.overflowY = "hidden"
            } else {
                if(t.logicSize.height - t.screenSize.height > .2) e.style.overflowY = "scroll";
                else e.style.overflowY = "hidden";
                e.style.overflowX = "hidden"
            }
        }
    }, ["logicSize", "screenSize", "scrollEle", "orient", "innerEle"]);
    return Scrollbar
}, 571, 749, 675);
I$(686, function(t, e, i, n) {
    t.CUSTOM_SETTER;
    ScrollGraph = e.extend({
        initialize: function(t, e, r) {
            this.execProto("initialize", t, e, r);
            var a = i.ScrollSize,
                s = (t.innerData, t.graphSpace),
                o = t.scrollLogicSpace,
                l = t.xScrollSpace,
                c = t.yScrollSpace,
                u = t.bottomSpace ? t.bottomSpace.height : 0,
                d = u,
                h = 0;
            if(l) d += a.horizontal;
            if(c) h = a.vertical;
            var f = n.create({
                orient: "horizontal",
                logicSize: {
                    width: o.width + h,
                    height: o.height
                },
                screenSize: {
                    width: s.width + h,
                    height: s.height + d
                },
                x: s.x,
                y: s.y
            }, e);
            this.setxScroll(f);
            var p = n.create({
                orient: "vertical",
                logicSize: {
                    width: o.width,
                    height: o.height
                },
                screenSize: {
                    width: s.width + h,
                    height: s.height
                },
                x: 0,
                y: 0
            }, e);
            this.setyScroll(p);
            f.scrollEle().appendChild(p.scrollEle());
            this.setscrollEle(f.scrollEle());
            var _ = p.scrollEle();
            f.listenOutputMsg(function(t) {
                _.style.left = -t.x + "px";
                _.style.top = -t.y + "px"
            })
        },
        updateSpace: function(t) {
            var e = i.ScrollSize,
                n = (t.innerData, t.graphSpace),
                r = t.scrollLogicSpace,
                a = t.xScrollSpace,
                s = t.yScrollSpace,
                o = t.bottomSpace ? t.bottomSpace.height : 0,
                l = o,
                c = 0;
            if(a) l += e.horizontal;
            if(s) c = e.vertical;
            var u = this.xScroll();
            u.updateSpace({
                logicSize: {
                    width: r.width + c,
                    height: r.height
                },
                screenSize: {
                    width: n.width + c,
                    height: n.height + l
                },
                x: n.x,
                y: n.y
            });
            var d = this.yScroll();
            d.updateSpace({
                logicSize: r,
                screenSize: {
                    width: n.width + c,
                    height: n.height
                },
                x: 0,
                y: 0
            })
        }
    }, ["scrollEle", "xScroll", "yScroll"]);
    return ScrollGraph
}, 571, 749, 675, 772);
I$(773, function(t, e, i, n, r, a, s) {
    var o = (t.PRIVATE, e.creatorMap),
        l = (i.ContainerSprite, i.selection, a.actorSetProperty),
        c = i.selector,
        u = c.kind,
        d = r.extend({
            initialize: function(t) {
                if(t) this.execProto("initialize", t)
            },
            buildScene: function() {
                var t = this._info(),
                    e = t.data,
                    i = t.type,
                    n = t.theme.getProp(["legends", t.data.scale.__name]),
                    r = o["legend"].sceneBuilder(this._graphicSelection(), e, i, e.option, n, t.platform),
                    a = this._graphicSelection().selectAll(function(t) {
                        return "mark" == t.dynamicProperty("kind")
                    }),
                    s = this;
                a.each(function(t, e) {
                    t.setDynamicProperty("graphic", s)
                });
                this._t.setselectionMap(r)
            },
            applyTheme: function() {
                var t = this._info(),
                    e = t.theme.getProp(["legends", t.data.scale.__name]),
                    i = this.selectionMap();
                s.applyMarkSelectionMapTheme(e, i)
            },
            updateTheme: function() {
                this.applyTheme();
                this.layout()
            },
            layout: function() {
                var t = this._info();
                o["legend"].layout(t.data, this._graphicSelection(), t.space, t.theme, t.which, t.type, t.platform)
            },
            update: function(t) {
                this.info(t);
                this.buildScene();
                this.updateTheme()
            },
            changeMarkState: function(t, e) {
                if(t) {
                    var i = this._info(),
                        n = i.theme,
                        r = n.getProp(["legends", i.data.scale.__name]);
                    if("normal" == e) var a = r[t.dynamicProperty("kind")];
                    else if(null == r[e]) return;
                    else a = r[e][t.dynamicProperty("kind")];
                    l(t, a);
                    this.__updateRetina__ = !0
                }
            },
            updateRetina: function() {
                var t = this._graphicSelection(),
                    e = this._info(),
                    i = e.theme,
                    n = this.type();
                if(this.__updateRetina__ && "colorOrdinal" != n && "shape" != n) {
                    var r, a, o = i.getProp(["legend"])["sizeLinear"]["drag"]["frame"],
                        l = i.getProp(["legend"])["sizeLinear"],
                        c = i.getProp(["legend"])["colorLinear"],
                        d = "sizeLinear" == n ? l["visualProperties"].rect.width : c["visualProperties"].rect.width,
                        h = o.unselected,
                        f = u("mark").apply(t),
                        p = u("frame").apply(t),
                        _ = f.getElement(0, 0),
                        m = f.getElement(0, 1),
                        g = p.getElement(0, 0);
                    if("sizeLinear" == n) r = a = o.selected;
                    else {
                        r = _.dynamicProperty("color");
                        a = m.dynamicProperty("color")
                    }
                    var v = s.changeGradient(h, r, a, 0, d, _.x(), m.x());
                    g.setfillStyle(v)
                }
                this.__updateRetina__ = !1
            }
        }, ["selectionMap"]);
    return d
}, 571, 734, 566, 656, 832, 703, 654);
I$(774, function(t, e, i) {
    var n = (t.PRIVATE, i.extend({
        initialize: function(t) {
            this.execProto("initialize", t);
            this.set_data(t);
            return this
        },
        traverse: function(t) {
            for(var e = this._data(), i = 0; i < e.length; ++i)
                for(var n = e[i].data, r = 0; r < n.length; ++r) t(n[r].data)
        }
    }, []));
    return n
}, 571, 656, 831);
I$(775, function(t, e, i, n, r) {
    function a(t) {
        if(t.dynamicProperty("themeOwner")) return t.dynamicProperty("themeOwner");
        if(t.parent()) return a(t.parent());
        else;
    }
    var s = {},
        o = r.extend({
            __init: function() {
                this._t.setdragInfo({})
            },
            onLogicMsg: function(t) {
                if("select" == t.type) {
                    var e = this.stateMgr();
                    e.processFocusWithCondition(t.predicate);
                    this.updateRetina(t.type);
                    this.notify("output", {
                        eventType: "logic",
                        type: "redraw",
                        morph: this
                    })
                } else if("cancelSelect" == t.type || "cancelLegendSelect" == t.type) {
                    var e = this.stateMgr();
                    e.cancelState(n.state.focus);
                    this.updateRetina(t.type);
                    this.notify("output", {
                        eventType: "logic",
                        type: "redraw",
                        morph: this
                    })
                }
            },
            onOperationMsg: function(t) {
                var e = {
                    choose: void 0 == t.actors ? [] : t.actors,
                    redraw: !0,
                    slider: s
                };
                if(e.choose[0] && "text" == e.choose[0].dynamicProperty("data").type) {
                    var i = e.choose[0].parent(),
                        n = i.children() ? i.children()[0] : null;
                    e.choose[0] = n
                }
                if(e.choose[0]) {
                    var r = a(e.choose[0]),
                        o = r ? r.type() : null;
                    e.legendType = o
                }
                e = this._morphMgr().actionMgr.exec("Legend", t, this, e);
                s = e.slider;
                return e
            }
        }, ["chooseData", "dragInfo"]);
    return o
}, 566, 571, 703, 675, 824);
I$(687, function(t, e, i, n, r, a, s, o, l, c, u, d) {
    function h(t, e, i) {
        var n = t.selectAll(function(t) {
            return t.dynamicProperty("kind") == i;
        }).data([e]);
        n.enter().append(_).setDynamicProperty("kind", i);
        n.exit().remove();
        n = t.selectAll(function(t) {
            return t.dynamicProperty("kind") == i
        });
        var r = n.selectAll(function(t) {
            return "legend" == t.dynamicProperty("kind")
        }).data(e);
        r.enter().append(_).setDynamicProperty("kind", "legend");
        r.exit().remove();
        r = n.selectAll(function(t) {
            return "legend" === t.dynamicProperty("kind")
        });
        return r
    }

    function f(t, e, i) {
        var n = {};
        n.logicSpace = t;
        n.type = i;
        var r, a = new Array;
        if(!i) {
            var s = v("mark").apply(e);
            s.each(function(t, e) {
                r = t.bbox();
                var i = t.dynamicProperty("data");
                a.push({
                    data: i,
                    logicSpace: r
                })
            });
            var o = v("text").apply(e);
            o.each(function(t, e) {
                r = t.bbox();
                var i = t.dynamicProperty("data");
                a.push({
                    data: i,
                    logicSpace: r
                })
            })
        } else {
            var l = v("mark").apply(e),
                c = l.getElement(0, 0),
                u = l.getElement(0, 1),
                d = c.bbox(),
                h = u.bbox(),
                f = c.dynamicProperty("data"),
                p = u.dynamicProperty("data"),
                _ = c.x(),
                m = u.x();
            f.__border = [_, m];
            p.__border = [_, m];
            f.__bordervalue = [f.data, p.data];
            p.__bordervalue = [f.data, p.data];
            f.__relativeMark = u;
            p.__relativeMark = c;
            a.push({
                data: f,
                logicSpace: d
            });
            a.push({
                data: p,
                logicSpace: h
            })
        }
        n.data = a;
        return n
    }

    function p(t) {
        var e = [u, d],
            i = n.extend({
                initialize: function(t, e, i) {
                    this.execProto("initialize", t, e, i);
                    this.subTraits(0).__init();
                    this.subTraits(1).__init();
                    this.setdata(t.data);
                    this.setroot(_.create());
                    this.setrootSelection(m.select(this.root()));
                    t.rootSelection = this.rootSelection();
                    t.theme = e;
                    this.buildGraphic(t);
                    this.setparam(t);
                    var n = o.create(this.spaceData());
                    this.setdataMgr(n);
                    var r = s.create(n);
                    this.setstateMgr(r);
                    this.setspaceTree(null);
                    this.buildSpaceTree(this.spaceData());
                    var t = {};
                    t.morph = this
                },
                buildSpaceTree: function(t) {
                    var e = c.create(),
                        i = l.create(),
                        n = this.space();
                    i.setSize(n);
                    e.setRoot(i);
                    this.setspaceTree(e);
                    t.forEach(function(t) {
                        var e = l.create();
                        e.setSize(t.logicSpace);
                        i.addChild(e);
                        t.data.forEach(function(t) {
                            var i = t.data.innerMark;
                            e.addPrimitive(i)
                        })
                    })
                },
                buildGraphic: function(e) {
                    var i, n, a, s, o, l = [],
                        c = this.root(),
                        u = this.rootSelection(),
                        d = this.data(),
                        p = new Array,
                        _ = (e.space, e.theme);
                    c.setx(0);
                    c.sety(0);
                    for(var g = 0; g < y.length; g++) {
                        var v = y[g];
                        if(!(null == d[v] || d[v].length <= 0)) {
                            o = d[v];
                            n = h(u, o, v);
                            for(var b = 0; b < o.length; b++) {
                                a = o[b];
                                s = m.select(n.getElement(0, b));
                                var x = r.create({
                                    data: a,
                                    rootSelection: s,
                                    space: a.space,
                                    theme: _,
                                    which: i,
                                    type: v,
                                    platform: t
                                });
                                l.push(x);
                                var $ = x._graphicSelection();
                                if("shape" == v || "colorOrdinal" == v || "sizeOrdinal" == v) p.push(f(a.space, $, !1));
                                else p.push(f(a.space, $, !0))
                            }
                        } else;
                    }
                    this.setspaceData(p);
                    this.setgraphics(l)
                },
                resetData: function(t, e) {
                    this.execProto("resetData", t, e);
                    for(var i = this.graphics(), n = this.rootSelection(), e = this.theme(), r = t.data, a = [], s = 0, o = 0; o < y.length; ++o) {
                        var l = y[o];
                        if(!(null == r[l] || r[l] <= 0))
                            for(var c = r[l], u = h(n, c, l), d = 0; d < c.length; ++d) {
                                var p = c[d],
                                    _ = m.select(u.getElement(0, d)),
                                    g = {
                                        data: p,
                                        rootSelection: _,
                                        space: p.space,
                                        theme: e,
                                        type: l,
                                        platform: t.platform
                                    };
                                i[s].update(g);
                                var v = i[s++]._graphicSelection();
                                if("shape" == l || "colorOrdinal" == l || "sizeOrdinal" == l) a.push(f(p.space, v, !1));
                                else a.push(f(p.space, v, !0))
                            } else;
                    }
                    this.setspaceData(a);
                    this.buildSpaceTree(a)
                },
                onInputMsg: function(t) {
                    this.processInputMsg(t)
                },
                updateTheme: function() {
                    for(var t = this.graphics(), e = 0; e < t.length; ++e) t[e].updateTheme()
                },
                updateRetina: function(t, e) {
                    if("cancelLegendSelect" == t || "cancelSelect" == t || "recoverContinuous" == t || "dragCancel" == t) {
                        var i, n, r, t, a, s, o, l, c, u, d;
                        this.spaceData();
                        n = this.graphics();
                        for(var h = 0; h < n.length; ++h) {
                            i = n[h];
                            t = i.type();
                            if("colorOrdinal" != t && "sizeOrdinal" != t && "shape" != t) {
                                r = i._graphicSelection();
                                a = v("mark").apply(r);
                                s = a.getElement(0, 0);
                                o = a.getElement(0, 1);
                                if(!e || s !== e && o !== e) {
                                    l = s.dynamicProperty("data");
                                    c = o.dynamicProperty("data");
                                    if(true) {
                                        s.setx(l.__border[0]);
                                        u = s.children()[0];
                                        d = u.dynamicProperty("format");
                                        u.settext(d(l.__bordervalue[0]));
                                        s.dynamicProperty("data").data = l.__bordervalue[0];
                                        o.setx(c.__border[1]);
                                        u = o.children()[0];
                                        d = u.dynamicProperty("format");
                                        u.settext(d(c.__bordervalue[1]));
                                        o.dynamicProperty("data").data = c.__bordervalue[1];
                                        i.changeMarkState(s, "normal");
                                        i.changeMarkState(o, "normal")
                                    }
                                } else;
                            } else;
                        }
                    }
                    for(var n = this.graphics(), h = 0; h < n.length; ++h) n[h].updateRetina()
                }
            }, ["root", "rootSelection", "data", "spaceData", "spaceTree", "graphics", "param"], e);
        return i
    }
    var _ = t.ContainerSprite,
        m = t.selection,
        g = (t.Rect, t.selector),
        v = g.kind,
        y = ["colorOrdinal", "shape", "colorLinear", "sizeLinear"];
    return p
}, 566, 571, 745, 749, 773, 654, 767, 774, 751, 752, 775, 763);
I$(776, function(t, e, i, n) {
    var r = n.extend({
        __init: function() {
            this._t.setdragInfo({})
        },
        onLogicMsg: function(t) {
            if("emphasisUpdate" == t.type) this._onEmphasisUpdate(t);
            else if("emphasisHide" == t.type) this._onEmphasisHide(t)
        },
        _onEmphasisUpdate: function(t) {
            var e = this._genDefaultText(t),
                i = this._textInfoSelection,
                n = this._textTitleSelection,
                r = this._textAlign,
                a = this.param(),
                s = a.context;
            if("top" == a.position && "mobile" == a.platform && 0 != a.oneline) this.outputMsg({
                eventType: "logic",
                type: "destroyLegend",
                morph: this
            });
            if(void 0 == s) {
                var o = e.textStr;
                if(0 == a.oneline) {
                    var l = 0;
                    i.each(function(t) {
                        t.settexts([o[1]]);
                        l = t.styles()[0].font.size + t.styles()[0].lineSpacing
                    });
                    this._alignText(a, i, r);
                    n.each(function(t) {
                        t.settexts([o[0]]);
                        t.sety(l)
                    });
                    this._alignText(a, n, r)
                } else {
                    n.each(function(t) {
                        t.settexts([o[1]])
                    });
                    this._alignText(a, n, r)
                }
            } else {
                var o = s(e.textObj);
                if(o.length > 1) {
                    var l = 0;
                    i.each(function(t) {
                        t.settexts([o[1]]);
                        l = t.styles()[0].font.size + t.styles()[0].lineSpacing
                    });
                    this._alignText(a, i, r);
                    n.each(function(t) {
                        t.settexts([o[0]]);
                        t.sety(l)
                    });
                    this._alignText(a, n, r)
                } else {
                    n.each(function(t) {
                        t.settexts([o[0]])
                    });
                    this._alignText(a, n, r)
                }
            }
            this.outputMsg({
                eventType: "logic",
                type: "redraw",
                morph: this
            })
        },
        _onEmphasisHide: function(t) {
            var e = this._textInfoSelection,
                i = this._textTitleSelection;
            e.each(function(t) {
                t.settexts([])
            });
            i.each(function(t) {
                t.settexts([])
            });
            this.outputMsg({
                eventType: "logic",
                type: "redraw",
                morph: this
            })
        },
        _genDefaultText: function(t) {
            for(var e, i = [], n = {}, r = 0; r < t.chooseActor.length; r++) {
                for(var a = t.chooseActor[r], s = a.dynamicProperty("data"), o = a.dynamicProperty("graphic"), l = o.getFields(), c = 0; c < l.length; c++) {
                    var u = l[c],
                        d = s[u];
                    i.push(d)
                }
                n = s.__proto__
            }
            var h = {
                textStr: i,
                textObj: n,
                format: e
            };
            return h
        },
        _alignText: function(t, e, i) {
            e.each(function(e) {
                if("center" == i) e.setx((t.space.width - e.bbox().width) / 2);
                else if("left" == i);
                else if("right" == i) e.setx(t.space.width - e.bbox().width)
            })
        },
        onOperationMsg: function(t) {
            var e = {
                choose: void 0 == t.actors ? [] : t.actors,
                redraw: !0
            };
            e = this._morphMgr().actionMgr.exec("Emphasis", t, this, e);
            return e
        }
    }, ["dragInfo"]);
    return r
}, 566, 571, 703, 824);
I$(688, function(t, e, i, n, r, a, s, o, l) {
    var c = t.ContainerSprite,
        u = t.selection,
        d = t.Rect,
        h = t.selector,
        f = t.MultilineText,
        p = (h.kind, i.extend({
            initialize: function(t, e, i) {
                this.execProto("initialize", t, e, i);
                this.subTraits(0).__init();
                this.subTraits(1).__init();
                this.setroot(c.create());
                this.setrootSelection(u.select(this.root()));
                this.settheme(e);
                this.setparam(t);
                t.rootSelection = this.rootSelection();
                t.theme = e;
                this.build(t);
                this.layout(t)
            },
            build: function(t) {
                if(null == t) i = [];
                var e = this.rootSelection(),
                    i = e.select(function(t) {
                        return "emphasis" === t.dynamicProperty("kind")
                    }).data(["emphasis"]);
                i.enter().append(c).setDynamicProperty("kind", "emphasis");
                i.exit().remove();
                i = e.select(function(t) {
                    return "emphasis" === t.dynamicProperty("kind")
                });
                var n = i.select(function(t) {
                    return "background" === t.dynamicProperty("kind")
                }).data(["emphasis"]);
                n.enter().append(d).setDynamicProperty("kind", "background");
                n.exit().remove();
                n = i.select(function(t) {
                    return "background" === t.dynamicProperty("kind")
                });
                var r = i.select(function(t) {
                    return "textInfo" === t.dynamicProperty("kind")
                }).data(["emphasis"]);
                r.enter().append(f).setDynamicProperty("kind", "textInfo");
                r.exit().remove();
                r = i.select(function(t) {
                    return "textInfo" === t.dynamicProperty("kind")
                });
                var a = i.select(function(t) {
                    return "textTitle" === t.dynamicProperty("kind")
                }).data(["emphasis"]);
                a.enter().append(f).setDynamicProperty("kind", "textTitle");
                a.exit().remove();
                a = i.select(function(t) {
                    return "textTitle" === t.dynamicProperty("kind")
                });
                this._backgroundSelection = n;
                this._textInfoSelection = r;
                this._textTitleSelection = a
            },
            layout: function(t) {
                var e = this.theme().getProp(["emphasis"]),
                    i = this._backgroundSelection,
                    n = this._textInfoSelection,
                    r = this._textTitleSelection;
                i.setProperty("x", 0);
                i.setProperty("y", 0);
                i.setProperty("height", t.space.height);
                i.setProperty("width", t.space.width);
                n.each(function(t) {
                    t.settexts([])
                });
                r.each(function(t) {
                    t.settexts([])
                });
                i.setProperty(e.background);
                n.setProperty(e.textInfo);
                r.setProperty(e.textTitle);
                this._textAlign = e.align;
                if(void 0 != t.align) this._textAlign = t.align
            },
            onInputMsg: function(t) {
                this.processInputMsg(t)
            }
        }, ["theme", "root", "rootSelection", "param"], [l, o]));
    return p
}, 566, 571, 749, 654, 767, 751, 752, 763, 776);
I$(689, function(t, e, i, n, r, a, s, o) {
    var l = (t.ContainerSprite, t.selection),
        c = (t.Rect, t.selector),
        u = c.kind,
        d = {
            mouseover: "#f5f5f5",
            mouseout: "#fff",
            mousedown: "#ddd",
            mouseup: "#f5f5f5"
        },
        h = i.extend({
            initialize: function(t, e, i) {
                this.execProto("initialize", t, e, i);
                this.set_ratio(1);
                var n = t.container,
                    r = n;
                this.setcontainer(r);
                r.getElementsByClassName("vertical_scroll")[0].style.cursor = "move";
                var a = t.toolsMap,
                    s = {};
                for(var o in a) {
                    var l = document.createElement("div"),
                        c = document.createElement("img");
                    l.appendChild(c);
                    var u = {
                        parent: l,
                        child: c,
                        class: o,
                        info: a[o]
                    };
                    s[o] = u;
                    r.appendChild(l)
                }
                this.settoolElementMap(s);
                this.applyStyle(s)
            },
            resetData: function(t, e) {
                this.execProto("resetData", t, e);
                var i = this.toolElementMap(),
                    n = t.toolsMap;
                for(var r in i) {
                    var a = i[r];
                    a.info = n[r]
                }
                this.applyStyle(i)
            },
            applyStyle: function(t) {
                var e, i;
                for(var n in t) {
                    e = t[n].parent;
                    i = t[n].child;
                    var r = t[n].info.bbox,
                        a = t[n].info.stateImgSrc.initial;
                    e.className = t[n].class;
                    e.style.position = "absolute";
                    e.style.left = r.x + "px";
                    e.style.top = r.y + "px";
                    e.style.height = r.height + "px";
                    e.style.width = r.width + "px";
                    e.style.zIndex = 1e6;
                    e.style.border = "1px solid #ddd";
                    i.style.width = r.width + "px";
                    i.style.height = r.height + "px";
                    i.src = a
                }
            },
            destroy: function() {
                var t = this.toolElementMap();
                for(var e in t) {
                    var i = t[e].parent;
                    i.parentNode.removeChild(i)
                }
            },
            findCenter: function(t) {
                var e = t.morphMgr().morphs().graph,
                    i = e.cellGraphics().length > 0 ? e.cellGraphics()[0] : void 0;
                if(null != i) {
                    var n = i._info().logicSpace,
                        r = i.coordGraphic()._info().data.path.projection(),
                        a = e.root(),
                        s = l.select(a),
                        o = u("cell").apply(s),
                        c = l.select(o.getElement(0, 0)),
                        d = u("markRoot").apply(c).getElement(0, 0),
                        h = n.width / 2 - d.x(),
                        f = n.height / 2 - d.y(),
                        p = r.invert([h, f], !0);
                    if(Math.abs(p[0]) <= 180 && Math.abs(p[1]) < 89) return {
                        pixelCenter: [h, f],
                        geoCenter: p
                    };
                    else;
                }
            },
            searchWhichGraphic: function(t, e, i) {
                for(var n, r, a = 0; a < i.length; ++a) {
                    n = i[a];
                    r = n._info().logicSpace;
                    if(t >= r.x && t <= r.x + r.width && e >= r.y && e <= r.y + r.height) return n
                }
            },
            getScrollXY: function(t, e, i) {
                var n = this._chart(),
                    r = n.morphMgr().morphs().graph,
                    a = this._ratio(),
                    s = r.cellGraphics().length > 0 ? this.searchWhichGraphic(t, e, r.cellGraphics()) : void 0;
                if(null != s) {
                    var o = s.coordGraphic()._info().data.path.projection(),
                        c = s._info().logicSpace,
                        d = r.root(),
                        h = l.select(d),
                        f = u("cell").apply(h),
                        p = l.select(f.getElement(0, 0)),
                        _ = u("markRoot").apply(p).getElement(0, 0),
                        m = t - c.x - _.x(),
                        g = e - c.y - _.y(),
                        v = o.invert([m, g], !0);
                    if(Math.abs(v[0]) <= 180 && Math.abs(v[1]) < 89) {
                        var y = {
                            pixelCenter: [m, g],
                            geoCenter: v
                        };
                        a += i / 300;
                        if(a * c.width < 300 || a * c.height < 280) a = Math.max(300 / c.width, 300 / c.height);
                        this.set_ratio(a);
                        var b = this.toolElementMap();
                        b.reset.child.src = b.reset.info.stateImgSrc.dirty;
                        n.rescale(a, y)
                    } else;
                }
            },
            addZoomListener: function(t) {
                var e, i = this._ratio(),
                    n = .2,
                    r = this,
                    a = t;
                this.set_chart(t);
                var s = t.morphMgr().morphs().graph,
                    o = s.cellGraphics().length > 0 ? s.cellGraphics()[0] : void 0;
                if(null != o) {
                    var l = o._info().logicSpace;
                    s.enableResponse("frameChoose", !1);
                    var c = this.toolElementMap(),
                        u = c && c.reset,
                        d = c && c.zoomin,
                        h = c && c.zoomout,
                        f = c && c.frameChoose;
                    if(h) {
                        var p = function(s) {
                            i = r._ratio();
                            i -= n;
                            if(i * l.width < 300 || i * l.height < 280) i = Math.max(300 / l.width, 300 / l.height);
                            r.set_ratio(i);
                            if(u) u.child.src = u.info.stateImgSrc.dirty;
                            e = r.findCenter(t);
                            a.rescale(i, e)
                        };
                        h.parent.onclick = p
                    }
                    if(d) {
                        var _ = function(s) {
                            i = r._ratio();
                            i += n;
                            r.set_ratio(i);
                            if(u) u.child.src = u.info.stateImgSrc.dirty;
                            e = r.findCenter(t);
                            a.rescale(i, e)
                        };
                        d.parent.onclick = _
                    }
                    if(u) {
                        var m = function(t) {
                            u.child.src = u.info.stateImgSrc.initial;
                            i = 1;
                            r.set_ratio(i);
                            s.posRestore();
                            a.rescale(i, void 0, !0)
                        };
                        u.parent.onclick = m
                    }
                    var r = this;
                    if(f) {
                        var g = function(t) {
                            var e = s.responseEnable("frameChoose");
                            if(e) {
                                s.enableResponse("frameChoose", !1);
                                f.child.src = f.info.stateImgSrc.initial;
                                r.container().getElementsByClassName("vertical_scroll")[0].style.cursor = "move"
                            } else {
                                r.container().getElementsByClassName("vertical_scroll")[0].style.cursor = "default";
                                s.enableResponse("frameChoose", !0);
                                f.child.src = f.info.stateImgSrc.on
                            }
                        };
                        f.parent.onclick = g
                    }
                    this.addHoverListenerForAll();
                    this.addMouseDownForAll()
                }
            },
            addHoverListenerForAll: function() {
                var t, e = function(e) {
                        t = e.currentTarget;
                        t.style.backgroundColor = d.mouseover
                    },
                    i = function(e) {
                        t = e.currentTarget;
                        t.style.backgroundColor = d.mouseout
                    },
                    n = this.toolElementMap();
                for(var r in n) {
                    n[r].parent.onmouseout = i;
                    n[r].parent.onmouseover = e
                }
            },
            addMouseDownForAll: function() {
                var t, e = function(e) {
                        t = e.currentTarget;
                        t.style.backgroundColor = d.mousedown
                    },
                    i = function(e) {
                        t = e.currentTarget;
                        t.style.backgroundColor = d.mouseup
                    },
                    n = this.toolElementMap();
                for(var r in n) {
                    n[r].parent.onmousedown = e;
                    n[r].parent.onmouseup = i
                }
            },
            processInputMsg: function(t) {
                var e = this.toolElementMap();
                if("mapDrag" == t.type && e && e.reset) e.reset.child.src = e.reset.info.stateImgSrc.dirty;
                else if("wheel" == t.type) {
                    var i = t.oriEvt.sourceEvt;
                    if(i.preventDefault) i.preventDefault();
                    else if(window.event) window.event.returnValue = !1;
                    this.getScrollXY(t.oriEvt.gameX, t.oriEvt.gameY, t.oriEvt.wheelDelta)
                }
            }
        }, ["space", "root", "_searchOnClick", "elementsSet", "toolElementMap", "container", "_chart", "_ratio"]);
    return h
}, 566, 571, 749, 654, 767, 774, 751, 752);
I$(843, function(t, e, i, n, r, a) {
    var s = (t.PRIVATE, e.creatorMap),
        o = (i.ContainerSprite, i.selection, i.selector.kind),
        l = a.actorSetProperty,
        c = r.extend({
            initialize: function(t) {
                if(t) {
                    this.setclassName(t.data.className);
                    t.type = "statisticLine";
                    this.execProto("initialize", t)
                }
            },
            update: function(t) {
                this.set_info(t);
                this.buildScene();
                this.applyTheme();
                this.layout()
            },
            buildScene: function() {
                var t = this._info(),
                    e = t.data,
                    i = this._graphicSelection(),
                    n = s["statistics"][this.type()].sceneBuilder(this._graphicSelection(), e);
                this._t.setselectionMap(n);
                var r = this,
                    a = o("beginLine").apply(i);
                a.each(function(t, e) {
                    t.setDynamicProperty("graphic", r)
                })
            },
            applyTheme: function() {
                var t = this.theme().getProp(["statisticLine"], this.className()),
                    e = this.selectionMap();
                for(var i in e) e[i].setProperty(t[i])
            },
            layout: function() {
                var t = this._info(),
                    e = (this.type(), t.data.tags),
                    i = null != e && null != e.begin ? e.begin : null;
                s["statistics"][this.type()].layout(this._graphicSelection(), "line", i)
            },
            changeMarkState: function(t, e) {
                var i = this.theme().getProp(["statisticLine"], this.className());
                if("normal" == e) var n = i.mark;
                else var n = i[e].mark;
                l(t, n)
            }
        }, ["selectionMap"]);
    return c
}, 571, 734, 566, 656, 832, 703);
I$(844, function(t, e, i, n, r, a) {
    var s = (t.PRIVATE, e.creatorMap),
        o = (i.ContainerSprite, i.selection, i.selector.kind, a.actorSetProperty),
        l = r.extend({
            initialize: function(t) {
                if(t) {
                    this.setclassName(t.data.className);
                    t.type = "statisticArea";
                    this.execProto("initialize", t)
                }
            },
            update: function(t) {
                this.set_info(t);
                this.buildScene();
                this.applyTheme();
                this.layout()
            },
            buildScene: function() {
                var t = this._info(),
                    e = t.data,
                    i = (this._graphicSelection(), s["statistics"][this.type()].sceneBuilder(this._graphicSelection(), e));
                this._t.setselectionMap(i);
                var n = this;
                i.endLine.each(function(t, e) {
                    t.setDynamicProperty("graphic", n)
                });
                i.beginLine.each(function(t, e) {
                    t.setDynamicProperty("graphic", n)
                });
                i.area.each(function(t, e) {
                    t.setDynamicProperty("graphic", n)
                })
            },
            applyTheme: function() {
                var t = this.theme().getProp(["statisticArea"], this.className()),
                    e = this.selectionMap();
                for(var i in e) e[i].setProperty(t[i])
            },
            layout: function() {
                var t = this._info(),
                    e = (this.type(), t.data.tags);
                s["statistics"][this.type()].layout(this._graphicSelection(), "area", e)
            },
            changeMarkState: function(t, e) {
                var i = this.theme().getProp(["statisticArea"], this.className());
                if("normal" == e) var n = i[t.dynamicProperty("kind")];
                else var n = i[e][t.dynamicProperty("kind")];
                o(t, n)
            }
        }, ["selectionMap", "type"]);
    return l
}, 571, 734, 566, 656, 832, 703);
I$(777, function(t, e, i, n, r, a) {
    var s = t.ContainerSprite,
        o = t.selector,
        l = t.selection,
        c = (o.kind, e.Trait.extend({
            __init: function(t) {},
            statisticMgr: function(t, e) {
                if(null != t) {
                    var i = e.rootSelection();
                    if(null != t.line && t.line.length > 0) this.createLineGraphic(t.line, i, t.theme);
                    if(null != t.area && t.area.length > 0) this.createAreaGraphic(t.area, i, t.theme)
                }
            },
            resetData: function(t, e) {
                this.update(t, e)
            },
            update: function(t, e) {
                if(null != t) {
                    if(null != t.line && t.line.length > 0) this.updateLineGraphic(t.line, e);
                    if(null != t.area && t.area.length > 0) this.updateAreaGraphic(t.area, e)
                }
            },
            updateLineGraphic: function(t, e) {
                for(var i = this._t.lineGraphics(), n = 0; n < t.length; ++n) {
                    var r = t[n].id,
                        a = i[r];
                    if(null != a) {
                        var s = {
                            data: t[n],
                            theme: e
                        };
                        a.update(s)
                    } else;
                }
            },
            updateAreaGraphic: function(t, e) {
                for(var i = this._t.areaGraphics(), n = 0; n < t.length; ++n) {
                    var r = t[n].id,
                        a = i[r];
                    if(null != a) {
                        var s = {
                            data: t[n],
                            theme: e
                        };
                        a.update(s)
                    } else;
                }
            },
            createAreaGraphic: function(t, e, i) {
                var n = s.create({});
                n.setDynamicProperty("kind", "line");
                e.getElement(0, 0).addChild(n);
                var r = l.select(n);
                areaRootSel = r.selectAll(function(t) {
                    return "statisticsArea" == t.dynamicProperty("kind")
                }).data(t);
                areaRootSel.enter().append(s).setDynamicProperty("kind", "statisticsArea");
                areaRootSel.exit().remove();
                areaRootSel = r.selectAll(function(t) {
                    return "statisticsArea" == t.dynamicProperty("kind")
                });
                var o = {};
                areaRootSel.each(function(t, e) {
                    var n = t.dynamicProperty("data"),
                        r = {
                            rootSelection: l.select(t),
                            data: n,
                            theme: i
                        },
                        s = a.create(r);
                    o[n.id] = s
                });
                this._t.setareaGraphics(o)
            },
            createLineGraphic: function(t, e, i) {
                var n = s.create({});
                n.setDynamicProperty("kind", "line");
                e.getElement(0, 0).addChild(n);
                var a = l.select(n);
                lineRootSel = a.selectAll(function(t) {
                    return "statisticsLine" == t.dynamicProperty("kind")
                }).data(t);
                lineRootSel.enter().append(s).setDynamicProperty("kind", "statisticsLine");
                lineRootSel.exit().remove();
                lineRootSel = a.selectAll(function(t) {
                    return "statisticsLine" == t.dynamicProperty("kind")
                });
                var o = {},
                    c = {};
                lineRootSel.each(function(t, e) {
                    var n = t.dynamicProperty("data"),
                        a = {
                            rootSelection: l.select(t),
                            data: n,
                            theme: i
                        },
                        s = r.create(a);
                    o[n.id] = s;
                    if(n.className) {
                        if(null == c[n.className]) c[n.className] = [];
                        c[n.className].push(s)
                    }
                });
                this._t.setlineGraphics(o);
                this._t.setclassGraphics(c)
            }
        }, ["lineGraphics", "areaGraphics", "classGraphics"]));
    return c
}, 566, 571, 703, 675, 843, 844);
I$(690, function(t, e, i, n) {
    function r(t, e) {
        for(var i = {}, n = 0; n < e.length; ++n) {
            var r = e[n].dynamicProperty("key_id");
            i[r] = r
        }
        var a = [];
        t.each(function(t) {
            var e = t.dynamicProperty("key_id");
            if(i[e]) a.push(t)
        });
        return a
    }

    function a(t, e) {
        for(var i = r(t, e), n = 0; n < i.length; ++n) {
            var a = i[n];
            a.dynamicProperty("graphic").changeMarkState(a, c.normal)
        }
    }

    function s(t, e) {
        for(var i = r(t, e), n = 0; n < i.length; ++n) {
            var a = i[n];
            a.dynamicProperty("graphic").changeMarkState(a, c.hover)
        }
        return i
    }
    var o = t.ContainerSprite,
        l = t.selection,
        c = (t.selector.kind, n.state),
        u = e.extend({
            initialize: function(t, e, i) {
                this.execProto("initialize", t, e, i);
                this.setroot(o.create());
                this.setrootSelection(l.select(this.root()));
                t.theme = e;
                this.statisticMgr(t, this);
                var n = this.rootSelection(),
                    r = n.selectAll(function(t) {
                        var e = t.dynamicProperty("kind");
                        return "beginLine" == e || "endLine" == e
                    });
                this.lines = r;
                var a = n.selectAll(function(t) {
                    var e = t.dynamicProperty("kind");
                    return "area" == e
                });
                this.areas = a
            },
            processInputMsg: function(t) {
                var e = t.type;
                if("mouseMoved" == e || "mouseOver" == e) this._onMouseMoved(t);
                else if("mouseClicked" == e) this._onMouseClicked(t);
                else if("mouseOut" == e) this._onMouseOut(t)
            },
            _onMouseMoved: function(t) {
                var e = this.lines,
                    i = this.areas,
                    n = [];
                i.each(function(e) {
                    if(e.inside(t.gameX, t.gameY)) n.push(e)
                });
                if(n.length > 0) {
                    if(this.focusActors) {
                        a(e, this.focusActors);
                        a(i, this.focusActors)
                    }
                    s(e, n);
                    s(i, n);
                    if(t.sourceEvt.preventBrowserDefault) t.sourceEvt.preventBrowserDefault()
                }
                if(n.length < 1) {
                    e.each(function(e) {
                        if(e.inside(t.gameX, t.gameY)) n.push(e)
                    });
                    if(n.length > 0) {
                        if(this.focusActors) {
                            a(e, this.focusActors);
                            a(i, this.focusActors)
                        }
                        s(e, n);
                        s(i, n);
                        if(t.sourceEvt.preventBrowserDefault) t.sourceEvt.preventBrowserDefault()
                    }
                }
                if(n.length > 0) {
                    this.notify("output", {
                        eventType: "logic",
                        type: "redraw",
                        morph: this
                    });
                    this.focusActors = n
                } else if(this.focusActors) {
                    a(e, this.focusActors);
                    a(i, this.focusActors);
                    this.focusActors = null;
                    this.notify("output", {
                        eventType: "logic",
                        type: "redraw",
                        morph: this
                    })
                }
            },
            _onMouseClicked: function(t) {
                var e = this.focusActors;
                if(e && 2 == t.button) {
                    t.hover = !0;
                    for(var i = {}, n = 0; n < e.length; ++n) {
                        var r = e[n].dynamicProperty("key_id");
                        i[r] = r
                    }
                    var a = [];
                    for(var r in i) a.push(r);
                    this.notify("chart", {
                        type: "statistic",
                        morph: this,
                        id: a,
                        sourceEvt: t.sourceEvt
                    })
                }
            },
            _onMouseOut: function(t) {
                var e = this.lines,
                    i = this.areas;
                if(this.focusActors) {
                    a(e, this.focusActors);
                    a(i, this.focusActors);
                    this.focusActors = null;
                    this.notify("output", {
                        eventType: "logic",
                        type: "redraw",
                        morph: this
                    })
                }
            }
        }, ["root", "rootSelection"], [i]);
    return u
}, 566, 749, 777, 675);
I$(779, function(t, e, i, n, r, a, s) {
    var o = (t.PRIVATE, i.ContainerSprite),
        l = (i.Circle, i.selection, i.selector.kind),
        c = (n.applyMarkSelectionMapTheme, a.extend({
            initialize: function(t) {
                if(t) {
                    var e = this.constructCartesianAxisGraphicsInfos(t),
                        i = e.map(function(t, e) {
                            return s.create(t)
                        });
                    this.setcartesianAxisGraphics(i);
                    this.execProto("initialize", t);
                    this.offsetLabel()
                }
            },
            constructCartesianAxisGraphicsInfos: function(t) {
                var e = t.rootSelection || this._graphicSelection(),
                    i = this._t.__createRootSelectionForPerAxis(e, t.infos),
                    n = t.infos.map(function(e, n) {
                        var r = {
                            data: e.axisInfo,
                            logicSpace: e.logicSpace,
                            theme: t.theme,
                            rootSelection: i.at(n)
                        };
                        return r
                    });
                return n
            },
            __createRootSelectionForPerAxis: function(t, e) {
                var i = t.selectAll(function(t, e) {
                    return "cartesianAxis" == t.dynamicProperty("kind")
                }).data(e);
                i.enter().append(o).setDynamicProperty("kind", "cartesianAxis");
                i.exit().remove();
                i = t.selectAll(function(t) {
                    return "cartesianAxis" == t.dynamicProperty("kind")
                });
                return i
            },
            buildScene: function() {
                var t = this.cartesianAxisGraphics();
                this._graphicSelection();
                t.forEach(function(t) {
                    t.buildScene()
                });
                return this
            },
            layout: function() {
                var t, e, i, n, r, a, s = this._graphicSelection();
                s.each(function(e) {
                    r = e.dynamicProperty("data");
                    a = r.logicSpace;
                    e.setwidth(a.width);
                    e.setheight(a.height);
                    n = r.orient;
                    if("left" == n || "right" == n) t = "y";
                    else t = "x"
                });
                var o = this.cartesianAxisGraphics();
                if(o) o.map(function(r) {
                    var a = r._graphicSelection(),
                        s = a.dynamicProperty("data")[0],
                        o = s.logicSpace;
                    r.layout();
                    if("x" == t) {
                        a.setProperty("x", o.x);
                        if("top" == n) i = o.y + o.height;
                        else i = o.y;
                        a.setProperty("y", i)
                    } else {
                        a.setProperty("y", o.y);
                        if("left" == n) e = o.x + o.width;
                        else e = o.x;
                        a.setProperty("x", e)
                    }
                });
                return this
            },
            update: function(t) {
                this.info(t);
                var e = this.constructCartesianAxisGraphicsInfos(t),
                    i = this.cartesianAxisGraphics();
                i.forEach(function(t, i) {
                    t.updateScene(e[i]);
                    t.collectFrom().updateLayout()
                });
                this.offsetLabel();
                i.forEach(function(t, e) {
                    t.collectTo()
                })
            },
            offsetLabel: function() {
                var t = this.cartesianAxisGraphics(),
                    e = this._info().orient,
                    i = "left" == e || "right" == e;
                if(t && i) t.map(function(t) {
                    var e, i, n, r, a = t._graphicSelection(),
                        s = a.dynamicProperty("data")[0],
                        o = s.logicSpace,
                        c = l("label").apply(a),
                        u = -(1 / 0),
                        d = 1 / 0;
                    if(c.size() > 0) {
                        c.each(function(t) {
                            r = n = t.y();
                            if(n > u) {
                                e = t;
                                u = n
                            }
                            if(r < d) {
                                i = t;
                                d = r
                            }
                        });
                        if(e) {
                            var h = e.bbox(),
                                f = e.y();
                            if(h.y + h.height > o.y + o.height) {
                                var p = h.y + h.height - o.height - o.y;
                                e.sety(f - p)
                            }
                        }
                        if(i) {
                            var _ = i.bbox(),
                                f = i.y();
                            if(_.y < o.y) {
                                var p = o.y - _.y;
                                i.sety(f + p)
                            }
                        }
                    }
                });
                else if(t && !i) t.map(function(t) {
                    var e, i, n, r, a = t._graphicSelection(),
                        s = a.dynamicProperty("data")[0],
                        o = s.logicSpace,
                        c = l("label").apply(a),
                        u = 1 / 0,
                        d = -(1 / 0);
                    c.each(function(t) {
                        n = r = t.x();
                        if(n < u) {
                            e = t;
                            u = n
                        }
                        if(r > d) {
                            i = t;
                            d = r
                        }
                    });
                    if(c.size() > 0) {
                        if(e) {
                            var h = e.bbox(),
                                f = e.x();
                            if(h.x < o.x) {
                                var p = o.x - h.x;
                                if(p < 10) e.setx(f + p)
                            }
                        }
                        if(i) {
                            var _ = i.bbox(),
                                f = i.x();
                            if(_.x + _.width > o.x + o.width) {
                                var p = _.x + _.width - (o.x + o.width);
                                i.setx(f - p)
                            }
                        }
                    }
                })
            },
            applyTheme: function() {
                for(var t = this.cartesianAxisGraphics(), e = 0; e < t.length; ++e) t[e].applyTheme()
            },
            animations: function() {
                for(var t = [], e = this.cartesianAxisGraphics(), i = 0; i < e.length; ++i) t = t.concat(e[i].animations());
                return t
            }
        }, ["cartesianAxisGraphics"]));
    return c
}, 571, 750, 566, 654, 656, 832, 834);
I$(780, function(t, e, i, n, r) {
    var a = r.extend({
        __init: function() {
            this._t.setdragging(!1)
        },
        sendAllMessages: function() {
            this.sendSliderPositionMsg()
        },
        sendSliderPositionMsg: function() {
            var t = this.slider();
            if(t) this.outputMsg({
                eventType: "operation",
                msgType: "guideline",
                morph: this,
                wx: t.x() - 1,
                wy: t.y()
            })
        },
        onLogicMsg: function(t) {
            if("sliderPosition" == t.type) {
                var e = this.slider && this.slider();
                if(e) {
                    e.setx(t.wx);
                    e.sety(t.wy)
                }
            } else if("moveBy" == t.type) this.notify("output", {
                eventType: "logic",
                type: "moveByed",
                morph: this,
                dx: t.dx,
                dy: t.dy,
                oriEvt: t
            })
        },
        onOperationMsg: function(t) {
            var e = (this.stateMgr(), {
                choose: void 0 == t.actors ? [] : t.actors,
                redraw: !0
            });
            e.choose = this.rootSelection().selectAll(function(t) {
                return "background" == t.dynamicProperty("kind")
            });
            var i = this.commonAxisGraphic().cartesianAxisGraphics()[0].type(),
                n = this.theme().getProp(i);
            e.theme = n;
            e = this._morphMgr().actionMgr.exec("CommonAxis", t, this, e);
            return e
        }
    }, ["dragging"]);
    return a
}, 566, 571, 703, 675, 824);
I$(691, function(t, e, i, n, r, a, s, o, l, c, u, d, h) {
    function f(n) {
        var r = t.ContainerSprite,
            f = t.selection,
            p = t.selector.kind,
            _ = t.Rect,
            m = [l, c],
            g = e.extend({
                initialize: function(t, e, n) {
                    this.subTraits(0).__init();
                    this.subTraits(1).__init();
                    var a = o.create();
                    this.setstateMgr(a);
                    this.execProto("initialize", t, e, n);
                    var s = t.space;
                    this.setspace(s);
                    this.setroot(r.create());
                    var l = f.select(this.root());
                    this.setrootSelection(l);
                    var c = this.constructGridInfo(t.gridInfo, e),
                        u = this.createGridGraphic(c);
                    this.setgridGraphic(u);
                    var d = this.constructCommonAxisGraphic(t, e),
                        p = this.createCommonAxisGraphic(d);
                    this.setcommonAxisGraphic(p);
                    if(t.slider) {
                        var _ = i.buildSlider(l, e.getProp("slider"), !0),
                            m = _.getElement(0, 0);
                        this.setslider(m);
                        var g, v, y = this.orient(),
                            b = (t.logicSpace, m.bbox()),
                            x = {
                                ratiox: .5,
                                ratioy: 0
                            },
                            $ = 0,
                            w = h.axisSliderOffset;
                        if("left" == y) {
                            g = s.width - w;
                            v = s.height - b.width / 2;
                            $ = Math.PI / 2
                        } else if("right" == y) {
                            g = w;
                            v = s.height - b.height / 2;
                            $ = -Math.PI / 2
                        } else if("top" == y) {
                            g = b.width / 2;
                            v = s.height - w;
                            $ = Math.PI
                        } else {
                            g = b.width / 2;
                            v = w
                        }
                        _.setProperty({
                            x: g,
                            y: v,
                            ratioAnchor: x
                        });
                        _.setProperty({
                            rotation: $
                        })
                    }
                    this.buildSpaceTree()
                },
                constructGridInfo: function(t, e) {
                    var i = this.rootSelection(),
                        n = "commonAxisGrid",
                        a = p(n).apply(i).data([t]);
                    a.enter().append(r).setDynamicProperty("kind", n);
                    a.exit().remove();
                    a = p(n).apply(i);
                    t.rootSelection = a;
                    t.kindName = n;
                    t.theme = e;
                    return t
                },
                constructCommonAxisGraphic: function(t, e) {
                    var i = this.rootSelection(),
                        n = t.orient;
                    this.setorient(n);
                    var r = "left" == n || "right" == n ? "y" : "x";
                    this.settype(r);
                    var a = i.select(function(t) {
                        return t.dynamicProperty("id") == n
                    }).data([t]);
                    a.enter().append(_).setDynamicProperty("id", n).setDynamicProperty("kind", "commonAxis");
                    a.exit().remove();
                    a = i.select(function(t) {
                        return t.dynamicProperty("id") == n
                    });
                    t.rootSelection = a;
                    t.type = r;
                    t.theme = e;
                    return t
                },
                resetData: function(t, e) {
                    this.execProto("resetData", t, e);
                    var i = this.gridGraphic(),
                        n = this.commonAxisGraphic(),
                        r = this.constructGridInfo(t.gridInfo, e),
                        a = this.constructCommonAxisGraphic(t, e);
                    i.update(r);
                    n.update(a);
                    this.rootSelection();
                    this.setspace(t.space);
                    var s = o.create();
                    this.setstateMgr(s)
                },
                createGridGraphic: function(t) {
                    return a.create(t)
                },
                createCommonAxisGraphic: function(t) {
                    var e = s.create(t);
                    return e
                },
                buildSpaceTree: function() {
                    var t = d.create(),
                        e = u.create(),
                        i = this.commonAxisGraphic(),
                        n = i._info(),
                        r = n.logicSpace;
                    e.setSize(r);
                    t.setRoot(e);
                    this.setspaceTree(t);
                    var a = this.slider();
                    a && e.addPrimitive(a)
                },
                onInputMsg: function(t) {
                    this.processInputMsg(t)
                },
                animations: function() {
                    return this.commonAxisGraphic().animations()
                }
            }, ["root", "gridGraphic", "slider", "commonAxisGraphic", "rootSelection", "orient", "cartesianAxisSelection", "commonAxisSel", "type"], m);
        return g
    }
    return f
}, 566, 749, 654, 735, 778, 760, 779, 767, 780, 763, 751, 752, 675);
I$(572, function(t, e, i, n, r, a, s, o, l, c) {
    function u(t) {
        d.NewGraph = e(t);
        d.PivotAxis = i(t);
        d.Legend = a(t);
        d.CommonAxis = c(t)
    }
    var d = {
        Tooltip: t,
        Emphasis: s,
        PivotAxisTitle: n,
        ScrollGraph: r,
        Zoom: o,
        Statistic: l
    };
    return {
        initMorphKlass: u,
        MorphKlassMap: d
    }
}, 682, 683, 684, 685, 686, 687, 688, 689, 690, 691);
I$(692, function(t, e) {
    Dashboard = e.Klass.extend({
        initialize: function(t) {
            this.setcontainer(t)
        },
        addDomEle: function(t) {
            this.container().appendChild(t)
        },
        addStage: function(t, e) {
            var i = t.painter().sketchpad();
            i.style.position = "absolute";
            i.style.left = e.x + "px";
            i.style.top = e.y + "px"
        },
        updatePosition: function(t, e) {
            var i = t.painter().sketchpad();
            i.style.position = "absolute";
            i.style.left = e.x + "px";
            i.style.top = e.y + "px";
            t.invalidate()
        },
        updateSize: function(t, e) {
            t.painter().sketchpad();
            t.setSize(e.width, e.height);
            t.invalidate()
        },
        updateSpace: function(t, e) {
            var i = t.painter().sketchpad();
            i.style.position = "absolute";
            i.style.left = e.x + "px";
            i.style.top = e.y + "px";
            t.setSize(e.width, e.height);
            t.invalidate()
        }
    }, ["stages", "domSprites", "width", "height", "container"]);
    return Dashboard
}, 566, 571);
I$(693, function(t, e) {
    function i(t, e, i) {
        var r, a = new Date,
            s = a.getTime(),
            o = s,
            l = 0,
            c = 0;
        r = function() {
            if(null == r.gid) {
                r.gid = ++n;
                e.gid = n
            }
            a = new Date;
            s = a.getTime();
            l = s - o;
            o = s;
            c += l;
            e.doUpdate(c);
            for(var t in i) i[t].redraw()
        };
        e.doUpdate(c, 0);
        return setInterval(r, Math.floor(1e3 / t))
    }
    var n = 0,
        r = e.Trait.extend({
            __init: function() {
                this._t.setaniStages({});
                var e = t.animationMgr.AnimationMgr.create();
                this._t.setanimationMgr(e);
                this._t.setintervalIns(null)
            },
            __destroy: function() {
                clearInterval(this._t.intervalIns());
                this._t.setintervalIns(null)
            },
            runAnimations: function(t, e) {
                var n = [],
                    r = this._t.aniStages(),
                    a = this._t.animationMgr();
                a.removeAllAnimations();
                if(!this._t.intervalIns()) {
                    var s = i(50, a, r);
                    this._t.setintervalIns(s)
                }
                for(var o in t)
                    if(t[o].animations()) {
                        n = n.concat(t[o].animations());
                        var l = e[t[o].id()].stage;
                        r[o] = l;
                        for(var c = 0; c < n.length; ++c) a.addAnimation(n[c])
                    }
            }
        }, ["animationMgr", "aniStages", "intervalIns"]);
    return r
}, 566, 571);
I$(694, function(t) {
    function e(t) {
        if(t.dynamicProperty("themeOwner")) return t.dynamicProperty("themeOwner");
        if(t.parent()) return e(t.parent());
        else;
    }

    function i(t) {
        for(var e = t[0], i = e.z(), n = 1; n < t.length; ++n)
            if(t[n].z() > i) {
                e = t[n];
                i = e.z()
            }
        return e
    }
    var n = t.colortraits.Klass.extend({
        initialize: function(t) {
            this.overInfo = {};
            this.morphs = t
        },
        chooseMorphActors: function(t, e) {
            var n = [];
            if("graph" == e.type()) {
                n = e.choose(t.gameX, t.gameY);
                var r = this.morphs.statistic.choose(t.gameX, t.gameY);
                if(r && r.length > 0) {
                    n = n.concat(r);
                    t.isStat = !0
                }
                if(n.length > 1) var n = [i(n)]
            } else n = e.choose(t.gameX, t.gameY);
            return {
                morph: e,
                actors: n
            }
        },
        dispatchEvent: function(t, e) {
            switch(t.type) {
                case "mouseOver":
                    this.dispatchMouseOver(t, e);
                    break;
                case "mouseOut":
                    this.dispatchMouseOut(t, e);
                    break;
                case "mouseMoved":
                    this.dispatchMouseMove(t, e);
                    break;
                case "mouseClicked":
                    if(2 == t.button) this.dispatchMouseRightClick(t, e);
                    else this.dispatchMouseClick(t, e);
                    break;
                case "mouseDragged":
                    this.dispatchMouseDrag(t, e);
                    break;
                case "mousewheel":
                    this.dispatchMouseWheel(t, e);
                    break;
                case "mousePressed":
                    this.dispatchMousePressed(t, e);
                    break;
                case "mouseReleased":
                    this.dispatchMouseReleased(t, e)
            }
        },
        dispatchMouseOver: function(t, i) {
            var n = this.chooseMorphActors(t, i);
            if(this.overInfo.actors && this.overInfo.actors.length > 0) {
                var r = e(this.overInfo.actors[0]);
                if(r && r.isActorNeedOperationMsg(this.overInfo.actors[0], "out")) {
                    var a = Object.create(t);
                    a.eventType = "operation";
                    a.type = "out";
                    a.actors = this.overInfo.actors;
                    this.overInfo.morph.inputMsg(a)
                }
            }
            var a = Object.create(t);
            a.type = "over";
            a.eventType = "operation";
            if(n.actors.length > 0) {
                var r = e(n.actors[0]);
                if(r && r.isActorNeedOperationMsg(n.actors[0], "over")) a.actors = n.actors
            }
            n.morph.inputMsg(a);
            this.overInfo = n
        },
        dispatchMouseMove: function(t, i) {
            if(this.timer()) {
                var n = this.longPressPos(),
                    r = Math.abs(n.x - t.gameX),
                    a = Math.abs(n.y - t.gameY);
                if(r > 5 || a > 5) {
                    window.clearInterval(this.timer());
                    this.settimer(null)
                }
            }
            var s = this.chooseMorphActors(t, i),
                o = Object.create(t);
            o.eventType = "operation";
            o.type = "move";
            o.actors = s.actors;
            s.morph.inputMsg(o);
            if(s.actors.length > 0)
                if(this.overInfo.actors && this.overInfo.actors[0] == s.actors[0]) return;
                else {
                    if(this.overInfo.actors && this.overInfo.actors.length > 0) {
                        var o = Object.create(t);
                        o.type = "out";
                        o.eventType = "operation";
                        var l = e(this.overInfo.actors[0]);
                        if(l && l.isActorNeedOperationMsg(this.overInfo.actors[0], "out")) {
                            o.actors = this.overInfo.actors;
                            this.overInfo.morph.inputMsg(o);
                            this.overInfo.actors = null
                        }
                    }
                    var l = e(s.actors[0]);
                    if(l && l.isActorNeedOperationMsg(s.actors[0], "over")) {
                        var o = Object.create(t);
                        o.eventType = "operation";
                        o.type = "over";
                        o.actors = s.actors;
                        s.morph.inputMsg(o);
                        this.overInfo = s
                    }
                }
            else if(this.overInfo.actors && this.overInfo.actors.length > 0) {
                var o = Object.create(t);
                o.type = "out";
                o.eventType = "operation";
                var l = e(this.overInfo.actors[0]);
                if(l && l.isActorNeedOperationMsg(this.overInfo.actors[0], "out")) {
                    o.actors = this.overInfo.actors;
                    this.overInfo.morph.inputMsg(o);
                    this.overInfo.actors = null
                }
            }
        },
        dispatchMouseOut: function(t, i) {
            var n = Object.create(t);
            n.eventType = "operation";
            n.type = "out";
            if(this.overInfo.actors && this.overInfo.actors.length > 0) {
                var r = e(this.overInfo.actors[0]);
                if(r && r.isActorNeedOperationMsg(this.overInfo.actors[0], "out")) n.actors = this.overInfo.actors
            }
            this.overInfo.morph.inputMsg(n);
            this.overInfo = {}
        },
        dispatchMouseDrag: function(t, i) {
            var n = Object.create(t);
            n.eventType = "operation";
            n.type = "drag";
            if(t.dragStart) {
                var r = this.chooseMorphActors(t, i);
                if(r.actors.length > 0) {
                    var a = e(r.actors[0]);
                    if(a && a.isActorNeedOperationMsg(r.actors[0], "drag")) n.actors = this.overInfo.actors
                }
                this.dragInfo = r
            }
            this.dragInfo.morph.inputMsg(n);
            if(t.dragEnd) this.dragInfo = null
        },
        dispatchMouseClick: function(t, i) {
            var n = Object.create(t);
            n.eventType = "operation";
            n.type = "click";
            var r = this.chooseMorphActors(t, i);
            if(r.actors.length > 0) {
                var a = e(r.actors[0]);
                if(a && a.isActorNeedOperationMsg(r.actors[0], "click")) n.actors = r.actors
            }
            r.morph.inputMsg(n)
        },
        dispatchMouseRightClick: function(t, i) {
            var n = Object.create(t);
            n.eventType = "operation";
            n.type = "rightClick";
            var r = this.chooseMorphActors(t, i);
            if(r.actors.length > 0) {
                var a = e(r.actors[0]);
                if(a && a.isActorNeedOperationMsg(r.actors[0], "rightClick")) n.actors = r.actors
            }
            r.morph.inputMsg(n)
        },
        dispatchMouseWheel: function(t, i) {
            var n = Object.create(t);
            n.eventType = "operation";
            n.type = "wheel";
            var r = this.chooseMorphActors(t, i);
            if(r.actors.length = 0) {
                var a = e(r.actors[0]);
                if(a && a.isActorNeedOperationMsg(r.actors[0], "wheel")) n.actors = r.actors
            }
            r.morph.inputMsg(n)
        },
        dispatchMousePressed: function(t, e) {
            var i = Object.create(t);
            i.eventType = "operation";
            i.type = "longPress";
            var n = this.chooseMorphActors(t, e),
                r = setTimeout(function() {
                    n.morph.inputMsg(i)
                }, 600);
            this.settimer(r);
            this.setlongPressPos({
                x: t.gameX,
                y: t.gameY
            })
        },
        dispatchMouseReleased: function(t, e) {
            window.clearInterval(this.timer());
            this.settimer(null)
        }
    }, ["timer", "longPressPos"]);
    return n
}, 566);
I$(781, function(t, e, i, n) {
    function r(t, e, i) {
        return function(n, r, a) {
            a = t(n, r, a);
            if(void 0 != e) {
                a = e(n, r, a);
                if(void 0 != i) a = i(n, r, a)
            }
            return a
        }
    }

    function a(t, e, i) {
        if(i) return t;
        else return e
    }
    var s = {
        redraw: function(t, e, i) {
            if(i.redraw) {
                e.updateRetina();
                e.notify("output", {
                    eventType: "logic",
                    type: "redraw",
                    morph: e
                })
            }
            return i
        },
        changeState: function(t, i, n) {
            if("hover" == n.state) n.redraw = i.stateMgr().processStateChangeWithMarks(n.choose, e.state.hover);
            else if("select" == n.state) n.redraw = i.stateMgr().processStateChangeWithMarks(n.choose, e.state.focus);
            else if("dishover" == n.state) n.redraw = i.stateMgr().cancelState(e.state.hover);
            else if("unselect" == n.state) n.redraw = i.stateMgr().cancelState(e.state.focus);
            else if("drag" == n.state) n.redraw = i.stateMgr().processStateChangeWithMarks(n.choose, e.state.drag);
            else if("normal" == n.state) n.redraw = i.stateMgr().setOneMarkState(n.choose, e.state.normal);
            n.state = null;
            return n
        },
        normalState: function(t, e, i) {
            if(i.choose.length > 0) {
                i.state = "normal";
                r(s.changeState)(t, e, i)
            }
            return i
        },
        hoverState: function(t, e, i) {
            if(i.choose.length > 0) {
                i.state = "hover";
                r(s.changeState)(t, e, i)
            }
            return i
        },
        dishoverState: function(t, e, i) {
            if(i.choose.length > 0) {
                i.state = "dishover";
                r(s.changeState)(t, e, i)
            }
            return i
        },
        selectState: function(t, e, i) {
            i.state = "select";
            i = r(s.changeState)(t, e, i);
            return i
        },
        unselectState: function(t, e, i) {
            i.state = "unselect";
            i = r(s.changeState)(t, e, i);
            return i
        },
        dragState: function(t, e, i) {
            i.state = "drag";
            r(s.changeState)(t, e, i);
            return i
        },
        selectMsg: function(t, e, i) {
            e.outputMsg({
                eventType: "logic",
                type: "select",
                predicate: i.predicate
            });
            return i
        },
        unselectMsg: function(t, e, i) {
            e.outputMsg({
                eventType: "logic",
                type: "cancelSelect"
            });
            return i
        },
        guidelineMsg: function(t, e, i) {
            var n = {
                eventType: "operation",
                msgType: "guideline",
                morph: e,
                wx: i.ox,
                wy: i.oy
            };
            if("Graph" == i.morphType) e.processInputMsg(n);
            else e.outputMsg(n);
            return i
        },
        frameChooseMsg: function(t, e, i) {
            e.outputMsg({
                eventType: "logic",
                type: "frameChoose",
                orient: i.orient,
                morph: e,
                wx: i.ox,
                wy: i.oy
            });
            return i
        },
        showMenu: function(t, e, i) {
            e.notify("chart", {
                eventType: "logic",
                sourceEvt: t.sourceEvt,
                mx: i.menumx,
                my: i.menumy,
                type: "contextmenu",
                info: i.menuinfo
            });
            return i
        },
        setCursor: function(t, e, i) {
            e.outputMsg({
                eventType: "logic",
                type: "legend",
                morph: e,
                func: i.cursor
            });
            return i
        },
        cancelCursor: function(t, e, i) {
            e.outputMsg({
                eventType: "logic",
                type: "legend",
                morph: e,
                func: "cancelCursor"
            });
            return i
        },
        genAxisPredicate: function(t, e, i) {
            var n = function(t) {
                    var i = t,
                        n = e.dataMgr()._data(),
                        r = n.fields,
                        a = [];
                    do {
                        var s = {};
                        s.fieldName = r[i.layerIdx];
                        s.value = i.value;
                        a.push(s);
                        i = i.father
                    } while (null !== i);
                    return function(t) {
                        return a.every(function(e) {
                            return t[e.fieldName] === e.value
                        })
                    }
                },
                r = i.choose[0].dynamicProperty("data"),
                a = n(r);
            i.predicate = a;
            return i
        },
        genDiscretePredicate: function(t, e, i) {
            var n = function(t) {
                    var i = (e.dataMgr()._data(), []),
                        n = {};
                    n.fieldName = t.field;
                    n.value = t.data;
                    i.push(n);
                    return function(t) {
                        return i.every(function(e) {
                            return t[e.fieldName] === e.value
                        })
                    }
                },
                r = i.choose[0].dynamicProperty("data"),
                a = n(r);
            i.predicate = a;
            return i
        },
        genContinusPredicate: function(t, e, i) {
            var n = function(t, i) {
                    var n = (e.dataMgr()._data(), t.field),
                        r = Math.min(i[0], i[1]),
                        a = Math.max(i[0], i[1]);
                    return function(t) {
                        return t[n] >= r && t[n] <= a
                    }
                },
                r = i.choose[0].dynamicProperty("data"),
                a = i.dragRange,
                s = n(r, a);
            i.predicate = s;
            return i
        },
        clickCond: function(t, e, i) {
            if(0 == i.choose.length) return !1;
            var n, r = e.stateMgr()._focusData();
            if(0 == r.length) n = !1;
            else n = r[0] === i.choose[0].dynamicProperty("data");
            return i.choose.length > 0 && !n
        },
        commonAxisHover: function(t, e, i) {
            i.choose.setProperty(i.theme.hover["background"]);
            return i
        },
        commonAxisDishover: function(t, e, i) {
            i.choose.setProperty(i.theme["background"]);
            return i
        },
        isDragStart: function(t, e, i) {
            var n = e._t.rcFrame();
            n.x = t.gameX;
            n.y = t.gameY;
            n.xe = t.gameX;
            n.ye = t.gameY;
            i.redraw = !1;
            i.dragging = !1;
            i.rect = i.genRect(n);
            return i
        },
        isDragging: function(t, e, i) {
            var n = e._t.rcFrame();
            n.xe = t.gameX;
            n.ye = t.gameY;
            i.dragging = !0;
            i.rect = i.genRect(n);
            return i
        },
        isDragEnd: function(t, e, i) {
            var n = e.spaceTree(),
                r = e._t.rcFrame(),
                a = e.responseEnable("frameChoose");
            if(n && a) {
                var s = i.genRect(r);
                i.choose = n.choose(s.x, s.y, s.width, s.height)
            }
            if(!a) e.outputMsg({
                eventType: "logic",
                type: "mapDrag"
            });
            i.dragging = !1;
            i.rect = i.genRect(r);
            return i
        },
        legendSliderDragStart: function(t, e, i) {
            var n;
            if(void 0 == i.slider) return i;
            else n = i.slider;
            if(i.choose.length > 0) {
                var r = t.gameX,
                    a = t.gameY;
                n.actor = i.choose[0];
                n.LastDragActor = n.actor;
                if(n.actor && "mark" == n.actor.dynamicProperty("kind") && n.actor.dynamicProperty("__which")) {
                    e.updateRetina("dragCancel", n.actor);
                    n.logicX = r;
                    n.logicY = a;
                    n.__which = n.actor.dynamicProperty("__which");
                    n.dragData = n.actor.dynamicProperty("data")
                } else n.actor = void 0
            } else n.actor = void 0;
            return i
        },
        legendSliderDragging: function(t, e, n) {
            var a;
            if(void 0 == n.slider) return n;
            else a = n.slider;
            var o = t.gameX,
                l = t.gameY;
            if(!a.actor) return n;
            n.choose.push(a.actor);
            var c, u, d = a.dragData.__border,
                h = a.dragData.__bordervalue,
                f = a.dragData.__relativeMark,
                p = o - a.logicX,
                _ = a.actor.y(),
                m = i.calSuitableGap(h[0], h[1]);
            if("left" == a.__which) {
                if(a.actor.x() + p >= d[0] && a.actor.x() + p <= f.x()) a.actor.moveBy(p, 0, 0);
                else if(a.actor.x() + p <= d[0]) a.actor.move(d[0], _);
                else a.actor.move(f.x(), _);
                var g = i.add(i.mult(Math.floor((a.actor.x() - d[0]) / (d[1] - d[0]) * m[1]), m[0]), h[0]);
                if(h[1] >= h[0]) {
                    if(g > h[1]) g = h[1];
                    if(g < h[0]) g = h[0]
                } else {
                    if(g < h[1]) g = h[1];
                    if(g > h[0]) g = h[0]
                }
                var v = a.actor.children()[0],
                    y = v.dynamicProperty("format");
                v.settext(y(g));
                a.dragData.data = g;
                c = g, u = f.dynamicProperty("data").data
            } else {
                if(a.actor.x() + p <= d[1] && a.actor.x() + p >= f.x()) a.actor.moveBy(p, 0, 0);
                else if(a.actor.x() + p >= d[1]) a.actor.move(d[1], _);
                else a.actor.move(f.x(), _);
                var g = i.add(i.mult(Math.floor((a.actor.x() - d[0]) / (d[1] - d[0]) * m[1]), m[0]), h[0]);
                if(h[1] >= h[0]) {
                    if(g < h[0]) g = h[0];
                    if(g > h[1]) g = h[1]
                } else {
                    if(g > h[0]) g = h[0];
                    if(g < h[1]) g = h[1]
                }
                var v = a.actor.children()[0],
                    y = v.dynamicProperty("format");
                v.settext(y(g));
                a.dragData.data = g;
                c = f.dynamicProperty("data").data, u = g
            }
            a.logicX = o;
            a.logicY = l;
            n = r(s.dragState)(t, e, n);
            n.dragRange = [c, u];
            n = r(s.genContinusPredicate, s.selectMsg)(t, e, n);
            return n
        },
        legendSliderDragEnd: function(t, e, i) {
            var n;
            if(void 0 == i.slider) return i;
            else n = i.slider;
            if(null != n.LastDragActor && n.actor) i = r(s.setLegendChooseData)(t, e, i);
            if(n.actor) i = r(s.normalState)(t, e, i);
            else i.redraw = !1;
            n.LastDragActor = null;
            return i;
        },
        pieDragStart: function(t, e, i) {
            var n = i.dragInfo;
            if(i.choose.length > 0) {
                var r = i.choose[0];
                if(r.dynamicProperty("graphic").dragged) {
                    n.draggingActor = r;
                    n.dragging = !0;
                    n.preX = t.gameX;
                    n.preY = t.gameY;
                    n.x = t.gameX;
                    n.y = t.gameY;
                    if(t.sourceEvt.preventBrowserDefault) t.sourceEvt.preventBrowserDefault()
                }
            }
            return i
        },
        pieDragging: function(t, e, i) {
            var n = i.dragInfo;
            if(n.dragging) {
                var r = e.spaceTree();
                if(t.sourceEvt.preventBrowserDefault) t.sourceEvt.preventBrowserDefault();
                var a = n.draggingActor;
                n.preX = n.x;
                n.preY = n.y;
                n.x = t.gameX;
                n.y = t.gameY;
                a.dynamicProperty("graphic").dragged(n);
                e.rebuildSpaceTree();
                var s = a.dynamicProperty("graphic").selectMarkActor(r);
                i.choose = [s]
            }
            return i
        },
        pieDragEnd: function(t, e, i) {
            e._t.setdragInfo({});
            return i
        },
        shiftDragStart: function(t, e, i) {
            var n = i.dragInfo;
            n.dragging = !0;
            n.preX = t.gameX;
            n.x = t.gameX;
            return i
        },
        shiftDragging: function(t, e, i) {
            var n = i.dragInfo;
            if(n.dragging) {
                n.preX = n.x;
                n.x = t.gameX;
                n.dragEnd = t.dragEnd;
                i.dx = n.x - n.preX;
                if("Legend" == i.morphType) i = r(s.legendMoveBy)(t, e, i);
                else if("Emphasis" == i.morphType) i = r(s.emphasisMoveBy)(t, e, i)
            }
            return i
        },
        shiftDragEnd: function(t, e, i) {
            e._t.setdragInfo({});
            return i
        },
        axisSliderDragStart: function(t, e, i) {
            var n = e.slider(),
                r = n && n.toleranceInside(t.gameX, t.gameY, 4);
            if(r) {
                if(t.sourceEvt.preventBrowserDefault) t.sourceEvt.preventBrowserDefault();
                i.dragging = !0
            } else i.dragging = !1;
            return i
        },
        axisSliderDragging: function(t, e, n) {
            var r = t.gameX,
                a = t.gameY,
                s = e.slider(),
                o = e.orient();
            if(t.sourceEvt.preventBrowserDefault) t.sourceEvt.preventBrowserDefault();
            var l = e.rootSelection().getElement(0, 0),
                c = (l.x(), l.y(), e.logicSpace());
            s.bbox();
            if("left" == o || "right" == o) {
                a = i.clamp(a, c.y, c.y + c.height);
                s.sety(a)
            } else {
                r = i.clamp(r, c.x, c.x + c.width);
                s.setx(r)
            }
            return n
        },
        axisSliderDragEnd: function(t, e, i) {
            if(t.sourceEvt.preventBrowserDefault) t.sourceEvt.preventBrowserDefault();
            i.dragging = !1;
            return i
        },
        graphSliderDragStart: function(t, e, i) {
            var n = i.slider,
                r = i.dragInfo;
            if(n.toleranceInside(t.gameX, t.gameY, 4)) {
                e._t.setsliderDragging(!0);
                r.dragChoose = !0;
                if(t.sourceEvt.preventBrowserDefault) t.sourceEvt.preventBrowserDefault()
            } else r.dragChoose = !1;
            return i
        },
        graphSliderDragging: function(t, e, n) {
            var a = n.slider,
                o = n.dragInfo;
            if(o.dragChoose) {
                var l = e.rootSelection().getElement(0, 0),
                    c = l.x(),
                    u = l.y(),
                    d = e.logicSpace(),
                    h = (a.bbox(), t.gameX),
                    f = t.gameY;
                if(t.sourceEvt.preventBrowserDefault) t.sourceEvt.preventBrowserDefault();
                var p = e._choose(t.gameX, t.gameY);
                n.choose = p;
                if(p && p.length) {
                    var _ = p[0],
                        m = _.bbox();
                    h = m.x + m.width / 2;
                    f = m.y + m.height / 2
                }
                h = i.clamp(h, c, c + d.width);
                f = i.clamp(f, u, u + d.height);
                a.setx(h);
                a.sety(f);
                n.ox = h;
                n.oy = f;
                n = r(s.guidelineMsg)(t, e, n)
            }
            if(n.choose[0] != e._t.lastChoose())
                if(n.choose[0]) {
                    e._t.setlastChoose(n.choose[0]);
                    n = r(s.selectState, s.emphasisUpdate, s.setGraphChooseData)(t, e, n)
                } else {
                    e._t.setlastChoose(null);
                    n = r(s.unselectState, s.emphasisHide, s.cleanGraphChooseData)(t, e, n)
                }
            return n
        },
        graphSliderDragEnd: function(t, e, i) {
            var n = i.dragInfo;
            if(n.dragChoose) {
                n.dragChoose = !1;
                if(t.sourceEvt.preventBrowserDefault) t.sourceEvt.preventBrowserDefault()
            }
            e._t.setsliderDragging(!1);
            return i
        },
        legendMoveBy: function(t, e, i) {
            var n = i.dx,
                r = e.root(),
                a = e.param(),
                s = e.spaceData()[0].logicSpace,
                o = a.theme.getProp(["legend", "layoutArgus"]).position.x;
            if(n < 0 && r.x() > a.space.width - s.width - 2 * o) r.moveBy(n, 0, 0);
            else if(n > 0 && r.x() < 0) r.moveBy(n, 0, 0);
            return i
        },
        emphasisMoveBy: function(t, e, i) {
            var n = i.dx,
                r = e.param(),
                a = e._textInfoSelection,
                s = e._textTitleSelection,
                o = r.theme.getProp(["emphasis", "textInfo"]).x;
            a.each(function(t) {
                if(n < 0 && t.x() > r.space.width - t.bbox().width - 2 * o) t.moveBy(n, 0, 0);
                else if(n > 0 && t.x() < 0 + 2 * o) t.moveBy(n, 0, 0)
            });
            s.each(function(t) {
                if(n < 0 && t.x() > r.space.width - t.bbox().width - 2 * o) t.moveBy(n, 0, 0);
                else if(n > 0 && t.x() < 0 + 2 * o) t.moveBy(n, 0, 0)
            });
            return i
        },
        setGraphChooseData: function(t, e, i) {
            var r = n.graphPath(i.choose);
            e._t.setchooseData(r);
            e.notify("chart", {
                eventType: "logic",
                type: "contextselect",
                subtype: "graph",
                sourceEvt: t.sourceEvt,
                data: r
            });
            return i
        },
        cleanGraphChooseData: function(t, e, i) {
            if(i.choose.length > 0) e.stateMgr().resetPreHover();
            e._t.setchooseData(null);
            return i
        },
        setLegendChooseData: function(t, e, i) {
            var r = n.legendPath(i.slider.LastDragActor, "continuous");
            e._t.setchooseData(r);
            e.notify("chart", {
                eventType: "logic",
                subtype: "legend",
                type: "contextselect",
                sourceEvt: t.sourceEvt,
                data: r
            });
            return i
        },
        cleanLegendChooseData: function(t, e, i) {
            e._t.setchooseData(null);
            e.updateRetina("recoverContinuous");
            e.notify("output", {
                morph: e,
                type: "redraw",
                eventType: "logic"
            });
            return i
        },
        zoom: function(t, e, i) {
            e.outputMsg({
                eventType: "logic",
                type: "wheel",
                oriEvt: t
            });
            return i
        },
        clickAndSelect: function(t, e, i) {
            var n = r(s.unselectMsg, s.selectWithPredicate),
                o = s.clickCond(t, e, i);
            i = a(n, s.clickUnselect, o)(t, e, i);
            return i
        },
        selectWithPredicate: function(t, e, i) {
            var n = "Legend" == i.morphType,
                o = a(s.genDiscretePredicate, s.genAxisPredicate, n);
            i = r(s.selectState, r(o, s.selectMsg))(t, e, i);
            return i
        },
        clickUnselect: function(t, e, i) {
            i = r(s.unselectState, s.unselectMsg)(t, e, i);
            return i
        },
        clickGrpah: function(t, e, i) {
            var n = r(s.unselectMsg, s.selectState, s.setGraphChooseData),
                o = r(s.clickUnselect, s.cleanGraphChooseData),
                l = s.clickCond(t, e, i);
            return a(n, o, l)(t, e, i)
        },
        regionSelect: function(t, e, i) {
            var n = t.dragStart,
                a = t.dragEnd;
            if(a) i = r(s.isDragEnd, s.dragSelect, s.unselectMsg)(t, e, i);
            else if(n) i = r(s.isDragStart)(t, e, i);
            else i = r(s.isDragging)(t, e, i);
            return i
        },
        dragSelect: function(t, e, i) {
            var n = i.choose.length > 0,
                o = r(s.setGraphChooseData, s.selectState);
            i = a(o, s.unselectState, n)(t, e, i);
            return i
        },
        dragLegendSlider: function(t, e, i) {
            var n = t.dragStart,
                a = t.dragEnd;
            if(a) i = r(s.legendSliderDragEnd)(t, e, i);
            else if(n) i = r(s.legendSliderDragStart)(t, e, i);
            else i = r(s.legendSliderDragging)(t, e, i);
            return i
        },
        legendCursor: function(t, e, i) {
            if("colorOrdinal" == i.legendType || "shape" == i.legendType) i.cursor = "pointer";
            else if("colorLinear" == i.legendType || "sizeLinear" == i.legendType) i.cursor = "selectCursor";
            else i.cursor = "cancelCursor";
            i = r(s.setCursor)(t, e, i);
            return i
        },
        pivotAxisTitleMenu: function(t, e, i) {
            var n = t.mouseX,
                a = t.mouseY,
                o = (t.gameX, t.gameY, e.pivotTitleGraphic()),
                l = e.space(),
                c = o._info().data;
            if(c) {
                for(var u = c.type, d = 0, h = c.length - 1; h >= 0; h--) {
                    var f = c[h].logicSpace;
                    if(n >= f.x && n < f.x + f.width && a >= f.y && a < f.y + f.height) {
                        d = h;
                        break
                    }
                }
                i.menumx = n + l.x;
                i.menumy = a + l.y;
                i.menuinfo = {
                    index: d,
                    type: u,
                    morph: "pivotAxisTitle"
                };
                i = r(s.showMenu)(t, e, i)
            }
            return i
        },
        pivotAxisMenu: function(t, e, i) {
            var n = t.mouseX,
                a = t.mouseY,
                o = t.gameX,
                l = t.gameY,
                c = e.spaceTree();
            if(c) {
                var u = e.space(),
                    d = c.choose(o, l);
                if(d[0]) {
                    var h = d[0].dynamicProperty("data");
                    i.menumx = n + u.x;
                    i.menumy = a + u.y;
                    i.menuinfo = {
                        index: h.layerIdx,
                        orient: e.orient(),
                        morph: "pivotAxis",
                        activeValue: h.value
                    };
                    i = r(s.showMenu)(t, e, i)
                }
            }
            return i
        },
        commonAxisMenu: function(t, e, i) {
            for(var n, a = t.mouseX, o = t.mouseY, l = t.gameX, c = t.gameY, u = e.commonAxisGraphic(), d = u.cartesianAxisGraphics(), h = 0; h < d.length; h++) {
                var f = d[h]._info().logicSpace;
                if(l > f.x && l < f.x + f.width && c > f.y && c < f.y + f.height) {
                    n = h;
                    break
                }
            }
            var p = e.space(),
                _ = e.orient(),
                m = {
                    morph: "commonAxis",
                    orient: _,
                    index: n
                },
                g = d[h]._info().data.scale;
            if("discrete" == g.type()) {
                var h, v = g.domain();
                if("left" == _ || "right" == _) h = v.length - 1 - Math.floor((c - f.y) / g.step());
                else h = Math.floor((l - f.x) / g.step());
                m.activeValue = v[h]
            }
            i.menumx = a + p.x;
            i.menumy = o + p.y;
            i.menuinfo = m;
            i = r(s.showMenu)(t, e, i);
            return i
        },
        graphMenu: function(t, e, i) {
            var n = t.mouseX,
                r = t.mouseY,
                a = e.space(),
                s = e._t.chooseData(),
                o = {
                    morph: "graph",
                    chooseData: s
                },
                l = {
                    eventType: "logic",
                    sourceEvt: t.sourceEvt,
                    mx: n + a.x,
                    my: r + a.y,
                    type: "contextmenu",
                    info: o
                };
            e.notify("chart", l);
            t.handled = !0;
            return i
        },
        emphasisUpdate: function(t, e, i) {
            if(i.choose && i.choose.length > 0) e.outputMsg({
                eventType: "logic",
                type: "emphasisUpdate",
                chooseActor: i.choose,
                morph: e
            });
            return i
        },
        emphasisHide: function(t, e, i) {
            e.outputMsg({
                eventType: "logic",
                type: "emphasisHide",
                morph: e
            });
            return i
        },
        pieDrag: function(t, e, i) {
            if(e._morphMgr().__innerData.choose.pointer) {
                var n = t.dragStart,
                    a = t.dragEnd;
                i.dragInfo = e._t.dragInfo();
                if(a) i = r(s.pieDragEnd)(t, e, i);
                else if(n) i = r(s.pieDragStart)(t, e, i);
                else {
                    i = r(s.pieDragging)(t, e, i);
                    if(i.choose[0]) i = r(s.selectState, s.emphasisUpdate)(t, e, i)
                }
            }
            return i
        },
        shiftDrag: function(t, e, i) {
            var n = t.dragStart,
                a = t.dragEnd;
            i.dragInfo = e._t.dragInfo();
            if(a) i = r(s.shiftDragEnd)(t, e, i);
            else if(n) i = r(s.shiftDragStart)(t, e, i);
            else i = r(s.shiftDragging)(t, e, i);
            return i
        },
        axisSliderDrag: function(t, e, i) {
            i.slider = e.slider();
            i.dragging = e._t.dragging();
            if(i.slider) {
                var n = t.dragStart,
                    a = t.dragEnd;
                if(a) i = r(s.axisSliderDragEnd)(t, e, i);
                else if(n) i = r(s.axisSliderDragStart)(t, e, i);
                else i = r(s.axisSliderDragging)(t, e, i);
                e._t.setdragging(i.dragging);
                i.ox = i.slider.x();
                i.oy = i.slider.y();
                i.orient = e.orient();
                i = r(s.guidelineMsg)(t, e, i);
                i = r(s.frameChooseMsg)(t, e, i)
            }
            return i
        },
        graphSliderDrag: function(t, e, i) {
            i.slider = e.slider();
            if(i.slider) {
                var n = t.dragStart,
                    a = t.dragEnd;
                i.dragInfo = e._t.dragInfo();
                if(a) i = r(s.graphSliderDragEnd)(t, e, i);
                else if(n) i = r(s.graphSliderDragStart)(t, e, i);
                else i = r(s.graphSliderDragging)(t, e, i)
            }
            return i
        },
        mapDrag: function(t, e, i) {
            var n, r;
            if(e._t.sliderDragging() || !e._morphMgr().__innerData.response.dragTranslate) return i;
            if(t.dragEnd) {
                e._t.setprePos(void 0);
                return i
            }
            var a = e._t.prePos();
            if(a) {
                n = t.gameX - a[0];
                r = t.gameY - a[1];
                a = [t.gameX, t.gameY];
                e._t.setprePos(a)
            } else {
                n = 0;
                r = 0;
                a = [t.gameX, t.gameY];
                e._t.setprePos(a)
            }
            var s = e.cellGraphics();
            s.map(function(t) {
                var e = t.markGraphics();
                e.map(function(t) {
                    var e = t.rootSelection();
                    e.each(function(t) {
                        var e = t.clipper(),
                            i = e ? e.gprim() : null;
                        t.moveBy(n, r);
                        if(i) i.moveBy(-n, -r)
                    })
                });
                var i = t.coordGraphic();
                if(i) {
                    var a = i.rootSelection();
                    a.each(function(t) {
                        var e = t.clipper(),
                            i = e ? e.gprim() : null;
                        t.moveBy(n, r);
                        if(i) i.moveBy(-n, -r)
                    })
                }
            });
            return i
        }
    };
    return s
}, 566, 675, 654, 838);
I$(782, function(t, e) {
    var i = {
        PivotAxisTitle: {
            rightClick: [e.pivotAxisTitleMenu]
        },
        PivotAxis: {
            over: [e.hoverState, e.redraw],
            out: [e.dishoverState, e.redraw],
            click: [e.clickAndSelect, e.redraw],
            rightClick: [e.pivotAxisMenu]
        },
        CommonAxis: {
            over: [e.commonAxisHover, e.redraw],
            out: [e.commonAxisDishover, e.redraw],
            click: [e.clickUnselect, e.redraw],
            rightClick: [e.commonAxisMenu]
        },
        Graph: {
            over: [e.hoverState, e.emphasisUpdate, e.redraw],
            out: [e.dishoverState, e.emphasisHide, e.redraw],
            click: [e.clickGrpah, e.redraw],
            rightClick: [e.graphMenu],
            drag: [e.regionSelect, e.redraw],
            wheel: [e.zoom, e.redraw]
        },
        Legend: {
            over: [e.hoverState, e.legendCursor, e.redraw],
            out: [e.dishoverState, e.cancelCursor, e.redraw],
            click: [e.cleanLegendChooseData, e.clickAndSelect, e.redraw],
            drag: [e.dragLegendSlider, e.redraw]
        }
    };
    return i
}, 566, 781);
I$(783, function(t, e) {
    var i = {
        PivotAxisTitle: {
            longPress: [e.pivotAxisTitleMenu]
        },
        PivotAxis: {
            longPress: [e.pivotAxisMenu]
        },
        CommonAxis: {
            longPress: [e.commonAxisMenu],
            drag: [e.axisSliderDrag, e.redraw]
        },
        Graph: {
            click: [e.unselectState, e.redraw],
            longPress: [e.graphMenu],
            drag: [e.graphSliderDrag, e.pieDrag, e.mapDrag, e.redraw]
        },
        Legend: {
            drag: [e.shiftDrag, e.redraw]
        },
        Emphasis: {
            drag: [e.shiftDrag, e.redraw]
        }
    };
    return i
}, 566, 781);
I$(695, function(t, e, i, n) {
    var r = {},
        a = t.colortraits.Klass.extend({
            initialize: function(t) {
                r = "mobile" != t.platform ? i : n;
                if(t && void 0 != t.interact) this.initActionMap(t.interact);
                this.setactionMap(r)
            },
            initActionMap: function(t) {
                for(op in t)
                    for(var i = t[op], n = 0; n < i.length; ++n) {
                        var r = i[n],
                            a = [];
                        if(void 0 != r.action) a = r.action.map(function(t) {
                            return e[t]
                        });
                        this[op](r.morph, r.op, a)
                    }
            },
            add: function(t, e, i) {
                if(e in r[t]) console.log("key已经存在");
                else r[t][e] = i
            },
            replace: function(t, e, i) {
                if(e in r[t]) r[t][e] = i
            },
            remove: function(t, e) {
                if(e in r[t]) delete r[t][e]
            },
            exec: function(t, e, i, n) {
                n.morphType = t;
                var a = e.type;
                if(r[t] && a in r[t])
                    for(var s = r[t][a], o = 0; o < s.length; ++o) n = s[o](e, i, n);
                return n
            }
        }, ["actionMap"]);
    return a
}, 566, 781, 782, 783);
I$(573, function(t, e, i, n, r, a, s, o) {
    function l() {
        if(null == c) c = {
            tooltip: d.Tooltip,
            emphasis: d.Emphasis,
            graph: d.NewGraph,
            xPivotAxis: d.PivotAxis,
            xPivotAxisTitle: d.PivotAxisTitle,
            yPivotAxis: d.PivotAxis,
            yPivotAxisTitle: d.PivotAxisTitle,
            scrollGraph: d.ScrollGraph,
            legend: d.Legend,
            zoom: d.Zoom,
            statistic: d.Statistic,
            left: d.CommonAxis,
            right: d.CommonAxis,
            bottom: d.CommonAxis,
            top: d.CommonAxis
        }
    }
    var c, u = t.Stage,
        d = r.MorphKlassMap,
        h = e.Klass.extend({
            initialize: function(t, e, i) {
                l();
                this.subTraits(0).__init();
                this.setmorphs({});
                if(null == t) t = document.body;
                var r = i.option(),
                    a = document.createElement("div");
                a.className = "nevChartContainer";
                var c = {
                    position: "absolute",
                    overflow: "auto",
                    width: r["area"].width + "px",
                    height: r["area"].height + "px",
                    left: "0px",
                    top: "0px"
                };
                ! function(t, e) {
                    for(var i in e) t.style[i] = e[i]
                }(a, c);
                t.appendChild(a);
                t = a;
                this.setdashboard(n.create(t));
                this.setcontainer(t);
                this.setstageInfo({});
                this.setlinkInfo({});
                this.settheme(e);
                this.setchart(i);
                this.set_globalVals({});
                this.dispatcher = s.create(this.morphs());
                this.actionMgr = o.create(i.option())
            },
            constructMorphInfos: function(t) {
                var e, i, n = t.setting && t.setting.textTable,
                    r = {},
                    a = [],
                    s = this.theme(),
                    o = t.pivotAxis.xPivotAxisInfo;
                if(o) {
                    o.titleValuesMatrix.type = "x";
                    o.titleNameArray.type = "x";
                    e = [o.titleValuesMatrix, s];
                    e[0].isTextTable = n;
                    i = {
                        type: "xPivotAxis",
                        add: !0,
                        arguments: e,
                        createIndex: 0
                    };
                    a.push(i);
                    r.xPivotAxis = i;
                    e = [o.titleNameArray, s];
                    e[0].isTextTable = n;
                    i = {
                        type: "xPivotAxisTitle",
                        add: !0,
                        arguments: e,
                        createIndex: 1
                    };
                    a.push(i);
                    r.xPivotAxisTitle = i
                }
                var o = t.pivotAxis.yPivotAxisInfo;
                if(o) {
                    o.titleValuesMatrix.type = "y";
                    o.titleNameArray.type = "y";
                    e = [o.titleValuesMatrix, s];
                    e[0].isTextTable = n;
                    i = {
                        type: "yPivotAxis",
                        add: !0,
                        arguments: e,
                        createIndex: 6.5
                    };
                    a.push(i);
                    r.yPivotAxis = i;
                    e = [o.titleNameArray, s];
                    e[0].isTextTable = n;
                    i = {
                        type: "yPivotAxisTitle",
                        add: !0,
                        arguments: e,
                        createIndex: 7
                    };
                    a.push(i);
                    r.yPivotAxisTitle = i
                }
                if(t.pivotAxis.isCommonAxis) {
                    var l = t.pivotAxis.commonAxisInfos;
                    for(var c in l)
                        if(null != l[c].infos) {
                            e = [l[c], s];
                            e[0].isTextTable = n;
                            var u = 6.1;
                            if("top" == c || "left" == c) u = 2.1;
                            i = {
                                type: c,
                                add: !0,
                                arguments: e,
                                createIndex: u
                            };
                            a.push(i);
                            r[c] = i
                        }
                }
                if(t.statisticsInfo) {
                    e = [t.statisticsInfo, s];
                    e[0].isTextTable = n;
                    i = {
                        type: "statistic",
                        add: !0,
                        arguments: e,
                        createIndex: 5
                    };
                    a.push(i);
                    r.statistic = i
                }
                e = [t.marksInfoMatrix, s];
                e[0].isTextTable = n;
                i = {
                    type: "graph",
                    add: !0,
                    arguments: e,
                    createIndex: 100
                };
                a.push(i);
                r.graph = i;
                e = [t.legendInfo, s];
                e[0].isTextTable = n;
                i = {
                    type: "legend",
                    add: !0,
                    arguments: e,
                    createIndex: 6
                };
                a.push(i);
                r.legend = i;
                if(t.emphasisInfo.add) {
                    e = [t.emphasisInfo, s];
                    i = {
                        type: "emphasis",
                        add: !0,
                        arguments: e,
                        createIndex: 5.9
                    };
                    a.push(i);
                    r.emphasis = i
                }
                e = [{
                    space: {
                        x: 0,
                        y: 0,
                        width: 100,
                        height: 100
                    },
                    tooltips: []
                }, s];
                i = {
                    type: "tooltip",
                    add: !0,
                    arguments: e,
                    createIndex: 7
                };
                if(t.aliasMap) i.aliasMap = t.aliasMap;
                a.push(i);
                r.tooltip = i;
                var d = t.marksInfoMatrix.space,
                    h = t.marksInfoMatrix.scrollLogicSpace,
                    f = t.xScrollSpace,
                    p = t.yScrollSpace,
                    _ = t.pivotAxis.commonAxisInfos && t.pivotAxis.commonAxisInfos.bottom && t.pivotAxis.commonAxisInfos.bottom.space;
                e = [{
                    graphSpace: d,
                    scrollLogicSpace: h,
                    xScrollSpace: f,
                    yScrollSpace: p,
                    bottomSpace: _
                }, s];
                i = {
                    type: "scrollGraph",
                    arguments: e,
                    createIndex: 8
                };
                a.push(i);
                r.scrollGraph = i;
                if(t.zoom) {
                    t.zoom.container = this.container();
                    e = [t.zoom, s];
                    i = {
                        type: "zoom",
                        add: !0,
                        arguments: e,
                        createIndex: 9
                    };
                    a.push(i);
                    r.zoom = i
                }
                var m = this.container(),
                    g = t["graphSize"],
                    v = t["area"],
                    y = g.chartWidth < v.width ? g.chartWidth : v.width,
                    b = g.chartHeigth < v.height ? g.chartHeigth : v.height;
                m.style.width = y + "px";
                m.style.height = b + "px";
                return r
            },
            createMorph: function(t) {
                this.set_globalVals({
                    aliasMap: t.aliasMap,
                    choose: t.choose,
                    response: t.response
                });
                this.__innerData = t;
                var e = this.morphs(),
                    i = this.constructMorphInfos(t),
                    n = Object.keys(i);
                n = n.sort(function(t, e) {
                    return i[t].createIndex - i[e].createIndex
                });
                for(var r = 0; r < n.length; r++) {
                    var a = n[r],
                        s = i[a],
                        o = c[a];
                    s.arguments.push(this);
                    var l = o.create.apply(o, s.arguments);
                    if(s.add) e[a] = l;
                    else if("scrollGraph" == a) {
                        this.setxScroll(l.xScroll());
                        this.setyScroll(l.yScroll());
                        this.setscroll(l);
                        this.dashboard().addDomEle(this.scroll().scrollEle())
                    }
                    if(s.aliasMap) l.aliasMap = s.aliasMap
                }
            },
            resetData: function(t) {
                var e, i, n = this.stageInfo(),
                    r = this.constructMorphInfos(t),
                    a = this.morphs(),
                    s = this.dashboard();
                this.scroll().updateSpace.apply(this.scroll(), r.scrollGraph.arguments);
                var o = this.yScroll().scrollEle();
                o.onscroll({
                    srcElement: o,
                    target: o
                });
                var l = this.xScroll().scrollEle();
                l.onscroll({
                    srcElement: l,
                    target: l
                });
                for(var c in a) {
                    e = a[c];
                    i = r[c].arguments;
                    e.resetData && e.resetData.apply(e, i);
                    if("statistic" != c) {
                        var u = n[e.id()].stage;
                        if("graph" == c) s.updateSize(u, e.space());
                        else s.updateSpace(u, e.space());
                        var d = e.space();
                        n[e.id()].inteactRect.setwidth(d.width);
                        n[e.id()].inteactRect.setheight(d.height)
                    } else;
                }
                this.syncMsgBetweenMorphs();
                var h = this.container();
                if(h) {
                    var f = t["graphSize"],
                        p = t["area"],
                        _ = f.chartWidth < p.width ? f.chartWidth : p.width,
                        m = f.chartHeigth < p.height ? f.chartHeigth : p.height,
                        g = document.createElement("div");
                    g.className = "nevChartContainer";
                    var v = {
                        position: "absolute",
                        overflow: "auto",
                        width: _ + "px",
                        height: m + "px",
                        left: "0px",
                        top: "0px"
                    };
                    ! function(t, e) {
                        for(var i in e) t.style[i] = e[i]
                    }(g, v);
                    for(var y = h.childNodes; y.length;) g.appendChild(y[0]);
                    h.parentNode.replaceChild(g, h);
                    this.setcontainer(g)
                }
            },
            link2: function(t, e) {
                if(null != t && null != e) {
                    var i = this.linkInfo();
                    if(null == i[t.id()] || null == i[t.id()][e.id()]) {
                        var n = t.listenOutputMsg(function(t) {
                            e.inputMsg(t)
                        });
                        if(null == i[t.id()]) i[t.id()] = {};
                        i[t.id()][e.id()] = n
                    }
                }
            },
            disLink2: function(t, e) {
                var i = this.linkInfo();
                i[t.id()][e.id()].dispose()
            },
            constructMorphNet: function() {
                var t = this.morphs();
                if(this.xScroll()) {
                    this.link2(this.xScroll(), t.graph);
                    if(t.xPivotAxis) this.link2(this.xScroll(), t.xPivotAxis);
                    if(t.top) this.link2(this.xScroll(), t.top);
                    if(t.bottom) this.link2(this.xScroll(), t.bottom)
                }
                if(this.yScroll()) {
                    this.link2(this.yScroll(), t.graph);
                    if(t.yPivotAxis) this.link2(this.yScroll(), t.yPivotAxis);
                    if(t.left) this.link2(this.yScroll(), t.left);
                    if(t.right) this.link2(this.yScroll(), t.right)
                }
                if(t.top) {
                    this.link2(t.top, t.graph);
                    this.link2(t.graph, t.top);
                    this.link2(t.top, t.legend);
                    this.link2(t.top, t.xPivotAxis);
                    this.link2(t.top, t.yPivotAxis)
                }
                if(t.bottom) {
                    this.link2(t.bottom, t.graph);
                    this.link2(t.graph, t.bottom);
                    this.link2(t.bottom, t.legend);
                    this.link2(t.bottom, t.xPivotAxis);
                    this.link2(t.bottom, t.yPivotAxis)
                }
                if(t.right) {
                    this.link2(t.right, t.graph);
                    this.link2(t.graph, t.right);
                    this.link2(t.right, t.legend);
                    this.link2(t.right, t.xPivotAxis);
                    this.link2(t.right, t.yPivotAxis)
                }
                if(t.left) {
                    this.link2(t.left, t.graph);
                    this.link2(t.graph, t.left);
                    this.link2(t.left, t.legend);
                    this.link2(t.left, t.xPivotAxis);
                    this.link2(t.left, t.yPivotAxis)
                }
                this.link2(t.graph, t.tooltip);
                this.link2(t.yPivotAxis, t.tooltip);
                this.link2(t.xPivotAxis, t.tooltip);
                this.link2(t.xPivotAxis, t.graph);
                this.link2(t.yPivotAxis, t.graph);
                this.link2(t.graph, t.xPivotAxis);
                this.link2(t.graph, t.yPivotAxis);
                this.link2(t.xPivotAxis, t.yPivotAxis);
                this.link2(t.yPivotAxis, t.xPivotAxis);
                this.link2(t.legend, t.graph);
                this.link2(t.graph, t.legend);
                this.link2(t.legend, t.tooltip);
                this.link2(t.legend, t.xPivotAxis);
                this.link2(t.legend, t.yPivotAxis);
                this.link2(t.xPivotAxis, t.legend);
                this.link2(t.yPivotAxis, t.legend);
                this.link2(t.graph, t.zoom);
                this.link2(t.graph, t.emphasis);
                this.notifyChart();
                this.syncMsgBetweenMorphs()
            },
            segmentMorph: function() {
                function e(t) {
                    return function(e) {
                        o.dispatcher.dispatchEvent(e, r[t])
                    }
                }

                function i() {
                    return function(t) {
                        o.dispatcher.dispatchEvent(t, r.graph);
                        r["statistic"].inputMsg(t)
                    }
                }
                var n = this.stageInfo(),
                    r = this.morphs(),
                    a = this.container(),
                    s = this.dashboard(),
                    o = this;
                for(var l in r) {
                    var c = r[l];
                    c.__name = l;
                    c.listenOutputMsg(function(t) {
                        if("posRestore" == t.type) {
                            var e = n[t.morph.id()].stage,
                                i = n[t.morph.id()].inteactRect,
                                a = -e.x(),
                                o = -e.y();
                            if("graph" == t.morph.__name) {
                                e.moveBy(a, o);
                                i.moveBy(-a, -o);
                                if(t.oriEvt && "vertical" == t.oriEvt.orient) {
                                    e.painter().sketchpad().style.top = -t.oriEvt.y + "px";
                                    e.painter().sketchpad().style.left = -t.oriEvt.x + "px"
                                }
                            } else {
                                e.moveBy(a, o);
                                i.moveBy(-a, -o)
                            }
                            e.invalidate()
                        } else if("moveByed" == t.type) {
                            var e = n[t.morph.id()].stage,
                                i = n[t.morph.id()].inteactRect;
                            if("graph" == t.morph.__name) {
                                e.moveBy(t.dx, t.dy);
                                i.moveBy(-t.dx, -t.dy);
                                if(t.oriEvt && "vertical" == t.oriEvt.orient) {
                                    e.painter().sketchpad().style.top = -t.oriEvt.y + "px";
                                    e.painter().sketchpad().style.left = -t.oriEvt.x + "px"
                                }
                            } else {
                                e.moveBy(t.dx, t.dy);
                                i.moveBy(-t.dx, -t.dy)
                            }
                            e.invalidate()
                        } else if("updateTooltip" == t.type) {
                            var e = n[t.morph.id()].stage;
                            s.updatePosition(e, t.morph.space())
                        } else if("updateTooltipSize" == t.type) {
                            var e = n[t.morph.id()].stage;
                            s.updateSpace(e, t.morph.space())
                        } else if("redraw" == t.type) {
                            var e = n[t.morph.id()].stage;
                            e.invalidate()
                        } else if("legend" == t.type) {
                            if("selectCursor" == t.func) n[t.morph.id()].stage.painter().sketchpad().style.cursor = "move";
                            else if("cancelCursor" == t.func) n[t.morph.id()].stage.painter().sketchpad().style.cursor = "default";
                            else if("pointer" == t.func) n[t.morph.id()].stage.painter().sketchpad().style.cursor = "pointer";
                        } else if("destroyLegend" == t.type) {
                            if(null == r["legend"]) return;
                            var l = n[r["legend"].id()] ? n[r["legend"].id()].stage.painter().sketchpad() : null;
                            if(l) {
                                delete n[r["legend"].id()];
                                delete r["legend"];
                                l.parentNode.removeChild(l)
                            }
                        }
                    });
                    if("graph" == l) {
                        var d = u.create({
                            container: this.yScroll().scrollEle(),
                            width: c.space().width,
                            height: c.space().height
                        });
                        s.addStage(d, {
                            x: 0,
                            y: 0
                        });
                        if(c.root()) d.add(c.root())
                    } else if("statistic" != l) {
                        var d = u.create({
                            container: a,
                            width: c.space().width,
                            height: c.space().height
                        });
                        s.addStage(d, {
                            x: c.space().x,
                            y: c.space().y
                        });
                        if(c.root()) d.add(c.root())
                    } else continue;
                    d.invalidate();
                    d.painter().sketchpad().className = l;
                    if("tooltip" == l || "statistic" == l) {
                        var h = d.painter().sketchpad();
                        h.style.pointerEvents = "none"
                    }
                    var f = t.Rect.create({
                        x: 0,
                        y: 0,
                        width: c.space().width,
                        height: c.space().height,
                        fillStyle: {
                            r: 255,
                            g: 0,
                            b: 0,
                            a: 0
                        },
                        strokeStyle: {
                            r: 0,
                            g: 0,
                            b: 0,
                            a: 0
                        }
                    });
                    d.add(f);
                    var p = e(l);
                    if("graph" == l) p = i();
                    f.addEventListener("mouseOver", p);
                    f.addEventListener("mouseOut", p);
                    f.addEventListener("mouseMoved", p);
                    f.addEventListener("mouseDragged", p);
                    f.addEventListener("mouseClicked", p);
                    f.addEventListener("mousewheel", p);
                    f.addEventListener("mousePressed", p);
                    f.addEventListener("mouseReleased", p);
                    n[c.id()] = {
                        stage: d,
                        inteactRect: f
                    }
                }
                var _ = r.statistic,
                    m = r.graph;
                n[_.id()] = n[m.id()];
                n[_.id()].stage.add(_.root())
            },
            notifyChart: function() {
                var t = this.chart(),
                    e = (this.morphs().graph, this.morphs());
                for(var i in e) {
                    var n = e[i];
                    n.subscribe("chart", function(e) {
                        if("contextmenu" == e.type || "contextselect" == e.type || "statistic" == e.type) t.notify("input", e)
                    })
                }
            },
            removeStages: function() {
                var t = this.container();
                if(t && t.parentNode) t.parentNode.removeChild(t);
                this.subTraits(0).__destroy();
                delete window["__nevBabel"];
                delete window["__nevInnerData"]
            },
            updateTheme: function(t) {
                var e = this.morphs(),
                    i = this.stageInfo(),
                    n = {};
                if(t.paneMarkTheme) n.graph = !0;
                if(t.visualScales) {
                    n.graph = !0;
                    n.legend = !0
                }
                for(var r in n) {
                    e[r].updateTheme();
                    i[e[r].id()].stage.invalidate()
                }
            },
            publicMsg: function(t) {
                var e = this.morphs();
                for(var i in e) e[i].inputMsg(t)
            },
            redraw: function(t) {
                var e = this.stageInfo(),
                    i = e[t.id()].stage;
                i.invalidate()
            },
            syncMsgBetweenMorphs: function() {
                var t = this.morphs();
                for(var e in t) t[e].sendAllMessages && t[e].sendAllMessages()
            }
        }, ["_globalVals", "chart", "morphs", "dashboard", "container", "linkInfo", "stageInfo", "theme", "xScroll", "yScroll", "scroll", "zoom"], [a]);
    return h
}, 566, 571, 656, 692, 572, 693, 694, 695);
I$(698, function(t, e) {
    var i = e.PRIVATE,
        n = t.extend({
            initialize: function() {
                this._t.setrangeValue(1)
            },
            exec: function() {
                return this._t.rangeValue()
            },
            range: function(t) {
                if(t) this._t.setrangeValue(t);
                else return this._t.rangeValue()
            },
            domain: function() {}
        }, [i("rangeValue")]);
    return n
}, 736, 571);
I$(784, function(t, e, i, n) {
    function r() {
        var t = {
            visualScales: {
                defaultFill: {
                    visualType: "color",
                    domainType: "any",
                    range: "defaultColor"
                }
            },
            defaultColor: l[0],
            defaultColorRange: l,
            defaultSizeRange: [0, 1],
            defaultShapeRange: u,
            graph: {
                z: -9999999
            },
            title: {
                xPosition: "center",
                yPosition: "top",
                rotation: 0,
                styles: [{
                    font: {
                        size: 12,
                        family: a
                    },
                    align: "center",
                    lineSpacing: 10,
                    fillStyle: s(121, 121, 121)
                }],
                z: 1e4
            },
            tooltip: {
                root: {
                    z: 9999
                },
                position: "ES",
                background: {
                    fillStyle: s(255, 255, 255),
                    strokeStyle: s(139, 139, 139),
                    lineWidth: 1,
                    z: 9900
                },
                text: {
                    texts: function(t, e) {
                        return t.outText
                    },
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "left",
                        lineSpacing: 10,
                        fillStyle: s(121, 121, 121)
                    }],
                    z: 9991
                }
            },
            legend: {
                colorOrdinal: {
                    visualProperties: {
                        width: 10,
                        height: 10
                    },
                    caption: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(51, 51, 51)
                    },
                    text: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(51, 51, 51)
                    },
                    mark: {
                        strokeStyle: o(0, 0, 0, 0),
                        lineWidth: 1
                    }
                },
                colorLinear: {
                    visualProperties: {
                        rect: {
                            width: 150,
                            height: 5
                        },
                        slider: {
                            size: 10
                        }
                    },
                    mark: {
                        fillStyle: o(255, 255, 255),
                        strokeStyle: o(221, 221, 221),
                        lineWidth: 1
                    },
                    text: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102)
                    },
                    frame: {
                        fillStyle: s(72, 176, 247),
                        strokeStyle: o(0, 0, 0, 0),
                        lineWidth: 1
                    },
                    caption: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102)
                    }
                },
                sizeLinear: {
                    visualProperties: {
                        rect: {
                            width: 150,
                            height: 5
                        },
                        slider: {
                            size: 10
                        },
                        fillStyle: o(255, 255, 0),
                        strokeStyle: o(255, 0, 0)
                    },
                    mark: {
                        fillStyle: o(255, 255, 255),
                        strokeStyle: o(221, 221, 221),
                        lineWidth: 1
                    },
                    text: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102)
                    },
                    frame: {
                        fillStyle: s(72, 176, 247),
                        strokeStyle: o(0, 0, 0, 0),
                        lineWidth: 1
                    },
                    caption: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102)
                    }
                },
                shape: {
                    visualProperties: {
                        width: 20,
                        height: 20
                    },
                    caption: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(51, 51, 51)
                    },
                    text: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(51, 51, 51)
                    },
                    mark: {
                        strokeStyle: o(0, 0, 0),
                        lineWidth: 2,
                        scale: {
                            sx: .5,
                            sy: .5
                        },
                        fillStyle: o(0, 0, 0)
                    }
                },
                layoutArgus: {
                    position: {
                        x: 6,
                        y: 14
                    },
                    rowSpace: 8,
                    caption2Frame: 17,
                    frame2Text: 5,
                    frame2Frame: 15,
                    mark2Text: 3,
                    legend2Legend: 18
                }
            },
            pivotAxisTitle: {
                backgroundText: {
                    backgroundFillStyle: o(210, 210, 210, 0),
                    backgroundStrokeStyle: o(210, 210, 210, 0),
                    textFillStyle: s(102, 102, 102),
                    backgroundLineWidth: 1,
                    textFont: {
                        size: 12,
                        family: a
                    },
                    textX: "center",
                    textY: "center",
                    textAlign: "center",
                    textLineSpacing: 3
                }
            },
            pivotAxis: {
                backgroundText: {
                    backgroundFillStyle: o(200, 200, 200, 0),
                    backgroundStrokeStyle: void 0,
                    textFillStyle: s(102, 102, 102),
                    backgroundLineWidth: 1,
                    textFont: {
                        size: 12,
                        family: a
                    },
                    textX: "center",
                    textY: "center",
                    textAlign: "center",
                    textLineSpacing: 3
                },
                hover: {
                    backgroundText: {
                        backgroundFillStyle: s(240, 240, 240)
                    }
                },
                focus: {
                    backgroundText: {
                        backgroundFillStyle: s(210, 210, 210)
                    }
                },
                gray: {
                    backgroundText: {
                        backgroundFillStyle: o(240, 240, 240, 0)
                    }
                }
            },
            pivotAxisGrid: {
                strokeStyle: o(221, 221, 221, 1),
                lineWidth: 1,
                lineDash: [],
                z: 1
            },
            pivotTitleGrid: {
                strokeStyle: o(221, 221, 221, 1),
                lineWidth: 1,
                lineDash: [],
                z: 1
            },
            commonAxisGrid: {
                strokeStyle: o(221, 221, 221, 1),
                lineDash: [],
                z: 1
            },
            graphGrid: {
                strokeStyle: o(221, 221, 221, 1),
                lineWidth: 1,
                lineDash: [],
                z: 1
            },
            axisGrid: {
                strokeStyle: o(221, 221, 221, 1),
                lineWidth: 1,
                lineDash: [2],
                z: 1
            },
            tableGrid: {
                strokeStyle: o(221, 221, 221, 1),
                lineWidth: 1,
                lineDash: [],
                z: 1
            },
            xAxis: {
                captionToLabelPadding: 5,
                captionToBoundaryPadding: 5,
                labelToTickPadding: 4,
                caption: {
                    align: "middle",
                    orient: "horizontal",
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102),
                        align: "center",
                        lineSpacing: 3
                    }],
                    z: 5
                },
                label: {
                    full: !1,
                    maxWidth: 1 / 0,
                    maxHeight: 1 / 0,
                    adapter: ["hur", "r", 1, 1, Math.PI / 2],
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102)
                    }],
                    z: 4
                },
                line: {
                    strokeStyle: s(221, 221, 221),
                    lineWidth: 1,
                    z: 3
                },
                tick: {
                    density: 3,
                    strokeStyle: o(221, 221, 221, 0),
                    lineWidth: 1,
                    size: 6,
                    z: 2
                },
                tableGrid: {
                    strokeStyle: o(221, 221, 221, 1),
                    lineWidth: 1,
                    lineDash: [],
                    z: 2
                },
                background: {
                    z: 0,
                    fillStyle: s(255, 255, 255)
                }
            },
            yAxis: {
                captionToLabelPadding: 5,
                captionToBoundaryPadding: 5,
                labelToTickPadding: 4,
                caption: {
                    align: "middle",
                    orient: "vertical",
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102),
                        align: "center",
                        lineSpacing: 3
                    }],
                    z: 5
                },
                label: {
                    full: !1,
                    maxWidth: 1 / 0,
                    maxHeight: 1 / 0,
                    adapter: ["hur", "r", 1, 1],
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102)
                    }],
                    z: 4
                },
                line: {
                    strokeStyle: s(221, 221, 221),
                    lineWidth: 1,
                    z: 3
                },
                tick: {
                    density: 3,
                    size: 6,
                    strokeStyle: o(221, 221, 221, 0),
                    lineWidth: 1,
                    z: 2
                },
                tableGrid: {
                    strokeStyle: o(221, 221, 221, 1),
                    lineWidth: 1,
                    lineDash: [],
                    z: 2
                },
                background: {
                    z: 0,
                    fillStyle: s(255, 255, 255)
                }
            },
            xCartesianAxis: {
                captionToLabelPadding: 5,
                captionToBoundaryPadding: 5,
                labelToTickPadding: 4,
                caption: {
                    align: "high",
                    orient: "horizontal",
                    styles: [{
                        font: {
                            size: 14,
                            family: a
                        },
                        fillStyle: s(102, 102, 102),
                        align: "center",
                        lineSpacing: 3
                    }],
                    z: 5
                },
                label: {
                    maxWidth: 1 / 0,
                    maxHeight: 1 / 0,
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102)
                    }],
                    z: 4
                },
                line: {
                    strokeStyle: s(221, 221, 221),
                    lineWidth: 1,
                    z: 3
                },
                tick: {
                    strokeStyle: o(0, 0, 0, 0),
                    lineWidth: 1,
                    size: 6,
                    z: 2
                }
            },
            yCartesianAxis: {
                captionToLabelPadding: 5,
                captionToBoundaryPadding: 5,
                labelToTickPadding: 4,
                caption: {
                    align: "high",
                    orient: "vertical",
                    styles: [{
                        font: {
                            size: 14,
                            family: a
                        },
                        fillStyle: s(102, 102, 102),
                        align: "center",
                        lineSpacing: 3
                    }],
                    z: 5
                },
                label: {
                    maxWidth: 1 / 0,
                    maxHeight: 1 / 0,
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(102, 102, 102)
                    }],
                    z: 4
                },
                line: {
                    strokeStyle: s(221, 221, 221),
                    lineWidth: 1,
                    z: 3
                },
                tick: {
                    strokeStyle: o(0, 0, 0, 0),
                    lineWidth: 1,
                    size: 6,
                    z: 2
                }
            },
            mapCoord: {
                path: {
                    fillStyle: o(242, 242, 242, 1),
                    strokeStyle: o(221, 221, 221, 1),
                    lineWidth: .5,
                    hidden: !1,
                    z: 10
                },
                text: {
                    font: {
                        size: 12,
                        family: a
                    },
                    fillStyle: s(102, 102, 102),
                    z: 1e10
                }
            },
            bar: {
                mark: {
                    lineWidth: 1,
                    fillStyle: "defaultFill",
                    strokeStyle: void 0,
                    innerPadding: .1,
                    outerPadding: .2,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        var e = this.__index;
                        return e + 1
                    }
                },
                label: {
                    orient: "horizontal",
                    autoHidden: !1,
                    position: "waist",
                    text: function(t) {
                        return ["Abc"]
                    },
                    styles: [{
                        fillStyle: s(0, 0, 0),
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }],
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return 1e5 + 2 * (e + 1)
                    }
                },
                hover: {
                    mark: {
                        lineWidth: 1,
                        strokeStyle: s(20, 20, 20),
                        fillStyle: i(function(t) {
                            return o(t.r + 30, t.g + 30, t.b + 30, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return 1e5 + e + 1
                        }
                    }
                },
                focus: {
                    mark: {
                        lineWidth: 1,
                        strokeStyle: void 0,
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return 1e5 + e + 1
                        }
                    }
                },
                gray: {
                    mark: {
                        lineWidth: 0,
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        }
                    }
                }
            },
            pie: {
                topPadding: 0,
                bottomPadding: 10,
                mark: {
                    fillStyle: "defaultFill",
                    strokeStyle: void 0,
                    lineWidth: .5,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 1
                    },
                    disCenter: 0,
                    angleRange: [-90, 270]
                },
                label: {
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return 1e5 + 2 * (e + 1)
                    },
                    position: "inner",
                    leadLength: 30,
                    leadRatio: .1,
                    autoHidden: !0,
                    fillStyle: "defaultFill",
                    autoHidden: !1,
                    styles: [{
                        fillStyle: s(0, 0, 0),
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }]
                },
                hover: {
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r + 30, t.g + 30, t.b + 30, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        lineWidth: 1,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return 1e5 + e + 1
                        },
                        disCenter: 5
                    }
                },
                focus: {
                    mark: {
                        strokeStyle: s(20, 20, 20),
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        lineWidth: 1,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return 1e5 + e + 1
                        },
                        disCenter: 5
                    }
                },
                gray: {
                    mark: {
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        lineWidth: 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        },
                        disCenter: 0
                    }
                }
            },
            line: {
                line: {
                    lineWidth: 3,
                    strokeStyle: "defaultFill",
                    smooth: !1,
                    nullType: "broken",
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 1
                    }
                },
                mark: {
                    radius: function(t) {
                        if(t.__isIsolated) return e.isolatedPointRadius;
                        else return e.lineBaseRadius
                    },
                    fillStyle: "defaultFill",
                    lineWidth: 1,
                    strokeStyle: void 0,
                    hidden: !1,
                    strokeScaleInvariant: !0,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 101
                    }
                },
                label: {
                    position: "N",
                    fillStyle: "defaultFill",
                    z: 4799,
                    styles: [{
                        fillStyle: s(0, 0, 0),
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }]
                },
                hover: {
                    line: {
                        strokeStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20001
                        }
                    },
                    mark: {
                        radius: e.interactiveRadius,
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20501
                        }
                    }
                },
                focus: {
                    line: {
                        strokeStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20001
                        }
                    },
                    mark: {
                        radius: e.interactiveRadius,
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20501
                        }
                    }
                },
                gray: {
                    line: {
                        strokeStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        }
                    },
                    mark: {
                        radius: function(t) {
                            if(t.__isIsolated) return e.isolatedPointRadius;
                            else return e.lineBaseRadius
                        },
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 101
                        }
                    }
                }
            },
            gradientLine: {
                line: {
                    lineWidth: 3,
                    strokeStyle: "defaultFill",
                    smooth: !1,
                    nullType: "broken",
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 1
                    }
                },
                mark: {
                    radius: e.lineBaseRadius,
                    fillStyle: "defaultFill",
                    lineWidth: 1,
                    strokeStyle: void 0,
                    hidden: !1,
                    strokeScaleInvariant: !0,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return 3 * (e + 1)
                    },
                    scale: e.radiusScale.normalScale
                },
                label: {
                    position: "E",
                    fillStyle: "defaultFill",
                    z: 799,
                    styles: [{
                        fillStyle: s(0, 0, 0),
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }]
                },
                hover: {
                    line: {
                        strokeStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20001
                        }
                    },
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20501
                        },
                        scale: e.radiusScale.hoverScale(1)
                    }
                },
                focus: {
                    line: {
                        strokeStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20001
                        }
                    },
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20501
                        },
                        scale: e.radiusScale.focusScale(1)
                    }
                },
                gray: {
                    line: {
                        strokeStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        }
                    },
                    mark: {
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return 3 * (e + 1)
                        },
                        scale: e.radiusScale.grayScale
                    }
                }
            },
            area: {
                line: {
                    lineWidth: 1,
                    strokeStyle: void 0,
                    smooth: !1,
                    hidden: !1,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 1
                    }
                },
                mark: {
                    radius: function(t) {
                        if(t.__isIsolated) return e.isolatedPointRadius;
                        else return e.areaBaseRadius
                    },
                    fillStyle: "defaultFill",
                    strokeStyle: void 0,
                    hidden: !1,
                    strokeScaleInvariant: !0,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return 3 * (e + 1)
                    },
                    scale: e.radiusScale.normalScale
                },
                label: {
                    position: "N",
                    fillStyle: "defaultFill",
                    z: 699,
                    styles: [{
                        fillStyle: s(0, 0, 0),
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }]
                },
                zone: {
                    fillStyle: "defaultFill",
                    strokeStyle: void 0,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 1
                    }
                },
                hover: {
                    line: {
                        strokeStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 9e3
                        }
                    },
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 9500
                        },
                        scale: e.radiusScale.hoverScale(1)
                    }
                },
                focus: {
                    line: {
                        strokeStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 9e3
                        }
                    },
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 9500
                        },
                        scale: e.radiusScale.focusScale(1)
                    }
                },
                gray: {
                    line: {
                        strokeStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        }
                    },
                    mark: {
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return 3 * (e + 1)
                        },
                        scale: e.radiusScale.grayScale
                    }
                }
            },
            path: {
                mark: {
                    fillStyle: "defaultFill",
                    strokeStyle: o(204, 204, 204, 1),
                    lineWidth: .5,
                    hidden: !1,
                    strokeScaleInvariant: !0,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return 3 * -(e + 1)
                    }
                },
                label: {
                    styles: [{
                        fillStyle: s(102, 102, 102),
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }],
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return 3 * (e + 1) + 1e3
                    }
                },
                hover: {
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r + 30, t.g + 30, t.b + 30, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1e3
                        }
                    }
                },
                focus: {
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1e3
                        }
                    }
                },
                gray: {
                    mark: {
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        }
                    }
                }
            },
            scatter: {
                mark: {
                    lineWidth: 1,
                    fillStyle: "defaultFill",
                    strokeStyle: void 0,
                    strokeScaleInvariant: !0,
                    radius: e.scatterBaseSize,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 1
                    }
                },
                label: {
                    position: "ES",
                    fillStyle: "defaultFill",
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 500
                    },
                    styles: [{
                        fillStyle: s(0, 0, 0),
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }]
                },
                hover: {
                    mark: {
                        strokeStyle: s(20, 20, 20),
                        fillStyle: i(function(t) {
                            return o(t.r + 30, t.g + 30, t.b + 30, t.a)
                        }),
                        lineWidth: 1,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1e5
                        }
                    }
                },
                focus: {
                    mark: {
                        strokeStyle: s(20, 20, 20),
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        lineWidth: 1,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1e5
                        }
                    }
                },
                gray: {
                    mark: {
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        lineWidth: 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        }
                    }
                }
            },
            text: {
                mark: {
                    lineWidth: 1,
                    fillStyle: s(51, 51, 51),
                    xAlign: "center",
                    yAlign: "center",
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 1
                    },
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }]
                },
                hover: {
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r + 30, t.g + 30, t.b + 30, t.a)
                        }),
                        lineWidth: 1,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1e5
                        }
                    }
                },
                focus: {
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        lineWidth: 1,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1e5
                        }
                    }
                },
                gray: {
                    mark: {
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        lineWidth: 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        }
                    }
                }
            },
            xGuideline: {
                line: {
                    strokeStyle: {
                        r: 150,
                        g: 150,
                        b: 150
                    },
                    lineWidth: 1,
                    z: 2e5
                }
            },
            yGuideline: {
                line: {
                    strokeStyle: {
                        r: 150,
                        g: 150,
                        b: 150
                    },
                    lineWidth: 1,
                    z: 2e5
                }
            },
            slider: {
                radius: 10,
                fillStyle: {
                    r: 74,
                    g: 74,
                    b: 74,
                    a: .5
                },
                ratioAnchor: {
                    ratiox: .5,
                    ratioy: .5
                },
                z: 999999999,
                strokeStyle: void 0
            },
            statisticLine: {
                mark: {
                    strokeStyle: o(0, 0, 0, .5),
                    lineWidth: 1,
                    lineDash: [0],
                    z: 3e5
                },
                text: {
                    fillStyle: s(0, 0, 0),
                    font: {
                        size: 12,
                        family: a
                    },
                    z: 300001
                },
                hover: {
                    mark: {
                        strokeStyle: function() {
                            var t = this.strokeStyle();
                            return o(t.r, t.g, t.b, 1)
                        },
                        lineWidth: function() {
                            return this.lineWidth()
                        }
                    }
                },
                layoutArgus: {
                    begin: {
                        orient: ["M", "T"],
                        position: "horizontal"
                    },
                    end: {
                        orient: ["M", "T"],
                        position: "horizontal"
                    },
                    area: {}
                }
            },
            statisticArea: {
                area: {
                    fillStyle: o(130, 130, 130, .2),
                    z: 1
                },
                beginLine: {
                    strokeStyle: o(0, 0, 0, .5),
                    lineWidth: 1,
                    lineDash: [0],
                    z: 3e5
                },
                endLine: {
                    strokeStyle: o(0, 0, 0, .5),
                    lineWidth: 1,
                    lineDash: [0],
                    z: 3e5
                },
                areaText: {
                    fillStyle: o(0, 0, 0, 1),
                    font: {
                        size: 12,
                        family: a
                    },
                    z: 300001
                },
                beginText: {
                    fillStyle: o(0, 0, 0, 1),
                    font: {
                        size: 12,
                        family: a
                    },
                    z: 300001
                },
                endText: {
                    fillStyle: o(0, 0, 0, 1),
                    font: {
                        size: 12,
                        family: a
                    },
                    z: 300001
                },
                hover: {
                    beginLine: {
                        strokeStyle: function() {
                            var t = this.strokeStyle();
                            return o(t.r, t.g, t.b, .8)
                        },
                        lineWidth: function() {
                            return this.lineWidth()
                        }
                    },
                    endLine: {
                        strokeStyle: function() {
                            var t = this.strokeStyle();
                            return o(t.r, t.g, t.b, .8)
                        },
                        lineWidth: function() {
                            return this.lineWidth()
                        }
                    }
                },
                layoutArgus: {
                    begin: {
                        orient: ["M", "T"],
                        position: "horizontal"
                    },
                    end: {
                        orient: ["M", "T"],
                        position: "horizontal"
                    },
                    area: {}
                }
            },
            frame: {
                strokeStyle: {
                    r: 12,
                    g: 12,
                    b: 120
                },
                fillStyle: {
                    r: 12,
                    g: 12,
                    b: 120,
                    a: .2
                },
                z: 400001
            },
            emphasis: {
                background: {
                    fillStyle: o(0, 0, 0, 0),
                    strokeStyle: o(0, 0, 0, 0),
                    lineWidth: 1,
                    z: 9900
                },
                textInfo: {
                    styles: [{
                        font: {
                            size: 18,
                            family: a
                        },
                        align: "left",
                        lineSpacing: 22,
                        fillStyle: s(197, 180, 121)
                    }],
                    x: 6,
                    y: 14,
                    z: 9991
                },
                textTitle: {
                    styles: [{
                        font: {
                            size: 13,
                            family: a
                        },
                        align: "left",
                        lineSpacing: 5,
                        fillStyle: s(51, 51, 51)
                    }],
                    x: 6,
                    y: 14,
                    z: 9992
                },
                size: 60,
                align: "center"
            }
        };
        return t
    }
    var a = "Helvetica,Tahoma,Arial,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif",
        s = function(t, e, i) {
            return {
                r: t,
                g: e,
                b: i
            }
        },
        o = function(t, e, i, n) {
            return {
                r: t,
                g: e,
                b: i,
                a: n
            }
        },
        l = [s(13, 161, 237), s(255, 161, 53), s(56, 204, 72), s(245, 86, 70), s(177, 103, 255), s(255, 217, 45), s(57, 227, 221), s(250, 138, 109), s(113, 147, 255), s(255, 104, 207), s(173, 194, 187), s(157, 238, 60), s(95, 74, 246), s(234, 201, 118), s(102, 204, 255), s(252, 174, 85), s(79, 224, 95), s(255, 140, 128), s(163, 85, 245), s(209, 221, 67), s(55, 216, 210), s(247, 121, 89), s(104, 135, 235), s(240, 77, 189), s(47, 167, 127), s(159, 206, 52), s(161, 40, 190), s(82, 206, 182), s(95, 78, 217), s(244, 190, 55)],
        c = n.defaultShapeSet,
        u = [];
    for(var d in c) u.push(d);
    [t.Circle, t.Rect, t.Diamond];
    return r
}, 566, 675, 823, 704);
I$(785, function(t, e, i, n) {
    function r() {
        var t = {
            background: {
                fillStyle: s(50, 60, 69),
                z: 0
            },
            visualScales: {
                defaultFill: {
                    visualType: "color",
                    domainType: "any",
                    range: "defaultColor"
                }
            },
            defaultColor: l[0],
            defaultColorRange: l,
            defaultSizeRange: [0, 1],
            defaultShapeRange: u,
            graph: {
                z: -9999999
            },
            title: {
                xPosition: "center",
                yPosition: "top",
                rotation: 0,
                styles: [{
                    font: {
                        size: 12,
                        family: a
                    },
                    align: "center",
                    lineSpacing: 10,
                    fillStyle: s(255, 255, 255)
                }],
                z: 1e4
            },
            tooltip: {
                root: {
                    z: 9999
                },
                position: "ES",
                background: {
                    fillStyle: s(255, 255, 255),
                    strokeStyle: s(221, 221, 221),
                    lineWidth: 1,
                    z: 9900
                },
                text: {
                    texts: function(t, e) {
                        return t.outText
                    },
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "left",
                        lineSpacing: 10,
                        fillStyle: s(121, 121, 121)
                    }],
                    z: 9991
                }
            },
            legend: {
                colorOrdinal: {
                    visualProperties: {
                        width: 10,
                        height: 10
                    },
                    caption: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(200, 200, 200)
                    },
                    text: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(200, 200, 200)
                    },
                    mark: {
                        strokeStyle: o(0, 0, 0, 0),
                        lineWidth: 1
                    },
                    hover: {
                        mark: {
                            fillStyle: i(function(t) {
                                return s(t.r + 30, t.g + 30, t.b + 30)
                            }),
                            strokeStyle: s(255, 255, 255)
                        }
                    },
                    focus: {
                        mark: {
                            fillStyle: i(function(t) {
                                return t
                            }),
                            strokeStyle: s(255, 255, 255)
                        }
                    },
                    gray: {
                        mark: {
                            fillStyle: i(function(t) {
                                if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                                else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                            }),
                            strokeStyle: o(0, 0, 0, 0)
                        }
                    }
                },
                colorLinear: {
                    visualProperties: {
                        rect: {
                            width: 150,
                            height: 5
                        },
                        slider: {
                            size: 10
                        }
                    },
                    mark: {
                        fillStyle: o(255, 255, 255),
                        strokeStyle: o(221, 221, 221),
                        lineWidth: 1
                    },
                    text: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(200, 200, 200)
                    },
                    frame: {
                        fillStyle: s(72, 176, 247),
                        strokeStyle: o(0, 0, 0, 0),
                        lineWidth: 1
                    },
                    caption: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(200, 200, 200)
                    },
                    focus: {},
                    drag: {
                        mark: {
                            strokeStyle: s(200, 200, 200)
                        },
                        frame: {
                            unselected: s(236, 236, 236),
                            selected: s(72, 176, 247)
                        }
                    },
                    hover: {
                        mark: {
                            strokeStyle: s(160, 160, 160)
                        }
                    }
                },
                sizeLinear: {
                    visualProperties: {
                        rect: {
                            width: 150,
                            height: 5
                        },
                        slider: {
                            size: 10
                        },
                        fillStyle: o(255, 255, 0),
                        strokeStyle: o(255, 0, 0)
                    },
                    mark: {
                        fillStyle: o(255, 255, 255),
                        strokeStyle: o(221, 221, 221),
                        lineWidth: 1
                    },
                    text: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(200, 200, 200)
                    },
                    frame: {
                        fillStyle: s(72, 176, 247),
                        strokeStyle: o(0, 0, 0, 0),
                        lineWidth: 1
                    },
                    caption: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(200, 200, 200)
                    },
                    drag: {
                        mark: {
                            strokeStyle: s(200, 200, 200)
                        },
                        frame: {
                            unselected: s(236, 236, 236),
                            selected: s(72, 176, 247)
                        }
                    },
                    hover: {
                        mark: {
                            strokeStyle: s(160, 160, 160)
                        }
                    }
                },
                shape: {
                    visualProperties: {
                        width: 10,
                        height: 10
                    },
                    caption: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(200, 200, 200)
                    },
                    text: {
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(200, 200, 200)
                    },
                    mark: {
                        strokeStyle: o(200, 200, 200),
                        lineWidth: 2,
                        scale: {
                            sx: .5,
                            sy: .5
                        },
                        fillStyle: o(200, 200, 200)
                    },
                    hover: {
                        mark: {
                            fillStyle: i(function(t) {
                                return s(t.r, t.g, t.b)
                            }),
                            strokeStyle: s(255, 255, 255)
                        }
                    },
                    focus: {
                        mark: {
                            fillStyle: i(function(t) {
                                return t
                            }),
                            strokeStyle: s(255, 255, 255)
                        }
                    },
                    gray: {
                        mark: {
                            fillStyle: s(128, 128, 128),
                            strokeStyle: o(128, 128, 128)
                        }
                    }
                },
                layoutArgus: {
                    position: {
                        x: 14,
                        y: 14
                    },
                    rowSpace: 15,
                    caption2Frame: 20,
                    frame2Text: 5,
                    frame2Frame: 15,
                    mark2Text: 5,
                    legend2Legend: 35
                }
            },
            pivotAxisTitle: {
                backgroundText: {
                    backgroundFillStyle: o(210, 210, 210, 0),
                    backgroundStrokeStyle: o(210, 210, 210, 0),
                    textFillStyle: s(200, 200, 200),
                    backgroundLineWidth: 1,
                    textFont: {
                        size: 12,
                        family: a
                    },
                    textX: "center",
                    textY: "center",
                    textAlign: "center",
                    textLineSpacing: 3
                }
            },
            pivotAxis: {
                backgroundText: {
                    backgroundFillStyle: o(200, 200, 200, 0),
                    backgroundStrokeStyle: void 0,
                    textFillStyle: s(200, 200, 200),
                    backgroundLineWidth: 1,
                    textFont: {
                        size: 12,
                        family: a
                    },
                    textX: "center",
                    textY: "center",
                    textAlign: "center",
                    textLineSpacing: 3
                },
                hover: {
                    backgroundText: {
                        backgroundFillStyle: s(40, 49, 56)
                    }
                },
                focus: {
                    backgroundText: {
                        backgroundFillStyle: s(40, 49, 56)
                    }
                },
                gray: {
                    backgroundText: {
                        backgroundFillStyle: o(240, 240, 240, 0)
                    }
                }
            },
            pivotAxisGrid: {
                strokeStyle: o(77, 88, 97, 1),
                lineWidth: 1,
                lineDash: [],
                z: 1
            },
            pivotTitleGrid: {
                strokeStyle: o(77, 88, 97, 1),
                lineWidth: 1,
                lineDash: [],
                z: 1
            },
            commonAxisGrid: {
                strokeStyle: o(77, 88, 97, 1),
                lineDash: [],
                z: 1
            },
            graphGrid: {
                strokeStyle: o(77, 88, 97, 1),
                lineWidth: 1,
                lineDash: [],
                z: 1
            },
            axisGrid: {
                strokeStyle: o(77, 88, 97, 1),
                lineWidth: 1,
                lineDash: [2],
                z: 1
            },
            tableGrid: {
                strokeStyle: o(77, 88, 97, 1),
                lineWidth: 1,
                lineDash: [],
                z: 1
            },
            xAxis: {
                captionToLabelPadding: 5,
                captionToBoundaryPadding: 5,
                labelToTickPadding: 4,
                caption: {
                    align: "middle",
                    orient: "horizontal",
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(200, 200, 200),
                        align: "center",
                        lineSpacing: 3
                    }],
                    z: 5
                },
                label: {
                    full: !1,
                    maxWidth: 1 / 0,
                    maxHeight: 1 / 0,
                    adapter: ["hur", "r", 1, 1, Math.PI / 2],
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(200, 200, 200)
                    }],
                    z: 4
                },
                line: {
                    strokeStyle: o(77, 88, 97, 1),
                    lineWidth: 1,
                    z: 3
                },
                tick: {
                    density: 3,
                    strokeStyle: o(77, 88, 97, 0),
                    lineWidth: 1,
                    size: 6,
                    z: 2
                },
                tableGrid: {
                    strokeStyle: o(77, 88, 97, 1),
                    lineWidth: 1,
                    lineDash: [],
                    z: 2
                },
                background: {
                    z: 0,
                    fillStyle: s(50, 60, 69)
                },
                hover: {
                    background: {
                        fillStyle: s(40, 49, 56)
                    }
                }
            },
            yAxis: {
                captionToLabelPadding: 5,
                captionToBoundaryPadding: 5,
                labelToTickPadding: 4,
                caption: {
                    align: "middle",
                    orient: "vertical",
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(200, 200, 200),
                        align: "center",
                        lineSpacing: 3
                    }],
                    z: 5
                },
                label: {
                    full: !1,
                    maxWidth: 1 / 0,
                    maxHeight: 1 / 0,
                    adapter: ["hur", "r", 1, 1],
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(200, 200, 200)
                    }],
                    z: 4
                },
                line: {
                    strokeStyle: o(77, 88, 97, 1),
                    lineWidth: 1,
                    z: 3
                },
                tick: {
                    density: 3,
                    size: 6,
                    strokeStyle: o(77, 88, 97, 0),
                    lineWidth: 1,
                    z: 2
                },
                tableGrid: {
                    strokeStyle: o(77, 88, 97, 1),
                    lineWidth: 1,
                    lineDash: [],
                    z: 2
                },
                background: {
                    z: 0,
                    fillStyle: s(50, 60, 69)
                },
                hover: {
                    background: {
                        fillStyle: s(40, 49, 56)
                    }
                }
            },
            xCartesianAxis: {
                captionToLabelPadding: 5,
                captionToBoundaryPadding: 5,
                labelToTickPadding: 4,
                caption: {
                    align: "high",
                    orient: "horizontal",
                    styles: [{
                        font: {
                            size: 14,
                            family: a
                        },
                        fillStyle: s(200, 200, 200),
                        align: "center",
                        lineSpacing: 3
                    }],
                    z: 5
                },
                label: {
                    maxWidth: 1 / 0,
                    maxHeight: 1 / 0,
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(200, 200, 200)
                    }],
                    z: 4
                },
                line: {
                    strokeStyle: o(77, 88, 97, 1),
                    lineWidth: 1,
                    z: 3
                },
                tick: {
                    strokeStyle: o(77, 88, 97, 0),
                    lineWidth: 1,
                    size: 6,
                    z: 2
                }
            },
            yCartesianAxis: {
                captionToLabelPadding: 5,
                captionToBoundaryPadding: 5,
                labelToTickPadding: 4,
                caption: {
                    align: "high",
                    orient: "vertical",
                    styles: [{
                        font: {
                            size: 14,
                            family: a
                        },
                        fillStyle: s(200, 200, 200),
                        align: "center",
                        lineSpacing: 3
                    }],
                    z: 5
                },
                label: {
                    maxWidth: 1 / 0,
                    maxHeight: 1 / 0,
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        fillStyle: s(200, 200, 200)
                    }],
                    z: 4
                },
                line: {
                    strokeStyle: o(77, 88, 97, 1),
                    lineWidth: 1,
                    z: 3
                },
                tick: {
                    strokeStyle: o(0, 0, 0, 0),
                    lineWidth: 1,
                    size: 6,
                    z: 2
                }
            },
            mapCoord: {
                path: {
                    fillStyle: o(40, 49, 56, 1),
                    strokeStyle: o(77, 88, 97, 1),
                    lineWidth: .5,
                    hidden: !1,
                    z: 10
                },
                text: {
                    font: {
                        size: 12,
                        family: a
                    },
                    fillStyle: s(200, 200, 200),
                    z: 1e10
                }
            },
            bar: {
                mark: {
                    lineWidth: 1,
                    fillStyle: "defaultFill",
                    strokeStyle: void 0,
                    innerPadding: .1,
                    outerPadding: .2,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        var e = this.__index;
                        return e + 1
                    }
                },
                label: {
                    orient: "horizontal",
                    autoHidden: !1,
                    position: "waist",
                    text: function(t) {
                        return ["Abc"]
                    },
                    styles: [{
                        fillStyle: s(200, 200, 200),
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }],
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return 1e5 + 2 * (e + 1)
                    }
                },
                hover: {
                    mark: {
                        lineWidth: 1,
                        strokeStyle: s(235, 235, 235),
                        fillStyle: i(function(t) {
                            return o(t.r + 30, t.g + 30, t.b + 30, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return 1e5 + e + 1
                        }
                    }
                },
                focus: {
                    mark: {
                        lineWidth: 1,
                        strokeStyle: s(235, 235, 235),
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return 1e5 + e + 1
                        }
                    }
                },
                gray: {
                    mark: {
                        lineWidth: 0,
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        }
                    }
                }
            },
            pie: {
                mark: {
                    fillStyle: "defaultFill",
                    strokeStyle: void 0,
                    lineWidth: .5,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 1
                    },
                    disCenter: 0,
                    angleRange: [-90, 270]
                },
                label: {
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return 1e5 + 2 * (e + 1)
                    },
                    position: "inner",
                    leadLength: 30,
                    leadRatio: .1,
                    autoHidden: !0,
                    fillStyle: "defaultFill",
                    autoHidden: !1,
                    styles: [{
                        fillStyle: s(200, 200, 200),
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }]
                },
                hover: {
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r + 30, t.g + 30, t.b + 30, t.a)
                        }),
                        strokeStyle: s(235, 235, 235),
                        lineWidth: 1,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return 1e5 + e + 1
                        },
                        disCenter: 5
                    }
                },
                focus: {
                    mark: {
                        strokeStyle: s(235, 235, 235),
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        lineWidth: 1,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return 1e5 + e + 1
                        },
                        disCenter: 5
                    }
                },
                gray: {
                    mark: {
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        lineWidth: 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        },
                        disCenter: 0
                    }
                }
            },
            line: {
                line: {
                    lineWidth: 3,
                    strokeStyle: "defaultFill",
                    smooth: !1,
                    nullType: "broken",
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 1
                    }
                },
                mark: {
                    radius: function(t) {
                        if(t.__isIsolated) return e.isolatedPointRadius;
                        else return e.lineBaseRadius
                    },
                    fillStyle: "defaultFill",
                    lineWidth: 1,
                    strokeStyle: void 0,
                    hidden: !1,
                    strokeScaleInvariant: !0,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 101
                    }
                },
                label: {
                    position: "N",
                    fillStyle: "defaultFill",
                    z: 4799,
                    styles: [{
                        fillStyle: s(200, 200, 200),
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }]
                },
                hover: {
                    line: {
                        strokeStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20001
                        }
                    },
                    mark: {
                        radius: e.interactiveRadius,
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a);
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20501
                        }
                    }
                },
                focus: {
                    line: {
                        strokeStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20001
                        }
                    },
                    mark: {
                        radius: e.interactiveRadius,
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20501
                        }
                    }
                },
                gray: {
                    line: {
                        strokeStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        }
                    },
                    mark: {
                        radius: function(t) {
                            if(t.__isIsolated) return e.isolatedPointRadius;
                            else return e.lineBaseRadius
                        },
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 101
                        }
                    }
                }
            },
            gradientLine: {
                line: {
                    lineWidth: 3,
                    strokeStyle: "defaultFill",
                    smooth: !1,
                    nullType: "broken",
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 1
                    }
                },
                mark: {
                    radius: e.lineBaseRadius,
                    fillStyle: "defaultFill",
                    lineWidth: 1,
                    strokeStyle: void 0,
                    hidden: !1,
                    strokeScaleInvariant: !0,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return 3 * (e + 1)
                    },
                    scale: e.radiusScale.normalScale
                },
                label: {
                    position: "E",
                    fillStyle: "defaultFill",
                    z: 799,
                    styles: [{
                        fillStyle: s(200, 200, 200),
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }]
                },
                hover: {
                    line: {
                        strokeStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20001
                        }
                    },
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20501
                        },
                        scale: e.radiusScale.hoverScale(1)
                    }
                },
                focus: {
                    line: {
                        strokeStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20001
                        }
                    },
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 20501
                        },
                        scale: e.radiusScale.focusScale(1)
                    }
                },
                gray: {
                    line: {
                        strokeStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        }
                    },
                    mark: {
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return 3 * (e + 1)
                        },
                        scale: e.radiusScale.grayScale
                    }
                }
            },
            area: {
                line: {
                    lineWidth: 1,
                    strokeStyle: void 0,
                    smooth: !1,
                    hidden: !1,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 1
                    }
                },
                mark: {
                    radius: function(t) {
                        if(t.__isIsolated) return e.isolatedPointRadius;
                        else return e.areaBaseRadius
                    },
                    fillStyle: "defaultFill",
                    strokeStyle: void 0,
                    hidden: !1,
                    strokeScaleInvariant: !0,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return 3 * (e + 1)
                    },
                    scale: e.radiusScale.normalScale
                },
                label: {
                    position: "N",
                    fillStyle: "defaultFill",
                    z: 699,
                    styles: [{
                        fillStyle: s(200, 200, 200),
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }]
                },
                zone: {
                    fillStyle: "defaultFill",
                    strokeStyle: void 0,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 1
                    }
                },
                hover: {
                    line: {
                        strokeStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 9e3
                        }
                    },
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 9500
                        },
                        scale: e.radiusScale.hoverScale(1)
                    }
                },
                focus: {
                    line: {
                        strokeStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 9e3
                        }
                    },
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        strokeStyle: s(20, 20, 20),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 9500
                        },
                        scale: e.radiusScale.focusScale(1)
                    }
                },
                gray: {
                    line: {
                        strokeStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        }
                    },
                    mark: {
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return 3 * (e + 1)
                        },
                        scale: e.radiusScale.grayScale
                    }
                }
            },
            path: {
                mark: {
                    fillStyle: "defaultFill",
                    strokeStyle: o(204, 204, 204, 1),
                    lineWidth: .5,
                    hidden: !1,
                    strokeScaleInvariant: !0,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return 3 * -(e + 1)
                    }
                },
                label: {
                    styles: [{
                        fillStyle: s(200, 200, 200),
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }],
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return 3 * (e + 1) + 1e3
                    }
                },
                hover: {
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r + 30, t.g + 30, t.b + 30, t.a)
                        }),
                        strokeStyle: s(235, 235, 235),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1e3
                        }
                    }
                },
                focus: {
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        strokeStyle: s(235, 235, 235),
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1e3
                        }
                    }
                },
                gray: {
                    mark: {
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        }
                    }
                }
            },
            scatter: {
                mark: {
                    lineWidth: 1,
                    fillStyle: "defaultFill",
                    strokeStyle: void 0,
                    strokeScaleInvariant: !0,
                    radius: e.scatterBaseSize,
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 1
                    }
                },
                label: {
                    position: "ES",
                    fillStyle: "defaultFill",
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 500
                    },
                    styles: [{
                        fillStyle: s(200, 200, 200),
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }]
                },
                hover: {
                    mark: {
                        strokeStyle: s(235, 235, 235),
                        fillStyle: i(function(t) {
                            return o(t.r + 30, t.g + 30, t.b + 30, t.a)
                        }),
                        lineWidth: 1,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1e5
                        }
                    }
                },
                focus: {
                    mark: {
                        strokeStyle: s(235, 235, 235),
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        lineWidth: 1,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1e5
                        }
                    }
                },
                gray: {
                    mark: {
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        lineWidth: 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        }
                    }
                }
            },
            text: {
                mark: {
                    lineWidth: 1,
                    fillStyle: s(200, 200, 200),
                    xAlign: "center",
                    yAlign: "center",
                    z: function(t, e) {
                        if(null == this.__index) this.__index = e;
                        e = this.__index;
                        return e + 1
                    },
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "center",
                        lineSpacing: 5
                    }]
                },
                hover: {
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r + 30, t.g + 30, t.b + 30, t.a)
                        }),
                        lineWidth: 1,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1e5
                        }
                    }
                },
                focus: {
                    mark: {
                        fillStyle: i(function(t) {
                            return o(t.r, t.g, t.b, t.a)
                        }),
                        lineWidth: 1,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1e5
                        }
                    }
                },
                gray: {
                    mark: {
                        fillStyle: i(function(t) {
                            if(null == t.a) return o(t.r, t.g, t.b, e.greyCapacity);
                            else return o(t.r, t.g, t.b, t.a * e.greyCapacity)
                        }),
                        strokeStyle: void 0,
                        lineWidth: 0,
                        z: function(t, e) {
                            if(null == this.__index) this.__index = e;
                            e = this.__index;
                            return e + 1
                        }
                    }
                }
            },
            xGuideline: {
                line: {
                    strokeStyle: {
                        r: 255,
                        g: 0,
                        b: 0
                    },
                    lineWidth: 3,
                    z: 2e5
                }
            },
            yGuideline: {
                line: {
                    strokeStyle: {
                        r: 0,
                        g: 235,
                        b: 0
                    },
                    lineWidth: 3,
                    z: 2e5
                }
            },
            statisticLine: {
                mark: {
                    strokeStyle: o(255, 255, 255, .5),
                    lineWidth: 1,
                    lineDash: [0],
                    z: 3e5
                },
                text: {
                    fillStyle: s(200, 200, 200),
                    font: {
                        size: 12,
                        family: a
                    },
                    z: 300001
                },
                hover: {
                    mark: {
                        strokeStyle: function() {
                            var t = this.strokeStyle();
                            return o(t.r, t.g, t.b, .8)
                        },
                        lineWidth: function() {
                            return this.lineWidth()
                        }
                    }
                },
                layoutArgus: {
                    begin: {
                        orient: ["M", "T"],
                        position: "horizontal"
                    },
                    end: {
                        orient: ["M", "T"],
                        position: "horizontal"
                    },
                    area: {}
                }
            },
            statisticArea: {
                area: {
                    fillStyle: o(130, 130, 130, .2),
                    z: 1
                },
                beginLine: {
                    strokeStyle: o(255, 255, 255, .5),
                    lineWidth: 1,
                    lineDash: [0],
                    z: 3e5
                },
                endLine: {
                    strokeStyle: o(255, 255, 255, .5),
                    lineWidth: 1,
                    lineDash: [0],
                    z: 3e5
                },
                areaText: {
                    fillStyle: o(200, 200, 200, 1),
                    font: {
                        size: 12,
                        family: a
                    },
                    z: 300001
                },
                beginText: {
                    fillStyle: o(200, 200, 200, 1),
                    font: {
                        size: 12,
                        family: a
                    },
                    z: 300001
                },
                endText: {
                    fillStyle: o(200, 200, 200, 1),
                    font: {
                        size: 12,
                        family: a
                    },
                    z: 300001
                },
                hover: {
                    beginLine: {
                        strokeStyle: function() {
                            var t = this.strokeStyle();
                            return o(t.r, t.g, t.b, .8)
                        },
                        lineWidth: function() {
                            return this.lineWidth()
                        }
                    },
                    endLine: {
                        strokeStyle: function() {
                            var t = this.strokeStyle();
                            return o(t.r, t.g, t.b, .8)
                        },
                        lineWidth: function() {
                            return this.lineWidth()
                        }
                    }
                },
                layoutArgus: {
                    begin: {
                        orient: ["M", "T"],
                        position: "horizontal"
                    },
                    end: {
                        orient: ["M", "T"],
                        position: "horizontal"
                    },
                    area: {}
                }
            },
            frame: {
                strokeStyle: {
                    r: 12,
                    g: 12,
                    b: 120
                },
                fillStyle: {
                    r: 12,
                    g: 12,
                    b: 120,
                    a: .2
                },
                z: 400001
            },
            emphasis: {
                background: {
                    fillStyle: o(0, 0, 0, 0),
                    strokeStyle: o(0, 0, 0, 0),
                    lineWidth: 1,
                    z: 9900
                },
                textInfo: {
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "left",
                        lineSpacing: 10,
                        fillStyle: s(121, 121, 121)
                    }],
                    x: 10,
                    y: 10,
                    z: 9991
                },
                textTitle: {
                    styles: [{
                        font: {
                            size: 12,
                            family: a
                        },
                        align: "left",
                        lineSpacing: 10,
                        fillStyle: s(121, 121, 121)
                    }],
                    x: 10,
                    y: 30,
                    z: 9992
                },
                size: 50,
                align: "center"
            }
        };
        return t
    }
    var a = "Helvetica,Tahoma,Arial,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif",
        s = function(t, e, i) {
            return {
                r: t,
                g: e,
                b: i
            }
        },
        o = function(t, e, i, n) {
            return {
                r: t,
                g: e,
                b: i,
                a: n
            }
        },
        l = [s(13, 161, 237), s(255, 161, 53), s(56, 204, 72), s(245, 86, 70), s(177, 103, 255), s(255, 217, 45), s(57, 227, 221), s(250, 138, 109), s(113, 147, 255), s(255, 104, 207), s(173, 194, 187), s(157, 238, 60), s(95, 74, 246), s(234, 201, 118), s(102, 204, 255), s(252, 174, 85), s(79, 224, 95), s(255, 140, 128), s(163, 85, 245), s(209, 221, 67), s(55, 216, 210), s(247, 121, 89), s(104, 135, 235), s(240, 77, 189), s(47, 167, 127), s(159, 206, 52), s(161, 40, 190), s(82, 206, 182), s(95, 78, 217), s(244, 190, 55)],
        c = n.defaultShapeSet,
        u = [];
    for(var d in c) u.push(d);
    [t.Circle, t.Rect, t.Diamond];
    return r
}, 566, 675, 823, 704);
I$(700, function(t, e, i) {
    return {
        default: t,
        mobile: e,
        black: i
    }
}, 746, 784, 785);
I$(701, function(t) {
    var e = {
            isNormalScaleProp: !0,
            isScaleProp: !0,
            type: "color"
        },
        i = {
            isNormalScaleProp: !0,
            type: "color"
        },
        n = {
            legend: {
                colorOrdinal: {
                    mark: {
                        fillStyle: e
                    }
                },
                colorLinear: {
                    mark: {
                        fillStyle: e
                    }
                }
            },
            bar: {
                mark: {
                    fillStyle: e
                }
            },
            pie: {
                mark: {
                    fillStyle: e
                }
            },
            line: {
                line: {
                    strokeStyle: i
                },
                mark: {
                    fillStyle: e
                }
            },
            area: {
                line: {
                    strokeStyle: i
                },
                mark: {
                    fillStyle: e
                },
                zone: {
                    fillStyle: i
                }
            },
            path: {
                mark: {
                    fillStyle: e
                }
            },
            scatter: {
                mark: {
                    fillStyle: e
                }
            },
            text: {
                mark: {
                    fillStyle: e
                }
            },
            gradientLine: {
                line: {
                    strokeStyle: i
                },
                mark: {
                    fillStyle: e
                }
            }
        };
    return n
}, 566);
I$(702, function(t) {
    var e = {
        defaultColor: 1,
        graph: {
            z: 1,
            fillStyle: 1
        },
        tooltip: {
            root: !0,
            background: !0,
            text: !0
        },
        title: !0,
        pivotAxisTitle: {
            backgroundText: !0
        },
        pivotAxisGrid: !0,
        graphGrid: !0,
        axisGrid: !0,
        tableGrid: !0,
        xAxis: {
            caption: !0,
            grid: !0,
            label: !0,
            tick: !0,
            tableGrid: !0,
            line: !0,
            captionToLabelPadding: 1,
            captionToBoundaryPadding: 1,
            labelToTickPadding: 1,
            background: !0,
            hover: {
                background: !0
            }
        },
        yAxis: {
            caption: !0,
            grid: !0,
            label: !0,
            tick: !0,
            tableGrid: !0,
            line: !0,
            captionToLabelPadding: 1,
            captionToBoundaryPadding: 1,
            labelToTickPadding: 1,
            background: !0,
            hover: {
                background: !0
            }
        },
        xCartesianAxis: {
            caption: !0,
            grid: !0,
            label: !0,
            tick: !0,
            line: !0,
            captionToLabelPadding: 1,
            captionToBoundaryPadding: 1,
            labelToTickPadding: 1
        },
        yCartesianAxis: {
            caption: !0,
            grid: !0,
            label: !0,
            tick: !0,
            line: !0,
            captionToLabelPadding: 1,
            captionToBoundaryPadding: 1,
            labelToTickPadding: 1
        },
        legend: {
            colorOrdinal: {
                caption: !0,
                text: !0,
                mark: !0,
                hover: {
                    mark: !0
                },
                focus: {
                    mark: !0
                },
                gray: {
                    mark: !0
                },
                format: 0
            },
            colorLinear: {
                mark: !0,
                text: !0,
                frame: !0,
                caption: !0,
                hover: {
                    mark: !0
                },
                focus: {
                    mark: !0
                },
                gray: {
                    mark: !0
                },
                drag: {
                    mark: !0
                },
                format: 0
            },
            sizeLinear: {
                mark: !0,
                text: !0,
                frame: !0,
                caption: !0,
                hover: {
                    mark: !0
                },
                drag: {
                    mark: !0
                },
                gray: {
                    mark: !0
                },
                format: 0
            },
            shape: {
                caption: !0,
                text: !0,
                mark: !0,
                hover: {
                    mark: !0
                },
                focus: {
                    mark: !0
                },
                gray: {
                    mark: !0
                }
            }
        },
        bar: {
            mark: !0,
            label: !0,
            hover: {
                mark: !0,
                text: !0
            },
            focus: {
                mark: !0,
                label: !0
            },
            gray: {
                mark: !0,
                label: !0
            }
        },
        pie: {
            topPadding: 1,
            bottomPadding: 1,
            mark: !0,
            label: !0,
            hover: {
                mark: !0
            },
            focus: {
                mark: !0
            },
            gray: {
                mark: !0
            }
        },
        line: {
            line: !0,
            mark: !0,
            label: !0,
            hover: {
                line: !0,
                mark: !0
            },
            focus: {
                line: !0,
                mark: !0
            },
            gray: {
                line: !0,
                mark: !0
            }
        },
        gradientLine: {
            line: !0,
            mark: !0,
            label: !0,
            hover: {
                line: !0,
                mark: !0
            },
            focus: {
                line: !0,
                mark: !0
            },
            gray: {
                line: !0,
                mark: !0
            }
        },
        area: {
            line: !0,
            mark: !0,
            label: !0,
            zone: !0,
            hover: {
                line: !0,
                zone: !0,
                mark: !0
            },
            focus: {
                line: !0,
                zone: !0,
                mark: !0
            },
            gray: {
                line: !0,
                zone: !0,
                mark: !0
            }
        },
        path: {
            mark: !0,
            label: !0,
            hover: {
                mark: !0
            },
            focus: {
                mark: !0
            },
            gray: {
                mark: !0
            }
        },
        scatter: {
            mark: !0,
            label: !0,
            hover: {
                mark: !0
            },
            focus: {
                mark: !0
            },
            gray: {
                mark: !0
            }
        },
        text: {
            mark: !0,
            hover: {
                mark: !0
            },
            focus: {
                mark: !0
            },
            gray: {
                mark: !0
            }
        },
        pivotAxis: {
            format: 0,
            backgroundText: !0,
            hover: {
                backgroundText: !0
            },
            focus: {
                backgroundText: !0
            },
            gray: {
                backgroundText: !0
            }
        },
        statisticLine: {
            mark: !0,
            text: !0,
            hover: {
                mark: !0
            },
            layoutArgus: 1
        },
        statisticArea: {
            area: !0,
            beginLine: !0,
            endLine: !0,
            areaText: !0,
            beginText: !0,
            endText: !0,
            hover: {
                beginLine: !0,
                endLine: !0,
                area: !0
            },
            layoutArgus: 1
        },
        xGuideline: {
            line: !0
        },
        yGuideline: {
            line: !0
        },
        slider: !0,
        frame: !0,
        emphasis: {
            background: !0,
            textInfo: !0,
            textTitle: !0,
            size: !0,
            align: !0
        }
    };
    return e
}, 566);
I$(574, function(t, e, i, n, r, a, s, o, l, c, u, d, h) {
    function f(t, e, i) {
        var n = i + "ScaleOption",
            r = t[n];
        return r[e.cellRow][e.cellCol][e.markIndex]
    }

    function p(t, e, i, n, r) {
        for(var a in i)
            if(i[a].isScaleProp === !0 && i[a].type == n) {
                if(null == e || null == e[a]) t[a] = r
            } else if(null == i[a].type) p(t[a], null == e ? null : e[a], i[a], n, r)
    }

    function _(t) {
        for(var e in t) {
            var i = t[e];
            if(i.hover) m(i, i.hover, l[e]);
            if(i.focus) m(i, i.focus, l[e]);
            if(i.gray) m(i, i.gray, l[e])
        }
    }

    function m(t, e, i) {
        for(var n in e)
            if(null == i[n]) {
                if(e[n] && e[n].isPropConverter) e[n] = S(t[n], e[n])
            } else m(t[n], e[n], i[n])
    }

    function g(t, e) {
        if(e) return function(i, n) {
            return t.exec(i[e.field])
        };
        else return function(e, i) {
            return t.exec()
        }
    }

    function v(t, e, i, n) {
        var r = o[t.type];
        if(e.color) {
            var a = f(n, t.which, "color");
            if(a && ("discrete" !== a.type || null !== a.field || 1 !== a.value.length || "undefined" !== a.value[0])) {
                var s = k(i, "color", e.color, a.field, a);
                s.field(a.field);
                var c = g(s, a)
            } else var s = k(i, "color", e.color),
                c = g(s);
            p(t, e, r, "color", c);
            t.color = s
        }
        if(e.size) {
            var a = f(n, t.which, "size");
            if(a) {
                var u = k(i, "size", e.size, a.field, a);
                if(a.meta) u.meta = a.meta;
                if(u.field) u.field(a.field);
                var c = g(u, a)
            } else var u = k(i, "size", e.size),
                c = g(u);
            p(t, e, r, "size", c);
            t.size = u
        }
        if(e.radius && "pie" === t.type) {
            var d = f(n, t.which, "radius");
            if(d) {
                var h = k(i, "radius", e.radius, d.field, d);
                if(d.meta) h.meta = d.meta;
                if(h.field) h.field(d.field);
                var _ = g(h, d)
            } else var h = k(i, "radius", e.radius),
                _ = g(h);
            p(t, e, r, "radius", _);
            t.radius = h
        }
        if(e.shape) {
            var v = f(n, t.which, "shape");
            if(v) {
                var y = k(i, "shape", e.shape, v.field, v);
                y.field(v.field);
                var c = g(y, v)
            } else var y = k(i, "shape", e.shape),
                c = g(y);
            p(t, e, r, "shape", c);
            t.shape = y
        }
        var b = l[t.type];
        if(t.hover) m(t, t.hover, b);
        if(t.focus) m(t, t.focus, b);
        if(t.gray) m(t, t.gray, b)
    }

    function y(t, e, i) {
        if(t.scale) p(t, e, o.legend[i.scaleType], i.type, t.scale);
        if(t.hover) m(t, t.hover, l.legend[i.scaleType]);
        if(t.focus) m(t, t.focus, l.legend[i.scaleType]);
        if(t.gray) m(t, t.gray, l.legend[i.scaleType]);
        if(t.drag) m(t, t.drag, l.legend[i.scaleType])
    }

    function b(t, e, i) {
        var n = i.legends;
        if(null == n) {
            n = {};
            i.legends = n
        }
        for(var r in e) {
            var a = e[r];
            for(var s in a)
                if(t[s]) {
                    n[s] = {};
                    n[s].scale = g(a[s].scaleIns, {
                        field: "data"
                    });
                    n[s].oriScale = a[s].scaleIns;
                    A(n[s], i.legend[a[s].scaleType], l.legend[a[s].scaleType]);
                    A(n[s], t[s], l.legend[a[s].scaleType]);
                    y(n[s], i.legend[a[s].scaleType], a[s])
                }
        }
    }

    function x(t, e) {
        var i = e.emphasis;
        if(null == i) {
            i = {};
            e.emphasis = i
        }
    }

    function $(t, s, o) {
        var l, u, f, p, _;
        for(var m in s) {
            u = s[m];
            p = t[u.visualType];
            if(null == p) {
                p = {};
                t[u.visualType] = p
            }
            l = p[m];
            if(null == l) {
                l = {};
                if("color" == u.visualType) {
                    l.type = "color";
                    if("continuous" == u.domainType) {
                        l.scaleKlass = e;
                        l.scaleType = "colorLinear";
                        f = u.range && c.isArray(u.range) && u.range.length > 0 ? u.range : o.defaultColorRange;
                        _ = u.domain ? u.domain : void 0
                    } else if("discrete" == u.domainType) {
                        l.scaleKlass = i;
                        l.scaleType = "colorOrdinal";
                        f = u.range && c.isArray(u.range) && u.range.length > 0 ? u.range : o.defaultColorRange;
                        _ = u.domain ? u.domain : void 0
                    } else if("any" == u.domainType) {
                        l.scaleKlass = r;
                        f = u.range ? u.range : o.defaultColorRange[0];
                        _ = u.domain ? u.domain : void 0
                    }
                } else if("size" == u.visualType) {
                    l.type = "size";
                    if("any" == u.domainType) l.scaleKlass = a;
                    else if("discrete" == u.domainType) {
                        l.scaleKlass = d;
                        l.scaleType = "sizeOrdinal"
                    } else {
                        l.scaleKlass = n;
                        l.scaleType = "sizeLinear"
                    }
                    f = u.range ? u.range : o.defaultSizeRange;
                    _ = u.domain ? u.domain : void 0
                } else if("shape" == u.visualType) {
                    l.type = "shape";
                    l.scaleType = "shape";
                    l.kind = u.kind ? u.kind : h.defaultShape;
                    if("discrete" == u.domainType) {
                        l.scaleKlass = i;
                        f = u.range ? u.range : o.defaultShapeRange;
                        _ = u.domain ? u.domain : void 0
                    } else if("any" == u.domainType) {
                        l.scaleKlass = r;
                        f = u.range ? u.range : o.defaultShapeRange[0];
                        _ = u.domain ? u.domain : void 0
                    }
                } else if("radius" == u.visualType) {
                    l.type = "radius";
                    if("any" == u.domainType) l.scaleKlass = a;
                    else {
                        l.scaleKlass = n;
                        l.scaleType = "sizeLinear"
                    }
                    f = u.range ? u.range : o.defaultSizeRange;
                    _ = u.domain ? u.domain : void 0
                } else console.log("bad scale type!!!!!!!!!!!!! ", u.visualType);
                l.range = f;
                l.userDomain = _;
                l.ratio = u.ratio;
                l.colorMap = u.colorMap;
                p[m] = l
            } else {
                if(null == u.range);
                if(u.range) {
                    l.range = u.range;
                    if(l.scaleIns) l.scaleIns.range(u.range)
                }
                if(u.ratio) {
                    l.ratio = u.ratio;
                    if(l.scaleIns) l.scaleIns.ratio = u.ratio
                }
            }
        }
    }

    function w(t, e, i, n) {
        var r = t[e][i],
            a = r.scaleIns;
        if(null == a) {
            a = r.scaleKlass.create();
            r.scaleIns = a;
            a.__name = i
        }
        if(r.range)
            if("defaultColor" == r.range) a.range(n.defaultColor);
            else a.range(r.range);
        return a
    }

    function k(t, e, i, n, r) {
        var a = t[e][i],
            s = a.scaleIns;
        if(null == s) {
            s = a.scaleKlass.create();
            if(r)
                if(a.userDomain) {
                    s.__lastDomain = r;
                    s.domain(a.userDomain)
                } else {
                    s.__lastDomain = r;
                    s.domain(r.value)
                }
            a.scaleIns = s;
            s.__name = i
        } else if(r) {
            if("color" == e && s._map) var o = s._map();
            s.domain(r.value)
        }
        if(a.userDomain) s.domain(a.userDomain);
        if(a.range) s.range(a.range);
        if(a.ratio) s.ratio = a.ratio;
        if(a.colorMap) s._setmap(a.colorMap);
        if(a.kind) s.kind = a.kind;
        if(o) s._setmap(o);
        return s
    }

    function S(t, e) {
        var i = function(i) {
            if(t && t.exec || c.isFunction(t)) return e.convertF(t(i));
            else return t
        };
        for(var n in e) i[n] = e[n];
        return i
    }

    function C(t, e) {
        var i = function(e) {
            return t.exec(e)
        };
        if(e) i.oriScaleName = e;
        return i
    }

    function T(t, e, i, n) {
        for(var r in e)
            if(null != t[r])
                if(e[r].isNormalScaleProp === !0) {
                    if(c.isString(t[r])) t[r] = C(w(i, e[r].type, t[r], n), t[r]);
                    else if(t[r].oriScaleName) t[r] = C(w(i, e[r].type, t[r].oriScaleName, n))
                } else T(t[r], e[r], i, n);
            else;
    }

    function E(t, e) {
        for(var i = 0; i < e.length; i++)
            if(!t[i]) t[i] = e[i];
            else
                for(var n in e[i])
                    if("font" == n) {
                        var r = t[i][n],
                            a = e[i][n];
                        for(var s in a) r[s] = a[s]
                    } else t[i][n] = e[i][n]
    }

    function I(t, e) {
        for(var i in e)
            if(t[i] && "styles" == i)
                if(e && c.isFunction(e[i])) t[i] = e[i];
                else E(t[i], e[i]);
            else t[i] = u.transformToFunction(e[i])
    }

    function A(t, e, i) {
        for(var n in e)
            if(null != i[n])
                if(i[n] === !0) {
                    if(null == t[n]) t[n] = {};
                    I(t[n], e[n])
                } else if(1 === i[n]) t[n] = u.transformToFunction(e[n]);
                else if(0 === i[n]) t[n] = e[n];
                else {
                    if(null == t[n]) t[n] = {};
                    A(t[n], e[n], i[n])
                } else;
    }

    function M(t, e, i) {
        var n, r = {};
        for(var a in e) {
            var s = t,
                o = l,
                u = {},
                n = i[a];
            if(i[a] && i[a].isMark) {
                n = i[a].type;
                u.type = i[a].type;
                u.isMark = i[a].isMark;
                u.which = i[a].which
            }
            if(c.isString(n)) {
                s = s[n];
                o = o[n]
            } else if(c.isArray(n))
                for(var d = 0; d < n.length; ++d) {
                    s = s[n[d]];
                    o = o[n[d]]
                } else console.log(a, "error, bad classTypeMap", n);
            A(u, s, o);
            A(u, e[a], o);
            r[a] = u
        }
        return r
    }
    var D = t.Klass,
        P = D.extend({
            initialize: function(t, e, i, n) {
                if(!s[t]) t = "default";
                var r = s[t]();
                this._t.setprops(r);
                var a = {};
                this._t.setscaleTemplates(a);
                if(i) A(r, i, l);
                $(a, r.visualScales, r);
                if(i && i.visualScales) $(a, i.visualScales, r);
                T(r, o, a, r);
                _(r);
                r.classNameStyleMap = {};
                this.setclassTypeMap(e);
                if(i) {
                    if(i.legends) b(i.legends, a, r);
                    if(i.classStyle) {
                        r.classNameStyleMap = M(r, i.classStyle, e);
                        var c = r.classNameStyleMap;
                        for(var u in c) {
                            var d = c[u];
                            for(var h in d)
                                if("isMark" === h) v(d, d.mark, a, n)
                        }
                    }
                }
            },
            update: function(t, e) {
                if(null != t) {
                    if(c.isArray(t));
                    else {
                        var i = this.props(),
                            n = this._t.scaleTemplates(n);
                        A(i, t, l);
                        if(t.defaultColor) T(i, o, n, i);
                        if(t.visualScales) $(n, t.visualScales, i);
                        if(t && t.classStyle) i.classNameStyleMap = M(i, t.classStyle, this.classTypeMap());
                        var r = i.classNameStyleMap;
                        for(var a in r) {
                            var s = r[a];
                            for(var u in s)
                                if("isMark" === u) v(s, s.mark, n, e)
                        }
                        if(t.legends) b(t.legends, n, i);
                        if(t.emphasis) x(t.emphasis, i)
                    }
                    return t
                }
            },
            updateClassStyle: function(t) {
                var e = this.props();
                if(t && t.classStyle) e.classNameStyleMap = M(e, t.classStyle, this.classTypeMap());
            },
            getProp: function(t, e) {
                var i = this.props();
                if(e && i.classNameStyleMap[e]) return i.classNameStyleMap[e];
                if(c.isString(t)) return i = i[t];
                else if(c.isArray(t))
                    for(var n = 0; n < t.length; ++n) i = i[t[n]];
                return i
            },
            getLegendScales: function(t) {
                var e = this.props(),
                    i = e.legends,
                    n = [];
                if(null == i) return n;
                var r = this.scaleTemplates(),
                    a = r[t];
                if(null == a) return n;
                for(var s in i)
                    if(a[s] && a[s].scaleIns) n.push(a[s].scaleIns);
                return n
            },
            getPaneMarkStyle: function(t) {
                return this.props()[t.type]
            }
        }, ["props", "scaleTemplates", "innerData", "classTypeMap"]);
    return P
}, 571, 696, 697, 662, 698, 699, 700, 701, 702, 703, 654, 661, 704);
I$(575, function(t, e) {
    function i() {
        var t = 500,
            e = {
                bar: {
                    enter: {
                        mark: [{
                            attr: ["x"],
                            from: {
                                x: function(t, e) {
                                    var i = e.to.x,
                                        n = e.target.dynamicProperty("data")[0].innerMark.width();
                                    if(i.length > 1) n = i[1] - i[0];
                                    else n *= 1.2;
                                    for(var r = new Array(i.length), a = 0; a < i.length; ++a) r[a] = i[a] + n * i.length;
                                    return r
                                }
                            },
                            duration: t
                        }],
                        label: []
                    },
                    update: {
                        mark: [{
                            attr: ["x", "y", "width", "height"],
                            duration: t
                        }],
                        label: []
                    },
                    exit: {
                        mark: [{
                            attr: ["x"],
                            to: {
                                x: function(t, e) {
                                    var i = e.from.x,
                                        n = e.target.dynamicProperty("data")[0].innerMark.width();
                                    if(i.length > 1) n = i[1] - i[0];
                                    else n *= 1.2;
                                    for(var r = new Array(i.length), a = 0; a < i.length; ++a) r[a] = i[a] - n * i.length;
                                    return r
                                }
                            },
                            duration: t
                        }],
                        label: []
                    }
                },
                gradientLine: {
                    enter: {
                        line: [{
                            attr: ["vertexes"],
                            from: {
                                vertexes: function(t, e) {
                                    var i = e.to.vertexes,
                                        n = 0;
                                    if(i.length > 0) n = i[0][1].x - i[0][0].x;
                                    for(var r = new Array(i.length), a = 0; a < i.length; ++a) {
                                        r[a] = [];
                                        for(var s = 0; s < i[a].length; ++s) r[a][s] = {
                                            x: i[a][s].x + n * i.length,
                                            y: i[a][s].y
                                        }
                                    }
                                    return r
                                }
                            },
                            duration: t
                        }],
                        mark: [{
                            attr: ["x", "y"],
                            from: {
                                x: function(t, e) {
                                    var i = e.to.x,
                                        n = e.target.dynamicProperty("data")[0].innerMark.dynamicProperty("graphic")._info().logicSpace.width,
                                        r = 0;
                                    if(i.length > 0) r = 2 * (n - i[i.length - 1]);
                                    for(var a = r * i.length, s = new Array(i.length), o = 0; o < i.length; ++o) s[o] = i[o] + a;
                                    return s
                                },
                                y: function(t, e) {
                                    for(var i = e.to.y, n = new Array(i.length), r = 0; r < i.length; ++r) n[r] = i[r];
                                    return n
                                }
                            },
                            duration: t
                        }]
                    },
                    update: {
                        line: [{
                            attr: ["vertexes"],
                            duration: t
                        }],
                        mark: [{
                            attr: ["x", "y"],
                            duration: t
                        }]
                    },
                    exit: {
                        line: [{
                            attr: ["vertexes", "alpha"],
                            to: {
                                vertexes: function(t, e) {
                                    var i = e.from.vertexes,
                                        n = 0;
                                    if(i.length > 0) n = i[0][1].x - i[0][0].x;
                                    for(var r = n * i.length, a = new Array(i.length), s = 0; s < i.length; ++s) {
                                        a[s] = [];
                                        for(var o = 0; o < i[s].length; ++o) a[s][o] = {
                                            x: i[s][o].x - r,
                                            y: i[s][o].y
                                        }
                                    }
                                    return a
                                },
                                alpha: 0
                            },
                            duration: t
                        }]
                    }
                },
                line: {
                    enter: {
                        line: [{
                            attr: ["vertexes"],
                            from: {
                                vertexes: function(t, e) {
                                    var i = e.to.vertexes,
                                        n = 0;
                                    if(i.length > 0) n = i[0][1].x - i[0][0].x;
                                    for(var r = n * i.length, a = new Array(i.length), s = 0; s < i.length; ++s) {
                                        a[s] = [];
                                        for(var o = 0; o < i[s].length; ++o) a[s][o] = {
                                            x: i[s][o].x + r,
                                            y: i[s][o].y
                                        }
                                    }
                                    return a
                                }
                            },
                            duration: t
                        }],
                        mark: [{
                            attr: ["x", "y"],
                            from: {
                                x: function(t, e) {
                                    var i = e.to.x,
                                        n = e.target.dynamicProperty("data")[0].innerMark.dynamicProperty("graphic")._info().logicSpace.width,
                                        r = 0;
                                    if(i.length > 0) r = 2 * (n - i[i.length - 1]);
                                    for(var a = r * i.length, s = new Array(i.length), o = 0; o < i.length; ++o) s[o] = i[o] + a;
                                    return s
                                },
                                y: function(t, e) {
                                    for(var i = e.to.y, n = new Array(i.length), r = 0; r < i.length; ++r) n[r] = i[r];
                                    return n
                                }
                            },
                            duration: t
                        }]
                    },
                    update: {
                        line: [{
                            attr: ["vertexes"],
                            duration: t
                        }],
                        mark: [{
                            attr: ["x", "y"],
                            duration: t
                        }]
                    },
                    exit: {
                        line: [{
                            attr: ["vertexes", "alpha"],
                            to: {
                                vertexes: function(t, e) {
                                    var i = e.from.vertexes,
                                        n = 0;
                                    if(i.length > 0) n = i[0][1].x - i[0][0].x;
                                    for(var r = n * i.length, a = new Array(i.length), s = 0; s < i.length; ++s) {
                                        a[s] = [];
                                        for(var o = 0; o < i[s].length; ++o) a[s][o] = {
                                            x: i[s][o].x - r,
                                            y: i[s][o].y
                                        }
                                    }
                                    return a
                                },
                                alpha: 0
                            },
                            duration: t
                        }]
                    }
                },
                area: {
                    enter: {
                        line: [{
                            attr: ["vertexes"],
                            from: {
                                vertexes: function(t, e) {
                                    console.log(e);
                                    for(var i = new Array(t.length), n = e.to.vertexes, r = 0; r < t.length; ++r) {
                                        i[r] = [];
                                        for(var a = 0; a < t[r].length; ++a) i[r][a] = {
                                            x: 1e3,
                                            y: n[r][a].y
                                        }
                                    }
                                    return i
                                }
                            },
                            duration: t
                        }],
                        mark: [{
                            attr: ["x", "y"],
                            duration: t
                        }]
                    },
                    update: {
                        line: [{
                            attr: ["vertexes"],
                            duration: t
                        }],
                        mark: [{
                            attr: ["x", "y"],
                            duration: t
                        }]
                    },
                    exit: {}
                },
                scatter: {
                    enter: {
                        mark: [{
                            attr: ["alpha", "scale"],
                            from: {
                                scale: {
                                    sx: 0,
                                    sy: 0
                                },
                                alpha: 0
                            },
                            duration: t
                        }]
                    },
                    update: {
                        mark: [{
                            attr: ["x", "y"],
                            duration: t
                        }]
                    },
                    exit: {
                        mark: [{
                            attr: ["alpha", "scale"],
                            to: {
                                scale: {
                                    sx: 0,
                                    sy: 0
                                },
                                alpha: 0
                            },
                            duration: t
                        }]
                    }
                },
                text: {
                    enter: {
                        mark: [{
                            attr: ["scale"],
                            from: {
                                scale: {
                                    sx: 0,
                                    sy: 0
                                }
                            },
                            duration: t
                        }]
                    },
                    update: {
                        mark: [{
                            attr: ["x", "y", "texts"],
                            from: {
                                texts: function(t, e) {
                                    return t
                                }
                            },
                            to: {
                                texts: function(t, e) {
                                    return t
                                }
                            },
                            duration: t
                        }]
                    },
                    exit: {
                        mark: [{
                            attr: ["scale"],
                            to: {
                                scale: {
                                    sx: 0,
                                    sy: 0
                                }
                            },
                            duration: t
                        }]
                    }
                },
                xAxis: {
                    enter: {
                        tick: [{
                            attr: ["x", "y"],
                            duration: t
                        }],
                        label: [{
                            attr: ["x", "alpha"],
                            from: {
                                x: function(t, e) {
                                    var i = e.to.x,
                                        n = new Array(i.length),
                                        r = 0;
                                    if(i.length > 1) r = i[1] - i[0];
                                    for(var a = r * i.length, s = 0; s < i.length; ++s) n[s] = i[s] + a;
                                    return n
                                },
                                alpha: function(t) {
                                    for(var e = new Array(t.length), i = 0; i < e.length; ++i) e[i] = 0;
                                    return e
                                }
                            },
                            duration: t
                        }]
                    },
                    update: {
                        tick: [{
                            attr: ["x", "y"],
                            duration: t
                        }],
                        label: [{
                            attr: ["x", "y"],
                            duration: t
                        }]
                    },
                    exit: {
                        tick: [{
                            attr: ["y"],
                            duration: t
                        }],
                        label: [{
                            attr: ["x", "alpha"],
                            to: {
                                x: function(t, e) {
                                    var i = e.from.x,
                                        n = new Array(i.length),
                                        r = 0;
                                    if(i.length > 0) r = 2 * i[0];
                                    for(var a = r * i.length, s = 0; s < i.length; ++s) n[s] = i[s] - a;
                                    return n
                                },
                                alpha: 0
                            },
                            duration: t
                        }]
                    }
                },
                yAxis: {
                    enter: {
                        tick: [{
                            attr: ["y"],
                            duration: t
                        }],
                        label: [{
                            attr: ["scale", "alpha"],
                            from: {
                                scale: {
                                    sx: .8,
                                    sy: 1
                                },
                                alpha: function(t) {
                                    for(var e = new Array(t.length), i = 0; i < e.length; ++i) e[i] = 0;
                                    return e
                                }
                            },
                            duration: t
                        }]
                    },
                    update: {
                        tick: [{
                            attr: ["x", "y"],
                            duration: t
                        }],
                        label: [{
                            attr: ["x", "y"],
                            duration: t
                        }]
                    },
                    exit: {
                        tick: [{
                            attr: ["x", "y"],
                            duration: t
                        }],
                        label: [{
                            attr: ["x", "alpha"],
                            to: {
                                x: 0,
                                alpha: 0
                            },
                            duration: .5 * t
                        }]
                    }
                }
            };
        return e
    }
    return i
}, 566, 675);
I$(705, function() {
    var t = t || function(t) {
            "use strict";
            if(!("undefined" == typeof t || "undefined" != typeof navigator && /MSIE [1-9]\./.test(navigator.userAgent))) {
                var e = t.document,
                    i = function() {
                        return t.URL || t.webkitURL || t
                    },
                    n = e.createElementNS("http://www.w3.org/1999/xhtml", "a"),
                    r = "download" in n,
                    a = function(t) {
                        var e = new MouseEvent("click");
                        t.dispatchEvent(e)
                    },
                    s = /constructor/i.test(t.HTMLElement),
                    o = /CriOS\/[\d]+/.test(navigator.userAgent),
                    l = function(e) {
                        (t.setImmediate || t.setTimeout)(function() {
                            throw e
                        }, 0)
                    },
                    c = "application/octet-stream",
                    u = 4e4,
                    d = function(t) {
                        var e = function() {
                            if("string" == typeof t) i().revokeObjectURL(t);
                            else t.remove()
                        };
                        setTimeout(e, u)
                    },
                    h = function(t, e, i) {
                        e = [].concat(e);
                        for(var n = e.length; n--;) {
                            var r = t["on" + e[n]];
                            if("function" == typeof r) try {
                                r.call(t, i || t)
                            } catch(t) {
                                l(t)
                            }
                        }
                    },
                    f = function(t) {
                        if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)) return new Blob([String.fromCharCode(65279), t], {
                            type: t.type
                        });
                        else return t
                    },
                    p = function(e, l, u) {
                        if(!u) e = f(e);
                        var p, _ = this,
                            m = e.type,
                            g = m === c,
                            v = function() {
                                h(_, "writestart progress write writeend".split(" "))
                            },
                            y = function() {
                                if(!(o || g && s) || !t.FileReader) {
                                    if(!p) p = i().createObjectURL(e);
                                    if(g) t.location.href = p;
                                    else {
                                        var n = t.open(p, "_blank");
                                        if(!n) t.location.href = p
                                    }
                                    _.readyState = _.DONE;
                                    v();
                                    d(p)
                                } else {
                                    var r = new FileReader;
                                    r.onloadend = function() {
                                        var e = o ? r.result : r.result.replace(/^data:[^;]*;/, "data:attachment/file;"),
                                            i = t.open(e, "_blank");
                                        if(!i) t.location.href = e;
                                        e = void 0;
                                        _.readyState = _.DONE;
                                        v()
                                    };
                                    r.readAsDataURL(e);
                                    _.readyState = _.INIT
                                }
                            };
                        _.readyState = _.INIT;
                        if(!r) y();
                        else {
                            p = i().createObjectURL(e);
                            setTimeout(function() {
                                n.href = p;
                                n.download = l;
                                a(n);
                                v();
                                d(p);
                                _.readyState = _.DONE
                            })
                        }
                    },
                    _ = p.prototype,
                    m = function(t, e, i) {
                        return new p(t, e || t.name || "download", i)
                    };
                if("undefined" != typeof navigator && navigator.msSaveOrOpenBlob) return function(t, e, i) {
                    e = e || t.name || "download";
                    if(!i) t = f(t);
                    return navigator.msSaveOrOpenBlob(t, e)
                };
                _.abort = function() {};
                _.readyState = _.INIT = 0;
                _.WRITING = 1;
                _.DONE = 2;
                _.error = _.onwritestart = _.onprogress = _.onwrite = _.onabort = _.onerror = _.onwriteend = null;
                return m
            }
        }("undefined" != typeof self && self || "undefined" != typeof window && window || this.content);
    return t
});
I$(576, function(t) {
    function e(t, e) {
        var i = "<a href=",
            n = "</a>";
        return i + t + ">" + e + n
    }

    function i(t, i) {
        var n = s + e(i, decodeURI(i)) + "\n" + o + t + "\n" + l;
        return n
    }

    function n(t) {
        if(null != t) return t + ".html";
        for(var e = "", i = window.__nevBabel, n = 0; n < i.cells.length; n++)
            for(var r = 0; r < i.cells[n].length; r++) {
                var a = i.cells[n][r].marks;
                a.forEach(function(t) {
                    e += t.type + "-"
                })
            }
        e += window.performance.now();
        return e + ".html"
    }

    function r(t) {
        var e = t.area,
            i = t.container,
            n = t.data.rowTitleTree,
            r = t.data.colTitleTree,
            a = t.data.oldRowTitleTree,
            s = t.data.oldColTitleTree;
        t.data && delete t.data.commonAxisInfos;
        t.theme && delete t.theme.debug;
        delete t.domainMatrix;
        delete t.debug;
        delete t.dataArea;
        delete t.area;
        delete t.container;
        if(a) {
            t.data.rowTitleTree = a;
            delete t.data.oldRowTitleTree
        }
        if(s) {
            t.data.colTitleTree = s;
            delete t.data.oldColTitleTree
        }
        var o = '"area":{\n "width": width, \n "height":height \n},\n',
            l = '"container": \n elementView,',
            c = JSON.stringify(t, null, 2),
            u = c.indexOf("{"),
            d = "{\n" + o + l + c.substr(u + 1, c.length);
        t.area = e;
        t.container = i;
        a && (t.data.rowTitleTree = n);
        s && (t.data.colTitleTree = r);
        return d
    }

    function a(e) {
        var a = window.__nevBabel,
            s = r(a),
            o = window.location.href,
            l = i(s, o),
            c = new Blob([l], {
                type: "application/json"
            }),
            u = n(e);
        t(c, u)
    }
    var s = '<!DOCTYPE html> \n<html> \n<head> \n<meta http-equiv="content-type" content="text/html;charset=UTF-8"/> \n<title>dataTree</title> \n </head> \n ',
        o = '<body> \n <div id="chartView" style="position:relative;width:1200px;height:600px;"></div> \n <script src="../../define.js?nevPro=../../src"></script> \n <script type="text/javascript" > \n var elementView = document.getElementById(\'chartView\'); \n var width = elementView.offsetWidth; \n var height = elementView.offsetHeight; \n define([ \n"{nevPro}/pivot/chart/newchart.js" \n], function (newchart) {  \n   var options = \n  ',
        l = "var chart = newchart.create(options); \n  }) \n </script> \n ";
    window.generateNEVPage = a;
    return a
}, 705);
I$(406, function(t, e, i, n, r, a, s, o, l, c, u) {
    function d(t) {
        var e = !0;
        if(t) {
            if("Babel" == t.type) {
                window.__nevBabel = t;
                if("empty" == t.status) {
                    e = !1;
                    console.warn("Data is empty")
                } else {
                    var i = t.data && t.data.dataSets && t.data.dataSets[0] && t.data.dataSets[0][0] && t.data.dataSets[0][0][0];
                    if(i);
                    else {
                        e = !1;
                        console.warn("Please check the format of dataSets")
                    }
                }
            }
        } else e = !1;
        return e
    }
    var h = (t.ContainerSprite, t.selection, t.selector.kind, a.PRIVATE, a.Klass.extend({
        initialize: function(t, e) {
            window.__nevBabelString = function() {
                var e = __nevBabel.area,
                    i = __nevBabel.container,
                    n = t.data.rowTitleTree,
                    r = t.data.colTitleTree,
                    a = t.data.oldRowTitleTree,
                    s = t.data.oldColTitleTree;
                if(a) {
                    t.data.rowTitleTree = a;
                    delete t.data.oldRowTitleTree
                }
                if(s) {
                    t.data.colTitleTree = s;
                    delete t.data.oldColTitleTree;
                }
                t.data && delete t.data.commonAxisInfos;
                t.theme && delete t.theme.debug;
                delete t.domainMatrix;
                delete t.debug;
                console.log(JSON.stringify(t));
                a && (t.data.rowTitleTree = n);
                s && (t.data.colTitleTree = r);
                t.area = e;
                t.container = i
            };
            var i = d(t);
            this.setisValid(i);
            if(i) {
                if("mobile" == t.platform) s.initMorphKlass("mobile");
                else {
                    t.platform = "web";
                    s.initMorphKlass("web")
                }
                this.generateInnerData(t, e);
                if(!e) {
                    new Date;
                    this.createScene();
                    new Date;
                    this.morphMgr().segmentMorph();
                    new Date;
                    this._addZoomListener();
                    this.morphMgr().constructMorphNet();
                    new Date
                }
            }
        },
        processOption: function(t) {
            new Date;
            if(!t.type || "Babel" != t.type) this.convertUDDataFromUserOption();
            else {
                var e = t.area;
                e.x = 0;
                e.y = 0;
                var i = t.coords[0].type;
                if("map" == i && !t.controls) t.controls = {
                    zoom: {
                        tools: ["reset", "zoomin", "zoomout", "frameChoose", "search"],
                        position: "right_bottom"
                    }
                };
                this.setUDData(t);
                t.data.isCommonAxis = !0
            }
            return !0
        },
        convertUDDataFromUserOption: function() {
            var t = this.option(),
                e = i.convertUserOptionToUDData(t);
            this.setUDData(e);
            return this
        },
        generateInnerData: function(t, e) {
            this.subTraits(0).__init();
            this.createEventStream("input");
            this.setoption(t);
            if(t && t.theme && t.theme.themeName) var i = l.create(t.theme.themeName);
            else if("mobile" == t.platform) var i = l.create("mobile");
            else var i = l.create();
            this.settheme(i);
            !e && this.setmorphMgr(o.create(t.container, this.theme(), this));
            var n = (new Date, this.processOption(t));
            return n && this.convertInnerDataFromUDdata()
        },
        getLogicSize: function() {
            if(this.isValid()) {
                var t = this.innerData(),
                    e = t.pivotAxis && t.pivotAxis.commonAxisInfos,
                    i = t.pivotAxis && t.pivotAxis.xPivotAxisInfo,
                    n = t.pivotAxis && t.pivotAxis.yPivotAxisInfo,
                    r = t.marksInfoMatrix && t.marksInfoMatrix.logicSpace,
                    a = t.legendInfo && t.legendInfo.space,
                    s = t.emphasisInfo,
                    o = t.xScrollSpace,
                    l = t.yScrollSpace,
                    c = 0,
                    u = 0,
                    d = 0,
                    h = 0;
                c += a ? a.height : 0;
                d += i && i.titleNameArray ? i.titleNameArray.logicSpace.height : 0;
                d += i && i.titleValuesMatrix ? i.titleValuesMatrix.logicSpace.height : 0;
                d += e && e.top ? e.top.logicSpace.height : 0;
                h = n && n.titleNameArray ? n.titleNameArray.logicSpace.height : 0;
                c += d > h ? d : h;
                c += e && e.bottom ? e.bottom.logicSpace.height : 0;
                c += s && s.position && ("top" == s.position || "bottom" == s.position) ? s.space.height : 0;
                c += o ? o.height : 0;
                c += r ? r.height : 0;
                u += n && n.titleValuesMatrix ? n.titleValuesMatrix.logicSpace.width : 0;
                u += e && e.left ? e.left.logicSpace.width : 0;
                u += e && e.right ? e.right.logicSpace.width : 0;
                u += s && s.position && ("left" == s.position || "right" == s.position) ? s.space.width : 0;
                u += l ? l.width : 0;
                u += r ? r.width : 0;
                return {
                    chartWidth: u + 4,
                    chartHeigth: c + 4
                }
            }
        },
        resize: function(t, e) {
            if(this.isValid()) {
                var i = this.UDData(),
                    n = i.area;
                n.width = t;
                n.height = e;
                this.updateData(i, !0)
            }
        },
        _addZoomListener: function() {
            var t = this.morphMgr().morphs().zoom;
            if(t) t.addZoomListener(this)
        },
        rescale: function(t, e, i) {
            if(this.isValid() && (null != e || null != i)) {
                for(var n, r = this.UDData(), a = r.scales, s = r.coords, o = 0; o < s.length; o++)
                    if("map" == s[o].type && null != s[o].scale) {
                        n = a[s[o].scale];
                        n.ratio = t;
                        n.center = e
                    } else;
                this.convertInnerDataFromUDdata();
                var l = (this.option(), this.innerData()),
                    c = this.morphMgr();
                c.resetData(l);
                this.morphMgr().redraw(this.morphMgr().morphs().graph)
            }
        },
        convertInnerDataFromUDdata: function() {
            var t = this.UDData();
            if(t) {
                for(var e = t.cells, i = 0; i < e.length; i++)
                    for(var r = 0; r < e[i].length; r++) e[i][r].marks.map(function(t) {
                        var e = "line" == t.type && (1 == t.gradient || null != t.size) ? "gradientLine" : t.type;
                        t.type = e
                    });
                var a = n.convertUDDataToInnerData(t, this.theme());
                this.setinnerData(a);
                a.graphSize = this.getLogicSize();
                return !0
            }
        },
        createScene: function() {
            var t = this.innerData();
            t && this.morphMgr().createMorph(t, this.theme())
        },
        updateData: function(t, e) {
            var i = this.theme();
            if(t.setting && t.setting.animation && null == i.transition && !e) i.transition = c();
            var n = d(t);
            if(n) {
                this.processOption(t);
                this.convertInnerDataFromUDdata();
                var r = this.innerData(),
                    a = this.morphMgr();
                a.resetData(r);
                i.transition && a.runAnimations(a.morphs(), a.stageInfo())
            }
            this.setisValid(n)
        },
        __reDraw: function(t) {},
        updateTheme: function(t) {
            if(this.isValid()) {
                var e = this.theme();
                e.update(t, this.innerData());
                this.morphMgr().updateTheme(t)
            }
        },
        destroy: function() {
            this.isValid() && this.morphMgr().removeStages()
        },
        processEvent: function(t) {
            if(this.isValid()) {
                t.eventType = "logic";
                this.morphMgr().publicMsg(t)
            }
        },
        subscribeMessage: function(t) {
            this.isValid() && this.subscribe("input", t)
        }
    }, ["innerData", "UDData", "rootSelection", "option", "__root", "morphMgr", "theme", "isValid"], [t.EventStreamTrait]));
    return h
}, 566, 567, 568, 569, 570, 571, 572, 573, 574, 575, 576);
I$(407, function() {
    var t = {
        version: "v0.2",
        branch: "test",
        packaged_commit_message: "修改了fileSave的模块导出接口,打包",
        packaged_date: "2016年 9月27日 星期二 21时09分12秒 HKT",
        lastest_commit_id: "7b18593619a1f424911adcce836b8aa050ea39dc",
        lastest_commit_message: " 修改了fileSave的模块导出接口",
        lastest_author: "Wang Wei <1021281778@qq.com> ",
        lastest_commit_date: "Tue Sep 27 21:08:11 2016 +0800"
    };
    return t
});
I$(408, '\n<div class=\'area-{textTable?"text":"chart"}\' ref=chart on-clickouter={this.release()}>\n\n  <div class="nrender-logo" ><img src="/res/img/logo-sy.svg" alt=""></div>\n  <div class=\'container\' ref=\'container\'>\n  <div class=\'data-empty\'  r-animation=\'on:enter;class: animated fadeIn\' r-hide={marksCount!==0}> <img src="/res/img/data-empty.png" alt="" /> </div>\n   </div>\n</div>\n\n\n\n<!--     <table-render textTable={textTable} colorMap={colorMap} globalColor={globalColor} formatMap={formatMap} style={this.getStyle()} isolate=1 /> -->');
I$(577, "<div class='m-widetable m-wtable ' ref=chart style='overflow:hidden'>\n  <div ref=thead class='thead table'>\n    <div class=\"trow u-noselect\">\n    {#list heads as pid by pid_index}\n      <div class=\"th\" on-click={this.sort(pid, sortObj[pid] === 'asc')} >\n      <span class='u-icn u-icn-{sortObj[pid]}' r-hide={!sortObj[pid]}></span> { headPidMap[pid].name }  <span class='u-icn u-icn-{headPidMap[pid].icn} after'></span>\n      </div>\n    {/list}\n    </div> \n  </div>\n  <div class='wtable_container u-lscroll' ref=container  style='overflow:auto;'>\n    <table ref=tbody class='tbody table j-scrollTable' >\n      <thead><tr>\n      {#list heads as pid by pid_index}\n      <th><span class='u-icn u-icn-asc' ></span> { headPidMap[pid].name }  <span class='u-icn u-icn-string after'></span></th>\n      {/list}\n      </tr></thead>\n      <tbody>\n        {#list rows as row by row_index}\n          <tr >\n            {#list heads as pid by pid_index }\n              <td>{ row[pid]|format: pid }</td>\n            {/list}\n          </tr>\n        {/list}\n      </tbody>\n    </table>\n  </div>\n</div>");
I$(409, function(t, e, i, n, r, a) {
    var s = n.cache;
    return Regular.extend({
        name: "widetable-render",
        template: t,
        render: function(t, e) {
            this.data = t;
            if(e.formatMap) this.data.formatMap = a.generateFormatMap(e.formatMap, {
                tableData: t
            });
            this.$update()
        },
        sort: function(t, e) {
            var i = this.data,
                n = this.data.rows,
                r = this;
            if(n.length) s._$sort({
                desc: !!e,
                list: n.map(function(e) {
                    return e[t]
                })
            }).then(function(n) {
                var a = n.result;
                if(Array.isArray(a)) {
                    i.sortObj = {};
                    i.sortObj[t] = e ? "desc" : "asc";
                    i.rows.sort(function(e, i) {
                        return a.indexOf(e[t]) - a.indexOf(i[t])
                    });
                    r.$update()
                }
            })
        },
        init: function() {
            var t = this.$refs.container,
                n = this.$refs.thead;
            i.on(this.$refs.container, "scroll", Regular.util.throttle(function(i) {
                e.setVendorStyle(n, "transform", "translate3d( -" + t.scrollLeft + "px , 0, 0) ")
            }, 1e3 / 60))
        },
        resize: function(t, e) {
            if(this.parentNode) {
                var i = this.$refs.container;
                i.style.width = t + "px";
                i.style.height = e - 32 + "px";
                var n = this.getSize();
                this.resizeHead(n)
            }
        },
        resizeHead: function(t) {
            var i = e.$$(".th", this.$refs.thead);
            this.$refs.thead.style.width = t.reduce(function(t, e) {
                    return t + e.width
                }, 0) + t.length + 1 + "px";
            t.forEach(function(e, n) {
                var r = i[n];
                r.style.width = t[n].width + 1 + "px"
            })
        },
        getSize: function() {
            var t = e.$$("th", this.$refs.tbody);
            if(!t.length) return [];
            else return [].map.call(t, i.size)
        }
    }).filter("format", function(t, e) {
        if(null === t) return "";
        var i = this.data.formatMap;
        if(!i) return t;
        var n = e && i[e];
        return n ? n(t) : t
    })
}, 577, 7, 400, 34, 136, 176);
I$(219, function(t, e, i, n, r, a) {
    if("undefined" != typeof window) window.nevVersionInfo = n;
    var s = Regular.extend({
        template: r,
        init: function() {
            var t = this;
            Regular.dom.on(this.$refs.chart, "contextmenu", function(e) {
                if(!t.data.showTable) e.preventDefault()
            })
        },
        renderTable: function(t, e) {
            if(this.chart) {
                this.chart.destroy();
                this.chart = null
            }
            if(!this.table) this.table = new a({
                data: []
            });
            this.table.render(t, e);
            this.table.$inject(this.$refs.container);
            setTimeout(function() {
                this.resize(e.size)
            }.bind(this))
        },
        getSize: function(t) {
            t.type = "Babel";
            var e = i.create(t, !0);
            return e.getLogicSize()
        },
        render: function(e, n, r) {
            if(this.table) this.table.$inject(!1);
            r = r || {};
            this.data = e;
            setTimeout(function() {
                if(!e.textTable && e.marksCount) {
                    t.extend(e, {
                        container: this.$refs.container,
                        type: "Babel"
                    });
                    if(this.chart && r.fromAutoReload) {
                        e.setting.animation = !1;
                        this.chart.updateData(e)
                    } else {
                        if(this.chart) {
                            this.chart.destroy();
                            this.chart = null
                        }
                        e.setting.animation = !0;
                        this.chart = i.create(e);
                        this.chart.subscribeMessage(this.handleNevMessage.bind(this))
                    }
                } else;
                if(!r.fromAutoReload) this.resize(e.area)
            }.bind(this), 0);
            this.$update()
        },
        handleNevMessage: function(t) {
            switch(t.type) {
                case "contextmenu":
                    if(t.sourceEvt) t.sourceEvt.preventDefault();
                default:
                    this.$emit("chartEvent", t)
            }
        },
        getStyle: function() {
            var e = this.data,
                i = e.labelConfig;
            if(i) {
                t.extend(i, {
                    fontSize: 12,
                    positionX: "right"
                });
                var n = "text-align: " + i.positionX + ";font-size:" + i.fontSize + "px;";
                if(i.color) n += "color:" + i.color;
                return n
            }
        },
        release: function() {
            if(this.chart) this.chart.processEvent({
                type: "cancelSelect"
            })
        },
        resize: function(t, e) {
            var i = this.data.size;
            this.data.size = t || i;
            var n = this.$refs.container;
            if(n) {
                var r = t.width,
                    a = t.height;
                n.style.width = r + "px";
                n.style.height = a + "px";
                if(!e) {
                    if(this.chart) this.chart.resize(r, a);
                    if(this.table) this.table.resize(r, a)
                }
            }
        },
        destroy: function() {
            if(this.chart) this.chart.destroy();
            this.supr()
        },
        cancalSelect: function() {}
    });
    return s
}, 7, 400, 406, 407, 408, 409);
I$(187, function(t, e, i) {
    var n = i.extend({
        data: {
            attach: '<div><button ref="cancel" class="u-cancel" on-click={reject(1)}> 停止查询 </button></div>'
        },
        init: function() {
            this.supr();
            this.$refs
        },
        show: function() {
            var t = this.data;
            this.supr();
            return new Promise(function(e, i) {
                t.resolve = e;
                t.reject = i
            })
        }
    });
    return new n({
        data: {
            show: !1
        }
    })
}, 7, 34, 33);
I$(35, function(t, e, i, n, r, a) {
    function s() {
        return function(e) {
            return function(i) {
                var r = i.payload;
                if(r && /level`/.test(r.from)) r.from = "dimension";
                if(t.isPromise(i)) return i.then(function(t) {
                    e(t)
                });
                if("function" == typeof i) return i(p.dispatch, p.getState);
                else {
                    if(u.locked && d.indexOf(i.type) === -1) return p.dispatch({
                        type: "REPORT_ERROR",
                        payload: "报表已被锁定， 无法编辑！"
                    });
                    if("EVENT" === i.type) return p.emit(i.event, i.param);
                    e(i);
                    if(!n.status.autoplay && i.type && 0 === i.type.indexOf("HELPER")) p.emit("RENDER")
                }
            }
        }
    }

    function o() {
        return function(t) {
            return function(e) {
                var i = (e.type, e.next);
                if(i) {
                    e.record = !1;
                    delete e.next
                }
                t(e);
                if(i) {
                    i.previous = e;
                    t(i)
                }
            }
        }
    }

    function l() {
        return function(e) {
            return function(i) {
                e(i);
                if("report_undo" !== i.type) {
                    var n = p.getState().current,
                        r = n.markMatrix.slice();
                    r.push(n.mark);
                    var a = r.some(function(e) {
                        for(var i in h)
                            if(h[i].multiple) {
                                var n = {},
                                    r = e[i];
                                if(r.some(function(e) {
                                        var i = t.pid(e);
                                        if(n[i]) return !0;
                                        else n[i] = 1
                                    })) return !0
                            }
                    });
                    if(a) {
                        p.dispatch({
                            type: "report_undo",
                            replace: !0
                        });
                        t.message("mark列表不能出现相同的项", "warm")
                    }
                }
            }
        }
    }
    var c = a.delegates,
        u = r.status,
        d = ["REPLACE_WHOLE_REPORT", "REPORT_ERROR", "QUERY_NEV_DATA", "EVENT"],
        h = n.MARK_AREA_CONF,
        f = (i.reflex, Redux.applyMiddleware(l, s, o)(Redux.createStore)),
        p = f(a, r.cleanState({
            dimension: [],
            measure: []
        }));
    p.actions = {};
    p.subscribe(function() {
        var e = p.getState().current;
        r.fillMeasureValues(e);
        r.computedDualAxis(e);
        var i = e.options.sort,
            n = t.extend({}, i),
            a = Object.keys(i);
        if(a.length) {
            r.eachPill(e, function(e) {
                if(a.length) {
                    var i = t.pid(e),
                        n = a.indexOf(i);
                    if(~n) a.splice(n, 1)
                }
            }, {
                ignore: /^(dimension|measure)/
            });
            if(a.length) {
                a.forEach(function(t) {
                    n[t] = null
                });
                e.options.sort = n
            }
        }
    });
    for(var _ in i)
        if(Array.isArray(i[_])) p.actions[_] = i[_];
        else ! function(t) {
            p.actions[t] = function() {
                var e = i[t].apply(this, arguments);
                if(!e) throw "没有注册对应action";
                p.dispatch(e)
            }
        }(_);
    for(var _ in c) ! function(e) {
        p.actions[t.formatType(e)] = function(t) {
            p.dispatch({
                type: e,
                payload: t
            })
        }
    }(_);
    r.emitable(p);
    var m = p.dispatch;
    p.dispatch = function(e) {
        var i = window.__LOG__ && window.__LOG__.applyRecord;
        if(i) try {
            var n = {},
                r = {
                    type: e.type,
                    more: n
                };
            switch(e.type) {
                case "SHOWME_SET_PILL":
                    var a = t.dget(e, "payload.list.length");
                    n.pillLength = a;
                    n.type = e.payload.type;
                    i("report:action", r);
                    break;
                case "SHOWME_TOGGLE":
                    n.show = e.payload.show;
                    if(n.show) i("report:action", r)
            }
        } catch(t) {}
        m.apply(this, arguments)
    };
    return p
}, 7, 207, 208, 136, 34, 209);
I$(177, function(t, e) {
    function i(t) {
        t = "" + t;
        return t.length <= 1 ? "0" + t : t
    }
    var n = Regular.dom,
        r = "ontouchstart" in document && !("onmousedown" in document),
        a = ReDnd.Dragable.extend({
            name: "dragable-report",
            getPlaceholder: function(e, i) {
                var n = i.key;
                e = document.createElement("div");
                e.className = "u-item u-item-drag u-item-" + ("Continuous" === n.interpretation ? 2 : 1);
                var r = document.createElement("h6");
                e.style.width = "172px";
                Regular.dom.text(r, n && t.ptext(n));
                e.appendChild(r);
                return e
            },
            validate: function(t) {
                if(e.showHelper) {
                    if(t.indexOf("helper") === -1) return !1;
                    var i = this.data.key;
                    if(!i) return !1;
                    if("Dimension" === i.role) return /dimension/.test(t);
                    else return /measure/.test(t)
                }
                return this.supr(t)
            },
            config: function(t) {
                this.supr(t);
                this.$on({
                    dragstart: function() {
                        n.addClass(document.body, "z-drag")
                    },
                    dragend: function() {
                        n.delClass(document.body, "z-drag")
                    }
                });
                this.$on("dragend", function() {
                    if(a.to) n.delClass(a.to, "dropable-active")
                });
                this.$on("dragmove", function(t) {
                    var i = this.placeholder;
                    if(i) {
                        var r = t.drag,
                            s = r.drop;
                        if(!t.drop) {
                            if(s && e.TARGET_PILL.test(s.data.name)) n.addClass(i, "u-item-invalid");
                            if(a.to) n.delClass(a.to, "dropable-active")
                        } else {
                            n.delClass(i, "u-item-invalid");
                            var o = t.drop.node;
                            if(o) {
                                if(a.to) n.delClass(a.to, "dropable-active");
                                a.to = o;
                                n.addClass(o, "dropable-active")
                            }
                        }
                    }
                })
            }
        });
    Regular.implement({
        mtype: function(t) {
            return t ? t.split(":")[0] : t
        },
        consts: e,
        isDate: t.isDate
    }).event("enter", function(t, e) {
        function i(t) {
            if(13 === t.which) {
                t.preventDefault();
                e(t)
            }
        }
        n.on(t, "keypress", i);
        return function() {
            n.off(t, "keypress", i)
        }
    });
    var s = {
            yyyy: function(t) {
                return t.getFullYear()
            },
            MM: function(t) {
                return i(t.getMonth() + 1)
            },
            dd: function(t) {
                return i(t.getDate())
            },
            HH: function(t) {
                return i(t.getHours())
            },
            mm: function(t) {
                return i(t.getMinutes())
            },
            ss: function(t) {
                return i(t.getSeconds())
            }
        },
        o = new RegExp(Object.keys(s).join("|"), "g");
    Regular.filter("format", function(t, e) {
        e = e || "yyyy-MM-dd HH:mm:ss";
        t = new Date(t);
        return e.replace(o, function(e) {
            return s[e] ? s[e](t) : ""
        })
    });
    Regular.filter({
        delTag: function(t) {
            return(t || "").replace(/\<\/?\w+[^\>]*\>/g, "")
        },
        num: {
            set: function(t) {
                var t = parseFloat(t, 10);
                if(isNaN(t)) t = "";
                return t
            },
            get: function(t) {
                if("number" != typeof t) return "";
                else return "" + t
            }
        },
        null: function(t) {
            return null === t ? "null" : t
        },
        float: {
            set: function() {
                value = value.replace(/[^-\d\.]/g, "")
            },
            get: function(t) {
                return t
            }
        },
        compoundName: function(e) {
            var i = e.map(function(e) {
                return t.ptext(e)
            }).join(",");
            if(e.length > 1) i += "等多个字段";
            return i
        },
        ptext: t.ptext,
        pid: t.pid,
        aggregator: t.aggregator,
        upper: function(t) {
            return t && t.replace(/^(\w)/, function(t) {
                    return t.toUpperCase()
                })
        },
        lower: function(t) {
            return "string" == typeof t ? t.replace(/^(\w)/g, function(t) {
                return t.toLowerCase()
            }) : t
        },
        lowercase: function(t) {
            return "string" == typeof t ? t.replace(/[A-Z]/g, function(t) {
                return t.toLowerCase()
            }) : t
        }
    });
    Regular.event("clickouter", function() {
        var t = [],
            e = function(e) {
                if(t.length) t.forEach(function(t) {
                    if("function" == typeof t) t(e)
                })
            },
            i = function(t) {
                return function(e) {
                    return e !== t && !t.contains(e)
                }
            };
        return function(a, s) {
            function o(t) {
                if(l(t.target)) s(t)
            }
            var l = i(a),
                c = t.length;
            t.push(o);
            if(!c) setTimeout(function() {
                n.on(document, !r ? "mousedown" : "touchstart", e)
            }, 10);
            return function() {
                var i = t.indexOf(o);
                if(~i) t.splice(i, 1);
                if(!t.length) n.off(document, !r ? "mousedown" : "touchstart", e)
            }
        }
    }())
}, 7, 136, 35, 173);
I$(43, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f, p) {
    var _ = {
            s: 1e3,
            m: 6e4,
            h: 36e5
        },
        m = a.cache,
        g = c.extend({
            $body: "<div class='m-loadinfo'><div class='u-overflow' r-hide={loading}>          <h3 ><span class='u-icn u-icn-warm' ></span></h3>          <p >{#include this.message()} </p>          <i>继续查询将导致浏览器长时间未响应</i>        </div>      <div class='u-spinner u-spinner-load' r-hide={!loading}>      <div class='spinner'>        <div class='bounce1'></div>        <div class='bounce2'></div>        <div class='bounce3'></div>      </div>      <p>正在查询，请等待...</p>      </div></div>",
            data: {
                width: 480,
                title: "查询提示",
                confirmText: "返回",
                content: "数据量过大， 建议您返回并使用筛选器减少数据量",
                cancelText: "继续查询"
            },
            init: function() {
                this.supr();
                this.show()
            },
            message: function() {
                var t = this.data;
                if(t.isOuter) return "数据量过大";
                if(t.content) return t.content;
                else;
            }
        });
    return Regular.extend({
        template: t,
        config: function(t) {
            i.extend(t, {
                limit: 20,
                limits: [10, 20, 50, 100],
                offset: 0,
                pathes: []
            })
        },
        changeLimit: function(t) {
            this.nav(1);
            this.$emit("changeLimit")
        },
        _bindChartEvent: function(t, e) {
            var i = this;
            t.$on("chartEvent", function(t) {
                if("contextmenu" === t.type) i._handleContextMenu(t, e);
                if("statistic" === t.type && "edit" === i.data.area) i.createRLineMenu(t);
                i.$emit("chartEvent", t)
            })
        },
        render: function(t, e) {
            function n() {
                if(u.data.disabled) u.active();
                if(o) u._draw(u.result, c, function(t) {
                    var e = l;
                    t.render = function(t) {
                        l = t;
                        r()
                    };
                    e(t)
                }, {
                    onlyForSize: !0
                });
                else r()
            }

            function r() {
                if(c.options.chart.showTable) {
                    var e = a.resultToWideTable(u.result, c);
                    "wideTable" === e.type;
                    u._render.data.showTable = !0;
                    u._render.renderTable(e, {
                        formatMap: c.options.formatMap,
                        size: u._fixSize(u.data.size, u.data.needPager)
                    });
                    u.$update();
                    l && l(u.result)
                } else u._draw(u.result, c, l, {
                    fromAutoReload: t.fromAutoReload,
                    needPager: u.data.needPager
                });
                var n = u.result,
                    r = i.dget(n, "preSynthesizeResult.retinalMembers");
                u.$emit("done", {
                    retinalMembers: r || {}
                })
            }
            if("function" == typeof e) e = {
                ondraw: e
            };
            e = e || {};
            var o = e.onlyForSize,
                l = e.ondraw;
            this.clearState();
            var c = t.report,
                e = c.options;
            e = c.options = i.extend(e || {}, s.DEFAULT_OPTIONS);
            var u = this,
                d = this.data;
            if(t.size) this.data.size = t.size;
            if(!c.query) throw Error("缺少query对象");
            if(!t.page) {
                d.offset = 0;
                d.limit = e && e.chart && e.chart.limit || 20
            } else d.offset = (t.page - 1) * d.limit;
            c.query;
            c.query.offsetLimit = [d.offset, d.limit];
            if(t.update) {
                this.report = c;
                this.active();
                return setTimeout(n, 1e3 / 60)
            }
            if(!this._render) {
                var h = this.$refs.container;
                this._render = new f({}).$inject(h, "top");
                this._render.resize(t.size);
                this._bindChartEvent(this._render, "mobile" === e.platform)
            }
            this._query(c, {
                fromAutoReload: t.fromAutoReload,
                bg: t.bg
            }, function(t) {
                if(null !== u._handles) {
                    d.needPager = !1;
                    u.result = t;
                    var r = (d.total = i.dget(t, "preSynthesizeResult.pivotTableConfig.nTotalRow") || 0, t["offset-limit"]);
                    if(r) {
                        d.limit = d.limit == -1 ? -1 : r[1];
                        d.offset = r[0]
                    }
                    u.$update("needPager", !("mobile" === e.platform || !t.isTextTable || !t.marksCount));
                    if(t.textTable) return n();
                    n()
                }
            })
        },
        isNotPivot: function(t) {
            var e = this.result,
                i = e && e.preSynthesizeResult && e.preSynthesizeResult.pivotTableConfig;
            if(!i) return !1;
            else return t && !t.textTable && 1 === i.nCol && 1 === i.nRow && 1 === i.nPaneCol && 1 === i.nPaneRow
        },
        autoReload: function(t) {
            this.clearTimer();
            var e = this,
                i = (this.data, this.report);
            this._timer = setTimeout(function() {
                e.render({
                    report: i,
                    fromAutoReload: !0
                })
            }, t);
            return this._timer
        },
        clearTimer: function() {
            if(this._timer) {
                clearTimeout(this._timer);
                this._timer = null
            }
        },
        clearState: function() {
            this.clearTimer();
            if(this.cancelQuery) this.cancelQuery()
        },
        clean: function() {
            if(this._render) {
                this._render = this._render.destroy();
                this.$update("needPager", !1)
            }
        },
        loading: function() {
            this.$update("loading", !0);
            if(this.updateParentLoading) this.updateParentLoading(!0);
            var t = this;
            return new Promise(function(e, i) {
                t.reject = function() {
                    i(1)
                }
            })
        },
        loaded: function(t) {
            if(1 !== t && 200 !== t.code) this.error(t);
            this.$update("loading", !1);
            if(this.updateParentLoading) this.updateParentLoading(!1)
        },
        overflow: function(t, e) {
            var i = {
                isOuter: t.isOuter
            };
            if(!t.datasetEntire) i.content = "数据量过大，无法显示全部数据<br/>建议您返回并使用筛选器减少数据量";
            var n = new g({
                data: i
            }).$on("confirm", function(t) {
                if(!t.accept) {
                    n.$update({
                        loading: !0,
                        needFoot: !1
                    });
                    setTimeout(function() {
                        e();
                        n.destroy()
                    }, 300)
                } else n.destroy()
            }.bind(this))
        },
        error: function(t) {
            var e = t && t.message;
            if(750 !== t.code) {
                if(t instanceof Error) e = "未知运行错误，请刷新重试或联系youdata-bd@hz.netease.com";
                i.message(e || "请求超时或错误")
            } else i.messageDetail(t)
        },
        resize: function(t) {
            if(this._render) {
                this.data.size = t;
                this._render.resize(this._fixSize(t))
            }
        },
        _fixSize: function(t, e) {
            var i = this.data;
            if((i.needPager || i.pathes.length) && t) return {
                height: t.height - 32,
                width: t.width
            };
            else return t
        },
        nav: function(t) {
            var e = this.data,
                i = this.report;
            e.current = t;
            if(i) this.render({
                report: i,
                page: t
            })
        },
        _query: function(t, r, o) {
            var l = t.query,
                c = t.options,
                u = this,
                d = m._$queryNevData({
                    bg: r.bg,
                    reportId: t.reportId,
                    query: t.query,
                    options: t.options,
                    flushTime: r.fromAutoReload ? e._$format(+new Date + 864e5, "yyyy-MM-dd HH:mm:ss") : t.flushTime
                }),
                h = new Promise(function(t, e) {
                    if(s.COLOR_TEMPLATES) t(s.COLOR_TEMPLATES);
                    else m._$colorTemplates().then(function(e) {
                        if(200 == e.code) t(s.COLOR_TEMPLATES = e.result);
                        else throw new Error("获取颜色模板失败")
                    })
                });
            this.cancelQuery = function() {
                d.abort && d.abort();
                u.data.loading = !1;
                u.cancelQuery = null
            };
            Promise.race([Promise.all([d, h]), this.loading()]).then(function(e) {
                this.cancelQuery = null;
                e = e[0];
                this.report = t;
                if(200 === e.code) {
                    this.updateColor(c.marksColor, e.result, l);
                    this.updateShape(c.marksShape, e.result, l);
                    this.loaded(e);
                    var r = e.result,
                        d = r && r.preSynthesizeResult && r.preSynthesizeResult.retinalMembers,
                        h = [];
                    if(d && !n.get("disabledColorOverflow") && "edit" === this.data.area && !i.dget(t.options, "chart.hideLegend")) {
                        Object.keys(d);
                        for(var f in d) {
                            var p = d[f];
                            if(p.length > s.MAX_COLOR) {
                                var _;
                                a.eachPill(t.query, function(t, e) {
                                    if(i.pid(t) === f) {
                                        _ = i.ptext(t) + (e.indexOf("color") !== -1 ? "<颜色>" : "<形状>");
                                        return !0
                                    }
                                }, {
                                    match: /^mark.*(color|shape)/
                                });
                                if(_) h.push({
                                    name: _,
                                    length: p.length
                                })
                            }
                        }
                        if(h.length) return u.showColorOverflowModal(h, function() {
                            o(e.result)
                        })
                    }
                    o(e.result)
                } else throw e
            }.bind(this))["catch"](function(t) {
                if(1 === t) d.abort && d.abort();
                this.loaded(t);
                if(1 !== t && !t.code) throw t
            }.bind(this))
        },
        needColorOverflow: function() {},
        showColorOverflowModal: function(t, e) {
            var i = t.map(function(t) {
                return t.name
            }).join(",");
            new c({
                data: {
                    title: "提示",
                    confirmText: "使用",
                    width: 440,
                    text: i,
                    onlyOne: !1
                },
                $body: "<div class='m-warnText'>          <p> <b class='u-color-danger'>{text}</b>字段包含的数据项大于默认推荐个数（" + s.MAX_COLOR + "个），显示效果将会被影响；</p>              <p>是否确认重复使用？</p>              <p><label><input type=checkbox r-model='onlyOne'/> 不再提醒</label></p>            </div>"
            }).show().$on("confirm", function(t) {
                this.destroy();
                if(t.accept) {
                    if(this.data.onlyOne) n.set("disabledColorOverflow", "1");
                    e()
                }
            })
        },
        updateColor: function(t, e, i) {
            var n = this.__splitPills(i, "color");
            this.__deleteSurplusKey(n[0].concat(n[1]), t);
            this.continuousPillColor(n[1], t);
            this.discretePillColor(n[0], t, e, i)
        },
        discretePillColor: function(t, e, n, r) {
            var a = n && n.preSynthesizeResult && n.preSynthesizeResult.retinalMembers,
                s = this;
            t.forEach(function(t) {
                var n = i.pid(t);
                if(!e[n]) e[n] = {
                    colorMap: [],
                    templateId: 1,
                    opacity: 1,
                    maxIndex: 0
                };
                if(a && a[n])
                    if(t.fieldId && t.fieldId !== -11) s.setMarkColor(e[n], a[n]);
                    else {
                        var o = l.getMeasureNameMembers(r),
                            c = o.map(function(t) {
                                return i.pid(t)
                            });
                        s.setMarkColor(e[n], c)
                    }
            })
        },
        __splitPills: function(t, e) {
            var i = [];
            t.mark && t.mark[e] ? i.push(t.mark[e]) : "";
            if(t.markMatrix) t.markMatrix.forEach(function(t) {
                t[e] ? i.push(t[e]) : ""
            });
            var n = [],
                r = [];
            i.forEach(function(t) {
                if("Discrete" === t.interpretation) n.push(t);
                else r.push(t)
            });
            return [n, r]
        },
        __deleteSurplusKey: function(t, e) {
            var n = t.map(function(t) {
                return i.pid(t)
            });
            for(var r in e) {
                var a = n.some(function(t) {
                    return r === t
                });
                if(!a) delete e[r]
            }
        },
        setMarkColor: function(t, e) {
            var i = t.colorMap || [],
                n = t.maxIndex;
            n = isNaN(parseInt(n)) ? 0 : n;
            var r = s.COLOR_TEMPLATES[t.templateId - 1].colors,
                a = r.length,
                o = t.opacity;
            e.forEach(function(t) {
                var e = i.some(function(e) {
                    return e[0] === t
                });
                if(!e) {
                    var s = r[n % a];
                    s.a = o;
                    i.push([t, s]);
                    n = (n + 1) % a
                }
            });
            t.maxIndex = n
        },
        updateShape: function(t, e, i) {
            var n = this.__splitPills(i, "shape");
            this.__deleteSurplusKey(n[0].concat(n[1]), t);
            this.discretePillShape(n[0], t, e, i)
        },
        discretePillShape: function(t, e, n, r) {
            var a = n && n.preSynthesizeResult && n.preSynthesizeResult.retinalMembers,
                s = this;
            t.forEach(function(t) {
                var n = i.pid(t);
                if(!e[n]) e[n] = {
                    shapeMap: [],
                    templateId: 1,
                    name: "unfilled",
                    maxIndex: 0
                };
                if(a && a[n])
                    if(t.fieldId && t.fieldId !== -11) s.setMarkShape(e[n], a[n]);
                    else {
                        var o = l.getMeasureNameMembers(r),
                            c = o.map(function(t) {
                                return i.pid(t)
                            });
                        s.setMarkShape(e[n], c)
                    }
            })
        },
        setMarkShape: function(t, e) {
            var i = t.shapeMap,
                n = t.maxIndex;
            n = isNaN(parseInt(n)) ? 0 : n;
            var r = s.DEFAULT_SHAPES_TEMPLATES[t.templateId - 1].shapes,
                a = r.length;
            e.forEach(function(t) {
                var e = i.some(function(e) {
                    return e[0] === t
                });
                if(!e) {
                    var s = r[n % a];
                    i.push([t, s]);
                    n = (n + 1) % a
                }
            });
            t.maxIndex = n
        },
        continuousPillColor: function(t, e) {
            var n = this;
            t.forEach(function(t) {
                var r = i.pid(t);
                if(!e[r]) n.__setContinuousColorTemplate(r, e)
            })
        },
        __setContinuousColorTemplate: function(t, e) {
            var i = s.CONTINUOUS_COLOR_TEMPLATES[0],
                n = i.colors,
                r = i.id;
            e[t] = {
                reverse: !1,
                id: r,
                colors: n
            }
        },
        isGeo: function(t) {
            var e = !1;
            if(t.preSynthesizeResult && t.preSynthesizeResult.paneGraphicalDesigns && t.preSynthesizeResult.paneGraphicalDesigns[0] && t.preSynthesizeResult.paneGraphicalDesigns[0][0] && t.preSynthesizeResult.paneGraphicalDesigns[0][0][1] && t.preSynthesizeResult.paneGraphicalDesigns[0][0][1][0] && t.preSynthesizeResult.paneGraphicalDesigns[0][0][1][0].markset) {
                var i = t.preSynthesizeResult.paneGraphicalDesigns[0][0][1][0].markset.coordType;
                if("map" == i) e = !0
            }
            return e
        },
        _draw: function(t, e, i, n) {
            if(this.isGeo(t)) {
                var a = t.mapType;
                if("china" == a) {
                    var o = "/res/map/china.json";
                    if(s.CHINA_MAP) geoJson = s.CHINA_MAP;
                    else r._$request(o, {
                        sync: !0,
                        onload: function(t) {
                            geoJson = t;
                            s.CHINA_MAP = t
                        },
                        onerror: function() {
                            throw new Error("获取地图数据失败")
                        }
                    })
                } else if("world" == a) {
                    var o = "/res/map/world.json";
                    if(s.WORLD_MAP) geoJson = s.WORLD_MAP;
                    else r._$request(o, {
                        sync: !0,
                        onload: function(t) {
                            geoJson = t;
                            s.WORLD_MAP = t
                        },
                        onerror: function() {
                            throw new Error("获取地图数据失败")
                        }
                    })
                }
                t.preSynthesizeResult.geoJson = geoJson;
                delete t.mapType
            }
            var c = this.data,
                u = this.$refs.container,
                d = e.query,
                h = e.options,
                p = {
                    column: d.column,
                    row: d.row,
                    mark: d.mark,
                    markMatrix: d.markMatrix,
                    measures: d.measures
                },
                m = t && t.preSynthesizeResult && t.preSynthesizeResult.retinalMembers;
            t = l.main(t, h, p).result;
            t.retinalMembers = m;
            if(this._render && (t.textTable || 0 === t.marksCount)) {
                this._render.destroy();
                this._render = null
            }
            if(!this._render) {
                this._render = new f({}).$inject(u, "top");
                this._bindChartEvent(this._render, "mobile" === h.platform)
            }
            t.area = this._fixSize(this.data.size);
            if(n.onlyForSize) return i({
                size: this._render.getSize(t, h)
            });
            this._render.render(t, h, n);
            i && i.call(this, this.result);
            var g, v = h.autoReload;
            if(v && c.autoReload && v.open) g = (v.value || 0) * (_[v.unit] || 0);
            if("number" == typeof g && g && this.isNotPivot(t)) {
                this.autoReload(g)
            }
        },
        _handleContextMenu: function(t, e) {
            var i, n = t.info,
                r = n.morph,
                a = n.index,
                s = n.orient,
                o = this.report,
                l = o.query;
            if("left" === s || "right" === s) i = "row";
            else i = "column";
            var c = l[i],
                u = c.length,
                f = 0;
            if(n.type) i = "x" == n.type ? "column" : "row";
            if(c) {
                for(var p = u - 1; p >= 0 && "Continuous" === c[p].interpretation;) {
                    if(!c[p].dualAxis) f++;
                    p--
                }
                if("commonAxis" === r) {
                    var _ = c[u - 1];
                    if(_ && "Discrete" === _.interpretation) a = u - 1;
                    else {
                        if(f > 0) a %= f;
                        if("right" === s || "top" === s) a += 1;
                        c.some(function(t, e) {
                            if("Discrete" === t.interpretation && e < u - 1) a += 1;
                            else return !0
                        })
                    }
                }
                var m = (o.options, {
                    menus: this.createContextMenu({
                        area: i,
                        index: a,
                        contextEvt: t
                    }),
                    position: {
                        left: t.sourceEvt.pageX,
                        top: t.sourceEvt.pageY
                    }
                });
                if(m.menus.length) {
                    if(e) {
                        var g;
                        m.menus.some(function(t) {
                            if("focus" === t.type) {
                                g = t.children;
                                g.forEach(function(t) {
                                    t.icn = "down2"
                                })
                            }
                        });
                        if(g) m.menus = g
                    }
                    new(e ? h : d)({
                        data: m
                    }).$on("menu", function(t) {})
                }
            }
        },
        dispatch: function(t, e, n) {
            var r = o.delegates[t],
                s = this.report,
                l = s.options,
                c = s.query;
            switch(t) {
                case "SAVE_SORT":
                    l.sort = l.sort || {};
                    i.extend(l.sort, e, !0);
                    break;
                case "CHANGE_ZIP_MODE":
                    var u = a.changeZipMode(e.pill, e.zipMode, c, e.area, n.levels, n.levelSign, e.index, n.dimension);
                    if(u) s.query = u;
                    break;
                default:
                    var d = o.applyAction({
                        query: c,
                        options: l
                    }, t, e);
                    s.query = d.query;
                    s.options = d.options
            }
            if(r) this.render({
                report: this.report,
                update: n && n.update
            })
        },
        switchMode: function(t) {
            this.dispatch("SET_SHOW_TABLE", {
                mode: "table" === t
            }, {
                update: !0
            })
        },
        disable: function(t) {
            this.data.disabled = !0;
            this.data.disabledMessage = t;
            this.$update()
        },
        active: function() {
            this.data.disabled = !1;
            this.data.disabledMessage = void 0;
            this.$update()
        },
        destroy: function() {
            this.clearState();
            this.supr();
            this._render.destroy()
        },
        touchPath: function(t) {
            var e = this.data.pathes,
                i = e[t];
            if(0 === t) e.splice(0, e.length);
            else e.splice(t + 1, e.length - t);
            this.report.query = i.query;
            this.render({
                report: this.report,
                keepPath: !0
            });
            return !1
        },
        createRLineMenu: function(t) {
            var e = t.id,
                i = [];
            if(1 === e.length) i = this.createRLineMenuCell(e[0]);
            else e.forEach(function(t, e) {
                var n = e + 1;
                i.push({
                    text: "参考线" + n,
                    children: this.createRLineMenuCell(t)
                })
            }.bind(this));
            var n = {
                menus: i,
                position: {
                    left: t.sourceEvt.pageX,
                    top: t.sourceEvt.pageY
                }
            };
            if(n.menus.length) new d({
                data: n
            }).$on("menu", function(t) {})
        },
        renderAfterGetSize: function(t, e) {
            return this.render(t, {
                onlyForSize: !0,
                ondraw: e
            })
        },
        createRLineMenuCell: function(t) {
            var e = this,
                i = [];
            i.push({
                text: "编辑参考线",
                clicked: function() {
                    e.$emit("editRLine", t)
                }
            });
            i.push({
                text: "取消参考线",
                clicked: function() {
                    e.dispatch("REMOVE_REFERENCELINE", {
                        id: t
                    })
                }
            });
            return i
        },
        createContextMenu: function(t) {
            function e(t) {
                return function() {
                    var e = i.pid(n),
                        r = {
                            $type: "Sort",
                            dimension: i.extend({
                                $type: "Dimension"
                            }, n)
                        };
                    if("unsort" === t) r = void 0;
                    else if("Continuous" === _.interpretation) {
                        var a = i.extend({
                            $type: "Measure"
                        }, _);
                        r.via = {
                            asc: "asc" === t,
                            by: a
                        }
                    } else r.via = {
                        asc: "asc" === t,
                        by: {
                            $type: "Alphabet",
                            caseSensitive: !1
                        }
                    };
                    var s = {};
                    s[e] = r;
                    g.dispatch("SAVE_SORT", s)
                }
            }
            var n, r, s, o, l = this.report,
                c = l.query,
                u = l.options,
                d = l.schema,
                h = t.area,
                f = c[h],
                p = t.index,
                _ = f[p],
                m = u.sort,
                g = this,
                v = t.contextEvt.info,
                y = [],
                b = "pivotAxisTitle" === v.morph;
            if("graph" === v.morph) {
                if(u.hiddenValues && "{}" !== JSON.stringify(u.hiddenValues)) y.push({
                    text: "取消所有数据隐藏",
                    clicked: function() {
                        g.dispatch("CANCEL_HIDDEN", {
                            all: !0
                        })
                    }
                });
                var x = v.chooseData;
                if(this.report.query.mark.labels.length && x) {
                    var $, w, k = [];
                    x.map(function(t, e) {
                        var i = {
                            dimensionId: x[e].record.dimensionId,
                            which: {
                                index: x[e].which.markIndex,
                                x: x[e].which.cellRow,
                                y: x[e].which.cellCol
                            }
                        };
                        k.push(i)
                    });
                    if(1 === x.length) {
                        w = x[0].record.dimensionId;
                        $ = null;
                        if(u.labelVisibility) {
                            var p = a.findDimensionByid(u.labelVisibility, w);
                            if(p >= 0) $ = u.labelVisibility[p].visibility
                        }
                    }
                    var S = {
                        text: "标签",
                        children: [{
                            text: "自动",
                            clicked: function() {
                                if(null !== $) g.dispatch("SET_MARK_LABEL_VISIBILITY", {
                                    info: k,
                                    reset: !0
                                })
                            }
                        }, {
                            text: "始终显示",
                            clicked: function() {
                                if($ !== !0) g.dispatch("SET_MARK_LABEL_VISIBILITY", {
                                    info: k,
                                    visibility: !0
                                })
                            }
                        }, {
                            text: "始终不显示",
                            clicked: function() {
                                if($ !== !1) g.dispatch("SET_MARK_LABEL_VISIBILITY", {
                                    info: k,
                                    visibility: !1
                                })
                            }
                        }]
                    };
                    if(null === $) S.children[0].icn = "ok";
                    else if($ === !0) S.children[1].icn = "ok";
                    else if($ === !1) S.children[2].icn = "ok";
                    y.push(S)
                }
                if(Array.isArray(x) && "edit" !== g.data.area) {
                    var C = g.data.pathes,
                        T = C.reduce(function(t, e) {
                            if(e.dimension) t.push(i.pid(e.dimension));
                            return t
                        }, []),
                        E = (i.dget(u, "focusSetting.dimensions") || []).filter(function(t) {
                            return T.indexOf(i.pid(t)) === -1
                        });
                    if(E.length) {
                        var I = a.createPositionFilterWithRecords(c, x),
                            A = ("(" + I.dimensions.map(function(t) {
                                return i.ptext(t)
                            }).join(",") + ")", {
                                type: "focus",
                                text: "下钻到",
                                children: E.map(function(t) {
                                    return {
                                        text: i.ptext(t),
                                        clicked: function() {
                                            g.dispatch("FOCUS_DIMENSION", {
                                                filter: I,
                                                dimension: t
                                            });
                                            if(!C.length) C.push({
                                                query: c
                                            });
                                            C.push({
                                                query: l.query,
                                                dimension: t,
                                                name: i.ptext(t, {
                                                    schema: l.schema
                                                })
                                            })
                                        }
                                    }
                                })
                            });
                        y.push(A)
                    }
                }
                if(a.hasHiddenCategory(c, ["column", "row"])) y.push({
                    text: "取消所有隐藏类目",
                    clicked: function() {
                        g.dispatch("CANCEL_HIDE_AXIS", {
                            hideAxis: !1,
                            areas: ["column", "row"]
                        })
                    }
                });
                if(a.hasHiddendTitle(c, ["column", "row"])) y.push({
                    text: "取消所有隐藏名称",
                    clicked: function() {
                        g.dispatch("CANCEL_HIDE_TITLE", {
                            hideTitle: !1,
                            areas: ["column", "row"]
                        })
                    }
                });
                return y
            }
            if(_ && _.fieldId == -11) {
                if("Discrete" === _.interpretation && !b) y.push({
                    text: "隐藏类目",
                    clicked: function() {
                        g.dispatch("CHANGE_HIDE_AXIS", {
                            area: t.area,
                            index: t.index,
                            hideAxis: !0
                        })
                    }
                });
                if("Discrete" === _.interpretation && b) y.push({
                    text: "隐藏名称",
                    clicked: function() {
                        g.dispatch("CHANGE_HIDE_TITLE", {
                            hideTitle: !0,
                            area: t.area
                        })
                    }
                });
                return y
            }
            if(_ && _.fieldId < 0) return [];
            if("Discrete" === _.interpretation) {
                s = a.getLevelSign(f, l.schema.levels);
                o = a.genZipMode(s, p);
                n = _
            } else {
                var M = c["column" === h ? "row" : "column"],
                    D = i.lastIndexOf(M, function(t) {
                        return "Discrete" === t.interpretation && t.fieldId > 0
                    });
                if(D !== -1) n = M[D];
                else r = !1
            }
            if(n) {
                r = m[i.pid(n)];
                if(r) {
                    var P = i.dget(r, "via.by"),
                        N = i.dget(r, "via.asc");
                    if("Alphabet" === P.$type && "Discrete" === _.interpretation) r = {
                        asc: N
                    };
                    else if("Measure" === P.$type)
                        if("Continuous" === _.interpretation && i.pid(_) === i.pid(P)) r = {
                            asc: N
                        }
                }
            }
            if(!b) {
                if(o) y.push({
                    text: "zip" === o.mode ? "上卷" : "下钻",
                    icn: o.mode,
                    clicked: function(t) {
                        g.dispatch("CHANGE_ZIP_MODE", {
                            zipMode: o,
                            area: h,
                            index: p,
                            pill: _
                        }, {
                            levelSign: s,
                            levels: d.levels,
                            dimension: d.dimensions || []
                        })
                    }
                });
                var L = i.dget(t, "contextEvt.info.activeValue");
                if(r) y.push({
                    text: "取消排序",
                    split: !0,
                    clicked: e("unsort")
                });
                if(!r || !r.asc) y.push({
                    icn: "asc",
                    text: "升序排序",
                    clicked: e("asc")
                });
                if(!r || r.asc) y.push({
                    icn: "dasc",
                    text: "降序排序",
                    clicked: e("dasc")
                });
                if(L) y.push({
                    text: "隐藏数据项",
                    clicked: function(t) {
                        g.dispatch("HIDE_VALUE", {
                            pid: i.pid(_),
                            values: [L]
                        })
                    }
                });
                if(a.hasHiddenValues(u, _)) y.push({
                    text: "取消隐藏数据项",
                    clicked: function() {
                        g.dispatch("CANCEL_HIDDEN", {
                            pid: i.pid(_)
                        })
                    }
                });
                if("Discrete" === _.interpretation) y.push({
                    text: "隐藏类目",
                    clicked: function() {
                        g.dispatch("CHANGE_HIDE_AXIS", {
                            area: t.area,
                            index: t.index,
                            hideAxis: !0
                        })
                    }
                })
            }
            if(b) y.push({
                text: "隐藏名称",
                clicked: function() {
                    g.dispatch("CHANGE_HIDE_TITLE", {
                        hideTitle: !0,
                        area: t.area
                    })
                }
            });
            if(a.hasHiddenCategory(c, ["column", "row"])) y.push({
                text: "取消所有隐藏类目",
                clicked: function() {
                    g.dispatch("CANCEL_HIDE_AXIS", {
                        hideAxis: !1,
                        areas: ["column", "row"]
                    })
                }
            });
            if(a.hasHiddendTitle(c, ["column", "row"])) y.push({
                text: "取消所有隐藏名称",
                clicked: function() {
                    g.dispatch("CANCEL_HIDE_TITLE", {
                        hideTitle: !1,
                        areas: ["column", "row"]
                    })
                }
            });
            return y
        }
    })
}, 214, 4, 7, 31, 215, 34, 136, 209, 176, 185, 216, 217, 218, 219, 187, 213, 177);
I$(329, function(t, e, i) {
    var n = i.extend({
        config: function(t) {
            this.supr(t);
            t.step = 1;
            t.dashboard = !0;
            t.options = t.dashboardData.report.options;
            this.$watch("limit", function(e) {
                t.options.chart.limit = e;
                t.dashboardData.limit = e
            }, {
                sync: !0
            })
        },
        stopLoading: function() {
            this.data.reject(1);
            this.data.step = 2
        },
        overflow: function(t, e) {
            this.data.step = 3;
            this.$update();
            this.callback = e
        },
        reRender: function(t) {
            var e = this.data;
            if(!t) {
                var i = e.report.reportDataModel.pivotSchema;
                this.render({
                    size: {
                        width: e.chartBox.offsetWidth - 8,
                        height: e.chartBox.offsetHeight - 8
                    },
                    report: {
                        schema: {
                            geoConfig: i.geoConfig,
                            levels: i.levels,
                            dimensions: i.dimensions
                        },
                        reportId: e.reportId,
                        query: e.copyQuery,
                        options: e.options
                    }
                }, function() {
                    this.data.step = 0;
                    this.$update()
                })
            } else this.callback()
        },
        loaded: function(t) {
            if(1 === t) this.data.step = 0;
            this.supr(t)
        },
        error: function(t) {
            var e = this.data;
            switch(t.code) {
                case 701:
                    e.step = 4;
                    e.wrongMessage = t.message || "筛选字段不存在于此报表，无法查询数据";
                    break;
                default:
                    e.step = 5
            }
            this.$update()
        }
    });
    return n
}, 3, 7, 43);
I$(487, '<div class="filter-item" r-class={{\'z-show\':filterData.source==\'global\'}} r-class={{\'z-open\':filterData.open==true}} data-pid="{filterData.pid}" data-reportid="{filterData.reportId}" data-hover="filter-item" {#if filterData.source==\'global\'}id="global-filter-item-{filterData.pid}-{filterData.reportId}"{#else}id="filter-item-{filterData.pid}-{filterData.reportId}"{/if}>\n    {#if filterData.source==\'global\'}<div class="cut-line" data-drag="3" data-ftype="1" data-pid="{filterData.pid}" data-reportid="{filterData.reportId}"></div>{/if}\n    <ul class="u-menu menu-filter-info" {#if filterData.source==\'global\'}id="global-menu-filter-info-{filterData.pid}-{filterData.reportId}"{#else}id="menu-filter-info-{filterData.pid}-{filterData.reportId}"{/if}>\n        <div class="col-2 m-finfo m-finfo-1">\n            <div class="finfo_content">\n                <li><span class="finfo_left">文本筛选:</span><span class="finfo_right f-ellipsis" r-html={otherInfo.match}></span></li>\n                <li><span class="finfo_left">条件筛选:</span><span class="finfo_right f-ellipsis" r-html={otherInfo.condition}></span></li>\n                <li><span class="finfo_left">高级筛选:</span><span class="finfo_right f-ellipsis" r-html={otherInfo.top}></span></li>\n            </div>\n        </div>\n    </ul>\n    <ul class="u-menu menu-filter-config">\n        <li r-class={{\'js-selected\':mode==0}} on-click={this.dynamic(0)}><span class="u-icn u-icn-gou"></span>今天</li>\n        <li r-class={{\'js-selected\':mode==1}} on-click={this.dynamic(1)}><span class="u-icn u-icn-gou"></span>昨天</li>\n        <li r-class={{\'js-selected\':mode==2}} on-click={this.dynamic(2)}><span class="u-icn u-icn-gou"></span>本年至今</li>\n        <li r-class={{\'js-selected\':mode==3}} on-click={this.dynamic(3)}><span class="u-icn u-icn-gou"></span>本月至今</li>\n        <li r-class={{\'js-selected\':mode==4}} on-click={this.dynamic(4)}><span class="u-icn u-icn-gou"></span>本周至今</li>\n        {#if date && date.dynamics}\n        {#list date.dynamics as item by item_index}\n        <li r-class={{\'js-selected\':item.select==true}} on-click={this.dynamic(item)} title="{this.getTitle(item)}"><span class="u-icn u-icn-gou"></span>{this.getLab(item)}</li>\n        {/list}\n        {/if}\n        <li r-class={{\'js-selected\':mode==-1}} on-click={this.dynamic(-1)}><span class="u-icn u-icn-gou"></span>静态时间段</li>\n        {#if filterData.edit}<li class="filter-app-btn" data-action="filter-app" data-pid="{filterData.pid}">作为全局筛选器</li>{/if}\n    </ul>\n    <div class="fttl f-ellipsis" data-action="filter-toggle" data-pid="{filterData.pid}">\n        <span class="wrd" title="{filterData.ptext}">{filterData.ptext}</span>\n        <div class="opt">\n            <div class="u-icn u-icn-info" title="文本筛选内容" data-action="filter-info" data-pid="{filterData.pid}" r-hide={!otherInfoShow} on-click={otherInfoShow?false:true}></div>{#if filterData.edit}<div class="u-icn u-icn-config" title="配置" data-action="filter-config" data-pid="{filterData.pid}"></div>{#if filterData.source==\'global\'}<div class="u-icn u-icn-close" title="关闭" data-action="filter-close" data-pid="{filterData.pid}"></div>{#else}<div class="u-icn u-icn-min" title="最小化" data-action="filter-min" data-pid="{filterData.pid}"></div>{/if}{/if}\n        </div>\n    </div>\n    <div class="filter-item-inner filter-item-inner-date" {#if filterData.source==\'global\'}style="height:{filterData.filterHeight}px" id="global-filter-item-inner-{filterData.pid}-{filterData.reportId}" data-height="{filterHeight}"{#else}id="filter-item-inner-{filterData.pid}-{filterData.reportId}"{/if}>\n\n        <div class="m-filteritem">\n            <div class="m-tdate m-tdate-1">\n                <div class="line">\n                    <label><input type="checkbox" r-model="open">启用时间范围筛选</label>\n                </div>\n                <div r-class={{\'js-disabled\':open==false}}>\n                    <div class="line" r-hide=\'this.isMS()\'>\n                        <div class="u-txt u-txt-h1 show show1" {#if open==true}on-click={this.dateShow(1)}{/if}  style="width:150px;" r-class={{\'js-focus\':show1==true}}>\n                            <div class="date">{dateStart|format:\'yyyy/MM/dd\'}</div>\n                            <div class="hour" r-hide="dateType==1">\n                                <div class="f-fl">{periodHour1}</div>\n                                <div class="f-fl">:{periodMin1}</div>\n                                <div class="f-fl">:{periodSec1}</div>\n                            </div>\n                            <div class="u-icn u-icn-date2"></div>\n                        </div>\n                        <div class="u-txt u-txt-h1 show show2" {#if open==true}on-click={this.dateShow(2)}{/if}  style="width:150px;" r-class={{\'js-focus\':show2==true}}>\n                            <div class="date">{dateEnd|format:\'yyyy/MM/dd\'}</div>\n                            <div class="hour" r-hide="dateType==1">\n                                <div class="f-fl">{periodHour2}</div>\n                                <div class="f-fl">:{periodMin2}</div>\n                                <div class="f-fl">:{periodSec2}</div>\n                            </div>\n                            <div class="u-icn u-icn-date2"></div>\n                        </div>\n                        <div class="date-trl date-trl-1" r-hide="show1 !==  true">\n                            <div class="">\n                                <div class="wrap">\n                                    <div class="box" ref="datepick1"></div>\n                                    <div class="time" r-class={{\'f-dn\':dateType==1}}>\n                                        <input type="checkbox" r-model="periodType1" />\n                                        <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" r-model="periodHour1" on-input={this.checkHour(0)} on-change={this.checkChangeHour(0)} disabled={dateType==1}/>:\n                                        <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" r-model="periodMin1|time60" on-blur={this.blur(\'periodMin1\')} on-change={this.checkChangeHour(0)}  disabled={dateType==1}/>:\n                                        <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" r-model="periodSec1|time60" on-blur={this.blur(\'periodSec1\')} on-change={this.checkChangeHour(0)} disabled={dateType==1}/>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="close u-icn u-icn-del2 close-datepick" on-click={this.dateClose(1)}></div>\n                        </div>\n                        <div class="date-trl date-trl-2" r-hide="show2 !==  true">\n                            <div class="">\n                                <div class="wrap">\n                                    <div class="box" ref="datepick2"></div>\n                                    <div class="time" r-class={{\'f-dn\':dateType==1}}>\n                                        <input type="checkbox" r-model="periodType1" />\n                                        <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" r-model="periodHour2" on-input={this.checkHour(1)} on-change={this.checkChangeHour(1)} disabled={dateType==1}/>:\n                                        <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" r-model="periodMin2|time60" on-blur={this.blur(\'periodMin2\')} on-change={this.checkChangeHour(1)} disabled={dateType==1}/>:\n                                        <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" r-model="periodSec2|time60" on-blur={this.blur(\'periodSec2\')} on-change={this.checkChangeHour(1)} disabled={dateType==1}/>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="close u-icn u-icn-del2 close-datepick" on-click={this.dateClose(2)}></div>\n                        </div>\n                    </div>\n                    <div class="line" r-hide=\'!this.isMS()\'>\n                        <div class="finfo_left">时间范围: </div>\n                        <div class="finfo_right">{this.info()}</div>\n                    </div>\n                    <div r-class={{\'f-dn\':dateType==1 || this.isDailyDisabled()}}>\n                        <div class="line"><label><input type="checkbox" r-model="hourType" disabled={open==false || dateType==1}/>每日固定时间段</label></div>\n                        <div class="line" r-class={{\'js-disabled\':hourType == false}}>\n                            <input type="text" r-model="eveHour1" class="u-txt u-txt-h1 u-txt-d1 ipt" on-input={this.checkHour(2)} on-change={this.checkChangeHour(2)} disabled={!hourType || open==false || dateType==1}/>\n                            点&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;&nbsp;\n                            <input type="text" r-model="eveHour2" class="u-txt u-txt-h1 u-txt-d1 ipt" on-input={this.checkHour(3)} on-change={this.checkChangeHour(3)} disabled={!hourType || open==false || dateType==1}/>\n                            点\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    </div>\n</div>\n');
I$(523, '\n<div class="m-filteritem">\n\n    <div class="m-tdate" style="height:{dateheight}px">\n        <div class="line">\n            <label><input type="checkbox" r-model="open">启用时间范围筛选</label>\n        </div>\n        <div r-class={{\'js-disabled\':open==false}}>\n            <div class="line line-1 f-cb">\n                <input class="f-fl" type="radio" {#if open==false}disabled{/if} {#if open==true}r-model="type" value="0"{/if}  style="margin: 8px 10px 0 5px">\n                <div class="slot slot-1 f-cb" r-class={{\'js-disabled\':type!=0, \'slot-hover\':(open==true && type==0)}}>\n                    <div class="f-fl">动态时间段：</div>\n                    <div class="dync swth" r-class={{\'js-selected\':mode==0 && open==true}} {#if open==true && type==0}on-click={this.dynamic(0)}{/if}>今天</div>\n                    <div class="dync swth" r-class={{\'js-selected\':mode==1 && open==true}} {#if open==true && type==0}on-click={this.dynamic(1)}{/if}>昨天</div>\n                    <div class="dync" r-class={{\'js-selected\':mode==2 && open==true}} {#if open==true && type==0}on-click={this.dynamic(2)}{/if}>本年至今</div>\n                    <div class="dync" r-class={{\'js-selected\':mode==3 && open==true}} {#if open==true && type==0}on-click={this.dynamic(3)}{/if}>本月至今</div>\n                    <div class="dync" r-class={{\'js-selected\':mode==4 && open==true}} {#if open==true && type==0}on-click={this.dynamic(4)}{/if}>本周至今</div>\n                    {#list dynamics as item by item_index}\n                    <div class="dync dync-1" r-class={{\'js-selected\':item.select==true && open==true}} {#if open==true && type==0}on-click={this.dynamic(item)}{/if} title="{this.getTitle(item)}">\n                        {this.getLab(item)}\n                        {#if open==true && type==0}\n                        <div class="dync-del u-icn u-icn-close" on-click={this.delDync(item_index)}></div>\n                        {/if}\n                    </div>\n                    {/list}\n                    {#if dynamics.length < 4}\n                    <div class="dync dync-1" {#if open==true && type==0}on-click={this.dyncAddModalShow()}{/if} >自定义</div>\n                    {/if}\n                </div>\n            </div>\n\n            <div class="line line-1 f-cb">\n                <input class="f-fl" type="radio" {#if open==false}disabled{/if} r-model="type" value="1" style="margin: 8px 10px 0 5px">\n                <div class="slot slot-1 f-cb" r-class={{\'js-disabled\':type!=1}}>\n                    <div class="f-fl">静态时间段：</div>\n                    <div class="u-txt u-txt-h1 show f-fl" {#if open==true && type==1}on-click={this.dateShow()}{/if}  {#if dateType==0}style="width:300px;"{#else}style="width:200px;"{/if} r-class={{\'js-focus\':show==true}}>\n                        <div class="date">{dateStart|format:\'yyyy/MM/dd\'}</div>\n                        <div class="hour" r-hide="dateType==1">\n                            <div class="f-fl">{periodHour1}</div>\n                            <div class="f-fl">:{periodMin1}</div>\n                            <div class="f-fl">:{periodSec1}</div>\n                        </div>\n                        <div class="ln">-</div>\n                        <div class="date">{dateEnd|format:\'yyyy/MM/dd\'}</div>\n                        <div class="hour" r-hide="dateType==1">\n                            <div class="f-fl">{periodHour2}</div>\n                            <div class="f-fl">:{periodMin2}</div>\n                            <div class="f-fl">:{periodSec2}</div>\n                        </div>\n                        <div class="u-icn u-icn-date2"></div>\n                    </div>\n                    <div class="date-trl" r-hide="show !== true" >\n                        <div style="padding-top:30px;">\n                            <div class="wrap wrap1">\n                                <div class="box" ref="datepick1"></div>\n                                <div class="time" r-class={{\'f-dn\':dateType==1, \'js-disabled\':!periodType}}>\n                                    <input type="checkbox" r-model="periodType" />\n                                    <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" disabled={!periodType} r-model="periodHour1" on-input={this.checkHour(0)} on-change={this.checkChangeHour(0)} disabled={dateType==1}/>:\n                                    <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" disabled={!periodType} on-blur={this.blur(\'periodMin1\')} r-model="periodMin1|time60" on-change={this.checkChangeHour(0)}  disabled={dateType==1}/>:\n                                    <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" disabled={!periodType} on-blur={this.blur(\'periodSec1\')} r-model="periodSec1|time60" on-change={this.checkChangeHour(0)} disabled={dateType==1}/>\n                                </div>\n                            </div>\n                            <div class="wrap wrap2">\n                                <div class="box" ref="datepick2"></div>\n                                <div class="time" r-class={{\'f-dn\':dateType==1, \'js-disabled\':!periodType}}>\n                                    <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" disabled={!periodType} r-model="periodHour2" on-input={this.checkHour(1)} on-change={this.checkChangeHour(1)} disabled={dateType==1}/>:\n                                    <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" disabled={!periodType} on-blur={this.blur(\'periodMin2\')} r-model="periodMin2|time60" on-change={this.checkChangeHour(1)} disabled={dateType==1}/>:\n                                    <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" disabled={!periodType} on-blur={this.blur(\'periodSec2\')} r-model="periodSec2|time60" on-change={this.checkChangeHour(1)} disabled={dateType==1}/>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="close u-icn u-icn-close" on-click={this.dateClose()}></div>\n                    </div>\n                </div>\n            </div>\n            <div r-class={{\'f-dn\':dateType==1,\'js-disabled\':this.isDailyDisabled()}}>\n                <div class="line"  ><label><input type="checkbox" r-model="hourType" {#if open==false || dateType==1 || this.isDailyDisabled()}disabled{/if}/>每日</label></div>\n                <div class="line" r-class={{\'js-disabled\':hourType == false}}  style="margin-left:40px;">\n                    <span>每日</span>\n                    <input type="text" r-model="eveHour1" class="u-txt u-txt-h1 u-txt-d1 ipt" on-input={this.checkHour(2)} on-change={this.checkChangeHour(2)} {#if !hourType || open==false || dateType==1 || this.isDailyDisabled()}disabled{/if}/>\n                    点&nbsp;&nbsp;&nbsp;&nbsp;至&nbsp;&nbsp;\n                    <input type="text" r-model="eveHour2" class="u-txt u-txt-h1 u-txt-d1 ipt" on-input={this.checkHour(3)} on-change={this.checkChangeHour(3)} {#if !hourType || open==false || dateType==1 || this.isDailyDisabled()}disabled{/if}/>\n                    点\n                </div>\n            </div>\n        </div>\n    </div>\n\n</div>\n');
I$(632, '\n<div class="m-tdate">\n    <label class="winlab">时间范围：</label>\n    <div class="u-txtwrap">\n        <input type="radio" r-model=type value="1" class="f-fl" style="margin-right:6px;">\n        <div class="f-fl" r-class={{\'js-disabled\':type!=1}}>\n            <span>前</span>\n            <input type="text" r-model={count|int} style="width:60px;box-sizing:border-box" ref="input" on-keydown="{this.keydown($event)}" disabled={type!=1}>\n            <select class="u-txt u-txt-h1 u-txt-s1" r-model=\'unit\' disabled={type!=1}>\n                <option value="second">秒</option>\n                <option value="minute">分</option>\n                <option value="hour">时</option>\n                <option value="day">天</option>\n                <option value="week">周</option>\n                <option value="month">月</option>\n                <option value="year">年</option>\n            </select>\n        </div>\n    </div>\n    <br/>\n    <div class="u-txtwrap" style="margin:6px 0 0 94px;">\n        <input type="radio" r-model=type value="2" class="f-fl" style="margin-right:6px;">\n        <div class="f-fl" r-class={{\'js-disabled\':type!=2}}>\n            <div class="u-txt u-txt-h1 show" {#if type==2}on-click={this.dateShow()}{/if}  style="width:179px;" r-class={{\'js-focus\':dateShow==true}} ref="datepickIpt">\n                <div class="date">{from} {periodHour1}:{periodMin1}:{periodSec1}</div>\n                <div class="u-icn u-icn-date2"></div>\n            </div>\n            <div class="date-trl" r-hide="dshow !== true" on-clickouter={[dshow=false]} style=" width: 231px; left: 22px;">\n                <div style="padding-top:30px;">\n                    <div class="wrap wrap1">\n                        <div class="box" ref="datepick1"></div>\n                        <div class="time" r-class={{\'f-dn\':dateType==1, \'js-disabled\':!periodType}}>\n                            <input type="checkbox" r-model="periodType" />\n                            <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" disabled={!periodType} on-blur={this.blur(\'periodHour1\')} r-model="periodHour1|hour" />:\n                            <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" disabled={!periodType} on-blur={this.blur(\'periodMin1\')}  r-model="periodMin1|time60" />:\n                            <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" disabled={!periodType} on-blur={this.blur(\'periodSec1\')}  r-model="periodSec1|time60" />\n                        </div>\n                    </div>\n                </div>\n                <div class="close u-icn u-icn-close" on-click={this.dateClose()}></div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div>\n    <label class="winlab">时间锚点：</label>\n    <div class="u-txtwrap">\n        <select class="u-txt u-txt-h1 u-txt-s1" r-model=\'anchor\'>\n            <option value=0>{anchorText0}</option>\n            {#if unit != \'second\' && !(type == 2 && periodType)}\n            <option value=1>{anchorText1}</option>\n            {/if}\n        </select>\n    </div>\n</div>\n');
I$(721, function(t, e, i, n, r, a, s, o, l) {
    var c;
    a._$$Layer = e._$klass();
    c = a._$$Layer._$extend(r._$$Abstract);
    c.__reset = function(t) {
        this.__super(t);
        this._$setEvent("oncontentready", t.oncontentready || this.__doInitContent._$bind(this));
        this.__nohack = !!t.nohack;
        this.__destroyable = !!t.destroyable;
        this._$setContent(t.content)
    };
    c.__destroy = function() {
        this._$dispatchEvent("onbeforerecycle");
        this.__super();
        this.__doHide();
        this._$setContent("");
        i._$style(this.__body, {
            top: "",
            left: ""
        })
    };
    c.__doInitContent = o;
    c.__doPositionAlign = o;
    c.__doHide = function() {
        i._$removeByEC(this.__body);
        if(this.__mask) {
            i._$unmask(this.__body);
            delete this.__mask
        }
    };
    c._$setContent = function(t) {
        if(this.__body && this.__ncnt && null != t) {
            t = t || "";
            n._$isString(t) ? this.__ncnt.innerHTML = t : this.__ncnt.appendChild(t);
            this._$dispatchEvent("oncontentready", this.__ncnt)
        }
    };
    c._$setPosition = function(t) {
        var e = t.top;
        if(null != e) {
            e += "px";
            i._$setStyle(this.__body, "top", e);
            i._$setStyle(this.__mask, "top", e)
        }
        var e = t.left;
        if(null != e) {
            e += "px";
            i._$setStyle(this.__body, "left", e);
            i._$setStyle(this.__mask, "left", e)
        }
    };
    c._$show = function() {
        i._$setStyle(this.__body, "visibility", "hidden");
        this.__super();
        this.__doPositionAlign();
        i._$setStyle(this.__body, "visibility", "");
        if(!this.__nohack) this.__mask = i._$mask(this.__body)
    };
    c._$hide = function() {
        this.__destroyable ? this._$recycle() : this.__doHide()
    };
    if(!0) t.copy(t.P("nej.ui"), a);
    return a
}, 129, 1, 3, 4, 142);
I$(718, function(t, e, i, n, r, a, s, o, l, c) {
    var u;
    s._$$LayerWrapper = e._$klass();
    u = s._$$LayerWrapper._$extend(r._$$Abstract);
    u.__reset = function(t) {
        this.__doInitLayerOptions();
        this.__super(this.__doFilterOptions(t));
        this.__lopt.onbeforerecycle = this._$recycle._$bind(this);
        this.__layer = this.__getLayerInstance()
    };
    u.__destroy = function() {
        this._$dispatchEvent("onbeforerecycle");
        this.__super();
        delete this.__lopt;
        i._$removeByEC(this.__body);
        var t = this.__layer;
        if(t) {
            delete this.__layer;
            t._$recycle()
        }
    };
    u.__getLayerInstance = l;
    u.__doFilterOptions = function(t) {
        var e = {};
        n._$loop(t, function(t, i) {
            this.__lopt.hasOwnProperty(i) ? this.__lopt[i] = t : e[i] = t
        }, this);
        return e
    };
    u.__doInitLayerOptions = function() {
        this.__lopt = {
            clazz: "",
            parent: null,
            content: this.__body,
            destroyable: !1,
            oncontentready: null,
            nohack: !1
        }
    };
    u._$show = function() {
        if(this.__layer) this.__layer._$show();
        this._$dispatchEvent("onaftershow")
    };
    u._$hide = function() {
        if(this.__layer) this.__layer._$hide()
    };
    if(!0) t.copy(t.P("nej.ui"), s);
    return s
}, 129, 1, 3, 4, 142, 721);
I$(616, function(t) {
    return t
}, 718);
I$(848, ".#<uispace>{position:absolute;background:#fff;z-index:200;}");
I$(732, function(t, e, i, n, r, a, s, o, l, c) {
    var u, d = i._$pushCSSText(a);
    s._$$Card = e._$klass();
    u = s._$$Card._$extend(r._$$Layer);
    u.__reset = function(t) {
        this.__super(t);
        this.__doInitDomEvent([
            [document, "click", this.__onDocClick._$bind(this)]
        ]);
        this.__nostop = !!t.nostop;
        this.__position = {
            top: t.top,
            left: t.left
        }
    };
    u.__destroy = function() {
        delete this.__pbox;
        delete this.__fbox;
        delete this.__align;
        delete this.__fitable;
        delete this.__byPoint;
        delete this.__position;
        this.__super()
    };
    u.__initXGui = function() {
        this.__seed_css = d
    };
    u.__initNode = function() {
        this.__super();
        this.__ncnt = this.__body;
        n._$addEvent(this.__body, "click", this.__doCheckStop._$bind(this))
    };
    u.__onDocClick = function(t) {
        if(2 != t.button) this._$hide()
    };
    u.__doCheckStop = function(t) {
        if(!this.__nostop) {
            n._$stopBubble(t);
            var e = n._$getElement(t);
            if("A" == e.tagName) n._$stopDefault(t)
        }
    };
    u.__setAlign = function() {
        var t = /\s+/i;
        return function(e) {
            e = (e || "").trim().toLowerCase().split(t);
            e[0] = e[0] || "bottom";
            e[1] = e[1] || "left";
            this.__align = e
        }
    }();
    u.__doCalPosition = function(t) {
        var e = {},
            n = this.__fbox,
            r = (i._$getPageBox(), this.__body.offsetWidth),
            a = this.__body.offsetHeight;
        switch(t[0]) {
            case "top":
                e.top = n.top - a;
                e.left = "right" == t[1] ? n.left + n.width - r : n.left;
                break;
            case "left":
                e.left = n.left - r;
                e.top = "bottom" == t[1] ? n.top + n.height - a : n.top;
                break;
            case "right":
                e.left = n.left + n.width;
                e.top = "bottom" == t[1] ? n.top + n.height - a : n.top;
                break;
            default:
                e.top = n.top + n.height;
                e.left = "right" == t[1] ? n.left + n.width - r : n.left
        }
        return e
    };
    u.__doPositionAlign = function() {
        if(this.__fitable)
            if(!this.__byPoint) {
                if(this.__fbox) this._$setPosition(this.__doCalPosition(this.__align))
            } else this._$setPosition(this.__pbox);
        else this._$setPosition(this.__position)
    };
    u.__doFindPosition = function(t, e, r) {
        e = e || o;
        var a = i._$getPageBox(),
            s = n._$pageX(r) + (e.left || 0),
            l = n._$pageY(r) + (e.top || 0),
            c = t.offsetWidth + (e.right || 0),
            u = t.offsetHeight + (e.bottom || 0),
            d = a.scrollWidth,
            h = a.scrollHeight,
            f = s + c,
            p = l + u;
        switch(this.__align[0]) {
            case "top":
                l = p > h ? l - u : l;
                if("right" == this.__align[1]) s = s - c < 0 ? 0 : s - c;
                else s = f > d ? d - c : s;
                break;
            case "left":
                s = f > d ? d - c : s;
                if("top" == this.__align[1]) l = p > h ? l - u : l;
                else l = l - u < 0 ? l : l - u;
                break;
            case "right":
                s = s - c < 0 ? 0 : s - c;
                if("top" == this.__align[1]) l = p > h ? l - u : l;
                else l = l - u < 0 ? l : l - u;
                break;
            default:
                l = l - u < 0 ? l : l - u;
                if("left" == this.__align[1]) s = f > d ? d - c : s;
                else s = s - c < 0 ? 0 : s - c
        }
        return {
            top: l,
            left: s
        }
    };
    u._$showByReference = function() {
        var t = function(t, e) {
            t = i._$get(t);
            if(t) {
                e = e || o;
                var n = i._$offset(t);
                return {
                    top: n.y - (e.top || 0),
                    left: n.x - (e.left || 0),
                    width: t.offsetWidth + (e.right || 0),
                    height: t.offsetHeight + (e.bottom || 0)
                }
            }
        };
        return function(e) {
            e = e || o;
            this.__byPoint = e.event;
            this.__setAlign(e.align);
            if(this.__byPoint) this.__pbox = this.__doFindPosition(e.target, e.delta, this.__byPoint);
            this.__fbox = t(e.target, e.delta);
            this.__fitable = !!e.fitable;
            this._$show()
        }
    }();
    if(!0) t.copy(t.P("nej.ui"), s);
    return s
}, 129, 1, 3, 6, 721, 848);
I$(637, function(t, e, i, n, r, a, s, o, l, c, u) {
    var d;
    o._$$CardWrapper = e._$klass();
    d = o._$$CardWrapper._$extend(a._$$LayerWrapper);
    o._$$CardWrapper._$attach = function() {
        var t = function(t, e, i, a, s) {
            var o, l = e + "-i",
                c = i.__cdpol,
                u = !!a.noclear,
                d = !!a.toggled;
            if(r._$isFunction(a.onbeforeclick)) {
                var h = a.noclear,
                    f = a.toggled;
                try {
                    a.onbeforeclick(a)
                } catch(t) {}
                u = !!a.noclear;
                d = !!a.toggled;
                a.toggled = f;
                a.noclear = h
            }
            var p = c[l];
            if(!d || !p) {
                n._$stop(t);
                if(!u) {
                    n._$dispatchEvent(document, "click");
                    o = i._$allocate(a)
                } else o = i._$getInstanceWithReset(a, !0);
                c[l] = o;
                o._$setEvent("onbeforerecycle", function() {
                    delete c[l]
                });
                o._$showByReference(s)
            } else p._$hide()
        };
        return function(e, a) {
            e = i._$get(e);
            if(e) {
                if(!this.__cdpol) this.__cdpol = {};
                var s = i._$id(e);
                if(!this.__cdpol[s]) {
                    a = r._$merge({}, a);
                    var o = r._$fetch({
                        align: "",
                        delta: null,
                        fitable: !1
                    }, a);
                    o.target = s;
                    a.destroyable = !0;
                    if(!a.fixed) {
                        o.fitable = !0;
                        a.parent = document.body
                    }
                    this.__cdpol[s] = [s, a.event || "click", t._$bind2(null, s, this, a, o)];
                    n._$addEvent.apply(n, this.__cdpol[s])
                }
            }
        }
    }();
    o._$$CardWrapper._$detach = function(t) {
        if(this.__cdpol) {
            var e = i._$id(t),
                r = this.__cdpol[e];
            if(r) {
                delete this.__cdpol[e];
                n._$delEvent.apply(n, r);
                var a = this.__cdpol[e + "-i"];
                if(a) a._$hide()
            }
        }
    };
    d.__getLayerInstance = function() {
        return s._$$Card._$allocate(this.__lopt)
    };
    d.__doInitLayerOptions = function() {
        this.__super();
        this.__lopt.top = null;
        this.__lopt.left = null;
        this.__lopt.nostop = !1
    };
    d._$showByReference = function(t) {
        if(this.__layer) this.__layer._$showByReference(t)
    };
    if(!0) t.copy(t.P("nej.ui"), o);
    return o
}, 129, 1, 3, 6, 4, 616, 732);
I$(532, function(t) {
    return t
}, 637);
I$(533, function(t, e, i, n, r, a, s, o, l, c) {
    var u;
    s._$$Calendar = e._$klass();
    u = s._$$Calendar._$extend(a._$$EventTarget);
    u.__reset = function(t) {
        this.__super(t);
        this.__doInitDomEvent([
            [t.mprv, "click", this.__onMonthChange._$bind(this, -1)],
            [t.mnxt, "click", this.__onMonthChange._$bind(this, 1)],
            [t.yprv, "click", this.__onYearChange._$bind(this, -1)],
            [t.ynxt, "click", this.__onYearChange._$bind(this, 1)],
            [t.wprv, "click", this.__onWeekChange._$bind(this, -1)],
            [t.wnxt, "click", this.__onWeekChange._$bind(this, 1)],
            [t.wprv, "click", this.__onDayChange._$bind(this, -1)],
            [t.wnxt, "click", this.__onDayChange._$bind(this, 1)]
        ]);
        this.__offset = t.offset || 0;
        this.__nyear = i._$get(t.year);
        this.__nmonth = i._$get(t.month);
        this.__selected = t.selected || "js-selected";
        this.__extended = t.extended || "js-extended";
        this.__disabled = t.disabled || "js-disabled";
        this.__doRangeCheck(t.range);
        this.__scopeClazz = t.maskClazz || "js-scope";
        this.__doScopeCheck(t.scope);
        this.__doDateListCheck(t.list);
        this._$setDate(t.date || new Date);
        this.__maskClazz = t.maskClazz || "js-mask";
        this.__maskDate = t.maskDate
    };
    u.__destroy = function() {
        this.__super();
        delete this.__list;
        delete this.__range;
        delete this.__scope;
        delete this.__nyear;
        delete this.__nmonth
    };
    u.__doRangeCheck = function(t) {
        this.__range = t || [];
        var e = this.__range[0];
        this.__range[0] = r._$isDate(e) ? +e : e || 0;
        var e = this.__range[1];
        this.__range[1] = r._$isDate(e) ? +e : e || 0
    };
    u.__doScopeCheck = function(t) {
        this.__scope = t || [];
        var e = this.__scope[0];
        this.__scope[0] = r._$isDate(e) ? +e : e || 0;
        var e = this.__scope[1];
        this.__scope[1] = r._$isDate(e) ? +e : e || 0
    };
    u.__doDateListCheck = function() {
        var t = function(t) {
            this.__list.push(t);
            this.__doInitDomEvent([
                [t, "click", this.__onDateChange._$bind(this)]
            ])
        };
        return function(e) {
            this.__list = [];
            r._$forEach(e, t, this)
        }
    }();
    u.__doSaveDateInfo = function() {
        var t = function(t, e) {
            var i = t[0],
                n = t[1];
            return e < i || !!n && e > n
        };
        return function(e, n, a, s) {
            i._$dataset(e, "y", n);
            i._$dataset(e, "m", a);
            i._$dataset(e, "d", s);
            e.innerText = s;
            e.title = n + "年" + a + "月" + s + "日";
            if(n == this.__copyYear && a == this.__copyMonth && s == this.__copyDate) i._$addClassName(e, this.__selected);
            else i._$delClassName(e, this.__selected);
            if(this.__maskDate) {
                var o = r._$var2date(this.__maskDate),
                    l = o.getFullYear();
                _maskMonth = o.getMonth() + 1;
                o = o.getDate();
                if(n == l && a == _maskMonth && s == o) i._$addClassName(e, this.__maskClazz);
                else i._$delClassName(e, this.__maskClazz)
            }
            if(a < 10) a = "0" + a;
            if(s < 10) s = "0" + s;
            t(this.__range, +new Date(n + "-" + a + "-" + s)) ? i._$addClassName(e, this.__disabled) : i._$delClassName(e, this.__disabled);
            t(this.__scope, +new Date(n, a - 1, s)) ? i._$delClassName(e, this.__scopeClazz) : i._$addClassName(e, this.__scopeClazz)
        }
    }();
    u.__doSyncDateShow = function() {
        var t = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],
            e = function(t) {
                return !(t % 400 && (t % 4 || !(t % 100)))
            },
            n = function(i, n) {
                return 2 == n && e(i) ? 29 : t[n - 1]
            };
        return function() {
            var t = this.__year,
                e = this.__month,
                r = new Date(t, e - 1, 1),
                a = (7 + r.getDay() - this.__offset) % 7,
                s = Math.min(this.__list.length, a + n(t, e));
            if(this.__nyear) this.__nyear.innerText = this.__year;
            if(this.__nmonth) this.__nmonth.innerText = this.__month;
            for(var o, l = a; l < s; l++) {
                o = this.__list[l];
                this.__doSaveDateInfo(o, t, e, l - a + 1);
                i._$delClassName(o, this.__extended)
            }
            if(a > 0)
                for(var o, r = new Date(t, e - 2 || 0, 1), c = r.getFullYear(), u = r.getMonth() + 1, d = n(c, u), l = a - 1; l >= 0; l--) {
                    o = this.__list[l];
                    this.__doSaveDateInfo(o, c, u, d--);
                    i._$addClassName(o, this.__extended)
                }
            var h = this.__list.length;
            if(s < h - 1)
                for(var r = new Date(t, e, 1), c = r.getFullYear(), u = r.getMonth() + 1, l = s, f = 1; l < h; l++) {
                    o = this.__list[l];
                    this.__doSaveDateInfo(o, c, u, f++);
                    i._$addClassName(o, this.__extended)
                }
        }
    }();
    u.__onYearChange = function(t) {
        this.__year += t;
        this.__doSyncDateShow();
        this._$dispatchEvent("onchange", this._$getDate())
    };
    u.__onMonthChange = function(t) {
        this.__month += t;
        if(this.__month < 1) {
            this.__year--;
            this.__month += 12
        }
        if(this.__month > 12) {
            this.__year += Math.floor(this.__month / 12);
            this.__month = (this.__month - 1) % 12 + 1
        }
        this.__doSyncDateShow();
        this._$dispatchEvent("onchange", this._$getDate())
    };
    u.__onDateChange = function(t) {
        var e = n._$getElement(t);
        if(!i._$hasClassName(e, this.__disabled)) {
            this.__copyYear = this.__year = parseInt(i._$dataset(e, "y"));
            this.__copyMonth = this.__month = parseInt(i._$dataset(e, "m"));
            this.__copyDate = this.__date = parseInt(i._$dataset(e, "d"));
            this.__doSyncDateShow();
            this._$dispatchEvent("onselect", this._$getDate())
        }
    };
    u.__onWeekChange = function(t) {};
    u.__onDayChange = function(t) {};
    u._$setDate = function(t) {
        t = r._$var2date(t);
        this.__copyYear = this.__year = t.getFullYear();
        this.__copyMonth = this.__month = t.getMonth() + 1;
        this.__copyDate = this.__date = t.getDate();
        this.__doSyncDateShow()
    };
    u._$getDate = function() {
        return new Date(this.__year, this.__month - 1, this.__date)
    };
    if(!0) t.copy(t.P("nej.ut"), s);
    return s
}, 129, 1, 3, 6, 4, 19);
I$(534, ".#<uispace>{width:210px;border:1px solid #aaa;font-size:14px;text-align:center;}\n.#<uispace> .zact{line-height:30px;overflow:hidden;zoom:1;}\n.#<uispace> .zact .zfl{float:left;}\n.#<uispace> .zact .zfr{float:right;}\n.#<uispace> .zact .zbtn{padding:0 5px;cursor:pointer;}\n.#<uispace> .zact .ztxt{margin-left:10px;}\n.#<uispace> .zday{table-layout:fixed;border-collapse:collapse;width:100%;}\n.#<uispace> .zday th{font-weight:normal;}\n.#<uispace> .zday td{position:relative;}\n.#<uispace> .zday a{display:block;height:22px;line-height:22px;color:#333;text-decoration:none;}\n.#<uispace> .zday a:hover{background:#eee;}\n.#<uispace> .zday a.js-extended{color:#aaa;}\n.#<uispace> .zday a.js-selected,\n.#<uispace> .zday a.js-selected:hover{background:#DAE4E7;}\n.#<uispace> .zday a.js-disabled,\n.#<uispace> .zday a.js-disabled:hover{background:#fff;color:#eee;cursor:default;}\n.#<uispace> .zday a.js-scope{background:#ebf1f4;}\n.#<uispace> .zday a.js-mask{}\n.#<uispace> .zday a.js-mask + i{position:absolute;width:4px;height:4px;background:#f00;bottom:0;left:14px;border-radius:50%;}");
I$(535, '<textarea name=\'jst\' id=\'#<seedDate>\'>\n\t<table class="zday">\n\t\t<tr>{list ["日","一","二","三","四","五","六"] as x}<th>${x}</th>{/list}</tr>\n\t\t{list 1..6 as x}\n\t\t<tr>{list 1..7 as y}<td><a href="javascript:void(0);" class="js-ztag"></a><i></i></td>{/list}</tr>\n\t\t{/list}\n    </table>\n</textarea>\n\n<textarea name=\'txt\' id=\'#<seedAction>\'>\n\t<div class="zact">\n\t\t<span class="zbtn zfl" title="上一年">&lt;&lt;</span>\n\t\t<span class="zbtn zfl" title="上一月">&lt;</span>\n\t\t<span class="zbtn zfr" title="下一年">&gt;&gt;</span>\n\t\t<span class="zbtn zfr" title="下一月">&gt;</span>\n\t\t<span class="ztxt"></span>年\n\t\t<span class="ztxt"></span>月\n\t</div>\n</textarea>');
I$(373, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f, p) {
    var _, m, g = i._$pushCSSText(c),
        v = o._$parseUITemplate(u),
        y = v["seedDate"],
        b = v["seedAction"];
    d._$$DatePick = e._$klass();
    _ = d._$$DatePick._$extend(r._$$Abstract);
    _.__init = function() {
        this.__copt = {
            onselect: this.__onDateChange._$bind(this)
        };
        this.__super()
    };
    _.__reset = function(t) {
        this.__super(t);
        this.__copt.range = t.range;
        this.__copt.maskDate = t.maskDate;
        this.__copt.scope = t.scope;
        this.__calendar = s._$$Calendar._$allocate(this.__copt);
        this._$setDate(t.date || new Date)
    };
    _.__destroy = function() {
        this.__super();
        delete this.__copt.range;
        var t = this.__calendar;
        if(t) {
            delete this.__calendar;
            t._$recycle()
        }
    };
    _.__initXGui = function() {
        this.__seed_css = g;
        this.__seed_html = m
    };
    _.__initNode = function() {
        this.__super();
        var t = i._$getChildren(this.__body);
        this.__copt.list = i._$getByClassName(t[1], "js-ztag");
        t = i._$getChildren(t[0]);
        this.__copt.yprv = t[0];
        this.__copt.mprv = t[1];
        this.__copt.ynxt = t[2];
        this.__copt.mnxt = t[3];
        this.__copt.year = t[4];
        this.__copt.month = t[5]
    };
    _.__initNodeTemplate = function() {
        m = o._$addNodeTemplate('<div class="' + g + ' zcard">' + o._$getTextTemplate(b) + l._$get(y) + "</div>");
        this.__seed_html = m
    };
    _.__onDateChange = function(t) {
        try {
            this._$dispatchEvent("onchange", t)
        } catch(t) {}
    };
    _._$setDate = function(t) {
        t = n._$var2date(t);
        this.__calendar._$setDate(t)
    };
    _._$getDate = function() {
        return this.__calendar._$getDate()
    };
    if(!0) t.copy(t.P("nej.ui"), d);
    return d
}, 129, 1, 3, 4, 142, 532, 533, 14, 15, 534, 535);
I$(524, function(t, e, i, n, r, a, s, o) {
    var l = (Regular.dom, i._$format(new Date, "yyyy-MM-dd")),
        c = {
            second: ["现在"],
            minute: ["当前", "前一分钟"],
            hour: ["当前", "前一小时"],
            day: ["今天", "昨天"],
            week: ["本周", "上周"],
            month: ["本月", "上月"],
            year: ["本年", "去年"]
        },
        u = s.extend({
            name: "dync-add-modal",
            $body: a,
            data: {
                autoClose: !1,
                title: "自定义时间段设置",
                left: -175,
                className: "m-modal-dynamicT"
            },
            init: function() {
                this.supr();
                var t = this.data;
                t.dshow = !1
            },
            config: function(t) {
                var e = this;
                this.supr(t);
                var t = this.data;
                t.anchor = 0;
                t.count = 7;
                t.unit = "day";
                t.from = l;
                t.type = 1;
                t.dateShow = !1;
                t.periodHour1 = t.periodMin1 = t.periodSec1 = "00";
                this.$on("confirm", function(t) {
                    if(t.accept) this.save();
                    else this.destroy()
                }.bind(this));
                this.$watch("unit", function() {
                    e.anchorText()
                });
                this.$watch("type", function() {
                    e.anchorText()
                });
                this.$watch("periodType", function() {
                    e.anchorText()
                })
            },
            show: function() {
                this.supr()
            },
            save: function() {
                var t = this.data,
                    e = this.validate();
                if(e) {
                    if(1 == t.type) var i = {
                        anchor: t.anchor,
                        count: t.count,
                        unit: t.unit
                    };
                    else {
                        t.from += " " + t.periodHour1 + ":" + t.periodMin1 + ":" + t.periodSec1;
                        var i = {
                            anchor: t.anchor,
                            from: t.from,
                            periodType: t.periodType
                        }
                    }
                    this.callback && this.callback(i);
                    this.destroy()
                }
            },
            validate: function() {
                var t = this.data;
                if(1 == t.type) {
                    var e;
                    if(!t.count) {
                        n.message("输入不能为空");
                        this.$refs.input.focus();
                        return !1
                    }
                    var i = new Date,
                        r = parseInt(i.getTime() / 864e5),
                        a = i.getFullYear() - 1970;
                    switch(t.unit) {
                        case "day":
                            e = r;
                            break;
                        case "week":
                            e = r / 7 - 1;
                            break;
                        case "month":
                            e = 12 * a + i.getMonth() - 1;
                            break;
                        case "year":
                            e = a
                    }
                    if(t.count > e) {
                        n.message("时间超限,请修改");
                        this.$refs.input.focus();
                        return !1
                    }
                } else if(1 == t.anchor && t.from == l) {
                    n.message("开始时间不能大于结束时间");
                    return !1
                }
                return !0
            },
            keydown: function(t) {
                if(13 === t.event.keyCode) this.save()
            },
            dateShow: function() {
                var t = this.data;
                t.dshow = !0;
                this.allocateDate()
            },
            allocateDate: function() {
                var e = this,
                    n = this.data;
                this.recycleDate();
                n.dateShow = !0;
                n.options = {
                    parent: this.$refs.datepick1,
                    clazz: "datepick datepick1",
                    date: n.from,
                    maskDate: l,
                    range: [0, new Date(l)],
                    onchange: function(t) {
                        n.from = i._$format(t, "yyyy-MM-dd");
                        e.$update()
                    }
                };
                n.datepick = o._$$DatePick._$allocate(n.options);
                var r = t._$offset(this.$refs.datepickIpt),
                    a = n.datepick.__body;
                a.style.top = r.y + this.$refs.datepickIpt.clientHeight + "px";
                a.style.left = r.x + "px";
                a.style.display = "block"
            },
            recycleDate: function() {
                var t = this.data;
                t.dateShow = !1;
                if(t.datepick) t.datepick._$recycle();
                this.$update()
            },
            dateClose: function() {
                this.data.dshow = !1;
                this.$update()
            },
            anchorText: function() {
                var t = this.data;
                if(1 == t.type) {
                    t.anchorText0 = c[t.unit][0];
                    t.anchorText1 = c[t.unit][1]
                } else if(t.periodType) t.anchorText0 = c["second"][0];
                else {
                    t.anchorText0 = c["day"][0];
                    t.anchorText1 = c["day"][1]
                }
            },
            blur: function(t) {
                var e = this.data;
                if(0 === e[t].length) e[t] = "00";
                if(1 === e[t].length) e[t] = "0" + e[t]
            }
        }).filter({
            int: {
                set: function(t) {
                    return new RegExp("^[0-9]*[1-9][0-9]*$").test(t) ? t : ""
                },
                get: function(t) {
                    return t
                }
            },
            time60: {
                set: function(t) {
                    var e = "00";
                    if(isNaN(t)) return e;
                    if(3 == t.length) t = t.substr(0, 2);
                    if(+t > 59 || +t < 0) t = e;
                    return t
                },
                get: function(t) {
                    return t
                }
            },
            hour: {
                set: function(t) {
                    var e = "00";
                    if(isNaN(t)) return e;
                    if(3 == t.length) t = t.substr(0, 2);
                    if(+t > 23 || +t < 0) t = e;
                    return t
                },
                get: function(t) {
                    return t
                }
            }
        });
    return u
}, 3, 6, 4, 7, 34, 632, 185, 373);
I$(360, function(t, e, i, n, r, a, s, o) {
    var l = Regular.dom,
        c = i._$format(new Date, "yyyy-MM-dd"),
        u = {
            second: "秒",
            minute: "分钟",
            hour: "小时",
            day: "天",
            week: "周",
            month: "月",
            year: "年"
        },
        d = {
            second: ["现在"],
            minute: ["当前分钟", "前一分钟"],
            hour: ["当前小时", "前一小时"],
            day: ["今天", "昨天"],
            week: ["本周", "上周"],
            month: ["本月", "上月"],
            year: ["本年", "去年"]
        },
        h = Regular.extend({
            name: "date-filter1",
            template: r,
            init: function() {
                var t = this;
                l.on(document, "click", function(i) {
                    var n = e._$getElement(i, "c:date-trl"),
                        r = e._$getElement(i, "c:show");
                    if(!n && !r) {
                        t.data.show = !1;
                        t.data.show1 = !1;
                        t.data.show2 = !1;
                        t.$update()
                    }
                })
            },
            config: function(t) {
                var e = t.date;
                t.show = !1;
                t.dynamics = [];
                if(n.isDateTime(t.pill)) t.dateType = 0;
                else t.dateType = 1;
                if(e) {
                    t.open = !0;
                    t.mode = e.mode;
                    if(e.mode == -1 && e.period) {
                        t.type = 1;
                        t.dateStart = e.period.minBound.substr(0, 10);
                        t.dateEnd = e.period.maxBound.substr(0, 10);
                        t.periodHour1 = e.period.minBound.substr(11, 2);
                        t.periodMin1 = e.period.minBound.substr(14, 2) || "00";
                        t.periodSec1 = e.period.minBound.substr(17, 2) || "00";
                        t.periodHour2 = e.period.maxBound.substr(11, 2);
                        t.periodMin2 = e.period.maxBound.substr(14, 2) || "00";
                        t.periodSec2 = e.period.maxBound.substr(17, 2) || "00";
                        t.periodType = e.period.periodType
                    } else {
                        t.type = 0;
                        t.dateStart = c;
                        t.dateEnd = c;
                        t.periodHour1 = "00";
                        t.periodMin1 = "00";
                        t.periodSec1 = "00";
                        t.periodHour2 = "24";
                        t.periodMin2 = "00";
                        t.periodSec2 = "00"
                    }
                    if(e.dynamics && e.dynamics.length) t.dynamics = e.dynamics = e.dynamics.filter(function(t) {
                        return void 0 != t.anchor
                    });
                    if(e.hour) {
                        t.hourType = !0;
                        t.eveHour1 = this.addZero(e.hour[0].minBound);
                        t.eveHour2 = this.addZero(e.hour[0].maxBound)
                    } else {
                        t.hourType = !1;
                        t.eveHour1 = "00";
                        t.eveHour2 = "24"
                    }
                } else {
                    t.open = !1;
                    t.dateStart = c;
                    t.dateEnd = c;
                    t.hourType = !1;
                    t.periodHour1 = "00";
                    t.periodMin1 = "00";
                    t.periodSec1 = "00";
                    t.periodHour2 = "24";
                    t.periodMin2 = "00";
                    t.periodSec2 = "00";
                    t.eveHour1 = "00";
                    t.eveHour2 = "24";
                    t.type = 0;
                    t.mode = 0
                }
                this.resetInfo(t.mode);
                this.$watch("!!open", function() {
                    var t = this.gatherData();
                    this.$emit("change", t)
                });
                this.$watch("!!hourType", function() {
                    var t = this.gatherData();
                    this.$emit("change", t)
                });
                this.$watch("mode", function() {
                    var t = this.gatherData();
                    this.$emit("change", t)
                });
                this.$watch("type", function(e) {
                    if(0 == e) {
                        if(t.mode == -1) t.mode = 0
                    } else t.mode = -1;
                    this.resetInfo(t.mode)
                });
                this.resetOtherInfo();
                this.$watch("show", function(e) {
                    if(e) t.dateheight = 400;
                    else t.dateheight = 194
                })
            },
            info: function() {
                var t = this.data,
                    e = "";
                if(!t.open) return e += "无";
                if(1 == t.type) {
                    if(!t.dateStart) return;
                    if(t.hourType) {
                        e += t.dateStart.replace(/-/g, "/") + " - " + t.dateEnd.replace(/-/g, "/") + "<br>";
                        e += "每日" + t.eveHour1 + ":00 - " + t.eveHour2 + ":00"
                    } else {
                        e += t.dateStart.replace(/-/g, "/") + "&nbsp;" + t.periodHour1 + ":" + t.periodMin1 + ":" + t.periodSec1 + "- <br>";
                        e += t.dateEnd.replace(/-/g, "/") + "&nbsp;" + t.periodHour2 + ":" + t.periodMin2 + ":" + t.periodSec2
                    }
                } else {
                    if(!t.dateStartNew) return;
                    if(t.hourType) {
                        e += t.dateStartNew.replace(/-/g, "/") + " - " + t.dateEndNew.replace(/-/g, "/") + "<br>";
                        e += "每日" + t.eveHour1 + ":00 - " + t.eveHour2 + ":00"
                    } else if(t.mode.from) {
                        e += t.dateStartNew.replace(/-/g, "/") + " - <br>";
                        e += t.dateEndNew.replace(/-/g, "/") + "&nbsp;" + t.periodHour2New + ":00::00"
                    } else {
                        var i = t.mode.unit;
                        switch(i) {
                            case "second":
                                e += "前" + t.mode.count + "秒";
                                break;
                            case "minute":
                                e += "前" + t.mode.count + "分钟";
                                if(1 == t.mode.anchor) e += "(时间锚点为前1分钟)";
                                break;
                            case "hour":
                                e += t.dateStartNew.replace(/-/g, "/") + "&nbsp;" + t.periodHour1New + ":00 - <br>";
                                e += 0 === t.mode.anchor ? "当前" : t.dateEndNew.replace(/-/g, "/") + "&nbsp;" + t.periodHour2New + ":00";
                                break;
                            default:
                                e += t.dateStartNew.replace(/-/g, "/") + "&nbsp;" + t.periodHour1New + ":00 - <br>";
                                e += t.dateEndNew.replace(/-/g, "/") + "&nbsp;" + t.periodHour2New + ":00"
                        }
                    }
                }
                return e
            },
            gatherData: function() {
                var t = this.data;
                if(t.open) {
                    var e = {
                        $type: "DateTimeFilter",
                        mode: t.mode
                    };
                    if(t.mode == -1) {
                        var i = t.dateStart + " " + t.periodHour1 + ":" + t.periodMin1 + ":" + t.periodSec1,
                            n = t.dateEnd + " " + t.periodHour2 + ":" + t.periodMin2 + ":" + t.periodSec2;
                        e.period = {
                            minBound: i,
                            maxBound: n,
                            periodType: t.periodType
                        }
                    }
                    if(t.dynamics && t.dynamics.length) e.dynamics = t.dynamics;
                    if(!t.periodType && !t.mode.periodType && t.hourType) e.hour = [{
                        minBound: parseInt(t.eveHour1),
                        maxBound: parseInt(t.eveHour2)
                    }];
                    return e
                }
            },
            dateShow: function() {
                var t = this.data;
                t.show = !0;
                this.allocateDate()
            },
            dynamic: function(t) {
                var e = this.data;
                e.mode = t;
                this.changeModeSelect(t);
                this.resetInfo(t);
                if(t == -1) e.type = 1;
                else e.type = 0
            },
            dyncAddModalShow: function() {
                new s({
                    callback: this.dyncAdd.bind(this)
                }).show()
            },
            dyncAdd: function(t) {
                var e = this.data;
                if(!e.dynamics.length || !e.dynamics.some(function(e) {
                        if(t.anchor == e.anchor && t.count == e.count && t.unit == e.unit && t.from == e.from) return !0
                    }.bind(this))) {
                    e.mode = t;
                    this.changeModeSelect(t);
                    e.dynamics.push(t);
                    this.resetInfo(e.mode);
                    this.$update()
                } else n.message("请勿重复添加相同的动态时间段！")
            },
            delDync: function(t) {
                var e = this.data;
                e.dynamics.splice(t, 1);
                this.dynamic(0)
            },
            changeModeSelect: function(t) {
                var e = this.data;
                if(e.dynamics && e.dynamics.length) e.dynamics.forEach(function(t) {
                    delete t.select
                });
                if("object" == typeof t) t.select = !0
            },
            getTitle: function(t) {
                var e = this.switchAnchor(t);
                if(!t.from) return e + "起前" + t.count + u[t.unit];
                else return t.from + "至" + e
            },
            getLab: function(t) {
                var e = this.switchAnchor(t);
                if(!t.from) return "前" + t.count + u[t.unit];
                else if(t.periodType) return t.from + "至" + e;
                else return t.from.split(" ")[0] + "至" + e
            },
            switchAnchor: function(t) {
                var e, i = t.anchor,
                    n = t.unit;
                if(!t.from) e = d[n][i];
                else e = 0 == i ? "今天" : "昨天";
                return e
            },
            resetInfo: function(t) {
                var e = this.data;
                e.periodHour1New = "00";
                e.periodHour2New = "24";
                switch(t) {
                    case -1:
                        this.changeModeSelect(t);
                        break;
                    case 0:
                        e.dateStartNew = c;
                        e.dateEndNew = c;
                        break;
                    case 1:
                        e.dateStartNew = this.getDynamicDate(24 * t * 60 * 60 * 1e3);
                        e.dateEndNew = this.getDynamicDate(24 * t * 60 * 60 * 1e3);
                        break;
                    case 2:
                        e.dateStartNew = (new Date).getFullYear() + "-01-01";
                        e.dateEndNew = c;
                        break;
                    case 3:
                        e.dateStartNew = (new Date).getFullYear() + "-" + this.addZero((new Date).getMonth() + 1) + "-01";
                        e.dateEndNew = c;
                        break;
                    case 4:
                        var n = new Date;
                        n.setDate(n.getDate() - (0 == n.getDay() ? 7 : n.getDay()) + 1);
                        e.dateStartNew = i._$format(n, "yyyy/MM/dd");
                        e.dateEndNew = c;
                        break;
                    default:
                        if(!t.from) {
                            var r = this.getMinDate(t);
                            e.dateStartNew = this.getTimeInTheDate(r);
                            var a = this.getAnchorDate(t);
                            if("hour" === t.unit) {
                                e.periodHour1New = r.getHours();
                                e.periodHour2New = a.getHours() + 1
                            }
                        } else {
                            e.dateStartNew = t.from;
                            var a = new Date(+new Date - 864e5 * t.anchor)
                        }
                        e.dateEndNew = this.getTimeInTheDate(a)
                }
            },
            getMinDate: function(t) {
                var e = (this.data, +t.anchor),
                    i = +t.count,
                    n = t.unit,
                    r = t.from;
                if(!r) switch(n) {
                    case "second":
                        return new Date((new Date).getTime() - 1e3 * i);
                    case "minute":
                        return new Date((new Date).getTime() - 60 * (i - 1 + e) * 1e3);
                    case "hour":
                        return new Date((new Date).getTime() - 60 * (i - 1 + e) * 60 * 1e3);
                    case "day":
                        return new Date((new Date).getTime() - 24 * (i - 1 + e) * 60 * 60 * 1e3);
                    case "week":
                        var a = new Date((new Date).getTime() - 7 * (i - 1 + e) * 24 * 60 * 60 * 1e3);
                        return this.getFirstDayInWeek(a);
                    case "month":
                        var s = new Date;
                        return new Date(s.getFullYear(), s.getMonth() - (i - 1 + e), 1);
                    case "year":
                        var s = new Date;
                        return new Date(s.getFullYear() - (i - 1 + e), 0, 1)
                }
            },
            getFirstDayInWeek: function(t) {
                var e = (t.getDay() + 6) % 7;
                return new Date(t.getTime() - 24 * e * 60 * 60 * 1e3)
            },
            getAnchorDate: function(t) {
                var e = (this.data, t.anchor),
                    i = t.unit;
                if(0 === e) return new Date;
                else switch(i) {
                    case "minute":
                        return new Date((new Date).getTime() - 60 * e * 1e3);
                    case "hour":
                        return new Date((new Date).getTime() - 60 * e * 60 * 1e3);
                    case "day":
                        return new Date((new Date).getTime() - 24 * e * 60 * 60 * 1e3);
                    case "week":
                        var n = this.getFirstDayInWeek(new Date);
                        return new Date(n.getFullYear(), n.getMonth(), n.getDate() - 1);
                    case "month":
                        var r = new Date;
                        return new Date(r.getFullYear(), r.getMonth(), 0);
                    case "year":
                        var r = new Date;
                        return new Date(r.getFullYear() - 1, 11, 31)
                }
            },
            getTimeInTheDate: function(t) {
                var e = t.getMonth() + 1 >= 10 ? "" + (t.getMonth() + 1) : "0" + (t.getMonth() + 1),
                    i = t.getDate() >= 10 ? "" + t.getDate() : "0" + t.getDate();
                return t.getFullYear() + "-" + e + "-" + i
            },
            addOneDay: function(t) {
                return new Date(t.getTime() + 864e5)
            },
            getDynamicDate: function(t) {
                var e = (this.data, new Date),
                    i = e.getTime() - t,
                    n = new Date;
                n.setTime(i);
                var r = n.getFullYear(),
                    a = n.getDate(),
                    s = n.getMonth() + 1;
                if(s < 10) s = "0" + s;
                if(a < 10) a = "0" + a;
                return r + "-" + s + "-" + a
            },
            onChange: function(t, e) {
                var r = this.data;
                r.mode = -1;
                var a = i._$format(e, "yyyy-MM-dd");
                if(1 == t) {
                    if(a > this.data.dateEnd) {
                        n.message("开始时间大于结束时间！", "warm");
                        return
                    }
                    r.dateStart = a
                } else if(2 == t) {
                    if(a < this.data.dateStart) {
                        n.message("开始时间大于结束时间！", "warm");
                        return
                    }
                    r.dateEnd = a
                }
                r.show = !0;
                this.allocateDate(t);
                this.$update();
                var e = this.gatherData();
                this.$emit("change", e, 0)
            },
            allocateDate: function() {
                var t = this,
                    e = this.data;
                if(e.datepick1) e.datepick1._$recycle();
                if(e.datepick2) e.datepick2._$recycle();
                e.options1 = {
                    parent: this.$refs.datepick1,
                    clazz: "datepick datepick1",
                    date: e.dateStart,
                    maskDate: c,
                    scope: [new Date(e.dateStart + " 00:00:00"), new Date(e.dateEnd + " 00:00:00")],
                    onchange: function(e) {
                        t.onChange(1, e)
                    }
                };
                e.options2 = {
                    parent: this.$refs.datepick2,
                    clazz: "datepick datepick2",
                    date: e.dateEnd,
                    maskDate: c,
                    scope: [new Date(e.dateStart + " 00:00:00"), new Date(e.dateEnd + " 00:00:00")],
                    onchange: function(e) {
                        t.onChange(2, e)
                    }
                };
                e.datepick1 = o._$$DatePick._$allocate(e.options1);
                e.datepick2 = o._$$DatePick._$allocate(e.options2)
            },
            dateClose: function() {
                this.data.show = !1;
                this.$update()
            },
            checkHour: function(t) {
                var e = this.data;
                switch(t) {
                    case 0:
                        e.periodHour1 = this.checkHour2(0, e.periodHour1);
                        break;
                    case 1:
                        e.periodHour2 = this.checkHour2(1, e.periodHour2);
                        break;
                    case 2:
                        e.eveHour1 = this.checkHour2(0, e.eveHour1);
                        break;
                    case 3:
                        e.eveHour2 = this.checkHour2(1, e.eveHour2)
                }
            },
            checkHour2: function(t, e) {
                if(0 == t) var i = "00";
                else if(1 == t) var i = "24";
                if(e.length > 2) e = i;
                var n = /^\d*$/;
                if(!n.test(e)) e = i;
                else {
                    if(e > 24) e = i;
                    if(0 == t && e > 23) e = i
                }
                return e
            },
            checkChangeHour: function(t) {
                var e = this.data;
                switch(t) {
                    case 0:
                        e.periodHour1 = this.checkChangeHour2(0, e.periodHour1);
                        if(e.dateStart == e.dateEnd)
                            if(e.periodHour1 > e.periodHour2) {
                                n.message("开始时间请勿大于等于结束时间！", "warm");
                                e.periodHour1 = "00"
                            } else if(e.periodHour1 == e.periodHour2 && e.periodMin1 > e.periodMin2) {
                                n.message("开始时间请勿大于等于结束时间！", "warm");
                                e.periodMin1 = "00"
                            } else if(e.periodHour1 == e.periodHour2 && e.periodMin1 == e.periodMin2 && e.periodSec1 == e.periodSec2) {
                                n.message("开始时间请勿大于等于结束时间！", "warm");
                                e.periodSec1 = "00"
                            }
                        break;
                    case 1:
                        e.periodHour2 = this.checkChangeHour2(1, e.periodHour2);
                        if(e.dateStart == e.dateEnd)
                            if(e.periodHour1 > e.periodHour2) {
                                n.message("开始时间请勿大于等于结束时间！", "warm");
                                e.periodHour2 = "24"
                            } else if(e.periodHour1 == e.periodHour2 && e.periodMin1 > e.periodMin2) {
                                n.message("开始时间请勿大于等于结束时间！", "warm");
                                e.periodMin2 = "59"
                            } else if(e.periodHour1 == e.periodHour2 && e.periodMin1 == e.periodMin2 && e.periodSec1 == e.periodSec2) {
                                n.message("开始时间请勿大于等于结束时间！", "warm");
                                e.periodSec2 = "59"
                            }
                        break;
                    case 2:
                        e.eveHour1 = this.checkChangeHour2(0, e.eveHour1);
                        if(e.eveHour1 == e.eveHour2) {
                            n.message("起止时间不能相同！", "warm");
                            e.eveHour1 = "00";
                            e.eveHour2 = "24"
                        }
                        break;
                    case 3:
                        e.eveHour2 = this.checkChangeHour2(1, e.eveHour2);
                        if(e.eveHour1 == e.eveHour2) {
                            n.message("起止时间不能相同！", "warm");
                            e.eveHour1 = "00";
                            e.eveHour2 = "24"
                        }
                }
                var i = this.gatherData();
                this.$emit("change", i)
            },
            checkChangeHour2: function(t, e) {
                if(0 == t) var i = "00";
                else if(1 == t) var i = "24";
                if("" == e.trim()) e = i;
                else if(1 == e.length) e = "0" + e;
                return e
            },
            addZero: function(t) {
                if(1 == t.toString().length) t = "0" + t;
                return t
            },
            resetOtherInfo: function() {
                var t = this.data;
                t.otherInfoShow = !1;
                var e = {};
                (t.filters || []).some(function(i) {
                    if(n.pid(i.pill) == n.pid(t.pill)) {
                        e = i.filter || {};
                        return !0
                    }
                });
                var i = t.otherInfo = {};
                if(!e.match && !e.top && !e.condition) t.otherInfoShow = !1;
                else {
                    t.otherInfoShow = !0;
                    i.match = a.infoMap2["match"](e) || "无";
                    i.top = a.infoMap2["top"](e) || "无";
                    i.condition = a.infoMap2["condition"](e) || "无"
                }
            },
            isHMS: function() {
                var t = this.data;
                if(t.mode && ("hour" === t.mode.unit || "minute" === t.mode.unit || "second" === t.mode.unit)) return !0;
                else return !1
            },
            isDailyDisabled: function() {
                var t = this.data;
                return this.isHMS() || t.mode === -1 && t.periodType || t.mode !== -1 && t.mode.periodType
            },
            blur: function(t) {
                var e = this.data;
                if(0 === e[t].length) e[t] = "00";
                if(1 === e[t].length) e[t] = "0" + e[t]
            }
        }).filter({
            time60: {
                set: function(t) {
                    var e = "00";
                    if(isNaN(t)) return e;
                    if(3 == t.length) t = t.substr(0, 2);
                    if(+t > 59 || +t < 0) t = e;
                    if(1 == t.length && t > 6) t = "0" + t;
                    return t
                },
                get: function(t) {
                    return t
                }
            }
        });
    return h
}, 3, 6, 4, 7, 523, 34, 524, 373);
I$(330, function(t, e, i, n, r) {
    var a = (Regular.dom, t._$format(new Date, "yyyy-MM-dd")),
        s = n.extend({
            name: "date-filter2",
            template: i,
            config: function(t) {
                this.supr(t);
                var t = this.data;
                t.show1 = !1;
                t.show2 = !1
            },
            dateShow: function(t) {
                var e = this.data;
                if(1 == t) {
                    e.show1 = !0;
                    e.show2 = !1
                } else if(2 == t) {
                    e.show1 = !1;
                    e.show2 = !0
                }
                this.allocateDate(t)
            },
            allocateDate: function(e) {
                var i = this,
                    n = this.data;
                if(1 == e) {
                    if(n.datepick1) n.datepick1._$recycle();
                    n.options1 = {
                        parent: this.$refs.datepick1,
                        clazz: "datepick datepick1",
                        date: n.dateStart,
                        maskDate: t._$format(new Date, "yyyy-MM-dd"),
                        scope: [new Date(n.dateStart + " 00:00:00"), new Date(n.dateEnd + " 00:00:00")],
                        onchange: function(t) {
                            i.onChange(1, t)
                        }
                    };
                    n.datepick1 = r._$$DatePick._$allocate(n.options1)
                } else if(2 == e) {
                    if(n.datepick2) n.datepick2._$recycle();
                    n.options2 = {
                        parent: this.$refs.datepick2,
                        clazz: "datepick datepick2",
                        date: n.dateEnd,
                        maskDate: t._$format(new Date, "yyyy-MM-dd"),
                        scope: [new Date(n.dateStart + " 00:00:00"), new Date(n.dateEnd + " 00:00:00")],
                        onchange: function(t) {
                            i.onChange(2, t)
                        }
                    };
                    n.datepick2 = r._$$DatePick._$allocate(n.options2)
                }
            },
            dateClose: function(t) {
                var e = this.data;
                if(1 == t) e.show1 = !1;
                else if(2 == t) e.show2 = !1;
                this.$update()
            },
            resetInfo: function(e) {
                var i = this.data;
                switch(e) {
                    case -1:
                        this.changeModeSelect(e);
                        break;
                    case 0:
                        i.dateStart = a;
                        i.dateEnd = a;
                        this.resetHMS();
                        break;
                    case 1:
                        i.dateStart = this.getDynamicDate(24 * e * 60 * 60 * 1e3);
                        i.dateEnd = this.getDynamicDate(24 * e * 60 * 60 * 1e3);
                        this.resetHMS();
                        break;
                    case 2:
                        i.dateStart = (new Date).getFullYear() + "-01-01";
                        i.dateEnd = a;
                        this.resetHMS();
                        break;
                    case 3:
                        i.dateStart = (new Date).getFullYear() + "-" + this.addZero((new Date).getMonth() + 1) + "-01";
                        i.dateEnd = a;
                        this.resetHMS();
                        break;
                    case 4:
                        var n = new Date;
                        n.setDate(n.getDate() - (0 == n.getDay() ? 7 : n.getDay()) + 1);
                        i.dateStart = t._$format(n, "yyyy/MM/dd");
                        i.dateEnd = a;
                        this.resetHMS();
                        break;
                    default:
                        if(!e.from) {
                            var r = this.getMinDate(e);
                            i.dateStart = this.getTimeInTheDate(r);
                            var s = this.getAnchorDate(e);
                            if("hour" === e.unit) {
                                i.periodHour1 = r.getHours();
                                i.periodHour2 = s.getHours() + 1
                            }
                        } else {
                            i.dateStart = e.from;
                            var s = new Date(+new Date - 864e5 * e.anchor)
                        }
                        i.dateEnd = this.getTimeInTheDate(s)
                }
            },
            resetHMS: function() {
                var t = this.data;
                t.periodHour1 = t.periodMin1 = t.periodMin2 = t.periodSec1 = t.periodSec2 = "00";
                t.periodHour2 = "24"
            },
            info: function() {
                var t = this.data,
                    e = "",
                    i = t.mode.unit;
                switch(i) {
                    case "second":
                        e += "前" + t.mode.count + "秒";
                        break;
                    case "minute":
                        e += "前" + t.mode.count + "分钟";
                        if(1 == t.mode.anchor) e += "(时间锚点为前1分钟)"
                }
                return e
            },
            isMS: function() {
                var t = this.data;
                if(t.mode && ("minute" === t.mode.unit || "second" === t.mode.unit)) return !0;
                else return !1
            },
            isDailyDisabled: function() {
                var t = this.data;
                return this.isHMS() || t.periodType1 || t.mode === -1 && t.periodType || t.mode !== -1 && t.mode.periodType
            }
        });
    return s
}, 4, 7, 487, 360, 373);
I$(486, '\n<div class="filter-item f-cb filter-item-rangedate" data-pid="{filterData.pid}" data-reportid="{filterData.reportId}" data-hover="filter-item" {#if filterData.source==\'global\'}id="global-filter-item-{filterData.pid}-{filterData.reportId}"{#else}id="filter-item-{filterData.pid}-{filterData.reportId}"{/if}>\n    <div class="u-item u-item-3">\n        <h6 class="handle" title="{filterData.ptext}" {#if filterData.edit}data-action="sel-toggle"{/if}>{filterData.ptext}</h6>\n        {#if filterData.edit}\n        <span class="sel" data-action="sel-toggle"></span>\n        <ul class="u-menu menu-filter-config">\n            <li class="filter-app-btn" style="border-top:0" data-action="filter-app" data-pid="{filterData.pid}">作为全局筛选器</li>\n        </ul>\n        {/if}\n    </div>\n    <div class="u-item u-item-3" {#if filterData.source==\'global\'}id="global-filter-item-inner-{filterData.pid}-{filterData.reportId}"{#else}id="filter-item-inner-{filterData.pid}-{filterData.reportId}"{/if}>\n\n        <div class="m-filteritem">\n            <div class="m-tdate f-cb">\n                <div class="line">\n                    <label><input type="checkbox" r-model="open"></label>\n                </div>\n                <div class="f-fl" r-class={{\'js-disabled\':open==false}}>\n                    <div class="line">\n                        <div class="u-txt u-txt-h1 show" {#if open==true}on-click={this.dateShow()}{/if}  {#if dateType==0}style="width:275px;margin:0"{#else}style="width:175px;margin:0"{/if} r-class={{\'js-focus\':show==true}}>\n                            <div class="date">{dateStart|format:\'yyyy/MM/dd\'}</div>\n                            <div class="hour" r-hide="dateType==1">\n                                <div class="f-fl">{periodHour1}</div>\n                                <div class="f-fl">:{periodMin1}</div>\n                                <div class="f-fl">:{periodSec1}</div>\n                            </div>\n                            <div class="ln">-</div>\n                            <div class="date">{dateEnd|format:\'yyyy/MM/dd\'}</div>\n                            <div class="hour" r-hide="dateType==1">\n                                <div class="f-fl">{periodHour2}</div>\n                                <div class="f-fl">:{periodMin2}</div>\n                                <div class="f-fl">:{periodSec2}</div>\n                            </div>\n                            <div class="u-icn u-icn-date2"></div>\n                        </div>\n                        <div class="date-trl" r-hide="show !== true">\n                            <div class="slot slot-2 f-cb">\n                                <div class="f-fl">动态时间段：</div>\n                                <div class="dync" r-class={{\'js-selected\':mode==0}} on-click={this.dynamic(0)}>今天</div>\n                                <div class="dync" r-class={{\'js-selected\':mode==1}} on-click={this.dynamic(1)}>昨天</div>\n                                <div class="dync" r-class={{\'js-selected\':mode==2}} on-click={this.dynamic(2)}>本年至今</div>\n                                <div class="dync" r-class={{\'js-selected\':mode==3}} on-click={this.dynamic(3)}>本月至今</div>\n                                <div class="dync" r-class={{\'js-selected\':mode==4}} on-click={this.dynamic(4)}>本周至今</div>\n                                {#if date && date.dynamics}\n                                {#list date.dynamics as item by item_index}\n                                <div class="dync dync-2" r-class={{\'js-selected\':item.select==true}} on-click={this.dynamic(item)} title="{this.getTitle(item)}">{this.getLab(item)}</div>\n                                {/list}\n                                {/if}\n                            </div>\n                            <div class="slot f-cb">\n                                <div class="f-fl">静态时间段：</div>\n                                <div class="dync" r-class={{\'js-selected\':mode==-1}} on-click={this.dynamic(-1)}>自定义</div>\n                            </div>\n                            <div class="f-cb" r-hide="mode !== -1">\n                                <div class="wrap wrap1">\n                                    <div class="box" ref="datepick1"></div>\n                                    <div class="time" r-class={{\'f-dn\':dateType==1}}>\n                                        <input type="checkbox" r-model="periodType" />\n                                        <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" disabled={!periodType} r-model="periodHour1" on-input={this.checkHour(0)} on-change={this.checkChangeHour(0)} disabled={dateType==1}/>:\n                                        <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" disabled={!periodType} r-model="periodMin1|time60" on-blur={this.blur(\'periodMin1\')} on-change={this.checkChangeHour(0)}  disabled={dateType==1}/>:\n                                        <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" disabled={!periodType} r-model="periodSec1|time60" on-blur={this.blur(\'periodSec1\')} on-change={this.checkChangeHour(0)} disabled={dateType==1}/>\n                                    </div>\n                                </div>\n                                <div class="wrap wrap2">\n                                    <div class="box" ref="datepick2"></div>\n                                    <div class="time" r-class={{\'f-dn\':dateType==1}}>\n                                        <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" disabled={!periodType} r-model="periodHour2" on-input={this.checkHour(1)} on-change={this.checkChangeHour(1)} disabled={dateType==1}/>:\n                                        <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" disabled={!periodType} r-model="periodMin2|time60" on-blur={this.blur(\'periodMin2\')} on-change={this.checkChangeHour(1)} disabled={dateType==1}/>:\n                                        <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" disabled={!periodType} r-model="periodSec2|time60" on-blur={this.blur(\'periodSec2\')} on-change={this.checkChangeHour(1)} disabled={dateType==1}/>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="slot f-cb" r-class={{\'f-dn\':dateType==1 || this.isDailyDisabled()}}>\n                                <div >\n                                    <div class="line"><label><input type="checkbox" r-model="hourType" disabled={open==false || dateType==1}/>每日:</label></div>\n                                    <div class="line" r-class={{\'js-disabled\':hourType == false}}>\n                                        <input type="text" r-model="eveHour1" class="u-txt u-txt-h1 u-txt-d1 ipt" on-input={this.checkHour(2)} on-change={this.checkChangeHour(2)} disabled={!hourType || open==false || dateType==1}/>\n                                        点&nbsp;&nbsp;&nbsp;&nbsp;至&nbsp;&nbsp;\n                                        <input type="text" r-model="eveHour2" class="u-txt u-txt-h1 u-txt-d1 ipt" on-input={this.checkHour(3)} on-change={this.checkChangeHour(3)} disabled={!hourType || open==false || dateType==1}/>\n                                        点\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="close u-icn u-icn-close" on-click={this.dateClose()}></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    </div>\n    <div class="opt f-fl">\n        <div class="u-icn u-icn-info" title="文本筛选内容" data-action="filter-info" data-pid="{filterData.pid}" r-hide={!otherInfoShow} on-click={otherInfoShow?false:true}></div>{#if filterData.edit}{#if filterData.source==\'global\'}<div class="u-icn u-icn-close" title="关闭" data-action="filter-close" data-pid="{filterData.pid}"></div>{#else}<div class="u-icn u-icn-min" title="最小化" data-action="filter-min" data-pid="{filterData.pid}"></div>{/if}{/if}\n        <ul class="u-menu menu-filter-info" {#if filterData.source==\'global\'}id="global-menu-filter-info-{filterData.pid}-{filterData.reportId}"{#else}id="menu-filter-info-{filterData.pid}-{filterData.reportId}"{/if}>\n            <div class="col-2 m-finfo m-finfo-1">\n                <div class="finfo_content">\n                    <li><span class="finfo_left">文本筛选:</span><span class="finfo_right f-ellipsis" r-html={otherInfo.match}></span></li>\n                    <li><span class="finfo_left">条件筛选:</span><span class="finfo_right f-ellipsis" r-html={otherInfo.condition}></span></li>\n                    <li><span class="finfo_left">高级筛选:</span><span class="finfo_right f-ellipsis" r-html={otherInfo.top}></span></li>\n                </div>\n            </div>\n        </ul>\n    </div>\n</div>\n');
I$(331, function(t, e, i, n) {
    var r = (Regular.dom, t._$format(new Date, "yyyy-MM-dd")),
        a = n.extend({
            name: "date-filter3",
            template: i,
            resetInfo: function(e) {
                var i = this.data;
                switch(e) {
                    case -1:
                        this.changeModeSelect(e);
                        break;
                    case 0:
                        i.dateStart = r;
                        i.dateEnd = r;
                        break;
                    case 1:
                        i.dateStart = this.getDynamicDate(24 * e * 60 * 60 * 1e3);
                        i.dateEnd = this.getDynamicDate(24 * e * 60 * 60 * 1e3);
                        break;
                    case 2:
                        i.dateStart = (new Date).getFullYear() + "-01-01";
                        i.dateEnd = r;
                        break;
                    case 3:
                        i.dateStart = (new Date).getFullYear() + "-" + this.addZero((new Date).getMonth() + 1) + "-01";
                        i.dateEnd = r;
                        break;
                    case 4:
                        var n = new Date;
                        n.setDate(n.getDate() - (0 == n.getDay() ? 7 : n.getDay()) + 1);
                        i.dateStart = t._$format(n, "yyyy/MM/dd");
                        i.dateEnd = r;
                        break;
                    default:
                        if(!e.from) {
                            var a = this.getMinDate(e);
                            i.dateStart = this.getTimeInTheDate(a);
                            var s = this.getAnchorDate(e);
                            if("hour" === e.unit) {
                                i.periodHour1 = a.getHours();
                                i.periodHour2 = s.getHours() + 1
                            }
                        } else {
                            i.dateStart = e.from;
                            var s = new Date(+new Date - 864e5 * e.anchor)
                        }
                        i.dateEnd = this.getTimeInTheDate(s)
                }
            }
        });
    return a
}, 4, 7, 486, 360);
I$(488, '<div class="filter-item" r-class={{\'z-show\':filterData.source==\'global\'}} r-class={{\'z-open\':filterData.open==true}} data-pid="{filterData.pid}" data-reportid="{filterData.reportId}" data-hover="filter-item" {#if filterData.source==\'global\'}id="global-filter-item-{filterData.pid}-{filterData.reportId}"{#else}id="filter-item-{filterData.pid}-{filterData.reportId}"{/if} data-affectmode={affectMode}>\n    {#if filterData.source==\'global\'}<div class="cut-line" data-drag="3" data-ftype="1" data-pid="{filterData.pid}" data-reportid="{filterData.reportId}"></div>{/if}\n    <ul class="u-menu menu-filter-info" {#if filterData.source==\'global\'}id="global-menu-filter-info-{filterData.pid}-{filterData.reportId}"{#else}id="menu-filter-info-{filterData.pid}-{filterData.reportId}"{/if}>\n        <div class="col-2 m-finfo m-finfo-1">\n            <div class="finfo_content">\n                <li><span class="finfo_left">文本筛选:</span><span class="finfo_right f-ellipsis" r-html={otherInfo.match}></span></li>\n                <li><span class="finfo_left">条件筛选:</span><span class="finfo_right f-ellipsis" r-html={otherInfo.condition}></span></li>\n                <li><span class="finfo_left">高级筛选:</span><span class="finfo_right f-ellipsis" r-html={otherInfo.top}></span></li>\n            </div>\n        </div>\n    </ul>\n    <ul class="u-menu menu-filter-config">\n        {#if mode==\'list\'}\n        <li r-class={{\'js-selected\':filterData.mode==\'listro\'}} on-click={this.changemode(\'listro\')}><span class="u-icn u-icn-gou"></span>列表单选</li>\n        <li r-class={{\'js-selected\':filterData.mode==\'dropro\'}} on-click={this.changemode(\'dropro\')}><span class="u-icn u-icn-gou"></span>下拉单选</li>\n        <li r-class={{\'js-selected\':filterData.mode==\'listck\'}} on-click={this.changemode(\'listck\')}><span class="u-icn u-icn-gou"></span>列表多选</li>\n        <li r-class={{\'js-selected\':filterData.mode==\'dropck\'}} on-click={this.changemode(\'dropck\')}><span class="u-icn u-icn-gou"></span>下拉多选</li>\n        {/if}\n        {#if filterData.edit}<li class="filter-app-btn" data-action="filter-app" data-pid="{filterData.pid}">作为全局筛选器</li>{/if}\n    </ul>\n    <div class="fttl f-ellipsis" data-action="filter-toggle" data-pid="{filterData.pid}">\n        <span class="wrd" title="{filterData.ptext}">{filterData.ptext}</span>\n        <div class="opt">\n            <div class="u-icn u-icn-info" title="文本筛选内容" data-action="filter-info" data-pid="{filterData.pid}" r-hide={!otherInfoShow} on-click={otherInfoShow?false:true}></div>{#if filterData.edit}<div class="u-icn u-icn-config" title="配置" data-action="filter-config" data-pid="{filterData.pid}"></div>{#if filterData.source==\'global\'}<div class="u-icn u-icn-close" title="关闭" data-action="filter-close" data-pid="{filterData.pid}"></div>{#else}<div class="u-icn u-icn-min" title="最小化" data-action="filter-min" data-pid="{filterData.pid}"></div>{/if}{/if}\n        </div>\n    </div>\n    <div class="filter-item-inner" {#if filterData.source==\'global\'}style="height:{filterData.filterHeight}px" id="global-filter-item-inner-{filterData.pid}-{filterData.reportId}" data-height="{filterData.filterHeight}"{#else}id="filter-item-inner-{filterData.pid}-{filterData.reportId}"{/if} ref="content">\n\n        {#if body || this.$body}\n            {#inc body || this.$body}\n        {/if}\n\n    </div>\n</div>\n\n');
I$(489, "<div class=\"switcher\" r-hide={filterData.mode == 'listro' || filterData.mode == 'listck'} on-click={this.changeListShow()}>\n    <h2 class=\"filter-select-info f-ellipsis\">\n        <span class=\"infoText\" ref='infoText'>{info}</span>\n    </h2>\n</div>\n\n<div class=\"m-tsearch m-tsearch-1\" r-class={{'m-tsearch-2':filterData.mode=='dropck' || filterData.mode=='dropro'}} r-hide={listShow==false} {#if filterData.mode == 'dropck' || filterData.mode == 'dropro'}on-clickouter={[listShow=false]}{/if}>\n\n    <div class='list sec' r-hide={mode!=='list'}>\n\n        <div class=\"m-search\"  >\n            <div class=\"search\" >\n                <span class='u-icn-search u-icn'></span>\n                <input placeholder=\"输入关键词搜索\"  ref='search' class='u-ipt-search'>\n                <i class=\"u-icn u-icn-close\" r-hide={!value} de-click={this.enter(false)} r-anim='on:enter;class:animated fadeIn;on:leave;class:animated fadeOut'></i>\n            </div>\n            <div class=\"u-filter u-filter-search\">\n                <ul class=\"list u-list\" >\n                    {#if value}\n                        {#if filterData.mode == 'dropck' || filterData.mode == 'listck'}<li r-hide={!suggests||!suggests.length} class='checkall' ><label> <input  disabled={pickMode === '3'} type=\"checkbox\" r-model={checkAllSuggests}> 全选</label> </li>{/if}\n                        {#list suggests as item by item_index}\n                        {#if filterData.mode == 'dropro' || filterData.mode == 'listro'}\n                        <li class={item_index === index? 'z-act': ''} de-click={this.focus(item_index)}><label><input type=\"radio\" name=\"dimension2\" checked={!!item.selected} on-change={this.toggle(item,$event)}> {item.text === null? 'null': item.text}</label></li>\n                        {#else}\n                        <li class={item_index === index? 'z-act': ''} de-click={this.focus(item_index)} ><label><input type=\"checkbox\" r-model={item.selected} disabled={pickMode === '3'}> {item.text === null? 'null': item.text}</label></li>\n                        {/if}\n                        {#else}\n                        <li class='z-act'>抱歉，没有符合的搜索结果</li>\n                        {/list}\n                    {/if}\n                </ul>\n            </div>\n        </div>\n\n        {#if filterData.mode == 'dropck' || filterData.mode == 'listck'}\n        <div class=\"u-select\">\n            <select r-model={pickMode}>\n                <option value='3' {#if pickMode=='3'}selected=selected{/if}>使用全部</option>\n                <option value='1' {#if pickMode=='1'}selected=selected{/if}>包含</option>\n                <option value='2' {#if pickMode=='2'}selected=selected{/if}>排除</option>\n            </select>\n        </div>\n        {/if}\n\n        {#if ready !== 1}\n        <div style='text-align:center;vertical-align:middle ;height: 280px'>\n            {#if ready === 0}\n            <span class='u-load' style='display:inline-block;vertical-align:middle;margin:8px'></span> <span>正在读取列表... </span>\n            {#elseif ready === -1}\n            <p style='line-height: 48px;'><span class=\"u-icn u-icn-warm u-error\"></span>加载列表错误</p>\n            {/if}\n        </div>\n        {#else}\n        {/if}\n        <ul class=\"result u-list result-list\" r-hide={ready!==1} style=\"height:{height}px;\" ref='list' data-mode={filterData.mode}>\n            <li class='placeholder' style=\"height: {preHeight}px\"></li>\n            {#list curList as item by item_index}\n            <li r-class={{'rmline':pickMode==2 && !!item.selected}}><label class=\"f-ellipsis\" title={item.text}>\n                {#if filterData.mode == 'dropro' || filterData.mode == 'listro'}\n                <input type=\"radio\"  checked={!!item.selected} on-change={this.toggle(item,$event)}>\n                {#else}\n                <input type=\"checkbox\" checked={!!item.selected} on-change={this.toggle(item,$event)} disabled={pickMode==='3'}>\n                {/if}\n                <b>{item.text === null? 'null': item.text} </b>\n            </label></li>\n            {/list}\n            <li class='placeholder' style=\"height: {nextHeight}px\"></li>\n        </ul>\n\n        {#if filterData.mode == 'dropck' || filterData.mode == 'listck'}\n        <p class='binfo'>\n        <div class='f-fr'>\n            <a class='clear' {#if pickMode!='3'}on-click={this.clearSelect()}{/if} href=\"javascript:;\">清空</a>\n        </div>\n        </p>\n        {/if}\n    </div>\n\n    <div class='sec manual' r-hide={mode!=='manual'}>\n        <div class=\"m-search m-search-manual\">\n            <div class=\"search\">\n                <input placeholder=\"输入要添加的字段并回车\" r-model={manualValue} on-enter={this.addField(manualValue)} style=\"padding:0 10px;\">\n                <span class='icns' r-hide={!manualValue} >\n                    <i class=\"u-icn u-icn-addfield\" on-click={this.addField(manualValue)} ></i>\n                    <i class=\"u-icn u-icn-close\" on-click={manualValue = ''}></i>\n                </span>\n            </div>\n        </div>\n        <ul class=\"result u-list \" r-class=\"'u-list-rm': exclude\" style=\"height: 280px;\">\n            {#list manualList as item by item_index}\n            <li><b>{item}</b><span class=\"u-icn u-icn-close\" title=\"删除\" on-click={manualList.splice(item_index,1)}></span></li>\n            {/list}\n        </ul>\n        <p class=\"binfo\">\n            <label><input type=\"checkbox\" r-model='exclude' disabled={!manualList.length}><b>排除</b></label>\n        </p>\n    </div>\n</div>");
I$(385, "<div class=\"m-search m-search-1\"  >\n  <div class=\"search\" >\n    <i class='u-icn u-icn-search'></i>\n    <input placeholder=\"输入关键词搜索\" ref='search' r-model='search' throttle=200 > \n  </div>\n  <div class=\"u-filter u-filter-search\" r-hide={!search} >\n    <ul class=\"list\">\n      {#list suggests as suggest}\n      <li class={suggest_index === index? 'z-act': ''} de-click={this.enter(suggest.text)} r-html={@(suggest.showText)}></li>\n      {#else}\n      <li class='z-act'>没有符合的搜索结果</li>\n      {/list}\n    </ul>\n  </div>\n</div>");
I$(175, function(t, e, i, n) {
    var r = {};
    r.Redux = {
        events: {
            $afterConfig: function() {
                this.data;
                if(this.mapStateToData) {
                    var t = n.subscribe(this.mapState.bind(this));
                    this.mapState();
                    this.$on("$destroy", t)
                }
            }
        },
        mapState: function() {
            var t = n.getState();
            if(t.current) {
                this.mapStateToData(t.current, this.data, t);
                setTimeout(function() {
                    this.$update()
                }.bind(this), 0)
            }
        }
    };
    r.DropComponent = {
        drop: function(i, n) {
            var r = (this.data, n.drag),
                a = r.drop,
                s = r.data.key,
                o = n.touchedInfo,
                l = (e.pinfos, t.pid(s)),
                c = {
                    pid: l,
                    target: i,
                    from: a && a.data.name,
                    pill: s
                };
            if(!o) {
                if(a === n.drop) return;
                c.injectAt = null;
                c.selfIndex = -1;
                return this.movePill(c)
            } else {
                if(o.selfIndex !== -1 && o.selfIndex === o.injectAt || o.selfIndex === o.injectAt + 1) return;
                c.injectAt = o.injectAt;
                c.selfIndex = o.selfIndex;
                this.movePill(c)
            }
        },
        movePill: function(t) {
            var e = t.pill;
            if("filters" === t.target && "filters" !== t.from && "Generated" !== e.produced) n.dispatch(function(n, r) {
                var a, s = {
                    data: {
                        title: '<span class="u-icn u-icn-set"></span> 筛选器',
                        pill: e
                    }
                };
                if("Continuous" === e.interpretation) a = new FilterModal2(s);
                else a = new FilterModal(s);
                a.toggle().$on("save", function(e) {
                    e.injectAt = t.injectAt;
                    i.saveFilter(e)
                })
            });
            else i.movePill(t)
        }
    };
    return r
}, 7, 136, 208, 35);
I$(195, function(t, e, i, n, r) {
    var a = Regular.extend({
        name: "head-search",
        template: e,
        config: function(e) {
            t.extend(e, {
                interval: 0
            })
        },
        init: function() {
            var t = this.$refs.search;
            this.data;
            if(t) Regular.dom.on(t, "keyup", function(t) {
                this.checkInput(t)
            }.bind(this))
        },
        mapStateToData: function(e, i) {
            i.fullsearchs = (e.dimension || []).map(t.ptext).concat((e.measure || []).map(function(t) {
                return t.alias
            })).sort()
        },
        createSuggestion: function(t) {
            var e = this.data;
            e.index = null;
            if(!t) return this.$update("suggests", []);
            var i = e.fullsearchs;
            e.suggests = i.map(function(e) {
                var i = e.toLowerCase().indexOf(t.toLowerCase()),
                    n = t.length,
                    r = e.substr(i, n);
                return {
                    index: i,
                    text: e,
                    showText: e.replace(r, "<b>" + r + "</b>")
                }
            }).filter(function(t) {
                return t.index !== -1
            }).sort(function(t, e) {
                return t.index - e.index
            });
            if(e.suggests.length) e.index = 0;
            this.$update()
        },
        checkInput: function(t) {
            var e = t.which,
                i = this.data,
                n = this.$refs.search;
            switch(e) {
                case 38:
                    this.nav(-1);
                    return !1;
                case 40:
                case 9:
                    this.nav(1);
                    t.preventDefault();
                    return !1;
                case 13:
                    setTimeout(function() {
                        if(null != i.index) var t = i.suggests[i.index];
                        this.enter(t && t.text || n.value)
                    }.bind(this));
                    return !1;
                case 192:
                    this.end();
                    return !1;
                default:
                    clearTimeout(this.tid);
                    this.tid = setTimeout(function() {
                        var e = t.target.value;
                        i.value = e;
                        this.createSuggestion(e)
                    }.bind(this), i.interval)
            }
        },
        nav: function(t) {
            var e = this.data,
                i = e.suggests.length;
            this.$refs.search;
            if(i) {
                if(null == e.index) e.index = t > 0 ? 0 : -1;
                else e.index = (e.index + t + i) % i;
                this.$update()
            }
        },
        enter: function(t) {
            this.$refs.search.value = "";
            this.data.search = "";
            this.data.suggests = [];
            this.$emit("confirm", t)
        },
        focus: function(t) {
            var e = this.$refs.search;
            if(e) e.focus();
            this.data.index = t
        },
        end: function() {
            this.$emit("confirm", !1)
        }
    }).implement(n.Redux);
    return a
}, 7, 385, 35, 175, 34);
I$(332, function(t, e, i, n, r, a) {
    var s = Regular.dom,
        o = r.cache,
        l = 26,
        s = Regular.dom,
        c = 0,
        u = {
            CONTAIN: "1",
            EXCLUDE: "2",
            ALL: "3"
        },
        d = a.extend({
            name: "dimension-filter",
            computed: {
                pickall: e.createAllComputed("fullsearchs", "selected"),
                checkAllSuggests: e.createAllComputed("suggests", "selected")
            },
            template: i,
            $body: n,
            config: function(t) {
                this.supr(t);
                t.mode = t.mode || "list";
                t.exclude = t.exclude || !1;
                var e = t.select,
                    i = t.pill,
                    n = t.unselect;
                t.type = this._getPillType(i);
                t.manualList = [];
                this.changeListShow2();
                this.resetOtherInfo();
                var r = this,
                    a = !0;
                if(Array.isArray(t.unselect)) {
                    t.pickMode = u.EXCLUDE;
                    t.filterFn = function(e) {
                        return t.unselect.indexOf(e) !== -1
                    }
                } else {
                    if(Array.isArray(t.select)) t.pickMode = u.CONTAIN;
                    else t.pickMode = u.ALL;
                    t.filterFn = function(e) {
                        return null == t.select || t.select.indexOf(e) !== -1
                    }
                }
                t.info = this.info();
                this.$watch("mode", function(i) {
                    if("list" === i);
                    else if("manual" === i)
                        if(a) t.manualList = e || n || [];
                    a = !1
                }, {});
                this.$watch(function() {
                    return t.manualList.map(function(t) {
                        return t
                    }).join(",")
                }, function() {
                    r.emitData()
                }, {
                    sync: !0
                });
                r.emitData();
                this.$watch("pickMode", function(t, e) {
                    this.handlePickMode(e !== u.ALL && t !== u.ALL);
                    r.emitData()
                }, {
                    sync: !0
                });
                var s = !0;
                t.fullsearchs = [];
                this.$watch(function() {
                    return t.fullsearchs.map(function(t) {
                        return t.selected
                    }).join(",")
                }, function() {
                    if(s);
                    else r.emitData();
                    s = !1
                }, {
                    sync: !0
                });
                this.$watch("exclude", function() {
                    r.emitData()
                }, {
                    sync: !0
                });
                this.$watch("listShow", function() {
                    if(t.listShow && !t.alreadySend) this._fetchList()
                })
            },
            init: function() {
                this.supr();
                var t = this.$refs.list;
                s.on(t, "scroll", this._checkList.bind(this));
                this.$watch("affectMode", this.handleAffectMode, {
                    sync: !0
                })
            },
            handleAffectMode: function(t) {
                var e = this.getDimensionFilters(t),
                    i = this.data.preAffect;
                if(!i || i.dimensionLength !== e.length) this._fetchList(e)
            },
            handlePickMode: function(t) {
                var e = this.data;
                if(e.fullsearchs && !t) e.fullsearchs.forEach(function(t) {
                    t.selected = e.pickMode === u.ALL
                })
            },
            getContextDimensions: function() {
                var t = this.data,
                    e = this.data.pill,
                    i = r.findLevel(t.levels, e.fieldId);
                return t.filters.filter(function(t) {
                    if("Dimension" !== t.pill.role) return !1;
                    if(t.filter && t.pill.fieldId !== e.fieldId) {
                        if(t.filter.priority >= 1) return !0;
                        if(i) {
                            var n = i.pathes.indexOf(t.pill.fieldId);
                            return ~n && n < i.index
                        }
                    }
                }).map(this._wrapDimenensionFilter)
            },
            getDimensionFilters: function(t) {
                var e = this.data;
                if(!t) return [];
                if(1 === t) return this.getContextDimensions();
                if(2 === t) {
                    var i = this.data.pill;
                    return e.filters.filter(function(t) {
                        return t.filter && t.pill.fieldId !== i.fieldId && "Dimension" === t.pill.role
                    }).map(this._wrapDimenensionFilter)
                }
            },
            _wrapDimenensionFilter: function(t) {
                var e = t.pill,
                    i = t.filter;
                return {
                    dimension: e,
                    filter: i,
                    priority: i.priority
                }
            },
            changeAffectMode: function() {
                var t = this.data,
                    e = t.affectMode;
                if("number" != typeof e) t.affectMode = 1;
                else t.affectMode = (t.affectMode + 1) % 3
            },
            _getPillType: function(t) {
                var i = t.dataType;
                if(e.isDate(i))
                    if(!/\-/.test(t.mapFunction)) i = "Whole";
                    else i = "DateTime";
                return i
            },
            _fetchList: function(i) {
                var n = this.data;
                n.alreadySend = !0;
                var a = n.qid = c++,
                    s = this;
                n.ready = 0;
                var n = this.data;
                if(n.affectMode) i = i || this.getDimensionFilters(n.affectMode);
                else i = [];
                n.preAffect = {
                    mode: n.affectMode,
                    dimensionLength: i.length
                };
                o._$getDimensionMembers({
                    desc: n.desc,
                    reportId: n.filterData.reportId,
                    dimensions: [r.fixPill(n.pill)],
                    filter: {
                        dimensions: i
                    },
                    flushTime: t._$dataset(t._$get("flushTime"), "t")
                }).then(function(t) {
                    if(a === n.qid) {
                        var i = t.result;
                        n.ready = !0;
                        if(200 == t.code) {
                            n.ready = 1;
                            n.fullsearchs = (i || []).map(function(t) {
                                var e = {
                                    text: t[0]
                                };
                                if(n.filterFn(e.text)) e.selected = !0;
                                return e
                            });
                            n.info = s.info();
                            s.resetListHeight()
                        } else if(750 === t.code) {
                            n.ready = -1;
                            e.messageDetail(t)
                        } else {
                            n.ready = -1;
                            e.message(t.message || "获取维度成员列表失败！")
                        }
                        s._optimismFullsearchs();
                        s.handlePickMode(!0);
                        s.$update()
                    }
                })["catch"](function(t) {
                    n.ready = -1;
                    n.fullsearchs = [];
                    s._optimismFullsearchs();
                    e.message("获取维度成员列表失败！", "err");
                    s.$update()
                })
            },
            createSuggestion: function(t) {
                var e = this.data;
                if(!t) return this.$update("suggests", []);
                t = t.toLowerCase();
                e.suggests = e.fullsearchs.filter(function(e) {
                    if(e.text) {
                        var i = String(e.text).toLowerCase();
                        if(~i.indexOf(t)) return !0;
                        else return
                    }
                }).slice(0, 100);
                this.$update()
            },
            toggle: function(t, e) {
                var i = this.data;
                if("listck" == i.filterData.mode || "dropck" == i.filterData.mode) t.selected = e.target.checked;
                else {
                    i.fullsearchs.forEach(function(t) {
                        delete t.selected
                    });
                    t.selected = e.target.checked
                }
            },
            enter: function(t) {
                var e = this.data;
                if(t !== !1) {
                    var i = e.index,
                        n = e.suggests[i];
                    if(n) {
                        n.selected = !n.selected;
                        this.$update()
                    }
                } else {
                    e.value = "";
                    this.$refs.search.value = e.value
                }
            },
            info: function() {
                var t = this.data;
                if("list" === t.mode)
                    if(t.pickMode === u.ALL) return "无";
                    else {
                        if(t.fullsearchs) var e = t.fullsearchs.reduce(function(t, e) {
                            if(e.selected) t++;
                            return t
                        }, 0);
                        else if("1" === t.pickMode) var e = t.select.length;
                        else var e = t.unselect.length;
                        return("1" === t.pickMode ? "选择" : "排除") + e + "项 "
                    }
                else {
                    var e = t.manualList.length;
                    if(this._validEmptyValue()) return "无";
                    else return "手动" + (t.exclude ? "排除" : "选择") + e + "项"
                }
            },
            gatherData: function() {
                var t = this.data,
                    i = t.fullsearchs,
                    n = {
                        mode: t.mode,
                        affectMode: t.affectMode,
                        desc: t.desc
                    };
                if("list" === t.mode) {
                    if(!i) return n;
                    i.length;
                    if(t.pickMode === u.ALL) return n;
                    n[t.pickMode === u.CONTAIN ? "select" : "unselect"] = i.reduce(function(t, e) {
                        if(e.selected) t.push(e.text);
                        return t
                    }, []);
                    t.select = n.select;
                    t.unselect = n.unselect;
                    return n
                } else if(t.exclude || this._validEmptyValue()) return e.extend(n, {
                    unselect: t.manualList,
                    exclude: t.exclude
                });
                else return e.extend(n, {
                        select: t.manualList,
                        exclude: t.exclude
                    })
            },
            emitData: function() {
                var t = this.data;
                t.info = this.info();
                var e = this.gatherData();
                this.$emit("change", e)
            },
            addField: function(t) {
                var i = this.data,
                    n = i.type;
                if(/Whole|Decimal/.test(n)) {
                    t = parseFloat(t, 10);
                    if(isNaN(t)) return e.message("不合法的数字输入", "err")
                }
                if(e.isDate(n)) {
                    t = new Date(t);
                    if("Invalid Date" == t) return e.message("不合法的日期输入", "err");
                    t = Regular.filter("format").get(t, "yyyy-MM-dd HH:mm:ss")
                }
                var r = i.manualList;
                if(t) {
                    t = "" + t;
                    if(r.indexOf(t) !== -1) return e.message(t + "已经存在", "err");
                    this.data.manualList.push(t);
                    this.data.manualValue = ""
                }
            },
            _checkList: function(t) {
                var e = this.$refs.list,
                    i = e.scrollTop,
                    n = this.data,
                    r = (n.fullsearchs, n.offset),
                    a = parseInt(i / l, 10);
                if(a > r + 8) n.offset = a;
                if(a < r + 5) {
                    n.offset -= 5;
                    if(n.offset > a) n.offset = a;
                    if(n.offset < 0) n.offset = 0
                }
                if(r !== n.offset) {
                    this._optimismFullsearchs();
                    this.$update()
                }
            },
            _optimismFullsearchs: function() {
                var t = this.data,
                    e = t.fullsearchs;
                if(e && e.length) {
                    var i = e.length,
                        n = t.offset || (t.offset = 0);
                    t.curList = e.slice(t.offset, t.offset + t.count);
                    t.preHeight = n * l;
                    if(i < n + 10) t.nextHeight = 0;
                    t.nextHeight = (i - n - 20) * l;
                    if(t.nextHeight < 0) t.nextHeight = 0
                } else {
                    t.curList = [];
                    t.preHeight = 0;
                    t.nextHeight = 0
                }
            },
            _validEmptyValue: function() {
                var t = this.data;
                return t.ignoreEmpty && !t.exclude && (!t.manualList || 0 === t.manualList.length)
            },
            clearSelect: function() {
                var t = this.data;
                t.fullsearchs.forEach(function(t) {
                    delete t.selected
                })
            },
            changemode: function(t) {
                var e = this,
                    i = this.data;
                i.filterData.mode = t;
                if("listro" == t || "dropro" == t) i.pickMode = u.CONTAIN;
                this.changeListShow2();
                setTimeout(function() {
                    if("listro" == t || "dropro" == t) {
                        i.fullsearchs.forEach(function(t) {
                            delete t.selected
                        });
                        if(i.fullsearchs.length) i.fullsearchs[0].selected = !0
                    }
                    e.$update()
                }, 0);
                this.resetListHeight();
                this.$update()
            },
            resetListHeight: function() {
                var t = this.data;
                if(this.$refs.content) {
                    var e = t.filterData.mode,
                        i = this.$refs.content.style.height,
                        n = /\d+/,
                        r = i.match(n)[0];
                    this.$refs.list;
                    if("dropck" == e) t.height = r - 140;
                    else if("listck" == e) t.height = r - 110;
                    else if("dropro" == e) t.height = r - 90;
                    else if("listro" == e) t.height = r - 60
                }
            },
            changeListShow: function() {
                var t = this.data;
                t.listShow = t.listShow ? !1 : !0
            },
            changeListShow2: function() {
                var t = this.data;
                if("listck" == t.filterData.mode || "listro" == t.filterData.mode) t.listShow = !0;
                else t.listShow = !1
            },
            _$reFilter: function() {
                var t = this.data;
                if(t.affectMode > 0) this._fetchList()
            },
            hiddenInfo: function() {
                var e = this.data,
                    i = t._$get("chart-item-" + e.filterData.reportId);
                if(i) {
                    var n = t._$getByClassName(i, "filter-item");
                    n.forEach(function(e, i) {
                        var n = +t._$dataset(e, "affectmode");
                        if(n > 0) {
                            var r = t._$getByClassName(e, "filter-select-info")[0];
                            if(r) {
                                var a = t._$getByClassName(r, "infoText")[0];
                                if(a) t._$setStyle(a, "display", "none")
                            }
                        }
                    })
                }
                this.$refs.infoText.style.display = "block"
            },
            resetOtherInfo: function() {
                var t = this.data;
                t.otherInfoShow = !1;
                var i = {};
                t.filters.some(function(n) {
                    if(e.pid(n.pill) == e.pid(t.pill)) {
                        i = n.filter || {};
                        return !0
                    }
                });
                var n = t.otherInfo = {};
                if(!i.match && !i.top && !i.condition) t.otherInfoShow = !1;
                else {
                    t.otherInfoShow = !0;
                    n.match = r.infoMap2["match"](i) || "无";
                    n.top = r.infoMap2["top"](i) || "无";
                    n.condition = r.infoMap2["condition"](i) || "无"
                }
            }
        });
    return d
}, 3, 7, 488, 489, 34, 195);
I$(492, '<div class="filter-item f-cb filter-item-dim" data-pid="{filterData.pid}" data-reportid="{filterData.reportId}" data-hover="filter-item" {#if filterData.source==\'global\'}id="global-filter-item-{filterData.pid}-{filterData.reportId}"{#else}id="filter-item-{filterData.pid}-{filterData.reportId}"{/if} data-affectmode={affectMode}>\n    <div class="u-item u-item-3">\n        <h6 class="handle" title="{filterData.ptext}" {#if filterData.edit}data-action="sel-toggle"{/if}>{filterData.ptext}</h6>\n        {#if filterData.edit}\n        <span class="sel" data-action="sel-toggle"></span>\n        <ul class="u-menu menu-filter-config">\n            {#if mode==\'list\'}\n            <li r-class={{\'js-selected\':filterData.mode==\'dropro\'}} on-click={this.changemode(\'dropro\')}><span class="u-icn u-icn-gou"></span>下拉单选</li>\n            <li r-class={{\'js-selected\':filterData.mode==\'dropck\'}} on-click={this.changemode(\'dropck\')}><span class="u-icn u-icn-gou"></span>下拉多选</li>\n            {/if}\n            <li class="filter-app-btn" style="border-top:0" data-action="filter-app" data-pid="{filterData.pid}">作为全局筛选器</li>\n        </ul>\n        {/if}\n    </div>\n    <div class="u-item u-item-3 " {#if filterData.source==\'global\'}id="global-filter-item-inner-{filterData.pid}-{filterData.reportId}"{#else}id="filter-item-inner-{filterData.pid}-{filterData.reportId}"{/if}>\n\n        {#if body || this.$body}\n            {#inc body || this.$body}\n        {/if}\n\n    </div>\n    <div class="opt f-fl">\n        <div class="u-icn u-icn-info" title="文本筛选内容" data-action="filter-info" data-pid="{filterData.pid}" r-hide={!otherInfoShow} on-click={otherInfoShow?false:true}></div>{#if filterData.edit}{#if filterData.source==\'global\'}<div class="u-icn u-icn-close" title="关闭" data-action="filter-close" data-pid="{filterData.pid}"></div>{#else}<div class="u-icn u-icn-min" title="最小化" data-action="filter-min" data-pid="{filterData.pid}"></div>{/if}{/if}\n        <ul class="u-menu menu-filter-info" {#if filterData.source==\'global\'}id="global-menu-filter-info-{filterData.pid}-{filterData.reportId}"{#else}id="menu-filter-info-{filterData.pid}-{filterData.reportId}"{/if}>\n            <div class="col-2 m-finfo m-finfo-1">\n                <div class="finfo_content">\n                    <li><span class="finfo_left">文本筛选:</span><span class="finfo_right f-ellipsis" r-html={otherInfo.match}></span></li>\n                    <li><span class="finfo_left">条件筛选:</span><span class="finfo_right f-ellipsis" r-html={otherInfo.condition}></span></li>\n                    <li><span class="finfo_left">高级筛选:</span><span class="finfo_right f-ellipsis" r-html={otherInfo.top}></span></li>\n                </div>\n            </div>\n        </ul>\n    </div>\n</div>\n\n');
I$(333, function(t, e, i, n) {
    var r = n.extend({
        name: "dimension-filter2",
        template: e,
        $body: i,
        config: function(t) {
            this.supr(t)
        }
    });
    return r
}, 7, 492, 489, 332);
I$(490, '<div class="filter-item" r-class={{\'z-show\':filterData.source==\'global\'}} r-class={{\'z-open\':filterData.open==true}} data-pid="{filterData.pid}" data-reportid="{filterData.reportId}" data-hover="filter-item" {#if filterData.source==\'global\'}id="global-filter-item-{filterData.pid}-{filterData.reportId}"{#else}id="filter-item-{filterData.pid}-{filterData.reportId}"{/if}>\n    {#if filterData.source==\'global\'}<div class="cut-line" data-drag="3" data-ftype="1" data-pid="{filterData.pid}" data-reportid="{filterData.reportId}"></div>{/if}\n    <ul class="u-menu menu-filter-config">\n        <li r-class={{\'js-selected\':filterData.mode==\'listro\'}} on-click={this.changemode(\'listro\')}><span class="u-icn u-icn-gou"></span>列表单选</li>\n        <li r-class={{\'js-selected\':filterData.mode==\'dropro\'}} on-click={this.changemode(\'dropro\')}><span class="u-icn u-icn-gou"></span>下拉单选</li>\n        <li r-class={{\'js-selected\':filterData.mode==\'listck\'}} on-click={this.changemode(\'listck\')}><span class="u-icn u-icn-gou"></span>列表多选</li>\n        <li r-class={{\'js-selected\':filterData.mode==\'dropck\'}} on-click={this.changemode(\'dropck\')}><span class="u-icn u-icn-gou"></span>下拉多选</li>\n        {#if filterData.edit}<li class="filter-app-btn" data-action="filter-app" data-pid="{filterData.pid}">作为全局筛选器</li>{/if}\n    </ul>\n    <div class="fttl f-ellipsis" data-action="filter-toggle" data-pid="{filterData.pid}">\n        <span class="wrd" title="{filterData.ptext}">{filterData.ptext}</span>\n        <div class="opt">\n            {#if filterData.edit}<div class="u-icn u-icn-config" title="配置" data-action="filter-config" data-pid="{filterData.pid}"></div>{#if filterData.source==\'global\'}<div class="u-icn u-icn-close" title="关闭" data-action="filter-close" data-pid="{filterData.pid}"></div>{#else}<div class="u-icn u-icn-min" title="最小化" data-action="filter-min" data-pid="{filterData.pid}"></div>{/if}{/if}\n        </div>\n    </div>\n    <div class="filter-item-inner" {#if filterData.source==\'global\'}style="height:{filterData.filterHeight}px" id="global-filter-item-inner-{filterData.pid}-{filterData.reportId}" data-height="{filterData.filterHeight}"{#else}id="filter-item-inner-{filterData.pid}-{filterData.reportId}"{/if} ref="content">\n\n        {#if body || this.$body}\n        {#inc body || this.$body}\n        {/if}\n\n    </div>\n</div>\n\n');
I$(491, "<div class=\"switcher\" r-hide={filterData.mode == 'listro' || filterData.mode == 'listck'} on-click={this.changeListShow()}>\n    <h2 class=\"filter-select-info f-ellipsis\">\n        <span class=\"f-fwb\">{selectedLength}</span>项已选\n    </h2>\n</div>\n\n<div class=\"m-tsearch m-tsearch-1\" r-class={{'m-tsearch-2':filterData.mode=='dropck' || filterData.mode=='dropro'}} r-hide={listShow==false} {#if filterData.mode == 'dropck' || filterData.mode == 'dropro'}on-clickouter={[listShow=false]}{/if}>\n\n    <div class='list sec'>\n\n        <div class=\"m-search\"  >\n            <div class=\"search\" >\n                <span class='u-icn-search u-icn'></span>\n                <input placeholder=\"输入关键词搜索\"  ref='search' class='u-ipt-search'>\n                <i class=\"u-icn u-icn-close\" r-hide={!value} de-click={this.enter(false)} r-anim='on:enter;class:animated fadeIn;on:leave;class:animated fadeOut'></i>\n            </div>\n            <div class=\"u-filter u-filter-search\">\n                <ul class=\"list u-list\" >\n                    {#if value}\n                    {#list suggests as item by item_index}\n                    {#if filterData.mode == 'dropro' || filterData.mode == 'listro'}\n                    <li class={item_index === index? 'z-act': ''} de-click={this.focus(item_index)}><label><input type=\"radio\" name=\"dimension2\" checked={!!item.selected} on-change={this.toggle(item,$event)}> {item.text === null? 'null': item.text}</label></li>\n                    {#else}\n                    <li class={item_index === index? 'z-act': ''} de-click={this.focus(item_index)} ><label><input type=\"checkbox\" r-model={item.selected} {#if exclude=='all'}disabled=disabled{/if}> {item.text === null? 'null': item.text}</label></li>\n                    {/if}\n                    {#else}\n                    <li class='z-act'>抱歉，没有符合的搜索结果</li>\n                    {/list}\n                    {/if}\n                </ul>\n            </div>\n        </div>\n\n        <ul class=\"result u-list result-list\" style=\"height:{height}px;\" ref='list' data-mode={filterData.mode}>\n            {#if filterData.mode == 'dropck' || filterData.mode == 'listck'}\n            <li><label><input type=\"checkbox\" r-model='pickall'>\n                <b>全选</b>\n            </label></li>\n            {/if}\n            {#list measures as item by item_index}\n            <li><label class=\"f-ellipsis\" title={item.text}>\n                {#if filterData.mode == 'dropro' || filterData.mode == 'listro'}\n                <input type=\"radio\" name=\"dimension\" checked={!!item.selected} on-change={this.toggle(item,$event)}>\n                {#else}\n                <input type=\"checkbox\" checked={!!item.selected} on-change={this.toggle(item,$event)}>\n                {/if}\n                <b>{item.text === null? 'null': item.text} </b>\n            </label></li>\n            {/list}\n        </ul>\n\n    </div>\n</div>");
I$(334, function(t, e, i, n, r) {
    var a = r.extend({
        name: "mname-filter",
        computed: {
            pickall: t.createAllComputed("measures", "selected")
        },
        template: e,
        $body: i,
        config: function(t) {
            var e = this;
            this.supr(t);
            var t = this.data;
            this.changeListShow2();
            t.selectedLength = this.getSelectedLength();
            setTimeout(function() {
                e.resetListHeight()
            }, 0);
            this.$watch(function() {
                return t.measures.map(function(t) {
                    return t.selected
                }).join(",")
            }, function() {
                t.selectedLength = this.getSelectedLength();
                var i = e.gatherData();
                e.$emit("change", i)
            }, {
                sync: !0
            })
        },
        toggle: function(t, e) {
            var i = this.data;
            if("listck" == i.filterData.mode || "dropck" == i.filterData.mode) t.selected = e.target.checked;
            else {
                i.measures.forEach(function(t) {
                    delete t.selected
                });
                t.selected = e.target.checked
            }
        },
        getSelectedLength: function() {
            var t = this.data,
                e = t.measures.reduce(function(t, e) {
                    if(e.selected) t++;
                    return t
                }, 0);
            return e
        },
        gatherData: function() {
            var t = this.data,
                e = [];
            t.measures.forEach(function(t) {
                if(t.selected) e.push(t.pill)
            });
            return {
                measures: e
            }
        },
        changemode: function(t) {
            var e = this.data;
            e.filterData.mode = t;
            this.changeListShow2();
            if("listro" == t || "dropro" == t) {
                e.measures.forEach(function(t) {
                    delete t.selected
                });
                if(e.measures.length) e.measures[0].selected = !0
            }
            this.resetListHeight();
            this.$update()
        },
        resetListHeight: function() {
            var t = this.data;
            if(this.$refs.content) {
                var e = t.filterData.mode,
                    i = this.$refs.content.offsetHeight;
                this.$refs.list;
                if("dropck" == e) t.height = i - 90;
                else if("listck" == e) t.height = i - 60;
                else if("dropro" == e) t.height = i - 90;
                else if("listro" == e) t.height = i - 60
            }
        },
        changeListShow: function() {
            var t = this.data;
            t.listShow = t.listShow ? !1 : !0
        },
        changeListShow2: function() {
            var t = this.data;
            if("listck" == t.filterData.mode || "listro" == t.filterData.mode) t.listShow = !0;
            else t.listShow = !1
        },
        enter: function(t) {
            var e = this.data;
            if(t !== !1) {
                var i = e.index,
                    n = e.suggests[i];
                if(n) {
                    n.selected = !n.selected;
                    this.$update()
                }
            } else {
                e.value = "";
                this.$refs.search.value = e.value
            }
        },
        createSuggestion: function(t) {
            var e = this.data;
            if(!t) return this.$update("suggests", []);
            e.suggests = e.measures.filter(function(e) {
                if(e.text && ~e.text.indexOf(t)) return !0
            }).slice(0, 100);
            this.$update()
        }
    });
    return a
}, 7, 490, 491, 34, 195);
I$(493, '<div class="filter-item f-cb filter-item-dim" data-pid="{filterData.pid}" data-reportid="{filterData.reportId}" data-hover="filter-item" {#if filterData.source==\'global\'}id="global-filter-item-{filterData.pid}-{filterData.reportId}"{#else}id="filter-item-{filterData.pid}-{filterData.reportId}"{/if}>\n    <div class="u-item u-item-3">\n        <h6 class="handle" title="{filterData.ptext}" {#if filterData.edit}data-action="sel-toggle"{/if}>{filterData.ptext}</h6>\n        {#if filterData.edit}\n        <span class="sel" data-action="sel-toggle"></span>\n        <ul class="u-menu menu-filter-config">\n            <li r-class={{\'js-selected\':filterData.mode==\'dropro\'}} on-click={this.changemode(\'dropro\')}><span class="u-icn u-icn-gou"></span>下拉单选</li>\n            <li r-class={{\'js-selected\':filterData.mode==\'dropck\'}} on-click={this.changemode(\'dropck\')}><span class="u-icn u-icn-gou"></span>下拉多选</li>\n            <li class="filter-app-btn" style="border-top:0" data-action="filter-app" data-pid="{filterData.pid}">作为全局筛选器</li>\n        </ul>\n        {/if}\n    </div>\n    <div class="u-item u-item-3 " {#if filterData.source==\'global\'}id="global-filter-item-inner-{filterData.pid}-{filterData.reportId}"{#else}id="filter-item-inner-{filterData.pid}-{filterData.reportId}"{/if}>\n\n        {#if body || this.$body}\n        {#inc body || this.$body}\n        {/if}\n\n    </div>\n    <div class="opt f-fl">\n        {#if filterData.edit}{#if filterData.source==\'global\'}<div class="u-icn u-icn-close" title="关闭" data-action="filter-close" data-pid="{filterData.pid}"></div>{#else}<div class="u-icn u-icn-min" title="最小化" data-action="filter-min" data-pid="{filterData.pid}"></div>{/if}{/if}\n    </div>\n</div>\n\n');
I$(335, function(t, e, i, n) {
    var r = n.extend({
        name: "mname-filter2",
        template: e,
        $body: i,
        config: function(t) {
            this.supr(t)
        }
    });
    return r
}, 7, 493, 491, 334);
I$(494, '<div class="filter-item" r-class={{\'z-show\':filterData.source==\'global\'}} r-class={{\'z-open\':filterData.open==true}} data-pid="{filterData.pid}" data-reportid="{filterData.reportId}" data-hover="filter-item" {#if filterData.source==\'global\'}id="global-filter-item-{filterData.pid}-{filterData.reportId}"{#else}id="filter-item-{filterData.pid}-{filterData.reportId}"{/if}>\n    {#if filterData.source==\'global\'}<div class="cut-line" data-drag="3" data-ftype="1" data-pid="{filterData.pid}" data-reportid="{filterData.reportId}"></div>{/if}\n    <ul class="u-menu menu-filter-config">\n        <li r-class={{\'js-selected\':mode==\'all\'}} on-click={this.changemode(\'all\')}><span class="u-icn u-icn-gou"></span>范围</li>\n        <li r-class={{\'js-selected\':mode==\'min\'}} on-click={this.changemode(\'min\')}><span class="u-icn u-icn-gou"></span>至少</li>\n        <li r-class={{\'js-selected\':mode==\'max\'}} on-click={this.changemode(\'max\')}><span class="u-icn u-icn-gou"></span>至多</li>\n        {#if filterData.edit}<li class="filter-app-btn" data-action="filter-app" data-pid="{filterData.pid}">作为全局筛选器</li>{/if}\n    </ul>\n    <div class="fttl f-ellipsis" data-action="filter-toggle" data-pid="{filterData.pid}">\n        <span class="wrd" title="{filterData.ptext}">{filterData.ptext}</span>\n        <div class="opt">\n            {#if filterData.edit}<div class="u-icn u-icn-config" title="配置" data-action="filter-config" data-pid="{filterData.pid}"></div>{#if filterData.source==\'global\'}<div class="u-icn u-icn-close" title="关闭" data-action="filter-close" data-pid="{filterData.pid}"></div>{#else}<div class="u-icn u-icn-min" title="最小化" data-action="filter-min" data-pid="{filterData.pid}"></div>{/if}{/if}\n        </div>\n    </div>\n    <div class="filter-item-inner" {#if filterData.source==\'global\'}style="height:{filterData.filterHeight}px" id="global-filter-item-inner-{filterData.pid}-{filterData.reportId}" data-height="{filterData.filterHeight}"{#else}id="filter-item-inner-{filterData.pid}-{filterData.reportId}"{/if}>\n\n        <div class=\'m-mfilter2\'>\n            <div class="u-rangeinput">\n                <input ref=min  value={vmin} on-change=\'change:min\' on-enter=\'change:min\' disabled={mode==\'max\'} >\n                <input ref=max  value={vmax} on-change=\'change:max\' on-enter=\'change:max\' disabled={mode==\'min\'} >\n            </div>\n            <div style=\'text-align:center;vertical-align:middle\'>\n                <div r-hide={!message}>\n                    <span class="u-icn u-icn-warm"></span> <span>{message}</span>\n                </div>\n                <div r-hide={!loading}>\n                    <span class=\'u-load\' style=\'display:inline-block;vertical-align:middle;margin:8px\'></span> <span>正在读取范围... </span>\n                </div>\n                {#if max ==null && min == null && !auto && !loading && !message}\n                <a class="u-btn u-btn-1" on-click={this.fetchMaxAndMin()}>加载范围</a>\n                {/if}\n            </div>\n            {#if max!=null && min !=null}\n            <div>\n                <range max={max} min={min} vmin={vmin} vmax={vmax} mode={mode} on-change={this.rangeChange($event)}></range>\n            </div>\n            {/if}\n        </div>\n\n\n    </div>\n\n</div>\n\n');
I$(518, "\n<div class=\"u-range\" ref=range>\n\n    <div class=\"track\">\n\n      <div class=\"btn btn-min\" style=\"left:{vmin|percent}%;display: {mode==='max'?'none':''} \" ><dragable ref=left placeholder={false} ><b ></b></dragable></div>\n\n      <div class=\"btn btn-max\" style=\"left:{vmax|percent}%;display: {mode==='min'?'none':''}\"><dragable placeholder={false} ref=right><b ></b></dragable></div>\n    </div>\n  </div>");
I$(354, function(t, e) {
    function i(t) {
        var t = "" + t,
            e = t.indexOf(".");
        return e === -1 ? 0 : t.length - (e + 1)
    }
    var n = ReDnd.util,
        r = Regular.util,
        a = Regular.extend({
            name: "range",
            template: e,
            config: function(t) {
                r.extend(t, {
                    min: 0,
                    max: 100,
                    vmin: 0,
                    vmax: 100,
                    mode: "all"
                });
                ["min", "max", "vmin", "vmax"].forEach(function(e) {
                    t[e] = parseFloat(t[e], 10)
                });
                this.$watch("mode", function(e) {
                    if("max" === e) t.vmin = t.min;
                    if("min" === e) t.vmax = t.max
                });
                var e = typeof t.fixed;
                if("number" !== e) t.fixed = Math.max(0, i(t.min), i(t.max))
            },
            init: function() {
                var t = this.$refs.left,
                    e = this.$refs.right;
                t.$on({
                    dragstart: this.dragstart.bind(this, "min"),
                    dragmove: this.dragmove.bind(this, "min"),
                    dragend: this.dragend.bind(this, "min")
                });
                e.$on({
                    dragstart: this.dragstart.bind(this, "max"),
                    dragmove: this.dragmove.bind(this, "max"),
                    dragend: this.dragend.bind(this, "max")
                })
            },
            dragstart: function(t, e) {
                var i = this.$refs.range;
                this.dim = n.getDimension(i);
                this.dim.left += 20;
                this.dim.width -= 40
            },
            dragmove: function(t, e) {
                if(this.dim) {
                    this.setRange(t, e.position);
                    this.$emit("change", {
                        vmax: this.data.vmax,
                        vmin: this.data.vmin,
                        type: t
                    })
                }
            },
            setRange: function(t, e) {
                var i = this.dim,
                    n = this.data;
                if(i) {
                    var r = this.getPercent(this.dim, e),
                        a = n.min + r * (n.max - n.min),
                        s = n.fixed;
                    if(0 === s) a = parseInt(a, 10);
                    else a = parseFloat(parseFloat(a, 10).toFixed(s));
                    n["v" + t] = a;
                    if(n.vmin > n.vmax)
                        if("max" === t) n.vmax = n.vmin;
                        else n.vmin = n.vmax;
                    this.$update()
                }
            },
            dragend: function(t, e) {
                this.setRange(t, e.position);
                this.dim = null;
                this.$emit("change", {
                    vmax: this.data.vmax,
                    vmin: this.data.vmin,
                    type: t,
                    end: !0
                })
            },
            getPercent: function(t, e) {
                var i = e.left - t.left;
                if(i < 0) i = 0;
                if(i > t.width) i = t.width;
                return i / t.width
            }
        }).filter("percent", function(t) {
            var e = this.data;
            return(t - e.min) / (e.max - e.min) * 100
        });
    return a
}, 7, 518, 173);
I$(336, function(t, e, i) {
    var n = i.cache,
        r = Regular.extend({
            name: "measure-filter",
            template: e,
            config: function(t) {
                this.supr(t);
                this.initMode();
                if(t.auto) this.fetchMaxAndMin();
                else;
                this.$on({
                    "change:min": this.changeValue.bind(this, "min"),
                    "change:max": this.changeValue.bind(this, "max")
                })
            },
            initMode: function() {
                var t = this.data;
                t.mode = "all";
                if(t.filter) var e = t.filter.filter;
                if(e && e.limit) {
                    var i = e.limit,
                        n = t.vmin = i.minBound,
                        r = t.vmax = i.maxBound;
                    if(null == n)
                        if(null != r) t.mode = "max";
                    if(null == r)
                        if(null != n) t.mode = "min"
                }
            },
            fetchMaxAndMin: function() {
                var t = this.data;
                t.loading = !0;
                var e = this;
                n._$getMeasureRange({
                    reportId: t.filterData.reportId,
                    dimensions: i.getDimensions(t.report.query).map(i.fixPill),
                    measure: i.fixPill(t.pill)
                }).then(function(e) {
                    t.loading = !1;
                    var i = e.result;
                    if(200 == e.code) {
                        t.message = null;
                        t.max = i.max;
                        t.min = i.min;
                        this.fixMaxAndMin()
                    } else t.message = e.message || "获取范围出错";
                    this.$update()
                }.bind(this)).catch(function(i) {
                    t.loading = !1;
                    t.message = i.message || "获取范围出错";
                    e.$update()
                })
            },
            fixMaxAndMin: function() {
                var t = this.data;
                if(null == t.vmin || t.vmin < t.min || t.vmin > t.max) t.vmin = t.min;
                if(null == t.vmax || t.vmax > t.max || t.vmax < t.vmin) t.vmax = t.max;
            },
            changeValue: function(t, e) {
                var i = this.data,
                    n = parseFloat(e.target.value, 10),
                    r = isNaN(n),
                    a = null != i.min && null != i.max;
                e.target.blur();
                if("min" === t) {
                    if(r) n = i.vmin;
                    else if(a) n = Math.max(Math.min(i.vmax, n), i.min)
                } else if(r) n = i.vmax;
                else if(a) n = Math.min(Math.max(i.vmin, n), i.max);
                i["v" + t] = n;
                e.target.value = n;
                this.emitData()
            },
            changemode: function(t) {
                var e = this.data;
                e.mode = t;
                this.emitData()
            },
            gatherData: function() {
                var e = this.data,
                    i = e.mode;
                if("max" !== i && "number" != typeof e.vmin) {
                    this.$refs.min.focus();
                    return t.message("最小值必须是数字")
                }
                if("min" !== i && "number" != typeof e.vmax) {
                    this.$refs.max.focus();
                    return t.message("最大值必须是数字")
                }
                if("max" !== i && "min" !== i && e.vmin > e.vmax) return t.message("最大值不能小于最小值");
                var n = {
                    $type: "MFitler",
                    pill: e.pill,
                    filter: {
                        $type: "ContinuousDimensionFilter",
                        limit: {
                            $type: "Limit",
                            minBound: "max" === i ? null : +e.vmin || "",
                            maxBound: "min" === i ? null : +e.vmax || ""
                        }
                    }
                };
                return n
            },
            rangeChange: function(t) {
                if(1 == t.end) this.emitData()
            },
            emitData: function() {
                var t = this.gatherData();
                this.$emit("change", t)
            }
        });
    return r
}, 7, 494, 34, 354);
I$(495, '<div class="filter-item f-cb filter-item-mea" data-pid="{filterData.pid}" data-reportid="{filterData.reportId}" data-hover="filter-item" {#if filterData.source==\'global\'}id="global-filter-item-{filterData.pid}-{filterData.reportId}"{#else}id="filter-item-{filterData.pid}-{filterData.reportId}"{/if}>\n    <div class="u-item u-item-3">\n        <h6 class="handle" title="{filterData.ptext}" {#if filterData.edit}data-action="sel-toggle"{/if}>{filterData.ptext}</h6>\n        {#if filterData.edit}\n        <span class="sel" data-action="sel-toggle"></span>\n        <ul class="u-menu menu-filter-config">\n            <li r-class={{\'js-selected\':mode==\'all\'}} on-click={this.changemode(\'all\')}><span class="u-icn u-icn-gou"></span>范围</li>\n            <li r-class={{\'js-selected\':mode==\'min\'}} on-click={this.changemode(\'min\')}><span class="u-icn u-icn-gou"></span>至少</li>\n            <li r-class={{\'js-selected\':mode==\'max\'}} on-click={this.changemode(\'max\')}><span class="u-icn u-icn-gou"></span>至多</li>\n            <li class="filter-app-btn" style="border-top:0" data-action="filter-app" data-pid="{filterData.pid}">作为全局筛选器</li>\n        </ul>\n        {/if}\n    </div>\n    <div class="u-item u-item-3 " {#if filterData.source==\'global\'}id="global-filter-item-inner-{filterData.pid}-{filterData.reportId}"{#else}id="filter-item-inner-{filterData.pid}-{filterData.reportId}"{/if}>\n\n        <div class="tab_content tab_content_range">\n            <div class="switcher" data-action="filter-dimension-select">\n                <h2 class="filter-select-info f-ellipsis">\n                    <input type="text" ref=min  value={vmin} on-change=\'change:min\' on-enter=\'change:min\' disabled={mode==\'max\'} title="{vmin}">\n                    <span class="icn">-</span>\n                    <input type="text" ref=max  value={vmax} on-change=\'change:max\' on-enter=\'change:max\' disabled={mode==\'min\'} title="{vmax}">\n                </h2>\n            </div>\n            {#if max!=null && min !=null}\n            <div class="tab_base tab_drop f-dn">\n                <range max={max} min={min} vmin={vmin} vmax={vmax} mode={mode} on-change={this.rangeChange($event)} ></range>\n            </div>\n            {/if}\n        </div>\n\n    </div>\n    <div class="opt f-fl">\n        {#if filterData.edit}{#if filterData.source==\'global\'}<div class="u-icn u-icn-close" title="关闭" data-action="filter-close" data-pid="{filterData.pid}"></div>{#else}<div class="u-icn u-icn-min" title="最小化" data-action="filter-min" data-pid="{filterData.pid}"></div>{/if}{/if}\n    </div>\n</div>\n\n');
I$(337, function(t, e, i) {
    var n = i.extend({
        name: "measure-filter2",
        template: e,
        config: function(t) {
            this.supr(t)
        }
    });
    return n
}, 7, 495, 336);
I$(259, '<div class="m-dbprotection">\n\t<div class="warm">\n\t\t<i class="u-icn u-icn-info"></i>\n\t</div>\n\t<div class="prompt">\n\t\t{prompt}\n\t\t<div r-class={{\'noline\': isReport}} >\n\t\t\t<span class="dt" on-click={this.showDetails()}>详细信息<i class="u-icn" r-class={{\'u-icn-arr2\': !hasDetails, \'u-icn-arr2-flip\': hasDetails}}></i></span>\n\t\t\t\n\t\t</div>\n\t</div>\n\t\n\t<div class="sqlinfo" r-hide={!hasDetails} >\n\t\t<div class="sql">{sql}</div>\n\t\t<div>\n\t\t\t<input class="u-btn u-btn-2 u-btn-s1" id="copyBtn" type="button" value="复制" style="width:54px;height:24px;margin-left:0px;" ref=copybtn/>\n\t\t</div>\n\t\t<div>您可以将此SQL语句发送给数据库管理员作为参考</div>\n\t</div>\n\t<div class="note" r-hide={hasNote}>继续查询将导致长时间未响应</div>\n\t{#if !datamodel}<div class="noprompt"><label><input type="checkbox" r-model=noprompt>本次编辑不再提示</label></div>{/if}\n</div>');
I$(260, '<button type="button"  on-click={this.confirm(true)} class="u-btn u-btn-1 u-btn-s1 ">{confirmText||\'确定\'}</button>\n<button r-hide={hideCancel} type="button" on-click={this.confirm(false)} class="u-btn u-btn-2 u-btn-s1 ">{cancelText||\'取消\'}</button>');
I$(82, function(t, e, i, n, r, a) {
    var s = r.extend({
        name: "db-protetion-modal",
        $body: i,
        $foot: n,
        data: {
            autoRecycleRequest: !1
        },
        config: function(t) {
            this.supr(t);
            this.data.hasDetails = !0;
            this.$on("confirm", function(e) {
                this.$emit("save", e, {
                    noprompt: t.noprompt
                })
            })
        },
        init: function(t) {
            this.supr(t);
            var i = this,
                n = this.$refs.copybtn;
            setTimeout(function() {
                a._$copy("copyBtn", function() {
                    e._$addClassName(n, "z-crt");
                    setTimeout(function() {
                        e._$delClassName(n, "z-crt")
                    }, 100);
                    return i.data.sql
                });
                i.data.hasDetails = !1;
                i.$update()
            }, 0)
        },
        showDetails: function() {
            this.data.hasDetails = !this.data.hasDetails
        }
    });
    return s
}, 7, 3, 259, 260, 185, 261);
I$(163, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f, p, _, m, g, v, y, b, x, $, w, k) {
    var S = l.getSearch() || {};
    w._$$Module = t._$klass();
    k = w._$$Module._$extend(a._$$Abstract);
    var C, T, E, I, A, M, D, P = {},
        N = function() {
            return {
                reportControlObj: C || {},
                textControlObj: T || {},
                tabControlObj: T || {},
                globalFilterControl: E,
                dataChanged: I || !1,
                autoSave: A || !1,
                queryIndex: M || 0,
                dimensionFilterObj: D || {}
            }
        }();
    k._$getGlobalObj = function() {
        return N
    };
    k._$getReportNevRender = function() {
        return P
    };
    k.__reset = function(t) {
        this.__super(t);
        this.__mbox = t.options.mbox;
        this.__gbox = t.options.gbox;
        this.__rbox = t.options.rbox;
        this.__dashBoardId = t.options.dashBoardId;
        this.__edit = t.options.edit;
        this.__page = !!t.options.page;
        this.__wap = !!t.options.wap;
        this.__cockpit = !!t.options.cockpit;
        this.__chartList = t.options.chartList;
        this.__globalFilter = t.options.globalFilter;
        if(this.__globalFilter) this.__globalFilterList = t.options.globalFilter.list;
        this.__oldGlobalFilter = t.options.oldGlobalFilter;
        this.__globalObj = this._$getGlobalObj();
        this.__getMinUnit()
    };
    k.__getMinUnit = function() {
        if(this.__rbox) {
            var t = f.RASTER_COUNT,
                e = this.__rbox.clientWidth;
            if(this.__wap) {
                this.__space = 10;
                this.__cell = (e - (t - 1) * this.__space) / t;
                this.__unit = this.__cell + this.__space
            } else if(this.__cockpit) {
                this.__space = 20;
                this.__cell = (e - (t - 1) * this.__space) / t;
                this.__unit = this.__cell + this.__space
            } else {
                this.__space = f.RASTER_SPACE;
                this.__cell = (e - (t - 1) * this.__space) / t;
                this.__unit = this.__cell + this.__space
            }
        }
    };
    k.__getBoxInfo = function(t) {
        if(t) {
            if(t.parentTabId) var i = e._$get("con-box-" + t.parentTabId),
                n = {
                    top: 0,
                    left: 0,
                    width: i.offsetWidth - 40,
                    height: i.offsetHeight - 40,
                    drawWidth: i.offsetWidth - 40 - 4,
                    drawHeight: i.offsetHeight - 40 - 60
                };
            else if(this.__wap) var r = t.ex - t.x + 1,
                a = t.ey - t.y + 1,
                s = (t.y - 1) * this.__cell + (t.y - 1) * this.__space,
                o = (t.x - 1) * this.__cell + (t.x - 1) * this.__space,
                l = r * this.__cell + (r - 1) * this.__space,
                c = a * this.__cell + (a - 1) * this.__space,
                u = l - 4,
                d = c - 68,
                n = {
                    top: s,
                    left: o,
                    width: l,
                    height: c,
                    drawWidth: u,
                    drawHeight: d
                };
            else var r = t.ex - t.x + 1,
                    a = t.ey - t.y + 1,
                    s = (t.y - 1) * this.__cell + (t.y - 1) * this.__space,
                    o = (t.x - 1) * this.__cell + (t.x - 1) * this.__space,
                    l = r * this.__cell + (r - 1) * this.__space,
                    c = a * this.__cell + (a - 1) * this.__space,
                    u = l - 4,
                    d = c - 70,
                    n = {
                        top: s,
                        left: o,
                        width: l,
                        height: c,
                        drawWidth: u,
                        drawHeight: d
                    };
            return n
        }
    };
    k.__mouse2coor = function(t) {
        var i = e._$offset(this.__rbox),
            n = Math.floor((t.y - i.y) / this.__unit + 1),
            r = Math.floor((t.x - i.x) / this.__unit + 1);
        return {
            x: r,
            y: n
        }
    };
    k.__isIntersect = function(t) {
        var e = !1;
        n._$forIn(this.__chartList, function(i, n) {
            var r = {},
                a = {};
            if(t.y > i.y) r.y = t.y;
            else r.y = i.y;
            if(t.x > i.x) r.x = t.x;
            else r.x = i.x;
            if(t.ex > i.ex) a.x = i.ex;
            else a.x = t.ex;
            if(t.ey > i.ey) a.y = i.ey;
            else a.y = t.ey;
            if(r.x <= a.x && r.y <= a.y) {
                e = !0;
                return !0
            }
        }._$bind(this));
        return e
    };
    k.__setRboxHth = function() {
        this.__getMinUnit();
        var t = 0;
        n._$forEach(this.__chartList, function(e, i) {
            if(e.ey > t) t = e.ey
        });
        if(this.__cockpit) var i = t * this.__unit + "px";
        else var i = (t + f.RASTER_COUNT / 12) * this.__cell + t * this.__space + "px";
        e._$setStyle(this.__rbox, "height", i)
    };
    k.__resetDataItem = function(t, e) {
        t.filter = t.filter || [];
        t.filterWidth = t.filterWidth || 190;
        t.filterPosition = t.filterPosition || "right";
        t.hasChanged = !1;
        t.open = !0;
        t.positionFilter = {};
        if(1 == e) t.stopped = !1;
        else if(2 == e) t.stopped = !0;
        if(this.__cockpit) t.theme = "black"
    };
    k.__resetTextItem = function(t) {
        if(this.__cockpit) t.theme = "black"
    };
    k.__resetTabItem = function(t) {
        if(this.__cockpit) t.theme = "black"
    };
    k.__toggleBlank = function(t) {
        switch(t) {
            case 1:
                this.__rbox.insertAdjacentHTML("afterBegin", s._$getTextTemplate("txt-report-empty"));
                break;
            case 2:
                var i = e._$getByClassName(this.__rbox, "m-blank")[0];
                if(i) e._$remove(i)
        }
    };
    k.__disabledReport = function() {
        var t = this,
            i = e._$getByClassName(this.__mbox, "j-report");
        n._$forEach(i, function(t, i) {
            t.setAttribute("data-drag", "0");
            e._$delClassName(t, "disabled")
        });
        n._$forEach(i, function(i, r) {
            var a = e._$dataset(i, "reportid");
            n._$forIn(t.__chartList, function(t, n) {
                if(t.reportId == a) {
                    i.removeAttribute("data-drag");
                    e._$addClassName(i, "disabled");
                    return !0
                }
            })
        })
    };
    k.__removeReport = function(t) {
        var i = e._$get("chart-item-" + t.reportId);
        if(i) {
            e._$remove(i, !1);
            if(P[t.reportId]) {
                P[t.reportId].clearTimer();
                delete P[t.reportId]
            }
        }
    };
    k.__syncPillAliasNative = function(t) {
        var e = t.report.reportDataModel.pivotSchema.dimensions.concat(t.report.reportDataModel.pivotSchema.measures);
        if(t.filter) t.filter.forEach(function(t, i) {
            var n = t.pill.fieldId;
            e.some(function(e, i) {
                if(e.fieldId == n) {
                    t.pill.alias = e.alias;
                    return !0
                }
            })
        })
    };
    k.__syncPillAliasGlobal = function() {
        var t = this;
        this.__globalFilterList.forEach(function(e, i) {
            var n = t.__getDashData(e.reportId),
                r = n.report.reportDataModel.pivotSchema.dimensions.concat(n.report.reportDataModel.pivotSchema.measures),
                a = e.pill.fieldId;
            r.some(function(t, i) {
                if(t.fieldId == a) {
                    e.pill.alias = t.alias;
                    return !0
                }
            })
        })
    };
    k.__getAllFilterList = function(t) {
        var e = t.report.query,
            i = [],
            r = function(t) {
                var e = !1;
                n._$forEach(i, function(i, n) {
                    if(l.pid(t) == l.pid(i.pill)) e = !0
                });
                if(0 == e) i.push({
                    pill: t,
                    pid: l.pid(t),
                    ptext: l.ptext(t)
                })
            },
            a = function(t) {
                n._$forEach(t, function(t, e) {
                    r(t)
                })
            };
        n._$forEach(t.filter, function(t, e) {
            i.push({
                pill: t.pill,
                pid: l.pid(t.pill),
                ptext: l.ptext(t.pill)
            })
        });
        if(e) {
            n._$forEach(e.filter, function(t, e) {
                r(t.pill)
            });
            a(e.column);
            a(e.row);
            if(e.mark) {
                a(e.mark.details);
                a(e.mark.labels);
                if(e.mark.color) r(e.mark.color);
                if(e.mark.size) r(e.mark.size);
                if(e.mark.angle) r(e.mark.angle)
            }
        }
        var s, o = !1,
            c = !1;
        n._$forEach(i, function(t, e) {
            if("mname" == t.pill.field) o = !0;
            if("mvalue" == t.pill.field) {
                c = !0;
                s = e
            }
        });
        if(1 == c) {
            i.splice(s, 1);
            a(t.report.reportDataModel.pivotSchema.measures);
            r(h.mname)
        }
        return i
    };
    k.__mergeFilter = function(t) {
        var e = l.getSearch().filter;
        if(e) var i = JSON.parse(e);
        if(i && i.pill) {
            var r = l.pid(i.pill),
                a = !1;
            this.__globalFilter.list.some(function(t) {
                if(l.pid(t.pill) == r) {
                    a = !0;
                    t.filter = i;
                    return !0
                }
            });
            if(!a) {
                var s = [];
                this.__chartList.forEach(function(t) {
                    if(t.reportId) s.push(t.reportId)
                });
                this.__globalFilter.list.push({
                    filter: i,
                    pill: i.pill,
                    open: !1,
                    reportIds: s.join(",")
                })
            }
        }
        var o = [];
        n._$forEach(this.__globalFilter.list, function(e, i) {
            var r = e.reportIds.split(",");
            n._$forIn(r, function(i, n) {
                if(i == t.reportId) {
                    if(e.filter && "mname" != e.pill.field) o.push(e.filter);
                    return !0
                }
            })
        });
        n._$forEach(t.filter, function(t, e) {
            var i = !1;
            n._$forEach(o, function(e, n) {
                if(l.pid(t.pill) == l.pid(e.pill)) i = !0
            });
            if(0 == i)
                if(t.filter && "mname" != t.pill.field) o.push(t.filter)
        });
        if(t.report.query && t.report.query.filter) n._$forEach(t.report.query.filter, function(t, e) {
            var i = !1;
            n._$forEach(o, function(e, n) {
                if(l.pid(t.pill) == l.pid(e.pill)) i = !0
            });
            if(0 == i) o.push(t)
        });
        if(t.positionFilter) {
            var c = [];
            for(var u in t.positionFilter) c.push(t.positionFilter[u]);
            t.positionFilterList = c
        }
        return o
    };
    k.__getSingleFilter = function(t, e) {
        var i;
        t.some(function(t) {
            if(l.pid(t.pill) == l.pid(e)) {
                i = t;
                return !0
            }
        });
        return i
    };
    k.__mergeMeasures = function(t) {
        var e = [],
            i = !1,
            r = !1;
        n._$forEach(this.__globalFilter.list, function(r, a) {
            var s = r.reportIds.split(",");
            n._$forIn(s, function(n, a) {
                if(n == t.reportId) {
                    if(r.measures) {
                        e = r.measures;
                        i = !0
                    }
                    return !0
                }
            })
        });
        if(0 == i) n._$forEach(t.filter, function(t, i) {
            if(t.measures) {
                e = t.measures;
                r = !0
            }
        });
        if(0 == i && 0 == r)
            if(t.report.query && t.report.query.measures) e = t.report.query.measures;
        return e
    };
    k.__closeAllMenu = function() {
        var t = e._$getByClassName(document.body, "u-menu");
        n._$forEach(t, function(t, i) {
            if(e._$hasClassName(t, "opened")) e._$delClassName(t, "opened")
        })
    };
    k.__closeDropTabs = function(t) {
        var r = i._$getElement(t, "c:tab_content"),
            a = e._$getByClassName(document.body, "tab_drop");
        if(!r) n._$forEach(a, function(t, i) {
            if(!e._$hasClassName(t, "f-dn")) e._$addClassName(t, "f-dn")
        })
    };
    k.__getReportPromiseLoad = function(t) {
        var i = this;
        if(1 == t.hasChanged) {
            var n = {};
            if(this.__dashBoardId) n = {
                dashboardId: this.__dashBoardId
            };
            return u.cache._$getReport(t.reportId, n).then(function(n) {
                t.report = n.result;
                var r = n.result.title,
                    a = e._$get("chart-title-" + n.result.id);
                if(a) a.innerHTML = r;
                i._$nevRender(t)
            })
        }
    };
    k.__getReportPromiseAll = function() {
        var t = this;
        Promise.all(t.__chartList.map(function(e) {
            return t.__getReportPromiseLoad(e)
        })).then(function() {
            t.__promiseAll()
        })
    };
    var L = "",
        R = "",
        j = !1,
        O = [],
        F = [],
        z = !1;
    k.__promiseLoad = function(t) {
        var e = this,
            i = t.data,
            n = t.para;
        return c.cacheDBProtection._$dbprotection(n).then(function(t) {
            if(200 == t.code && t.result && t.result.tables && t.result.tables.length) {
                var n = t.result;
                L += i.report.title + "报表的";
                L += n.tables.splice("，");
                L += "表 ";
                R += n.sql + "  ";
                O.push(i.reportId);
                j = !0
            } else if(750 === t.code) {
                l.messageDetail(t);
                e.__nevRender(i)
            } else e.__nevRender(i)
        })
    };
    k.__promiseAll = function() {
        var t = this;
        Promise.all(F.map(function(e) {
            return t.__promiseLoad(e)
        })).then(function() {
            t.__doDBProtect()
        })
    };
    k._$nevRender = function(t) {
        if(t.report && t.report.reportDataModel)
            if(1 == window.dbProtection && 1 == t.hasChanged && !z && !t.showTable) {
                var e = t.report.reportDataModel,
                    i = e.relatedDataModelId,
                    n = (e.pivotSchema, this.__mergeFilter(t));
                F.push({
                    para: {
                        dataModelId: i,
                        filter: n
                    },
                    data: t
                });
                this.__resetRenderNode(t);
                this.__resetBoxs(t)
            } else this.__nevRender(t);
        else l.message("报表不存在或已经被删除", "err")
    };
    k.__nevRender = function(t) {
        var i = this;
        this.__resetRenderNode(t);
        var r = t.reportId,
            a = this.__chartItem,
            s = this.__chartBox;
        if(s) {
            this.__resetBoxs(t);
            if(!P[r] || 1 == t.hasChanged) {
                var o = this.__mergeFilter(t),
                    h = this.__mergeMeasures(t);
                t.hasChanged = !1;
                t.stopped = !1;
                s.innerHTML = "";
                var p = this.__copyQuery = NEJ.X({}, t.report.query);
                p.filter = o;
                p.measures = h;
                p.positionFilters = t.positionFilterList;
                P[r] = new d({
                    data: {
                        autoReload: this.__page ? !1 : !0,
                        chartBox: s,
                        reportId: r,
                        copyQuery: p,
                        dashboardData: t
                    }
                }).$inject(s).$on({
                    done: function() {
                        i.__globalObj.queryIndex++;
                        var r = 0;
                        n._$forEach(i.__chartList, function(t, e) {
                            if(t.reportId) r++
                        });
                        if(i.__globalObj.queryIndex == r) setTimeout(function() {
                            console.log("done");
                            window.fuckdone = !0
                        }, 1e3);
                        this.data.step = 0;
                        this.$update();
                        var s = e._$getByClassName(a, "j-scrollTable")[0];
                        if(s) {
                            t.autoHeight = s.clientHeight;
                            t.hasChanged = !0;
                            t.showTable = !0;
                            if(!t.alreadyAutoHeight && u.getReportShowTable) i.__autoHeight(t)
                        }
                    },
                    chartEvent: function(e) {
                        if(t.reportIds && "contextselect" == e.type && "graph" == e.subtype) {
                            var n = c.createPositionFilterWithRecords(p, e.data),
                                r = t.reportIds.split(",");
                            i.__chartList.forEach(function(e) {
                                r.some(function(r) {
                                    if(r == e.reportId) {
                                        e.positionFilter[t.reportId] = n;
                                        i.__refreshSingleReport(e);
                                        return !0
                                    }
                                })
                            })
                        }
                    },
                    changeLimit: function() {
                        t.hasChanged = !0;
                        t.showMode = "";
                        t.alreadyAutoHeight = !1;
                        var e = t.report,
                            n = c.isTable(e.query);
                        if(t.ex - t.x + 1 == f.RASTER_COUNT && n && "normal" == e.options.chart.showMode) {
                            var r = u.isAutoHeight(t);
                            if(t.canAuto != r) i.__reAllocateReport(t)
                        }
                        setTimeout(function() {
                            i.__setRboxHth()
                        }, 1e3)
                    }
                });
                var _ = document.querySelector("#flushTime");
                if(_) this.__flushTime = _.getAttribute("data-t");
                var m = t.report.options,
                    g = t.report.reportDataModel.pivotSchema;
                if(l.phone.isMobile) m.platform = "mobile";
                m.isDashboard = !0;
                m.chart.limit = u.getReportLimit(t);
                m.chart.showTable = u.getReportShowTable(t);
                m.theme = t.theme;
                var v = {
                    size: {
                        width: s.offsetWidth,
                        height: s.offsetHeight
                    },
                    report: {
                        schema: {
                            geoConfig: g.geoConfig,
                            levels: g.levels,
                            dimensions: g.dimensions,
                            measures: g.measures
                        },
                        reportId: r,
                        flushTime: S.flushTime ? S.flushTime : i.__flushTime,
                        query: i.__copyQuery,
                        options: m
                    },
                    bg: t.bg
                };
                if(this.__wap) P[r].render(v, function(t) {});
                else P[r].renderAfterGetSize(v, function(e) {
                    t.result = e;
                    t.autoHeight = e.size && e.size.chartHeigth || 300;
                    if(!t.alreadyAutoHeight && !u.getReportShowTable(t)) i.__autoHeight(t);
                    i.__reportRender(t)
                })
            } else {
                s.innerHTML = "";
                P[r].$inject(s);
                this.__resizeReport(t, s)
            }
        }
    };
    k.__reportRender = function(t) {
        t.result.render(function() {})
    };
    k.__doDBProtect = function() {
        var t = this;
        if(1 == j) {
            j = !1;
            L += "数据量过大，建议您联系数据库管理员在数据库中建立索引";
            var e = {
                data: {
                    title: "查询提示",
                    confirmText: "返回筛选",
                    cancelText: "继续查询",
                    autoClose: !0,
                    sql: R,
                    isReport: !1,
                    prompt: L
                }
            };
            new $(e).toggle().$on("save", function(e, i) {
                z = i.noprompt;
                if(e.accept);
                else O.forEach(function(e, i) {
                    var n = t.__getDashData(e);
                    t.__globalObj.reportControlObj[e].__nevRender(n)
                });
                L = "";
                R = "";
                O = [];
                F = []
            })
        } else {
            L = "";
            R = "";
            O = [];
            F = []
        }
    };
    k.__resetRenderNode = function(t) {
        this.__chartItem = e._$get("chart-item-" + t.reportId);
        this.__drawBox = e._$get("draw-box-" + t.reportId);
        this.__chartBox = e._$get("chart-box-" + t.reportId);
        this.__filterTopBox = e._$get("filter-box-top-" + t.reportId);
        this.__filterRightBox = e._$get("filter-box-right-" + t.reportId)
    };
    k.__resetBoxs = function(t) {
        this.__getMinUnit();
        var i = this.__getBoxInfo(t),
            r = 0;
        n._$forEach(t.filter, function(t, e) {
            if(1 == t.select) r++
        }._$bind(this));
        if(r > 0 && t.open) {
            if("right" == this.__filterPosition) {
                e._$addClassName(this.__filterRightBox, "z-open");
                var a = i.drawWidth - this.__filterRightBox.offsetWidth;
                if(!this.__wap) e._$setStyle(this.__drawBox, "width", a + "px")
            } else if("top" == this.__filterPosition) {
                e._$addClassName(this.__filterTopBox, "z-open");
                var s = i.drawHeight - this.__filterTopBox.offsetHeight;
                e._$setStyle(this.__chartBox, "height", s + "px")
            }
        } else if("right" == this.__filterPosition) {
            if(!this.__wap) e._$setStyle(this.__drawBox, "width", i.drawWidth + "px");
            e._$delClassName(this.__filterRightBox, "z-open")
        } else if("top" == this.__filterPosition) {
            e._$setStyle(this.__chartBox, "height", i.drawHeight + "px");
            e._$delClassName(this.__filterTopBox, "z-open")
        }
    };
    k.__resizeReport = function(t, e) {
        P[t.reportId].resize({
            width: e.offsetWidth - 8,
            height: e.offsetHeight - 8
        })
    };
    k.__filterInfoShow = function(t, i, n) {
        i.pill, this.__getDashData(i.reportId);
        if("global" == t) var r = e._$get("global-menu-filter-info-" + i.pid + "-" + i.reportId);
        else if("native" == t) var r = e._$get("menu-filter-info-" + i.pid + "-" + i.reportId);
        e._$addClassName(r, "opened")
    };
    k.__getDashData = function(t) {
        var e = {};
        n._$forIn(this.__chartList, function(i, n) {
            if(i.reportId == t) {
                e = i;
                return !0
            }
        }._$bind(this));
        return e
    };
    k.__getGlobalFilterData = function(t, e) {
        var i = {};
        n._$forIn(this.__globalFilterList, function(n, r) {
            if(n.pid == t && n.reportId == e) {
                i = n;
                return !0
            }
        }._$bind(this));
        return i
    };
    k.__doManualRun = function() {
        n._$forEach(this.__chartList, function(t, e) {
            if(1 == t.hasChanged)
                if(this.__globalObj.reportControlObj[t.reportId]) this.__globalObj.reportControlObj[t.reportId]._$nevRender(t)
        }._$bind(this))
    };
    k.__autoRunTotal = function(t) {
        if("native" == this.__category) this.__setHasChanged("native", this.__dashData);
        else if("global" == this.__category) this.__setHasChanged("global", this.__filterData || t);
        this.__doAutoRun()
    };
    k.__doAutoRun = function() {
        var t = this.__globalObj.autoSave;
        if(t) this.__getReportPromiseAll()
    };
    k.__setHasChanged = function(t, e) {
        if("native" == t) e.hasChanged = !0;
        else if("global" == t) n._$forEach(e.reportIds.split(","), function(t, e) {
            this.__getDashData(t).hasChanged = !0
        }._$bind(this));
        this.__globalObj.dataChanged = !0
    };
    k.__setFixedWidth = function() {
        var t = e._$getByClassName(document.body, "g-ct-fixed")[0],
            i = e._$getByClassName(document.body, "g-mn")[0],
            n = (e._$getByClassName(document.body, "m-dashboard")[0], e._$getByClassName(document.body, "m-global-filter-2")[0]);
        if(i) {
            var r = i.offsetWidth;
            if(t) e._$setStyle(t, "width", r + "px");
            if(n) e._$setStyle(n, "width", r + "px")
        }
    };
    k.__selToggle = function(t) {
        this.__closeAllMenu();
        var i = e._$getByClassName(t.parentNode, "u-menu")[0];
        if(e._$hasClassName(i, "opened")) e._$delClassName(i, "opened");
        else e._$addClassName(i, "opened");
    };
    k.__filterDimensionSelect = function(t) {
        this.__closeAllMenu();
        var i = e._$getByClassName(document.body, "tab_base");
        n._$forEach(i, function(t, i) {
            if(!e._$hasClassName(t, "f-dn")) e._$addClassName(t, "f-dn")
        });
        var r = t.nextElementSibling || t.nextSibling;
        if(r && 1 == r.nodeType)
            if(e._$hasClassName(r, "f-dn")) e._$delClassName(r, "f-dn");
            else e._$addClassName(r, "f-dn")
    };
    k.__newsFilter = function(t) {
        if(t.pill.fieldId == -11) this.__newMnameFilter(t);
        else if(l.isRangeDate(t.pill)) this.__newDateFilter(t);
        else if("Dimension" == t.pill.role) this.__newDimensionFilter(t);
        else if("Measure" == t.pill.role) this.__newMeasureFilter(t)
    };
    k.__newDateFilter = function(t) {
        var e, i = this,
            n = this.__getDashData(t.reportId),
            r = this.__mergeFilter(n),
            a = this.__getSingleFilter(r, t.pill);
        if(a && a.filter && a.filter.date) e = a.filter.date;
        var s = {
            date: e,
            pill: t.pill,
            filterData: t,
            filters: r
        };
        if("right" == this.__filterPosition) new p({
            data: s
        }).$inject(this.__sbody).$on("change", function(e) {
            i.__dateChanged(e, t, a)
        });
        else if("top" == this.__filterPosition) new _({
            data: s
        }).$inject(this.__sbody).$on("change", function(e) {
            i.__dateChanged(e, t, a)
        })
    };
    k.__dateChanged = function(t, e, i) {
        if(i && i.filter) {
            i.filter.date = t;
            var n = i
        } else var n = {
            $type: "DFilter",
            filter: {
                $type: "DiscreteDimensionFilter",
                date: t
            },
            pill: e.pill
        };
        e.filter = n;
        this.__autoRunTotal(e)
    };
    k.__newDimensionFilter = function(t) {
        var i, n, r, a, s, o, c = this,
            u = this.__getDashData(t.reportId),
            d = this.__mergeFilter(u),
            h = this.__getSingleFilter(d, t.pill);
        if(h && h.filter) {
            var f = h.filter;
            i = f.select;
            n = f.unselect;
            r = f.mode;
            a = f.exclude;
            s = f.affectMode;
            o = f.desc
        }
        var p = {
            select: i,
            unselect: n,
            mode: r,
            exclude: a,
            affectMode: s,
            desc: o,
            pill: t.pill,
            filterData: t,
            filters: d,
            levels: u.report.reportDataModel.pivotSchema.levels
        };
        if("right" == this.__filterPosition) {
            if("native" == this.__category) {
                var _ = e._$get("chart-item-" + t.reportId).offsetHeight - 150;
                p.height = _
            } else if("global" == this.__category) var _ = p.height = t.filterHeight - 120
        } else if("top" == this.__filterPosition) var _ = p.height = 300;
        p.count = Math.floor(_ / 26) + 10;
        if("right" == this.__filterPosition) {
            if(!t.mode) t.mode = "listck";
            this.__globalObj.dimensionFilterObj[t.reportId + "-" + l.pid(t.pill)] = new m({
                data: p
            }).$inject(this.__sbody).$on("change", function(e) {
                c.__dimensionChanged(e, t, h)
            })
        } else if("top" == this.__filterPosition) {
            if(t.mode) {
                if("listro" === t.mode) t.mode = "dropro";
                if("listck" === t.mode) t.mode = "dropck"
            } else t.mode = "dropck";
            this.__globalObj.dimensionFilterObj[t.reportId + "-" + l.pid(t.pill)] = new g({
                data: p
            }).$inject(this.__sbody).$on("change", function(e) {
                c.__dimensionChanged(e, t, h)
            })
        }
    };
    k.__dimensionChanged = function(t, e, i) {
        if(i && i.filter) {
            i.filter.select = t.select;
            i.filter.unselect = t.unselect;
            i.filter.exclude = t.exclude;
            var n = i
        } else var n = {
            $type: "DFilter",
            filter: {
                $type: "DiscreteDimensionFilter",
                select: t.select,
                unselect: t.unselect,
                exclude: t.exclude,
                affectMode: t.affectMode,
                mode: t.mode
            },
            pill: e.pill
        };
        e.filter = n;
        this.__autoRunTotal(e);
        for(var r in this.__globalObj.dimensionFilterObj) {
            var a = e.reportId + "-" + l.pid(e.pill);
            if(r != a) this.__globalObj.dimensionFilterObj[r]._$reFilter()
        }
    };
    k.__newMnameFilter = function(t) {
        var i = this,
            n = this.__getDashData(t.reportId),
            r = this.__mergeMeasures(n),
            a = n.report.reportDataModel.pivotSchema.measures,
            s = n.report.query;
        s.measures.forEach(function(t, e) {
            a.some(function(e, i) {
                if(t.fieldId == e.fieldId) {
                    a[i] = t;
                    return !0
                }
            })
        });
        var o = function(t) {
                var e = !1;
                r.some(function(i) {
                    if(l.ptext(i) == t) {
                        e = !0;
                        return !0
                    }
                });
                return e
            },
            c = (a || []).map(function(t) {
                var e = {
                    pill: t,
                    text: l.ptext(t)
                };
                if(o(e.text)) e.selected = !0;
                return e
            }),
            u = {
                pill: t.pill,
                filterData: t,
                measures: c
            };
        if("right" == this.__filterPosition) {
            if("native" == this.__category) {
                var d = e._$get("chart-item-" + t.reportId).offsetHeight - 150;
                u.height = d
            } else if("global" == this.__category) var d = u.height = t.filterHeight - 50
        } else if("top" == this.__filterPosition) var d = u.height = 300;
        if("right" == this.__filterPosition) {
            if(!t.mode) t.mode = "listck";
            new v({
                data: u
            }).$inject(this.__sbody).$on("change", function(e) {
                i.__mnameChanged(e, t)
            })
        } else if("top" == this.__filterPosition) {
            if(t.mode) {
                if("listro" === t.mode) t.mode = "dropro";
                if("listck" === t.mode) t.mode = "dropck"
            } else t.mode = "dropck";
            new y({
                data: u
            }).$inject(this.__sbody).$on("change", function(e) {
                i.__mnameChanged(e, t)
            })
        }
    };
    k.__mnameChanged = function(t, e) {
        e.measures = t.measures;
        this.__autoRunTotal(e)
    };
    k.__newMeasureFilter = function(t) {
        var e = this,
            i = this.__getDashData(t.reportId),
            n = this.__mergeFilter(i),
            r = this.__getSingleFilter(n, t.pill),
            a = {
                filter: r,
                auto: this.__globalObj.autoSave,
                pill: t.pill,
                filterData: t,
                report: i.report
            };
        if("right" == this.__filterPosition) new b({
            data: a
        }).$inject(this.__sbody).$on("change", function(i) {
            e.__measureChanged(i, t)
        });
        else if("top" == this.__filterPosition) new x({
            data: a
        }).$inject(this.__sbody).$on("change", function(i) {
            e.__measureChanged(i, t, r)
        })
    };
    k.__measureChanged = function(t, e) {
        e.filter = t;
        this.__autoRunTotal(e)
    };
    k.__removeBlankLine = function() {
        var t = this,
            i = 0;
        n._$forEach(this.__chartList, function(t, e) {
            if(t.ey > i) i = t.ey
        });
        for(var r = function(e) {
            var i = !0;
            n._$forIn(t.__chartList, function(t, n) {
                if(t.y <= e && t.ey >= e) {
                    i = !1;
                    return !0
                }
            });
            if(1 == i) {
                var a = !0;
                n._$forEach(t.__chartList, function(t, i) {
                    if(t.y > e) {
                        t.y = t.y - 1;
                        t.ey = t.ey - 1;
                        t.blankLower = !0;
                        a = !1
                    }
                });
                if(0 == a) r(e)
            }
        }, a = 1; a <= i; a++) r(a);
        n._$forEach(t.__chartList, function(i, n) {
            if(1 == i.blankLower) {
                i.blankLower = !1;
                var r = this.__getChartItem(i);
                if(r) {
                    var a = (i.y - 1) * t.__cell + (i.y - 1) * t.__space + "px";
                    e._$setStyle(r, "top", a)
                }
            }
        }._$bind(this));
        this.__setRboxHth();
        if(this.__LazyLoading) this.__LazyLoading._$refresh()
    };
    k.__getChartItem = function(t) {
        var i;
        if(t.reportId) i = e._$get("chart-item-" + t.reportId);
        else if(t.textId) i = e._$get("chart-item-text-" + t.textId);
        else if(t.tabId) i = e._$get("chart-item-tab-" + t.tabId);
        return i
    };
    k.__offsetReport = function(t, i) {
        var n = this;
        this.__chartList.forEach(function(r) {
            if(r.y > t) {
                if(r.textId) var a = e._$get("chart-item-text-" + r.textId);
                else if(r.reportId) var a = e._$get("chart-item-" + r.reportId);
                r.y = r.y + i;
                r.ey = r.ey + i;
                var s = (r.y - 1) * n.__cell + (r.y - 1) * n.__space + "px";
                e._$setStyle(a, "top", s)
            }
        });
        this.__removeBlankLine()
    };
    k._$changeTheme = function(t) {
        this.__chartList.forEach(function(e) {
            e.theme = t
        })
    };
    k.__refreshSingleReport = function(t) {
        var i = e._$get("refresh-" + t.reportId);
        i.click()
    };
    k.__closePositionFilter = function(t) {
        var e = this,
            n = i._$getElement(t, "c:chart-item");
        if(!n)
            if(this.__chartList) this.__chartList.forEach(function(t) {
                if(!l.isEmptyObject(t.positionFilter)) {
                    t.positionFilter = {};
                    e.__refreshSingleReport(t)
                }
            })
    };
    k.__tableChange = function(t) {
        var e = u.getReportShowTable(t);
        t.showTable = e ? !1 : !0;
        P[t.reportId].switchMode(t.showTable ? "table" : "nev");
        this.__initTableChangeIcon(t)
    };
    k.__initTableChangeIcon = function(t) {
        var i = e._$get("table-" + t.reportId),
            n = e._$get("autoheight-" + t.reportId);
        if(i && n) {
            var r = u.getReportShowTable(t);
            if(r) {
                i.setAttribute("title", "切回图表");
                e._$addClassName(i, "z-active");
                if(t.ex - t.x + 1 == f.RASTER_COUNT) {
                    var a = e._$get("chart-item-" + t.reportId),
                        s = e._$getByClassName(a, "j-scrollTable")[0];
                    if(s) t.autoHeight = s.clientHeight
                }
            } else {
                i.setAttribute("title", "查看数据");
                e._$delClassName(i, "z-active");
                if(t.ex - t.x + 1 == f.RASTER_COUNT);
            }
        } else {
            var r = u.getReportShowTable(t);
            if(r) {
                i.setAttribute("title", "切回图表");
                e._$addClassName(i, "z-active")
            } else {
                i.setAttribute("title", "查看数据");
                e._$delClassName(i, "z-active")
            }
        }
    };
    k.__autoHeight = function(t) {
        t.alreadyAutoHeight = !0;
        if("auto" == t.showMode) {
            t.oldey = t.ey;
            t.oldHeight = t.ey - t.y + 1;
            t.ey = t.y + Math.floor((+t.autoHeight + 120) / this.__unit);
            var e = t.ey - t.oldey;
            this.__reAllocateReport(t);
            this.__offsetReport(t.oldey, e)
        } else if(t.oldey && t.oldHeight) {
            var e = t.oldey - t.ey;
            this.__offsetReport(t.ey, e);
            t.ey = t.oldey;
            this.__reAllocateReport(t);
            delete t.oldey;
            delete t.oldHeight
        }
    };
    k.__reAllocateReport = function(t) {
        this.__globalObj.reportControlObj[t.reportId].__allocateSingleReport()
    };
    return w
}, 1, 3, 6, 4, 19, 142, 14, 15, 7, 34, 55, 329, 136, 164, 330, 331, 332, 333, 334, 335, 336, 337, 82);
I$(338, function(t, e, i, n, r, a, s, o, l) {
    r._$$LazyLoading = t._$klass();
    l = r._$$LazyLoading._$extend(n._$$EventTarget);
    l.__reset = function(t) {
        this.__super(t);
        this.__name = t.attr || "";
        this.__parent = e._$get(t.parent);
        this.__doInitDomEvent([
            [this.__parent || window, "scroll", this.__doCheckScrollPosition._$bind(this)]
        ]);
        this._$refresh()
    };
    l.__destroy = function() {
        delete this.__parent;
        this.__super()
    };
    l.__getScrollViewPort = function() {
        return this.__parent || e._$getPageBox()
    };
    l.__getSettingInfo = function(t) {
        var n = {};
        i._$forEach(this.__name.split(","), function(i) {
            n[i] = e._$dataset(t, i)
        });
        return n
    };
    l.__doCheckScrollPosition = function() {
        var t = {
            "-1": "onremove",
            1: "onappend"
        };
        return function(e) {
            var n = this.__getResourceList(this.__parent || document),
                r = this.__getScrollViewPort();
            i._$forEach(n, function(e) {
                var i = {
                    target: e,
                    config: r
                };
                this._$dispatchEvent("oncheck", i);
                var n = i.value;
                if(null == n) n = this.__doCheckResource(e, r);
                var a = t[n];
                if(a) {
                    var i = {
                        target: e,
                        config: this.__getSettingInfo(e)
                    };
                    this._$dispatchEvent(a, i);
                    if(!i.stopped)
                        if(n == -1) this.__doRemoveResource(e);
                        else this.__doAppendResource(e, i.config)
                }
            }, this)
        }
    }();
    l.__getResourceList = s;
    l.__doCheckResource = s;
    l.__doRemoveResource = s;
    l.__doAppendResource = s;
    l._$refresh = function() {
        this.__doCheckScrollPosition()
    }
}, 1, 3, 4, 19);
I$(165, function(t, e, i, n, r, a, s, o, l, c) {
    a._$$LazyQuery = t._$klass();
    c = a._$$LazyQuery._$extend(r._$$LazyLoading);
    c.__reset = function(t) {
        this.__reportIdArr = [];
        this.__super(t)
    };
    c.__getResourceList = function(t) {
        return i._$getByClassName(t || document.body, "chart-item")
    };
    c.__doCheckResource = function(t, e) {
        var n = window.innerHeight,
            r = i._$offset(t).y - (document.body.scrollTop || document.documentElement.scrollTop),
            a = r + t.offsetHeight;
        this.__getSettingInfo(t);
        if(0 <= a && r <= n) return 1;
        else return 0
    };
    c.__doRemoveResource = function(t) {};
    c.__doAppendResource = function(t, e) {
        var i = this,
            r = e.reportid,
            a = !1;
        if(r) {
            n._$forIn(i.__reportIdArr, function(t, e) {
                if(t == r) {
                    a = !0;
                    return !0
                }
            });
            if(0 == a) {
                this.__reportIdArr.push(r);
                this._$dispatchEvent("onadd", e, this.__reportIdArr)
            }
        }
    };
    c.__destroy = function() {
        delete this.__reportIdArr;
        this.__super()
    }
}, 1, 131, 3, 4, 338);
I$(339, '<meta charset="utf-8"/>\n<!-- @TEMPLATE -->\n<textarea name="ntp" id="#<rt>"></textarea>\n\n<textarea name="jst" id="jst-create-chart">\n<div class="chart-item {if !edit}chart-item-show{else}chart-item-edit{/if} {if wap}chart-item-wap{/if}" style="left:${left}px;top:${top}px;width:${width}px;height:${height}px" id="chart-item-${reportId}" data-reportid="${reportId}" data-hover="chart-item">\n    {if edit}\n    <ul class="u-menu menu-filter" data-reportid="${reportId}">\n        <li data-action="filter-pos">设置筛选器位置</li>\n        {list allFilterList as x}\n        <li class="f-ellipsis pill" title="${x.ptext}" data-action="filter-add" data-pid="${x.pid}" id="menu-filter-pill-${x.pid}-${reportId}"><span class="u-icn u-icn-filter" title="未使用"></span>${x.ptext}</li>\n        {/list}\n        {if !parentTabId}<li class="" data-action="position-filter">设为全局筛选器</li>{/if}\n    </ul>\n    {if parentTabId}\n    <div class="tab-opt">\n        {if report.permission == 3}<div class="f-fl icn-box"><a href="/report/edit?pid=${projectId}&rid=${reportId}" class="u-icn u-icn-edit" title="编辑报表" target="_blank"></a></div>{/if}\n        <div class="f-fl icn-box"><div class="u-icn u-icn-filter4" data-action="filter-icon" title="筛选器"></div></div>\n        <div class="f-fl icn-box"><div class="u-icn u-icn-del" data-action="del" data-reportid="${reportId}" title="删除"></div></div>\n    </div>\n    {else}\n    <div class="ttl ttl-1">\n        <span class="wrd f-ellipsis" data-drag="1" data-type="0" data-reportid="${reportId}"></span>\n        <div class="u-icn u-icn-line2" data-drag="1" data-type="0" data-reportid="${reportId}"></div>\n        <div class="opt">\n            <div class="auto" id="autoheight-${reportId}" {if !canAuto}style="display:none;"{/if}>\n                <label><input type="checkbox" class="auto-checkbox" {if showMode==\'auto\'}checked{/if}>自动调整高度</label>\n            </div>\n            {if report.permission == 3}<a href="/report/edit?pid=${projectId}&rid=${reportId}" class="u-icn u-icn-edit" title="编辑报表" target="_blank"></a>{/if}\n            <div class="u-icn u-icn-filter4" data-action="filter-icon" title="筛选器"></div>\n            <div class="u-icn u-icn-close" data-action="del" data-reportid="${reportId}" title="删除"></div>\n        </div>\n    </div>\n    {/if}\n    {if !parentTabId}\n    <div class="inr">\n        <span class="lefttop" data-drag="2" data-type="0" data-mold="5" data-reportid="${reportId}">&nbsp;</span>\n        <span class="top" data-drag="2" data-type="0" data-mold="1" data-reportid="${reportId}">&nbsp;</span>\n        <span class="righttop" data-drag="2" data-type="0" data-mold="6" data-reportid="${reportId}">&nbsp;</span>\n        <span class="right" data-drag="2" data-type="0" data-mold="2" data-reportid="${reportId}">&nbsp;</span>\n        <span class="rightbottom" data-drag="2" data-type="0" data-mold="7" data-reportid="${reportId}">&nbsp;</span>\n        <span class="bottom" data-drag="2" data-type="0" data-mold="3" data-reportid="${reportId}">&nbsp;</span>\n        <span class="leftbottom" data-type="0" data-drag="2" data-mold="8" data-reportid="${reportId}">&nbsp;</span>\n        <span class="left" data-type="0" data-drag="2" data-mold="4" data-reportid="${reportId}">&nbsp;</span>\n    </div>\n    <div class="inr-point">\n        <span class="lefttop">&nbsp;</span>\n        <span class="top">&nbsp;</span>\n        <span class="righttop">&nbsp;</span>\n        <span class="right">&nbsp;</span>\n        <span class="rightbottom">&nbsp;</span>\n        <span class="bottom">&nbsp;</span>\n        <span class="leftbottom">&nbsp;</span>\n        <span class="left">&nbsp;</span>\n    </div>\n    {/if}\n    {/if}\n    <div class="f-fl draw-box" {if !wap}style="width:${drawWidth}px"{/if} id="draw-box-${reportId}">\n        {if !parentTabId}{if edit}<div class="cut-line" data-drag="3" data-ftype="0" data-reportid="${reportId}"></div>{/if}{/if}\n        <div class="ttl">\n            <span class="wrd f-ellipsis" title="${report.title}" id="chart-title-${reportId}">${report.title}</span>\n            {if report.description}\n            <div class="description">\n                <div class="u-icn u-icn-description"></div>\n                <div class="u-menu u-menu-description">\n                    <div class="desc">${report.description}</div>\n                </div>\n            </div>\n            {/if}\n            <div class="opt {if wap||cockpit}f-vbh{/if}">\n                <div class="u-icn u-icn-table" data-action="table" title="查看数据" data-reportid="${reportId}" id="table-${reportId}"></div>\n                <div class="u-icn u-icn-search1" data-action="refresh" title="查询" data-reportid="${reportId}" id="refresh-${reportId}"></div>\n                {if !edit}\n                <div class="u-icn u-icn-more2" data-action="more" title="更多操作" data-reportid="${reportId}"></div>\n                {/if}\n            </div>\n            {if !edit}\n            <ul class="u-menu u-menu-more">\n                <li style="cursor:default;"><div class="u-icn u-icn-more2"></div></li>\n                {if report.permission==3}<a href="/report/edit?pid=${projectId}&rid=${reportId}" target="_blank"><li title="编辑报表"><span class="u-icn u-icn-edit"></span>编辑</li></a>{/if}\n                <li data-action="reset" title="复原"><span class="u-icn u-icn-erase"></span>复原</li>\n            </ul>\n            {/if}\n        </div>\n        <!-- 顶部筛选器 -->\n        <div class="filter-box-top f-cb {if filterPosition==\'top\'&&filter.length>0}z-open{/if}" id="filter-box-top-${reportId}">\n            <div class="filter-box-top-inner" id="filter-box-top-inner-${reportId}">\n\n            </div>\n        </div>\n        <div class="chart-box" style="height:${drawHeight}px;overflow:hidden;" id="chart-box-${reportId}">\n\n        </div>\n    </div>\n    <!-- 右侧筛选器 -->\n    <div class="f-fr filter-box filter-box-right" style="width:${filterWidth}px" id="filter-box-right-${reportId}">\n        <div class="filter-box-inner filter-box-right-inner f-cb" id="filter-box-right-inner-${reportId}">\n\n        </div>\n        <div class="arrow-line up" data-action="filter-up"><span class="u-icn u-icn-arrow"></span></div>\n        <div class="arrow-line down" data-action="filter-down"><span class="u-icn u-icn-arrow-u"></span></div>\n    </div>\n\n    {if wap}\n    <div class="wap-mask" data-action="wap-mask"></div>\n    {/if}\n</div>\n</textarea>');
I$(346, '<meta charset="utf-8"/>\n<!-- @TEMPLATE -->\n<textarea name="ntp" id="#<rt>"></textarea>\n\n<textarea name="jst" id="jst-global-filter-right-box">\n<div class="slide-icn" data-action="slide">\n    <div class="u-icn u-icn-arrow"></div>\n</div>\n<div class="m-chart m-global-filter m-global-filter-1 f-fr {if !edit}m-global-filter-show{else}m-global-filter-edit{/if}">\n    <div class="gttl">全局筛选器</div>\n    <div class="gopt">\n        {if edit}<div class="u-icn u-icn-set" title="设置筛选器位置" data-action="filter-pos"></div>{/if}\n        <!-- <div class="u-icn u-icn-search1" title="查询" data-action="run"></div> -->\n        <div class="u-btn u-btn-1" data-action="run">查询</div>\n    </div>\n    <div class="filter-box z-open"></div>\n</div>\n</textarea>\n<textarea name="jst" id="jst-global-filter-top-box">\n<div class="m-chart m-global-filter m-global-filter-2 {if !edit}m-global-filter-show{else}m-global-filter-edit{/if}">\n    <div class="gfbox">\n        <div class="filter-box-top f-cb"></div>\n        <div class="gopt">\n            {if edit}<div class="u-icn u-icn-set" title="设置筛选器位置" data-action="filter-pos"></div>{/if}\n            <!-- <div class="u-icn u-icn-search1" title="查询" data-action="run"></div> -->\n            <div class="u-btn u-btn-1" data-action="run">查询</div>\n        </div>\n    </div>\n</div>\n</textarea>\n');
I$(516, ".#<uispace>{}\n.#<uispace> .winbd{padding:30px 80px;}\n.#<uispace> .winbd label{display:block;}\n.#<uispace> .winbd .m-search{margin-bottom:12px;}\n.#<uispace> .winbd .from{color:#ccc;}\n.#<uispace> .winbd .result{margin-bottom:0;border-bottom:0;max-height:none;}\n.#<uispace> .winbd .u-list li:hover{background:transparent;}");
I$(517, '<textarea name="txt" id="#<subTxt>">\n<div class="winbd">\n\n</div>\n<div class="zft">\n  <button type="button" class="u-btn u-btn-1 u-btn-s1 btn-ok" name="btn-ok">确定</button>\n  <button type="button" class="u-btn u-btn-2 u-btn-s1 btn-cc" name="btn-cc">取消</button>\n</div>\n</textarea>\n<textarea name="jst" id="#<seedversion>">\n</textarea>\n\n<textarea name="jst" id="jst-window-report-list">\n<div class="tab_content m-tsearch">\n    <div class="m-search">\n        <div class="search" >\n            <input placeholder="输入关键词搜索" class="search-ipt">\n            <i class="u-icn u-icn-close" data-action="search-clear"></i>\n        </div>\n    </div>\n    <ul class="result u-list">\n        <li class="all"><label><input type="checkbox" class="all-check" data-action="select-all" {if reportIdArr.length==chartList.length || type==0}checked="checked"{/if}><b>全部可关联的报表</b></label></li>\n        {list chartList as x}\n            {if x.reportId}\n                {if x.reportId==reportId}\n                    <li class="li from" data-text="${x.report.title}"><label class="f-ellipsis" title="${x.report.title}"><input type="checkbox" class="" checked="checked" disabled data-reportid="${x.reportId}"><b>${x.report.title}&nbsp;&nbsp;当前报表</b></label></li>\n                {else}\n                    {var select=false}\n                    {list reportIdArr as y}\n                        {if y==x.reportId}{var select=true}{/if}\n                    {/list}\n                    {if x.filterUsed}\n                    <li class="li from" data-text="${x.report.title}"><label class="f-ellipsis" title="${x.report.title}"><input type="checkbox" class="" disabled data-reportid="${x.reportId}"><b>${x.report.title}&nbsp;&nbsp;已被其他筛选器应用</b></label></li>\n                    {elseif x.reportDisabled}\n                    <li class="li from" data-text="${x.report.title}"><label class="f-ellipsis" title="${x.report.title}"><input type="checkbox" class="" disabled data-reportid="${x.reportId}"><b>${x.report.title}&nbsp;&nbsp;无法应用于该报表</b></label></li>\n                    {else}\n                    <li class="li" data-text="${x.report.title}"><label class="f-ellipsis" title="${x.report.title}"><input type="checkbox" {if select==true || type==0}checked="checked"{/if} class="li-check" data-action="select-item" data-reportid="${x.reportId}"><b>${x.report.title}</b></label></li>\n                    {/if}\n                {/if}\n            {/if}\n        {/list}\n    </ul>\n</div>\n</textarea>\n\n');
I$(722, function(t, e, i, n, r, a, s, o, l, c) {
    a._$$Draggable = e._$klass();
    c = a._$$Draggable._$extend(r._$$EventTarget);
    c.__reset = function(t) {
        this.__super(t);
        this.__overflow = !!t.overflow;
        this.__body = i._$get(t.body);
        this.__mbar = i._$get(t.mbar) || this.__body;
        this.__view = i._$get(t.view) || i._$getPageBox();
        this.__direction = parseInt(t.direction) || 0;
        this.__doInitDomEvent([
            [document, "mouseup", this.__onDragEnd._$bind(this)],
            [document, "mousemove", this.__onDragging._$bind(this)],
            [this.__mbar, "mousedown", this.__onDragStart._$bind(this)]
        ])
    };
    c.__destroy = function() {
        this.__super();
        this.__onDragEnd();
        delete this.__body;
        delete this.__mbar;
        delete this.__view
    };
    c.__getMaxRange = function() {
        return {
            x: this.__view.clientWidth - this.__body.offsetWidth,
            y: this.__view.clientHeight - this.__body.offsetHeight
        }
    };
    c.__onDragStart = function(t) {
        n._$stop(t);
        if(!this.__offset) {
            this.__offset = {
                x: n._$pageX(t),
                y: n._$pageY(t)
            };
            this.__maxbox = this.__getMaxRange()
        }
    };
    c.__onDragging = function(t) {
        if(this.__offset) {
            n._$stop(t);
            var e = {
                    x: n._$pageX(t),
                    y: n._$pageY(t)
                },
                r = e.x - this.__offset.x,
                a = e.y - this.__offset.y,
                s = parseInt(i._$getStyle(this.__body, "top")) || 0,
                o = parseInt(i._$getStyle(this.__body, "left")) || 0,
                l = {
                    top: s + a,
                    left: o + r
                };
            this.__offset = e;
            this._$setPosition(l)
        }
    };
    c.__onDragEnd = function(t) {
        if(this.__offset) {
            delete this.__maxbox;
            delete this.__offset;
            this._$dispatchEvent("ondragend", this._$getPosition())
        }
    };
    c.__doFixPosition = function(t) {
        if(!this.__overflow) {
            var e = this.__maxbox || this.__getMaxRange();
            t.top = Math.min(e.y, Math.max(0, t.top));
            t.left = Math.min(e.x, Math.max(0, t.left))
        }
    };
    c._$setPosition = function(t) {
        t.top = Math.round(t.top);
        t.left = Math.round(t.left);
        this._$dispatchEvent("onbeforechange", t);
        var e = this.__body.style;
        if(0 == this.__direction || 2 == this.__direction) e.top = t.top + "px";
        if(0 == this.__direction || 1 == this.__direction) e.left = t.left + "px";
        this._$dispatchEvent("onchange", t)
    };
    c._$getPosition = function() {
        return {
            left: parseInt(i._$getStyle(this.__body, "left"), 10) || 0,
            top: parseInt(i._$getStyle(this.__body, "top"), 10) || 0
        }
    };
    a._$$Dragger = a._$$Draggable;
    if(!0) t.copy(t.P("nej.ut"), a);
    return a
}, 129, 1, 3, 6, 19);
I$(723, ".#<uispace>{position:absolute;z-index:1000;border:1px solid #aaa;background:#fff;}\n.#<uispace> .zbar{line-height:30px;background:#8098E7;border-bottom:1px solid #aaa;}\n.#<uispace> .zcnt{padding:10px 5px;}\n.#<uispace> .zttl{margin-right:20px;text-align:left;}\n.#<uispace> .zcls{position:absolute;top:5px;right:0;width:20px;height:20px;line-height:20px;cursor:pointer;}\n");
I$(724, '<div>\n  <div class="zbar"><div class="zttl">标题</div></div>\n  <div class="zcnt"></div>\n  <span class="zcls" title="关闭窗体">×</span>\n</div>');
I$(617, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f, p) {
    var _, m = i._$pushCSSText(c),
        g = l._$addNodeTemplate(u);
    d._$$Window = e._$klass();
    _ = d._$$Window._$extend(a._$$Layer);
    _.__init = function() {
        this.__mopt = {};
        this.__dopt = {
            onchange: this.__onDragging._$bind(this)
        };
        this.__super()
    };
    _.__reset = function(t) {
        this.__super(t);
        this.__setMask(t.mask);
        this._$setAlign(t.align);
        this._$setTitle(t.title);
        if(t.draggable) this.__dragger = o._$$Dragger._$allocate(this.__dopt)
    };
    _.__destroy = function() {
        this.__super();
        delete this.__align;
        delete this.__mclz;
        if(this.__imask) {
            this.__imask._$recycle();
            delete this.__imask
        }
        if(this.__dragger) {
            this.__dragger._$recycle();
            delete this.__dragger
        }
    };
    _.__initXGui = function() {
        this.__seed_css = m;
        this.__seed_html = g
    };
    _.__initNode = function() {
        this.__super();
        var t = i._$getChildren(this.__body);
        this.__ncnt = t[1];
        this.__dopt.mbar = t[0];
        this.__dopt.body = this.__body;
        n._$addEvent(t[2], "mousedown", this.__onClose._$bind(this));
        n._$addEvent(this.__dopt.mbar, "mousedown", this.__onDragStart._$bind(this));
        this.__nttl = i._$getChildren(this.__dopt.mbar)[0]
    };
    _.__onClose = function(t) {
        n._$stop(t);
        this._$dispatchEvent("onclose");
        this._$hide()
    };
    _.__onDragStart = function(t) {
        n._$dispatchEvent(document, "click")
    };
    _.__onDragging = function(t) {
        if(this.__mask) i._$style(this.__mask, {
            top: t.top + "px",
            left: t.left + "px"
        })
    };
    _.__doPositionAlign = function() {
        var t = [function() {
                return 0
            }, function(t, e, i) {
                return Math.max(0, t[i] + e[i] / 2)
            }, function(t, e, i) {
                return t[i] + e[i]
            }],
            e = ["left", "top"];
        return function() {
            var n = {},
                a = (this.__body.style, i._$getPageBox()),
                s = {
                    left: a.scrollLeft,
                    top: a.scrollTop
                },
                o = {
                    left: a.clientWidth - this.__body.offsetWidth,
                    top: a.clientHeight - this.__body.offsetHeight
                };
            r._$forEach(e, function(e, i) {
                var r = t[this.__align[i]];
                if(r) n[e] = r(s, o, e)
            }, this);
            this._$setPosition(n)
        }
    }();
    _.__doShowMask = function() {
        if(!this.__imask) {
            if(!this.__mclz) return;
            this.__mopt.parent = this.__parent;
            this.__imask = this.__mclz._$allocate(this.__mopt)
        }
        this.__imask._$show()
    };
    _.__doHide = function() {
        if(this.__imask) this.__imask._$hide();
        this.__super()
    };
    _.__setMask = function(t) {
        if(!t) this.__mclz = null;
        else {
            if(t instanceof s._$$Mask) {
                this.__imask = t;
                return
            }
            if(r._$isFunction(t)) {
                this.__mclz = t;
                return
            }
            this.__mclz = s._$$Mask;
            if(r._$isString(t)) this.__mopt.clazz = t
        }
    };
    _._$setTitle = function(t, e) {
        if(this.__nttl) {
            var i = !e ? "innerText" : "innerHTML";
            this.__nttl[i] = t || "标题"
        }
        return this
    };
    _._$setAlign = function() {
        var t = /\s+/,
            e = {
                left: 0,
                center: 1,
                right: 2,
                auto: 3
            },
            i = {
                top: 0,
                middle: 1,
                bottom: 2,
                auto: 3
            };
        return function(n) {
            this.__align = (n || "").split(t);
            var r = e[this.__align[0]];
            if(null == r) r = 1;
            this.__align[0] = r;
            var r = i[this.__align[1]];
            if(null == r) r = 1;
            this.__align[1] = r;
            return this
        }
    }();
    _._$show = function() {
        this.__super();
        this.__doShowMask();
        return this
    };
    if(!0) t.copy(t.P("nej.ui"), d);
    return d
}, 129, 1, 3, 6, 4, 721, 145, 722, 14, 723, 724);
I$(485, function(t, e, i, n, r, a, s, o) {
    var l;
    r._$$WindowWrapper = e._$klass();
    l = r._$$WindowWrapper._$extend(i._$$LayerWrapper);
    l.__getLayerInstance = function() {
        return n._$$Window._$allocate(this.__lopt)
    };
    l.__doInitLayerOptions = function() {
        this.__super();
        this.__lopt.mask = null;
        this.__lopt.title = "标题";
        this.__lopt.align = "";
        this.__lopt.draggable = !1;
        this.__lopt.onclose = null
    };
    if(!0) t.copy(t.P("nej.ui"), r);
    return r
}, 129, 1, 616, 617);
I$(328, function(t) {
    return t
}, 485);
I$(159, function(t, e, i, n, r, a, s, o, l) {
    r._$$MyWindow = t._$klass();
    l = r._$$MyWindow._$extend(n._$$WindowWrapper);
    l.__reset = function(t) {
        t.draggable = !0;
        t.destroyable = !0;
        t.parent = document.body;
        t.clazz = "w-win u-rds-2 " + (t.clazz || "");
        this.__supReset(t)
    };
    l.__initNode = function() {
        this.__supInitNode();
        var t = e._$getByClassName(this.__body, "btn-ok")[0],
            n = e._$getByClassName(this.__body, "btn-cc")[0];
        if(t) i._$addEvent(t, "click", this.__onOK._$bind(this));
        if(n) i._$addEvent(n, "click", this._$hide._$bind(this))
    };
    l.__onOK = function() {};
    return r
}, 1, 3, 6, 328);
I$(347, function(t, e, i, n, r, a, s, o, l, c, u) {
    c._$$filterApp = t._$klass();
    u = c._$$filterApp._$extend(l._$$MyWindow);
    var d = e._$pushCSSText(r),
        h = s._$parseUITemplate(a),
        f = h["subTxt"],
        p = (h["seedversion"], s._$addNodeTemplate(s._$getTextTemplate(f)));
    u.__init = function(t) {
        this.__super(t)
    };
    u.__reset = function(t) {
        var i = this;
        t.title = t.title || "筛选应用于";
        t.mask = !0;
        this.__super(t);
        this.__type = t.type;
        this.__chartList = t.chartList.slice(0);
        this.__reportId = t.reportId;
        this.__reportIds = t.reportIds;
        this.__filterData = t.filterData;
        this.__globalFilterList = t.globalFilterList.slice(0);
        if(this.__reportIds) this.__reportIdArr = this.__reportIds.split(",");
        this.__fetchList();
        n._$forIn(this.__globalFilterList, function(t, e) {
            if(t.pid == this.__filterData.pid && t.reportId == this.__reportId) {
                this.__globalFilterList.splice(e, 1);
                return !0
            }
        }._$bind(this));
        var r = [];
        this.__globalFilterList.forEach(function(t) {
            if(t.pid == i.__filterData.pid) r = r.concat(t.reportIds.split(","))
        });
        this.__chartList.forEach(function(t, e) {
            t.filterUsed = !1;
            r.some(function(e, i) {
                if(t.reportId == e) {
                    t.filterUsed = !0;
                    return !0
                }
            })
        });
        var a = {
            chartList: this.__chartList,
            reportId: this.__reportId,
            reportIdArr: this.__reportIdArr || [],
            type: this.__type
        };
        o._$render(this.__winbd, "jst-window-report-list", a);
        this.__searchIpt = e._$getByClassName(this.__body, "search-ipt")[0], this.__uList = e._$getByClassName(this.__body, "u-list")[0];
        this.__checkAllEle = e._$getByClassName(this.__body, "all-check")[0];
        this.__btnOK = e._$getByClassName(this.__body, "btn-ok")[0];
        this.__doInitDomEvent([
            [this.__body, "click", this.__doAction._$bind(this)],
            [this.__searchIpt, "input", this.__doSearch._$bind(this, this.__searchIpt, this.__uList)],
            [this.__searchIpt, "focus", this.__doSearch._$bind(this, this.__searchIpt, this.__uList)],
            [this.__btnOK, "click", this.__onSubmit._$bind(this)]
        ]);
        this.__checkAllElement()
    };
    u.__destroy = function(t) {
        this.__super(t);
        var i = e._$getByClassName(this.__uList, "li-check");
        n._$forEach(i, function(t, e) {
            t.checked = !1
        });
        delete this.__reportIdArr
    };
    u.__initXGui = function() {
        this.__seed_css = d;
        this.__seed_html = p
    };
    u.__initNode = function() {
        this.__super();
        this.__winbd = e._$getByClassName(this.__body, "winbd")[0]
    };
    u.__fetchList = function() {
        var t = this.__filterData.pill.alias;
        this.__chartList.forEach(function(e) {
            if(e.reportId) {
                e.reportDisabled = !0;
                var i = e.report.reportDataModel.pivotSchema,
                    n = i.dimensions.concat(i.measures);
                n.some(function(i) {
                    if(i.alias == t) {
                        e.reportDisabled = !1;
                        return !0
                    }
                })
            }
        })
    };
    u.__doAction = function(t) {
        var n = i._$getElement(t, "d:action"),
            r = e._$dataset(n, "action");
        if(r) switch(r) {
            case "select-all":
                this.__doCheckAll(n, this.__uList);
                break;
            case "select-item":
                this.__checkAllElement();
                break;
            case "search-clear":
                this.__searchIpt.value = "";
                this.__searchIpt.focus()
        }
    };
    u.__doSearch = function(t, i) {
        var r = t.value.trim(),
            a = e._$getByClassName(i, "li");
        n._$forEach(a, function(t, i) {
            var n = e._$dataset(t, "text"),
                a = new RegExp(r, "i");
            if(n.search(a) != -1) e._$delClassName(t, "f-dn");
            else e._$addClassName(t, "f-dn")
        })
    };
    u.__doCheckAll = function(t, i) {
        var r = e._$getByClassName(i, "li-check");
        n._$forEach(r, function(e, i) {
            if(1 == t.checked) e.checked = !0;
            else e.checked = !1
        })
    };
    u.__checkAllElement = function() {
        var t = e._$getByClassName(this.__uList, "li-check"),
            i = !0;
        n._$forEach(t, function(t, e) {
            if(1 == t.checked);
            else i = !1
        });
        this.__checkAllEle.checked = i
    };
    u.__onSubmit = function() {
        var t = e._$getByClassName(this.__uList, "li-check"),
            i = [];
        n._$forEach(t, function(t, n) {
            if(1 == t.checked) {
                var r = e._$dataset(t, "reportid");
                i.push(r)
            }
        });
        i.push(this.__reportId);
        var r = {
            reportId: this.__reportId,
            reportIds: i.join(","),
            filterData: this.__filterData
        };
        this._$dispatchEvent("onok", r);
        this._$hide()
    };
    return c
}, 1, 3, 6, 4, 516, 517, 14, 15, 159);
I$(340, function(t, e, i, n, r, a, s, o, l, c, u, d, h) {
    d._$$NativeFilter = t._$klass();
    h = d._$$NativeFilter._$extend(c._$$Module);
    var f = a._$parseUITemplate(o);
    f["rt"];
    h.__reset = function(t) {
        this.__super(t);
        this.__options = t.options;
        this.__dashData = t.dashData;
        this.__reportId = this.__dashData.reportId;
        this.__filterPosition = this.__dashData.filterPosition || "right";
        this.__nativeFilter = this.__dashData.filter;
        this.__category = "native";
        if("right" == this.__filterPosition) {
            this.__body = e._$get("filter-box-right-" + this.__reportId);
            this.__sbody = e._$get("filter-box-right-inner-" + this.__reportId)
        } else if("top" == this.__filterPosition) {
            this.__body = e._$get("filter-box-top-" + this.__reportId);
            this.__sbody = e._$get("filter-box-top-inner-" + this.__reportId)
        }
        this.__chartItem = e._$get("chart-item-" + this.__dashData.reportId);
        if(this.__chartItem) this.__filterMenu = e._$getByClassName(this.__chartItem, "menu-filter")[0];
        this.__initFilter();
        this.__doInitDomEvent([
            [this.__body, "click", this.__doAction._$bind(this)]
        ])
    };
    h.__destroy = function() {
        delete this.__body;
        delete this.__sbody;
        delete this.__chartItem;
        delete this.__filterMenu;
        if(this.__filterApp) this.__filterApp._$recycle()
    };
    h.__initFilter = function() {
        var t = this;
        this.__nativeFilter.forEach(function(e) {
            e.source = "native";
            e.ptext = l.ptext(e.pill);
            e.pid = l.pid(e.pill);
            e.edit = t.__edit
        });
        n._$forEach(this.__nativeFilter, function(t) {
            if(1 == t.select) this.__newsFilter(t)
        }._$bind(this));
        this.__setFilterStatus(!0)
    };
    h.__setFilterStatus = function(t) {
        var i = this.__dashData,
            r = i.filter;
        this.__setMenuStatus(i);
        var a = e._$getByClassName(this.__body, "filter-item");
        n._$forEach(a, function(t, i) {
            e._$delClassName(t, "z-open");
            e._$delClassName(t, "z-show")
        });
        var s = !1;
        e._$delClassName(this.__body, "z-scroll");
        n._$forIn(r, function(t, e) {
            if(1 == t.open) {
                s = !0;
                return !0
            }
        });
        if(0 == s) {
            n._$forEach(r, function(t, e) {
                t.show = !0
            });
            e._$addClassName(this.__body, "z-scroll")
        }
        n._$forEach(r, function(t, i) {
            if(1 == t.show) {
                var n = e._$get("filter-item-" + t.pid + "-" + t.reportId);
                e._$addClassName(n, "z-show")
            }
            if(1 == t.open && 1 == t.show && 1 == t.select) {
                var n = e._$get("filter-item-" + t.pid + "-" + t.reportId);
                e._$addClassName(n, "z-open")
            }
        }._$bind(this));
        if("right" == this.__filterPosition) {
            var o, l = e._$getByClassName(this.__body, "up")[0],
                c = e._$getByClassName(this.__body, "down")[0],
                u = a.length;
            if(u > 2) {
                if(0 == s) e._$delClassName(this.__body, "z-more");
                else e._$addClassName(this.__body, "z-more");
                o = this.__chartItem.offsetHeight - 30 - 72 - 2
            } else {
                e._$delClassName(this.__body, "z-more");
                if(1 == u) o = this.__chartItem.offsetHeight - 36 - 3;
                else if(2 == u) o = this.__chartItem.offsetHeight - 72 - 2
            }
            if(!this.__edit) o += 2;
            n._$forEach(a, function(t, i) {
                var n = e._$getByClassName(t, "filter-item-inner")[0];
                if(n) e._$setStyle(n, "height", o + "px")
            });
            if(u > 2) {
                e._$delClassName(l, "z-dis");
                e._$delClassName(c, "z-dis");
                if(e._$hasClassName(a[0], "z-show")) e._$addClassName(l, "z-dis");
                if(e._$hasClassName(a[u - 1], "z-show")) e._$addClassName(c, "z-dis")
            }
        }
        if(!t) this._$nevRender(this.__dashData)
    };
    h.__setMenuStatus = function(t) {
        var i = this,
            r = e._$getByClassName(this.__filterMenu, "pill"),
            a = function(t, n) {
                var r = e._$get("menu-filter-pill-" + t + "-" + i.__reportId);
                if(r) {
                    var a = e._$getByClassName(r, "u-icn")[0];
                    switch(n) {
                        case 1:
                            if(a) a.setAttribute("title", "未使用");
                            break;
                        case 2:
                            if(e._$hasClassName(r, "js-selected")) return;
                            e._$addClassName(r, "js-used");
                            if(a) a.setAttribute("title", "已使用");
                            break;
                        case 3:
                            e._$addClassName(r, "js-selected");
                            if(a) a.setAttribute("title", "已打开")
                    }
                }
            };
        n._$forEach(r, function(t, i) {
            e._$delClassName(t, "js-selected");
            e._$delClassName(t, "js-used");
            var n = e._$dataset(t, "pid");
            a(n, 1)
        });
        n._$forEach(t.filter, function(t, i) {
            if(1 == t.select) n._$forEach(r, function(i, n) {
                var r = e._$dataset(i, "pid");
                if(t.pid == r) a(r, 3)
            })
        });
        var s = this.__mergeFilter(t),
            o = this.__mergeMeasures(t);
        n._$forEach(s, function(t, e) {
            if(t.filter)
                if(t.filter.select || t.filter.unselect || t.filter.limit || t.filter.condition || t.filter.match || t.filter.top || t.filter.date) {
                    var i = l.pid(t.pill);
                    a(i, 2)
                }
        });
        if(o.length > 0) n._$forIn(t.allFilterList, function(t, e) {
            if("mname" == t.pill.field) {
                var i = l.pid(t.pill);
                a(i, 2)
            }
        })
    };
    h.__doAction = function(t) {
        var r = i._$getElement(t, "d:action"),
            a = e._$dataset(r, "action");
        if(a) {
            this.__globalObj.dataChanged = !0;
            i._$stop(t);
            switch(a) {
                case "filter-min":
                    var s = e._$dataset(r, "pid");
                    this._$closeFilter(s);
                    break;
                case "filter-toggle":
                    this.__closeAllMenu();
                    if(e._$hasClassName(r.parentNode, "z-open")) this.__toggleFilter(r, 1);
                    else this.__toggleFilter(r, 0);
                    break;
                case "filter-up":
                    if(!e._$hasClassName(r, "z-dis")) this.__upDownFilter(0);
                    break;
                case "filter-down":
                    if(!e._$hasClassName(r, "z-dis")) this.__upDownFilter(1);
                    break;
                case "filter-info":
                    this.__closeAllMenu();
                    this.__closeDropTabs(t);
                    var s = e._$dataset(r, "pid"),
                        o = this.__findFilterData(s);
                    this.__filterInfoShow("native", o);
                    break;
                case "filter-config":
                    this.__closeAllMenu();
                    var s = e._$dataset(r, "pid"),
                        l = e._$get("filter-item-" + s + "-" + this.__reportId),
                        c = e._$getByClassName(l, "menu-filter-config")[0],
                        d = e._$getByClassName(l, "close-datepick");
                    n._$forEach(d, function(t, e) {
                        t.click()
                    });
                    e._$addClassName(c, "opened");
                    break;
                case "filter-dimension-select":
                    this.__filterDimensionSelect(r);
                    break;
                case "filter-app":
                    this.__closeAllMenu();
                    var s = e._$dataset(r, "pid"),
                        o = this.__findFilterData(s),
                        h = {
                            title: o.ptext + " 筛选应用于",
                            chartList: this.__chartList,
                            reportId: this.__reportId,
                            filterData: o,
                            globalFilterList: this.__globalFilterList,
                            type: 0,
                            onok: this.__onOK._$bind(this)
                        };
                    if(this.__filterApp) this.__filterApp._$recycle();
                    this.__filterApp = u._$$filterApp._$allocate(h);
                    this.__filterApp._$show();
                    break;
                case "sel-toggle":
                    this.__selToggle(r);
                    this.__closeDropTabs(t)
            }
        }
    };
    h._$addFilter = function(t, e) {
        var i = this.__findPill(t);
        if(e) {
            if(e.filter && e.filter.pill) delete e.filter.pill.source;
            var r = {
                reportId: e.reportId,
                select: !0,
                show: !0,
                open: !0,
                pill: e.pill,
                mode: e.mode,
                filter: e.filter,
                measures: e.measures,
                edit: this.__edit,
                source: "native",
                ptext: l.ptext(e.pill),
                pid: l.pid(e.pill)
            }
        } else {
            var r, a = !1;
            n._$forEach(this.__dashData.filter, function(e, i) {
                if(e.pid == t) {
                    a = !0;
                    r = e;
                    this.__dashData.filter.splice(i, 1);
                    return !0
                }
            }._$bind(this));
            if(1 == a) {
                r.select = !0;
                r.open = !0;
                r.show = !0;
            } else r = {
                reportId: this.__reportId,
                select: !0,
                show: !0,
                open: !0,
                pill: i,
                edit: this.__edit,
                source: "native",
                ptext: l.ptext(i),
                pid: l.pid(i)
            }
        }
        if("right" == this.__filterPosition) {
            n._$forEach(this.__dashData.filter, function(t, e) {
                t.show = !1;
                t.open = !1
            });
            this.__dashData.filter.push(r);
            var s = [],
                o = [];
            n._$forEach(this.__dashData.filter, function(t, e) {
                if(1 == t.select) s.push(t);
                else o.push(t)
            }._$bind(this));
            var c = s.length;
            if(c > 1) s[c - 2].show = !0;
            this.__dashData.filter = o.concat(s)
        } else this.__dashData.filter.push(r);
        this.__newsFilter(r);
        this.__setFilterStatus()
    };
    h._$closeFilter = function(t) {
        var i = this.__dashData.filter.some(function(e) {
            if(e.pid == t && 1 == e.select) return !0
        });
        if(i) {
            n._$forIn(this.__dashData.filter, function(e, i) {
                if(e.pid == t) {
                    e.select = !1;
                    e.open = !1;
                    e.show = !1;
                    return !0
                }
            }._$bind(this));
            e._$remove(e._$get("filter-item-" + t + "-" + this.__reportId), !1);
            var r = [],
                a = [];
            n._$forEach(this.__dashData.filter, function(t, e) {
                if(1 == t.select) r.push(t);
                else a.push(t)
            }._$bind(this));
            var s = r.length;
            if(s > 1) {
                var o = n._$forIn(r, function(t, e) {
                    if(1 == t.show) return !0
                }._$bind(this));
                if(o == s - 1) r[o - 1].show = !0;
                else r[o + 1].show = !0
            }
            this.__dashData.filter = a.concat(r);
            this.__setFilterStatus();
            this.__promiseAll()
        }
    };
    h.__findPill = function(t) {
        var e = {};
        n._$forIn(this.__dashData.allFilterList, function(i, n) {
            if(i.pid == t) {
                e = i.pill;
                return !0
            }
        });
        return e
    };
    h.__findFilterData = function(t) {
        var e = {};
        n._$forIn(this.__dashData.filter, function(i, n) {
            if(i.pid == t) {
                e = i;
                return !0
            }
        });
        return e
    };
    h.__toggleFilter = function(t, i) {
        var r = e._$dataset(t, "pid"),
            a = this.__dashData.filter;
        n._$forEach(a, function(t, e) {
            t.open = !1;
            if(0 == i) t.show = !1
        }._$bind(this));
        n._$forEach(a, function(t, e) {
            if(t.pid == r)
                if(0 == i) {
                    t.open = !0;
                    t.show = !0;
                    if(a[e + 1]) var n = a[e + 1];
                    else if(a[e - 1]) var n = a[e - 1];
                    else var n = a[e];
                    n.show = !0
                } else if(1 == i) t.open = !1
        }._$bind(this));
        this.__setFilterStatus(!0)
    };
    h.__upDownFilter = function(t) {
        n._$forEach(this.__dashData.filter, function(t, e) {
            t.open = !1
        }._$bind(this));
        var e = n._$forIn(this.__dashData.filter, function(t, e) {
            if(1 == t.show) return !0
        }._$bind(this));
        if(0 == t) {
            this.__dashData.filter[e - 1].show = !0;
            this.__dashData.filter[e - 1].open = !0;
            this.__dashData.filter[e + 1].show = !1
        } else if(1 == t) {
            this.__dashData.filter[e].show = !1;
            this.__dashData.filter[e + 2].show = !0;
            this.__dashData.filter[e + 2].open = !0
        }
        this.__setFilterStatus(!0)
    };
    h.__onOK = function(t) {
        var e = this.__getDashData(t.reportId),
            i = t.filterData;
        if(1 != t.reportIds.split(",").length) {
            var r = {
                reportId: t.reportId,
                reportIds: t.reportIds,
                filterHeight: 250,
                filter: i.filter,
                measures: i.measures,
                mode: i.mode,
                pill: i.pill,
                open: !0,
                edit: this.__edit,
                source: "global",
                ptext: l.ptext(i.pill),
                pid: l.pid(i.pill)
            };
            this.__globalObj.globalFilterControl.__newsFilter(r);
            if("right" == this.__globalObj.globalFilterControl.__filterPosition) n._$forEach(this.__globalFilterList, function(t, e) {
                t.open = !1
            }._$bind(this));
            this.__globalFilterList.push(r);
            this._$closeFilter(l.pid(r.pill));
            n._$forIn(e.filter, function(t, n) {
                if(t.pid == i.pid) {
                    e.filter.splice(n, 1);
                    return !0
                }
            }._$bind(this));
            if(1 == this.__globalFilterList.length) {
                this.__globalObj.globalFilterControl.__setGlobalFilterStatus();
                this.__globalObj.globalFilterControl.__reportControl()
            }
            this.__globalObj.globalFilterControl.__setGlobalFilterItemStatus();
            this.__setHasChanged("global", t);
            this.__doAutoRun()
        }
    };
    return d
}, 1, 3, 6, 4, 142, 14, 15, 346, 7, 163, 347);
I$(496, '<textarea name="jst" id="jst-window-filterPos">\n<form name=\'filterPos\'>\n\t<h3 class="winlab">${lab}:</h3>\n\t<div class="u-area">\n\t  <label><input type="radio" name="pos" value=\'right\' />  图表右侧</label>\n\t  <label style="margin-left:10px;"><input type="radio" name="pos" value=\'top\' />  图表上方</label>\n\t</div>\n</form>\n</textarea>');
I$(341, function(t, e, i, n, r, a, s, o, l) {
    var c = {};
    c._$$PopupFilterPos = t._$klass();
    var u = c._$$PopupFilterPos._$extend(o._$$Popup);
    u.__initXGui = function() {
        r._$parseUITemplate(l);
        return function() {
            this.__super()
        }
    }();
    u.__initNode = function() {
        this.__super();
        this.__flag = e._$getByClassName(this.__body, "j-flag")[0]
    };
    u.__reset = function(t) {
        this.__super(t);
        var e = t.data;
        this.__submit = t.onSubmit;
        a._$render(this.__flag, "jst-window-filterPos", e);
        this.form = document.forms.filterPos;
        this.form.pos.value = e.filterPosition
    };
    u.__onSubmit = function() {
        var t = {
            position: this.form.pos.value
        };
        this.__submit(t);
        this._$close()
    };
    return c
}, 1, 3, 6, 4, 14, 15, 7, 140, 496);
I$(348, function(t, e, i, n, r, a) {
    r._$$SuspendTop = t._$klass();
    a = r._$$SuspendTop._$extend(n._$$EventTarget);
    a.__reset = function(t) {
        this.__super(t);
        this.__clazz = t.clazz;
        this.__wrap = t.wrap;
        this.__wrapTop = e._$offset(this.__wrap).y + t.detaly;
        this.__doInitDomEvent([
            [window, "scroll", this.__main._$bind(this)]
        ]);
        this.__main()
    };
    a.__destroy = function() {
        this.__super();
        delete this.__clazz;
        delete this.__wrap;
        e._$delClassName(this.__wrap, this.__clazz)
    };
    a.__main = function() {
        var t = document.body.scrollTop;
        if(t >= this.__wrapTop) e._$addClassName(this.__wrap, this.__clazz);
        else e._$delClassName(this.__wrap, this.__clazz)
    };
    return r
}, 1, 3, 6, 19);
I$(169, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f, p) {
    f._$$GlobalFilter = t._$klass();
    p = f._$$GlobalFilter._$extend(c._$$Module);
    var _ = a._$parseUITemplate(o);
    _["rt"];
    p.__reset = function(t) {
        this.__super(t);
        this.__options = t.options;
        this.__reloadFun = t.onreload;
        this.__filterPosition = this.__globalFilter.filterPosition;
        this.__category = "global";
        this.__filterRenderObj = {};
        this.__dashboardWrp = e._$getByClassName(document.body, "m-dashboard")[0];
        this.__initOuter();
        this.__resetNode();
        this.__setGlobalFilterStatus();
        this.__initFilterHtml();
        this.__setFixedWidth();
        this.__reportControl();
        this.__setGlobalFilterItemStatus();
        this.__suspend();
        this.__doInitDomEvent([
            [this.__gbox, "click", this.__doAction._$bind(this)],
            [this.__gbox, "mouseover", this.__doMouseOver._$bind(this)],
            [this.__gbox, "mouseout", this.__doMouseOut._$bind(this)]
        ])
    };
    p.__destroy = function() {
        this.__gbox.innerHTML = "";
        if(this.__tmpFilterPos) this.__tmpFilterPos._$recycle();
        if(this.__suspendTop) this.__suspendTop._$recycle();
        if(this.__filterApp) this.__filterApp._$recycle();
        if("right" == this.__filterPosition) {
            e._$delClassName(this.__rbox, "z-gfo");
            e._$delClassName(this.__body, "z-open")
        } else if("top" == this.__filterPosition) e._$delClassName(this.__sbody, "z-open");
        this.__super()
    };
    p.__initOuter = function() {
        var t = "",
            e = {
                open: this.__globalFilter.open,
                edit: this.__edit
            };
        if("right" == this.__filterPosition) t = s._$get("jst-global-filter-right-box", e);
        else if("top" == this.__filterPosition) t = s._$get("jst-global-filter-top-box", e);
        this.__gbox.insertAdjacentHTML("beforeEnd", t)
    };
    p.__resetNode = function() {
        this.__body = e._$getByClassName(this.__gbox, "m-global-filter")[0];
        if("right" == this.__filterPosition) {
            this.__sbody = e._$getByClassName(this.__gbox, "filter-box")[0];
            this.__slideIcon = e._$getByClassName(this.__gbox, "slide-icn")[0]
        } else if("top" == this.__filterPosition) this.__sbody = e._$getByClassName(this.__gbox, "filter-box-top")[0]
    };
    p.__initFilterHtml = function() {
        for(var t = this, e = this.__globalFilterList.length, i = e; i > 0; i--) {
            var r = !1;
            n._$forIn(this.__chartList, function(t, e) {
                if(t.reportId == this.__globalFilterList[i - 1].reportId) {
                    r = !0;
                    return !0
                }
            }._$bind(this));
            if(0 == r) this.__globalFilterList.splice(i - 1, 1)
        }
        this.__checkPill();
        this.__syncPillAliasGlobal();
        this.__globalFilterList.forEach(function(e) {
            e.source = "global";
            e.ptext = l.ptext(e.pill);
            e.pid = l.pid(e.pill);
            e.edit = t.__edit
        });
        n._$forEach(this.__globalFilterList, function(t) {
            this.__newsFilter(t)
        }._$bind(this))
    };
    p.__setGlobalFilterStatus = function() {
        var t = this.__globalFilterList.length;
        if(t < 1) {
            e._$delClassName(this.__body, "z-open");
            e._$delClassName(this.__rbox, "z-gfo");
            e._$delClassName(this.__slideIcon, "oicn");
            e._$delClassName(this.__slideIcon, "cicn")
        } else if("right" == this.__filterPosition) {
            e._$delClassName(this.__slideIcon, "oicn");
            e._$delClassName(this.__slideIcon, "cicn");
            if(this.__globalFilter.open) {
                e._$addClassName(this.__body, "z-open");
                e._$addClassName(this.__rbox, "z-gfo");
                e._$addClassName(this.__slideIcon, "oicn")
            } else {
                e._$delClassName(this.__body, "z-open");
                e._$delClassName(this.__rbox, "z-gfo");
                e._$addClassName(this.__slideIcon, "cicn")
            }
        } else if("top" == this.__filterPosition) {
            if(!this.__wap) e._$addClassName(this.__body, "z-open");
            if(this.__globalFilter.open) e._$addClassName(this.__sbody, "z-open");
            else e._$delClassName(this.__sbody, "z-open")
        }
    };
    p.__checkPill = function(t) {
        n._$reverseEach(t, function(t, e, i) {
            var r = !1,
                a = l.pid(t.pill),
                s = this.__getDashData(t.reportId);
            if(s.report && s.report.reportDataModel && s.report.reportDataModel.pivotSchema) {
                var o = s.report.reportDataModel.pivotSchema.dimensions;
                if(o) n._$forEach(o, function(t, e) {
                    if(a == l.pid(t)) r = !0
                });
                var c = s.report.reportDataModel.pivotSchema.measures;
                if(c) n._$forEach(c, function(t, e) {
                    if(a == l.pid(t)) r = !0
                })
            }
            if(0 == r) i.splice(e, 1)
        }._$bind(this))
    };
    p.__setGlobalFilterItemStatus = function() {
        var t = this,
            i = e._$getByClassName(this.__rbox, "menu-filter");
        n._$forEach(i, function(t, i) {
            var r = e._$getChildren(t);
            n._$forEach(r, function(t, i) {
                e._$delClassName(t, "js-disabled")
            })
        });
        n._$forEach(t.__globalFilterList, function(i, r) {
            var a = i.reportIds.split(","),
                s = i.pid;
            n._$forEach(a, function(i, n) {
                var r = e._$get("menu-filter-pill-" + s + "-" + i);
                if(r) e._$addClassName(r, "js-disabled");
                if(t.__globalObj.reportControlObj[i]) t.__globalObj.reportControlObj[i].__filter._$closeFilter(s)
            })
        });
        n._$forEach(this.__globalFilterList, function(t, i) {
            var n = e._$get("global-filter-item-" + t.pid + "-" + t.reportId);
            e._$delClassName(n, "z-open");
            if(1 == t.open) e._$addClassName(n, "z-open")
        }._$bind(this));
        if(this.__wap) e._$setStyle(this.__dashboardWrp, "margin-top", 0);
        else if(this.__edit)
            if("top" == this.__filterPosition) e._$setStyle(this.__dashboardWrp, "margin-top", this.__body.offsetHeight + 70 + "px");
            else e._$setStyle(this.__dashboardWrp, "margin-top", "70px");
        else if("top" == this.__filterPosition) e._$setStyle(this.__dashboardWrp, "margin-top", this.__body.offsetHeight + 60 + "px");
        else e._$setStyle(this.__dashboardWrp, "margin-top", "50px")
    };
    p.__resetGlobalFilterOptions = function(t) {
        this.__globalItem = i._$getElement(t, "c:filter-item");
        if(!this.__globalItem) this.__globalItem = t;
        this.__globalPid = e._$dataset(this.__globalItem, "pid");
        this.__globalReportId = e._$dataset(this.__globalItem, "reportid");
        this.__globalData = this.__getGlobalFilterData(this.__globalPid, this.__globalReportId);
    };
    p.__doAction = function(t) {
        var r = i._$getElement(t, "d:action"),
            a = e._$dataset(r, "action");
        if(a) {
            this.__dataChanged = !0;
            i._$stop(t);
            switch(a) {
                case "run":
                    this.__getReportPromiseAll();
                    break;
                case "filter-close":
                    this.__resetGlobalFilterOptions(t);
                    this.__closeGlobalFilter();
                    this.__setGlobalFilterItemStatus();
                    this.__doReportLight(1);
                    break;
                case "filter-toggle":
                    this.__closeAllMenu();
                    this.__resetGlobalFilterOptions(t);
                    if(e._$hasClassName(r.parentNode, "z-open")) this.__toggleFilter(1);
                    else this.__toggleFilter(0);
                    break;
                case "filter-info":
                    this.__closeAllMenu();
                    this.__closeDropTabs(t);
                    this.__resetGlobalFilterOptions(t);
                    this.__filterInfoShow("global", this.__globalData);
                    break;
                case "filter-config":
                    this.__closeAllMenu();
                    this.__resetGlobalFilterOptions(t);
                    var s = e._$get("global-filter-item-" + this.__globalPid + "-" + this.__globalReportId),
                        o = e._$getByClassName(s, "menu-filter-config")[0],
                        l = e._$getByClassName(s, "close-datepick");
                    n._$forEach(l, function(t, e) {
                        t.click()
                    });
                    e._$addClassName(o, "opened");
                    break;
                case "filter-dimension-select":
                    this.__filterDimensionSelect(r);
                    break;
                case "filter-app":
                    this.__resetGlobalFilterOptions(t);
                    var c = {
                        title: this.__globalData.ptext + " 筛选应用于",
                        chartList: this.__chartList,
                        reportId: this.__globalData.reportId,
                        reportIds: this.__globalData.reportIds,
                        filterData: this.__globalData,
                        globalFilterList: this.__globalFilterList,
                        type: 1,
                        onok: this.__onOK._$bind(this)
                    };
                    if(this.__filterApp) this.__filterApp._$recycle();
                    this.__filterApp = u._$$filterApp._$allocate(c);
                    this.__filterApp._$show();
                    break;
                case "sel-toggle":
                    this.__selToggle(r);
                    this.__closeDropTabs(t);
                    break;
                case "filter-pos":
                    this.__setFilterPos();
                    break;
                case "slide":
                    this.__slide(r)
            }
        }
    };
    p.__doMouseOver = function(t) {
        var n = i._$getElement(t, "d:hover"),
            r = e._$dataset(n, "hover");
        if(r) switch(r) {
            case "filter-item":
                this.__resetGlobalFilterOptions(t);
                this.__doReportLight(2)
        }
    };
    p.__doMouseOut = function(t) {
        var n = i._$getElement(t, "d:hover"),
            r = e._$dataset(n, "hover");
        if(r) switch(r) {
            case "filter-item":
                this.__doReportLight(1)
        }
    };
    p.__doReportLight = function(t) {
        var i = e._$getByClassName(this.__rbox, "chart-item");
        if(1 == t) n._$forEach(i, function(t, i) {
            e._$delClassName(t, "chart-item-hover")
        });
        else if(2 == t) {
            var r = this.__globalData.reportIds.split(",");
            n._$forEach(r, function(t, i) {
                var n = e._$get("chart-item-" + t);
                e._$addClassName(n, "chart-item-hover")
            })
        }
    };
    p.__closeGlobalFilter = function() {
        e._$remove(this.__globalItem, !1);
        n._$forIn(this.__globalFilterList, function(t, e) {
            if(t.pid == this.__globalPid && t.reportId == this.__globalReportId) {
                this.__globalFilterList.splice(e, 1);
                return !0
            }
        }._$bind(this));
        if(this.__globalObj.reportControlObj[this.__globalData.reportId]) this.__globalObj.reportControlObj[this.__globalData.reportId].__filter._$addFilter(this.__globalPid, this.__globalData);
        this.__setGlobalFilterStatus();
        if(this.__globalFilterList.length < 1) this.__reportControl();
        this.__setHasChanged("global", this.__globalData);
        this.__doAutoRun()
    };
    p.__toggleFilter = function(t) {
        if(0 == t) {
            n._$forEach(this.__globalFilterList, function(t, e) {
                t.open = !1
            }._$bind(this));
            this.__globalData.open = !0
        } else if(1 == t) this.__globalData.open = !1;
        this.__setGlobalFilterItemStatus()
    };
    p.__onOK = function(t) {
        if(1 == t.reportIds.split(",").length) {
            this.__closeGlobalFilter();
            this.__setGlobalFilterItemStatus()
        } else {
            this.__setHasChanged("global", this.__globalData);
            this.__setHasChanged("global", t);
            this.__globalData.reportIds = t.reportIds
        }
        if(this.__globalFilterList.length > 0) this.__doAutoRun()
    };
    p.__setFilterPos = function() {
        if(this.__tmpFilterPos) this.__tmpFilterPos._$recycle();
        this.__tmpFilterPos = d._$$PopupFilterPos._$allocate({
            data: {
                title: "设置筛选器位置",
                lab: "将筛选器放置在",
                filterPosition: this.__filterPosition
            },
            onSubmit: this.__cbsetFilterPos._$bind(this)
        })
    };
    p.__cbsetFilterPos = function(t) {
        if(t.position != this.__filterPosition) {
            this.__destroy();
            this.__filterPosition = this.__globalFilter.filterPosition = t.position;
            n._$forEach(this.__globalFilterList, function(e, i) {
                if("right" == t.position) e.open = !1;
                else if("top" == t.position) e.open = !0
            }._$bind(this));
            this.__globalObj.globalFilterControl = f._$$GlobalFilter._$allocate({
                options: this.__options,
                onreload: this.__reloadFun
            })
        }
    };
    p.__slide = function(t) {
        if(this.__globalFilter.open) this.__globalFilter.open = !1;
        else this.__globalFilter.open = !0;
        this.__setGlobalFilterStatus();
        this.__reportControl()
    };
    p.__suspend = function() {
        if(this.__suspendTop) this.__suspendTop._$recycle();
        if("right" == this.__filterPosition) this.__suspendTop = h._$$SuspendTop._$allocate({
            clazz: "m-global-filter-fixed",
            wrap: this.__body,
            detaly: -200
        })
    };
    p.__reportControl = function() {
        this._$dispatchEvent("onreload")
    };
    return f
}, 1, 3, 6, 4, 142, 14, 15, 346, 7, 163, 347, 341, 348);
I$(497, '<div class="tab_content m-tsearch">\n    <div class="m-search">\n        <div class="search" >\n            <span class=\'u-icn-search u-icn\'></span>\n            <input placeholder="输入关键词搜索"  class=\'u-ipt-search\' r-model={searchKey}>\n            <i class="u-icn u-icn-close" r-hide={!searchKey} on-click={this.clearSearch()} r-anim=\'on:enter;class:animated fadeIn;on:leave;class:animated fadeOut\'></i>\n        </div>\n    </div>\n    <ul class="result u-list" ref=list style="border:0;">\n        <li class="all"><label><input type="checkbox" r-model={checkAll}><b>全部</b></label></li>\n        {#list fullsearchs as item}\n        \t{#if item.self}\n        \t<li class="li from j-item"><label class="f-ellipsis" title="{item.report.title}"><input type="checkbox" checked="checked" disabled><b class="j-text">{item.report.title}&nbsp;&nbsp;当前报表</b></label></li>\n        \t{#else}\n        \t<li class="li j-item"><label class="f-ellipsis" title="{item.report.title}"><input type="checkbox" checked={!!item.selected} on-change={this.onChange(item,$event)}><b class="j-text">{item.report.title}</b></label></li>\n        \t{/if}\n        {/list}\n    </ul>\n</div>');
I$(443, function(t, e) {
    function i(t, e) {
        var i = "";
        switch(t.$type) {
            case "None":
                i = "空";
                break;
            case "Fixed":
                if(t.fieldConfig.fixed) i = t.fieldConfig.fixed.name;
                break;
            case "Field":
                var n = t.fieldConfig.fieldId;
                if(n) e.dimensions.some(function(t) {
                    if(t.fieldId == n) {
                        i = t.alias;
                        return !0
                    }
                });
                else i = "--请选择--"
        }
        return i
    }

    function n(e, i) {
        var n = t._$getByClassName(i, "j-item"),
            r = t._$getByClassName(i, "j-text");
        if(n && r) r.forEach(function(t, i) {
            var r = t.innerText;
            if(r.toLowerCase().indexOf(e.toLowerCase()) != -1) n[i].style.display = "block";
            else n[i].style.display = "none"
        })
    }

    function r(t) {
        var i = e.extend({}, t),
            n = function(t) {
                var t = e.extend({}, t);
                if("Field" == t.$type)
                    if(t.fieldConfig && !t.fieldConfig.fieldId) t = {
                        $type: "None"
                    };
                return t
            };
        i.country = n(i.country);
        i.province = n(i.province);
        i.city = n(i.city);
        return i
    }
    return {
        getMapText: i,
        domSearch: n,
        geoConfigState: r
    }
}, 3, 7);
I$(342, function(t, e, i, n) {
    var r = (Regular.dom, i.extend({
        name: "modal-filter-position",
        $body: e,
        computed: {
            checkAll: t.createAllComputed("fullsearchs", "selected")
        },
        data: {
            autoClose: !1,
            autoRecycleRequest: !1,
            width: 470,
            className: "m-window-filterposition"
        },
        init: function() {
            this.supr()
        },
        config: function(t) {
            this.supr(t);
            var t = this.data;
            t.title = t.dashData.report.title + "作为全局筛选器应用于";
            this.initData();
            this.$watch("searchKey", function() {
                n.domSearch(t.searchKey, this.$refs.list)
            });
            this.$on("confirm", function(t) {
                if(t.accept) this.save();
                else this.destroy()
            }.bind(this))
        },
        initData: function() {
            var t = this.data;
            t.reportId = t.dashData.reportId;
            t.reportIdArr = [];
            if(t.dashData.reportIds) t.reportIdArr = t.dashData.reportIds.split(",");
            t.fullsearchs = t.chartList.filter(function(t) {
                return !!t.reportId
            }).map(function(t) {
                return {
                    reportId: t.reportId,
                    report: t.report
                }
            });
            t.fullsearchs.forEach(function(e) {
                if(e.reportId)
                    if(e.reportId == t.reportId) {
                        e.selected = !0;
                        e.self = !0
                    } else t.reportIdArr.some(function(t) {
                        if(t == e.reportId) {
                            e.selected = !0;
                            return !0
                        }
                    })
            })
        },
        save: function() {
            var t = this.data,
                e = [];
            t.fullsearchs.forEach(function(t) {
                if(t.reportId && t.selected && !t.self) e.push(t.reportId)
            });
            var i = {
                reportIds: e.join(",")
            };
            this.$emit("save", i);
            this.destroy()
        },
        onChange: function(t, e) {
            this.data;
            t.selected = e.target.checked
        },
        clearSearch: function() {
            var t = this.data;
            t.searchKey = ""
        }
    }));
    return r
}, 7, 497, 185, 443);
I$(166, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f, p, _, m, g, v) {
    g._$$SingleReport = t._$klass();
    v = g._$$SingleReport._$extend(c._$$Module);
    var y = a._$parseUITemplate(o);
    y["rt"];
    v.__reset = function(t) {
        this.__super(t);
        this.__options = t.options;
        this.__dashData = t.dashData;
        this.__reportId = this.__dashData.reportId;
        this.__filterPosition = this.__dashData.filterPosition;
        this.__onlink = t.onlink;
        this.__drawWrap();
        this.__chartItem = e._$get("chart-item-" + this.__reportId);
        if(this.__wap) this.__doInitDomEvent([
            [this.__chartItem, "click", this.__doAction._$bind(this)]
        ]);
        else this.__doInitDomEvent([
            [this.__chartItem, "click", this.__doAction._$bind(this)],
            [this.__chartItem, "mouseover", this.__doMouseOver._$bind(this)],
            [this.__chartItem, "mouseout", this.__doMouseOut._$bind(this)]
        ]);
        this.__autoCk = e._$getByClassName(this.__chartItem, "auto-checkbox")[0];
        if(this.__autoCk) i._$addEvent(this.__autoCk, "click", this.__autoHeightClick._$bind(this));
        this.__initTableChangeIcon(this.__dashData)
    };
    v.__destroy = function() {
        delete this.__chartItem;
        if(this.__filter) this.__filter._$recycle();
        if(this.__tmpFilterPos) this.__tmpFilterPos._$recycle();
        delete this.__globalObj.reportControlObj[this.__reportId]
    };
    v.__drawWrap = function() {
        var t = this.__dashData;
        this.__syncPillAliasNative(t);
        this.__toggleBlank(2);
        var i = this.__getBoxInfo(t);
        for(key in i) t[key] = i[key];
        t.edit = this.__edit;
        t.wap = this.__wap;
        t.cockpit = this.__cockpit;
        t.allFilterList = this.__getAllFilterList(t);
        t.projectId = window.currentProjectId || 0;
        t.canAuto = d.isAutoHeight(t);
        var n = s._$get("jst-create-chart", t);
        if(t.parentTabId) e._$get("tab-con-" + t.parentTabId + "-" + t.relatedTab).insertAdjacentHTML("beforeEnd", n);
        else this.__rbox.insertAdjacentHTML("beforeEnd", n);
        var r = e._$get("chart-item-" + t.reportId);
        if("right" == this.__filterPosition)
            if(r.offsetWidth < t.filterWidth + 10) t.open = !1;
            else t.open = !0;
        else if("top" == this.__filterPosition)
            if(r.offsetWidth < 420) t.open = !1;
            else t.open = !0;
        if(this.__filter) this.__filter._$recycle();
        var a = {
            options: this.__options,
            dashData: t
        };
        this.__filter = f._$$NativeFilter._$allocate(a);
        if(!t.stopped) this._$nevRender(this.__dashData)
    };
    v.__doAction = function(t) {
        var r = this,
            a = i._$getElement(t, "d:action"),
            s = e._$dataset(a, "action");
        if(s) {
            this.__globalObj.dataChanged = !0;
            i._$stop(t);
            switch(s) {
                case "del":
                    this.__removeReport(this.__dashData);
                    n._$forIn(this.__chartList, function(t, e, i) {
                        if(t.reportId == this.__reportId) {
                            i.splice(e, 1);
                            return !0
                        }
                    }._$bind(this));
                    if(0 == this.__chartList.length) this.__toggleBlank(1);
                    this.__disabledReport();
                    if(this.__globalObj.reportControlObj[this.__reportId]) this.__globalObj.reportControlObj[this.__reportId]._$recycle();
                    this.__closeGlobalFilter();
                    break;
                case "filter-icon":
                    this.__closeAllMenu();
                    var o = e._$getByClassName(this.__chartItem, "menu-filter")[0];
                    if(e._$hasClassName(o, "opened")) e._$delClassName(o, "opened");
                    else e._$addClassName(o, "opened");
                    break;
                case "filter-pos":
                    this.__setFilterPos();
                    break;
                case "filter-add":
                    var c = e._$dataset(a, "pid");
                    if(e._$hasClassName(a, "js-disabled")) return;
                    if("right" === this.__filterPosition && this.__chartItem.offsetWidth < this.__dashData.filterWidth + 10) {
                        l._$message("报表区域过小，请先拉大报表再尝试打开筛选器");
                        return
                    } else if("top" === this.__filterPosition && this.__chartItem.offsetWidth < 430) {
                        l._$message("报表区域过小，请先拉大报表再尝试打开筛选器");
                        return
                    }
                    if(e._$hasClassName(a, "js-selected")) this.__filter._$closeFilter(c);
                    else this.__filter._$addFilter(c);
                    this.__closeAllMenu();
                    break;
                case "refresh":
                    this.__closeAllMenu();
                    this.__dashData.hasChanged = !0;
                    this.__getReportPromiseAll();
                    break;
                case "reset":
                    this.__closeAllMenu();
                    this.__dashData.hasChanged = !0;
                    e._$remove(this.__chartItem);
                    this.__destroy();
                    this.__dashData.stopped = !1;
                    this.__dashData.filter = JSON.parse(JSON.stringify(this.__dashData.oldFilter));
                    var u = this.__dashData.reportId;
                    r.__globalFilterList.forEach(function(t, e) {
                        t.reportIds.split(",").forEach(function(i) {
                            if(i == u) r.__oldGlobalFilter.list.forEach(function(i) {
                                if(l.pid(i.pill) == l.pid(t.pill)) r.__globalFilterList[e] = JSON.parse(JSON.stringify(i))
                            })
                        })
                    });
                    this.__globalObj.globalFilterControl.__destroy();
                    this.__globalObj.globalFilterControl = _._$$GlobalFilter._$allocate({
                        options: this.__options
                    });
                    this.__globalObj.reportControlObj[this.__reportId] = g._$$SingleReport._$allocate({
                        options: this.__options,
                        dashData: this.__dashData
                    });
                    this.__getReportPromiseAll();
                    break;
                case "more":
                    this.__closeAllMenu();
                    var d = e._$getByClassName(this.__chartItem, "u-menu-more")[0];
                    if(d) e._$addClassName(d, "opened");
                    break;
                case "wap-mask":
                    if(this.__dashData.report.options && this.__dashData.report.options.chart && this.__dashData.report.options.chart.showTable) var h = !0;
                    else h = !1;
                    this._$dispatchEvent("onlink", {
                        reportId: this.__reportId,
                        filter: this.__mergeFilter(this.__dashData),
                        isTable: h
                    });
                    break;
                case "position-filter":
                    new m({
                        data: {
                            chartList: this.__chartList,
                            dashData: this.__dashData
                        }
                    }).toggle().$on("save", function(t) {
                        r.__dashData.reportIds = t.reportIds
                    });
                    break;
                case "table":
                    this.__tableChange(this.__dashData)
            }
        }
    };
    v.__setFilterPos = function() {
        if(this.__tmpFilterPos) this.__tmpFilterPos._$recycle();
        this.__tmpFilterPos = p._$$PopupFilterPos._$allocate({
            data: {
                title: "设置筛选器位置",
                lab: "将筛选器放置在",
                filterPosition: this.__filterPosition
            },
            onSubmit: this.__cbsetFilterPos._$bind(this)
        })
    };
    v.__cbsetFilterPos = function(t) {
        this.__dashData.filterPosition = t.position;
        n._$forEach(this.__dashData.filter, function(e, i) {
            if("right" == t.position) {
                e.open = !1;
                e.show = !0
            } else if("top" == t.position) {
                e.show = !0;
                e.open = !0
            }
        }._$bind(this));
        this.__allocateSingleReport()
    };
    v.__allocateSingleReport = function() {
        e._$remove(this.__chartItem);
        this.__destroy();
        this.__dashData.stopped = !1;
        this.__globalObj.reportControlObj[this.__reportId] = g._$$SingleReport._$allocate({
            options: this.__options,
            dashData: this.__dashData,
            onlink: this.__onlink
        })
    };
    v.__closeGlobalFilter = function() {
        for(var t = this.__globalFilterList.length, i = t; i > 0; i--)
            if(this.__globalFilterList[i - 1].reportId == this.__reportId) {
                var n = this.__globalFilterList[i - 1].pill,
                    r = e._$get("global-filter-item-" + l.pid(n) + "-" + this.__reportId);
                if(r) {
                    this.__globalObj.globalFilterControl.__resetGlobalFilterOptions(r);
                    this.__globalObj.globalFilterControl.__closeGlobalFilter();
                    this.__globalObj.globalFilterControl.__setGlobalFilterItemStatus()
                }
            }
    };
    v.__autoHeightClick = function() {
        this.__globalObj.dataChanged = !0;
        this.__dashData.showMode = "auto" == this.__dashData.showMode ? "" : "auto";
        this.__autoHeight(this.__dashData)
    };
    v.__doMouseOver = function(t) {
        var n = i._$getElement(t, "d:hover"),
            r = e._$dataset(n, "hover");
        if(r) switch(r) {
            case "chart-item":
                this.__doReportLight(2)
        }
    };
    v.__doMouseOut = function(t) {
        var n = i._$getElement(t, "d:hover"),
            r = e._$dataset(n, "hover");
        if(r) switch(r) {
            case "chart-item":
                this.__doReportLight(1)
        }
    };
    v.__doReportLight = function(t) {
        var i = e._$getByClassName(this.__rbox, "chart-item");
        if(1 == t) n._$forEach(i, function(t, i) {
            e._$delClassName(t, "chart-item-hover")
        });
        else if(2 == t)
            if(this.__dashData.reportIds) {
                var r = this.__dashData.reportIds.split(",");
                n._$forEach(r, function(t, i) {
                    var n = e._$get("chart-item-" + t);
                    e._$addClassName(n, "chart-item-hover")
                })
            }
    };
    return g
}, 1, 3, 6, 4, 142, 14, 15, 339, 7, 163, 34, 55, 164, 340, 341, 169, 342);
I$(343, '<meta charset="utf-8"/>\n<!-- @TEMPLATE -->\n<textarea name="ntp" id="#<rt>"></textarea>\n\n<textarea name="jst" id="jst-create-text">\n<div class="chart-item chart-item-text {if !edit}chart-item-show{else}chart-item-edit{/if}" style="left:${left}px;top:${top}px;width:${width}px;height:${height}px" data-textid="${textId}" id="chart-item-text-${textId}">\n    {if edit}\n    <div class="ttl ttl-1">\n        <span class="wrd f-ellipsis" data-drag="1" data-type="1" data-textid="${textId}"></span>\n        <div class="u-icn u-icn-line2" data-drag="1" data-type="1" data-textid="${textId}"></div>\n        <div class="opt">\n            {if canAuto}\n            <div class="auto">\n                <label><input type="checkbox" class="auto-checkbox" {if showMode==\'auto\'}checked{/if}>自动调整高度</label>\n            </div>\n            {/if}\n            <div class="u-icn u-icn-close" data-action="del" data-textid="${textId}" title="删除"></div>\n        </div>\n    </div>\n    <div class="inr">\n        <span class="lefttop" data-drag="2" data-type="1" data-mold="5" data-textid="${textId}">&nbsp;</span>\n        <span class="top" data-drag="2" data-type="1" data-mold="1" data-textid="${textId}">&nbsp;</span>\n        <span class="righttop" data-drag="2" data-type="1" data-mold="6" data-textid="${textId}">&nbsp;</span>\n        <span class="right" data-drag="2" data-type="1" data-mold="2" data-textid="${textId}">&nbsp;</span>\n        <span class="rightbottom" data-drag="2" data-type="1" data-mold="7" data-textid="${textId}">&nbsp;</span>\n        <span class="bottom" data-drag="2" data-type="1" data-mold="3" data-textid="${textId}">&nbsp;</span>\n        <span class="leftbottom" data-drag="2" data-type="1" data-mold="8" data-textid="${textId}">&nbsp;</span>\n        <span class="left" data-drag="2" data-type="1" data-mold="4" data-textid="${textId}">&nbsp;</span>\n    </div>\n    <div class="inr-point">\n        <span class="lefttop">&nbsp;</span>\n        <span class="top">&nbsp;</span>\n        <span class="righttop">&nbsp;</span>\n        <span class="right">&nbsp;</span>\n        <span class="rightbottom">&nbsp;</span>\n        <span class="bottom">&nbsp;</span>\n        <span class="leftbottom">&nbsp;</span>\n        <span class="left">&nbsp;</span>\n    </div>\n    {/if}\n    <div class="editor-box"></div>\n    <div class="mock-box"></div>\n</div>\n</textarea>');
I$(796, function(t, e, i, n, r, a) {
    var s = /(?:<(p|div)>(?:\&nbsp\;|<br\/?>)<\/\1>|<br\/?>|\&nbsp\;|\s)+$/gi,
        o = /(?:class|lang)="(mso)?[^"]*"/gi,
        l = /(?:class|lang)='(mso)?[^']*'/gi,
        c = /(?:class|lang)=(mso)?[^>\s]*/gi,
        u = /(?:<!--)[^>]*(?:-->)/gi,
        d = /(?:background-color:|text-align:|color:)([^;]*)(;)*/gi;
    i.__getWindow = function(t) {
        var e = i.__getDocument(t);
        return e.defaultView || e.parentWindow || e.window || e
    };
    i.__getDocument = function(t) {
        return t.ownerDocument || t
    };
    i.__getSelection = function(t) {
        if(t.getSelection) return t.getSelection();
        var e = t.document;
        if(e.getSelection) return e.getSelection();
        if(e.selection) return e.selection;
        else return null
    };
    i.__getRange = function(t) {
        t = i.__getWindow(t);
        var e = i.__getSelection(t);
        if(!e) return null;
        if(e.getRangeAt) return e.getRangeAt(0);
        if(e.createRange) return e.createRange();
        else return null
    };
    i.__getSelectText = function(t) {
        var e = this.__getRange(t);
        if(!e) return "";
        else return e.toString() || e.cloneContents().textContent || e.commonAncestorContainer.data
    };
    i.__getSelectHtml = function(e) {
        var i = this.__getRange(e);
        if(!i) return "";
        var n = t._$create("div");
        n.appendChild(i.cloneContents());
        return n.innerHTML
    };
    i.__getSelectNode = function() {
        var t = function(e) {
            if(1 == e.nodeType) return e;
            else {
                e = e.parentNode;
                return t(e)
            }
        };
        return function(e) {
            var i = this.__getRange(e),
                n = i.commonAncestorContainer || i.parentElement();
            if(!i || !n) return "";
            else return t(n)
        }
    }();
    i.__saveRange = function(t) {};
    i.__focusRange = function(t) {
        t.focus()
    };
    i.__clearRange = function(t) {};
    i.__moveCursorPosition = function() {
        var t = [function(t) {
            return t.childNodes.length
        }, function() {
            return 0
        }];
        return function(e, n) {
            var r = t[n];
            if(2 != n) {
                var a = i.__getSelection(i.__getWindow(e));
                if(3 == n) {
                    var s = a.focusOffset;
                    e = a.focusNode || e;
                    a.collapse(e, s)
                } else a.collapse(e, r(e))
            }
        }
    }();
    i.__execCommand = function(t, e, i) {
        if("inserthtml" != e) t.execCommand(e, !1, i);
        else this.__insertHtml(t, i)
    };
    i.__insertHtml = function(t, e) {
        if(document.selection) {
            var i = t.selection.createRange();
            if(!i.pasteHTML) {
                t.execCommand("delete", !1, null);
                t.selection.createRange().pasteHTML(e)
            } else i.pasteHTML(e)
        } else t.execCommand("inserthtml", !1, e)
    };
    i.__filterContent = function(t, e) {
        var n;
        if(e) n = (t || "").replace(s, "").replace(u, "");
        else n = (t || "").replace(s, "").replace(o, "").replace(l, "").replace(c, "").replace(u, "");
        n = !i.__filterContentPath ? n : i.__filterContentPath(n);
        return n
    };
    i.__filterContentStyle = function() {
        var t = {
                0: /(?:<[^>]* style)="([^"]*)"/gi,
                1: /(?:<[^>]* style)='([^']*)'/gi,
                2: /(?:<[^>]* style)=([^>\s]*)/gi
            },
            e = function(e, i) {
                i = i.replace(t[e], function(t, e, i) {
                    var n = t.split("style")[0];
                    if(null != e.match(d)) {
                        var r = "";
                        e.replace(d, function(t, e, i) {
                            return r += t
                        }._$bind(this));
                        return n + ' style="' + r + '"'
                    } else return n
                }._$bind(this));
                return i
            };
        return function(t) {
            t = e(0, t);
            t = e(1, t);
            t = e(2, t);
            return t
        }
    }();
    return i
}, 3, 148);
I$(802, function(t, e, i, n, r, a) {
    return e
}, 3, 796);
I$(720, function(t, e, i, n, r, a, s, o) {
    if("webkit" === t._$KERNEL.engine) I$(797, function() {
        var t = /<\/?[\w]+:[\w]+.*?>/gi,
            e = function(t) {
                return(t || "").search("</?[\\w]+:[\\w]+.*?>") >= 0
            };
        n.__filterWordContent = function(i) {
            if(!e(i)) return i;
            else return i.replace(t, "")
        }
    });
    if("gecko" === t._$KERNEL.engine) I$(798, function() {
        var t = /(?:<(p|div)>(?:\&nbsp\;|<br\/?>)<\/\1>|<br\/?>|\&nbsp\;|\s)+$/gi,
            e = /\f/g,
            r = /\n|\r/g,
            a = /<(style|script).*?>.*?<\/\1>/gi,
            s = /<\/?(?:meta|link|!--\[.+?\]--|[\w]+:[\w]+).*?>/gi,
            o = /<img(\n|\r|\s|[^>])*?src="data:image\/png;base64[^>]*?>/gi,
            l = function(t) {
                return(t || "").indexOf("<w:WordDocument>") >= 0
            };
        n.__filterWordContent = function(i) {
            if(!l(i)) return i;
            else return i.replace(r, "\f").replace(s, "").replace(a, "").replace(e, "\n").replace(o, "").replace(t, "")
        };
        n.__filterContentPath = function(t) {
            t = t.replace(o, "");
            return t
        };
        n.__insertHtml = function(t, e) {
            var r = n.__getWindow(t),
                a = n.__getRange(r),
                s = t.createElement("div");
            s.innerHTML = e;
            a.deleteContents();
            i._$reverseEach(s.childNodes, function(t) {
                a.insertNode(t)
            });
            var o = n.__getSelection(r);
            o.collapseToEnd();
            r.focus()
        }
    });
    if("trident" === t._$KERNEL.engine) I$(799, function() {
        var t = /<\/?[\w]+:[\w]+.*?>/gi,
            e = /<\?xml[^>]*>/gi,
            i = function(t) {
                return(t || "").search("</?[\\w]+:[\\w]+.*?>") >= 0
            };
        n.__filterWordContent = function(n) {
            if(!i(n)) return n;
            else return n.replace(t, "").replace(e, "")
        }
    });
    if("trident" === t._$KERNEL.engine && t._$KERNEL.release <= "4.0") I$(800, function() {
        n.__getSelectText = function(t) {
            var e = n.__getRange(t);
            if(!e) return "";
            else return e.text
        };
        n.__getSelectHtml = function(t) {
            var e = n.__getRange(t);
            if(!e) return "";
            var i = e.htmlText;
            return i || ""
        }
    });
    if("trident" === t._$KERNEL.engine && t._$KERNEL.release <= "4.0") I$(801, function() {
        n.__moveCursorPosition = function() {
            var t = [function(t) {
                return t.innerText.length
            }, function() {
                return 0
            }];
            return n.__moveCursorPosition._$aop(function(e) {
                var i = e.args,
                    r = n.__getRange(n.__getWindow(i[0]));
                if(r && r.move) {
                    e.stopped = !0;
                    var a = t[i[1]];
                    if(!a) return;
                    r.move("character", a(i[0]));
                    r.select()
                }
            })
        }()
    });
    if("trident" === t._$KERNEL.engine && t._$KERNEL.release >= "6.0") I$(803, function() {
        var t = NEJ.P,
            e = (t("nej.u"), t("nej.p"), t("nej.h")),
            i = /<\/?[\w]+:[\w]+.*?>/gi,
            n = function(t) {
                return(t || "").search("</?[\\w]+:[\\w]+.*?>") >= 0
            };
        e.__filterWordContent = function(t) {
            if(!n(t)) return t;
            else return t.replace(i, "")
        }
    }, 802);
    if("trident" === t._$KERNEL.engine && t._$KERNEL.release >= "3.0") I$(804, function() {
        var t = {};
        n.__execCommand = n.__execCommand._$aop(function(t) {
            var e = t.args;
            if("styleWithCSS" != e[1]) {
                n.__focusRange(e[0].body);
                if("hiliteColor" == e[1]) e[1] = "backColor"
            } else t.stopped = !0
        });
        n.__saveRange = n.__saveRange._$aop(function(i) {
            if(document.selection) {
                i.stopped = !0;
                var r = i.args[0],
                    a = n.__getDocument(r),
                    s = e._$id(a);
                t[s] = n.__getRange(n.__getWindow(a))
            }
        });
        n.__focusRange = n.__focusRange._$aop(null, function(i) {
            var r = n.__getDocument(i.args[0]),
                a = e._$id(r),
                s = t[a];
            if(s) {
                if(s.select) s.select();
                else {
                    var o = n.__getSelection(n.__getWindow(r));
                    o.addRange(s)
                }
                delete t[a]
            }
        });
        n.__clearRange = n.__clearRange._$aop(null, function(i) {
            var r = e._$id(n.__getDocument(i.args[0]));
            delete t[r]
        });
        n.__getRcache = function() {
            return t
        }
    });
    if("trident" === t._$KERNEL.engine && t._$KERNEL.release >= "5.0") I$(805, function() {
        n.__saveRange = n.__saveRange._$aop(function(t) {
            if(!document.selection) {
                t.stopped = !0;
                var i = t.args[0],
                    r = n.__getDocument(i),
                    a = e._$id(r),
                    s = n.__getRcache();
                s[a] = n.__getRange(n.__getWindow(r))
            }
        });
        n.__insertHtml = function(t, e) {
            var r = n.__getWindow(t),
                a = n.__getRange(r),
                s = t.createElement("div");
            s.innerHTML = e;
            a.deleteContents();
            i._$reverseEach(s.childNodes, function(t) {
                a.insertNode(t)
            });
            var o = n.__getSelection(r);
            o.collapseToEnd();
            r.focus()
        }
    });
    return n
}, 148, 3, 4, 796);
I$(619, function(t, e, i, n, r, a, s, o, l, c, u, d) {
    var h;
    l._$$EditorArea = e._$klass();
    h = l._$$EditorArea._$extend(s._$$EventTarget);
    h.__init = function() {
        this.__fopt = {
            visible: !0,
            onload: this.__onIFrameLoaded._$bind(this)
        };
        this.__super()
    };
    h.__reset = function() {
        var t = '<head><base href="#<BSUL>"/><style>html,body{margin:0;padding:0;border:0;cursor:text;font-size:14px;font-family:Arial;word-wrap:break-word;height:100%;} html{overflow:hidden;}body{overflow:auto;}#<UDCS></style></head><body contenteditable="true"></body>';
        return function(e) {
            this.__super(e);
            this.__focus = e.focus;
            this.__content = t.replace("#<UDCS>", e.style || "").replace("#<BSUL>", e.base || location.href);
            this.__initcnt = e.content || "";
            this.__fopt.parent = i._$get(e.parent) || document.body;
            this.__iframe = i._$createXFrame(this.__fopt)
        }
    }();
    h.__destroy = function() {
        this.__super();
        a.__clearRange(this._$getDocument());
        delete this.__content;
        delete this.__fopt.parent;
        delete this.__initcnt;
        this.__iframe = i._$remove(this.__iframe)
    };
    h.__doSaveRange = function() {
        a.__saveRange(this._$getDocument())
    };
    h.__onIFrameLoaded = function(t) {
        var e = this._$getDocument();
        e.open();
        e.write(this.__content);
        if(location.hostname != document.domain) e.domain = document.domain;
        e.close();
        this.__doInitDomEvent([
            [e, "click", this.__onDocumentClick._$bind(this)],
            [e, "selectionchange", this.__onSelectionChange._$bind(this)],
            [e, "beforedeactivate", this.__doSaveRange._$bind(this)],
            [e, "keydown", this.__onInputCheck._$bind(this)],
            [e, "mouseup", this.__onInputCheck._$bind(this)],
            [e, "paste", this.__onInputCheck._$bind(this)],
            [e, "drop", this.__onInputCheck._$bind(this)]
        ]);
        if(this.__initcnt) this._$setContent(this.__initcnt);
        if(this.__focus) {
            this._$focus();
            delete this.__focus
        }
        this._$dispatchEvent("onloaded")
    };
    h.__onDocumentClick = function(t) {
        n._$dispatchEvent(document, "click")
    };
    h.__onSelectionChange = function() {
        this._$dispatchEvent("onselectionchange")
    };
    h.__onInputCheck = function() {
        if(this.__timer) window.clearTimeout(this.__timer);
        this.__timer = window.setTimeout(this.__doCompareContent._$bind(this), 100)
    };
    h.__doCompareContent = function() {
        var t = this._$getDocument();
        if(t) {
            var e = t.body.innerHTML;
            if(this.__initcnt != e) {
                this.__initcnt = e;
                this._$dispatchEvent("oninput", {
                    cont: this._$getContent(),
                    txt: this._$getTextContent()
                })
            }
        }
    };
    h.__doRemoveStyle = function() {
        var t = /style="[^"]*"/gi,
            e = /style='[^']*'/gi,
            i = /style=[^>\s]*/gi,
            n = /class="[^"]*"/gi,
            r = /class='[^']*'/gi,
            a = /class=[^>\s]*/gi;
        return function(s) {
            return s.replace(t, "").replace(e, "").replace(i, "").replace(n, "").replace(r, "").replace(a, "")
        }
    }();
    h.__doRemoveId = function() {
        var t = /id="[^"]*"/gi,
            e = /id='[^']*'/gi,
            i = /id=[^>\s]*/gi;
        return function(n) {
            return n.replace(t, "").replace(e, "").replace(i, "")
        }
    }();
    h._$focus = function(t) {
        var e = this._$getDocument();
        if(e) {
            a.__focusRange(e.body);
            a.__moveCursorPosition(e.body, parseInt(t) || 0);
            this.__onSelectionChange()
        }
    };
    h._$getDocument = function() {
        if(this.__iframe.contentWindow) return this.__iframe.contentWindow.document
    };
    h._$getContent = function(t) {
        var e, i, n, s = this._$getDocument();
        if(r._$isObject(t)) {
            n = t.keepClass || !1;
            i = t.keepStyle || !1;
            e = t.noId
        }
        _html = a.__filterContent(!s ? "" : s.body.innerHTML, n);
        if(!i) _html = a.__filterContentStyle(_html);
        if(e) _html = this.__doRemoveId(_html);
        return !a.__filterWordContent ? _html : a.__filterWordContent(_html)
    };
    h._$getTextContent = function() {
        var t = this._$getDocument(),
            e = t.body.innerText || t.body.textContent;
        return !t ? "" : e
    };
    h._$setContentNoStyle = function() {
        var t = this._$getSelectNode();
        if(t) {
            var e = this._$getDocument(),
                i = t.outerHTML,
                n = !e ? "" : e.body.outerHTML;
            n = n.replace(i, this.__doRemoveStyle(i));
            n = a.__filterContent(n);
            var r = !a.__filterWordContent ? n : a.__filterWordContent(n);
            this._$setContent(r)
        }
    };
    h._$setContent = function(t) {
        var e = this._$getDocument();
        if(e) {
            e.body.innerHTML = t;
            this.__onInputCheck()
        }
    };
    h._$execCommand = function(t, e, i) {
        var n = this._$getDocument();
        if(n) {
            a.__execCommand(n, "styleWithCSS", !1);
            a.__execCommand(n, t, e);
            this._$focus(3);
            this.__onInputCheck()
        }
    };
    h._$queryCommand = function(t, e) {
        try {
            var i = this._$getDocument();
            return !i ? null : i["queryCommand" + e](t)
        } catch(t) {
            return null
        }
    };
    h._$getSelectText = function() {
        this._$focus(2);
        return a.__getSelectText(this._$getDocument())
    };
    h._$getSelectHtml = function() {
        this._$focus(2);
        return a.__getSelectHtml(this._$getDocument())
    };
    h._$getSelectNode = function() {
        this._$focus(2);
        return a.__getSelectNode(this._$getDocument())
    };
    h._$getAreaBox = function() {
        var t = this._$getDocument();
        return !t ? null : i._$getPageBox(t)
    };
    if(!0) t.copy(t.P("nej.ut"), l);
    return l
}, 129, 1, 3, 6, 4, 720, 19, 148);
I$(620, function(t, e, i, n, r, a, s, o, l, c) {
    var u;
    s._$$EditorToolbar = e._$klass();
    u = s._$$EditorToolbar._$extend(a._$$EventTarget);
    u.__init = function() {
        this.__command = {};
        this.__super()
    };
    u.__reset = function(t) {
        this.__super(t);
        this.__selected = t.selected || "js-selected";
        this.__disabled = t.disabled || "js-disabled";
        this._$addCommand(t.list)
    };
    u.__destroy = function() {
        this.__super();
        this.__command = {};
        delete this.__selected;
        delete this.__disabled
    };
    u.__onCommand = function(t) {
        n._$stopBubble(arguments[1]);
        this.__command[t];
        this._$dispatchEvent("oncommand", {
            name: t,
            node: this.__command[t]
        })
    };
    u._$addCommand = function(t) {
        if(!r._$isArray(t)) {
            var e = i._$dataset(t, "command");
            if(!e) return;
            this.__command[e] = i._$get(t);
            this.__doInitDomEvent([
                [t, "click", this.__onCommand._$bind(this, e)]
            ])
        }
        r._$forEach(t, this._$addCommand, this)
    };
    u._$getCommandList = function() {
        return this.__command
    };
    u._$select = function(t, e) {
        var n = this.__command[t];
        if(n) !e ? i._$delClassName(n, this.__selected) : i._$addClassName(n, this.__selected)
    };
    u._$disable = function(t, e, n) {
        var r = this.__command[t];
        if(r) {
            i._$delClassName(r, n);
            !e ? i._$delClassName(r, this.__disabled) : i._$addClassName(r, this.__disabled)
        }
    };
    if(!0) t.copy(t.P("nej.ut"), s);
    return s
}, 129, 1, 3, 6, 4, 19);
I$(630, function(t, e, i, n, r, a, s) {
    var o, l = {};
    n._$$EditorCommand = e._$klass();
    o = n._$$EditorCommand._$extend(i._$$EventTarget);
    n._$$EditorCommand._$regist = function() {
        l[this.command] = this
    };
    n._$$EditorCommand._$getImpl = function(t) {
        return l[t] || null
    };
    o.__init = function() {
        this.__name = this.constructor.command;
        this.__super()
    };
    o.__reset = function(t) {
        this.__super(t);
        this.__editor = t.area;
        this.__toolbar = t.toolbar
    };
    o.__destroy = function() {
        this.__super();
        delete this.__editor;
        delete this.__toolbar
    };
    o._$execute = a;
    o._$queryValue = a;
    o._$queryState = function() {
        return null
    };
    o._$queryEnabled = function() {
        return null
    };
    if(!0) t.copy(t.P("nej.ut"), n);
    return n
}, 129, 1, 19);
I$(618, function(t, e, i, n, r, a, s, o, l, c, u) {
    var d;
    o._$$Editor = e._$klass();
    d = o._$$Editor._$extend(n._$$EventTarget);
    d.__init = function() {
        this.__copt = {};
        this.__impl = {};
        this.__super()
    };
    d.__reset = function() {
        var t = function() {
            this._$registCommand(s._$$EditorCommand._$getImpl(arguments[1]));
        };
        return function(e) {
            this.__super(e);
            var n = e.toolbar,
                s = n instanceof a._$$EditorToolbar;
            !s ? n = null : this.__copt.toolbar = n;
            if(n) {
                n._$setEvent("oncommand", this.__onCommand._$bind(this));
                i._$forIn(n._$getCommandList(), t, this)
            }
            var o = e.area,
                s = o instanceof r._$$EditorArea;
            !s ? o = null : this.__copt.area = o;
            if(o) o._$setEvent("onselectionchange", this.__onSelectionChange._$bind(this))
        }
    }();
    d.__destroy = function() {
        var t = function(t, e, i) {
            if(t instanceof s._$$EditorCommand) t._$recycle();
            delete i[e]
        };
        return function() {
            this.__super();
            if(this.__copt.area) {
                this.__copt.area._$recycle();
                delete this.__copt.area
            }
            if(this.__copt.toolbar) {
                this.__copt.toolbar._$recycle();
                delete this.__copt.toolbar
            }
            i._$forIn(this.__impl, t)
        }
    }();
    d.__getCommandImpl = function(t) {
        var e = this.__impl[t];
        if(!e) return null;
        if(!(e instanceof s._$$EditorCommand)) {
            e = e._$allocate(this.__copt);
            this.__impl[t] = e
        }
        return e
    };
    d.__onCommand = function(t) {
        this.__getCommandImpl(t.name)._$execute({
            target: t.node
        });
        this.__copt.area._$focus(2)
    };
    d.__onSelectionChange = function() {
        var t = function(t, e) {
            var i = this.__getCommandImpl(e);
            if(i) {
                var n = this.__copt.toolbar,
                    r = i._$queryState();
                if(null != r) n._$select(e, r);
                var r = i._$queryEnabled();
                if(null != r) n._$disable(e, !r);
                i._$queryValue(t)
            }
        };
        return function() {
            var e = this.__copt.toolbar;
            if(e) i._$forIn(e._$getCommandList(), t, this)
        }
    }();
    d._$registCommand = function(t) {
        if(i._$isArray(t)) i._$forEach(t, this._$registCommand, this);
        else {
            var e = (t || l).command;
            if(e) this.__impl[e] = t
        }
    };
    d._$setContent = function(t) {
        if(this.__copt.area) this.__copt.area._$setContent(t)
    };
    d._$getContent = function(t) {
        return !this.__copt.area ? "" : this.__copt.area._$getContent(t)
    };
    d._$getTextContent = function() {
        return !this.__copt.area ? "" : this.__copt.area._$getTextContent()
    };
    d._$getArea = function() {
        return this.__copt.area
    };
    d._$getToolbar = function() {
        return this.__copt.toolbar
    };
    if(!0) t.copy(t.P("nej.ut"), o);
    return o
}, 129, 1, 4, 19, 619, 620, 630);
I$(621, '.#<uispace>{width:500px;border:1px solid #ddd;text-align:center;}\n.#<uispace> .zbg{background:url(#<root>nej_editor.png?20131028) no-repeat 100px 100px;}\n.#<uispace> .ztbar{height:30px;background-color:#eee;zoom:1;}\n.#<uispace> .ztbar:after{display:block;clear:both;visibility:hidden;height:0;content:".";}\n.#<uispace> .zitm{float:left;width:24px;height:24px;margin:3px 0;cursor:pointer;}\n.#<uispace> .zitm:hover{background-position:0 0;}\n.#<uispace> .zitm.js-selected{background-position:-30px 0;}\n.#<uispace> .zitm .zicn{width:16px;height:16px;margin:4px auto 0;overflow:hidden;text-indent:100px;}\n.#<uispace> .zitm .ztxt{display:none;}\n.#<uispace> .zisp{float:left;width:10px;height:24px;margin:3px 0;background-position:-60px 0;overflow:hidden;}\n.#<uispace> .zsel{float:left;position:relative;height:20px;overflow:hidden;line-height:20px;padding:0 5px;margin:4px;border:1px solid #C5C5C5;background:#fff;font-size:12px;text-align:left;cursor:pointer;}\n.#<uispace> .zsel .zarw{position:absolute;top:0;right:0;width:18px;height:18px;background-position:0px -244px;}\n.#<uispace> .zsel.zfs{width:60px;}\n.#<uispace> .zsel.zfm{width:140px;}\n.#<uispace> .zarea{height:200px;}\n.#<uispace> .zarea iframe{width:100%;height:100%;overflow:hidden;}');
I$(622, '<textarea name=\'jst\' id=\'#<seedIcmd>\'>\n{list xlist as x}\n    {if !x.upload}\n    <div class="zitm zbg ${\'js-\'|seed} ${x.clazz}" data-command="${x.cmd}" title="${x.txt}">\n      <div class="zicn zbg ${x.icn}">&nbsp;</div>\n      <div class="ztxt">${x.txt}</div>\n    </div>\n    {else}\n    <label class="zitm zbg ${\'js-\'|seed} ${x.clazz}" title="${x.txt}">\n        <div class="zicn zbg ${x.icn}">&nbsp;</div>\n        <div class="ztxt">${x.txt}</div>\n    </label>\n    {/if}\n{/list}\n{if defined("hr")&&!!hr}\n    <div class="zbg zisp">&nbsp;</div>\n{/if}\n</textarea>\n<textarea name=\'jst\' id=\'#<seedIfnt>\'>\n<div class="zsel ${icn} ${\'js-\'|seed}" data-command="${cmd}">\n  <span class="${\'js-t-\'|seed}">${txt}</span>\n  <span class="zarw zbg">&nbsp;</span>\n</div>\n</textarea>\n<textarea name=\'jst\' id=\'#<seedIedt>\'>\n<div>\n  <div class="ztbar">${toolbar}</div>\n  <div class="zarea"></div>\n</div>\n</textarea>');
I$(498, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f, p, _, m, g) {
    var v, y, b = d._$parseUITemplate(f),
        x = b["seedIcmd"],
        $ = b["seedIfnt"],
        w = b["seedIedt"];
    p._$$Editor = e._$klass();
    y = p._$$Editor._$extend(s._$$Abstract);
    y.__init = function() {
        this.__aopt = {};
        this.__topt = {};
        this.__super()
    };
    y.__reset = function(t) {
        this.__super(t);
        a._$merge(this.__aopt, t, function(t, e) {
            if(e.search(/^on/) < 0) return !0
        });
        this.__aopt.style = t.style;
        this.__aopt.content = t.content;
        this.__aopt.focus = t.focus !== !1;
        this.__editor = o._$$Editor._$allocate({
            area: c._$$EditorArea._$allocate(this.__aopt),
            toolbar: u._$$EditorToolbar._$allocate(this.__topt)
        })
    };
    y.__destroy = function() {
        this.__editor._$recycle();
        this.__super();
        delete this.__editor
    };
    y.__initXGui = function() {
        this.__seed_css = v
    };
    y.__initNode = function() {
        this.__super();
        var t = n._$getChildren(this.__body);
        this.__aopt.parent = t[1];
        this.__topt.list = n._$getByClassName(t[0], "js-" + l._$seed())
    };
    y.__doGenCmdXhtml = function(t) {
        return l._$get(x, t)
    };
    y.__doGenFontSizeXhtml = function() {
        return l._$get($, {
            cmd: "fontSize",
            txt: "标准",
            icn: "zfs"
        })
    };
    y.__doGenFontNameXhtml = function() {
        return l._$get($, {
            cmd: "fontName",
            txt: "Arial",
            icn: "zfm"
        })
    };
    y.__doGenEditorXhtml = function(t) {
        return l._$get(w, t)
    };
    y._$getContent = function(t) {
        return this.__editor._$getContent(t)
    };
    y._$getPhotoIdsAndUrls = function() {
        var t = function(t) {
            if(0 != t.id) this.__idsAndUrls.push(t.id + "@" + t.src)
        };
        return function() {
            this.__idsAndUrls = [];
            var e = [],
                i = this.__editor._$getContent(),
                r = document.createElement("div");
            r.innerHTML = i;
            var s = n._$get(r),
                o = s.getElementsByTagName("img");
            a._$forEach(o, t, this);
            for(var l = this.__idsAndUrls.length, c = 0; c < l; c++) e.push(this.__idsAndUrls[c]);
            return e
        }
    }();
    y._$getTextContent = function() {
        return this.__editor._$getTextContent()
    };
    y._$setContent = function(t) {
        this.__editor._$setContent(t)
    };
    y._$registCommand = function(t) {
        this.__editor._$registCommand(t)
    };
    y._$show = function() {
        this.__body.style.display = ""
    };
    y._$hide = function() {
        this.__body.style.display = "none"
    };
    var k = function() {
        for(var t = [], e = 20, i = 3, n = 0; n < e; n++)
            for(var r = 0; r < i; r++) t.push(".#<uispace> .z-i-" + n + r + "{background-position:-" + 16 * r + "px -" + (40 + 16 * n) + "px;}");
        return t.join("")
    };
    v = n._$pushCSSText(h + k(), {
        root: i._$get("root")
    });
    if(!0) t.copy(t.P("nej.ui"), p);
    return p
}, 129, 1, 304, 3, 6, 4, 142, 618, 15, 619, 620, 14, 621, 622);
I$(628, function(t, e, i, n, r, a, s, o, l) {
    var c;
    a._$$CardCommand = e._$klass();
    c = a._$$CardCommand._$extend(r._$$EditorCommand);
    c.__init = function() {
        this.__fopt = {
            destroyable: !0,
            parent: document.body,
            onchange: this.__onChange._$bind(this)
        };
        this.__super()
    };
    c.__onChange = o;
    c.__doShowCard = o;
    c._$execute = function(t) {
        n._$dispatchEvent(document, "click");
        var e = t.target,
            r = i._$offset(e);
        this.__fopt.top = r.y + e.offsetHeight + 1;
        this.__fopt.left = r.x - 1;
        this.__fopt.width = e.clientWidth;
        this.__doShowCard()
    };
    if(!0) t.copy(t.P("nej.ut.cmd"), a);
    return a
}, 129, 1, 3, 6, 630);
I$(623, function(t, e, i, n, r, a, s, o, l) {
    var c;
    a._$$Font = e._$klass();
    c = a._$$Font._$extend(n._$$CardCommand);
    c.__getFontText = o;
    c.__onChange = function(t) {
        this.__editor._$execCommand(this.__name, t.value || t.name)
    };
    c._$queryValue = function(t) {
        var e = i._$getByClassName(t, "js-t-" + r._$seed())[0],
            n = this.__getFontText(this.__editor._$queryCommand(this.__name, "Value"));
        if(e && n) e.innerText = n
    };
    if(!0) t.copy(t.P("nej.ut.cmd"), a);
    return a
}, 129, 1, 3, 628, 15);
I$(807, ".#<uispace>{border:1px solid #9FAC87;font-size:12px;text-align:left;}\n.#<uispace> .zitm{display:block;position:relative;margin:1px;outline:none;padding:2px 0 2px 8px;border:1px solid #ddd;color:#000;background-color:#fff;text-decoration:none;}\n.#<uispace> .zitm:hover{background-color:#e5e5e1;text-decoration:none;}\n.#<uispace> .zitm .ztip{position:absolute;top:2px;right:5px;font-size:10px;}");
I$(808, '{list xlist as x}\n<a class="zitm" hidefocus="true" style="${style}:${x.style|default:x.name};" data-index="${x_index}">\n  ${x.name}\n  {if !!x.tip}<span class="ztip">${x.tip}</span>{/if}\n</a>\n{/list}');
I$(725, function(t, e, i, n, r, a, s, o, l, c, u, d, h) {
    var f, p = i._$pushCSSText(o),
        _ = s._$add(l);
    c._$$FontCard = e._$klass();
    f = c._$$FontCard._$extend(a._$$CardWrapper);
    f.__reset = function(t) {
        this.__super(t);
        if(null != t.width) i._$setStyle(this.__body, "width", t.width + "px")
    };
    f.__destroy = function() {
        this.__super();
        delete this.__flist
    };
    f.__initXGui = function() {
        this.__seed_css = p
    };
    f.__initNode = function() {
        this.__super();
        n._$addEvent(this.__body, "click", this.__onFontSelect._$bind(this))
    };
    f.__doGenFontListXhtml = function(t) {
        return s._$get(_, t)
    };
    f.__onFontSelect = function() {
        var t = function(t) {
            return !isNaN(parseInt(i._$dataset(t, "index")))
        };
        return function(e) {
            var r = n._$getElement(e, t);
            if(r) {
                var a = parseInt(i._$dataset(r, "index"));
                this._$dispatchEvent("onchange", this.constructor.list[a]);
                this._$hide()
            }
        }
    }();
    c._$$FontCard._$getText = function(t) {
        var e = r._$indexOf(this.list, function(e) {
            return(e.value || e.name) == t
        });
        return(this.list[e] || u).name
    };
    if(!0) t.copy(t.P("nej.ui.cmd"), c);
    return c
}, 129, 1, 3, 6, 4, 532, 15, 807, 808);
I$(624, function(t, e, i, n, r, a, s, o, l) {
    var c, u;
    a._$$FontSizeCard = e._$klass();
    c = a._$$FontSizeCard._$extend(r._$$FontCard);
    a._$$FontSizeCard.list = [{
        name: "小",
        style: "x-small",
        value: 1
    }, {
        name: "标准",
        style: "small",
        value: 2
    }, {
        name: "大",
        style: "medium",
        value: 3
    }, {
        name: "特大",
        style: "large",
        value: 4
    }, {
        name: "极大",
        style: "x-large",
        value: 5
    }];
    c.__initXGui = function() {
        this.__super();
        this.__seed_html = u
    };
    c.__initNodeTemplate = function() {
        u = n._$addNodeTemplate('<div class="' + this.__seed_css + '">' + this.__doGenFontListXhtml({
                style: "font-size",
                xlist: this.constructor.list
            }) + "</div>");
        this.__seed_html = u
    };
    if(!0) t.copy(t.P("nej.ui.cmd"), a);
    return a
}, 129, 1, 3, 14, 725);
I$(499, function(t, e, i, n, r, a, s, o) {
    var l;
    r._$$FontSize = e._$klass();
    l = r._$$FontSize._$extend(i._$$Font);
    r._$$FontSize.command = "fontSize";
    l.__doShowCard = function() {
        n._$$FontSizeCard._$allocate(this.__fopt)._$show()
    };
    l.__getFontText = function(t) {
        return n._$$FontSizeCard._$getText(t) || "标准"
    };
    r._$$FontSize._$regist();
    if(!0) t.copy(t.P("nej.ut.cmd"), r);
    return r
}, 129, 1, 623, 624);
I$(625, function(t, e, i, n, r, a, s, o, l) {
    var c, u;
    a._$$FontNameCard = e._$klass();
    c = a._$$FontNameCard._$extend(n._$$FontCard);
    a._$$FontNameCard.list = [{
        name: "宋体"
    }, {
        name: "微软雅黑"
    }, {
        name: "黑体"
    }, {
        name: "楷体"
    }, {
        name: "隶书"
    }, {
        name: "幼圆"
    }, {
        name: "Arial"
    }, {
        name: "Arial Narrow"
    }, {
        name: "Arial Black"
    }, {
        name: "Comic Sans MS"
    }, {
        name: "Courier"
    }, {
        name: "System"
    }, {
        name: "Verdana"
    }, {
        name: "Times New Roman"
    }];
    c.__initXGui = function() {
        this.__super();
        this.__seed_html = u
    };
    c.__initNodeTemplate = function() {
        u = r._$addNodeTemplate('<div class="' + this.__seed_css + '">' + this.__doGenFontListXhtml({
                style: "font-family",
                xlist: this.constructor.list
            }) + "</div>");
        this.__seed_html = u
    };
    if(!0) t.copy(t.P("nej.ui.cmd"), a);
    return a
}, 129, 1, 3, 725, 14);
I$(500, function(t, e, i, n, r, a, s, o) {
    var l;
    r._$$FontName = e._$klass();
    l = r._$$FontName._$extend(i._$$Font);
    r._$$FontName.command = "fontName";
    l.__doShowCard = function() {
        n._$$FontNameCard._$allocate(this.__fopt)._$show()
    };
    l.__getFontText = function() {
        var t = /['"]/g;
        return function(e) {
            if(e) return n._$$FontNameCard._$getText(e.replace(t, "")) || e
        }
    }();
    r._$$FontName._$regist();
    if(!0) t.copy(t.P("nej.ut.cmd"), r);
    return r
}, 129, 1, 623, 625);
I$(626, function(t, e, i, n, r, a, s) {
    var o;
    n._$$SimpleCommand = e._$klass();
    o = n._$$SimpleCommand._$extend(i._$$EditorCommand);
    o._$execute = function() {
        this.__editor._$execCommand(this.__name)
    };
    o._$queryState = function() {
        return this.__editor._$queryCommand(this.__name, "State")
    };
    if(!0) t.copy(t.P("nej.ut.cmd"), n);
    return n
}, 129, 1, 630);
I$(501, function(t, e, i, n, r, a, s) {
    n._$$Bold = e._$klass();
    n._$$Bold._$extend(i._$$SimpleCommand);
    n._$$Bold.command = "bold";
    n._$$Bold._$regist();
    if(!0) t.copy(t.P("nej.ut.cmd"), n);
    return n
}, 129, 1, 626);
I$(502, function(t, e, i, n, r, a, s) {
    n._$$Italic = e._$klass();
    n._$$Italic._$extend(i._$$SimpleCommand);
    n._$$Italic.command = "italic";
    n._$$Italic._$regist();
    if(!0) t.copy(t.P("nej.ut.cmd"), n);
    return n
}, 129, 1, 626);
I$(503, function(t, e, i, n, r, a, s) {
    n._$$InsertOrderedList = e._$klass();
    n._$$InsertOrderedList._$extend(i._$$SimpleCommand);
    n._$$InsertOrderedList.command = "insertorderedlist";
    n._$$InsertOrderedList._$regist();
    if(!0) t.copy(t.P("nej.ut.cmd"), n);
    return n
}, 129, 1, 626);
I$(504, function(t, e, i, n, r, a, s) {
    n._$$InsertUnorderedList = e._$klass();
    n._$$InsertUnorderedList._$extend(i._$$SimpleCommand);
    n._$$InsertUnorderedList.command = "insertunorderedlist";
    n._$$InsertUnorderedList._$regist();
    if(!0) t.copy(t.P("nej.ut.cmd"), n);
    return n
}, 129, 1, 626);
I$(505, function(t, e, i, n, r, a, s) {
    n._$$UnderLine = e._$klass();
    n._$$UnderLine._$extend(i._$$SimpleCommand);
    n._$$UnderLine.command = "underline";
    n._$$UnderLine._$regist();
    if(!0) t.copy(t.P("nej.ut.cmd"), n);
    return n
}, 129, 1, 626);
I$(506, function(t, e, i, n, r, a, s) {
    n._$$StrikeThrough = e._$klass();
    n._$$StrikeThrough._$extend(i._$$SimpleCommand);
    n._$$StrikeThrough.command = "strikethrough";
    n._$$StrikeThrough._$regist();
    if(!0) t.copy(t.P("nej.ut.cmd"), n);
    return n
}, 129, 1, 626);
I$(392, function(t, e, i, n, r, a) {
    i._$isColor = function() {
        var t = /^#(?:[0-9a-f]{3}){1,2}$/i;
        return function(e) {
            return t.test(e)
        }
    }();
    i._$isFullColor = function() {
        var t = /^#[0-9a-f]{6}$/i;
        return function(e) {
            return t.test(e)
        }
    }();
    i._$color2rgb = function() {
        var t = function(t, e, i) {
            i[e] += t
        };
        return function(n) {
            if(!i._$isColor(n)) return null;
            n = n.substr(1);
            if(3 == n.length) {
                var r = n.split("");
                e._$forEach(r, t);
                n = r.join("")
            }
            return {
                r: parseInt(n.substr(0, 2), 16),
                g: parseInt(n.substr(2, 2), 16),
                b: parseInt(n.substr(4, 2), 16)
            }
        }
    }();
    i._$rgb2color = function() {
        function t(t) {
            t = parseInt(t, 10);
            if(isNaN(t)) return "00";
            t = Math.max(0, Math.min(t, 255));
            return e.charAt((t - t % 16) / 16) + e.charAt(t % 16)
        }
        var e = "0123456789abcdef";
        return function(e) {
            return "#" + t(e.r) + t(e.g) + t(e.b)
        }
    }();
    i._$rgb2hsl = function(t) {
        var e = t.r,
            i = t.g,
            n = t.b;
        e /= 255, i /= 255, n /= 255;
        var r, a, s = Math.max(e, i, n),
            o = Math.min(e, i, n),
            l = s - o,
            c = (s + o) / 2;
        if(0 == l) r = a = 0;
        else {
            var l = s - o;
            a = c > .5 ? l / (2 - s - o) : l / (s + o);
            switch(s) {
                case e:
                    r = (i - n) / l + (i < n ? 6 : 0);
                    break;
                case i:
                    r = (n - e) / l + 2;
                    break;
                case n:
                    r = (e - i) / l + 4
            }
            r /= 6
        }
        return {
            h: r,
            s: a,
            l: c
        }
    };
    i._$hsl2rgb = function() {
        var t = function(t, e, i) {
            if(i < 0) i += 1;
            if(i > 1) i -= 1;
            if(i < 1 / 6) return t + 6 * (e - t) * i;
            if(i < .5) return e;
            if(i < 2 / 3) return t + (e - t) * (2 / 3 - i) * 6;
            else return t
        };
        return function(e) {
            var i, n, r;
            if(0 == e.s) i = n = r = e.l;
            else {
                var a = e.l,
                    s = e.s,
                    o = e.h,
                    l = a < .5 ? a * (1 + s) : a + s - a * s,
                    c = 2 * a - l;
                i = t(c, l, o + 1 / 3);
                n = t(c, l, o);
                r = t(c, l, o - 1 / 3)
            }
            return {
                r: Math.round(255 * i),
                g: Math.round(255 * n),
                b: Math.round(255 * r)
            }
        }
    }();
    i._$hsl2color = function(t) {
        return i._$rgb2color(i._$hsl2rgb(t))
    };
    i._$color2hsl = function(t) {
        return i._$rgb2hsl(i._$color2rgb(t))
    };
    if(!0) t.copy(t.P("nej.ut.c"), i);
    return i
}, 129, 4);
I$(868, function(t, e, i, n, r, a, s, o, l, c) {
    a._$$Dragger = e._$klass();
    c = a._$$Dragger._$extend(r._$$Draggable);
    c.__getOffset = function() {
        return i._$offset(this.__view)
    };
    c.__onDragStart = function(t) {
        n._$stop(t);
        if(!this.__offset) {
            this.__offset = this.__getOffset();
            this.__maxbox = this.__getMaxRange()
        }
    };
    c.__onDragging = function(t) {
        if(this.__offset) {
            n._$stop(t);
            var e = {
                x: n._$pageX(t),
                y: n._$pageY(t)
            };
            this._$setPosition({
                top: e.y - this.__offset.y,
                left: e.x - this.__offset.x
            })
        }
    };
    return a
}, 129, 1, 3, 6, 722);
I$(849, function(t, e, i, n, r, a, s, o, l, c) {
    var u;
    s._$$Slider = e._$klass();
    u = s._$$Slider._$extend(r._$$EventTarget);
    u.__init = function() {
        this.__dopt = {
            onchange: this.__onChange._$bind(this),
            ondragend: this.__onChange._$bind2(this, !0)
        };
        this.__super()
    };
    u.__reset = function(t) {
        this.__super(t);
        this.__dopt.view = i._$get(t.track);
        this.__dopt.body = i._$get(t.thumb) || i._$get(t.slide);
        this.__dopt.mbar = this.__dopt.view;
        this.__dopt.direction = parseInt(t.direction) || 0;
        this._$setRange(t.range);
        this.__doInitDomEvent([
            [this.__dopt.view, "mousedown", this.__onSlideToPosition._$bind(this)]
        ]);
        this.__dragger = a._$$Dragger._$allocate(this.__dopt)
    };
    u.__destroy = function() {
        this.__super();
        this.__dragger._$recycle();
        delete this.__dragger;
        delete this.__range;
        delete this.__dopt.view;
        delete this.__dopt.body;
        delete this.__dopt.mbar
    };
    u.__onChange = function(t, e) {
        var i = t.left / this.__range.x[1],
            n = t.top / this.__range.y[1],
            r = this.__range.x,
            a = this.__range.y;
        this._$dispatchEvent("onchange", {
            stopped: !!e,
            x: {
                rate: i,
                value: i * (r[1] - r[0])
            },
            y: {
                rate: n,
                value: n * (a[1] - a[0])
            }
        })
    };
    u.__onSlideToPosition = function(t) {
        var e = i._$offset(this.__dopt.view),
            r = {
                x: n._$pageX(t),
                y: n._$pageY(t)
            };
        this.__dragger._$setPosition({
            top: r.y - e.y,
            left: r.x - e.x
        })
    };
    u._$setRange = function(t) {
        var e;
        if(this.__range) {
            var i = this.__dragger._$getPosition();
            e = {
                x: i.left / this.__range.x[1],
                y: i.top / this.__range.y[1]
            }
        }
        t = t || o;
        var n = (t.x || c)[1] || this.__dopt.view.clientWidth - this.__dopt.body.offsetWidth,
            r = (t.y || c)[1] || this.__dopt.view.clientHeight - this.__dopt.body.offsetHeight;
        this.__range = {
            x: t.x || [0, n],
            y: t.y || [0, r]
        };
        if(e) this._$setPosition(e)
    };
    u._$setPosition = function(t) {
        t = t || o;
        this.__dragger._$setPosition({
            top: this.__range.y[1] * (t.y || 0),
            left: this.__range.x[1] * (t.x || 0)
        })
    };
    if(!0) t.copy(t.P("nej.ut"), s);
    return s
}, 129, 1, 3, 6, 19, 868);
I$(787, function(t, e, i, n, r, a, s) {
    var o;
    n._$$SliderY = e._$klass();
    o = n._$$SliderY._$extend(i._$$Slider);
    o.__reset = function(t) {
        t.direction = 2;
        this.__super(t)
    };
    if(!0) t.copy(t.P("nej.ut"), n);
    return n
}, 129, 1, 849);
I$(788, function(t, e, i, n, r, a, s) {
    var o;
    n._$$SliderXY = e._$klass();
    o = n._$$SliderXY._$extend(i._$$Slider);
    o.__reset = function(t) {
        t.direction = 0;
        this.__super(t)
    };
    if(!0) t.copy(t.P("nej.ut"), n);
    return n
}, 129, 1, 849);
I$(789, ".#<uispace>{width:160px;margin:0 auto;overflow:hidden;$<user-select>:none;}\n.#<uispace> .zbg{background:url(#<root>nej_color_btn.png) no-repeat -50px -50px;}\n.#<uispace> .zwrp{position:relative;padding:3px;zoom:1;cursor:default;font-size:1px;}\n.#<uispace> .zwrp .zdot{position:absolute;top:0;left:0;height:8px;overflow:hidden;}\n.#<uispace> .zwrp .zshw{height:104px;border:1px solid #bdbabd;}\n.#<uispace> .zpnl{float:left;}\n.#<uispace> .zpnl .zdot{width:8px;background-position:0 0;}\n.#<uispace> .zpnl .zshw{width:104px;background:url(#<root>nej_color.png) no-repeat;}\n.#<uispace> .zhlt{float:right;padding:3px 7px;}\n.#<uispace> .zhlt .zdot{width:44px;height:9px;background-position:0 -30px;}\n.#<uispace> .zhlt .zshw{width:26px;background:url(#<root>nej_color_mask.png) repeat-x;}");
I$(790, '<div>\n  <div class="zwrp zpnl js-ztag">\n    <span class="zdot zbg js-ztag">&nbsp;</span>\n    <div class="zshw">&nbsp;</div>\n  </div>\n  <div class="zwrp zhlt js-ztag">\n    <span class="zdot zbg js-ztag">&nbsp;</span>\n    <div class="zshw js-ztag">&nbsp;</div>\n  </div>\n</div>');
I$(649, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f, p, _) {
    var m;
    h._$$ColorPanel = e._$klass();
    m = h._$$ColorPanel._$extend(c._$$Abstract);
    m.__init = function() {
        this.__hsl = {};
        this.__sopt = {
            onchange: this.__onLightChange._$bind(this)
        };
        this.__dopt = {
            onchange: this.__onHueSatChange._$bind(this)
        };
        this.__super()
    };
    m.__reset = function(t) {
        this.__super(t);
        this.__default = t.defaultColor || "#fff";
        this.__lslide = o._$$SliderXY._$allocate(this.__dopt);
        this.__rslide = s._$$SliderY._$allocate(this.__sopt);
        this._$setColor(t.color)
    };
    m.__destroy = function() {
        this.__hsl = {};
        this.__lslide._$recycle();
        delete this.__lslide;
        this.__rslide._$recycle();
        delete this.__rslide;
        this.__super()
    };
    m.__initXGui = function() {
        var t = n._$pushCSSText(u, {
                root: i._$get("root")
            }),
            e = a._$addNodeTemplate(d);
        return function() {
            this.__seed_css = t;
            this.__seed_html = e
        }
    }();
    m.__initNode = function() {
        this.__super();
        var t = n._$getByClassName(this.__body, "js-ztag");
        this.__dopt.track = t[0];
        this.__dopt.thumb = t[1];
        this.__sopt.track = t[2];
        this.__sopt.thumb = t[3];
        this.__nlprv = t[4]
    };
    m.__onLightChange = function(t) {
        var e = 1 - t.y.rate;
        if(e != this.__hsl.l) {
            this.__hsl.l = e;
            this._$dispatchEvent("onchange", l._$hsl2color(this.__hsl))
        }
    };
    m.__onHueSatChange = function(t) {
        var e = t.x.rate,
            i = 1 - t.y.rate;
        if(e != this.__hsl.h || i != this.__hsl.s) {
            this.__hsl.h = e;
            this.__hsl.s = i;
            n._$setStyle(this.__nlprv, "backgroundColor", l._$hsl2color({
                h: this.__hsl.h,
                s: this.__hsl.s,
                l: .5
            }));
            this._$dispatchEvent("onchange", l._$hsl2color(this.__hsl))
        }
    };
    m._$setColor = function(t) {
        if(!l._$isColor(t)) t = this.__default;
        this.__hsl = l._$color2hsl(t);
        this.__lslide._$setPosition({
            x: this.__hsl.h,
            y: 1 - this.__hsl.s
        });
        this.__rslide._$setPosition({
            y: 1 - this.__hsl.l
        });
        this._$dispatchEvent("onchange", t)
    };
    if(!0) t.copy(t.P("nej.ui"), h);
    return h
}, 129, 1, 304, 3, 6, 14, 787, 788, 392, 142, 789, 790);
I$(869, ".#<uispace> .zbx{background:url(<#root>nej_color_btn.png) no-repeat -50px -50px;}\n.#<uispace> .zinf{width:160px;margin:0 auto;padding-bottom:2px;overflow:hidden;font-size:12px;}\n.#<uispace> .zinf .zfl{float:left;}\n.#<uispace> .zinf .zes{width:19px;height:19px;margin:0 2px 0 3px;background-position:-22px 0;cursor:pointer;}\n.#<uispace> .zinf .zpv{width:17px;height:17px;border:1px solid #bdbabd;}\n.#<uispace> .zinf .ztxt{width:56px;height:13px;line-height:13px;}\n.#<uispace> .zinf .zbtn{width:49px;height:20px;line-height:20px;padding:0;cursor:pointer;}");
I$(870, '<div>\n  <div class="zinf">\n    <span class="zfl zes zbx js-ztag" title="清除颜色">&nbsp;</span>\n    <span class="zfl zpv js-ztag">&nbsp;</span>\n    <label class="zfl">#<input class="ztxt js-ztag" type="text" maxlength="6"/></label>\n    <input class="zfl zbtn js-ztag" type="button" value="确定"/>\n  </div>\n</div>');
I$(850, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f, p) {
    var _;
    d._$$ColorPick = e._$klass();
    _ = d._$$ColorPick._$extend(o._$$Abstract);
    _.__init = function() {
        this.__popt = {
            onchange: this.__onColorChange._$bind(this)
        };
        this.__super()
    };
    _.__reset = function(t) {
        this.__super(t);
        this.__default = t.defaultColor || "#fff";
        this.__popt.color = t.color;
        this.__popt.defaultColor = this.__default;
        this.__panel = l._$$ColorPanel._$allocate(this.__popt)
    };
    _.__destroy = function() {
        this.__panel._$recycle();
        delete this.__panel;
        this.__super()
    };
    _.__initXGui = function() {
        var t = n._$pushCSSText(c, {
                root: i._$get("root")
            }),
            e = a._$addNodeTemplate(u);
        return function() {
            this.__seed_css = t;
            this.__seed_html = e
        }
    }();
    _.__initNode = function() {
        this.__super();
        var t = n._$getByClassName(this.__body, "js-ztag");
        this.__ninput = t[2];
        this.__npreview = t[1];
        this.__popt.parent = this.__body;
        r._$addEvent(t[0], "click", this.__onColorClear._$bind(this));
        r._$addEvent(t[2], "enter", this.__onColorSelect._$bind(this));
        r._$addEvent(t[3], "click", this.__onColorSelect._$bind(this))
    };
    _.__onColorClear = function() {
        this.__panel._$setColor(this.__default)
    };
    _.__onColorChange = function(t) {
        this.__ninput.value = t.substr(1);
        n._$setStyle(this.__npreview, "backgroundColor", t);
        this._$dispatchEvent("onchange", {
            color: t
        })
    };
    _.__onColorSelect = function() {
        var t = "#" + this.__ninput.value.trim();
        if(s._$isColor(t)) {
            this.__panel._$setColor(t);
            t = "#" + this.__ninput.value.trim();
            this._$dispatchEvent("onselect", {
                color: t
            })
        }
    };
    _._$setColor = function(t) {
        this.__panel._$setColor(t)
    };
    if(!0) t.copy(t.P("nej.ui"), d);
    return d
}, 129, 1, 304, 3, 6, 14, 392, 142, 649, 869, 870);
I$(851, ".#<uispace>{width:160px;padding:10px 5px 5px;border:1px solid #9FAC87;}");
I$(809, function(t, e, i, n, r, a, s, o, l, c) {
    var u, d = i._$pushCSSText(a);
    s._$$ColorCard = e._$klass();
    u = s._$$ColorCard._$extend(n._$$CardWrapper);
    u.__init = function() {
        this.__copt = {
            onselect: this.__onColorSelect._$bind(this)
        };
        this.__super()
    };
    u.__reset = function(t) {
        this.__super(t);
        this.__copt.color = t.color;
        this.__copt.parent = this.__layer._$getBody();
        this.__copt.defaultColor = t.defaultColor;
        this.__colorpick = this.__getColorPicker()
    };
    u.__destroy = function() {
        if(this.__colorpick) {
            this.__colorpick._$recycle();
            delete this.__colorpick
        }
        delete this.__copt.parent;
        this.__super()
    };
    u.__getColorPicker = function() {
        this.__copt.clazz = d;
        return r._$$ColorPick._$allocate(this.__copt)
    };
    u.__onColorSelect = function(t) {
        this._$dispatchEvent("onchange", t.color);
        this._$hide()
    };
    if(!0) t.copy(t.P("nej.ui.cmd"), s);
    return s
}, 129, 1, 3, 532, 850, 851);
I$(871, ".#<uispace>{text-align:left;}\n.#<uispace> .zdft{display:block;padding:3px 1px 3px 5px;margin:3px;cursor:pointer;}\n.#<uispace> .zdft:hover{padding:2px 0 2px 4px;background:#ffeec2;border:1px solid #000080;text-decoration:none;}\n.#<uispace> .zprv{display:block;width:28px;height:11px;overflow:hidden;border:1px solid #aca899;}\n.#<uispace> .zbox{width:152px;margin:0 5px;overflow:hidden;}\n.#<uispace> .zbox .zitm{display:block;float:left;width:11px;height:11px;overflow:hidden;margin:3px;border:1px solid #aca899;cursor:pointer;}\n.#<uispace> .zbox2{width:220px;margin-left:9px;border-width:1px 0 0 1px;border-color:#000;border-style:solid;}\n.#<uispace> .zbox2 .zitm2{width:10px;height:10px;margin:-1px 0 0 -1px;border-color:#000;}");
I$(872, '<textarea name=\'ntp\' id=\'#<seedHtml>\'>\n  <div class="\'+_seed_css+\'">\n    <a class="zdft" title="去除颜色" href="#">\n      <span class="zprv j-flag">&nbsp;</span>\n    </a>\n    <div class="zbox j-flag"></div>\n  </div>\n</textarea>\n\n<textarea name=\'jst\' id=\'#<seedColor>\'>\n  {list xlist as x}\n  <a class="zitm" title="${x.t}" style="background-color:${x.v}" data-value="${x.v}" href="#">&nbsp;</a>\n  {/list}\n</textarea>');
I$(852, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f) {
    var p, _ = n._$pushCSSText(l, {
            root: i._$get("root")
        }),
        m = s._$parseUITemplate(c),
        g = m["seedHtml"],
        v = m["seedColor"];
    u._$$SimpleColorPick = e._$klass();
    p = u._$$SimpleColorPick._$extend(a._$$Abstract);
    p.__reset = function(t) {
        this.__super(t);
        this.__default = t.defaultColor || "#ffffff";
        this.__doInitDomEvent([
            [this.__nprv.parentNode, "click", this.__onClearColor._$bind(this)],
            [this.__nbox, "click", this.__onSelectColor._$bind(this)],
            [this.__nbox, "mouseover", this.__onPreviewColor._$bind(this)]
        ]);
        this.__doPreviewColor(this.__default)
    };
    p.__destroy = function() {
        this.__super();
        delete this.__default
    };
    p.__initXGui = function() {
        this.__seed_css = _;
        this.__seed_html = g
    };
    p.__initNode = function() {
        this.__super();
        var t = n._$getByClassName(this.__body, "j-flag");
        this.__nprv = t[0];
        this.__nbox = t[1];
        this.__doRenderColorList()
    };
    p.__doRenderColorList = function() {
        var t = [{
            t: "黑色",
            v: "#000000"
        }, {
            t: "褐色",
            v: "#993300"
        }, {
            t: "橄榄色",
            v: "#333300"
        }, {
            t: "深绿",
            v: "#003300"
        }, {
            t: "深青",
            v: "#003366"
        }, {
            t: "深蓝",
            v: "#000080"
        }, {
            t: "靛蓝",
            v: "#333399"
        }, {
            t: "灰色-80%",
            v: "#333333"
        }, {
            t: "深红",
            v: "#800000"
        }, {
            t: "橙色",
            v: "#ff6600"
        }, {
            t: "深黄",
            v: "#808000"
        }, {
            t: "绿色",
            v: "#008000"
        }, {
            t: "青色",
            v: "#008080"
        }, {
            t: "蓝色",
            v: "#0000ff"
        }, {
            t: "蓝-灰",
            v: "#666699"
        }, {
            t: "灰色-50%",
            v: "#808080"
        }, {
            t: "红色",
            v: "#ff0000"
        }, {
            t: "浅橙色",
            v: "#ff9900"
        }, {
            t: "酸橙色",
            v: "#99cc00"
        }, {
            t: "海绿",
            v: "#339966"
        }, {
            t: "水绿色",
            v: "#33cccc"
        }, {
            t: "浅蓝",
            v: "#3366ff"
        }, {
            t: "紫罗兰",
            v: "#800080"
        }, {
            t: "灰色-40%",
            v: "#999999"
        }, {
            t: "粉红",
            v: "#ff00ff"
        }, {
            t: "金色",
            v: "#ffcc00"
        }, {
            t: "黄色",
            v: "#ffff00"
        }, {
            t: "鲜绿",
            v: "#00ff00"
        }, {
            t: "青绿",
            v: "#00ffff"
        }, {
            t: "天蓝",
            v: "#00ccff"
        }, {
            t: "梅红",
            v: "#993366"
        }, {
            t: "灰色-25%",
            v: "#c0c0c0"
        }, {
            t: "玫瑰红",
            v: "#ff99cc"
        }, {
            t: "茶色",
            v: "#ffcc99"
        }, {
            t: "浅黄",
            v: "#ffff99"
        }, {
            t: "浅绿",
            v: "#ccffcc"
        }, {
            t: "浅青绿",
            v: "#ccffff"
        }, {
            t: "淡蓝",
            v: "#99ccff"
        }, {
            t: "淡紫",
            v: "#cc99ff"
        }, {
            t: "白色",
            v: "#ffffff"
        }];
        return function() {
            o._$render(this.__nbox, v, {
                xlist: t
            })
        }
    }();
    p.__onClearColor = function(t) {
        r._$stop(t);
        this.__doChangeColor(this.__default)
    };
    p.__onSelectColor = function(t) {
        var e = r._$getElement(t, "d:value");
        if(e) {
            r._$stop(t);
            this.__doChangeColor(n._$dataset(e, "value"))
        }
    };
    p.__onPreviewColor = function(t) {
        var e = r._$getElement(t, "d:value");
        if(e) this.__doPreviewColor(n._$dataset(e, "value"))
    };
    p.__doPreviewColor = function(t) {
        n._$setStyle(this.__nprv, "backgroundColor", t)
    };
    p.__doChangeColor = function(t) {
        this._$dispatchEvent("onselect", {
            color: t
        })
    };
    if(!0) t.copy(t.P("nej.ui"), u);
    return u
}, 129, 1, 304, 3, 6, 142, 14, 15, 871, 872);
I$(810, function(t) {
    return t
}, 852);
I$(811, ".#<uispace>{width:160px;padding:5px 0;border:1px solid #9FAC87;}");
I$(726, function(t, e, i, n, r, a, s, o, l, c) {
    var u, d = i._$pushCSSText(a);
    s._$$SimpleColorCard = e._$klass();
    u = s._$$SimpleColorCard._$extend(n._$$ColorCard);
    u.__getColorPicker = function() {
        this.__copt.clazz = d;
        return r._$$SimpleColorPick._$allocate(this.__copt)
    };
    if(!0) t.copy(t.P("nej.ui.cmd"), s);
    return s
}, 129, 1, 3, 809, 810, 811);
I$(627, function(t, e, i, n, r, a, s, o) {
    var l;
    r._$$Color = e._$klass();
    l = r._$$Color._$extend(i._$$CardCommand);
    l.__onChange = function(t) {
        this.__editor._$execCommand(this.__name, t)
    };
    l.__doShowCard = function() {
        n._$$SimpleColorCard._$allocate(this.__fopt)._$show()
    };
    r._$$Color._$regist();
    if(!0) t.copy(t.P("nej.ut.cmd"), r);
    return r
}, 129, 1, 628, 726);
I$(507, function(t, e, i, n, r, a, s) {
    var o;
    n._$$ForeColor = e._$klass();
    o = n._$$ForeColor._$extend(i._$$Color);
    n._$$ForeColor.command = "foreColor";
    o.__init = function() {
        this.__super();
        this.__fopt.defaultColor = "#000"
    };
    n._$$ForeColor._$regist();
    if(!0) t.copy(t.P("nej.ut.cmd"), n);
    return n
}, 129, 1, 627);
I$(508, function(t, e, i, n, r, a, s) {
    var o;
    n._$$BackColor = e._$klass();
    o = n._$$BackColor._$extend(i._$$Color);
    n._$$BackColor.command = "hiliteColor";
    o.__init = function() {
        this.__super();
        this.__fopt.defaultColor = "#fff"
    };
    n._$$BackColor._$regist();
    if(!0) t.copy(t.P("nej.ut.cmd"), n);
    return n
}, 129, 1, 627);
I$(509, function(t, e, i, n, r, a, s) {
    n._$$JustifyLeft = e._$klass();
    n._$$JustifyLeft._$extend(i._$$SimpleCommand);
    n._$$JustifyLeft.command = "justifyLeft";
    n._$$JustifyLeft._$regist();
    if(!0) t.copy(t.P("nej.ut.cmd"), n);
    return n
}, 129, 1, 626);
I$(510, function(t, e, i, n, r, a, s) {
    n._$$JustifyCenter = e._$klass();
    n._$$JustifyCenter._$extend(i._$$SimpleCommand);
    n._$$JustifyCenter.command = "justifyCenter";
    n._$$JustifyCenter._$regist();
    if(!0) t.copy(t.P("nej.ut.cmd"), n);
    return n
}, 129, 1, 626);
I$(511, function(t, e, i, n, r, a, s) {
    n._$$JustifyRight = e._$klass();
    n._$$JustifyRight._$extend(i._$$SimpleCommand);
    n._$$JustifyRight.command = "justifyRight";
    n._$$JustifyRight._$regist();
    if(!0) t.copy(t.P("nej.ut.cmd"), n);
    return n
}, 129, 1, 626);
I$(727, ".#<uispace>{padding:20px 20px 32px 20px;}\n.#<uispace> .u-title{color:#ccc;height:35px;line-height:35px;border-bottom: solid 1px #ccc;}\n.#<uispace> .u-row{margin-bottom:10px;}\n.#<uispace> .u-error{color:red;padding-top:10px;font-size:12px;height:2em;}\n.#<uispace> .u-edit{position: relative;z-index: 101;background: #FAFAFA;border: 1px solid #DFDFDF;-webkit-box-shadow: inset 1px 1px 2px #DFDFDF;-moz-box-shadow: inset 1px 1px 2px #dfdfdf;box-shadow: inset 1px 1px 2px #DFDFDF;}\n.#<uispace> .btn a{border:solid 1px #ccc;padding:5px;}\n.#<uispace> .ipt{display:block;font-size: 14px;position: relative;z-index: 101;line-height:35px;height:35px;width: 290px;resize: none;background: transparent;border: none;color: #444;overflow:hidden;}");
I$(728, '<div>\n\t<div class="u-row f-cb"><div class="u-edit f-cb"><div class="f-fl u-title">标题</div><input class="f-fl ipt" type="text" /></div></div>\n\t<div class="f-cb"><div class="u-edit f-cb"><div class="f-fl u-title">链接</div><input class="f-fl ipt" type="text" value="http://" /></div></div>\n\t<div class="u-error j-error"></div>\n\t<div class="btn f-cb">\n\t  <a class="f-fr slave j-btn"><span>取消 </span></a>\n\t  <a class="f-fr main right j-btn"><span>确定 </span></a>\n\t</div>\n</div>');
I$(629, function(t, e, i, n, r, a, s, o, l, c, u, d) {
    var h, f = a._$addNodeTemplate(o),
        p = i._$pushCSSText(s);
    l._$$LinkCard = e._$klass();
    h = l._$$LinkCard._$extend(r._$$WindowWrapper);
    h.__initXGui = function() {
        this.__seed_css = p;
        this.__seed_html = f
    };
    h.__initNode = function() {
        this.__super();
        this.__btns = i._$getByClassName(this.__body, "j-btn");
        this.__inputs = i._$getByClassName(this.__body, "ipt");
        this.__errorMsg = i._$getByClassName(this.__body, "j-error")[0]
    };
    h.__reset = function(t) {
        t.parent = t.parent || document.body;
        t.draggable = t.draggable || !1;
        t.destroyable = t.destroyable || !1;
        t.title = t.title || "超链接";
        t.mask = t.maskclazz || !0;
        this.__super(t);
        this.__inputs[0].value = t.name || "";
        this.__doInitDomEvent([
            [this.__btns[1], "click", this.__onOK._$bind(this)],
            [this.__btns[0], "click", this.__onCancel._$bind(this)],
            [this.__inputs[0], "keypress", this.__onKeyPress._$bind(this)],
            [this.__inputs[1], "keypress", this.__onKeyPress._$bind(this)],
            [this.__inputs[0], "focus", this.__showErrorTips._$bind(this, "")],
            [this.__inputs[1], "focus", this.__showErrorTips._$bind(this, "")]
        ])
    };
    h.__onCancel = function() {
        this._$hide()
    };
    h.__onOK = function() {
        var t = /^(?:http(s)?:\/\/)[^\s].?/,
            e = /^(?:http(s)?:\/\/).*/;
        return function() {
            var i = {};
            i.name = n._$escape(this.__inputs[0].value);
            i.href = this.__inputs[1].value;
            var r = i.href.search(t),
                a = i.href.search(e);
            if(!(a < 0))
                if(!(r < 0)) {
                    this._$dispatchEvent("onchange", i);
                    this._$hide()
                } else this._$dispatchEvent("onErrorLink", 1);
            else this._$dispatchEvent("onErrorLink", 0)
        }
    }();
    h.__showErrorTips = function(t) {
        this.__errorMsg.innerText = t
    };
    h.__onKeyPress = function(t) {
        if(13 == t.keyCode) this.__onOK()
    };
    h._$doFocus = function() {
        this.__inputs[1].focus();
        this.__inputs[1].value = "http://"
    };
    if(!0) t.copy(t.P("nej.ui.cmd"), l);
    return l
}, 129, 1, 3, 4, 328, 14, 727, 728);
I$(512, function(t, e, i, n, r, a, s, o) {
    var l;
    r._$$Link = e._$klass();
    l = r._$$Link._$extend(i._$$CardCommand);
    r._$$Link.command = "link";
    l.__onChange = function(t) {
        if(t) {
            var e = "" != t.name ? t.name : t.href;
            this.__editor._$execCommand("inserthtml", '<a target="_blank" href="' + t.href + '">' + e + "</a>");
            this.__editor._$focus()
        }
    };
    l.__doShowCard = function() {
        this.__fopt.name = this.__editor._$getSelectText();
        this.__linkCard = this.__onShowCard();
        this.__linkCard._$show();
        this.__linkCard._$doFocus()
    };
    l.__onShowCard = function() {
        return n._$$LinkCard._$allocate({
            draggable: !0,
            destroyable: !0,
            maskclazz: "m-mask",
            name: this.__fopt.name,
            title: "添加超链接",
            onchange: this.__onChange._$bind(this),
            onErrorLink: this.__onError._$bind(this)
        })
    };
    l.__onError = function() {
        this.__linkCard.__showErrorTips("请输入合法的链接地址（http://或https://）")
    };
    r._$$Link._$regist();
    if(!0) t.copy(t.P("nej.ut.cmd"), r);
    return r
}, 129, 1, 628, 629);
I$(513, function(t, e, i, n, r, a, s) {
    n._$$Format = e._$klass();
    _pro = n._$$Format._$extend(i._$$EditorCommand);
    n._$$Format.command = "format";
    _pro._$execute = function() {
        this.__editor._$setContentNoStyle()
    };
    n._$$Format._$regist();
    if(!0) t.copy(t.P("nej.ut.cmd"), n);
    return n
}, 129, 1, 630);
I$(22, function(t, e, i, n, r, a, s, o, l, c) {
    var u;
    s._$$Tab = e._$klass();
    u = s._$$Tab._$extend(a._$$EventTarget);
    u.__reset = function(t) {
        this.__super(t);
        this.__name = t.event || "click";
        this.__selected = t.selected || "js-selected";
        this.__disabled = t.disabled || "js-disabled";
        this.__inversed = !!t.inverse;
        this.__doTabListCheck(t.list);
        this._$go(t.index || 0)
    };
    u.__destroy = function() {
        var t = function(t) {
            this.__doTabItemSelect(t, !1)
        };
        return function() {
            this.__super();
            n._$forEach(this.__list, t, this);
            delete this.__list;
            delete this.__name;
            delete this.__index;
            delete this.__disabled;
            delete this.__selected;
            delete this.__inversed
        }
    }();
    u.__doTabListCheck = function() {
        var t = function(t) {
            if(t) {
                this.__list.push(t);
                var e = this.__list.length - 1,
                    i = this.__cblist[e];
                if(!i) {
                    i = this._$go._$bind(this, e);
                    this.__cblist[e] = i
                }
                this.__doInitDomEvent([
                    [t, this.__name, i]
                ])
            }
        };
        return function(e) {
            this.__list = [];
            if(!this.__cblist) this.__cblist = [];
            n._$forEach(e, t, this)
        }
    }();
    u.__doTabItemSelect = function(t, e) {
        e && !this.__inversed ? r._$addClassName(t, this.__selected) : r._$delClassName(t, this.__selected)
    };
    u._$go = function(t, e) {
        var n = this.__list[t];
        if(1 != e && (t == this.__index || !n || r._$hasClassName(n, this.__disabled))) i._$stopDefault(arguments[1]);
        var a = {
            stopped: !0,
            index: t,
            last: this.__index,
            list: this._$getList(),
            data: r._$dataset(n, "value")
        };
        this.__index = t;
        n = this.__list[a.last];
        if(n) this.__doTabItemSelect(n, !1);
        n = this.__list[this.__index];
        this.__doTabItemSelect(n, !0);
        this._$dispatchEvent("onchange", a);
        if(a.stopped) i._$stopDefault(arguments[1])
    };
    u._$getIndex = function() {
        return this.__index
    };
    u._$getList = function() {
        return this.__list
    };
    if(!0) t.copy(t.P("nej.ut"), s);
    return s
}, 129, 1, 6, 4, 3, 19);
I$(729, ".#<uispace>{width:336px;}\n.#<uispace> .m-iframe{position:absolute;height:0px;width:0px;left:-9000px;}\n.#<uispace> .u-upload-file{height:0px;width:0px;font-size:0px;}\n.#<uispace> .u-error{color:red;padding-top:10px;}\n.#<uispace> .choose_file{position:relative;margin-bottom:10px;}\n.#<uispace> .choose_file object{position:absolute;left:0;top:0;}\n.#<uispace> .web_img{margin-bottom:8px;}\n.#<uispace> .web_img .u-edit{margin-bottom:10px;}\n.#<uispace> .u-desc{color:#ccc;}\n.#<uispace> .middle{color:#528CE0;}\n.#<uispace> .u-btn{cursor:pointer;color:#528CE0;}\n.#<uispace> .u-image{width:0px;height:0px;visibility:hidden;}");
I$(730, '<div>\n\t<div>\n\t  <a class="u-btn f-ib upload j-tab f-fl" name="upload"><span class="img-upload">上传图片</span></a>\n\t  <a class="u-btn f-ib extern j-tab" name="extern"><span class="img-extern">引用站外图片</span></a>\n\t  <img class="j-ztag u-image" />\n\t</div>\n\t<div class="j-cnt">\n\t  <div class="choose_file" name="select_image">\n\t    <div class="btn2">\n\t      <a class="main middle"><span>选择图片</span></a>\n\t    </div>\n\t  </div>\n\t  <p class="u-desc j-desc"></p>\n\t</div>\n\t<div class="j-cnt">\n\t  <div class="f-cb web_img">\n\t      <div class="f-fl u-edit"><input class="ipt j-ztag" type="text" /></div>\n\t      <div class="btn2 f-fl j-ztag">\n\t        <a class="main small"><span>确定</span></a>\n\t      </div>\n\t  </div>\n\t  <p class="u-desc j-desc"></p>\n\t</div>\n\t<div class="u-error j-ztag"></div>\n</div>');
I$(631, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f, p, _) {
    var m, g = n._$pushCSSText(u),
        v = c._$addNodeTemplate(d);
    h._$$UploadImageCard = e._$klass();
    m = h._$$UploadImageCard._$extend(s._$$WindowWrapper);
    m.__reset = function(t) {
        t = t || {};
        t.parent = t.parent || document.body;
        t.draggable = t.draggable || !1;
        t.destroyable = t.destroyable || !1;
        t.title = t.title || "选择图片";
        t.mask = !0;
        this.__super(t);
        this.__onShowErrorTips("")
    };
    m.__init = function(t) {
        t = t || {};
        this.__super(t);
        this.__desc[0].innerText = t.fDesc || "支持JPG、JPEG、GIF、BMP格式的图片，文件需小于10M";
        this.__desc[1].innerText = t.oDesc || "网络图片不能超过2M";
        this._$setEvent("oninitflash", t.oninitflash || p);
        this._$setEvent("onflashinited", t.onflashinited || p);
        this._$dispatchEvent("oninitflash");
        this.__doRegiestFlashEvent(t.namespace || "nej.ui.cmd");
        var e = encodeURIComponent(t.baseUrl || "http://upload.photo.163.com/anony/web/upload/userdefinesize?NaN" + t.userdefinesize || "750x750x0x90;350x350x0x85&saveorigin=" + t.saveorigin || "false&responsetype=" + t.responsetype || "xml&rotatedegree=" + t.rotatedegree || "0&stamptype=" + t.stamptype || "&stampstring=" + encodeURIComponent(t.stampstring || "") + "&sitefrom=" + t.sitefrom || "study");
        this.__hopt = {
            src: t.swfUrl || i._$get("upload.image.swf"),
            hidden: !1,
            parent: n._$getByClassName(this.__body, "choose_file")[0],
            width: t.flashWidth || 100,
            height: t.flashHeight || 20,
            params: {
                flashvars: "cbNameSpace=" + this.__namespace + "&uploadExif=true&uploadUrl=" + e,
                allowscriptaccess: "always",
                wmode: "transparent"
            },
            onready: this.__onFlashReady._$bind(this)
        };
        l._$flash(this.__hopt)
    };
    m.__initNode = function() {
        this.__super();
        this.__desc = n._$getByClassName(this.__body, "j-desc");
        this.__cnts = n._$getByClassName(this.__body, "j-cnt");
        var t = n._$getByClassName(this.__body, "j-ztag");
        this.__nimgUrl = t[1];
        this.__nerrorMsg = t[3];
        this.__nimgBox = t[0];
        this.__topt = {
            list: n._$getByClassName(this.__body, "j-tab"),
            selected: "j-selected",
            onchange: this.__onTabChange._$bind(this)
        };
        this.__tabMg = o._$$Tab._$allocate(this.__topt);
        r._$addEvent(t[2], "click", this.__onSubmitImgUrl._$bind(this));
        r._$addEvent(this.__nimgBox, "error", this.__onImgUrlError._$bind(this));
        r._$addEvent(this.__nimgBox, "load", this.__onImgLoad._$bind(this));
        r._$addEvent(this.__nimgUrl, "focus", this.__onShowErrorTips._$bind(this, ""))
    };
    m.__initXGui = function() {
        this.__seed_css = g;
        this.__seed_html = v
    };
    m.__doRegiestFlashEvent = function(e) {
        this.__namespace = e + a._$randNumberString(2);
        var i = t.P(this.__namespace);
        i.uploadStart = this.__onUploadStart._$bind(this);
        i.uploadComplete = this.__onUploadComplete._$bind(this);
        i.uploadError = this.__uploadError._$bind(this);
        i.showProgress = this.__showProgress._$bind(this)
    };
    m.__onUploadComplete = function(t, e, i) {
        if(999 != e) this.__onShowErrorTips("图片上传失败");
        else {
            this.__onShowErrorTips("");
            this._$dispatchEvent("onchange", "inserthtml", i);
            this.__onafterupload();
            this._$hide()
        }
    };
    m.__onShowErrorTips = function(t) {
        this.__nerrorMsg.innerText = t
    };
    m.__onUploadStart = function() {
        this.__onbeforeupload()
    };
    m.__onFlashReady = function(t) {
        this.__flashObj = t;
        this._$dispatchEvent("onflashinited")
    };
    m.__onSubmitImgUrl = function() {
        this.__nimgBox.src = this.__nimgUrl.value.trim()
    };
    m.__onImgUrlError = function() {
        if(this.__nimgBox.src.indexOf("htpp://false") > 0) this.__nerrorMsg.innerText = "无法获取链接中的图片，请检查链接或稍后重试"
    };
    m.__onImgLoad = function() {
        var t = {
            resultcode: 999,
            userDef2Url: this.__nimgUrl.value
        };
        this.__nimgBox.src = "htpp://false";
        this.__onUploadComplete("webimg", t.resultcode, t)
    };
    m.__onbeforeupload = p;
    m.__onafterupload = p;
    m.__uploadError = p;
    m.__showProgress = p;
    m.__onTabChange = function(t) {
        this.__onShowErrorTips("");
        var e = t.index;
        this.__nimgUrl.value = "";
        n._$setStyle(this.__cnts[e], "display", "");
        n._$setStyle(this.__cnts[(e + 1) % 2], "display", "none")
    };
    if(!0) t.copy(t.P("nej.ui.cmd"), h);
    return h
}, 129, 1, 304, 3, 6, 4, 328, 22, 426, 14, 729, 730);
I$(514, function(t, e, i, n, r, a, s, o, l) {
    var c;
    a._$$UploadImage = e._$klass();
    c = a._$$UploadImage._$extend(n._$$CardCommand);
    a._$$UploadImage.command = "uploadImage";
    c.__doShowCard = function() {
        this.__onShowCard()
    };
    c.__onShowCard = function() {
        if(!this.__uploadCard) this.__uploadCard = r._$$UploadImageCard._$allocate({
            onchange: this.__onChange._$bind(this)
        });
        this.__uploadCard._$show()
    };
    c.__onChange = function(t, e) {
        this.__editor._$focus(2);
        var n, r = 0;
        if(e.ourl && e.ourl.indexOf(".gif") > 0) {
            n = e.ourl;
            if(e.photoGarbageIds) {
                var a = e.photoGarbageIds.split(",");
                i._$forEach(a, function(t, e) {
                    if(t.search("ourl") >= 0) r = t.split(":")[1]
                }, this)
            }
        } else {
            n = e.userDef2Url;
            if(e.photoGarbageIds) {
                var a = e.photoGarbageIds.split(",");
                i._$forEach(a, function(t, e) {
                    if(t.search("userdef2url") >= 0) r = t.split(":")[1]
                }, this)
            }
        }
        var s = '<img style="max-width:520px;" src=' + n + " id=" + r + " />";
        this.__editor._$execCommand(t, s);
    };
    a._$$UploadImage._$regist();
    if(!0) t.copy(t.P("nej.ut.cmd"), a);
    return a
}, 129, 1, 4, 628, 631);
I$(515, function(t, e, i, n, r, a, s) {
    var o;
    n._$$Blockquote = e._$klass();
    o = n._$$Blockquote._$extend(i._$$EditorCommand);
    n._$$Blockquote.command = "blockquote";
    o._$execute = function(t) {
        this.__editor._$execCommand("superscript", !1, 1)
    };
    n._$$Blockquote._$regist();
    if(!0) t.copy(t.P("nej.ut.cmd"), n);
    return n
}, 129, 1, 630);
I$(344, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f, p, _, m, g, v, y, b, x, $, w, k) {
    var S, C;
    x._$$CustomEditor = e._$klass();
    S = x._$$CustomEditor._$extend(i._$$Editor);
    S.__reset = function(t) {
        this.__super(t)
    };
    S.__initXGui = function() {
        this.__super();
        this.__seed_html = C
    };
    S.__initNodeTemplate = function() {
        var t = [{
                cmd: "bold",
                txt: "加粗",
                icn: "z-i-30"
            }, {
                cmd: "italic",
                txt: "斜体",
                icn: "z-i-31"
            }, {
                cmd: "underline",
                txt: "下划线",
                icn: "z-i-32"
            }, {
                cmd: "strikethrough",
                txt: "删除线",
                icn: "z-i-40"
            }, {
                cmd: "insertorderedlist",
                txt: "有序列表",
                icn: "z-i-61"
            }, {
                cmd: "insertunorderedlist",
                txt: "无序列表",
                icn: "z-i-62"
            }, {
                cmd: "foreColor",
                txt: "字体颜色",
                icn: "z-i-41"
            }, {
                cmd: "hiliteColor",
                txt: "背景颜色",
                icn: "z-i-122"
            }],
            e = [{
                cmd: "justifyLeft",
                txt: "左对齐",
                icn: "z-i-50"
            }, {
                cmd: "justifyCenter",
                txt: "居中对齐",
                icn: "z-i-51"
            }, {
                cmd: "justifyRight",
                txt: "右对齐",
                icn: "z-i-52"
            }, {
                cmd: "format",
                txt: "清除格式",
                icn: "z-i-72"
            }],
            i = [{
                cmd: "",
                txt: "图片上传",
                icn: "z-i-82",
                clazz: "editor-upload-img",
                upload: !0
            }];
        return function() {
            C = n._$addNodeTemplate(this.__doGenEditorXhtml({
                toolbar: this.__doGenFontSizeXhtml() + this.__doGenFontNameXhtml() + this.__doGenCmdXhtml({
                    xlist: t,
                    hr: !0
                }) + this.__doGenCmdXhtml({
                    xlist: e
                }) + this.__doGenCmdXhtml({
                    xlist: i
                })
            }));
            this.__seed_html = C
        }
    }();
    if(!0) t.copy(t.P("nej.ui"), x);
    return x
}, 129, 1, 498, 14, 499, 500, 501, 502, 503, 504, 505, 506, 507, 508, 509, 510, 511, 512, 513, 514, 515);
I$(430, function(t, e, i, n, r, a) {
    i.__handleFileLabelClick = function() {};
    return i
});
I$(233, function(t, e, i, n, r, a, s) {
    if("gecko" === t._$KERNEL.engine) I$(449, function() {
        i.__handleFileLabelClick = function() {
            var t = function(t) {
                e._$stop(t);
                e._$getElement(t, "t:label").control.click()
            };
            return function(i) {
                e._$addEvent(i, "click", t)
            }
        }()
    });
    return i
}, 148, 6, 430);
I$(65, function(t, e, i, n, r, a, s, o, l, c) {
    var u = {},
        d = e._$pushCSSText(".#<uispace>{position:absolute;width:0;height:0;overflow:hidden;}");
    s._$bind = function() {
        var t = function(t) {
                var e = u[t];
                if(!e) {
                    e = {};
                    u[t] = e
                }
                return e
            },
            a = function(t, e) {
                if(e) {
                    var i = [];
                    n._$loop(e, function(t, e) {
                        i.push('<input type="hidden" name="' + e + '" value="' + t + '">')
                    });
                    t.insertAdjacentHTML("afterBegin", i.join(""))
                }
            },
            s = function(t, i, n, r, s) {
                var o, l = u[t],
                    c = d + " " + (n || "");
                i = e._$get(i);
                if(i) {
                    o = e._$create("div", c);
                    i.appendChild(o);
                    e._$dataset(i, "id", t);
                    a(i, r)
                } else {
                    o = e._$create("form", c);
                    e._$dataset(o, "id", t);
                    a(o, r);
                    (s || document.body).appendChild(o)
                }
                l.pid = e._$id(o)
            },
            c = function(t, n) {
                var r = n.accept || "";
                if(r) r = 'accept="' + r + '"';
                var a = "";
                if(n.multiple) a = 'multiple="true"';
                var n = u[t],
                    s = t + "-" + n.nmb,
                    o = e._$html2node('<input type="file" ' + a + " " + r + ' contenteditable="false" id="' + s + '"/>');
                n.nmb++;
                e._$get(n.pid).appendChild(o);
                i._$addEvent(o, "change", h);
                return s
            },
            h = function(t) {
                var n = i._$getElement(t),
                    r = n.id,
                    a = r.split("-"),
                    s = u[a[0]];
                if(n.value) {
                    if(s.multiple) e._$get(s.lab).htmlFor = c(a[0], s);
                    if(!n.name) {
                        var o = "";
                        n.name = s.name + o
                    }
                    s.onchange({
                        id: r,
                        form: n.form,
                        target: e._$get(s.lab)
                    })
                }
            };
        return function(i, a) {
            i = e._$get(i);
            if(i && "LABEL" == i.tagName) {
                e._$dumpCSSText();
                var u = n._$uniqueID(),
                    d = t(u);
                a = a || o;
                s(u, a.form, a.clazz, a.param, e._$get(a.parent));
                d.nmb = 0;
                d.name = a.name || "file";
                d.lab = e._$id(i);
                d.accept = a.accept || "";
                d.multiple = !!a.multiple;
                d.onchange = a.onchange || l;
                i.htmlFor = c(u, d);
                r.__handleFileLabelClick(i);
                return u
            }
        }
    }();
    s._$get = function(t) {
        var i = u[t];
        if(i) {
            var n = e._$get(i.pid);
            if(n) {
                if("FORM" != n.tagName) n = n.parentNode;
                return n
            }
        }
    };
    s._$unbind = function(t) {
        var i = u[t];
        if(i) {
            e._$remove(i.pid);
            delete u[t]
        }
    };
    a._$merge({
        _$bind: s._$bind
    });
    if(!0) {
        var a = t.P("nej.e");
        a._$file = s._$bind;
        a._$getFileForm = s._$get;
        a._$removeFileForm = s._$unbind
    }
    return s
}, 129, 3, 6, 4, 233, 132);
I$(167, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f, p, _) {
    p._$$SingleText = t._$klass();
    _ = p._$$SingleText._$extend(u._$$Module);
    var m = a._$parseUITemplate(o);
    m["rt"];
    _.__reset = function(t) {
        var n = this;
        this.__super(t);
        this.__options = t.options;
        this.__dashData = t.dashData;
        this.__textId = this.__dashData.textId;
        this.__cache = c._$$DashBoardCache._$allocate({
            onfileupload: this.__cbFileUpload._$bind(this)
        });
        this.__drawWrap();
        this.__chartItem = e._$get("chart-item-text-" + this.__textId);
        this.__editorBox = e._$getByClassName(this.__chartItem, "editor-box")[0];
        this.__mockBox = e._$getByClassName(this.__chartItem, "mock-box")[0];
        this.__editorControl();
        this.__doInitDomEvent([
            [this.__chartItem, "click", this.__doAction._$bind(this)]
        ]);
        this.__autoCk = e._$getByClassName(this.__chartItem, "auto-checkbox")[0];
        if(this.__autoCk) i._$addEvent(this.__autoCk, "click", this.__autoHeightClick._$bind(this));
        if(!this.__dashData.alreadyAutoHeight)
            if("auto" == this.__dashData.showMode) setTimeout(function() {
                n.__autoHeight()
            }, 1e3)
    };
    _.__destroy = function() {
        delete this.__globalObj.textControlObj[this.__textId]
    };
    _.__drawWrap = function() {
        var t = this.__dashData;
        this.__toggleBlank(2);
        var e = this.__getBoxInfo(t);
        for(key in e) t[key] = e[key];
        t.edit = this.__edit;
        t.projectId = window.currentProjectId || 0;
        t.canAuto = d.isAutoHeight(t);
        var i = s._$get("jst-create-text", t);
        this.__rbox.insertAdjacentHTML("beforeEnd", i)
    };
    _.__editorControl = function() {
        var t = this.__dashData;
        if(this.__cockpit && "black" == t.theme) var i = "img{max-width:100%;}body{color:#ccc;line-height:1.5}";
        else var i = "img{max-width:100%;}body{line-height:1.5}";
        this.__editor = h._$$CustomEditor._$allocate({
            parent: this.__editorBox,
            clazz: "t-editor",
            focus: !1,
            content: this.__dashData.content,
            oninput: this.__onChange._$bind(this),
            style: i,
            onloaded: this.__onIframeLoaded._$bind(this)
        });
        this.__setMockContent();
        this.__keyBind();
        this.__fileUpload();
        var n = this.__dashData.height - 30,
            r = e._$getByClassName(this.__editorBox, "zarea")[0];
        if(this.__edit) e._$setStyle(r, "height", n + "px");
        else e._$setStyle(r, "height", this.__dashData.height + "px")
    };
    _.__onIframeLoaded = function() {
        this.__iframe = e._$getChildren(e._$getByClassName(this.__editor.__body, "zarea")[0])[0];
        if(!this.__edit)
            if(this.__iframe.contentWindow) this.__iframe.contentWindow.document.body.setAttribute("contenteditable", "false")
    };
    _.__onChange = function() {
        this.__dashData.content = this.__editor._$getContent({
            keepStyle: !0
        });
        this.__setMockContent()
    };
    _.__setMockContent = function() {
        this.__mockBox.innerHTML = this.__dashData.content
    };
    _.__keyBind = function() {};
    _.__fileUpload = function() {
        var t = e._$getByClassName(this.__editor.__body, "editor-upload-img")[0],
            i = this;
        this.__fileForm = f._$bind(t, {
            accept: ".png,.jpg,.jpeg",
            parent: this.__editor.__body,
            onchange: function(t) {
                if(!(e._$getChildren(t.form)[0].files && e._$getChildren(t.form)[0].files[0].size > 10485760)) {
                    i.__cache._$fileUpload(t.form);
                    i.__uploadForm = t.form
                } else {
                    l.message("上传文件不能大于10M!请重新选择！");
                    t.form.reset()
                }
            }
        })
    };
    _.__cbFileUpload = function(t) {
        if(this.__uploadForm) this.__uploadForm.reset();
        switch(t.code) {
            case 200:
                this.__editor.__editor.__copt.area._$focus(2);
                this.__editor.__editor.__copt.area._$execCommand("inserthtml", '<p><img src="' + t.result.link + '"/></p>');
                break;
            default:
                l.message(t.message || "文件上传失败或不支持的格式")
        }
    };
    _.__doAction = function(t) {
        var r = i._$getElement(t, "d:action"),
            a = e._$dataset(r, "action");
        if(a) {
            this.__globalObj.dataChanged = !0;
            i._$stop(t);
            switch(a) {
                case "del":
                    n._$forIn(this.__chartList, function(t, e, i) {
                        if(t.textId == this.__textId) {
                            i.splice(e, 1);
                            return !0
                        }
                    }._$bind(this));
                    e._$remove(this.__chartItem, !1);
                    if(0 == this.__chartList.length) this.__toggleBlank(1);
                    if(this.__globalObj.textControlObj[this.__textId]) this.__globalObj.textControlObj[this.__textId]._$recycle()
            }
        }
    };
    _.__autoHeightClick = function(t) {
        this.__globalObj.dataChanged = !0;
        this.__dashData.showMode = "auto" == this.__dashData.showMode ? "" : "auto";
        this.__autoHeight()
    };
    _.__autoHeight = function() {
        var t = this.__dashData;
        t.alreadyAutoHeight = !0;
        if("auto" == t.showMode) {
            t.oldey = t.ey;
            t.oldHeight = t.ey - t.y + 1;
            if(this.__edit) var e = this.__mockBox.clientHeight + 90;
            else var e = this.__mockBox.clientHeight + 70;
            t.ey = t.y + Math.floor(e / this.__unit);
            var i = t.ey - t.oldey;
            this.__allocateSingleText();
            this.__offsetReport(t.oldey, i)
        } else if(t.oldey && t.oldHeight) {
            var i = t.oldey - t.ey;
            this.__offsetReport(t.ey, i);
            t.ey = t.oldey;
            this.__allocateSingleText(t);
            delete t.oldey;
            delete t.oldHeight
        }
    };
    _.__allocateSingleText = function() {
        e._$remove(this.__chartItem);
        this.__destroy();
        this.__globalObj.textControlObj[this.__textId] = p._$$SingleText._$allocate({
            options: this.__options,
            dashData: this.__dashData
        })
    };
    _._$changeTextTheme = function() {
        var t = this.__dashData;
        if(this.__iframe && this.__iframe.contentWindow) {
            var i = this.__iframe.contentWindow.document.body;
            if("black" == t.theme) e._$setStyle(i, "color", "#ccc");
            else e._$setStyle(i, "color", "#333")
        }
    };
    return p
}, 1, 3, 6, 4, 142, 14, 15, 343, 7, 53, 163, 55, 344, 65);
I$(345, '<meta charset="utf-8"/>\n<!-- @TEMPLATE -->\n<textarea name="ntp" id="#<rt>"></textarea>\n\n<textarea name="jst" id="jst-create-tab">\n<div class="chart-item chart-item-tab {if !edit}chart-item-show{else}chart-item-edit{/if}" style="left:${left}px;top:${top}px;width:${width}px;height:${height}px" data-tabid="${tabId}" id="chart-item-tab-${tabId}">\n    {if edit}\n    <div class="ttl ttl-1">\n        <span class="wrd f-ellipsis" data-drag="1" data-type="2" data-tabid="${tabId}"></span>\n        <div class="u-icn u-icn-line2" data-drag="1" data-type="2" data-tabid="${tabId}"></div>\n        <div class="opt">\n            <div class="u-icn u-icn-close" data-action="del" data-tabid="${tabId}" title="删除"></div>\n        </div>\n    </div>\n    <div class="inr">\n        <span class="lefttop" data-drag="2" data-type="2" data-mold="5" data-tabid="${tabId}">&nbsp;</span>\n        <span class="top" data-drag="2" data-type="2" data-mold="1" data-tabid="${tabId}">&nbsp;</span>\n        <span class="righttop" data-drag="2" data-type="2" data-mold="6" data-tabid="${tabId}">&nbsp;</span>\n        <span class="right" data-drag="2" data-type="2" data-mold="2" data-tabid="${tabId}">&nbsp;</span>\n        <span class="rightbottom" data-drag="2" data-type="2" data-mold="7" data-tabid="${tabId}">&nbsp;</span>\n        <span class="bottom" data-drag="2" data-type="2" data-mold="3" data-tabid="${tabId}">&nbsp;</span>\n        <span class="leftbottom" data-drag="2" data-type="2" data-mold="8" data-tabid="${tabId}">&nbsp;</span>\n        <span class="left" data-drag="2" data-type="2" data-mold="4" data-tabid="${tabId}">&nbsp;</span>\n    </div>\n    <div class="inr-point">\n        <span class="lefttop">&nbsp;</span>\n        <span class="top">&nbsp;</span>\n        <span class="righttop">&nbsp;</span>\n        <span class="right">&nbsp;</span>\n        <span class="rightbottom">&nbsp;</span>\n        <span class="bottom">&nbsp;</span>\n        <span class="leftbottom">&nbsp;</span>\n        <span class="left">&nbsp;</span>\n    </div>\n    {/if}\n\n    <div class="tabs" id="tab-box-${tabId}">\n        {list tabs as x}\n        <div class="itm itm-tab f-fl">\n            <div class="itm-name f-ellipsis j-tab-text" title="${x.name}" data-action="tab">${x.name}</div>\n            <div class="itm-ipt j-tab-ipt-box" style="display:none;"><input type="text" value="${x.name}" class="j-tab-ipt"/></div>\n            {if edit}<div class="u-icn u-icn-close" data-action="tabdel" data-key="${x.key}"></div>{/if}\n        </div>\n        {/list}\n        {if edit}<div class="itm itm-add f-fl" data-action="add">+</div>{/if}\n    </div>\n    <div class="cons" id="con-box-${tabId}">\n        {list tabs as x}\n        <div class="itm itm-con" data-drop="true" data-tabid="${tabId}" data-key="${x.key}" style="display:none;" id="tab-con-${tabId}-${x.key}">\n            <div class="empty">\n                <div class="img"></div>\n            </div>\n        </div>\n        {/list}\n    </div>\n</div>\n</textarea>');
I$(168, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f) {
    h._$$SingleTab = t._$klass();
    f = h._$$SingleTab._$extend(u._$$Module);
    var p = a._$parseUITemplate(l);
    p["rt"];
    f.__reset = function(t) {
        var n = this;
        this.__super(t);
        this.__options = t.options;
        this.__dashData = t.dashData;
        this.__tabId = this.__dashData.tabId;
        this.__dashData.index = this.__dashData.index || 0;
        this.__onlink = t.onlink;
        this.__drawWrap();
        this.__chartItem = e._$get("chart-item-tab-" + this.__tabId);
        this.__tabBox = e._$get("tab-box-" + this.__tabId);
        this.__conBox = e._$get("con-box-" + this.__tabId);
        this.__tabItems = e._$getByClassName(this.__tabBox, "itm-tab");
        this.__conItems = e._$getByClassName(this.__conBox, "itm-con");
        this.__tabItemsText = e._$getByClassName(this.__tabBox, "j-tab-text");
        this.__tabItemsIptBox = e._$getByClassName(this.__tabBox, "j-tab-ipt-box");
        this.__tabItemsIpt = e._$getByClassName(this.__tabBox, "j-tab-ipt");
        this.__doInitDomEvent([
            [this.__chartItem, "click", this.__doAction._$bind(this)],
            [this.__chartItem, "dblclick", this.__doAction2._$bind(this)],
            [document, "click", this.__doDocument._$bind(this)]
        ]);
        e._$getByClassName(this.__tabBox, "j-tab-ipt").forEach(function(t) {
            i._$addEvent(t, "input", n.__tabNameChange._$bind(n))
        });
        i._$addEvent(document, "keydown", function(t) {
            if(13 == t.keyCode) n.__doDocument()
        });
        this.__tabAllocate();
        this.__setTabWidth()
    };
    f.__destroy = function() {
        delete this.__globalObj.tabControlObj[this.__tabId]
    };
    f.__drawWrap = function() {
        var t = this.__dashData;
        this.__toggleBlank(2);
        var e = this.__getBoxInfo(t);
        for(key in e) t[key] = e[key];
        t.edit = this.__edit;
        t.projectId = window.currentProjectId || 0;
        var i = s._$get("jst-create-tab", t);
        this.__rbox.insertAdjacentHTML("beforeEnd", i)
    };
    f.__tabAllocate = function() {
        var t = this;
        o._$$Tab._$allocate({
            list: this.__tabItems,
            index: this.__dashData.index,
            onchange: function(e) {
                if(e.last != e.index) {
                    t.__dashData.index = e.index;
                    t.__conItems.forEach(function(t) {
                        t.style.display = "none"
                    });
                    t.__conItems[t.__dashData.index].style.display = "block";
                    t.__singleTabData = t.__dashData.tabs[t.__dashData.index];
                    t.__reportHandle()
                }
            }
        })
    };
    f.__reportHandle = function() {
        var t = this;
        this.__chartList.some(function(i) {
            if(i.parentTabId == t.__tabId && i.relatedTab == t.__singleTabData.key) {
                e._$remove(e._$get("chart-item-" + i.reportId), !1);
                var n = {
                    options: t.__options,
                    dashData: i,
                    onlink: t.__onlink
                };
                if(t.__globalObj.reportControlObj[i.reportId]) t.__globalObj.reportControlObj[i.reportId]._$recycle();
                t.__globalObj.reportControlObj[i.reportId] = d._$$SingleReport._$allocate(n);
                return !0
            }
        })
    };
    f.__setTabWidth = function() {
        var t = e._$getByClassName(this.__tabBox, "itm"),
            i = Math.floor(100 / t.length) + "%";
        t.forEach(function(t) {
            t.style.width = i
        })
    };
    f._$hasReport = function() {
        var t = this,
            e = !1;
        this.__chartList.some(function(i) {
            if(i.parentTabId == t.__tabId && i.relatedTab == t.__singleTabData.key) {
                e = !0;
                return !0
            }
        });
        return e
    };
    f.__tabNameChange = function(t) {
        var e = i._$getElement(t),
            n = e.value;
        this.__singleTabData.name = n;
        var r = e.parentNode.previousElementSibling || e.parentNode.previousSibling;
        r.innerText = n;
        r.setAttribute("title", n)
    };
    f.__doAction = function(t) {
        var r = this,
            a = i._$getElement(t, "d:action"),
            s = e._$dataset(a, "action");
        if(s) {
            this.__globalObj.dataChanged = !0;
            switch(s) {
                case "del":
                    var o = function() {
                        var t = !1;
                        n._$forIn(r.__chartList, function(e, i, n) {
                            if(e.parentTabId == r.__tabId) {
                                n.splice(i, 1);
                                if(r.__globalObj.reportControlObj[e.reportId]) r.__globalObj.reportControlObj[e.reportId]._$recycle();
                                t = !0;
                                return !0
                            }
                        });
                        if(t) o()
                    };
                    n._$forIn(this.__chartList, function(t, e, i) {
                        if(t.tabId == this.__tabId) {
                            i.splice(e, 1);
                            return !0
                        }
                    }._$bind(this));
                    o();
                    e._$remove(this.__chartItem, !1);
                    if(0 == this.__chartList.length) this.__toggleBlank(1);
                    this.__disabledReport();
                    if(this.__globalObj.tabControlObj[this.__tabId]) this.__globalObj.tabControlObj[this.__tabId]._$recycle();
                    break;
                case "add":
                    var l = this.__dashData.tabs,
                        u = 1;
                    l.forEach(function(t) {
                        if(t.key > u) u = t.key
                    });
                    l.push({
                        name: "Tab" + (u + 1),
                        key: u + 1
                    });
                    this.__dashData.index = l.length - 1;
                    this.__allocateSingleTab();
                    break;
                case "tabdel":
                    if(this.__dashData.tabs.length < 2) {
                        c.message("至少保留一个tab页");
                        return
                    }
                    var d, h = e._$dataset(a, "key");
                    n._$forIn(this.__dashData.tabs, function(t, e, i) {
                        if(t.key == h) {
                            i.splice(e, 1);
                            n._$forIn(r.__chartList, function(e, i, n) {
                                if(e.parentTabId == r.__tabId && e.relatedTab == t.key) {
                                    n.splice(i, 1);
                                    if(r.__globalObj.reportControlObj[e.reportId]) r.__globalObj.reportControlObj[e.reportId]._$recycle();
                                    return !0
                                }
                            });
                            d = e;
                            return !0
                        }
                    });
                    if(this.__dashData.index > d) this.__dashData.index--;
                    else this.__dashData.index = 0;
                    this.__disabledReport();
                    this.__allocateSingleTab()
            }
        }
    };
    f.__doAction2 = function(t) {
        var n = i._$getElement(t, "d:action"),
            r = e._$dataset(n, "action");
        if(r) {
            this.__globalObj.dataChanged = !0;
            switch(r) {
                case "tab":
                    var a = n.nextElementSibling || n.nextSibling;
                    n.style.display = "none";
                    a.style.display = "block";
                    var s = e._$getByClassName(a, "j-tab-ipt")[0];
                    if(s) {
                        s.select();
                        s.focus()
                    }
            }
        }
    };
    f.__doDocument = function(t) {
        var e = i._$getElement(t, "c:j-tab-ipt");
        if(!e) {
            this.__tabItemsIptBox.forEach(function(t) {
                t.style.display = "none"
            });
            this.__tabItemsText.forEach(function(t) {
                t.style.display = "block"
            })
        }
    };
    f.__allocateSingleTab = function() {
        e._$remove(this.__chartItem);
        this.__destroy();
        this.__globalObj.tabControlObj[this.__tabId] = h._$$SingleTab._$allocate({
            options: this.__options,
            dashData: this.__dashData,
            onlink: this.__onlink
        })
    };
    return h
}, 1, 3, 6, 4, 142, 14, 15, 22, 345, 7, 163, 166);
I$(350, '<meta charset="utf-8"/>\n<!-- @TEMPLATE -->\n<textarea name="ntp" id="#<rt>"></textarea>\n\n<textarea name="jst" id="jst-report-preview">\n<div class="resPrev">${name}</div>\n</textarea>\n\n<textarea name="txt" id="txt-report-empty">\n<div class="m-blank">\n    <span class="icon icon-arrow"></span>\n    <p>请拖入报表</p>\n</div>\n</textarea>\n');
I$(170, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f) {
    h._$$DashDragger = t._$klass();
    f = h._$$DashDragger._$extend(d._$$Module);
    var p = a._$parseUITemplate(o);
    p["rt"];
    f.__reset = function(t) {
        this.__super(t);
        this.__cache = u._$$DashBoardCache._$allocate();
        var e = this.__supportTouch = "ontouchstart" in document;
        this.__doInitDomEvent([
            [document, !e ? "mouseup" : "touchend", this.__onDragEnd._$bind(this)],
            [document, !e ? "mousemove" : "touchmove", this.__onDragging._$bind(this)],
            [document, !e ? "mousedown" : "touchstart", this.__onDragStart._$bind(this)]
        ])
    };
    f.__destroy = function() {
        this.__super()
    };
    f.__onDragStart = function(t) {
        if(!this.__offset) {
            this.__getMinUnit();
            this.__startEle = i._$getElement(t, "d:drag");
            if(this.__startEle) {
                this.__kind = +e._$dataset(this.__startEle, "drag");
                this.__offset = this.__getOffset(t);
                this.__type = +e._$dataset(this.__startEle, "type");
                switch(this.__kind) {
                    case 0:
                        this.__permission = +e._$dataset(this.__startEle, "permission");
                        this.__onDragStartEnter(t);
                        break;
                    case 1:
                        this.__onDragStartMove(t);
                        break;
                    case 2:
                        this.__body = i._$getElement(t, "c:chart-item");
                        this.__sbody = this.__startEle.parentNode;
                        this.__mold = +e._$dataset(this.__startEle, "mold");
                        this.__onResizeStart(t, this.__mold);
                        break;
                    case 3:
                        this.__filterType = +e._$dataset(this.__startEle, "ftype");
                        this.__onFilterResizStart(t)
                }
            }
        }
    };
    f.__onDragStartEnter = function(t) {
        switch(this.__type) {
            case 0:
            case 1:
            case 2:
                if(0 == this.__type) {
                    var i = +e._$dataset(this.__startEle, "reportid"),
                        r = this.__chartList.some(function(t) {
                            if(t.reportId == i) return !0
                        });
                    if(r) {
                        l.message("右侧已有该报表！", "err");
                        delete this.__offset;
                        return
                    }
                }
                e._$addClassName(this.__startEle, "z-sel");
                if(!this.__dragPreview) {
                    e._$create("div", "m-drag-preview m-drag-preview-1", document.body);
                    this.__dragPreview = e._$getByClassName(document.body, "m-drag-preview")[0]
                }
                this.__startName = e._$dataset(this.__startEle, "name");
                s._$render(this.__dragPreview, "jst-report-preview", {
                    name: this.__startName
                });
                this.__dragPreview.style.left = this.__offset.x - this.__startEle.offsetWidth / 2 + "px";
                this.__dragPreview.style.top = this.__offset.y - this.__startEle.offsetHeight / 2 + "px";
                this.__canPut = !0;
                this.__dataItem = {};
                if(0 == this.__type) {
                    var i = +e._$dataset(this.__startEle, "reportid");
                    this.__promise = this.__cache._$getReport(i);
                    this.__resetDataItem(this.__dataItem, 1)
                } else if(1 == this.__type) {
                    var a = 1;
                    n._$forEach(this.__chartList, function(t, e) {
                        if(t.textId)
                            if(t.textId >= a) a = t.textId + 1
                    }._$bind(this));
                    this.__dataItem.textId = a
                } else if(2 == this.__type) {
                    var o = 1;
                    n._$forEach(this.__chartList, function(t, e) {
                        if(t.tabId)
                            if(t.tabId >= o) o = t.tabId + 1
                    }._$bind(this));
                    this.__dataItem.tabId = o;
                    this.__dataItem.tabs = c.DEFAULT_TABS.slice(0)
                }
        }
    };
    f.__removeDataFromChartList = function() {
        if(0 == this.__type) {
            var t = +e._$dataset(this.__startEle, "reportid");
            n._$forIn(this.__chartList, function(e, i, n) {
                if(e.reportId == t) {
                    this.__dataItem = e;
                    n.splice(i, 1);
                    return !0
                }
            }._$bind(this));
            this.__dataItem.stopped = !1
        } else if(1 == this.__type) {
            var i = +e._$dataset(this.__startEle, "textid");
            n._$forIn(this.__chartList, function(t, e, n) {
                if(t.textId == i) {
                    this.__dataItem = t;
                    n.splice(e, 1);
                    return !0
                }
            }._$bind(this))
        } else if(2 == this.__type) {
            var r = +e._$dataset(this.__startEle, "tabid");
            n._$forIn(this.__chartList, function(t, e, i) {
                if(t.tabId == r) {
                    this.__dataItem = t;
                    i.splice(e, 1);
                    return !0
                }
            }._$bind(this))
        }
    };
    f.__onDragStartMove = function(t) {
        switch(this.__type) {
            case 0:
            case 1:
            case 2:
                this.__startChartItem = i._$getElement(t, "c:chart-item");
                e._$addClassName(this.__startChartItem, "z-sel");
                this.__dataItem = {};
                this.__removeDataFromChartList()
        }
    };
    f.__onResizeStart = function() {
        var t = {
            1: "n-resize",
            2: "e-resize",
            3: "s-resize",
            4: "w-resize",
            5: "nw-resize",
            6: "ne-resize",
            7: "se-resize",
            8: "sw-resize"
        };
        return function(e, i) {
            switch(this.__type) {
                case 0:
                case 1:
                case 2:
                    this.__flag = i;
                    if(!this.__flag || !t[this.__flag]) {
                        delete this.__flag;
                        return
                    }
                    this.__offset = this.__getOffset(e);
                    this.__doRefreshBox();
                    document.body.style.cursor = t[this.__flag];
                    this.__dataItem = {};
                    this.__removeDataFromChartList();
                    if("auto" == this.__dataItem.showMode) {
                        l.message("自动高度的图表禁止调整高宽");
                        this.__chartList.push(this.__dataItem);
                        document.body.style.cursor = "default";
                        delete this.__offset;
                        return
                    }
                    this.__findMaxResizeY()
            }
        }
    }();
    f.__onFilterResizStart = function() {
        var t = {
            1: "n-resize",
            2: "e-resize",
            3: "s-resize",
            4: "w-resize",
            5: "nw-resize",
            6: "ne-resize",
            7: "se-resize",
            8: "sw-resize"
        };
        return function(n) {
            i._$stop(n);
            if(0 == this.__filterType) {
                this.__flag = 2;
                this.__chartItem = i._$getElement(n, "c:chart-item");
                this.__drawBox = e._$getByClassName(this.__chartItem, "draw-box")[0];
                this.__filterBox = e._$getByClassName(this.__chartItem, "filter-box")[0];
                this.__reportId = e._$dataset(this.__startEle, "reportid");
                this.__dashData = this.__getDashData(this.__reportId)
            } else if(1 == this.__filterType) {
                this.__flag = 3;
                this.__filterItem = i._$getElement(n, "c:filter-item");
                this.__pid = e._$dataset(this.__filterItem, "pid");
                this.__reportId = e._$dataset(this.__filterItem, "reportid");
                this.__globalFilterItemInner = e._$get("global-filter-item-inner-" + this.__pid + "-" + this.__reportId);
                this.__globalFilterData = this.__getGlobalFilterData(this.__pid, this.__reportId)
            }
            if(this.__flag && t[this.__flag]) {
                this.__offset = this.__getOffset(n);
                document.body.style.cursor = t[this.__flag]
            } else delete this.__flag
        }
    }();
    f.__onDragging = function(t) {
        if(this.__offset) {
            i._$stop(t);
            switch(this.__kind) {
                case 0:
                    this.__onDraggingEnter(t);
                    break;
                case 1:
                    this.__onDraggingMove(t);
                    break;
                case 2:
                    this.__onResizing(t);
                    break;
                case 3:
                    this.__onFilterResizing(t)
            }
        }
    };
    f.__createContainerBox = function() {
        if(!this.__containerBox) {
            e._$create("div", "contain-box", this.__rbox);
            this.__containerBox = e._$getByClassName(this.__rbox, "contain-box")[0]
        }
    };
    f.__createInsertLine = function() {
        if(!this.__insertLine) {
            e._$create("div", "insert-line", this.__rbox);
            this.__insertLine = e._$getByClassName(this.__rbox, "insert-line")[0]
        }
    };
    f.__onDraggingEnter = function(t) {
        var i = this.__getOffset(t);
        switch(this.__type) {
            case 0:
            case 1:
            case 2:
                if(e._$hasClassName(this.__startEle, "z-sel")) {
                    e._$delClassName(this.__startEle, "z-sel");
                    e._$addClassName(this.__startEle, "z-off")
                }
                e._$setStyle(this.__dragPreview, "display", "block");
                var n = i.x - this.__offset.x,
                    r = i.y - this.__offset.y,
                    a = parseInt(e._$getStyle(this.__dragPreview, "top")) || 0,
                    s = parseInt(e._$getStyle(this.__dragPreview, "left")) || 0,
                    o = {
                        top: a + r,
                        left: s + n
                    };
                this.__offset = i;
                this.__setPosition(o, this.__dragPreview);
                this.__setScroll(t);
                this.__dataDragging(t, i)
        }
    };
    f.__onDraggingMove = function(t) {
        var i = this.__getOffset(t);
        switch(this.__type) {
            case 0:
            case 1:
            case 2:
                if(e._$hasClassName(this.__startChartItem, "z-sel")) {
                    e._$delClassName(this.__startChartItem, "z-sel");
                    e._$addClassName(this.__startChartItem, "z-off")
                }
                var n = i.x - this.__offset.x,
                    r = i.y - this.__offset.y,
                    a = parseInt(e._$getStyle(this.__startChartItem, "top")) || 0,
                    s = parseInt(e._$getStyle(this.__startChartItem, "left")) || 0,
                    o = {
                        top: a + r,
                        left: s + n
                    };
                if(o.top < 0) o.top = 0;
                if(o.left < 0) o.left = 0;
                this.__offset = i;
                this.__setPosition(o, this.__startChartItem);
                this.__setScroll(t);
                var i = e._$offset(this.__startChartItem);
                this.__dataDragging(t, i);
                e._$setStyle(this.__startChartItem, "pointer-events", "none")
        }
    };
    f.__dataDragging = function(t, n) {
        e._$delClassName(this.__cloneEle, "js-selected");
        this.__point = this.__mouse2coor(n);
        if(this.__point.x < 1 || this.__point.y < 1) this.__onDraggingRecycle();
        else {
            this.__createContainerBox();
            if(1 == this.__isInSpace(this.__point)) {
                e._$setStyle(this.__insertLine, "display", "none");
                this.__canPut = !0;
                var r = this.__findEndPoint();
                if(0 == r) this.__insertingHandle(n);
                else {
                    var a = this.__getBoxInfo(this.__point);
                    e._$style(this.__containerBox, {
                        top: a.top + "px",
                        left: a.left + "px",
                        width: a.width + "px",
                        height: a.height + "px"
                    });
                    e._$setStyle(this.__containerBox, "display", "block")
                }
            } else {
                this.__dropEle = i._$getElement(t, "d:drop");
                if(this.__dropEle && 0 == this.__type) {
                    e._$setStyle(this.__containerBox, "display", "none");
                    e._$setStyle(this.__insertLine, "display", "none");
                    var s = this.__globalObj.tabControlObj[+e._$dataset(this.__dropEle, "tabid")]._$hasReport();
                    if(s) return;
                    this.__cloneEle = this.__dropEle;
                    e._$addClassName(this.__dropEle, "js-selected")
                } else this.__insertingHandle(n)
            }
        }
    };
    f.__onDraggingRecycle = function() {
        if(this.__containerBox) e._$setStyle(this.__containerBox, "display", "none");
        if(this.__insertLine) e._$setStyle(this.__insertLine, "display", "none");
        if(this.__point) delete this.__point;
        this.__canPut = !0
    };
    f.__onResizing = function(t) {
        if(this.__flag) {
            this.__setScroll(t);
            var i = this.__getOffset(t),
                n = {
                    x: i.x - this.__offset.x,
                    y: i.y - this.__offset.y
                },
                t = {
                    top: parseInt(e._$getStyle(this.__body, "top")) || 0,
                    left: parseInt(e._$getStyle(this.__body, "left")) || 0,
                    width: parseInt(e._$getStyle(this.__sbody, "width")) || 0,
                    height: parseInt(e._$getStyle(this.__sbody, "height")) || 0
                };
            this.__offset = i;
            this.__doUpdateSize(t, n);
            this.__point = this.__mouse2coor(i);
            this.__endPoint = {};
            switch(this.__mold) {
                case 1:
                    this.__endPoint = {
                        x: this.__dataItem.x,
                        y: this.__point.y,
                        ex: this.__dataItem.ex,
                        ey: this.__dataItem.ey
                    };
                    break;
                case 2:
                    this.__endPoint = {
                        x: this.__dataItem.x,
                        y: this.__dataItem.y,
                        ex: this.__point.x,
                        ey: this.__dataItem.ey
                    };
                    break;
                case 3:
                    this.__endPoint = {
                        x: this.__dataItem.x,
                        y: this.__dataItem.y,
                        ex: this.__dataItem.ex,
                        ey: this.__point.y
                    };
                    break;
                case 4:
                    this.__endPoint = {
                        x: this.__point.x,
                        y: this.__dataItem.y,
                        ex: this.__dataItem.ex,
                        ey: this.__dataItem.ey
                    };
                    break;
                case 5:
                    this.__endPoint = {
                        x: this.__point.x,
                        y: this.__point.y,
                        ex: this.__dataItem.ex,
                        ey: this.__dataItem.ey
                    };
                    break;
                case 6:
                    this.__endPoint = {
                        x: this.__dataItem.x,
                        y: this.__point.y,
                        ex: this.__point.x,
                        ey: this.__dataItem.ey
                    };
                    break;
                case 7:
                    this.__endPoint = {
                        x: this.__dataItem.x,
                        y: this.__dataItem.y,
                        ex: this.__point.x,
                        ey: this.__point.y
                    };
                    break;
                case 8:
                    this.__endPoint = {
                        x: this.__point.x,
                        y: this.__dataItem.y,
                        ex: this.__dataItem.ex,
                        ey: this.__point.y
                    }
            }
            if(this.__endPoint.ex > c.RASTER_COUNT) this.__endPoint.ex = c.RASTER_COUNT;
            if(this.__endPoint.x < 1) this.__endPoint.x = 1;
            if(this.__endPoint.y < 1) this.__endPoint.y = 1;
            if(this.__endPoint.ex - this.__endPoint.x < c.RASTER_COUNT / 6 - 1)
                if(2 == this.__mold || 6 == this.__mold || 7 == this.__mold) this.__endPoint.ex = this.__endPoint.x + c.RASTER_COUNT / 6 - 1;
                else if(4 == this.__mold || 5 == this.__mold || 8 == this.__mold) this.__endPoint.x = this.__endPoint.ex - c.RASTER_COUNT / 6 + 1;
            if(this.__endPoint.ey - this.__endPoint.y < c.RASTER_COUNT / 12 - 1)
                if(3 == this.__mold || 7 == this.__mold || 8 == this.__mold) this.__endPoint.ey = this.__endPoint.y + c.RASTER_COUNT / 12 - 1;
                else if(1 == this.__mold || 5 == this.__mold || 6 == this.__mold) this.__endPoint.y = this.__endPoint.ey - c.RASTER_COUNT / 12 + 1;
            if(3 == this.__mold) {
                this.__createContainerBox();
                this.__lastPoint = NEJ.X({}, this.__endPoint);
                var r = this.__getBoxInfo(this.__lastPoint);
                e._$style(this.__containerBox, {
                    top: r.top + "px",
                    left: r.left + "px",
                    width: r.width + "px",
                    height: r.height + "px"
                });
                e._$setStyle(this.__containerBox, "display", "block")
            } else if(0 == this.__isIntersect(this.__endPoint)) {
                this.__createContainerBox();
                this.__lastPoint = NEJ.X({}, this.__endPoint);
                var r = this.__getBoxInfo(this.__lastPoint);
                e._$style(this.__containerBox, {
                    top: r.top + "px",
                    left: r.left + "px",
                    width: r.width + "px",
                    height: r.height + "px"
                });
                e._$setStyle(this.__containerBox, "display", "block")
            } else {
                var r = this.__getBoxInfo(this.__lastPoint);
                e._$style(this.__containerBox, {
                    top: r.top + "px",
                    left: r.left + "px",
                    width: r.width + "px",
                    height: r.height + "px"
                });
                e._$setStyle(this.__containerBox, "display", "block")
            }
        }
    };
    f.__onFilterResizing = function(t) {
        if(this.__flag) {
            var i = this.__getOffset(t),
                n = {
                    x: i.x - this.__offset.x,
                    y: i.y - this.__offset.y
                };
            this.__offset = i;
            if(0 == this.__filterType) {
                var r = !0,
                    a = this.__drawBox.offsetWidth + n.x;
                if(a < 100) r = !1;
                else r = !0;
                if(1 == r) {
                    var s = this.__filterBox.offsetWidth - n.x;
                    if(s < 190) r = !1;
                    else r = !0
                }
                if(1 == r) {
                    e._$setStyle(this.__drawBox, "width", a + "px");
                    e._$setStyle(this.__filterBox, "width", s + "px")
                }
            } else if(1 == this.__filterType) {
                var o = this.__globalFilterItemInner.offsetHeight + n.y;
                if(o > 50) {
                    e._$setStyle(this.__globalFilterItemInner, "height", o + "px");
                    e._$dataset(this.__globalFilterItemInner, "height", o)
                }
            }
        }
    };
    f.__onDragEnd = function(t) {
        if(this.__offset) {
            this.__globalObj.dataChanged = !0;
            switch(this.__kind) {
                case 0:
                    this.__onDragEndEnter(t);
                    break;
                case 1:
                    this.__onDragEndMove(t);
                    break;
                case 2:
                    this.__onResizEnd(t);
                    break;
                case 3:
                    this.__onFilterResizEnd(t)
            }
            this.__clearScroll();
            delete this.__offset;
            delete this.__startEle;
            delete this.__kind;
            delete this.__type;
            delete this.__startName;
            delete this.__canPut;
            delete this.__point;
            delete this.__insertY;
            delete this.__startChartItem;
            delete this.__body;
            delete this.__sbody;
            delete this.__mold;
            delete this.__flag;
            delete this.__endPoint;
            delete this.__lastPoint;
            delete this.__filterType;
            delete this.__chartItem;
            delete this.__drawBox;
            delete this.__filterBox;
            delete this.__reportId;
            delete this.__globalFilterItemInner;
            delete this.__maxResizeY;
            delete this.__lowerArr;
            delete this.__permission;
            delete this.__dropEle;
            delete this.__dropType;
            delete this.__cloneEle;
            e._$remove(this.__dragPreview, !1);
            e._$remove(this.__containerBox, !1);
            e._$remove(this.__insertLine, !1);
            delete this.__dragPreview;
            delete this.__containerBox;
            delete this.__insertLine
        }
    };
    f.__onDragEndEnter = function(t) {
        switch(this.__type) {
            case 0:
            case 1:
            case 2:
                e._$setStyle(this.__dragPreview, "display", "none");
                e._$setStyle(this.__containerBox, "display", "none");
                e._$setStyle(this.__insertLine, "display", "none");
                e._$delClassName(this.__startEle, "z-sel");
                e._$delClassName(this.__startEle, "z-off");
                e._$delClassName(this.__cloneEle, "js-selected");
                if(!this.__point) return;
                this.__insertedDomHandle();
                this.__insertedHandle("enter")
        }
    };
    f.__onDragEndMove = function(t) {
        e._$setStyle(this.__dragPreview, "display", "none");
        e._$setStyle(this.__containerBox, "display", "none");
        e._$setStyle(this.__insertLine, "display", "none");
        e._$delClassName(this.__startChartItem, "z-sel");
        e._$delClassName(this.__startChartItem, "z-off");
        e._$delClassName(this.__cloneEle, "js-selected");
        e._$remove(this.__startChartItem, !1);
        this.__insertedDomHandle();
        this.__insertedHandle("move")
    };
    f.__onResizEnd = function(t) {
        e._$setStyle(this.__containerBox, "display", "none");
        document.body.style.cursor = "";
        if(this.__flag)
            if(!this.__lastPoint) this.__chartList.push(this.__dataItem);
            else {
                e._$remove(this.__body, !1);
                this.__dataItem = NEJ.X(this.__dataItem, this.__lastPoint);
                this.__chartList.push(this.__dataItem);
                this.__setRboxHth();
                this.__allocateControl();
                if(3 == this.__mold) {
                    var i = this.__lastPoint.ey;
                    if(i <= this.__maxResizeY) return;
                    var r = i - this.__maxResizeY;
                    n._$forEach(this.__lowerArr, function(t, i, n) {
                        t.y = t.y + r;
                        t.ey = t.ey + r;
                        _chartItem = this.__getChartItem(t);
                        if(_chartItem) {
                            var a = (t.y - 1) * this.__cell + (t.y - 1) * this.__space + "px";
                            e._$setStyle(_chartItem, "top", a)
                        }
                    }._$bind(this));
                    this.__setRboxHth()
                }
            }
    };
    f.__onFilterResizEnd = function(t) {
        document.body.style.cursor = "";
        if(this.__flag)
            if(0 == this.__filterType) {
                this.__dashData.filterWidth = this.__filterBox.offsetWidth;
                this.__globalObj.reportControlObj[this.__reportId]._$nevRender(this.__dashData)
            } else if(1 == this.__filterType) {
                this.__globalFilterData.filterHeight = this.__globalFilterItemInner.offsetHeight;
                var i = e._$get("global-filter-item-" + this.__globalFilterData.pid + "-" + this.__globalFilterData.reportId);
                if(i) e._$remove(i, !1);
                this.__body = e._$getByClassName(this.__gbox, "m-global-filter")[0];
                this.__filterPosition = this.__globalFilter.filterPosition;
                this.__category = "global";
                if("right" == this.__filterPosition) this.__sbody = e._$getByClassName(this.__gbox, "filter-box")[0];
                else if("top" == this.__filterPosition) this.__sbody = e._$getByClassName(this.__gbox, "filter-box-top")[0];
                this.__newsFilter(this.__globalFilterData)
            }
    };
    f.__getOffset = function(t) {
        if(!this.__supportTouch) return {
            x: i._$clientX(t),
            y: i._$clientY(t)
        };
        else return {
            x: t.touches[0].pageX,
            y: t.touches[0].pageY
        }
    };
    f.__setPosition = function(t, e) {
        var i = e.style;
        i.top = t.top + "px";
        i.left = t.left + "px"
    };
    f.__insertingHandle = function(t) {
        var i = this;
        this.__point = this.__mouse2coor(t);
        if(this.__point.x < 1 || this.__point.y < 0) this.__onDraggingRecycle();
        else {
            var r = function(t) {
                    var e = !1;
                    n._$forIn(i.__chartList, function(i, n) {
                        if(t >= i.y && t < i.ey) {
                            e = !0;
                            return !0
                        }
                    });
                    return e
                },
                a = function() {
                    if(1 == r(i.__insertY)) {
                        i.__insertY++;
                        a()
                    }
                };
            this.__insertY = this.__point.y - 1;
            if(this.__insertY < 0) this.__insertY = 0;
            a();
            this.__point.x = 1;
            this.__point.ex = c.RASTER_COUNT;
            this.__point.y = this.__insertY + 1;
            if(0 == this.__type) this.__point.ey = this.__insertY + c.RASTER_COUNT / 3;
            else if(1 == this.__type) this.__point.ey = this.__insertY + c.RASTER_COUNT / 12;
            else if(2 == this.__type) this.__point.ey = this.__insertY + c.RASTER_COUNT / 3;
            this.__createInsertLine();
            var s = this.__getBoxInfo(this.__point);
            e._$style(this.__insertLine, {
                top: s.top - this.__space / 2 + "px"
            });
            e._$setStyle(this.__insertLine, "display", "block");
            this.__createContainerBox();
            if(0 == this.__isIntersect(this.__point)) {
                this.__canPut = !0;
                e._$style(this.__containerBox, {
                    top: s.top + "px",
                    left: s.left + "px",
                    width: s.width + "px",
                    height: s.height + "px"
                });
                e._$setStyle(this.__containerBox, "display", "block")
            } else {
                this.__canPut = !1;
                if(this.__containerBox) e._$setStyle(this.__containerBox, "display", "none")
            }
        }
    };
    f.__insertedDomHandle = function() {
        if(0 == this.__type) var t = c.RASTER_COUNT / 3;
        else if(1 == this.__type) var t = c.RASTER_COUNT / 12;
        else if(2 == this.__type) var t = c.RASTER_COUNT / 3;
        if(0 == this.__canPut) n._$forEach(this.__chartList, function(i, n) {
            var r;
            if(i.y >= this.__point.y) {
                var r = this.__getChartItem(i);
                i.y = i.y + t;
                i.ey = i.ey + t;
                if(r) {
                    var a = (i.y - 1) * this.__cell + (i.y - 1) * this.__space + "px";
                    e._$setStyle(r, "top", a)
                }
            }
        }._$bind(this))
    };
    f.__insertedHandle = function(t) {
        var i = this,
            n = function() {
                var t = i.__permission;
                i.__promise.then(function(e) {
                    if(200 == e.code) {
                        i.__dataItem.report = e.result;
                        i.__dataItem.report.permission = t;
                        i.__dataItem.reportId = e.result.id;
                        i.__setRboxHth();
                        i.__disabledReport();
                        i.__allocateControl()
                    } else l.message(e.message || "操作失败")
                })
            };
        if("enter" == t) {
            this.__dataItem = NEJ.X(this.__dataItem, this.__point);
            if(0 == this.__type)
                if(this.__dropEle) {
                    var r = +e._$dataset(this.__dropEle, "tabid"),
                        a = +e._$dataset(this.__dropEle, "key"),
                        s = this.__globalObj.tabControlObj[r]._$hasReport();
                    if(!s) {
                        this.__dataItem.parentTabId = r;
                        this.__dataItem.relatedTab = a;
                        delete this.__dataItem.x;
                        delete this.__dataItem.y;
                        delete this.__dataItem.ex;
                        delete this.__dataItem.ey;
                        this.__chartList.push(this.__dataItem);
                        n()
                    }
                } else {
                    this.__chartList.push(this.__dataItem);
                    n()
                }
            else {
                this.__chartList.push(this.__dataItem);
                this.__setRboxHth();
                this.__allocateControl()
            }
        } else {
            if(0 == this.__type)
                if(this.__dropEle) {
                    var r = +e._$dataset(this.__dropEle, "tabid"),
                        a = e._$dataset(this.__dropEle, "key"),
                        s = this.__globalObj.tabControlObj[r]._$hasReport();
                    if(!s) {
                        this.__dataItem.parentTabId = r;
                        this.__dataItem.relatedTab = a;
                        delete this.__dataItem.x;
                        delete this.__dataItem.y;
                        delete this.__dataItem.ex;
                        delete this.__dataItem.ey;
                        this.__chartList.push(this.__dataItem)
                    } else this.__chartList.push(this.__dataItem)
                } else if(!this.__point && this.__dataItem) this.__chartList.push(this.__dataItem);
                else {
                    this.__dataItem = NEJ.X(this.__dataItem, this.__point);
                    this.__chartList.push(this.__dataItem);
                    this.__setRboxHth()
                } else if(!this.__point && this.__dataItem) this.__chartList.push(this.__dataItem);
            else {
                this.__dataItem = NEJ.X(this.__dataItem, this.__point);
                this.__chartList.push(this.__dataItem);
                this.__setRboxHth()
            }
            this.__allocateControl()
        }
        var o = e._$get("removeBlankLine");
        if(o) o.click()
    };
    f.__setScroll = function(t) {
        var e = this,
            i = function(t) {
                if(!e.__scrollTimer)
                    if("up" == t) e.__scrollTimer = setInterval(function() {
                        document.body.scrollTop -= 5
                    });
                    else if("down" == t) e.__scrollTimer = setInterval(function() {
                        document.body.scrollTop += 5
                    })
            };
        if(t.clientY < 100) i("up");
        else if(t.clientY > window.innerHeight) i("down");
        else this.__clearScroll()
    };
    f.__clearScroll = function() {
        if(this.__scrollTimer) {
            clearInterval(this.__scrollTimer);
            delete this.__scrollTimer
        }
    };
    f.__isInSpace = function(t) {
        var e = t.x,
            i = t.y,
            r = !0;
        n._$forIn(this.__chartList, function(t, n) {
            if(t.x <= e && t.ex >= e && t.y <= i && t.ey >= i) {
                r = !1;
                return !0
            }
        }._$bind(this));
        return r
    };
    f.__findEndPoint = function() {
        var t = this,
            e = this.__point.x,
            i = this.__point.y,
            n = c.RASTER_COUNT + 1,
            r = 1e4;
        this.__chartList.forEach(function(t) {
            if(t.x > e && t.y <= i && t.ey >= i)
                if(t.x < n) n = t.x
        });
        n -= 1;
        if(this.__dataItem.x) var a = this.__dataItem.ex - this.__dataItem.x + 1;
        else var a = c.RASTER_COUNT;
        if(n - e + 1 >= a) this.__point.ex = e + a - 1;
        else this.__point.ex = n;
        this.__chartList.forEach(function(n) {
            if(n.y > i)
                if(e > n.ex || t.__point.ex < n.x);
                else if(n.y < r) r = n.y
        });
        r -= 1;
        if(this.__dataItem.y) var s = this.__dataItem.ey - this.__dataItem.y + 1;
        else if(0 == this.__type) var s = c.RASTER_COUNT / 3;
        else if(1 == this.__type) var s = c.RASTER_COUNT / 12;
        else if(2 == this.__type) var s = c.RASTER_COUNT / 3;
        if(r - i + 1 >= s) this.__point.ey = i + s - 1;
        else this.__point.ey = r;
        if(this.__point.ex - this.__point.x + 1 < c.RASTER_COUNT / 6 || this.__point.ey - this.__point.y + 1 < c.RASTER_COUNT / 12) return !1;
        else return !0
    };
    f.__doRefreshBox = function() {
        this.__box = {
            w: Math.max(this.__rbox.clientWidth, this.__rbox.scrollWidth),
            h: Math.max(this.__rbox.clientHeight, this.__rbox.scrollHeight)
        };
        this.__delta = {
            x: this.__body.offsetWidth - this.__sbody.clientWidth,
            y: this.__body.offsetHeight - this.__sbody.clientHeight
        }
    };
    f.__doUpdateSize = function() {
        var t = function(t, i, r) {
            n._$forEach(r, function(n) {
                var r = i[n];
                if(null != r) e._$setStyle(t, n, r + "px")
            })
        };
        return function(e, i) {
            e = !this.__ratio ? this.__doCalBoxWithoutLock(e, i) : this.__doCalBoxWithLock(this.__flag, e, i);
            if(!e.stopped) {
                t(this.__body, e, ["top", "left"]);
                t(this.__sbody, e, ["width", "height"])
            }
        }
    }();
    f.__doCalBoxWithoutLock = function(t, e) {
        var i;
        if(1 == this.__flag || 5 == this.__flag || 6 == this.__flag) {
            i = t.top + t.height - this.__miny;
            t.top = Math.min(i, Math.max(0, t.top + e.y));
            t.height = i + this.__miny - t.top
        }
        if(2 == this.__flag || 6 == this.__flag || 7 == this.__flag) t.width = Math.max(this.__minx, Math.min(t.width + e.x, this.__box.w - t.left - this.__delta.x));
        if(3 == this.__flag || 7 == this.__flag || 8 == this.__flag) t.height = Math.max(this.__miny, Math.min(t.height + e.y, this.__box.h - t.top - this.__delta.y));
        if(4 == this.__flag || 5 == this.__flag || 8 == this.__flag) {
            i = t.left + t.width - this.__minx;
            t.left = Math.min(i, Math.max(0, t.left + e.x));
            t.width = i + this.__minx - t.left
        }
        return t
    };
    f.__findMaxResizeY = function() {
        this.__maxResizeY = 1e3;
        this.__lowerArr = [];
        var t = this.__dataItem.x,
            e = this.__dataItem.ex,
            i = (this.__dataItem.y, this.__dataItem.ey);
        n._$forEach(this.__chartList, function(n, r) {
            if(n.y > i && n.x <= e && n.ex >= t) {
                if(n.y < this.__maxResizeY) this.__maxResizeY = n.y;
                this.__lowerArr.push(n)
            }
        }._$bind(this));
        this.__maxResizeY--
    };
    f.__allocateControl = function() {
        this._$dispatchEvent("ondrag", this.__dataItem)
    };
    return h
}, 1, 3, 6, 4, 142, 14, 15, 350, 7, 164, 53, 163);
I$(29, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f, p, _, m, g, v, y, b, x, $, w, k) {
    var S = a._$parseUITemplate(o),
        C = S["seedHtml"];
    S["seedJst"];
    b._$$Base = t._$klass();
    k = b._$$Base._$extend(u._$$Module);
    k.__reset = function(t) {
        var i = y.extend({
            data: {
                attach: "<div></div>"
            },
            init: function() {
                this.supr()
            },
            show: function() {
                var t = this.data;
                this.supr();
                return new Promise(function(e, i) {
                    t.resolve = e;
                    t.reject = i
                })
            }
        });
        this.__loading = new i({
            data: {
                show: !1
            }
        });
        this.cbBase = t.options.cb || function() {};
        if(t.options.dashBoardId == this.__dashBoardId && t.options.edit) this.__equal = !0;
        else {
            this.__equal = !1;
            var r = this._$getReportNevRender();
            for(key in r) delete r[key]
        }
        t.options.gbox = this.__list[0];
        t.options.rbox = this.__list[1];
        e._$setStyle(document.body, "overflow-y", "scroll");
        this.__super(t);
        this.__globalObj.dataChanged = !1;
        this.__globalObj.autoSave = !1;
        this.__options = t.options;
        this.__doSubmit = this.__options.doSubmit || $;
        this.__onlink = t.onlink || $;
        this.__reportListPromise = this.__options.reportListPromise;
        this.__dashBoardUrl = this.__options.dashBoardUrl;
        this.__widget = this.__options.widget;
        this.__cache = c._$$DashBoardCache._$allocate({
            ongetdashboard: this.__cbGetDashBoard._$bind(this)
        });
        if(this.__dashBoardId)
            if(this.__equal) this.__cbGetDashBoard(this.__dashboardResult);
            else {
                if(!this.__wap) this.__loading.show();
                this.__cache._$getDashBoard(this.__dashBoardId)
            }
        else if(this.__dashBoardUrl) {
            var a = window.location.search.substring(1),
                s = n._$query2object(a);
            s.id = this.__dashBoardUrl.pathname.match(/dashboard\/(.{32})/) && this.__dashBoardUrl.pathname.match(/dashboard\/(.{32})/)[1];
            localStorage.skipCache = "true" == s.skipCache;
            window.skipCache = "true" == s.skipCache;
            this.__bg = "true" == s.bg;
            if(this.__widget) {
                delete s.id;
                this.__cache._$getDashBoardByWidget(s)
            } else this.__cache._$getDashBoardByUrl(s)
        } else {
            this.__chartList = [];
            this.__globalFilter = {
                open: !0,
                filterPosition: "top",
                list: []
            };
            this.__options.chartList = this.__chartList;
            this.__options.globalFilter = this.__globalFilter;
            this.__dragControl();
            this.__globalControl()
        }
        this.__doInitDomEvent([
            [document, "click", this.__doDocument._$bind(this)],
            [window, "resize", this.__onResize._$bind(this, 1)],
            ["j-side-controller-btn", "click", this.__onResize._$bind(this, 2)],
            ["refresh", "click", this.__doRefresh._$bind(this)],
            ["auto-save", "click", this.__doAutoSave._$bind(this)],
            ["removeBlankLine", "click", this.__removeBlankLine._$bind(this)],
            ["dashboard-title", "input", this.__updateTitle._$bind(this)],
            ["flushTime", "click", this.flushTime._$bind(this)]
        ]);
        var o = this;
        if(this.__edit) window.onbeforeunload = function() {
            if(1 == o.__globalObj.dataChanged) return "是否不保存就退出"
        };
        this.__keyBind();
        document.body.scrollTop = 0
    };
    k.__destroy = function() {
        var t = this._$getReportNevRender();
        for(key in t) t[key].clearTimer();
        this.__rbox.innerHTML = "";
        this.__gbox.innerHTML = "";
        this.__toggleBlank(2);
        delete this.__reportIdArr;
        for(key in this.__globalObj.reportControlObj) this.__globalObj.reportControlObj[key]._$recycle();
        this.__globalObj.reportControlObj = {};
        this.__globalObj.textControlObj = {};
        if(this.__globalObj.globalFilterControl) this.__globalObj.globalFilterControl._$recycle();
        delete this.__globalObj.globalFilterControl;
        this.__globalObj.dimensionFilterObj = {};
        this.__globalObj = {};
        if(this.__LazyLoading) this.__LazyLoading._$recycle();
        if(this.__dragger) this.__dragger._$recycle();
        if(e._$hasClassName(this.__rbox, "z-gfo")) e._$delClassName(this.__rbox, "z-gfo");
        var i = e._$get("auto-save");
        if(i) {
            var n = e._$getByClassName(e._$get("auto-save"), "u-switch-report")[0];
            if(n)
                if(e._$hasClassName(n, "z-on")) e._$delClassName(n, "z-on")
        }
        this.__off();
        this.__off2();
        this.__super()
    };
    k.__initXGui = function() {
        this.__seed_html = C
    };
    k.__initNode = function() {
        this.__super();
        this.__list = e._$getByClassName(this.__body, "j-flag")
    };
    k.__cbGetDashBoard = function(t) {
        this.__loading.hide();
        if(t) {
            var i = this;
            this.__dashboardResult = t;
            if(200 == t.code) {
                this.__chartList = t.result.list || [];
                this.setFlushTime(t.result.flushTime);
                this.cbBase({
                    flushTime: t.result.flushTime
                });
                var n = e._$get("export-dashboard");
                if(n)
                    if(0 == this.__chartList.length) e._$addClassName(n, "disabled");
                    else e._$delClassName(n, "disabled");
                if(this.__bg) this.__chartList.forEach(function(t) {
                    t.bg = i.__bg
                });
                if(t.result.filter) {
                    this.__globalFilter = t.result.filter;
                    if(this.__globalFilter instanceof Array) this.__globalFilter = {
                        open: !0,
                        filterPosition: "top",
                        list: this.__globalFilter
                    }
                } else this.__globalFilter = {
                    open: !0,
                    filterPosition: "top",
                    list: []
                };
                this.__options.chartList = this.__chartList;
                this.__options.globalFilter = this.__globalFilter;
                if(this.__wap) {
                    var r = t.result.filter.list;
                    r.forEach(function(t) {
                        var e = i.__getDashData(t.reportId),
                            n = i.__mergeFilter(e),
                            r = i.__getSingleFilter(n, t.pill);
                        t.filter = r
                    });
                    this._$dispatchEvent("onconfig", t.result)
                }
                this.__chartList.forEach(function(t) {
                    if(t.reportId && t.filter) t.oldFilter = JSON.parse(JSON.stringify(t.filter))
                });
                this.__oldGlobalFilter = JSON.parse(JSON.stringify(this.__globalFilter));
                this.__options.oldGlobalFilter = this.__oldGlobalFilter;
                var a = e._$get("dashboard-title");
                if(a) a.value = t.result.name;
                var s = e._$get("dashboard-title-text");
                if(s) s.innerText = t.result.name;
                if(this.__edit) this.__reportListPromise.then(function(t) {
                    i.__disabledReport()
                });
                if(this.__wap) this.__wapDataHandle();
                if(this.__cockpit) this.__cockpitDataHandle();
                this.__dragControl();
                this.__globalControl();
                this.__setRboxHth();
                this.__pageExport()
            } else l.message(t.message || "获取仪表盘详细失败！")
        }
    };
    k.__reportControl = function() {
        if(this.__chartList) {
            if(this.__chartList.length < 1) this.__toggleBlank(1);
            else {
                this.__rbox.innerHTML = "";
                delete this.__dragger.__containerBox;
                n._$forEach(this.__chartList, function(t, e) {
                    if(t.reportId && !t.parentTabId)
                        if(this.__page) this.__resetDataItem(t, 1);
                        else this.__resetDataItem(t, 2);
                    else if(t.textId) this.__resetTextItem(t);
                    else if(t.tabId) this.__resetTabItem(t);
                    if(!t.parentTabId) this.__singleControl(t)
                }._$bind(this))
            }
            if(this.__LazyLoading) this.__LazyLoading._$recycle();
            var t = {
                attr: "reportid",
                onadd: this.__cbLazyAdd._$bind(this)
            };
            this.__LazyLoading = h._$$LazyQuery._$allocate(t);
            this.__setRboxHth()
        }
    };
    k.__singleControl = function(t) {
        var e = {
            options: this.__options,
            dashData: t
        };
        if(t.reportId) {
            if(this.__globalObj.reportControlObj[t.reportId]) this.__globalObj.reportControlObj[t.reportId]._$recycle();
            e.onlink = this.__onlink;
            this.__globalObj.reportControlObj[t.reportId] = f._$$SingleReport._$allocate(e)
        } else if(t.textId) {
            if(this.__globalObj.textControlObj[t.textId]) this.__globalObj.textControlObj[t.textId]._$recycle();
            this.__globalObj.textControlObj[t.textId] = p._$$SingleText._$allocate(e)
        } else if(t.tabId) {
            if(this.__globalObj.tabControlObj[t.tabId]) this.__globalObj.tabControlObj[t.tabId]._$recycle();
            e.onlink = this.__onlink;
            this.__globalObj.tabControlObj[t.tabId] = _._$$SingleTab._$allocate(e)
        }
    };
    k.__globalControl = function() {
        if(this.__globalObj.globalFilterControl) this.__globalObj.globalFilterControl._$recycle();
        var t = {
            options: this.__options,
            onreload: this.__reportControl._$bind(this)
        };
        this.__globalObj.globalFilterControl = m._$$GlobalFilter._$allocate(t)
    };
    k.__dragControl = function() {
        if(this.__dragger) this.__dragger._$recycle();
        var t = {
            options: this.__options,
            onlazyrefresh: this.__lazyRefresh._$bind(this),
            ondrag: this.__singleControl._$bind(this)
        };
        this.__dragger = g._$$DashDragger._$allocate(t)
    };
    k.__cbLazyAdd = function(t, e) {
        this.__reportIdArr = e;
        var i = t.reportid,
            n = this.__getDashData(i);
        this.__globalObj.reportControlObj[i]._$nevRender(n)
    };
    k.__lazyRefresh = function() {
        if(this.__LazyLoading) this.__LazyLoading._$refresh()
    };
    k.__doDocument = function(t) {
        this.__closeAllMenu();
        this.__closeDropTabs(t);
        this.__closePositionFilter(t)
    };
    var T = null;
    k.__onResize = function(t) {
        if(this.__chartList && !this.__wap)
            if(!(this.__chartList.length < 1)) {
                var e = this,
                    i = function() {
                        if(1 == t) {
                            e.__reportControl();
                            e.__setFixedWidth()
                        } else setTimeout(function() {
                            e.__reportControl();
                            e.__setFixedWidth()
                        }, 300);
                        e.__globalObj.globalFilterControl.__setGlobalFilterItemStatus()
                    };
                if(T) clearTimeout(T);
                T = setTimeout(i, 400)
            }
    };
    k.__doRefresh = function() {
        n._$forEach(this.__chartList, function(t, e) {
            if(this.__globalObj.reportControlObj[t.reportId]) t.hasChanged = !0
        }._$bind(this));
        this.__getReportPromiseAll()
    };
    k.__doAutoSave = function(t) {
        var n = this,
            r = i._$getElement(t, "c:autoSave"),
            a = e._$getByClassName(r, "u-switch-report")[0];
        if(a)
            if(e._$hasClassName(a, "z-on")) {
                e._$delClassName(a, "z-on");
                this.__globalObj.autoSave = !1
            } else {
                e._$addClassName(a, "z-on");
                this.__globalObj.autoSave = !0;
                setTimeout(function() {
                    n.__doRefresh()
                }, 300)
            }
    };
    k._$getChartList = function() {
        return this.__chartList
    };
    k._$getFlushTime = function() {
        return this.__flushTime
    };
    k._$getGlobalFilter = function() {
        return this.__globalFilter
    };
    k.__keyBind = function() {
        this.__off = v.shortcut.on(["ctrl + s", "command + s"], this.__doSubmit._$bind(this));
        this.__off2 = v.shortcut.on(["ctrl + d", "command + d"], this.__doRefresh._$bind(this))
    };
    k.__updateTitle = function(t) {
        var e = t.target.value;
        if(this.__dashboardResult) this.__dashboardResult.result.name = e
    };
    k.flushTime = function(t) {
        this.__cache._$flushTime({
            id: this.__dashBoardId,
            ua: t.ua
        }).then(function(t) {
            if(200 === t.code) {
                if(!l.phone.isMobile) l.message("缓存已更新，刷新时间 " + t.result, "ok");
                this.setFlushTime(t.result);
                this.__doRefresh()
            } else l.message(t.message)
        }.bind(this))
    }, k.setFlushTime = function(t) {
        this.__flushTime = t;
        var e = document.querySelector("#flushTime");
        if(void 0 == this.__flushTime) var i = "刷新缓存";
        else var i = "数据刷新时间 " + this.__flushTime;
        if(e) {
            e.setAttribute("title", i);
            if(this.__flushTime) e.setAttribute("data-t", this.__flushTime);
            else e.setAttribute("data-t", "null")
        }
    };
    k.__pageExport = function() {
        if(this.__page && 1 == this.__chartList.length && this.__chartList[0]) {
            var t = this.__chartList[0],
                i = t.limit || !!t.options.chart && t.options.chart.limit;
            if(i == -1 && t.report.options.chart && "normal" == t.report.options.chart.showMode) {
                var n = t.report.id,
                    r = e._$get("chart-item-" + n),
                    a = e._$get("draw-box-" + n),
                    s = e._$get("chart-box-" + n),
                    o = e._$get("filter-box-right-" + n);
                if(r && a && s) {
                    r.style.width = "auto";
                    r.style.height = "auto";
                    r.style.marginBottom = "100px";
                    a.style.width = "auto";
                    s.style.height = "auto";
                    o.style.position = "absolute";
                    o.style.right = "-" + t.filterWidth + "px"
                }
            }
        }
    };
    k.__wapDataHandle = function() {
        var t = this;
        this.__chartList = this.__chartList.filter(function(t) {
            return !!t.reportId && !t.parentTabId
        });
        this.__chartList.sort(function(t, e) {
            return t.y - e.y
        });
        var e = 200,
            i = 135,
            n = 280,
            r = 0;
        this.__chartList.forEach(function(a, s) {
            if(a.textId) var o = Math.floor(e / t.__unit) + 2;
            else if(a.reportId)
                if(v.isCard(a.report.query)) var o = Math.floor(i / t.__unit) + 2;
                else var o = Math.floor(n / t.__unit) + 2;
            a.x = 1;
            a.ex = d.RASTER_COUNT;
            a.y = r + 1;
            a.ey = r + o;
            r += o;
            if(a.filter) a.filter.forEach(function(t, e) {
                t.select = !1;
                t.show = !1;
                t.open = !1
            })
        });
        if(this.__globalFilter) this.__globalFilter.open = !1
    };
    k.__wapLazyLoading = function() {
        if(this.__LazyLoading) this.__LazyLoading._$refresh()
    };
    k.__cockpitDataHandle = function() {};
    k._$changeTextTheme = function() {
        for(var t in this.__globalObj.textControlObj) this.__globalObj.textControlObj[t]._$changeTextTheme()
    };
    k._$mergeMobileFilter = function(t) {
        var e = this;
        t.forEach(function(t) {
            e.__globalFilter.list.some(function(e) {
                if(l.pid(e.pill) == t.id) {
                    if(e.filter && e.filter.filter) {
                        var i = e.filter.filter;
                        i.select = t.select;
                        i.unselect = t.unselect;
                        if(i.date && i.date.period) {
                            i.date.period.minBound = t.minBound;
                            i.date.period.maxBound = t.maxBound
                        }
                    } else {
                        if("Dimension" == t.type) var n = {
                            $type: "DFilter",
                            filter: {
                                $type: "DiscreteDimensionFilter",
                                select: t.select,
                                unselect: t.unselect,
                                mode: "list"
                            },
                            pill: e.pill
                        };
                        else if("Date" == t.type || "DateTime" == t.type) var n = {
                            $type: "DFilter",
                            filter: {
                                $type: "DiscreteDimensionFilter",
                                date: {
                                    $type: "DateTimeFilter",
                                    mode: -1,
                                    period: {
                                        minBound: t.minBound,
                                        maxBound: t.maxBound,
                                        periodType: !1
                                    }
                                }
                            },
                            pill: e.pill
                        };
                        e.filter = n
                    }
                    return !0
                }
            })
        })
    };
    return b
}, 1, 3, 6, 4, 142, 14, 15, 162, 7, 53, 163, 164, 165, 166, 167, 168, 169, 170, 34, 33);
I$(479, function(t, e, i, n, r, a) {
    i.__focusElement = function() {
        var i = function(i, n) {
                var r = t._$getElement(n);
                if(!r.value) e._$delClassName(r, i)
            },
            n = function(i, n) {
                e._$addClassName(t._$getElement(n), i)
            };
        return function(e, r, a) {
            if(1 == r) t._$addEvent(e, "blur", i._$bind(null, a));
            if(1 == r || r == -1) t._$addEvent(e, "focus", n._$bind(null, a))
        }
    }();
    return i
}, 6, 3);
I$(325, function(t, e, i, n, r, a, s, o) {
    if("trident" === t._$KERNEL.engine && t._$KERNEL.release <= "3.0") I$(480, function() {
        e.__focusElement = function() {
            var t = function(t, e) {
                n._$delClassName(i._$getElement(e), t)
            };
            return e.__focusElement._$aop(function(e) {
                var n = e.args;
                if(1 != n[1]) {
                    i._$addEvent(n[0], "blur", t._$bind(null, n[2]));
                    n[1] = -1
                }
            })
        }()
    });
    return e
}, 148, 479, 6, 3);
I$(154, function(t, e, i, n, r, a, s, o, l) {
    a._$focus = function(t, r) {
        t = i._$get(t);
        if(t) {
            var a = 0,
                s = "js-focus";
            if(e._$isNumber(r)) a = r;
            else if(e._$isString(r)) s = r;
            else if(e._$isObject(r)) {
                a = r.mode || a;
                s = r.clazz || s
            }
            var o = parseInt(i._$dataset(t, "mode"));
            if(!isNaN(o)) a = o;
            o = i._$dataset(t, "focus");
            if(o) s = o;
            n.__focusElement(t, a, s)
        }
    };
    r._$merge(a);
    if(!0) t.copy(t.P("nej.e"), a);
    return a
}, 129, 4, 3, 325, 132);
I$(482, function(t) {
    t.__length = function() {
        var t = /(\r\n|\r|\n)/g;
        return function(e) {
            return(e || "").replace(t, "**").length
        }
    }();
    return t
}, 148);
I$(326, function(t, e) {
    if("trident" === t._$KERNEL.engine) I$(481, function() {
        e.__length = function() {
            return(_event.args[0] || "").length
        }
    });
    return e
}, 148, 482);
I$(155, function(t, e, i, n, r, a, s, o, l, c) {
    s._$counter = function() {
        var t = {},
            r = function(t) {
                return a.__length(t)
            },
            s = function(i) {
                var n = t[i],
                    r = e._$get(i),
                    a = e._$get(n.xid);
                if(r && n) {
                    var s = {
                        input: r.value
                    };
                    s.length = n.onlength(s.input);
                    s.delta = n.max - s.length;
                    n.onchange(s);
                    a.innerHTML = s.value || "剩余" + Math.max(0, s.delta) + "个字"
                }
            };
        return function(a, o) {
            var c = e._$id(a);
            if(c && !t[c]) {
                var u = n._$merge({}, o);
                u.onchange = u.onchange || l;
                u.onlength = r;
                if(!u.max) {
                    var d = parseInt(e._$attr(c, "maxlength")),
                        h = parseInt(e._$dataset(c, "maxLength"));
                    u.max = d || h || 100;
                    if(!d && h) u.onlength = n._$length
                }
                t[c] = u;
                i._$addEvent(c, "input", s._$bind(null, c));
                var f = e._$wrapInline(c, {
                    nid: u.nid || "js-counter",
                    clazz: u.clazz
                });
                u.xid = e._$id(f);
                s(c)
            }
        }
    }();
    r._$merge(s);
    if(!0) t.copy(t.P("nej.e"), s);
    return s
}, 129, 3, 6, 4, 132, 326);
I$(483, function(t, e, i, n) {
    t.__setPlaceholder = function(t, e) {};
    return t
});
I$(327, function(t, e, i, n, r, a, s, o, l) {
    if("trident" === t._$KERNEL.engine && t._$KERNEL.release <= "5.0") I$(484, function() {
        r.__setPlaceholder = function() {
            var t = {},
                r = {
                    nid: "j-holder-" + n._$uniqueID()
                },
                a = function(i) {
                    var n = e._$get(i);
                    t[i] = 2;
                    if(!n.value) e._$setStyle(e._$wrapInline(n, r), "display", "none")
                },
                s = function(i) {
                    var n = e._$get(i);
                    t[i] = 1;
                    if(!n.value) e._$setStyle(e._$wrapInline(n, r), "display", "")
                },
                o = function(i) {
                    var n = e._$get(i);
                    if(2 != t[i]) e._$setStyle(e._$wrapInline(n, r), "display", !n.value ? "" : "none")
                },
                l = function(t, i) {
                    var n = e._$id(t),
                        a = e._$wrapInline(t, {
                            tag: "label",
                            clazz: i,
                            nid: r.nid
                        });
                    a.htmlFor = n;
                    var s = e._$attr(t, "placeholder") || "";
                    a.innerText = "null" == s ? "" : s;
                    t.offsetHeight + "px";
                    e._$style(a, {
                        left: 0,
                        display: !t.value ? "" : "none"
                    })
                };
            return function(e, n) {
                if(null == t[e.id]) {
                    l(e, n);
                    var r = e.id;
                    t[r] = 1;
                    i._$addEvent(e, "blur", s._$bind(null, r));
                    i._$addEvent(e, "focus", a._$bind(null, r));
                    i._$addEvent(e, "input", o._$bind(null, r))
                }
            }
        }()
    });
    return r
}, 148, 3, 6, 4, 483);
I$(156, function(t, e, i, n, r, a, s, o) {
    r._$placeholder = function(t, i) {
        t = e._$get(t);
        n.__setPlaceholder(t, e._$dataset(t, "holder") || i || "js-placeholder")
    };
    i._$merge(r);
    if(!0) t.copy(t.P("nej.e"), r);
    return r
}, 129, 3, 132, 327);
I$(21, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f) {
    c._$$WebForm = e._$klass();
    f = c._$$WebForm._$extend(a._$$EventTarget);
    f.__init = function() {
        this.__super();
        this.__wopt = {
            tp: {
                nid: "js-nej-tp"
            },
            ok: {
                nid: "js-nej-ok"
            },
            er: {
                nid: "js-nej-er"
            }
        }
    };
    f.__reset = function(t) {
        this.__super(t);
        this.__form = document.forms[t.form] || i._$get(t.form);
        this.__doInitDomEvent([
            [this.__form, "enter", this._$dispatchEvent._$bind(this, "onenter")]
        ]);
        this.__message = t.message || {};
        this.__message.pass = this.__message.pass || "&nbsp;";
        var e = this.__dataset(this.__form, "focusMode", 1);
        if(!isNaN(e)) this.__fopt = {
            mode: e,
            clazz: t.focus
        };
        this.__holder = t.holder;
        this.__wopt.tp.clazz = "js-mhd " + (t.tip || "js-tip");
        this.__wopt.ok.clazz = "js-mhd " + (t.pass || "js-pass");
        this.__wopt.er.clazz = "js-mhd " + (t.error || "js-error");
        this.__invalid = t.invalid || "js-invalid";
        this.__doInitValidRule(t);
        this._$refresh();
        if(this.__fnode) this.__fnode.focus()
    };
    f.__destroy = function() {
        this.__super();
        this._$reset();
        delete this.__message;
        delete this.__fnode;
        delete this.__vinfo;
        delete this.__xattr;
        delete this.__form;
        delete this.__treg;
        delete this.__vfun
    };
    f.__dataset = function(t, e, n) {
        var r = i._$dataset(t, e);
        switch(n) {
            case 1:
                return parseInt(r, 10);
            case 2:
                return "true" == (r || "").toLowerCase();
            case 3:
                return this.__doParseDate(r)
        }
        return r
    };
    f.__number = function(t, e, i) {
        if("date" == e) return this.__doParseDate(t, i);
        else return parseInt(t, 10)
    };
    f.__isValidElement = function() {
        var t = /^button|submit|reset|image|hidden|file$/i;
        return function(e) {
            e = this._$get(e) || e;
            e.type;
            return !!e.name && !t.test(e.type || "")
        }
    }();
    f.__isValueElement = function() {
        var t = /^hidden$/i;
        return function(e) {
            if(this.__isValidElement(e)) return !0;
            e = this._$get(e) || e;
            var i = e.type || "";
            return t.test(i)
        }
    }();
    f.__doParseDate = function() {
        var t = /[:\.]/;
        return function(e, i) {
            if("now" == (e || "").toLowerCase()) return +new Date;
            var n = r._$var2date(e);
            if(n) {
                var a = (i || "").split(t);
                n.setHours(parseInt(a[0], 10) || 0, parseInt(a[1], 10) || 0, parseInt(a[2], 10) || 0, parseInt(a[3], 10) || 0)
            }
            return +n
        }
    }();
    f.__doCheckString = function(t, e) {
        var i = this.__vfun[e],
            n = this.__dataset(t, e);
        if(n && i) {
            this.__doPushValidRule(t, i);
            this.__doSaveValidInfo(t, e, n)
        }
    };
    f.__doCheckPattern = function(t, e) {
        try {
            var i = this.__dataset(t, e);
            if(!i) return;
            var n = new RegExp(i);
            this.__doSaveValidInfo(t, e, n);
            this.__doPushValidRule(t, this.__vfun[e])
        } catch(t) {}
    };
    f.__doCheckBoolean = function(t, e) {
        var i = this.__vfun[e];
        if(i && this.__dataset(t, e, 2)) this.__doPushValidRule(t, i)
    };
    f.__doCheckNumber = function(t, e, i) {
        i = parseInt(i, 10);
        if(!isNaN(i)) {
            this.__doSaveValidInfo(t, e, i);
            this.__doPushValidRule(t, this.__vfun[e])
        }
    };
    f.__doCheckDSNumber = function(t, e) {
        this.__doCheckNumber(t, e, this.__dataset(t, e))
    };
    f.__doCheckATNumber = function(t, e) {
        this.__doCheckNumber(t, e, i._$attr(t, e))
    };
    f.__doCheckTPNumber = function(t, e, i) {
        var n = this.__number(this.__dataset(t, e), this.__dataset(t, "type"));
        this.__doCheckNumber(t, e, n)
    };
    f.__doCheckCustomAttr = function(t) {
        r._$loop(this.__xattr, function(e, n) {
            var r = i._$dataset(t, n);
            if(null != r) {
                this.__doSaveValidInfo(t, n, r);
                this.__doPushValidRule(t, this.__vfun[n])
            }
        }, this)
    };
    f.__doPrepareElement = function() {
        var t = /^input|textarea$/i,
            e = function(t) {
                this._$showTip(n._$getElement(t))
            },
            r = function(t) {
                var e = n._$getElement(t);
                if(!this.__dataset(e, "ignore", 2)) this.__doCheckValidity(e)
            };
        return function(n) {
            if(this.__dataset(n, "autoFocus", 2)) this.__fnode = n;
            var a = i._$attr(n, "placeholder");
            if(a && "null" != a) l._$placeholder(n, this.__holder);
            if(this.__fopt && t.test(n.tagName)) s._$focus(n, this.__fopt);
            var c = i._$id(n);
            this.__doCheckBoolean(c, "required");
            this.__doCheckString(c, "type");
            this.__doCheckPattern(c, "pattern");
            this.__doCheckATNumber(c, "maxlength");
            this.__doCheckATNumber(c, "minlength");
            this.__doCheckDSNumber(c, "maxLength");
            this.__doCheckDSNumber(c, "minLength");
            this.__doCheckTPNumber(c, "min");
            this.__doCheckTPNumber(c, "max");
            this.__doCheckCustomAttr(c);
            var d = i._$dataset(c, "time");
            if(d) this.__doSaveValidInfo(c, "time", d);
            var h = n.name;
            this.__message[h + "-tip"] = this.__dataset(n, "tip");
            this.__message[h + "-error"] = this.__dataset(n, "message");
            this._$showTip(n);
            var f = this.__vinfo[c],
                p = (f || u).data || u,
                _ = this.__dataset(n, "counter", 2);
            if(_ && (p.maxlength || p.maxLength)) o._$counter(c, {
                nid: this.__wopt.tp.nid,
                clazz: "js-counter"
            });
            if(f && t.test(n.tagName)) this.__doInitDomEvent([
                [n, "focus", e._$bind(this)],
                [n, "blur", r._$bind(this)]
            ]);
            else if(this.__dataset(n, "focus", 2)) this.__doInitDomEvent([
                [n, "focus", e._$bind(this)]
            ])
        }
    }();
    f.__doInitValidRule = function() {
        var e = {
                number: /^[\d]+$/i,
                url: /^[a-z]+:\/\/(?:[\w-]+\.)+[a-z]{2,6}.*$/i,
                email: /^[\w-\.]+@(?:[\w-]+\.)+[a-z]{2,6}$/i,
                date: function(t, e) {
                    var i = this.__dataset(e, "format") || "yyyy-MM-dd";
                    return !t || !isNaN(this.__doParseDate(t)) && r._$format(this.__doParseDate(t), i) == t
                }
            },
            i = {
                required: function(t) {
                    var e = t.type,
                        i = !t.value,
                        n = ("checkbox" == e || "radio" == e) && !t.checked;
                    if(n || i) return -1
                },
                type: function(t, e) {
                    var i = this.__treg[e.type],
                        n = t.value.trim(),
                        a = !!i.test && !i.test(n),
                        s = r._$isFunction(i) && !i.call(this, n, t);
                    if(a || s) return -2
                },
                pattern: function(t, e) {
                    if(!e.pattern.test(t.value)) return -3
                },
                maxlength: function(t, e) {
                    if(t.value.length > e.maxlength) return -4
                },
                minlength: function(t, e) {
                    if(t.value.length < e.minlength) return -5
                },
                maxLength: function(t, e) {
                    if(r._$length(t.value) > e.maxLength) return -4
                },
                minLength: function(t, e) {
                    if(r._$length(t.value) < e.minLength) return -5
                },
                min: function(t, e) {
                    var i = this.__number(t.value, e.type, e.time);
                    if(isNaN(i) || i < e.min) return -6
                },
                max: function(t, e) {
                    var i = this.__number(t.value, e.type, e.time);
                    if(isNaN(i) || i > e.max) return -7
                }
            },
            n = function(t, e, i, n) {
                var a = t[i];
                if(!r._$isFunction(e) || !r._$isFunction(a)) t[i] = e;
                else t[i] = a._$aop(e)
            };
        return function(a) {
            this.__treg = t.X({}, e);
            r._$loop(a.type, n._$bind(null, this.__treg));
            this.__vfun = t.X({}, i);
            this.__xattr = a.attr;
            r._$loop(this.__xattr, n._$bind(null, this.__vfun))
        }
    }();
    f.__doPushValidRule = function(t, e) {
        if(r._$isFunction(e)) {
            var i = this.__vinfo[t];
            if(!i || !i.func) {
                i = i || {};
                i.func = [];
                this.__vinfo[t] = i
            }
            i.func.push(e)
        }
    };
    f.__doSaveValidInfo = function(t, e, i) {
        if(e) {
            var n = this.__vinfo[t];
            if(!n || !n.data) {
                n = n || {};
                n.data = {};
                this.__vinfo[t] = n
            }
            n.data[e] = i
        }
    };
    f.__doCheckValidity = function(t) {
        t = this._$get(t) || t;
        if(!t) return !0;
        var e = this.__vinfo[i._$id(t)];
        if(!e && this.__isValidElement(t)) {
            this.__doPrepareElement(t);
            e = this.__vinfo[i._$id(t)]
        }
        if(!e) return !0;
        var n;
        r._$forIn(e.func, function(i) {
            n = i.call(this, t, e.data);
            return null != n
        }, this);
        if(null == n) {
            var a = {
                target: t,
                form: this.__form
            };
            this._$dispatchEvent("oncheck", a);
            n = a.value
        }
        var a = {
            target: t,
            form: this.__form
        };
        if(null != n) {
            if(r._$isObject(n)) r._$merge(a, n);
            else a.code = n;
            this._$dispatchEvent("oninvalid", a);
            if(!a.stopped) this._$showMsgError(t, a.value || this.__message[t.name + n])
        } else {
            this._$dispatchEvent("onvalid", a);
            if(!a.stopped) this._$showMsgPass(t, a.value)
        }
        return null == n
    };
    f.__doShowMessage = function() {
        var t = {
                tp: "tip",
                ok: "pass",
                er: "error"
            },
            e = function(t, e) {
                return t == e ? "block" : "none"
            },
            n = function(t, e, n) {
                var r = a.call(this, t, e);
                if(!r && n) r = i._$wrapInline(t, this.__wopt[e]);
                return r
            },
            a = function(e, n) {
                var r = i._$get(e.name + "-" + t[n]);
                if(!r) r = i._$getByClassName(e.parentNode, this.__wopt[n].nid)[0];
                return r
            };
        return function(t, s, o) {
            t = this._$get(t) || t;
            if(t) {
                "er" == o ? i._$addClassName(t, this.__invalid) : i._$delClassName(t, this.__invalid);
                var l = n.call(this, t, o, s);
                if(l && s) l.innerHTML = s;
                r._$loop(this.__wopt, function(n, r) {
                    i._$setStyle(a.call(this, t, r), "display", e(o, r))
                }, this)
            }
        }
    }();
    f._$showTip = function(t, e) {
        this.__doShowMessage(t, e || this.__message[t.name + "-tip"], "tp")
    };
    f._$showMsgPass = function(t, e) {
        this.__doShowMessage(t, e || this.__message[t.name + "-pass"] || this.__message.pass, "ok")
    };
    f._$showMsgError = function(t, e) {
        this.__doShowMessage(t, e || this.__message[t.name + "-error"], "er")
    };
    f._$setValue = function() {
        var t = /^(?:radio|checkbox)$/i,
            e = function(t) {
                return null == t ? "" : t
            },
            i = function(t, i) {
                if(i.multiple) {
                    var n;
                    if(!r._$isArray(t)) n[t] = t;
                    else n = r._$array2object(t);
                    r._$forEach(i.options, function(t) {
                        t.selected = null != n[t.value]
                    })
                } else i.value = e(t)
            },
            n = function(n, r) {
                if(t.test(r.type || "")) r.checked = n == r.value;
                else if("SELECT" == r.tagName) i(n, r);
                else r.value = e(n)
            };
        return function(t, e) {
            var i = this._$get(t);
            if(i)
                if("SELECT" == i.tagName || !i.length) n(e, i);
                else r._$forEach(i, n._$bind(null, e));
        }
    }();
    f._$get = function(t) {
        return this.__form.elements[t]
    };
    f._$form = function() {
        return this.__form
    };
    f._$data = function() {
        var t = /^radio|checkbox$/i,
            e = /^number|date$/,
            n = function(t) {
                if("SELECT" == t.tagName && t.multiple) {
                    var e = [];
                    r._$forEach(t.options, function(t) {
                        if(t.selected) e.push(t.value)
                    });
                    return e.length > 0 ? e : ""
                }
                return t.value
            },
            a = function(a, s) {
                var o = s.name,
                    l = n(s),
                    c = a[o],
                    u = this.__dataset(s, "type"),
                    d = i._$dataset(s, "time");
                if(e.test(u))
                    if(r._$isArray(l)) r._$forEach(l, function(t, e, i) {
                        i[e] = this.__number(t, u, d)
                    }, this);
                    else l = this.__number(l, u, d);
                if(t.test(s.type) && !s.checked) {
                    l = this.__dataset(s, "value");
                    if(!l) return
                }
                if(c) {
                    if(!r._$isArray(c)) {
                        c = [c];
                        a[o] = c
                    }
                    c.push(l)
                } else a[o] = l
            };
        return function() {
            var t = {};
            r._$forEach(this.__form.elements, function(e) {
                if(this.__isValueElement(e)) a.call(this, t, e)
            }, this);
            return t
        }
    }();
    f._$reset = function() {
        var t = function(t) {
            if(this.__isValidElement(t)) this._$showTip(t)
        };
        return function() {
            this.__form.reset();
            r._$forEach(this.__form.elements, t, this)
        }
    }();
    f._$submit = function() {
        this.__form.submit()
    };
    f._$refresh = function() {
        var t = function(t) {
            if(this.__isValidElement(t)) this.__doPrepareElement(t)
        };
        return function() {
            this.__vinfo = {};
            r._$forEach(this.__form.elements, t, this)
        }
    }();
    f._$checkValidity = function(t) {
        t = this._$get(t) || t;
        if(t) return this.__doCheckValidity(t);
        var e = !0;
        r._$forEach(this.__form.elements, function(t) {
            var i = this._$checkValidity(t);
            e = e && i
        }, this);
        return e
    };
    if(!0) t.copy(t.P("nej.ut"), c);
    return c
}, 129, 1, 3, 6, 4, 19, 154, 155, 156);
I$(25, function(t, e, i, n, r, a) {
    r._$$LoginCache = t._$klass();
    a = r._$$LoginCache._$extend(n._$$Cache);
    a._$login = function(t) {
        i._$request("/api/user/login", {
            type: "json",
            method: "post",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "onlogin"),
            onerror: this._$dispatchEvent._$bind(this, "onlogin")
        })
    };
    a._$apply = function(t) {
        i._$request("api/user/signup", {
            type: "json",
            method: "post",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "onapply"),
            onerror: this._$dispatchEvent._$bind(this, "onapply")
        })
    };
    a._$password = function(t) {
        i._$request("api/user/forgotPassword", {
            type: "json",
            method: "post",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "onpassword"),
            onerror: this._$dispatchEvent._$bind(this, "onpassword")
        })
    };
    a._$reset = function(t) {
        i._$request("api/user/reset", {
            type: "json",
            method: "post",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "onreset"),
            onerror: this._$dispatchEvent._$bind(this, "onreset")
        })
    };
    return r
}, 1, 4, 137, 138);
I$(602, function(t) {
    t.__pushHistory = function(t) {};
    return t
});
I$(464, function(t, e, i, n, r, a, s) {
    if("trident" === t._$KERNEL.engine && t._$KERNEL.release <= "4.0") I$(604, function() {
        window.hst_lock = {};
        e.__pushHistory = function() {
            var t, n, r = [],
                a = "cb-" + +new Date,
                s = '<script>parent.hst_lock["' + a + '"] = !0;parent.location.hash = decodeURIComponent("#<HASH>");</script>',
                o = function() {
                    t = window.clearTimeout(t);
                    if(r.length) {
                        var e = r.shift();
                        try {
                            var i = n.contentWindow.document;
                            i.open();
                            i.write("<head><title>");
                            i.write(document.title);
                            i.write("</title>");
                            i.write(s.replace("#<HASH>", encodeURIComponent(e)));
                            i.write("</head><body></body>");
                            if(location.hostname != document.domain) i.domain = document.domain;
                            i.close();
                            hst_lock[a] = !1
                        } catch(t) {
                            console.log(t.message || t);
                            r.unshift(e)
                        }
                        t = window.setTimeout(o, 50)
                    }
                };
            return function(t) {
                if(!e[a] && (n || t)) {
                    r.push(t);
                    if(!n) n = i._$createXFrame();
                    o()
                }
            }
        }()
    });
    return e
}, 148, 602, 3);
I$(289, function(t, e, i, n, r, a, s, o, l, c) {
    var u = /^[#?]+/,
        d = /#(.*?)$/,
        h = this,
        f = function() {
            return !history.pushState || i._$IS.android || !history.auto
        },
        p = function(t, e) {
            var i = !e ? "pushState" : "replaceState";
            h.history[i](null, document.title, t)
        },
        _ = function() {
            return location.parse(h.location.href)
        };
    p = p._$aop(function(t) {
        if(f()) {
            t.stopped = !0;
            var e = t.args;
            _url = e[0].replace(u, "");
            !e[1] ? h.location.hash = _url : h.location.replace("#" + _url)
        }
    });
    _ = _._$aop(function(t) {
        if(f()) {
            t.stopped = !0;
            var e = d.test(h.location.href) ? RegExp.$1 : "";
            t.value = location.parse(e.replace(u, ""))
        }
    });
    location.redirect = function(t, e) {
        p(t, e)
    };
    location.active = function() {
        var t, n, s, o, l, c = function(t) {
                if(!o) {
                    var i = {
                        oldValue: s,
                        newValue: _()
                    };
                    if(location.ignored) location.ignored = !1;
                    else {
                        e._$dispatchEvent(location, "beforeurlchange", i);
                        if(i.stopped) {
                            if(s) {
                                o = !0;
                                p(s.href, !0)
                            }
                            return
                        }
                    }
                    n = h.location.href;
                    s = i.newValue;
                    e._$dispatchEvent(location, "urlchange", s);
                    a.__pushHistory(s.href)
                } else o = !1
            },
            u = function() {
                if(n != h.location.href) c();
                t = r.requestAnimationFrame(u)
            },
            d = function() {
                var t = i._$KERNEL;
                _ie7 = "trident" == t.engine && t.release <= "3.0";
                return f() && "onhashchange" in window && !_ie7
            };
        return function(i) {
            if(!l) {
                l = !0;
                h = i || window;
                if(d()) {
                    e._$addEvent(h, "hashchange", c);
                    c()
                } else if(!t) {
                    t = r.requestAnimationFrame(u);
                    u()
                }
            }
        }
    }();
    location.parse = function() {
        var e = /^https?:\/\/.*?\//i,
            i = /[?#]/;
        return function(n) {
            var r = {
                href: n
            };
            n = (n || "").replace(e, "/").split(i);
            var a = 1;
            if("/" == n[0] && 0 == (n[1] || "").indexOf("/")) a = 2;
            r.path = n.splice(0, a).join("?");
            r.query = t._$query2object(n.join("&"));
            return r
        }
    }();
    location.same = function(t) {
        return _().href == t
    };
    n._$$CustomEvent._$allocate({
        element: location,
        event: ["beforeurlchange", "urlchange"]
    });
    return s
}, 4, 6, 148, 149, 463, 464);
I$(291, function(t, e, i, n, r, a, s, o) {
    var l;
    r._$$Node = e._$klass();
    l = r._$$Node._$extend(n._$$EventTarget);
    l.__init = function() {
        this.__super();
        this.__children = []
    };
    l.__reset = function(t) {
        this.__super(t);
        this._$setParent(t.parent);
        this.__name = t.name || "/";
        this.__data = t.data || {}
    };
    l.__destroy = function() {
        var t = function(t, e, i) {
            i.splice(e, 1);
            t._$recycle()
        };
        return function() {
            this.__super();
            delete this.__data;
            i._$reverseEach(this.__children, t);
            this._$setParent(null)
        }
    }();
    l.__isNode = function(t) {
        return t instanceof this.constructor
    };
    l.__hasChild = function(t) {
        return i._$indexOf(this.__children, t) >= 0
    };
    l._$getName = function() {
        return this.__name
    };
    l._$getData = function() {
        return this.__data
    };
    l._$getPath = function() {
        var t = this._$getParent(),
            e = this._$getName();
        if(!t) return e;
        var i = t._$getName();
        if("/" != i && "/" != e) e = "/" + e;
        return t._$getPath() + e
    };
    l._$getParent = function() {
        return this.__parent
    };
    l._$getChildren = function() {
        return this.__children
    };
    l._$getChildByName = function(t) {
        var e = i._$indexOf(this.__children, function(e) {
            return t == e._$getName()
        });
        return this.__children[e] || null
    };
    l._$setParent = function(t) {
        t = this.__isNode(t) ? t : null;
        if(t != this.__parent) {
            t ? t._$appendChild(this) : this.__parent._$removeChild(this);
            this.__parent = t
        }
    };
    l._$appendChild = function(t) {
        t = this.__isNode(t) ? t : null;
        if(t && !this.__hasChild(t)) {
            this.__children.push(t);
            t._$setParent(this)
        }
    };
    l._$removeChild = function(t) {
        t = this.__isNode(t) ? t : null;
        var e = i._$indexOf(this.__children, t);
        if(e >= 0) {
            this.__children.splice(e, 1);
            t._$setParent(null)
        }
        return t
    };
    return r
}, 129, 1, 4, 19);
I$(47, function(t, e, i, n, r, a, s, o, l, c) {
    var u;
    s._$$ModuleAbstract = e._$klass();
    u = s._$$ModuleAbstract._$extend(r._$$EventTarget);
    u.__init = function() {
        this.__super();
        this.__export = {};
        this.__doBuild()
    };
    u.__reset = function(t) {
        this.__super(t);
        this.__umi = t.umi || "";
        this.__dispatcher = t.dispatcher;
        this.__composites = t.composite || o;
        this._$batEvent({
            onshow: this.__onShow._$bind(this),
            onhide: this.__onHide._$bind(this),
            onrefresh: this.__onRefresh._$bind(this),
            onmessage: this.__onMessage._$bind(this),
            onbeforehide: this.__onBeforeHide._$bind(this)
        })
    };
    u.__destroy = function() {
        this.__super();
        this.__export = {};
        delete this.__umi;
        delete this.__composites;
        delete this.__dispatcher
    };
    u.__stop = function(t) {
        if(t) t.stopped = !0
    };
    u.__doBuild = l;
    u.__onBeforeHide = l;
    u.__doClearComponentExDsp = function() {
        var t = function(t) {
            return !!a._$$Dispatcher && t instanceof a._$$Dispatcher
        };
        return function() {
            this.__doClearComponent(t)
        }
    }();
    u.__onMessage = l;
    u.__doSendMessage = function(t, e, i) {
        this.__dispatcher._$message({
            to: t,
            mode: i || 0,
            data: e,
            from: this.__umi
        })
    };
    u.__doPublishMessage = function(t, e) {
        this.__dispatcher._$publish(t, {
            from: this.__umi,
            data: e
        })
    };
    u.__doSubscribeMessage = function() {
        this.__dispatcher._$subscribe.apply(this.__dispatcher, arguments)
    };
    u._$getExportData = function() {
        return this.__export
    };
    u.__doParseParent = function(t) {
        var e;
        if(!e) {
            var n = t.input || o;
            e = i._$get(n.parent)
        }
        if(!e) {
            var n = t.data || o;
            e = i._$get(n.parent)
        }
        if(!e) e = i._$get(t.parent);
        return e
    };
    u.__onShow = function(t) {
        var e = this.__doParseParent(t);
        if(e && this.__body) e.appendChild(this.__body);
        this.__doApplyComposite("onshow", t);
        this.__onRefresh(t)
    };
    u.__onRefresh = function(t) {
        this.__doApplyComposite("onrefresh", t)
    };
    u.__onHide = function() {
        this.__doHideComposite();
        i._$removeByEC(this.__body)
    };
    u.__isEscapedComposite = function() {
        var t = /^onshow|onrefresh|delay$/;
        return function(e) {
            return t.test(e)
        }
    }();
    u.__doGenCompositeParam = l;
    u.__doApplyComposite = function() {
        var t = function(t, e, i, n) {
            if(!this.__isEscapedComposite(n)) {
                if(t) i += (i.indexOf("?") > 1 ? "&" : "?") + t;
                var r = this.__doGenCompositeParam(n, e) || {};
                r.location = e;
                r.parent = this.__export[n];
                this.__dispatcher._$redirect(i, {
                    input: r
                })
            }
        };
        return function(e, i) {
            if(!i.nodelay) {
                if(this.__composites.delay) return;
                var r = this.__composites[e] || o;
                if(r.delay) return
            }
            var a = n._$object2query(i.param) || "";
            if("onrefresh" == e) n._$loop(this.__composites, t._$bind(this, a, i));
            n._$loop(r, t._$bind(this, a, i))
        }
    }();
    u.__doHideComposite = function() {
        var t = function(t, e) {
            if(!this.__isEscapedComposite(e)) this.__dispatcher._$hide(t)
        };
        return function() {
            n._$loop(this.__composites, t, this);
            n._$loop(this.__composites.onshow, t, this);
            n._$loop(this.__composites.onrefresh, t, this)
        }
    }();
    s._$regist = function() {
        var t;
        s._$dumpModules = function() {
            if(t) {
                n._$loop(t, function(t, e) {
                    dispatcher._$loaded(e, t)
                });
                t = null
            }
        };
        return function(e, i) {
            if(window.dispatcher) dispatcher._$loaded.apply(dispatcher, arguments);
            else {
                if(!t) t = {};
                t[e] = i
            }
        }
    }();
    if(!0) {
        t.P("nej.e")._$regist = s._$regist;
        t.P("nej.ut")._$$Module = s._$$ModuleAbstract;
        t.P("nej.ut")._$$AbstractModule = s._$$ModuleAbstract
    }
    return s
}, 129, 1, 3, 4, 19, 2);
I$(290, function(t, e, i, n, r, a, s) {
    var o = function(e, i, n) {
        var r = e,
            n = n || a;
        if("/" != i) t._$forEach(i.split("/"), function(t) {
            var e = n(r, t);
            if(!e) return !0;
            r = e
        });
        return r
    };
    n._$getNodeByUMI = function() {
        var t = function(t, e) {
            var e = e || "/",
                i = t._$getName();
            if("/" == i && "/" == e) return t;
            else return t._$getChildByName(e)
        };
        return function(e, i) {
            return o(e, i, t)
        }
    }();
    n._$appendNodeByUMI = function() {
        var t = function(t, i) {
            var n = t._$getName();
            if(!i && "/" == n) return t;
            var r = null;
            if("/" != n) {
                r = t._$getChildByName("/");
                if(!r) {
                    r = e._$$Node._$allocate();
                    t._$appendChild(r)
                }
            }
            if(i) {
                r = t._$getChildByName(i);
                if(!r) {
                    r = e._$$Node._$allocate({
                        name: i
                    });
                    t._$appendChild(r)
                }
            }
            return r
        };
        return function(e, i) {
            return o(e, i, t)
        }
    }();
    n._$getCommonRoot = function(e, i, r) {
        if(!i || !r) return e;
        var i = i._$getPath().split("/"),
            r = r._$getPath().split("/"),
            a = t._$forIn(i, function(t, e) {
                    if(t != r[e]) return !0
                }) || 1,
            s = i.splice(0, a).join("/") || "/";
        return n._$getNodeByUMI(e, s)
    };
    n._$breadthFirstSearch = function(t, e) {
        for(var i = [t], n = i.shift(), e = e || a; n;) {
            i.push.apply(i, n._$getChildren());
            e(n);
            n = i.shift()
        }
    };
    n._$isNode = function(t) {
        return t instanceof e._$$Node
    };
    n._$isModule = function(t) {
        return t instanceof i._$$ModuleAbstract
    };
    n._$isUMIPrivate = function() {
        var t = /^\/?\?(?=\/|$)/;
        return function(e) {
            return t.test(e || "")
        }
    }();
    n._$path2umi = function() {
        var t = /[\?#]/;
        return function(e) {
            var i = (e || "").trim().split(t),
                n = "/" == i[0] && 0 == (i[1] || "").indexOf("/");
            return i[0] + (n ? "?" + i[1] : "")
        }
    }();
    return n
}, 4, 291, 47);
I$(292, function(t, e, i, n, r, a, s, o, l, c, u, d) {
    var h;
    l._$$GroupManager = e._$klass();
    h = l._$$GroupManager._$extend(a._$$EventTarget);
    h.__reset = function(t) {
        this.__super(t);
        this.__root = t.root;
        this.__dispatcher = t.dispatcher;
        this.__mpool = {}
    };
    h.__destroy = function() {
        this.__super();
        delete this.__root;
        delete this.__mpool;
        delete this.__dispatcher
    };
    h.__isStopped = function(t) {
        if(!o._$isNode(t)) return !1;
        else return !!t._$getData().stopped || this.__isStopped(t._$getParent())
    };
    h.__doClearStopped = function(t) {
        if(o._$isNode(t)) {
            delete t._$getData().stopped;
            this.__doClearStopped(t._$getParent())
        }
    };
    h.__doModuleHide = function(t, e) {
        this.__doModuleCheck("onhide", t, e)
    };
    h.__doModuleShow = function(t, e) {
        this.__doModuleCheck("onshow", t, e);
        this.__doModuleAction(t)
    };
    h.__doModuleRefresh = function(t) {
        this.__doModuleCheck("onrefresh", t);
        this.__doModuleAction(t)
    };
    h.__doModuleCheck = function(t, e, i) {
        if(e != i && o._$isNode(e)) {
            if("onhide" == t) this.__doModuleDispatch(e, t);
            this.__doModuleCheck(t, e._$getParent(), i);
            if("onhide" != t) this.__doModuleDispatch(e, t)
        }
    };
    h.__doModuleAction = function(e) {
        if(!o._$isNode(e)) return !0;
        var i = e._$getData(),
            n = i.action,
            r = i.module;
        if(!this.__doModuleAction(e._$getParent()) || n && t._$isString(r)) return !1;
        if(r && r._$allocate && n && "onhide" != n) {
            if(this.__isStopped(e)) return;
            var a = {
                umi: e._$getPath(),
                composite: i.composite,
                dispatcher: this.__dispatcher
            };
            r = r._$allocate(a);
            if(o._$isModule(r)) {
                i.module = r;
                this.__doModuleDispatch(e, "onshow")
            } else delete i.module
        }
        delete i.action;
        return !0
    };
    h.__doModuleDispatch = function() {
        var e = function(t) {
            var e;
            t = t._$getParent();
            for(; t;) {
                e = t._$getData().module;
                if(o._$isModule(e)) return e._$getExportData();
                t = t._$getParent()
            }
            return null
        };
        return function(i, a) {
            if(o._$isNode(i)) {
                var l = i._$getData(),
                    u = l.module,
                    d = "onhide" != a;
                if(o._$isModule(u)) {
                    if(d && this.__isStopped(i)) return;
                    var h = !this.__source ? l.event : this.__source._$getData().event;
                    if(h) {
                        h.umi = i._$getPath();
                        h.data = e(i)
                    }
                    var f = l.xname || "onhide";
                    if("onshow" == a && "onhide" != f) a = "onrefresh";
                    if("onrefresh" == a && "onhide" == f) a = "onshow";
                    l.xname = a;
                    u._$dispatchEvent(a, h || {});
                    if(d && h && h.pos && h.umi == h.target) n._$scrollTo(h.pos);
                    if(d && h) {
                        l.stopped = h.stopped;
                        delete h.stopped
                    }
                } else if(u) {
                    l.action = a;
                    if("onshow" == a && t._$isString(u)) {
                        var p = n._$get("umi://" + u);
                        if(p) s._$parseTemplate(p);
                        else {
                            var _ = location.config || c;
                            r._$loadHtml((_.root || "") + u, {
                                version: (_.ver || c)[u],
                                onload: s._$parseTemplate
                            })
                        }
                    }
                }
            }
        }
    }();
    h._$hasUMI = function(t) {
        return !!this.__mpool[t]
    };
    h._$addUMI = function(t) {
        this.__mpool[t] = !0
    };
    h._$delUMI = function(t) {
        delete this.__mpool[t]
    };
    h._$loadedUMI = function(t) {
        if(this._$hasUMI(t)) this.__doModuleAction(o._$getNodeByUMI(this.__root, t))
    };
    h._$dispatchUMI = function(t) {
        if(this._$hasUMI(t)) {
            var e = o._$getNodeByUMI(this.__root, t);
            this.__doClearStopped(e);
            this.__doModuleShow(e)
        }
    };
    h._$hideUMI = function(t) {
        if(this._$hasUMI(t)) this.__doModuleHide(o._$getNodeByUMI(this.__root, t))
    };
    return l
}, 4, 1, 131, 3, 150, 19, 14, 290);
I$(293, function(t, e, i, n, r, a, s, o) {
    var l;
    r._$$GroupManagerSingle = t._$klass();
    l = r._$$GroupManagerSingle._$extend(n._$$GroupManager);
    l.__reset = function(t) {
        this.__super(t);
        this.__classed = !!t.classed
    };
    l.__destroy = function() {
        this.__super();
        delete this.__cmroot;
        delete this.__source
    };
    l._$exitable = function(t) {
        if(!this.__source) return !0;
        var e = this.__source._$getData().module;
        if(i._$isModule(e)) e._$dispatchEvent("onbeforehide", t);
        return !t.stopped
    };
    l._$refresh = function() {
        if(this.__source) window.setTimeout(this._$dispatchUMI._$bind(this, this.__source._$getPath()), 0)
    };
    l._$dispatchUMI = function(t) {
        if(this._$hasUMI(t)) {
            var n = i._$getNodeByUMI(this.__root, t),
                r = n._$getData();
            if(r.module) {
                var s = this.__source,
                    o = r.event,
                    l = a;
                this.__source = n;
                this.__doClearStopped(n);
                if(s) {
                    l = s._$getData().event;
                    o.referer = l.href || ""
                }
                if(s != n) {
                    this.__cmroot = i._$getCommonRoot(this.__root, s, n);
                    if(null != s) {
                        if(s != this.__cmroot) {
                            if(this.__classed) e._$delClassName(document.body, l.clazz);
                            this.__doModuleHide(s, this.__cmroot)
                        }
                        this.__doModuleRefresh(this.__cmroot)
                    } else this.__doModuleShow(this.__cmroot);
                    if(n != this.__cmroot) {
                        if(this.__classed) e._$addClassName(document.body, o.clazz);
                        this.__doModuleShow(n, this.__cmroot)
                    }
                } else this.__doModuleRefresh(this.__source)
            }
        }
    };
    l._$loadedUMI = function(t) {
        if(this._$hasUMI(t)) this.__doModuleAction(this.__source)
    };
    l._$hide = function() {
        if(this.__source) {
            this._$hideUMI(this.__source._$getPath());
            delete this.__cmroot;
            delete this.__source
        }
    };
    return r
}, 1, 3, 290, 292);
I$(465, function(t, e, i, n, r) {
    e.__doFixTitle = function() {
        var t = /#.*?$/i;
        return function(e) {
            var i = document.title,
                n = i.replace(t, "");
            if(i != n) {
                e = n || e;
                document.title = e
            }
            return document.title
        }
    }();
    e.__doFixHashTitle = function(t) {};
    return e
}, 148);
I$(294, function(t, e, i, n, r, a) {
    if("trident" === e._$KERNEL.engine && e._$KERNEL.release >= "7.0") I$(466, function(e) {
        t.__doFixHashTitle = function(i) {
            new MutationObserver(function(n) {
                e._$reverseEach(n, function(e) {
                    if("TITLE" == e.target.tagName || "characterData" == e.type) {
                        i = t.__doFixTitle(i);
                        return !0
                    }
                })
            }).observe(document, {
                subtree: !0,
                childList: !0,
                characterData: !0
            })
        }
    }, 4);
    if("trident" === e._$KERNEL.engine && e._$KERNEL.release < "7.0") I$(467, function(e) {
        t.__doFixHashTitle = function(i) {
            e._$addEvent(document, "propertychange", function(e) {
                if("title" == e.propertyName) i = t.__doFixTitle(i)
            })
        }
    }, 6);
    return t
}, 465, 148);
I$(2, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f, p, _, m, g) {
    var v;
    p._$$Dispatcher = e._$klass();
    v = p._$$Dispatcher._$extend(o._$$EventTarget);
    v.__init = function() {
        this.__super();
        var t = r._$uniqueID();
        this.__pbseed = "pb-" + t;
        this.__pvseed = "pv-" + t
    };
    v.__reset = function(t) {
        this.__dtmp = {};
        this.__rest = !!t.rest;
        this.__root = c._$$Node._$allocate();
        this.__config = {
            m: {},
            mg: {},
            r: [],
            rr: {},
            al: {},
            am: {}
        };
        this.__groups = {};
        this.__doBuildGroup(this.__pbseed);
        this.__groups[this.__pvseed] = u._$$GroupManager._$allocate({
            root: this.__root,
            dispatcher: this
        });
        f.__doFixHashTitle(document.title);
        this.__doInitDomEvent([
            [location, "urlchange", this.__onURLChange._$bind(this)]
        ]);
        this.__super(t);
        this._$rule(t.rules);
        this._$regist(t.modules)
    };
    v.__destroy = function() {
        var t = function(t, e, i) {
            delete i[e];
            t._$recycle()
        };
        return function() {
            delete this.__config;
            this.__root = this.__root._$recycle();
            r._$loop(this.__groups, t);
            this.__super()
        }
    }();
    v.__setModuleConf = function(t, e, i) {
        var n = this.__config.m[t];
        if(!n) {
            n = {};
            this.__config.m[t] = n
        }
        n[e] = i
    };
    v.__getModuleConf = function(t, e) {
        var i = this.__config.m[t];
        return !i ? "" : i[e]
    };
    v.__doBuildGroup = function(t) {
        if(t) {
            var e = this.__groups[t];
            if(!e) {
                e = d._$$GroupManagerSingle._$allocate({
                    root: this.__root,
                    dispatcher: this,
                    classed: t == this.__pbseed
                });
                this.__groups[t] = e
            }
            return e
        }
    };
    v.__doAddUMI2Group = function(t, e) {
        var i = this.__doBuildGroup(e);
        if(!i) {
            e = l._$isUMIPrivate(t) ? this.__pvseed : this.__pbseed;
            i = this.__groups[e]
        }
        i._$addUMI(t);
        this.__config.mg[t] = e
    };
    v.__doRewriteUMI = function() {
        var t = /\$\d/;
        return function(e, i) {
            var n;
            r._$forIn(this.__config.r, function(a) {
                r._$forIn(a, function(a, s) {
                    if(r._$isFunction(a)) {
                        var o = !1;
                        try {
                            o = a.call(null, {
                                umi: e,
                                href: i
                            })
                        } catch(t) {}
                        if(o) {
                            n = s;
                            return !0
                        }
                    }
                    if(r._$isArray(a)) {
                        var l = r._$indexOf(a, function(t) {
                            return t === e || t === i
                        });
                        if(l >= 0) {
                            n = s;
                            return !0
                        }
                    }
                    if(a.test && (a.test(e) || a.test(i))) {
                        n = t.test(s) ? e.replace(a, s) : s;
                        return !0
                    }
                    if(a === e || a === i) {
                        n = s;
                        return !0
                    }
                });
                return !!n
            });
            return n || e
        }
    }();
    v.__onURLChange = function() {
        var t = /(?:^\/+)|(?:\/+$)/gi,
            e = /#(\$.*?)$/,
            i = /\/$/,
            n = function(e, i) {
                var n = i._$getPath(),
                    e = e.replace(n, "").replace(t, "");
                return e.split("/")
            },
            r = function(t, e) {
                for(var i, n = t.split("/"); n.length > 0;) {
                    if(!n[n.length - 1]) n.pop();
                    else n[n.length - 1] = "";
                    i = e[n.join("/")];
                    if(i) return i
                }
                return ""
            };
        return function(t) {
            if(0 != t.path.indexOf("$")) {
                var a = this.__dtmp[t.path];
                delete this.__dtmp[t.path];
                this._$dispatchEvent("onbeforechange", t);
                var s = this.__doRewriteUMI(t.path, t.href),
                    o = this.__config.mg[s];
                if(!o && this.__rest) o = r(s, this.__config.mg);
                if(!o && !l._$isUMIPrivate(s)) {
                    s = this.__config.rr["404"];
                    o = this.__config.mg[s]
                }
                if(!o && this.__rest) o = r(s, this.__config.mg);
                if(o) {
                    var c = l._$getNodeByUMI(this.__root, s),
                        u = null;
                    if(this.__rest) {
                        u = n(s, c);
                        if(!i.test(s) && this.__config.mg[s + "/"]) c = c._$getChildByName("/")
                    }
                    var d = s;
                    s = c._$getPath();
                    c._$getData().event = {
                        target: s,
                        source: d,
                        href: t.href,
                        param: t.query,
                        input: a,
                        prest: u,
                        clazz: this.__getModuleConf(s, "clazz"),
                        pos: e.test(t.href) ? RegExp.$1 : ""
                    };
                    var h = this.__getModuleConf(d, "title");
                    if(h) document.title = h;
                    this.__groups[o]._$dispatchUMI(s)
                }
            }
        }
    }();
    v.__onClickDelegate = function() {
        var t = function(t, e) {
                if(t) {
                    var i = location.parse(t);
                    this._$dispatchEvent("onbeforechange", i);
                    var n = this.__doRewriteUMI(i.path, e || i.href);
                    return this.__groups[this.__pbseed]._$hasUMI(n)
                }
            },
            e = function(e) {
                var n = i._$dataset(e, "href");
                if(n) return n;
                var a = i._$attr(e, "href");
                if(a && !i._$dataset(e, "notUmi")) {
                    var s = a.split("#");
                    s.shift();
                    var n = s.join("#");
                    if(t.call(this, n, a)) return n;
                    if(t.call(this, a)) {
                        var o = location.parse(a);
                        return o.path + "?" + r._$object2query(o.query)
                    }
                }
            },
            a = function(t) {
                return !!e.call(this, t)
            };
        return function(t) {
            var i = n._$getElement(t, a._$bind(this));
            if(i) {
                n._$stopDefault(t);
                this._$redirect(e.call(this, i))
            }
        }
    }();
    v.__onActionDelegate = function(t) {
        var e = this.__config.am,
            r = e[t.type];
        if(r) {
            var a = n._$getElement(t, "d:resAction");
            if(a) {
                var s = i._$dataset(a, "resAction") || "",
                    o = r[s.toLowerCase()];
                if(o) {
                    var l = {
                        action: s,
                        target: a,
                        id: i._$dataset(a, "resId"),
                        type: i._$dataset(a, "resType"),
                        extra: i._$dataset(a, "resExtra")
                    };
                    this._$dispatchEvent("onbeforeaction", {
                        event: t,
                        target: a,
                        result: l
                    });
                    o.call(this, l);
                }
            }
        }
    };
    v._$rule = function() {
        var t = ["404"],
            e = function(t, e) {
                this._$rule(e, t)
            },
            i = function(t, e) {
                this.__setModuleConf(e, "title", t)
            },
            n = function(t, e) {
                this.__config.al[e] = t
            },
            a = function(e) {
                if(e) {
                    this.__config.r.push(e);
                    r._$forEach(t, function(t) {
                        if(e[t]) {
                            this.__config.rr[t] = e[t];
                            delete e[t]
                        }
                    }, this)
                }
            },
            s = function(t, e) {
                var i = this.__config.am,
                    n = "click",
                    a = t,
                    e = (e || "").toLowerCase();
                if(r._$isObject(t)) {
                    n = t.event || n;
                    a = t.value
                }
                if(r._$isString(a)) a = function(t, e) {
                    this._$redirect(t, {
                        force: !0,
                        input: e
                    })
                }._$bind(this, a);
                else if(r._$isFunction(a)) a = a._$aop(null, function(t) {
                    var e = t.value;
                    if(r._$isString(e)) this._$redirect(e, {
                        force: !0,
                        input: t.args[0]
                    })
                }._$bind(this));
                if(r._$isFunction(a)) {
                    if(!i[n]) {
                        this.__doInitDomEvent([
                            [document, n, this.__onActionDelegate._$bind(this)]
                        ]);
                        i[n] = {}
                    }
                    i[n][e] = a
                }
            },
            o = {
                title: function(t) {
                    r._$loop(t, i, this)
                },
                rewrite: function(t) {
                    if(!r._$isArray(t)) a.call(this, t);
                    else r._$forEach(t, a, this)
                },
                alias: function(t) {
                    r._$loop(t, n, this)
                },
                action: function(t) {
                    r._$loop(t, s, this)
                }
            };
        return function(t, i) {
            if(r._$isArray(t)) {
                i = t;
                t = "rewrite"
            } else if(!r._$isString(t)) {
                r._$forIn(t, e, this);
                return
            }(o[t] || m).call(this, i)
        }
    }();
    v._$regist = function() {
        var t = function(t, e) {
                this._$regist(e, t)
            },
            e = function(t) {
                return !!t && !!t._$extend
            };
        return function(i, n) {
            if(r._$isString(i)) {
                var a = l._$appendNodeByUMI(this.__root, i)._$getData(),
                    s = a.module;
                if(!l._$isModule(s) && !e(s)) {
                    var s, o = this.__config.mg[i];
                    if(r._$isString(n) || e(n)) s = n;
                    else {
                        n = n || _;
                        o = n.gid;
                        s = n.module;
                        if(n.title) this.__setModuleConf(i, "title", n.title);
                        if(n.clazz) this.__setModuleConf(i, "clazz", n.clazz);
                        if(n.composite) a.composite = n.composite
                    }
                    this.__doAddUMI2Group(i, o);
                    a.module = s
                }
            } else r._$forIn(i, t, this)
        }
    }();
    v._$message = function() {
        var t = function(t, e) {
                var i = t._$getData().module;
                if(l._$isModule(i)) i._$dispatchEvent("onmessage", e)
            },
            e = [t, function(e, i) {
                for(var n = i.from; e;) {
                    if(e._$getPath() != n) t(e, i);
                    e = e._$getParent()
                }
            }, function(e, i) {
                var n = i.from;
                l._$breadthFirstSearch(e, function(e) {
                    if(e._$getPath() != n) t(e, i)
                })
            }];
        return function(t) {
            var i = r._$merge({}, t),
                n = l._$getNodeByUMI(this.__root, i.to);
            i.path = n._$getPath();
            (e[i.mode] || e[0]).call(this, n, i)
        }
    }();
    v._$publish = function(t, e) {
        var e = r._$merge({}, e);
        e.type = t || "";
        this._$dispatchEvent((e.from || "") + ":" + e.type, e)
    };
    v._$subscribe = function(t, e, i) {
        t = this.__config.al[t] || t;
        this._$addEvent((t || "") + ":" + (e || ""), i)
    };
    v._$unsubscribe = function(t, e, i) {
        t = this.__config.al[t] || t;
        this._$delEvent((t || "") + ":" + (e || ""), i)
    };
    v._$hide = function(t) {
        var e = this.__config.mg[t];
        if(e == this.__pvseed) this.__groups[e]._$hideUMI(t)
    };
    v._$hideGroup = function(t) {
        var e = this.__groups[t];
        if(e) e._$hide()
    };
    v._$redirect = function(t, e) {
        e = e || _;
        var i = l._$path2umi(t),
            n = location.parse(t);
        this.__dtmp[n.path] = e.input;
        if(l._$isUMIPrivate(i)) this.__onURLChange(n);
        else {
            var r = this.__groups[this.__pbseed],
                a = {
                    target: n,
                    umi: i
                };
            if(r._$exitable(a))
                if(location.same(t) && e.force) this.__onURLChange(n);
                else {
                    location.ignored = !!e.ignored;
                    location.redirect(t, !!e.replace)
                }
        }
    };
    v._$refresh = function(t) {
        if(t) this._$redirect(t, {
            replace: !0,
            force: !0
        });
        else this.__groups[this.__pbseed]._$refresh()
    };
    v._$delegate = function() {
        this.__doInitDomEvent([
            [document, "click", this.__onClickDelegate._$bind(this)]
        ])
    };
    v._$active = function() {
        location.active()
    };
    v._$loaded = function(t, e) {
        t = this.__config.al[t] || t;
        if(!r._$isArray(t)) {
            this._$regist(t, e);
            this.__groups[this.__config.mg[t]]._$loadedUMI(t)
        } else r._$forEach(t, function(t) {
            this._$loaded(t, e)
        }, this)
    };
    p._$startup = function(t) {
        window.dispatcher = p._$$Dispatcher._$getInstance(t);
        h._$dumpModules();
        s._$parseTemplate((t || _).tid || "template-box", location.config);
        n._$addEvent(document, "templateready", function() {
            window.setTimeout(dispatcher._$active._$bind(dispatcher), 0)
        });
        return window.dispatcher
    };
    if(!0) {
        t.P("nej.e")._$startup = p._$startup;
        t.P("nej.ut")._$$Dispatcher = p._$$Dispatcher
    }
    return p
}, 129, 1, 3, 6, 4, 289, 14, 19, 290, 291, 292, 293, 47, 294);
I$(10, function(t, e, i, n, r) {
    function a(t, e, i) {
        return function(n) {
            i._$dispatchEvent(t, n);
            e(n)
        }
    }
    var s = {};
    s._$$Project = t._$klass();
    var o = s._$$Project._$extend(r._$$Cache);
    o.__doLoadList = function(t) {
        var n = t.onload,
            r = t.data || {};
        i._$request("/api/projects/", {
            type: "json",
            data: e._$object2query(r),
            onload: function(t) {
                if(200 === t.code) {
                    var e = t.result;
                    e.list = e.list.map(function(t) {
                        t.createTime = new Date(t.createTime);
                        return t
                    });
                    n(e)
                } else n(null)
            }
        })
    };
    o.__doDeleteItem = function(t) {
        var e = t.onload,
            n = t.data || {};
        i._$request("/api/project/{id}/", {
            method: "delete",
            param: {
                id: n.id
            },
            onload: function(t) {
                e(200 == t.code ? t.result : null)
            }
        })
    };
    o._$add = function(t) {
        var e = this._$dispatchEvent._$bind(this, "onadd");
        i._$request("/api/project", {
            method: "post",
            data: t,
            onload: e,
            onerror: e
        })
    };
    o._$update = function(t) {
        var e = this._$dispatchEvent._$bind(this, "onupdate");
        i._$request("/api/project/" + t.id, {
            method: "put",
            data: t,
            onload: e,
            onerror: e
        })
    };
    o._$get = function(t) {
        var e = this;
        return new Promise(function(n, r) {
            i._$request("/api/project/" + t.id, {
                method: "get",
                onload: a("onget", n, e),
                onerror: a("onget", r, e)
            })
        })
    };
    o._$updateConfig = function(t) {
        return new Promise(function(e, n) {
            i._$request("/api/project/updateConfig", {
                method: "post",
                type: "json",
                data: t,
                onload: e,
                onerror: n
            })
        })
    };
    o._$check = function(t) {
        return new Promise(function(e, n) {
            i._$request("/api/project/check", {
                method: "post",
                type: "json",
                data: t,
                onload: e,
                onerror: n
            })
        })
    };
    o._$reset = function(t) {
        return new Promise(function(e, n) {
            i._$request("/api/project/reset", {
                method: "post",
                type: "json",
                data: t,
                onload: e,
                onerror: n
            })
        })
    };
    return s
}, 1, 4, 137, 60, 138);
if("undefined" != typeof exports) Validator = require("./validator.js");

function string2emails(t) {
    var e = t.split(";");
    return e.filter(function(t) {
        return t.length
    })
}
var rules = [{
        field: "name",
        rules: [{
            type: "isFilled",
            message: "项目名称不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 40
            },
            message: "请将项目名称长度限制在40字以内"
        }]
    }, {
        field: "emails",
        rules: [{
            type: "isFilled",
            message: "项目管理员不能为空"
        }]
    }, {
        field: "description",
        rules: [{
            type: "isLength",
            range: {
                min: 0,
                max: 100
            },
            message: "请将项目描述长度限制在100字以内"
        }]
    }],
    permissionRules = [{
        field: "projectName",
        rules: [{
            type: "isFilled",
            message: "项目名称不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 40
            },
            message: "请将项目名称长度限制在40字以内"
        }]
    }, {
        field: "description",
        rules: [{
            type: "isLength",
            range: {
                min: 0,
                max: 100
            },
            message: "请将项目描述长度限制在100字以内"
        }]
    }];
var permissionRules = [{
    field: "projectName",
    rules: [{
        type: "isFilled",
        message: "项目名称不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 40
        },
        message: "请将项目名称长度限制在40字以内"
    }]
}, {
    field: "description",
    rules: [{
        type: "isLength",
        range: {
            min: 0,
            max: 100
        },
        message: "请将项目描述长度限制在100字以内"
    }]
}];
if("undefined" == typeof exports) {
    if("object" != typeof window.bigvizValidateRule) window.bigvizValidateRule = {};
    bigvizValidateRule.project = rules;
    bigvizValidateRule.permissionRules = permissionRules
} else {
    exports.project = rules;
    exports.permissionRules = permissionRules
}
var regInt = /^(?:[-+]?(?:0|[1-9][0-9]*))$/,
    regFloat = /^(?:[-+]?(?:[0-9]+))?(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/,
    regEmail = /^[\w-\.]+@(?:[\w-]+\.)+[a-z]{2,6}$/i,
    regUrl = /((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/,
    regWide = /[^\x00-\xff]/g,
    Validator = function(t) {
        this.fieldRules = t
    };
var regFloat = /^(?:[-+]?(?:[0-9]+))?(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/;
var regEmail = /^[\w-\.]+@(?:[\w-]+\.)+[a-z]{2,6}$/i;
var regUrl = /((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/;
var regWide = /[^\x00-\xff]/g;
var Validator = function(t) {
    this.fieldRules = t
};
Validator.isEmail = function(t) {
    return regEmail.test(t)
};
Validator.isURL = function(t) {
    return regUrl.test(t)
};
Validator.isInt = function(t) {
    return regInt.test(t)
};
Validator.isFloat = function(t) {
    return regFloat.test(t)
};
var _validate = function(t, e, i) {
        switch(e.type) {
            case "is":
                return e.reg.test(t);
            case "isRequired":
                return 0 === t || !!t;
            case "isFilled":
                return !!t && !!t.replace(/^\s+/g, "").replace(/\s+$/g, "");
            case "isEmail":
                return Validator.isEmail(t);
            case "isURL":
                return Validator.isURL(t);
            case "isInt":
                return Validator.isInt(t);
            case "isFloat":
                return Validator.isFloat(t);
            case "isLength":
                var n = t.length;
                return n >= e.range.min && n <= e.range.max;
            default:
                if("function" == typeof e.type) return e.type(t, i)
        }
        return result
    },
    _validateAll = function(t) {
        for(var e = {
            success: !0,
            result: {}
        }, i = 0; i < this.fieldRules.length; i++) {
            var n = this.fieldRules[i].field,
                r = this.fieldRules[i].rules;
            if(r && r.length)
                for(var a = 0; a < r.length; a++) {
                    var s = r[a],
                        o = _validate(t[n], s, t);
                    e.success = e.success && o;
                    if(!o) {
                        e.result[n] = s;
                        break
                    }
                } else;
        }
        return e
    },
    _validateField = function(t, e) {
        for(var i, n = {
            result: {}
        }, r = 0; r < this.fieldRules.length; r++)
            if(this.fieldRules[r].field === t) {
                i = this.fieldRules[r].rules;
                break
            }
        for(var r = 0; r < i.length; r++) {
            var a = i[r];
            n.success = _validate(e, a);
            if(!n.success) {
                n.result[t] = a;
                break
            }
        }
        return n
    };
var _validateAll = function(t) {
    for(var e = {
        success: !0,
        result: {}
    }, i = 0; i < this.fieldRules.length; i++) {
        var n = this.fieldRules[i].field,
            r = this.fieldRules[i].rules;
        if(r && r.length)
            for(var a = 0; a < r.length; a++) {
                var s = r[a],
                    o = _validate(t[n], s, t);
                e.success = e.success && o;
                if(!o) {
                    e.result[n] = s;
                    break
                }
            } else;
    }
    return e
};
var _validateField = function(t, e) {
    for(var i, n = {
        result: {}
    }, r = 0; r < this.fieldRules.length; r++)
        if(this.fieldRules[r].field === t) {
            i = this.fieldRules[r].rules;
            break
        }
    for(var r = 0; r < i.length; r++) {
        var a = i[r];
        n.success = _validate(e, a);
        if(!n.success) {
            n.result[t] = a;
            break
        }
    }
    return n
};
Validator.prototype.validate = function(t, e) {
    if("object" == typeof t) return _validateAll.call(this, t);
    else return _validateField.call(this, t, e)
};
if("undefined" == typeof exports) window.Validator = Validator;
else exports = module.exports = Validator;
I$(269, '\ufeff\n<meta charset="utf-8"/>\n<!-- @TEMPLATE -->\n<textarea name="ntp" id="#<emails>">\n\t<div class="u-emails j-emails-wrap u-txt">\n\t\t<span class="emails j-emails"></span>\n\t\t<input size="1">\n\t\t<span class="u-placeholder j-placeholder"></span>\n\t</div>\n\n</textarea>\n<textarea name="jst" id="#<email>">\n\t<span class="email" title="${email|escape}" >\n\t\t<!-- <b class="j-email">${email|escape}</b> -->\n\t\t<b class="j-email">${nick|escape}</b>\n\t\t<i class="u-icn u-icn-close j-close"></i>\n\t</span>\n</textarea>\n<textarea name="jst" id="#<emailrole>">\n\t<span class="email" title="${email|escape}" data-id="${id|escape}" style="border:1px solid #009688;" >\n\t\t<!-- <b class="j-email">${email|escape}</b> -->\n\t\t<b class="j-email">${nick|escape}</b>\n\t\t<i class="u-icn u-icn-close j-close"></i>\n\t</span>\n</textarea>\n\n<textarea name="jst" id="#<list>">\n\t<ul class="u-autoList j-autoList">\n\t{if data.length}\n\t\t{list data as x}\n\t\t\t<li><a class="j-listItem" href="#" data-nick="${x.nick|escape}" data-email="${x.email|escape}">${x.nick|escape} - ${x.email|escape}</a></li>\n\t\t{/list}\n\t{else}\n\t\t<li><a class="u-italic" href="#" >没有匹配的用户</a></li>\n\t{/if}\n\t</ul>\n\n</textarea>\n\n<textarea name="jst" id="#<listrolegroup>">\n\t<ul class="u-autoList j-autoList">\n\t{if data.length}\n\t\t{list data as x}\n\t\t\t<li><a class="j-listItem" href="#" data-name="${x.name|escape}" data-id="${x.id|escape}" data-emailstring="${x.emailStr|escape}" title="${x.emailStr|escape}">${x.name|escape}</a></li>\n\t\t{/list}\n\t{else}\n\t\t<li><a class="u-italic" href="#" >没有匹配的用户</a></li>\n\t{/if}\n\t</ul>\n\n</textarea>\n\n<textarea name="jst" id="#<listrole>">\n\t<ul class="u-autoList j-autoList">\n\t{if data.length}\n\t\t{list data as x}\n\t\t\t<li><a class="j-listItem" href="#" data-role="${x.role|escape}" data-index="${x_index|escape}" >${x.role|escape}</a></li>\n\t\t{/list}\n\t{else}\n\t\t<li><a class="u-italic" href="#" >没有匹配的用户</a></li>\n\t{/if}\n\t</ul>\n\n</textarea>\n\n');
I$(270, function(t, e, i, n, r, a) {
    r._$$Email = t._$klass();
    a = r._$$Email._$extend(n._$$Cache);
    a._$search = function(t) {
        var e = t;
        i._$request("/api/user/searchByKeyword", {
            method: "get",
            type: "json",
            data: e || {},
            onload: this._$dispatchEvent._$bind(this, "search"),
            onerror: this._$dispatchEvent._$bind(this, "search")
        })
    };
    a._$roleEmails = function(t) {
        var e = t;
        i._$request("/api/regularMail/emails", {
            method: "get",
            type: "json",
            data: e || {},
            onload: this._$dispatchEvent._$bind(this, "roleEmails"),
            onerror: this._$dispatchEvent._$bind(this, "roleEmails")
        })
    };
    return r
}, 1, 4, 137, 138);
I$(102, function(t, e, i, n, r, a, s, o, l, c) {
    function u(t) {
        return v.test(t)
    }

    function d(t) {
        return !isNaN(parseInt(t))
    }

    function h(t) {
        var e = t.match(y);
        return e && e[0]
    }

    function f(t) {
        var e = parseInt(t);
        if(isNaN(e)) {
            var i = t.split("<"),
                n = i[1] && i[1].split(">");
            return n && n[0] && parseInt(n[0])
        } else return e
    }

    function p(t) {
        var e = t.split("__"),
            i = e.length;
        e.length = i - 1;
        return e.join("__")
    }

    function _(t) {
        var e = t.split("__"),
            i = e.length,
            n = e[i - 1] && e[i - 1].split("<");
        if(n && 1 == n.length && !isNaN(parseInt(n[0]))) return "";
        else return n && n[0]
    }

    function m(t) {
        var e = t.substring(0, t.indexOf("<"));
        return e
    }
    var g = {},
        v = /^[\w-\.]+@(?:[\w-]+\.)+[a-z]{2,6}$/i,
        y = /[\w-\.]+@(?:[\w-]+\.)+[a-z]{2,6}/i;
    g._$$Emails = t._$klass();
    var b = g._$$Emails._$extend(n._$$Abstract),
        x = a._$parseUITemplate(o),
        $ = function(t) {
            if("string" != typeof t) t = "";
            return t.replace(/[^\x00-\xff]/g, "01").length
        };
    b.__initXGui = function() {
        a._$addNodeTemplate(o);
        return function() {
            this.__seed_html = x["emails"]
        }
    }();
    b.__initNode = function() {
        this.__super();
        this.__input = this.__body.getElementsByTagName("input")[0];
        this.__eemails = e._$getByClassName(this.__body, "j-emails")[0];
        this.__eplaceholder = e._$getByClassName(this.__body, "j-placeholder")[0];
        i._$addEvent(this.__body, "click", this.__onClickBody._$bind(this));
        i._$addEvent(this.__input, "keyup", this.__onKeyUp._$bind(this));
        i._$addEvent(this.__input, "keydown", this.__onKeyDown._$bind(this));
        i._$addEvent(this.__input, "focus", this.__onFocus._$bind(this));
        i._$addEvent(this.__input, "input", this.__onInput._$bind(this));
        i._$addEvent(this.__input, "blur", this.__onBlur._$bind(this));
        i._$addEvent(this.__input, "paste", this.__onPaste._$bind(this))
    };
    b.__reset = function(t) {
        t = t || {};
        this.__isCheckRole = t.isCheckRole || !1;
        this.__isKeepOwner = t.isKeepOwner || !1;
        if(this.__isKeepOwner) e._$addClassName(this.__eemails, "emails-keep");
        else e._$delClassName(this.__eemails, "emails-keep");
        this.__binder = e._$get(t.binder);
        if(!t.parent && this.__binder && this.__binder.parentNode) t.parent = this.__binder.parentNode;
        this.__super(t);
        if(!t.emails && this.__binder) t.emails = this.__binder.value.trim();
        if(!t.placeholder && this.__binder) t.placeholder = this.__binder.placeholder;
        this.__placeholder = t.placeholder;
        this.__setPlaceHolder(t.placeholder);
        dataCache = l._$$Email._$allocate();
        dataCache._$addEvent("search", this.__cbSearch._$bind(this));
        dataCache._$addEvent("roleSearch", this.__cbRoleSearch._$bind(this));
        dataCache._$addEvent("roleEmails", this.__cbRoleEmails._$bind(this));
        this._$add(t.emails);
        this.__isEmailFocus = !1;
        this.searchKey = "";
        this.searchArr = [];
        this.__searchData = [];
        this.searchType = "";
        this.isPaste = !1;
        this.__step = -1
    };
    b.__setPlaceHolder = function(t) {
        var e = this._$getEmails();
        if(!e || !e.length && this.__placeholder) this.__eplaceholder.innerText = this.__placeholder || ""
    };
    b.__clearPlaceholder = function() {
        this.__eplaceholder.innerText = ""
    };
    b._$focus = function() {
        this.__input.focus();
        this.__clearPlaceholder()
    };
    b.__onClickBody = function(t) {
        if(e._$hasClassName(t.target, "j-emails-wrap") || t.target === this.__eplaceholder) this._$focus();
        else if(e._$hasClassName(t.target, "j-close")) {
            this.__isEmailFocus = !0;
            var i = t.target.parentNode;
            i.parentNode.removeChild(i);
            this.__onChange();
            this._$focus()
        }
    };
    b._$getEmails = function() {
        var t = e._$getByClassName(this.__body, "j-email"),
            i = [];
        if(t)
            for(var n, r, a, s, o = 0; s = t[o]; o++) {
                a = s.parentNode;
                n = e._$attr(a, "title");
                r = e._$dataset(a, "id");
                if(r) i.push(r);
                else i.push(n)
            }
        return i
    };
    b.__onKeyUp = function(t) {
        switch(t.keyCode) {
            case 186:
                this.__doAdd()
        }
    };
    b.__onKeyDown = function(t) {
        switch(t.keyCode) {
            case 8:
                if(!this.__input.value) {
                    var n = e._$getChildren(this.__eemails),
                        r = n && n[n.length - 1];
                    if(r) {
                        if(this.__isKeepOwner && 1 === n.length) {
                            this._$dispatchEvent("onbackspace");
                            return
                        }
                        e._$remove(r);
                        this.__onChange()
                    }
                }
                break;
            case 13:
                i._$stop(t);
                if(this.__eautoList) {
                    var a = e._$getChildren(this.__eautoList);
                    if(-1 < this.__step && this.__step < a.length) {
                        var s = e._$getChildren(a[this.__step])[0],
                            o = e._$dataset(s, "email");
                        if(this.__isCheckRole)
                            if(!o && this.__input.value && "@" == this.__input.value[0]) {
                                var l = e._$dataset(s, "name");
                                o = "@" + l
                            }
                        this.__step = -1;
                        this.__doAddByStep(o);
                        return
                    }
                }
                this.__step = -1;
                this.__doAdd();
                break;
            case 38:
                i._$stop(t);
                this.__nav(-1);
                break;
            case 40:
                i._$stop(t);
                this.__nav(1)
        }
    };
    b.__nav = function(t) {
        if(this.__eautoList) {
            var i = e._$getChildren(this.__eautoList);
            if(i.length > 0) {
                var n = this.__step + t;
                n = n < 0 ? 0 : n > i.length - 1 ? i.length - 1 : n;
                this.__step = n;
                i.forEach(function(t, i) {
                    if(i == n) e._$addClassName(t, "z-crt");
                    else e._$delClassName(t, "z-crt")
                });
                var r, a = 32,
                    s = this.__eautoList.scrollTop / a;
                if(s <= n && n < s + 5) return;
                else if(n >= s + 5) r = s + 1;
                else if(n < s) r = s > 1 ? s - 1 : 0;
                this.__eautoList.scrollTop = r * a
            }
        }
    };
    b.__onFocus = function(t) {
        this.__isEmailFocus = !0;
        this.__clearPlaceholder();
        this._$dispatchEvent("onfocus")
    };
    b.__onBlur = function(t) {
        var e = this;
        this.__isEmailFocus = !1;
        setTimeout(function() {
            if(!e.__isEmailFocus) {
                e.__doAdd();
                e.__setPlaceHolder();
                e._$dispatchEvent("onblur")
            }
        }, 300)
    };
    b.__doAdd = function() {
        this._$add(this.__input.value.trim());
        this.__destroyList()
    };
    b.__doAddByStep = function(t) {
        this._$add(t);
        this.__destroyList()
    };
    b._$add = function(t) {
        if(this.__isCheckRole) {
            if("@" === t[0] && this.__searchData && this.__searchData.length > 0)
                for(var e, i, n = this.__searchData, r = 0; r < n.length; r++) {
                    e = n[r];
                    i = t.slice(1);
                    if(e.name == i || i.slice(0, i.length - 1) == e.name && (";" == i[i.length - 1] || "；" == i[i.length - 1])) {
                        t = e.name + "__" + e.emails.join(",") + "<" + e.id + ">";
                        break
                    }
                }
            if(!t) return;
            var a = c._$string2emails(t),
                s = this._$getEmails();
            a = a.filter(function(t) {
                var e = f(t) + "",
                    i = h(t);
                if(d(e)) return s.indexOf(e) === -1;
                else return u(i) && s.indexOf(i) === -1
            })
        } else {
            var a = c._$string2emails(t),
                s = this._$getEmails();
            a = a.filter(function(t) {
                var e = h(t);
                return u(e) && s.indexOf(e) === -1
            })
        }
        if(a.length) {
            this.__clearPlaceholder();
            a = this.unique(a);
            a.forEach(this.__showEmail._$bind(this));
            this.__onChange()
        }
        this.__input.value = "";
        this.__adaptWidth()
    };
    b.unique = function(t) {
        var e = [];
        t.forEach(function(t) {
            if(e.indexOf(t) == -1) e.push(t)
        });
        return e
    };
    b._$clearEmail = function() {
        this.__eemails.innerHTML = ""
    };
    b.__showEmail = function(t) {
        var i, n;
        if(d(f(t)) && this.__isCheckRole) {
            n = p(t);
            var r = f(t);
            a = _(t);
            if(!n && !a) {
                n = r;
                a = r
            }
            i = e._$html2node(s._$get(x["emailrole"], {
                email: a,
                nick: n,
                id: r
            }));
            this.__eemails.appendChild(i);
            if(a === r && n === r) {
                this.searchType = "showemail";
                this.__doSearch(r, !0)
            }
        } else {
            var a = h(t),
                n = m(t);
            if(!n) n = a;
            i = e._$html2node(s._$get(x["email"], {
                email: a,
                nick: n
            }));
            this.__eemails.appendChild(i);
            if(n === a) {
                this.searchType = "showemail";
                this.__doSearch(a)
            }
        }
    };
    b.__onChange = function() {
        var t = this._$getEmails();
        if(this.__binder) this.__binder.value = t.join(";");
        this._$dispatchEvent("onchange", t)
    };
    b.__onPaste = function(t) {
        var e = t.clipboardData.getData("text/plain");
        if(u(e)) {
            this.isPaste = !0;
            this.__timer = window.setTimeout(this.__doAdd._$bind(this), 0)
        }
    };
    b.__onClickList = function(t) {
        i._$stop(t);
        var n = t.target,
            r = e._$dataset(n, "nick"),
            a = e._$dataset(n, "email"),
            s = r + "<" + a + ">";
        this._$add(s);
        this.__destroyList();
        this._$focus()
    };
    b.__onClickListRoleGroup = function(t) {
        i._$stop(t);
        var n = t.target,
            r = e._$dataset(n, "name"),
            a = e._$dataset(n, "id"),
            s = e._$dataset(n, "emailstring"),
            o = r + "__" + s + "<" + a + ">";
        this._$add(o);
        this.__destroyList();
        this._$focus()
    };
    b.__onClickListRole = function(t) {
        i._$stop(t);
        var n = t.target;
        if(this.__isCheckRole) {
            var r = e._$dataset(n, "name"),
                a = e._$dataset(n, "id"),
                s = e._$dataset(n, "emailstring"),
                o = r + "__" + s + "<" + a + ">";
            this._$add(o)
        } else
            for(var l = (e._$dataset(n, "role"), e._$dataset(n, "index")), c = this.__searchData[l].emails, u = 0; u < c.length; u++) {
                var d = c[u].nick,
                    h = c[u].email,
                    s = d + "<" + h + ">";
                this._$add(s)
            }
        this.__destroyList();
        this._$focus()
    };
    b.__adaptWidth = function() {
        var t = this.__input.value;
        this.__input.setAttribute("size", $(t) + 1)
    };
    b.__onInput = function() {
        this.__adaptWidth();
        var t = this.__input.value.trim();
        if(!this.isPaste) {
            var e = t.length;
            if(e > 1)
                if(this.searchKey && 0 === t.indexOf(this.searchKey)) this.__doLocalSearch(t);
                else {
                    this.searchType = "input";
                    this.__doSearch(t)
                }
            else this.__destroyList()
        } else this.isPaste = !1
    };
    b.__doSearch = function(t, e) {
        if(this.searchKey !== t) {
            this.searchKey = t;
            var i = window.currentProjectId;
            if(this.__isCheckRole)
                if(e) dataCache._$roleEmails({
                    projectId: i,
                    roleId: this.searchKey
                });
                else if("@" === t[0]) dataCache._$roleEmails({
                    projectId: i,
                    role: this.searchKey.slice(1)
                });
                else dataCache._$search({
                        projectId: i,
                        keyword: t
                    });
            else dataCache._$search({
                projectId: i,
                keyword: t
            })
        } else if("showemail" === this.searchType) this.replace()
    };
    b.__doLocalSearch = function(t) {
        if("@" === t[0] && this.__isCheckRole) {
            var e = t.slice(1),
                i = this.__searchData.filter(function(t) {
                    return t.name.indexOf(e) !== -1
                });
            this.__renderListRoleGroup(i)
        } else {
            var i = this.__searchData.filter(function(e) {
                return e.email.indexOf(t) !== -1
            });
            this.__renderList(i)
        }
    };
    b.__cbSearch = function(t) {
        var e = t && t.code,
            i = t && t.result;
        if(200 === e)
            if("showemail" === this.searchType && 1 === i.length) {
                this.searchArr.push(i[0]);
                this.searchArr = this.unique(this.searchArr);
                this.replace(i)
            } else if("input" === this.searchType) {
                this.__searchData = i;
                this.__renderList(i)
            }
    };
    b.__cbRoleSearch = function(t) {
        var e = t && t.code,
            i = t && t.result;
        if(200 === e)
            if("showemail" === this.searchType && 1 === i.length) {
                this.searchArr.push(i[0]);
                this.searchArr = this.unique(this.searchArr);
                this.replace(i)
            } else if("input" === this.searchType) {
                this.__searchData = i;
                this.__renderListRole(i)
            }
    };
    b.__cbRoleEmails = function(t) {
        var e = t && t.code,
            i = t && t.result;
        if(200 === e)
            if("showemail" === this.searchType && "object" == typeof i) {
                i.email = i.emails.join(",");
                i.nick = i.name;
                this.searchArr.push(i);
                this.searchArr = this.unique(this.searchArr);
                this.replace(i)
            } else if("input" === this.searchType) {
                this.__searchData = i;
                this.__renderListRoleGroup(i)
            }
    };
    b.replace = function() {
        this.__destroyList();
        var t, i, n = e._$getByClassName(this.__body, "j-email"),
            r = this.__isCheckRole;
        n.forEach(function(n) {
            t = e._$attr(n.parentNode, "title");
            i = e._$dataset(n.parentNode, "id");
            this.searchArr.forEach(function(a) {
                if(r) {
                    if(!isNaN(parseInt(i))) {
                        if(a.id == t) {
                            n.innerText = a.nick;
                            e._$attr(n.parentNode, "title", a.email)
                        }
                    } else if(a.email === t) n.innerText = a.nick
                } else if(a.email === t) n.innerText = a.nick
            }._$bind(this))
        }._$bind(this))
    };
    b.__renderList = function(t) {
        this.__destroyList();
        this.__step = -1;
        this.__list = e._$html2node(s._$get(x["list"], {
            data: t
        }));
        var n = this.__body.parentNode;
        n.appendChild(this.__list);
        this.__eautoList = e._$getByClassName(n, "j-autoList")[0];
        i._$addEvent(this.__eautoList, "click", this.__onClickList._$bind(this))
    };
    b.__renderListRole = function(t) {
        this.__destroyList();
        this.__step = -1;
        this.__list = e._$html2node(s._$get(x["listrole"], {
            data: t
        }));
        var n = this.__body.parentNode;
        n.appendChild(this.__list);
        this.__eautoList = e._$getByClassName(n, "j-autoList")[0];
        i._$addEvent(this.__eautoList, "click", this.__onClickListRole._$bind(this))
    };
    b.__renderListRoleGroup = function(t) {
        this.__destroyList();
        t.forEach(function(t) {
            t.emailStr = t.emails.join(",")
        });
        this.__list = e._$html2node(s._$get(x["listrolegroup"], {
            data: t
        }));
        var n = this.__body.parentNode;
        n.appendChild(this.__list);
        this.__eautoList = e._$getByClassName(n, "j-autoList")[0];
        i._$addEvent(this.__eautoList, "click", this.__onClickListRoleGroup._$bind(this))
    };
    b.__destroyList = function() {
        if(this.__list) e._$remove(this.__list)
    };
    b.__destroy = function() {
        e._$clearChildren(this.__eemails);
        this.__clearPlaceholder();
        this.__super()
    };
    return g
}, 1, 3, 6, 142, 60, 14, 15, 269, 270, 7);
I$(141, '<form class="m-form m-form-1 j-form">\n\t<div class="formrow">\n\t\t<label>项目名：</label>\n\t\t<div class="formcnt">\n\t\t\t<span class="u-txtwrap">\n\t\t\t\t<input name="name" type="text" class="u-txt" autocomplete="off">\n\t\t\t</span>\n\t\t</div>\n\t</div>\n\t<div class="formrow">\n\t\t<label>项目管理员：</label>\n\t\t<div class="formcnt">\n\t\t\t<span class="u-txtwrap">\n\t\t\t\t<input name="emails" style="display: none;" class="u-txt" placeholder="请输入邮箱，可添加多个，以分号间隔">\n\t\t\t</span>\n\t\t</div>\n\t</div>\n\t<div class="formrow">\n\t\t<label>描述：</label>\n\t\t<div class="formcnt">\n\t\t\t<span class="u-txtwrap">\n\t\t\t\t<textarea class="u-txt u-txt-area" name="description" rows="5"/></textarea>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n</form>\n');
I$(11, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f) {
    var p = {};
    c = window.Validator;
    s = window.bigvizValidateRule.project;
    p._$$PopupApply = t._$klass();
    var _ = p._$$PopupApply._$extend(d._$$Popup);
    _.__initXGui = function() {
        return function() {
            this.__super()
        }
    }();
    _.__initNode = function() {
        this.__super();
        this.__flag = e._$getByClassName(this.__body, "j-flag")[0]
    };
    _.__reset = function(t) {
        this.__super(t);
        var e = t.data;
        this.__submit = t.onSubmit;
        this.__flag.innerHTML = f;
        this.__form = this.__body.getElementsByTagName("form")[0];
        this.submit = !1;
        this.__doInitDomEvent([
            [this.__get("name"), "blur", this.__onBlurName._$bind(this)],
            [this.__get("name"), "focus", this.__hideError._$bind(this, "name")],
            [this.__get("description"), "blur", this.__validate._$bind(this, "description")],
            [this.__get("description"), "focus", this.__hideError._$bind(this, "description")]
        ]);
        this.__userCache = l._$$User._$allocate({
            onusercheck: this.__cbUserCheck._$bind(this),
            onCheckUserStatus: this.__cbCheckUserStatus._$bind(this)
        });
        this.__cache = o._$$Project._$allocate({
            oncheck: this.__cbCheck._$bind(this)
        });
        if(s) this.__validator = new c(s);
        this.__emailsInput = h._$$Emails._$allocate({
            isKeepOwner: !0,
            binder: this.__get("emails"),
            onfocus: this.__hideError._$bind(this, "emails"),
            onchange: this.__checkEmails._$bind(this),
            onbackspace: this.__backspace._$bind(this)
        });
        var i = e.account.nick + "<" + e.account.email + ">;";
        this.__emailsInput._$add(i)
    };
    _.__onSubmit = function(t) {
        i._$stopDefault(t);
        if(!this.__hasError()) {
            var e = this.__getValue(["name", "emails", "description"]),
                n = this.__checkValidity(e);
            if(n.success) {
                e.emails = this.__getEmails();
                this.submit = !0;
                this.data = e;
                this.__cache._$check({
                    name: this.__getValue("name")
                }).then(this.__cbCheck._$bind(this), this.cbError._$bind(this))
            } else {
                var r = n.result;
                for(var a in r)
                    if(r.hasOwnProperty(a)) this.__showError(a, r[a].message)
            }
        }
    };
    _.__onBlurName = function() {
        var t = this.__validate("name");
        if(t) this.__cache._$check({
            name: this.__getValue("name")
        }).then(this.__cbCheck._$bind(this), this.cbError._$bind(this))
    };
    _.cbError = function(t) {
        u.message(t.message)
    };
    _.__checkEmails = function() {
        var t = this.__validate("emails");
        if(t) this.__userCache._$checkUserStatus({
            emails: this.__getEmails()
        })
    };
    _.__getEmails = function() {
        return u._$string2emails(this.__getValue("emails"))
    };
    _.__cbCheck = function(t) {
        if(200 === t.code) {
            var e = t.result;
            if(e) this.__showError("name", "该项目已存在");
            else if(this.submit) {
                this.__submit(this.data);
                this._$close()
            }
            this.submit = !1
        } else u.message(t.message)
    };
    _.__cbCheckUserStatus = function(t) {
        var i = t && t.code;
        if(200 == i) {
            var n = t.result,
                r = this.__getEmails(),
                a = e._$getByClassName(this.__body, "j-email"),
                s = [];
            n.forEach(function(t, i) {
                if(0 == t) s.push(u.infoWithNoEmail(r[i]));
                else if(2 == t);
                if(1 != t && 2 != t) e._$addClassName(a[i].parentNode, "email-error")
            });
            this.__hasSuperManager = !1;
            if(!s.length);
            else {
                this.__hasSuperManager = !0;
                this.__showError("emails", s.join(" , "))
            }
        }
    };
    _.__cbUserCheck = function(t) {
        if(200 === t.code) this.__showEmailExists(t.result);
        else u.message(t.message)
    };
    _.__showEmailExists = function(t) {
        var i = this.__getEmails(),
            n = e._$getByClassName(this.__body, "j-email"),
            r = t.reduce(function(t, r, a) {
                if(!r) {
                    t.push(i[a]);
                    e._$addClassName(n[_index].parentNode, "email-error")
                }
                return t
            }, []);
        if(r.length) this.__showError("emails", "邮箱 " + r.join(" , ") + " 不存在");
        else this.__hideError("emails")
    };
    _.__backspace = function() {
        if(this.time) clearTimeout(this.time);
        this.__showError("emails", "不能删除申请人");
        this.time = setTimeout(function() {
            this.__hideError("emails")
        }._$bind(this), 1e3)
    };
    _.__hasError = function() {
        if(e._$getByClassName(this.__body, "u-errtip").length) return !0;
        else return !1
    };
    return p
}, 1, 3, 6, 4, 14, 15, 116, 10, 9, 76, 7, 140, 102, 141);
I$(147, '<textarea name="ntp" id="#<mt>">\n\t<div class="contact" id="j-message">\n\t\t<div  class="j-message">\n\t\t\t<i class="u-icn u-icn-msg j-icn-msg" title="通知"></i>\n\t\t\t<i class="u-icn u-sign j-icn-sign z-hide"><span class="j-message-num"></span></i>\n\t\t</div>\n\t\t<ul class="u-menu cthid j-message-box" id="j-message-contact">\n\n\t\t</ul>\n\t</div>\n</textarea>\n<textarea name="jst" id="#<mjt>">\n<li class="total">您有<span class="j-total"></span>条未处理申请消息</li>\n{list list as msg}\n\t<li class="${% (msg.type === 0 || msg.type === 1) ? \'j-msg\':\'\' %} ${% msg.status === 1 ? \'has-read\':\'\' %}"\n\t\tdata-id="${msg.id}" data-pid="${msg.data.projectId}"  data-type="${msg.type}" data-status="${msg.status}" title="${msg.title|escape}">\n\t\t{if msg.type === 1}\n\t\t\t<i class="u-icn u-icn-email"></i>\n\t\t{elseif msg.type === 0}\n\t\t\t<i class="u-icn u-icn-permission"></i>\n\t\t{else}\n\t\t\t<i class="u-icn u-icn-warm"></i>\n\t\t{/if}\n\t\t${msg.title|escape}\n\t</li>\n{/list}\n</textarea>\n');
I$(13, function(t, e, i, n, r, a, s, o, l, c, u) {
    var d = {};
    d._$$Message = t._$klass();
    var h = d._$$Message._$extend(r._$$Abstract),
        f = a._$parseUITemplate(u),
        p = f["mt"],
        _ = f["mjt"];
    h.__initXGui = function() {
        return function() {
            this.__seed_html = p
        }
    }();
    h.__initNode = function() {
        this.__super();
        this.eMsgNum = e._$getByClassName(this.__body, "j-message-num")[0];
        this.eMsgNumParent = this.eMsgNum.parentNode;
        this.eMsgBox = e._$getByClassName(this.__body, "j-message-box")[0]
    };
    h.__reset = function(t) {
        this.parent = t.parent;
        this.__destroy();
        this.__super(t);
        this.msgCache = l._$$Message._$allocate({
            ongetMessage: this.cbGetMessage._$bind(this),
            onDone: this.cbDone._$bind(this)
        });
        this.msgCache._$message();
        this.__doInitDomEvent([
            [this.eMsgBox, "click", this.onMsgClick._$bind(this)],
            [e._$get("j-message"), "click", this.switch._$bind(this)],
            [document, "click", this.docClick._$bind(this)]
        ])
    };
    h.switch = function(t) {
        i._$stop(t);
        var n = t.target;
        if(!e._$hasClassName(n, "j-message")) {
            var r = e._$get("j-message-contact");
            if(e._$hasClassName(r, "cthid")) e._$replaceClassName(r, "cthid", "ctshow");
            else e._$replaceClassName(r, "ctshow", "cthid")
        }
    };
    h.docClick = function(t) {
        var i = e._$get("j-message-contact");
        if(e._$hasClassName(i, "ctshow")) e._$replaceClassName(i, "ctshow", "cthid")
    };
    h.cbGetMessage = function(t) {
        var e = t && t.code,
            i = t && t.result;
        if(200 === e) {
            var n = i.total || 0;
            this.parent;
            s._$render(this.eMsgBox, _, i);
            this.eTotal = document.querySelector(".j-total");
            this.setEllipsis();
            this.setMsgStatus(n)
        }
    };
    h.cbDone = function(t) {
        var i = t && t.code;
        if(200 === i) {
            e._$addClassName(this.nodeLi, "has-read");
            var n = Number(this.eMsgNum.innerHTML) - 1;
            this.setMsgStatus(n)
        }
    };
    h.setEllipsis = function() {
        var t = document.querySelectorAll(".j-message-box li");
        [].forEach.call(t, function(t) {
            if(t.scrollHeight > t.clientHeight) e._$addClassName(t, "ellipsis")
        })
    };
    h.setMsgStatus = function(t) {
        if(t > 0) {
            e._$delClassName(this.eMsgNumParent, "z-hide");
            var i = "";
            if(t < 100) {
                i = t;
                e._$delClassName(this.eMsgNum, "z-over-99")
            } else {
                i = "99+";
                e._$addClassName(this.eMsgNum, "z-over-99")
            }
            this.eMsgNum.innerHTML = i;
            this.eTotal.innerHTML = t
        } else {
            this.eTotal.innerHTML = t;
            e._$addClassName(this.eMsgNumParent, "z-hide")
        }
    };
    h.onMsgClick = function(t) {
        var i, n = t.target;
        if("LI" == n.nodeName.toUpperCase()) i = n;
        else i = n.parentNode;
        this.nodeLi = i;
        var r = e._$dataset(i, "type"),
            a = e._$dataset(i, "id");
        switch(Number(r)) {
            case 0:
                var s = e._$dataset(i, "pid");
                window.location.href = "/main/?pid=" + s + "#/m/permission/user/?msgid=" + a;
                break;
            case 1:
                window.location.href = "/project/#/project/update?msgid=" + a;
                break;
            case 2:
                if(e._$hasClassName(i, "has-read")) return;
                var o = e._$dataset(i, "status");
                if(0 === Number(o)) {
                    var l = {
                        messageId: a
                    };
                    this.msgCache._$done(l)
                }
        }
    };
    h.__destroy = function() {
        if(this.parent) this.parent.innerHTML = "";
        this.__super()
    };
    return d
}, 1, 3, 6, 4, 142, 14, 15, 135, 8, 12, 147);
I$(152, '<form class="m-form m-form-1 j-form">\n  <div class="formrow">\n    <label>项目名称：</label>\n    <div class="formcnt">\n      <span class="u-txtwrap">\n        <input name="projectName" type="text" class="u-txt" autocomplete="off">\n      </span>\n    </div>\n  </div>\n  <div class="formrow">\n    <label>申请原因：</label>\n    <div class="formcnt">\n      <span class="u-txtwrap">\n        <textarea class="u-txt u-txt-area" name="description" rows="5" /></textarea>\n      </span>\n    </div>\n  </div>\n</form>\n');
I$(16, function(t, e, i, n, r, a, s, o, l, c, u, d) {
    var h = {};
    l = window.Validator;
    s = window.bigvizValidateRule.permissionRules;
    h._$$ApplyPermission = t._$klass();
    var f = h._$$ApplyPermission._$extend(u._$$Popup);
    f.__initXGui = function() {
        return function() {
            this.__super()
        }
    }();
    f.__initNode = function() {
        this.__super();
        this.__flag = e._$getByClassName(this.__body, "j-flag")[0]
    };
    f.__reset = function(t) {
        this.__super(t);
        t.data;
        this.__submit = t.onSubmit;
        this.__flag.innerHTML = d;
        this.__form = this.__body.getElementsByTagName("form")[0];
        this.submit = !1;
        this.__doInitDomEvent([
            [this.__get("projectName"), "blur", this.__onBlurName._$bind(this)],
            [this.__get("projectName"), "keydown", this.__enterClick._$bind(this)],
            [this.__get("projectName"), "focus", this.__hideError._$bind(this, "projectName")],
            [this.__get("description"), "blur", this.__validate._$bind(this, "description")],
            [this.__get("description"), "focus", this.__hideError._$bind(this, "description")]
        ]);
        this.__cacheMessage = o._$$Message._$allocate();
        this.__cacheMessage._$addEvent("checkProject", this.__cbCheckProject._$bind(this));
        if(s) this.__validator = new l(s)
    };
    f.__enterClick = function(t) {
        if(13 == t.keyCode) i._$stop(t)
    };
    f.__onSubmit = function() {
        i._$stopDefault(event);
        var t = this.__getValue(["projectName", "description"]),
            e = this.__keyCheckValidity(t);
        if(e.success) {
            this.submit = !0;
            this.__cacheMessage._$checkProject({
                projectName: this.__getValue("projectName")
            })
        } else {
            var n = e.result;
            for(var r in n)
                if(n.hasOwnProperty(r)) this.__showError(r, n[r].message)
        }
    };
    f.__keyCheckValidity = function(t) {
        var e, i;
        for(e in t) {
            i = this.__checkValidity(e, t[e]);
            if(!i.success) return i
        }
        return {
            success: !0
        }
    };
    f.__onBlurName = function() {
        var t = this.__validate("projectName");
        if(t) this.__cacheMessage._$checkProject({
            projectName: this.__getValue("projectName")
        })
    };
    f.__cbCheckProject = function(t) {
        if(200 == t.code) {
            if(this.submit) {
                var t = this.__getValue(["projectName", "description"]);
                this.__submit({
                    type: 0,
                    data: t
                });
                this._$close()
            }
        } else if(700 == t.code) {
            this.__showError("projectName", t.message || "申请出错");
            return
        } else {
            c._$message(t.message);
            return
        }
        this.submit = !1
    };
    return h
}, 1, 3, 6, 4, 14, 15, 116, 8, 76, 7, 140, 152);
I$(153, '\ufeff<form class="u-search" onsubmit="return false;">\n\t<label for="keywords"><i class="u-icn u-icn-search"></i></label>\n\t<input class="j-flag-1" id="keywords" placeholder="输入关键字搜索">\n\t<i class="u-icn u-icn-clear j-flag-1" style="display:none;"></i>\n</form>\n');
I$(17, function(t, e, i, n, r, a, s, o, l) {
    o._$$Search = t._$klass();
    l = o._$$Search._$extend(r._$$Abstract);
    l.__initXGui = function() {
        var t = a._$addNodeTemplate(s);
        return function() {
            this.__seed_html = t
        }
    }();
    l.__initNode = function() {
        this.__super();
        var t = e._$getByClassName(this.__body, "j-flag-1");
        this.__input = t[0];
        this.__clear = t[1];
        i._$addEvent(this.__body, "submit", this.__onSubmit._$bind(this));
        i._$addEvent(this.__clear, "click", this.__onClear._$bind(this));
        i._$addEvent(this.__input, "input", this.__onInput._$bind(this))
    };
    l.__reset = function(t) {
        this.__super(t);
        this.__submit = t.onSubmit;
        this.__input.value = t.value || "";
        var i = t.className || "";
        if("" !== i) e._$addClassName(document.querySelector(".u-search"), i);
        this.__focus();
        this.__setClear()
    };
    l.__setClear = function() {
        if("" != this.__input.value) this.__clear.style.display = "";
        else this.__clear.style.display = "none"
    };
    l.__onClear = function(t) {
        this.__input.value = "";
        this.__setClear();
        this.__doSubmit()
    };
    l.__onInput = function(t) {
        this.__setClear();
        this.__doSubmit()
    };
    l.__focus = function() {
        if("" != this.__input.value) this.__input.focus()
    };
    l.__onSubmit = function(t) {
        this.__doSubmit()
    };
    l.__doSubmit = function() {
        var t = this.__input.value,
            e = {};
        t = t.trim();
        e.value = t;
        this.__submit(e)
    };
    return o
}, 1, 3, 6, 4, 142, 14, 153);
I$(18, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f) {
    function p(e) {
        if(200 == e.code) {
            var i = t._$get("j-help-new");
            if(0 == e.result) t._$delClassName(i, "z-hide");
            else;
        }
    }

    function _(e) {
        var n = e || 0,
            r = t._$get("j-infocot"),
            a = t._$getByClassName(r, "j-infoitem"),
            s = t._$getByClassName(r, "j-tabcontent");
        i._$forEach(s, function(e, i, r) {
            if(n == i) {
                t._$addClassName(a[i], "z-crt");
                e.style.display = ""
            } else {
                t._$delClassName(a[i], "z-crt");
                e.style.display = "none"
            }
        })
    }

    function m(e, i, r) {
        if(e)
            if(i) {
                t._$delClassName(e, "u-icn-onbuffer");
                t._$addClassName(e, "u-icn-offbuffer");
                localStorage.skipCache = !0;
                e.title = "查询最新数据并忽略缓存";
                if(!r) n.message("当前使用最新数据", "ok")
            } else {
                t._$addClassName(e, "u-icn-onbuffer");
                t._$delClassName(e, "u-icn-offbuffer");
                localStorage.skipCache = !1;
                e.title = "优先使用缓存数据";
                if(!r) n.message("当前优先使用缓存数据", "ok")
            }
    }

    function g(i, n, r) {
        var a, s, o = i.target,
            a = e._$getElement(i, function(t) {
                return t.id == r
            });
        if(o.id == n || o.parentNode && o.parentNode.id == n) {
            s = t._$get(r);
            if(t._$hasClassName(s, "cthid")) t._$replaceClassName(s, "cthid", "ctshow");
            else t._$replaceClassName(s, "ctshow", "cthid")
        } else if(!a) {
            s = t._$get(r);
            t._$replaceClassName(s, "ctshow", "cthid")
        }
    }

    function v(i, n, r) {
        var a, s = e._$getElement(i, function(t) {
            return t.id == n
        });
        if(s) {
            a = t._$get(r);
            if(t._$hasClassName(a, "cthid")) t._$replaceClassName(a, "cthid", "ctshow");
            else t._$replaceClassName(a, "ctshow", "cthid")
        } else {
            a = t._$get(r);
            t._$replaceClassName(a, "ctshow", "cthid")
        }
    }

    function y(e) {
        var i = e && e.code;
        e && e.result;
        if(200 === i) {
            c._$$Message._$allocate({
                parent: t._$getByClassName(document, "mail")[0]
            });
            n.message("提交申请成功！", "ok")
        } else if(700 === i) n.message(e.message || "出错");
        else n.message("提交申请失败")
    }

    function b(e) {
        if(!this.projects) {
            var i = document.querySelectorAll("#frame-project li");
            this.projects = Array.prototype.slice.call(i).map(function(t) {
                return {
                    node: t,
                    name: t.getAttribute("title")
                }
            })
        }
        if(!this.isSetH) {
            var n = document.querySelector("#frame-project ul"),
                r = n.offsetHeight;
            n.setAttribute("style", "height:" + r + "px");
            this.isSetH = !0
        }
        var a, s = e.value;
        this.projects.forEach(function(e) {
            a = e.name.toLowerCase().indexOf(s.toLowerCase());
            if(a === -1) t._$addClassName(e.node, "z-hide");
            else t._$delClassName(e.node, "z-hide")
        })
    }
    var x = window.ACCOUNT,
        $ = r._$$Message._$allocate({
            addMessage: y._$bind(this)
        }),
        w = a._$$User._$allocate({
            getVersion: p._$bind(this)
        });
    if(window.ACCOUNT) {
        var k = t._$getByClassName(document, "mail")[0];
        if(k) c._$$Message._$allocate({
            parent: t._$getByClassName(document, "mail")[0]
        });
        w._$getVersion()
    }
    e._$addEvent("j-help", "click", function(t) {
        w._$updateVersion();
        if("online" === window.deployType) window.open("/index/manual/o");
        else if("netease" === window.deployType) window.open("/index/manual/n");
        else if("private" === window.deployType) window.open("/index/manual/p")
    });
    e._$addEvent("j-infotab", "click", function(i) {
        var n = e._$getElement(i, "d:index");
        if(n) {
            var r = t._$dataset(n, "index");
            _(r)
        }
    });
    switch(localStorage.skipCache) {
        case "undefined":
        case "false":
            window.skipCache = !1;
            break;
        case "true":
            window.skipCache = !0
    }
    m(t._$get("j-buffer"), window.skipCache, !0);
    e._$addEvent("j-buffer", "click", function(t) {
        var e = t.target;
        window.skipCache = !window.skipCache;
        m(e, window.skipCache)
    });
    e._$addEvent(document, "click", function(t) {
        g(t, "j-contact", "j-infocot");
        g(t, "j-frame-project", "frame-project");
        v(t, "j-name", "j-menu");
        g(t, "j-user", "j-user-menu")
    }, !1);
    e._$addEvent("j-applyProject", "click", function(t) {
        console.log("do the 申请新建项目");
        if(this.__tmpApply) this.__tmpApply._$recycle();
        this.__tmpApply = o._$$PopupApply._$allocate({
            data: {
                title: "申请新建项目",
                account: x
            },
            onSubmit: function(t) {
                var e = {};
                e.type = 1;
                e.data = t;
                $._$addMessage(e)
            }._$bind(this)
        })
    }, !1);
    var S;
    e._$addEvent("j-applyPermission", "click", function(t) {
        if(S) S._$recycle();
        S = h._$$ApplyPermission._$allocate({
            data: {
                title: "申请项目权限"
            },
            onSubmit: function(t) {
                $._$addMessage(t)
            }._$bind(this)
        })
    }, !1);
    var C = s._$$Project._$allocate();
    e._$addEvent("j-resetPro", "click", function(t) {
        C._$reset({
            id: window.currentProjectId
        }).then(function(t) {
            if(200 === t.code) {
                n.message("重置成功，正在刷新…", "ok");
                setTimeout(function() {
                    window.location.reload()
                }, 2e3)
            }
        }, function(t) {
            n.message(t.message)
        })
    }, !1);
    var T = document.querySelector(".j-prolist-s");
    if(T) f._$$Search._$allocate({
        onSubmit: b._$bind(this),
        className: "u-search-2",
        parent: T
    })
}, 3, 6, 4, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17);
I$(226, '\ufeff<div class="m-window">\n  <div class="wrap">\n      <div class="window">\n        <div class="winhd">\n          <h2 class="wintt">提示框</h2>\n        </div>\n        <div class="winbd j-flag wtxc">\n        \t\t确认删除吗？\n        </div>\n        <div class="winft">\n            <button type="button" class="u-btn u-btn-1 u-btn-s1 j-submit">确定</button>\n            <button type="button" class="u-btn u-btn-2 u-btn-s1 j-cancel">取消</button>\n        </div>\n        <span class="wincls u-icn u-icn-close j-close"></span>\n      </div>\n    </div>\n</div>  \n');
I$(54, function(t, e, i, n, r, a, s, o, l, c) {
    var u;
    l._$$Confirm = t._$klass();
    c = l._$$Confirm._$extend(r._$$Abstract);
    c.__initXGui = function() {
        var t = a._$addNodeTemplate(o);
        return function() {
            this.__seed_html = t
        }
    }();
    c.__initNode = function() {
        this.__super();
        u = e._$getByClassName(this.__body, "j-flag");
        i._$addEvent(this.__body, "click", this.__onBodyClick._$bind(this))
    };
    c.__onBodyClick = function(t) {
        i._$stop(t);
        var e = i._$getElement(t, "c:j-submit"),
            n = i._$getElement(t, "c:j-close"),
            r = i._$getElement(t, "c:j-cancel");
        if(!e)
            if(!n && !r);
            else this._$close();
        else this.__onSubmit()
    };
    c.__reset = function(t) {
        t.parent = document.body;
        this.__super(t);
        this.__content = t.content;
        this.__submit = t.onSubmit;
        this.__closeBySubmit = "undefined" == typeof t.closeBySubmit ? !0 : t.closeBySubmit;
        this.__setContent()
    };
    c.__onSubmit = function() {
        this.__submit();
        if(this.__closeBySubmit) this._$close()
    };
    c.__setContent = function() {
        if(this.__content) u[0].innerHTML = n._$escape(this.__content)
    };
    c._$close = function() {
        this._$recycle()
    };
    return l
}, 1, 3, 6, 4, 142, 14, 7, 226);
I$(63, function(t, e, i, n, r, a, s) {
    function o(t, e, i) {
        return function(n) {
            i._$dispatchEvent(t, n);
            e(n)
        }
    }
    a._$$DataModelCache = e._$klass();
    s = a._$$DataModelCache._$extend(r._$$Cache);
    s.__doLoadList = function(t) {
        var e = t.onload,
            i = t.data || {};
        delete t.data.result;
        n._$request("/api/dataModels/", {
            type: "json",
            data: i,
            onload: function(i) {
                t.data.result = i.result.list;
                e(200 == i.code ? i.result : null)
            }
        })
    };
    s._$getConnectList = function(t) {
        n._$request("/api/dataConnections/", {
            type: "json",
            method: "get",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "ongetconnectlist"),
            onerror: this._$dispatchEvent._$bind(this, "ongetconnectlist")
        })
    };
    s.__doDeleteItem = function(e) {
        var i = e.onload,
            r = {
                    id: e.data.id
                } || {};
        n._$request("/api/dataModel/{id}/", {
            method: "delete",
            param: r,
            onload: function(e) {
                if(200 != e.code) t.message(e.message || "删除失败!", "err");
                i(200 == e.code ? e.result : null)
            }
        })
    };
    s._$doAddPermission = function(t) {
        var e = t.data,
            i = this._$dispatchEvent._$bind(this, "doAddPermission");
        n._$request("/api/dataModel/getAddPermission", {
            type: "json",
            method: "get",
            param: e,
            onload: i,
            onerror: i
        })
    };
    s._$getCopyName = function(t) {
        var e = this._$dispatchEvent._$bind(this, "getCopyName");
        n._$request("/api/dataModel/getCopyName", {
            type: "json",
            method: "get",
            param: t,
            onload: e,
            onerror: e
        })
    };
    s._$copy = function(t) {
        var e = this._$dispatchEvent._$bind(this, "copy");
        n._$request("/api/dataModel/copy", {
            type: "json",
            method: "post",
            param: t,
            onload: e,
            onerror: e
        })
    };
    s._$getTables = function(t) {
        t.custom = !0;
        n._$request("/api/tables/", {
            type: "json",
            method: "get",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "ongettables"),
            onerror: this._$dispatchEvent._$bind(this, "ongettables")
        })
    };
    s._$getConfig = function(t) {
        var e = this;
        return new Promise(function(i, r) {
            n._$request("/api/dataModel/" + t, {
                type: "json",
                method: "get",
                onload: o("ongetconfig", i, e),
                onerror: o("ongetconfig", r, e)
            })
        })
    };
    s._$getDataBases = function(t) {
        n._$request("/api/databases/", {
            type: "json",
            method: "get",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "ongetdatabases"),
            onerror: this._$dispatchEvent._$bind(this, "ongetdatabases")
        })
    };
    s._$getTablesJoin = function(t, e) {
        t.dataConnectionId = e;
        n._$request("/api/table/join", {
            type: "json",
            method: "post",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "ongettablesjoin"),
            onerror: this._$dispatchEvent._$bind(this, "ongettablesjoin")
        })
    };
    s._$getTableSchema = function(t, e) {
        t.dataConnectionId = e;
        if(!t.tableExprId) delete t.tableExprId;
        n._$request("/api/table/meta", {
            type: "json",
            method: "get",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "ongettableschema"),
            onerror: this._$dispatchEvent._$bind(this, "ongettableschema")
        })
    };
    s._$getTableSchema2 = function(t, e) {
        t.dataConnectionId = e;
        if(!t.tableExprId) delete t.tableExprId;
        n._$request("/api/table/meta", {
            type: "json",
            method: "get",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "ongettableschema2"),
            onerror: this._$dispatchEvent._$bind(this, "ongettableschema2")
        })
    };
    s._$getTableDatas = function(t, e) {
        t.dataConnectionId = e;
        n._$request("/api/table/datas", {
            type: "json",
            method: "post",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "ongettabledatas"),
            onerror: this._$dispatchEvent._$bind(this, "ongettabledatas")
        })
    };
    s._$getDimensionMembers = function(t, e) {
        if(e) return new Promise(function(e, i) {
            request = n._$request("/api/table/getDimensionMembers", {
                type: "json",
                method: "POST",
                data: t,
                onload: e,
                onerror: i
            })
        });
        n._$request("/api/table/getDimensionMembers", {
            type: "json",
            method: "post",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "ongetdimensionmembers"),
            onerror: this._$dispatchEvent._$bind(this, "ongetdimensionmembers")
        })
    };
    s._$getMeasureRange = function(t, e) {
        if(e) return new Promise(function(e, i) {
            request = n._$request("/api/table/getMeasureRange", {
                type: "json",
                method: "POST",
                data: t,
                onload: e,
                onerror: i
            })
        });
        n._$request("/api/table/getMeasureRange", {
            type: "json",
            method: "post",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "ongetmeasurerange"),
            onerror: this._$dispatchEvent._$bind(this, "ongetmeasurerange")
        })
    };
    s._$getDataBase = function(t) {
        n._$request("/api/databases/", {
            type: "json",
            method: "get",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "ongetdatabase"),
            onerror: this._$dispatchEvent._$bind(this, "ongetdatabase")
        })
    };
    s._$getDataBaseWithId = function(t) {
        var e = t.otherData;
        delete t.otherData;
        n._$request("/api/databases/", {
            type: "json",
            method: "get",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "ongetdatabase", e),
            onerror: this._$dispatchEvent._$bind(this, "ongetdatabase", e)
        })
    };
    s._$create = function(t) {
        n._$request("/api/dataModel/", {
            type: "json",
            method: "post",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "oncreate"),
            onerror: this._$dispatchEvent._$bind(this, "oncreate")
        })
    };
    s._$submit = function(t, e) {
        n._$request("/api/dataModel/" + e, {
            type: "json",
            method: "put",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "onsubmit"),
            onerror: this._$dispatchEvent._$bind(this, "onsubmit")
        })
    };
    s._$getWideTableMeta = function(t) {
        return new Promise(function(e, i) {
            n._$request("/api/wideTable/meta", {
                type: "json",
                method: "POST",
                data: t,
                onload: e,
                onerror: i
            })
        })
    };
    s._$getWideTableData = function(t) {
        t.limit = 50;
        return new Promise(function(e, i) {
            n._$request("/api/wideTable/datas", {
                type: "json",
                method: "POST",
                data: t,
                onload: e,
                onerror: i
            })
        })
    };
    s._$createSql = function(t) {
        if(t.id) {
            var e = "/api/table/" + t.id + "/",
                i = "put";
            delete t.id
        } else var e = "/api/table/",
            i = "post";
        n._$request(e, {
            type: "json",
            method: i,
            data: t,
            onload: this._$dispatchEvent._$bind(this, "oncreatesql"),
            onerror: this._$dispatchEvent._$bind(this, "oncreatesql")
        })
    };
    s._$delSql = function(t) {
        n._$request("/api/table/" + t + "/", {
            type: "json",
            method: "DELETE",
            onload: this._$dispatchEvent._$bind(this, "ondelsql"),
            onerror: this._$dispatchEvent._$bind(this, "ondelsql")
        })
    };
    s._$checkExist = function(t) {
        var e = this._$dispatchEvent._$bind(this, "checkExist");
        n._$request("/api/dataModel/checkExist", {
            type: "json",
            method: "post",
            param: t,
            onload: e,
            onerror: e
        })
    };
    s._$getGeoMapping = function(t) {
        var e, i = new Promise(function(i, r) {
            e = n._$request("/api/geo/mapping", {
                type: "json",
                method: "POST",
                data: t,
                onload: i,
                onerror: r
            })
        });
        i.request = e;
        return i
    };
    s._$getGeoList = function(t) {
        return new Promise(function(e, i) {
            n._$request("/api/geo/list", {
                type: "json",
                method: "POST",
                data: t,
                onload: e,
                onerror: i
            })
        })
    };
    s._$getGeoErrorCount = function(t) {
        var e, i = new Promise(function(i, r) {
            e = n._$request("/api/geo/errorCount", {
                type: "json",
                method: "POST",
                data: t,
                onload: i,
                onerror: r
            })
        });
        i.request = e;
        return i
    };
    s._$checkTables = function(t) {
        n._$request("/api/dataModel/checkTables", {
            type: "json",
            method: "post",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "onchecktables"),
            onerror: this._$dispatchEvent._$bind(this, "onchecktables")
        })
    };
    s._$getFusionId = function(t) {
        var e = {};
        n._$request("/api/dataConnection/fusiontmp?dataModelId=" + t, {
            type: "json",
            method: "get",
            data: e,
            onload: this._$dispatchEvent._$bind(this, "ongetfusionid"),
            onerror: this._$dispatchEvent._$bind(this, "ongetfusionid")
        })
    };
    s._$changeFusion = function(t, e) {
        n._$request("/api/dataConnection/changeFusion", {
            type: "json",
            method: "post",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "onchangefusion", e),
            onerror: this._$dispatchEvent._$bind(this, "onchangefusion", e)
        })
    };
    s._$getFusionState = function(t, e) {
        n._$request("/api/dataConnection/fusionState?dataConnectionId=" + t, {
            type: "json",
            method: "get",
            data: {},
            onload: this._$dispatchEvent._$bind(this, "ongetfusionstate", t),
            onerror: this._$dispatchEvent._$bind(this, "ongetfusionstate", t)
        })
    };
    s._$extractData = function(t) {
        n._$request("/api/dataConnection/fusionSync", {
            type: "json",
            method: "post",
            data: {
                dataModelId: t
            },
            onload: this._$dispatchEvent._$bind(this, "onextractdata"),
            onerror: this._$dispatchEvent._$bind(this, "onextractdata")
        })
    };
    s._$setFusionTimer = function(t) {
        n._$request("/api/fusionTask/", {
            type: "json",
            method: "post",
            data: t,
            onload: this._$dispatchEvent._$bind(this, "onsetfusiontimer"),
            onerror: this._$dispatchEvent._$bind(this, "onsetfusiontimer")
        })
    };
    s._$getFusionTimer = function(t) {
        n._$request("/api/fusionTask/getByDataModelId?dataModelId=" + t, {
            type: "json",
            method: "get",
            data: {},
            onload: this._$dispatchEvent._$bind(this, "ongetfusiontimer"),
            onerror: this._$dispatchEvent._$bind(this, "ongetfusiontimer")
        })
    };
    return a
}, 7, 1, 4, 137, 138);
I$(257, function(t, e, i, n) {
    var r = {};
    n = window.Validator;
    r.Error = {
        events: {
            $config: function() {
                this.__rules = this.data.rules;
                this.__error = {};
                if(this.__rules) this.__validator = new n(this.__rules)
            }
        },
        hasError: function() {
            for(var t in this.__error)
                if(this.__error.hasOwnProperty(t) && this.__error[t]) return !0;
            return !1
        },
        getValue: function(t) {
            return this.data && this.data[t]
        },
        getNode: function(t) {
            return this.$refs && this.$refs[t]
        },
        validate: function(t, e) {
            var i = this.__checkValidity(t, e);
            if(i && !i.success) {
                var n = i.result;
                this.showError(t, this.getNode(t), n[t].message);
                return !1
            }
            return !0
        },
        __checkValidity: function(t, i) {
            if(e._$isString(t)) i = i || this.getValue(t);
            return this.__validator && this.__validator.validate(t, i)
        },
        __keyCheckValidity: function(t, e) {
            var i, n = {},
                r = !0;
            for(i in t) {
                if(e && e.length > 0) {
                    var a = e.some(function(t) {
                        return t == i
                    });
                    if(a) continue
                }
                var s = this.__rules.some(function(t) {
                    return t.field == i
                });
                if(s) {
                    var o = this.__checkValidity(i, t[i]);
                    if(!o.success) {
                        n[i] = o.result[i];
                        r = !1
                    }
                } else;
            }
            return r ? {
                success: !0
            } : {
                success: !1,
                result: n
            }
        },
        keyCheckValidity: function(t, e) {
            var i = this.__keyCheckValidity(t, e);
            if(!i.success) {
                var n = i.result;
                for(var r in n)
                    if(n.hasOwnProperty(r)) this.showError(r, this.getNode(r), n[r].message)
            }
        },
        showError: function(t, e, n) {
            if(this.__error[t]) this.hideError(t);
            this.__error[t] = i._$$Error._$allocate({
                parent: e,
                message: n
            })
        },
        hideError: function(t) {
            var e = this.__error[t];
            if(e) {
                e._$recycle();
                delete this.__error[t]
            }
        }
    };
    r.CacheError = {
        getValue: function(t) {
            return this.data && this.data.cacheTask && this.data.cacheTask[t]
        }
    };
    r.RegularMailError = {
        getValue: function(t) {
            return this.data && this.data.regularMail && this.data.regularMail[t]
        }
    };
    r.DataConnectionError = {
        getValue: function(t) {
            return this.data && this.data.dataConnection && this.data.dataConnection[t]
        }
    };
    r.ErrorPop = {
        events: {
            $config: function() {
                this.__error = {}
            }
        },
        hasError: function() {
            for(var t in this.__error)
                if(this.__error.hasOwnProperty(t) && this.__error[t]) return !0;
            return !1
        },
        showError: function(t, e, n) {
            if(this.__error[t]) this.hideError(t);
            this.__error[t] = i._$$Error._$allocate({
                parent: e,
                message: n
            })
        },
        hideError: function(t) {
            var e = this.__error[t];
            if(e) {
                e._$recycle();
                delete this.__error[t]
            }
        }
    };
    return r
}, 7, 4, 135, 76);
I$(588, function(t, e, i, n, r, a, s) {
    var o;
    n._$$Item = e._$klass();
    o = n._$$Item._$extend(i._$$Abstract);
    o.__init = function() {
        this.__id = this.__genId();
        this.__super()
    };
    o.__reset = function(t) {
        this.__super(t);
        this.__index = t.index;
        this.__total = t.total;
        this.__range = t.range;
        this._$refresh(t.data)
    };
    o.__destroy = function() {
        this.__super();
        delete this.__data;
        delete this.__index;
        delete this.__total;
        delete this.__range
    };
    o.__doRefresh = a;
    o.__genId = function() {
        var t = +new Date;
        return function() {
            return "itm-" + ++t
        }
    }();
    o._$getId = function() {
        return this.__id
    };
    o._$getData = function() {
        return this.__data
    };
    o._$refresh = function(t) {
        this.__data = t || {};
        this.__doRefresh(this.__data)
    };
    if(!0) t.copy(t.P("nej.ui"), n);
    return n
}, 129, 1, 142);
I$(431, function(t, e, i, n, r, a, s) {
    var o;
    n._$$ListItem = e._$klass();
    o = n._$$ListItem._$extend(i._$$Item);
    o.__reset = function(t) {
        this.__pkey = t.pkey || "id";
        this.__prefix = t.prefix || "";
        this.__super(t)
    };
    o.__onDelete = function(t) {
        this._$dispatchEvent("ondelete", {
            ext: t,
            id: this._$getId(),
            data: this._$getData(),
            body: this._$getBody()
        })
    };
    o.__onUpdate = function(t) {
        this._$dispatchEvent("onupdate", {
            ext: t,
            id: this._$getId(),
            data: this._$getData(),
            body: this._$getBody()
        })
    };
    o._$refresh = function(t) {
        this.__super(t);
        var e = this.__data[this.__pkey];
        this.__id = this.__prefix + e || this.__genId()
    };
    if(!0) t.copy(t.P("nej.ui"), n);
    return n
}, 129, 1, 588);
I$(710, ".#<uispace>{font-size:12px;line-height:160%;}\n.#<uispace> a{margin:0 2px;padding:2px 8px;color:#333;border:1px solid #aaa;text-decoration:none;}\n.#<uispace> .js-disabled{cursor:default;}\n.#<uispace> .js-selected{cursor:default;background-color:#bbb;}");
I$(589, function(t, e, i, n, r, a, s, o, l, c, u) {
    var d;
    o._$$AbstractPager = e._$klass();
    d = o._$$AbstractPager._$extend(r._$$Abstract);
    d.__reset = function(t) {
        this.__bopt = n._$merge({}, t);
        this.__popt = n._$merge({}, t);
        delete this.__bopt.onchange;
        this.__popt.onchange = this.__onChange._$bind(this);
        this.__super(t);
        this.__doResetNumber({
            number: t.number,
            label: t.label || l
        })
    };
    d.__destroy = function() {
        if(this.__page) {
            this.__page._$recycle();
            delete this.__page
        }
        this.__super();
        delete this.__bopt;
        delete this.__popt;
        this._$unbind();
        this.__body.innerHTML = "&nbsp;"
    };
    d.__initXGui = function() {
        var t = i._$pushCSSText(s);
        return function() {
            this.__seed_css = t
        }
    }();
    d.__doResetNumber = function(t) {
        var e = t.label;
        if(!t.noprv) {
            this.__popt.pbtn = i._$create("a", "zbtn zprv", this.__body);
            this.__popt.pbtn.innerHTML = e.prev || "上一页"
        }
        for(var n = [], r = 1, a = t.number; r < a; r++) n.push(i._$create("a", "zpgi zpg" + r, this.__body));
        this.__popt.list = n;
        if(!t.nonxt) {
            this.__popt.nbtn = i._$create("a", "zbtn znxt", this.__body);
            this.__popt.nbtn.innerHTML = e.next || "下一页"
        }
    };
    d.__onChange = function(t) {
        if(!this.__flag) {
            var e = t.index,
                i = t.total;
            this.__flag = !0;
            this._$updatePage(e, i);
            n._$forEach(this.__binders, function(t) {
                t._$updatePage(e, i)
            });
            this.__flag = !1;
            this._$dispatchEvent("onchange", t)
        }
    };
    d._$bind = function(t) {
        t = i._$get(t);
        if(t) {
            var e = n._$merge({}, this.__bopt);
            e.parent = t;
            e.index = this._$getIndex();
            e.total = this._$getTotal();
            var r = this.constructor._$allocate(e);
            r._$setEvent("onchange", this.__popt.onchange);
            if(!this.__binders) this.__binders = [];
            this.__binders.push(r)
        }
    };
    d._$unbind = function() {
        var t = function(t, e, i) {
            t._$recycle();
            i.splice(e, 1)
        };
        return function() {
            n._$reverseEach(this.__binders, t)
        }
    }();
    d._$setIndex = function(t) {
        if(this.__page) this.__page._$setIndex(t)
    };
    d._$getIndex = function() {
        if(!this.__page) return 1;
        else return this.__page._$getIndex()
    };
    d._$getTotal = function() {
        if(!this.__page) return 1;
        else return this.__page._$getTotal()
    };
    d._$updatePage = function(t, e) {
        if(this.__page) this.__page._$updatePage(t, e)
    };
    d._$updateTotal = function(t) {
        if(this.__page) this.__page._$updateTotal(t)
    };
    if(!0) t.copy(t.P("nej.ui"), o);
    return o
}, 129, 1, 3, 4, 142, 15, 710);
I$(711, function(t, e, i, n, r, a, s, o, l, c) {
    var u;
    s._$$PageAbstract = e._$klass();
    u = s._$$PageAbstract._$extend(a._$$EventTarget);
    u.__reset = function(t) {
        this.__super(t);
        this.__pbtn = t.pbtn;
        this.__nbtn = t.nbtn;
        this.__sbtn = t.sbtn;
        this.__ebtn = t.ebtn;
        this.__name = t.event || "click";
        this.__parented = !!t.parented;
        this.__selected = t.selected || "js-selected";
        this.__disabled = t.disabled || "js-disabled";
        this.__doPageListCheck(t.list);
        this.__limit = t.limit || 1 / 0;
        this._$updatePage(t.index || 1, t.total || 1)
    };
    u.__destroy = function() {
        this.__super();
        delete this.__list;
        delete this.__name;
        delete this.__pbtn;
        delete this.__nbtn;
        delete this.__sbtn;
        delete this.__ebtn;
        delete this.__last;
        delete this.__total;
        delete this.__index;
        delete this.__extdata;
        delete this.__selected;
        delete this.__disabled
    };
    u.__getSelectNode = function(t) {
        return !this.__parented ? t : t.parentNode
    };
    u.__doPageListCheck = function() {
        var t = function(t) {
            this.__list.push(t);
            this.__doInitDomEvent([
                [t, this.__name, this.__onClick._$bind2(this, 0)]
            ])
        };
        return function(e) {
            this.__list = [];
            this.__doInitDomEvent([
                [this.__pbtn, "click", this.__onClick._$bind2(this, -1)],
                [this.__nbtn, "click", this.__onClick._$bind2(this, 1)],
                [this.__sbtn, "click", this.__onClick._$bind2(this, -2)],
                [this.__ebtn, "click", this.__onClick._$bind2(this, 2)]
            ]);
            i._$forEach(e, t, this)
        }
    }();
    u.__doSetNodeIndex = function(t, e) {
        var i = this.__getSelectNode(t);
        if(null == e) {
            t.innerText = "";
            n._$setStyle(t, "display", "none");
            n._$delClassName(i, this.__selected)
        } else {
            t.innerText = e;
            n._$setStyle(t, "display", "");
            e == this.__index ? n._$addClassName(i, this.__selected) : n._$delClassName(i, this.__selected)
        }
    };
    u.__doSyncBtnState = function() {
        if(this.__index <= 1) {
            n._$addClassName(this.__pbtn, this.__disabled);
            n._$addClassName(this.__sbtn, this.__disabled)
        } else {
            n._$delClassName(this.__pbtn, this.__disabled);
            n._$delClassName(this.__sbtn, this.__disabled)
        }
        if(this.__index >= this.__total) {
            n._$addClassName(this.__nbtn, this.__disabled);
            n._$addClassName(this.__ebtn, this.__disabled)
        } else {
            n._$delClassName(this.__nbtn, this.__disabled);
            n._$delClassName(this.__ebtn, this.__disabled)
        }
    };
    u.__doRefreshPage = l;
    u.__doChangeIndex = function() {
        this.__doRefreshPage();
        this.__doSyncBtnState();
        this._$dispatchEvent("onchange", {
            last: this.__last,
            total: this.__total,
            index: this.__index,
            ext: this.__extdata
        })
    };
    u.__doSaveIndex = function(t) {
        t = parseInt(t);
        if(isNaN(t) || null == this.__total) return !1;
        t = Math.max(1, Math.min(t, this.__total));
        this.__last = this.__index;
        this.__index = t;
        return !0
    };
    u.__doSaveTotal = function(t) {
        t = parseInt(t);
        if(isNaN(t) || t < 1) return !1;
        this.__total = Math.min(t, this.__limit);
        return !0
    };
    u.__onClick = function(t, e) {
        r._$stopDefault(t);
        var i = r._$getElement(t),
            a = n._$hasClassName(this.__getSelectNode(i), this.__selected),
            s = n._$hasClassName(i, this.__disabled);
        if(i && !a && !s) {
            var o = i.innerText;
            switch(e) {
                case 1:
                case -1:
                    o = this.__index + e;
                    break;
                case 2:
                    o = this.__total;
                    break;
                case -2:
                    o = 1
            }
            this._$setIndex(o)
        }
    };
    u._$getIndex = function() {
        return this.__index
    };
    u._$setIndex = function(t) {
        var e = this.__index;
        this.__doSaveIndex(t);
        if(e != this.__index) this.__doChangeIndex()
    };
    u._$getTotal = function() {
        return this.__total
    };
    u._$setTotal = function(t) {
        if(this.__doSaveTotal(t) && null != this.__index) {
            this.__index = 1;
            this.__doChangeIndex()
        }
    };
    u._$updateTotal = function(t) {
        if(this.__doSaveTotal(t)) {
            this.__doRefreshPage();
            this.__doSyncBtnState()
        }
    };
    u._$updatePage = function(t, e) {
        if(this.__doSaveTotal(e) && this.__doSaveIndex(t)) this.__doChangeIndex()
    };
    if(!0) t.P("nej.ut")._$$AbstractPage = s._$$PageAbstract;
    return s
}, 129, 1, 4, 3, 6, 19);
I$(590, function(t, e, i, n, r, a, s, o, l) {
    var c;
    a._$$PageFragment = e._$klass();
    c = a._$$PageFragment._$extend(r._$$PageAbstract);
    c.__init = function() {
        this.__ndot = [];
        this.__super()
    };
    c.__destroy = function() {
        this.__super();
        this.__doRecycleDotNode()
    };
    c.__doRecycleDotNode = function() {
        var t = function(t, e, n) {
            i._$remove(t);
            n.splice(e, 1)
        };
        return function() {
            n._$reverseEach(this.__ndot, t)
        }
    }();
    c.__doRefreshPage = function() {
        this.__extdata = {
            last: !1,
            first: !1,
            list: this.__list
        };
        this.__doRecycleDotNode();
        this.__doSetNodeIndex(this.__list[0], 1);
        var t = 1,
            e = this.__list.length;
        if(!(this.__total < e)) {
            if(this.__index > 1) {
                var n = Math.floor((e - 2) / 2),
                    r = this.__total - e + 2,
                    a = Math.max(2, this.__index - n);
                if(this.__total >= e) a = Math.min(a, r);
                if(a > 2) {
                    var s = i._$create("span", "zdot");
                    this.__ndot.push(s);
                    s.innerText = "...";
                    this.__list[0].insertAdjacentElement("afterEnd", s);
                    this.__extdata.first = !0
                }
                for(var o;; t++) {
                    o = a + t - 1;
                    if(o > this.__index) break;
                    this.__doSetNodeIndex(this.__list[t], o)
                }
            }
            if(this.__index < this.__total) {
                for(var o, a = this.__index + 1, l = 0, c = e - 2;; l++, t++) {
                    o = a + l;
                    if(t > c || o > this.__total) break;
                    this.__doSetNodeIndex(this.__list[t], o)
                }
                if(o < this.__total) {
                    var s = i._$create("span", "zdot");
                    this.__ndot.push(s);
                    s.innerText = "...";
                    this.__list[t].insertAdjacentElement("beforeBegin", s);
                    this.__extdata.last = !0
                }
                if(o <= this.__total) this.__doSetNodeIndex(this.__list[t++], this.__total)
            }
            for(; t < e; t++) this.__doSetNodeIndex(this.__list[t])
        } else
            for(var u; t < e; t++) {
                u = t + 1;
                this.__doSetNodeIndex(this.__list[t], u > this.__total ? null : u)
            }
    };
    if(!0) t.P("nej.ut")._$$Page = a._$$PageFragment;
    return a
}, 129, 1, 3, 4, 711);
I$(432, function(t, e, i, n, r, a, s, o, l) {
    var c;
    a._$$Pager = e._$klass();
    c = a._$$Pager._$extend(n._$$AbstractPager);
    c.__reset = function(t) {
        t.number = parseInt(t.number) || 9;
        this.__super(t);
        this.__page = r._$$PageFragment._$allocate(this.__popt)
    };
    c.__onChange = function(t) {
        if(this.__bopt.noend) {
            var e = t.ext || s,
                n = e.list || l;
            if(e.last) i._$setStyle(n[n.length - 1], "display", "none")
        }
        this.__super(t)
    };
    if(!0) t.copy(t.P("nej.ui"), a);
    return a
}, 129, 1, 3, 589, 590);
I$(237, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f, p) {
    var _;
    d._$$ListModule = e._$klass();
    _ = d._$$ListModule._$extend(o._$$EventTarget);
    _.__reset = function(t) {
        this.__ropt = {};
        this.__super(t);
        this.__lbox = r._$get(t.parent);
        this.__iopt = {
            parent: this.__lbox
        };
        this.__limit = parseInt(t.limit) || 10;
        this.__first = parseInt(t.first) || this.__limit;
        this.__doResetTemplate(t.item);
        this.__doResetCache(t.cache || h);
        this.__doResetPager(t.pager || h);
        this._$refresh()
    };
    _.__destroy = function() {
        this._$dispatchEvent("onbeforerecycle");
        this.__doClearListBox();
        this.__super();
        if(this.__ropt.clear) this.__cache._$clearListInCache(this.__ropt.key);
        this.__cache._$recycle();
        if(this.__pager) {
            this.__pager._$recycle();
            delete this.__pager
        }
        delete this.__pkls;
        delete this.__popt;
        delete this.__pulling;
        delete this.__cache;
        delete this.__lbox;
        delete this.__ikls;
        delete this.__iopt;
        delete this.__iext;
        delete this.__ropt
    };
    _.__getItemBodyId = function(t) {
        return this.__getItemId(t) + l._$seed()
    };
    _.__getItemId = function(t) {
        var e = (this.__iopt || h).prefix || "";
        return e + t
    };
    _.__getPageInfo = function(t, e, i, n) {
        var r = {
            index: 1,
            total: 1
        };
        if(e >= t) r.index = Math.floor((e - t) / i) + 2;
        if(n > t) r.total = Math.ceil((n - t) / i) + 1;
        return r
    };
    _.__doResetJSTTemplate = function(t) {
        delete this.__ikls;
        this.__ikey = t;
        this.__doInitDomEvent([
            [this.__lbox, "click", this.__onCheckAction._$bind(this)]
        ])
    };
    _.__doResetTemplate = function(t) {
        if(!i._$isString(t)) {
            i._$merge(this.__iopt, t);
            this.__iext = i._$merge({}, t, function(t) {
                return !i._$isFunction(t)
            });
            var e = this.__iopt.klass;
            delete this.__iopt.klass;
            if(!i._$isString(e)) {
                delete this.__ikey;
                this.__ikls = e;
                this.__iopt.ondelete = this._$dispatchEvent._$bind(this, "ondelete");
                this.__iopt.oncopy = this._$dispatchEvent._$bind(this, "oncopy");
                this.__iopt.onupdate = this._$dispatchEvent._$bind(this, "onupdate");
            } else this.__doResetJSTTemplate(e)
        } else this.__doResetJSTTemplate(t)
    };
    _.__doResetCache = function(t) {
        var e = t.klass,
            n = i._$merge({}, t);
        this.__ropt.key = n.lkey;
        this.__ropt.ext = n.ext;
        this.__ropt.data = n.data || {};
        this.__ropt.clear = !!n.clear;
        this.__iopt.pkey = n.key || "id";
        n.onerror = this._$dispatchEvent._$bind(this, "onerror");
        n.onlistload = this.__cbListLoad._$bind(this);
        n.onpullrefresh = this.__cbPullRefresh._$bind(this);
        if(e && "onlistchange" in e) this.__doInitDomEvent([
            [e, "listchange", this.__cbListChange._$bind(this)]
        ]);
        else {
            n.onitemadd = this.__cbItemAdd._$bind(this);
            n.onitemdelete = this.__cbItemDelete._$bind(this);
            n.onitemupdate = this.__cbItemUpdate._$bind(this)
        }
        this.__cache = (e || u._$$CacheList)._$allocate(n);
        if(null != t.total) this.__cache._$setTotal(this.__ropt.key, t.total);
        if(t.list) this.__cache._$setListInCache(this.__ropt.key, t.list)
    };
    _.__doResetPager = function(t) {
        this.__pkls = t.klass || s._$$Pager;
        this.__popt = i._$merge({}, t);
        if(i._$isArray(t.parent)) {
            this.__popt.parent = t.parent[0];
            this.__pbid = t.parent.slice(1);
            if(!this.__pbid || !this.__pbid.length) delete this.__pbid
        }
        delete this.__popt.klass
    };
    _.__doClearListBox = function() {
        var t = /^(?:table|tr|tbody|ul|ol|select)$/i;
        return function() {
            this._$dispatchEvent("onbeforelistclear", {
                parent: this.__lbox
            });
            if(this.__items && this.__items.length > 0) {
                this.__items = this.__ikls._$recycle(this.__items);
                delete this.__items
            }
            if(t.test(this.__lbox.tagName)) r._$clearChildren(this.__lbox);
            else this.__lbox.innerHTML = ""
        }
    }();
    _.__doSwitchPagerShow = function(t) {
        if(!this.__popt.fixed) {
            r._$setStyle(this.__popt.parent, "display", t);
            i._$forEach(this.__pbid, function(e) {
                r._$setStyle(e, "display", t)
            }, this)
        }
    };
    _.__doRefreshByPager = function() {
        var t = this.__popt.index || 1;
        delete this.__popt.index;
        if(this.__pager) t = this.__pager._$getIndex();
        this.__doChangePage({
            last: t,
            index: t
        })
    };
    _.__doChangePage = function(t) {
        this._$dispatchEvent("onpagechange", t)
    };
    _.__doChangeOffset = function(t) {
        this.__ropt.offset = t;
        this.__doLoadList()
    };
    _.__doGenRequestOpt = function(t) {
        return t
    };
    _.__doLoadList = function() {
        this.__doBeforeListLoad();
        var t = this.__ropt.data;
        t.offset = this.__ropt.offset;
        var e = 0 == t.offset;
        t.total = e;
        this.__ropt.limit = e ? this.__first : this.__limit;
        t.limit = this.__ropt.limit;
        this.__cache._$getList(this.__doGenRequestOpt(i._$merge({}, this.__ropt)))
    };
    _.__cbListLoad = function(t) {
        if(t.key == this.__ropt.key && t.offset == this.__ropt.offset) {
            this.__doBeforeListShow();
            var e = this.__cache._$getListInCache(t.key);
            if(!e || !e.length) {
                if(!this._$cache()._$isLoaded(t.key)) this._$dispatchEvent("onlistloaderror", {
                    parent: this.__lbox
                });
                else this.__doShowEmpty();
                return !0
            }
            var i = t.limit,
                n = t.offset;
            if(!this.__cache._$isFragmentFilled(t.key, n, i)) {
                this._$dispatchEvent("onlistloaderror", {
                    parent: this.__lbox
                });
                return !0
            }
            if(!this.__doBeforeListRender(e, n, i)) {
                this._$dispatchEvent("onbeforelistrender", {
                    list: e,
                    limit: i,
                    offset: n,
                    parent: this.__lbox,
                    total: this.__cache._$getTotal(t.key)
                });
                if(this.__ikey) {
                    this.__iopt.xlist = e;
                    this.__iopt.beg = n;
                    this.__iopt.end = Math.min(e.length, n + i) - 1;
                    this.__iopt.act = "list";
                    var r = l._$get(this.__ikey, this.__iopt, this.__iext);
                    this.__doShowListByJST(r)
                } else {
                    this.__iopt.limit = i;
                    this.__iopt.offset = n;
                    var a = c._$getItemTemplate(e, this.__ikls, this.__iopt);
                    this.__doShowListByItem(a)
                }
                this._$dispatchEvent("onafterlistrender", {
                    list: e,
                    limit: i,
                    offset: n,
                    parent: this.__lbox,
                    total: this.__cache._$getTotal(t.key)
                })
            }
        }
    };
    _.__cbPullRefresh = function(t) {
        if(this.__pulling) {
            delete this.__pulling;
            this.__doBeforeListShow("onafterpullrefresh");
            this._$refresh()
        }
    };
    _.__doSyncPager = function(t, e) {
        if(this.__pager) {
            if((this.__popt || h).limit > 0) e = Math.min(e, this.__popt.limit);
            var n = this.__pager._$getIndex(),
                r = this.__pager._$getTotal();
            if(n > e || e != r) {
                this.__pager._$recycle();
                delete this.__pager;
                this.__doChangePage({
                    last: n,
                    index: Math.min(t, e)
                });
                return !0
            }
        } else {
            this.__popt.index = t;
            this.__popt.total = e;
            this.__pager = this.__pkls._$allocate(this.__popt);
            this.__pager._$setEvent("onchange", this.__doChangePage._$bind(this));
            i._$forEach(this.__pbid, function(t) {
                this.__pager._$bind(t)
            }, this)
        }
    };
    _.__doFormatData = function() {
        var t = +new Date;
        return function(e) {
            var i = e[this.__iopt.pkey];
            if(!i) {
                e["dirty-data"] = !0;
                e[this.__iopt.pkey] = "dirty-" + t++
            }
            return e
        }
    }();
    _.__doSplitDirty = function(t) {
        var e = t[this.__iopt.pkey];
        if(t["dirty-data"]) {
            delete t["dirty-data"];
            delete t[this.__iopt.pkey]
        }
        return e
    };
    _.__doInsertOneItem = function() {
        var t = function(t, e) {
            this.__lbox.insertAdjacentElement(t, e)
        };
        return function(e, i) {
            var n = [i];
            if(this.__ikey) {
                this.__iopt.xlist = n;
                this.__iopt.beg = 0;
                this.__iopt.end = 0;
                this.__iopt.act = "add";
                this.__doShowListByJST(l._$get(this.__ikey, this.__iopt, this.__iext), e)
            } else {
                this.__iopt.limit = 1;
                this.__iopt.offset = 0;
                this.__iopt.parent = t._$bind(this, e);
                var r = c._$getItemTemplate(n, this.__ikls, this.__iopt);
                this.__iopt.parent = this.__lbox;
                this.__doShowListByItem(r)
            }
        }
    }();
    _.__doBeforeListLoad = f;
    _.__doBeforeListShow = function(t) {
        var e = {
            parent: this.__lbox
        };
        this._$dispatchEvent(t || "onafterlistload", e);
        if(!e.stopped) r._$removeByEC(this.__ntip)
    };
    _.__doBeforeListRender = f;
    _.__doRenderMessage = function(t, e) {
        if(i._$isString(t)) {
            if(!this.__ntip) this.__ntip = r._$create("div");
            this.__ntip.innerHTML = t
        } else this.__ntip = t;
        this.__lbox.insertAdjacentElement(e || "beforeEnd", this.__ntip)
    };
    _.__doShowMessage = function(t, e, i) {
        var n = {
            parent: this.__lbox
        };
        if(t) this._$dispatchEvent(t, n);
        if(!n.stopped) this.__doRenderMessage(n.value || e, i)
    };
    _.__doShowEmpty = f;
    _.__doShowListByJST = f;
    _.__doShowListByItem = f;
    _.__onCheckAction = function() {
        var t = /^(?:delete|update|copy)$/;
        return function(e) {
            var i = n._$getElement(e, "d:action");
            if(i) {
                var a = r._$dataset(i, "action");
                if(t.test(a)) {
                    var s = r._$dataset(i, "id");
                    if(s) {
                        var o = this.__cache._$getItemInCache(s);
                        if(o) {
                            n._$stop(e);
                            this._$dispatchEvent("on" + a, {
                                data: o,
                                id: o[this.__iopt.pkey],
                                body: r._$get(this.__getItemBodyId(s))
                            })
                        }
                    }
                }
            }
        }
    }();
    _.__cbItemAdd = f;
    _.__doDeleteItem = function(t) {
        var e = t.data || {},
            i = {
                data: e,
                key: this.__ropt.key,
                id: e[this.__iopt.pkey]
            };
        this._$dispatchEvent("onbeforedelete", i);
        this.__cache._$deleteItem(i)
    };
    _.__cbItemDelete = f;
    _.__doUpdateItem = function(t) {
        var e = t.data || {},
            i = {
                data: e,
                key: this.__ropt.key
            };
        this._$dispatchEvent("onbeforeupdate", i);
        this.__cache._$updateItem(i)
    };
    _.__cbItemUpdate = function(t) {
        this.__doCheckResult(t, "onafterupdate");
        if(!t.stopped) {
            var e = t.data[this.__iopt.pkey];
            if(this.__items) {
                var n = c._$getItemById(this.__getItemId(e));
                if(n) n._$refresh(t.data)
            } else {
                var a = this._$getItemBody(e);
                if(!a) return;
                var s = this.__cache._$getListInCache(t.key),
                    o = i._$indexOf(s, t.data);
                if(o < 0) return;
                this.__iopt.xlist = s;
                this.__iopt.beg = o;
                this.__iopt.end = o;
                this.__iopt.act = "update";
                var u = l._$get(this.__ikey, this.__iopt, this.__iext);
                a.insertAdjacentHTML("afterEnd", u);
                r._$remove(a)
            }
            this._$dispatchEvent("onafterupdaterender", {
                data: t.data,
                parent: this.__lbox
            })
        }
    };
    _.__doCheckResult = function(t, e) {
        var i = t.data;
        if(!i || null == i[this.__iopt.pkey]) {
            this._$dispatchEvent("onerror", t);
            t.stopped = !0
        }
        if(!t.stopped) this._$dispatchEvent(e, t)
    };
    _.__cbAppendList = f;
    _.__cbUnshiftList = f;
    _.__cbListChange = function(t) {
        if(t.key == this.__ropt.key) switch(t.action) {
            case "add":
                this.__cbItemAdd(t);
                break;
            case "delete":
                this.__cbItemDelete(t);
                break;
            case "update":
                this.__cbItemUpdate(t);
                break;
            case "refresh":
                this._$refresh();
                break;
            case "unshift":
                this.__cbUnshiftList(t.offset, t.limit);
                break;
            case "append":
                this.__cbAppendList(t.offset, t.limit)
        }
    };
    _._$update = function(t) {
        this.__doUpdateItem({
            data: t
        })
    };
    _._$delete = function(t) {
        this.__doDeleteItem({
            data: t
        })
    };
    _._$add = function(t) {
        this.__cache._$addItem({
            data: t,
            key: this.__ropt.key
        })
    };
    _._$cache = function() {
        return this.__cache
    };
    _._$unshift = function(t) {
        this.__doInsertOneItem("afterBegin", this.__doFormatData(t));
        return this.__doSplitDirty(t)
    };
    _._$append = function(t) {
        this.__doInsertOneItem("beforeEnd", this.__doFormatData(t));
        return this.__doSplitDirty(t)
    };
    _._$refresh = function() {
        this.__doClearListBox();
        this.__doRefreshByPager()
    };
    _._$refreshWithClear = function() {
        this.__cache._$clearListInCache(this.__ropt.key);
        this._$refresh()
    };
    _._$pullRefresh = function() {
        if(!this.__pulling) {
            this.__pulling = !0;
            this.__doShowMessage("onbeforepullrefresh", "列表刷新中...", "afterBegin");
            this.__cache._$pullRefresh({
                key: this.__ropt.key,
                data: this.__ropt.data
            })
        }
    };
    _._$getTotal = function() {
        return this.__cache._$getTotal(this.__ropt.key)
    };
    _._$getPager = function() {
        return this.__pager
    };
    _._$items = function() {
        return this.__items
    };
    _._$getItemBody = function(t) {
        if(this.__ikey) return r._$get(this.__getItemBodyId(t));
        else {
            var e = c._$getItemById(this.__getItemId(t));
            if(e) return e._$getBody()
        }
    };
    _._$isLoaded = function() {
        return this.__cache._$isLoaded(this.__ropt.key)
    };
    _._$showMessage = function(t) {
        this.__doClearListBox();
        this.__doShowMessage(null, t)
    };
    if(!0) t.copy(t.P("nej.ut"), d);
    return d
}, 129, 1, 4, 6, 3, 431, 432, 19, 15, 14, 433);
I$(68, function(t, e, i, n, r, a, s, o) {
    var l;
    r._$$ListModulePG = e._$klass();
    l = r._$$ListModulePG._$extend(n._$$ListModule);
    l.__getPageInfo = function(t, e) {
        return this.__super(this.__first, t, this.__limit, e)
    };
    l.__getOffsetByIndex = function(t) {
        var e = 0;
        if(t > 1) e = this.__first + (t - 2) * this.__limit;
        return e
    };
    l.__doChangePage = function(t) {
        this.__super(t);
        if(!t.stopped) this.__doChangeOffset(this.__getOffsetByIndex(t.index))
    };
    l.__doBeforeListLoad = function() {
        this.__doClearListBox();
        this.__doShowMessage("onbeforelistload", "列表加载中...")
    };
    l.__doBeforeListShow = function() {
        this.__super();
        this.__doClearListBox()
    };
    l.__doBeforeListRender = function(t, e, i) {
        var n = this.__getPageInfo(e, t.length);
        if(this.__doSyncPager(n.index, n.total)) return !0;
        this.__doSwitchPagerShow(n.total > 1 ? "" : "none")
    };
    l.__doShowEmpty = function() {
        this.__doShowMessage("onemptylist", "没有列表数据！")
    };
    l.__doRenderMessage = function(t, e) {
        if(e || !i._$isString(t)) this.__super(t, e);
        else this.__lbox.innerHTML = t
    };
    l.__doShowListByJST = function(t) {
        this.__lbox.innerHTML = t
    };
    l.__doShowListByItem = function(t) {
        this.__items = t
    };
    l.__cbItemAdd = function(t) {
        this.__doCheckResult(t, "onafteradd");
        if(!t.stopped) this._$refresh()
    };
    l.__cbItemDelete = function(t) {
        this.__doCheckResult(t, "onafterdelete");
        if(!t.stopped) this._$refresh()
    };
    l.__cbAppendList = function(t, e) {
        var i = 1;
        if(this.__pager) i = this.__pager._$getIndex();
        var n = this.__getOffsetByIndex(i),
            r = n + (i > 1 ? this.__limit : this.__first);
        if(t >= r && this.__pager) {
            var a = this.__getPageInfo(0, this._$getTotal());
            this.__pager._$updateTotal(a.total);
            this.__doSwitchPagerShow(a.total > 1 ? "" : "none")
        } else this._$refresh()
    };
    l.__cbUnshiftList = function(t, e) {
        var i = 1;
        if(this.__pager) i = this.__pager._$getIndex();
        var n = this.__getOffsetByIndex(i),
            r = this.__getPageInfo(n, this._$getTotal());
        this.__doChangePage({
            last: i,
            index: r.index
        })
    };
    if(!0) t.copy(t.P("nej.ut"), r);
    return r
}, 129, 1, 4, 237);
! function(t, e, i) {
    function n(t) {
        t = t || {};
        if(t.macros) this._macros = t.macros;
        this._links = {};
        this._rules = {};
        this.TRUNK = null;
        this.cache = F(t.maxCache || 200);
        this.cache.set("", [
            []
        ])
    }

    function r(t) {
        return nt.parse(t)
    }

    function a(t, e) {
        return e ? t.nodeName === e : 1 === t.nodeType
    }

    function s(t, e) {
        var t = t.firstChild;
        return !t || a(t, e) ? t : c(t, e)
    }

    function o(t, e) {
        var t = t.lastChild;
        return !t || a(t, e) ? t : l(t, e)
    }

    function l(t, e) {
        for(; t = t.previousSibling;)
            if(a(t, e)) return t;
        return t
    }

    function c(t, e) {
        for(; t = t.nextSibling;)
            if(a(t, e)) return t;
        return t
    }

    function u(t, e) {
        var i = at[e];
        if(i) return "function" == typeof i ? i(t) : t[i];
        if(ot) return t.getAttribute(e);
        var n = t.getAttributeNode(e);
        return "boolean" == typeof t[e] ? t[e] ? e : null : n && n.specified ? n.value : null
    }

    function d(t) {
        for(var e = t.length; e--;) {
            var i = t[e];
            t.splice(e, 1, null);
            if(~t.indexOf(i)) t.splice(e, 1);
            else t.splice(e, 1, i)
        }
        return t
    }

    function h(t, e) {
        if(t && e)
            for(var i = t.nextSibling; i;) {
                if(i === e) return -1;
                i = i.nextSibling
            }
        return t ? 1 : -1
    }

    function f(t) {
        return d(t.sort(lt))
    }

    function p(t, e) {
        var i, n, r, a;
        if(t) {
            r = e ? "type" : "child";
            i = c;
            n = l;
            a = s
        } else {
            r = "last" + (e ? "type" : "child");
            n = c;
            i = l;
            a = o
        }
        return function(t, s) {
            var o = ut[r];
            if(t === rt) return !1;
            var l = ct(t),
                c = t.parentNode,
                u = (s.step > 0 ? i : n, s.step),
                d = s.start,
                h = e && t.nodeName;
            if(null === u) return !1;
            if(!o[l]) {
                var f = a(c, h),
                    p = 0;
                do {
                    o[ct(f)] = ++p;
                    ut.length++
                } while (f = i(f, h))
            }
            var _ = o[l];
            if(0 === u) return _ === d;
            else return(_ - d) / u >= 0 && (_ - d) % u === 0
        }
    }

    function _() {
        if(ut.length) ut = {
            child: {},
            lastchild: {},
            type: {},
            lasttype: {},
            length: 0
        }
    }

    function m(t, e, i) {
        var n;
        for(var r in e)
            if(i !== r && (n = ht[r]) && !n(t, e[r])) return !1;
        return !0
    }

    function g(t, e, i) {
        var n = e.length,
            r = e[n - 1];
        if(!m(t, r, i)) return !1;
        else {
            if(1 == n) return !0;
            var a = e[n - 2],
                s = ft.combos[a.combo],
                o = pt[n - 2],
                l = s(t, o);
            if(l) return !0;
            else return !1
        }
    }

    function v(t) {
        return function(i) {
            if(i == rt || null == i || i == e) return null;
            else return g(i, t)
        }
    }

    function y(t) {
        for(var e = [], i = 0, n = t.length; i < n; i++) e.push(v(t.slice(0, i + 1)));
        return e
    }

    function b(t, e, i) {
        if(!e.length) return t;
        var n = pt;
        pt = y(e);
        for(var r = t.length; r--;)
            if(!g(t[r], e, i)) t.splice(r, 1);
        pt = n;
        return t
    }

    function x(t, e) {
        var i, n, r = t[t.length - 1];
        if(r.id) {
            i = dt.byId(r.id);
            n = "id"
        } else if(r.classList && r.classList.length && dt.byClassName) {
            i = dt.byClassName(r.classList, e);
            n = "classList"
        } else {
            i = dt.byTagName(r.tag || "*", e);
            n = "tag"
        }
        if(!i.length) return i;
        else return b(i, t, n)
    }

    function $(t, e) {
        if(!t[0][0]) return [];
        for(var i = [], n = 0, r = 0, a = t.length; r < a; r++) {
            var s = t[r],
                o = s.length,
                l = (s[o - 1], x(s, e));
            if(l && l.length) n++;
            if(!i) i = l;
            else i = i.concat(l)
        }
        _();
        if(n > 1) f(i);
        return i
    }

    function w(t, i) {
        var n = r(t),
            a = $(n, i || e);
        return a
    }

    function k(t, i) {
        var n;
        if(_t && !I.debug) try {
            n = (i || e).querySelector(t)
        } catch(e) {
            n = w(t, i)[0]
        } else n = w(t, i)[0];
        return n
    }

    function S(t, i) {
        var n;
        if(_t && !I.debug) try {
            n = R((i || e).querySelectorAll(t))
        } catch(e) {
            n = w(t, i)
        } else n = w(t, i);
        return n
    }

    function C(t, e) {
        if(!t || 1 !== t.nodeType) return !1;
        var i = r(e),
            n = i.length;
        if(!i[n - 1][0]) return !1;
        for(; n--;)
            if(T(t, i[n])) return !0;
        return !1
    }

    function T(t, e) {
        var i = e.length;
        if(!m(t, e[i - 1])) return !1;
        else return 1 === b([t], e.slice(0)).length
    }

    function E(t) {
        return function(e, i) {
            var n = i.split(/\s+of\s+/);
            if(n.length < 2) throw Error("no 'of' keyword in nth-match\"s selector");
            var r = Q(n[0]),
                a = n[1],
                s = e.parentNode[t ? "firstChild" : "lastChild"],
                o = t ? "nextSibling" : "previousSibling",
                l = r.step,
                c = r.start,
                u = 0;
            if(!C(e, a)) return !1;
            if(null === l) return !1;
            do {
                if(1 === s.nodeType && I.matches(s, a)) u++;
                if(s === e) break
            } while (s = s[o]);
            if(0 === l) return u === c;
            else return(u - c) / l >= 0 && (u - c) % l === 0
        }
    }
    var I = function(t, e) {
            return S(t, e)
        },
        A = Array.prototype,
        M = Object.prototype,
        D = String.prototype,
        P = Function.prototype,
        N = A.slice,
        L = (e.body, e.createElement("div")),
        R = function(t) {
            return N.call(t)
        },
        j = function(t) {
            return null == t ? String(t) : M.toString.call(t).slice(8, -1).toLowerCase()
        },
        O = function(t, e, i) {
            for(var n in e)
                if(null == t[n] || i) t[n] = e[n]
        },
        F = function(t) {
            var e = [],
                n = {};
            return {
                set: function(t, i) {
                    if(e.length > this.length) delete n[e.shift()];
                    n[t] = i;
                    e.push(t);
                    return i
                },
                get: function(t) {
                    if(t === i) return n;
                    else return n[t]
                },
                length: t,
                len: function() {
                    return e.length
                }
            }
        },
        z = function(t) {
            return function(e, i) {
                if("object" == j(e))
                    for(var n in e) t.call(this, n, e[n]);
                else t.call(this, e, i);
                return this
            }
        },
        B = function(t) {
            try {
                return t()
            } catch(t) {
                return !1
            } finally {
                L = document.createElement("div")
            }
        };
    try {
        N.call(e.getElementsByTagName("body"))
    } catch(t) {
        R = function(t) {
            for(var e = [], i = t.length, n = 0; n < i; n++) e.push(t[n]);
            return e
        }
    }
    var H = /^\s+|\s+$/g;
    D.trim = D.trim || function() {
            return this.replace(H, "")
        };
    P.bind = P.bind || function(t, e) {
            e = N.call(arguments, 1);
            var i = this;
            return function() {
                return i.apply(t, e.concat(N.call(arguments)))
            }
        };
    A.indexOf = A.indexOf || function(t) {
            for(var e = 0, i = this.length; e < i; e++)
                if(t === this[e]) return e;
            return -1
        };
    var W = /\(\?\!|\(\?\:/,
        q = function(t) {
            for(var e = 0, i = 0, n = t.length, r = t.split(W).length - 1; n--;) {
                var a = t.charAt(n);
                if(0 === n || "\\" !== t.charAt(n - 1)) {
                    if("(" === a) e++;
                    if(")" === a) i++
                }
            }
            if(e !== i) throw t + "中的括号不匹配";
            else return e - r
        },
        G = function(t, e) {
            return t
        },
        U = Object.keys || function(t) {
                var e = [];
                for(var i in t)
                    if(t.hasOwnProperty(i)) e.push(i);
                return e
            },
        V = function(t) {
            var e = t.reg;
            if("regexp" === j(e)) e = e.toString().slice(1, -1);
            t.regexp = e.replace(X, function(t, e) {
                if(e in tt) return tt[e];
                else throw new Error('can"t replace undefined macros:' + e)
            });
            return t
        },
        Y = function(t) {
            for(var e in t)
                if(t.hasOwnProperty(e)) V(t[e]);
            return t
        };
    O(n.prototype, {
        parse: function(t) {
            t = clean(t);
            if(i = this.cache.get(t)) return i;
            for(var e, i = this.parsed = [
                [null]
            ], n = this.input = t, r = this.TRUNK; e != (n = n.replace(r, this._process.bind(this)));) e = n;
            if("" !== n) this.error(n);
            return this.cache.set(t, i)
        },
        on: function(t) {
            if("string" === j(t)) {
                var e = {};
                e[t] = arguments[1];
                t = e
            }
            for(var n in t) {
                var r = t[n];
                if("object" !== j(r)) r = {
                    regexp: r
                };
                var a = r.regexp;
                if("regexp" === j(a)) r.regexp = a.toString().slice(1, -1);
                if(r.order === i) r.order = 1;
                this._rules[n] = r
            }
            this.setup();
            return this
        },
        off: function(t) {
            if("array" === j(t))
                for(var e = t.length; e--;) this.off(t[e]);
            else if(this._rules[t]) delete this._rules[t];
            return this
        },
        current: function() {
            var t = this.parsed,
                e = t[t.length - 1],
                i = e.length;
            return e[i - 1] || (e[i - 1] = {
                    tag: "*"
                })
        },
        error: function(t) {
            throw Error("输入  " + this.input + "  含有未识别语句:" + t || "")
        },
        clone: function(t) {
            return(new n).on(this._rules)
        },
        _process: function() {
            var t = this._links,
                e = this._rules,
                i = N.call(arguments);
            for(var n in t) {
                var r = t[n],
                    a = r[1],
                    s = parseInt(r[0]);
                if(i[s] && (rule = e[n])) {
                    rule.action.apply(this, i.slice(s, s + a));
                    return ""
                }
            }
            return ""
        },
        setup: function() {
            Y(this._rules);
            for(var t = 1, e = [], i = this._rules, n = this._links, r = U(i).sort(function(t, e) {
                return i[t].order >= i[e].order
            }), a = r.length; a--;) {
                var s = r[a],
                    o = i[s],
                    l = q(o.regexp) + 1;
                if(o.filter && !ht[s]) ht[s] = o.filter;
                n[s] = [t, l];
                var c = G(o.regexp, t - 1);
                t += l;
                e.push(c)
            }
            this.TRUNK = new RegExp("^(?:(" + e.join(")|(") + "))");
            return this
        }
    });
    var X = /\{\{([^\}]*)\}\}/g,
        K = /^(?:(\d+)|([+-]?\d*)?n([+-]\d+)?)$/,
        J = /^(nth)[\w-]*(-of-type|-child)/,
        Z = F(100),
        Q = function(t) {
            var e, i, n;
            if(!t || !(t = t.replace(/\s+/g, ""))) return {
                start: 1,
                step: 0
            };
            if(n = Z.get(t)) return n;
            if("even" == t) {
                i = 2;
                e = 2
            } else if("odd" == t) {
                e = 2;
                i = 1
            } else {
                n = t.match(K);
                if(!n) e = null;
                else if(n[1]) {
                    e = 0;
                    i = parseInt(n[1])
                } else {
                    if("-" == n[2]) n[2] = "-1";
                    e = n[2] ? parseInt(n[2]) : 1;
                    i = n[3] ? parseInt(n[3]) : 0
                }
            }
            if(i < 1)
                if(e < 1) e = null;
                else i = - -i % e + e;
            return Z.set(t, {
                start: i,
                step: e
            })
        },
        tt = {
            split: "\\s*,\\s*",
            operator: "[*^$|~!]?=",
            combo: "[>\\s+~](?!=)",
            word: "[\\\\\\w\\u00A1-\\uFFFF-]"
        },
        et = {
            split: {
                reg: "{{split}}",
                action: function(t) {
                    this.parsed.push([null])
                },
                order: 0
            },
            id: {
                reg: "#({{word}}+)",
                action: function(t, e) {
                    this.current().id = e
                }
            },
            tag: {
                reg: "\\*|[a-zA-Z-]\\w*",
                action: function(t) {
                    this.current().tag = t.toLowerCase()
                }
            },
            classList: {
                reg: "\\.({{word}}+)",
                action: function(t, e) {
                    var i = this.current(),
                        n = i.classList || (i.classList = []);
                    n.push(e)
                }
            },
            pesudos: {
                reg: ":({{word}}+)(?:\\(([^\\(\\)]*|(?:\\([^\\)]+\\)|[^\\(\\)]*)+)\\))?",
                action: function(t, e, i) {
                    var n = this.current(),
                        r = n.pesudos || (n.pesudos = []),
                        e = e.toLowerCase(),
                        a = {
                            name: e
                        };
                    if(i) i = i.trim();
                    if(J.test(e)) i = Q(i);
                    if(i) a.param = i;
                    r.push(a)
                }
            },
            attributes: {
                reg: "\\[\\s*({{word}}+)(?:({{operator}})['\"]?([^'\"\\[]+)['\"]?)?\\s*\\]",
                action: function(t, e, i, n) {
                    var r = this.current(),
                        a = r.attributes || (r.attributes = []);
                    a.push({
                        key: e,
                        operator: i,
                        value: n
                    })
                }
            },
            combo: {
                reg: "\\s*({{combo}})\\s*",
                action: function(t, e) {
                    var i = this.parsed,
                        n = i[i.length - 1];
                    this.current().combo = e;
                    n.push(null)
                },
                order: 0
            }
        },
        it = new RegExp("\\s*(,|" + tt.combo + "|" + tt.operator + ")\\s*", "g");
    clean = function(t) {
        return t.trim().replace(/\s+/g, " ").replace(it, "$1")
    };
    var nt = new n;
    nt.on(et);
    var rt = e.documentElement || e,
        at = {
            for: "htmlFor",
            href: function(t) {
                return "href" in t ? t.getAttribute("href", 2) : t.getAttribute("href")
            },
            type: function(t) {
                return "type" in t ? t.getAttribute("type") : t.type
            }
        },
        st = B(function() {
            L.appendChild(e.createComment(""));
            return !L.getElementsByTagName("*").length || "number" != typeof e.getElementsByTagName("input").length
        }),
        ot = B(function() {
            L.innerHTML = "<select></select>";
            var t = j(L.lastChild.getAttribute("multiple"));
            return "boolean" !== t && "string" !== t
        }),
        lt = e.compareDocumentPosition ? function(t, e) {
            if(!t.compareDocumentPosition || !e.compareDocumentPosition) return 0;
            else return 4 & t.compareDocumentPosition(e) ? -1 : t === e ? 0 : 1
        } : "sourceIndex" in e ? function(t, e) {
            if(!t.sourceIndex || !e.sourceIndex) return 0;
            else return t.sourceIndex - e.sourceIndex
        } : function(t, i) {
            var n = 0,
                r = [t],
                a = [i],
                s = t.parentNode,
                o = i.parentNode,
                l = s;
            if(t === e) return -1;
            else if(i === e) return 1;
            else if(!s && !o) return 0;
            else if(!o) return -1;
            else if(!s) return 1;
            else if(s === o) return h(t, i);
            for(; l;) {
                r.unshift(l);
                l = l.parentNode
            }
            l = o;
            for(; l;) {
                a.unshift(l);
                l = l.parentNode
            }
            for(; r[n] === a[n];) n++;
            return h(r[n], a[n])
        },
        ct = function(t) {
            var e = 0;
            return function(i) {
                return i._uid || (i._uid = t + e++)
            }
        }("nes_" + (+new Date).toString(36)),
        ut = {
            length: 1
        };
    _();
    var dt = {
            byId: function(t) {
                var i = e.getElementById(t);
                return i ? [i] : []
            },
            byClassName: e.getElementsByClassName ? function(t, i) {
                t = t.join(" ");
                return R((i || e).getElementsByClassName(t))
            } : null,
            byTagName: st ? function(t, i) {
                var n = (i || e).getElementsByTagName(t);
                return R(n)
            } : function(t, i) {
                for(var n, r = (i || e).getElementsByTagName(t), a = [], s = 0; n = r[s]; s++)
                    if(1 === n.nodeType) a.push(n);
                return a
            }
        },
        ht = {
            id: function(t, e) {
                return t.id === e
            },
            classList: function(t, e) {
                for(var i = e.length, n = " " + t.className + " "; i--;)
                    if(n.indexOf(" " + e[i] + " ") === -1) return !1;
                return !0
            },
            tag: function(t, e) {
                if("*" == e) return !0;
                else return t.tagName.toLowerCase() === e
            },
            pesudos: function(t, e) {
                for(var i = e.length, n = ft["pesudos"]; i--;) {
                    var r = e[i],
                        a = r.name,
                        s = n[a];
                    if(!s) throw Error("不支持的伪类:" + a);
                    if(!s(t, r.param)) return !1
                }
                return !0
            },
            attributes: function(t, e) {
                for(var i = e.length, n = ft["operators"]; i--;) {
                    var r = e[i],
                        a = r["operator"],
                        s = n[a],
                        o = u(t, r.key);
                    if(null !== o)
                        if(a) {
                            if(!s) throw Error("不支持的操作符:" + a);
                            if(!s(r.value, o + "")) return !1
                        } else;
                    else if("!=" !== a) return !1
                }
                return !0
            }
        },
        ft = {
            combos: {
                ">": function(t, e) {
                    var i = t.parentNode;
                    if(e(i)) return i
                },
                "~": function(t, e) {
                    for(var i = l(t); i;) {
                        if(e(i)) return i;
                        i = l(i)
                    }
                },
                " ": function(t, e) {
                    for(var i = t.parentNode; i;) {
                        var n = e(i);
                        if(n) return i;
                        if(null === n) return null;
                        i = i.parentNode
                    }
                    return null
                },
                "+": function(t, e) {
                    var i = l(t);
                    if(i && e(i)) return i
                }
            },
            operators: {
                "^=": function(t, e) {
                    if(null == e) return !1;
                    else return 0 === e.indexOf(t)
                },
                "=": function(t, e) {
                    return e === t
                },
                "~=": function(t, e) {
                    if(null == e) return !1;
                    else return ~(" " + e + " ").indexOf(t)
                },
                "$=": function(t, e) {
                    return e.substr(e.length - t.length) === t
                },
                "|=": function(t, e) {
                    return ~("-" + e + "-").indexOf("-" + t + "-")
                },
                "*=": function(t, e) {
                    return ~e.indexOf(t)
                },
                "!=": function(t, e) {
                    return e !== t
                }
            },
            pesudos: {
                not: function(t, e) {
                    return !C(t, e)
                },
                matches: function(t, e) {
                    return C(t, e)
                },
                "nth-child": p(!0, !1),
                "nth-last-child": p(!1, !1),
                "nth-of-type": p(!0, !0),
                "nth-last-of-type": p(!1, !0),
                "first-child": function(t) {
                    return !l(t)
                },
                "last-child": function(t) {
                    return !c(t)
                },
                "last-of-type": function(t) {
                    return !c(t, t.nodeName)
                },
                "first-of-type": function(t) {
                    return !l(t, t.nodeName)
                },
                "only-child": function(t) {
                    return !l(t) && !c(t)
                },
                "only-of-type": function(t) {
                    return !l(t, t.nodeName) && !c(t, t.nodeName)
                },
                contains: function(t, e) {
                    return ~(t.innerText || t.textContent || "").indexOf(e)
                },
                checked: function(t) {
                    return !!t.checked || !!t.selected
                },
                selected: function(t) {
                    return t.selected
                },
                enabled: function(t) {
                    return t.disabled === !1
                },
                disabled: function(t) {
                    return t.disabled === !0
                },
                empty: function(t) {
                    var e;
                    t = t.firstChild;
                    for(; t;) {
                        if(t.nodeName > "@" || 3 === (e = t.nodeType) || 4 === e) return !1;
                        t = t.nextSibling
                    }
                    return !0
                },
                focus: function(t) {
                    return t === e.activeElement && (!e.hasFocus || e.hasFocus()) && !!(t.type || t.href || ~t.tabIndex)
                },
                target: function(t, e) {
                    var i = t.id || t.name;
                    if(!i) return !1;
                    else return "#" + i === location.hash
                }
            }
        },
        pt = null,
        _t = !!e.querySelector;
    ! function(t, e) {
        for(var i in t) I[i] = function(i) {
            var n = t[i];
            return z(function(t, r) {
                n[t] = r;
                if(i in e) e[i](t, r)
            })
        }(i)
    }(ft, {
        operators: function(t) {
            var e = tt.operator.split("]");
            e.splice(1, 0, t.charAt(0) + "]");
            tt.operator = e.join("");
            nt.setup()
        },
        combos: function(t) {
            var e = tt.combo.split("]");
            e.splice(1, 0, t + "]");
            tt.combo = e.join("");
            nt.setup()
        }
    });
    I.debug = !1;
    I._nthCache = Z;
    I.parser = nt;
    I.parse = r;
    I._find = $;
    I._get = w;
    I.one = k;
    I.all = S;
    I.matches = C;
    I._uniqueSort = f;
    I._cleanSelector = clean;
    I._getUid = ct;
    if("object" == typeof exports) module.exports = I;
    else if("function" == typeof define && define.amd) define(function() {
        return I
    });
    else t.nes = I;
    I.pesudos({
        "nth-match": E(!0),
        "nth-last-match": E(!1),
        "local-link": function(t, e) {
            if(e) e = parseInt(e)
        }
    })
}(window, document, void 0);
I$(456, function(t, e, i, n, r, a) {
    i._$all = function() {
        try {
            return nes.all.apply(nes, arguments)
        } catch(t) {
            return null
        }
    };
    i._$one = function() {
        try {
            return nes.one.apply(nes, arguments)
        } catch(t) {
            return null
        }
    };
    i._$g = nes._get;
    if(!0) t.copy(t.P("nej.e"), i);
    return i
}, 129, 600);
I$(266, function(t, e, i, n, r) {
    function a(t, e) {
        this.length = 0;
        this._signs = {};
        this._context = e || o;
        if(t)
            if("string" == typeof t) {
                if(e && e instanceof a) e = e[0];
                if("string" == typeof e) e = v(e)[0];
                this._$add(r._$all(t, e))
            } else if(t instanceof a || _(t) || t.length) this._$add(t)
    }
    var s = [].slice,
        o = document,
        l = "documentElement",
        c = o[l],
        u = o.createElement("div"),
        d = null == u.textContent ? "innerText" : "textContent",
        h = function(t, e, i) {
            i = i || {};
            if(null == this[t] || i.override) this[t] = e;
            return this
        },
        f = function(t, e, i) {
            for(; e && e !== i;) {
                if(nes.matches(e, t)) return e;
                e = e.parentNode
            }
        },
        p = function(i, n, r) {
            return i === r || "undefined" === i || i === this || i === e || i === t
        },
        _ = function(t) {
            if(!t) return !1;
            var e = t.nodeType;
            return 1 === e || 9 === e || 11 === e || t.window === t
        },
        m = function(t) {
            var e = t.prototype,
                i = {};
            return {
                extend: function(t, n) {
                    i[t] = e[t];
                    e[t] = n;
                    return this
                },
                reset: function() {
                    for(var t in i)
                        if(i.hasOwnProperty(t))
                            if(void 0 === i[t]) delete e[t];
                            else e[t] = i[t]
                }
            }
        },
        g = m(Function);
    g.extend("autoSet", function() {
        var t = this;
        return function(e, n) {
            if(i._$isObject(e)) {
                var r = s.call(arguments, 1);
                for(var a in e) t.apply(this, [a, e[a]].concat(r));
                return this
            } else return t.apply(this, arguments)
        }
    }).extend("splitProcess", function(t) {
        var e = this;
        return function(n) {
            if(i._$isArray(n)) {
                var r, a = s.call(arguments, 1),
                    o = n.length;
                if(t) r = {};
                for(var l = 0; l < o; l++) {
                    var c = n[l],
                        u = e.apply(this, [c].concat(a));
                    if(t && "string" == typeof c) r[c] = u
                }
                return t ? r : this
            } else return e.apply(this, arguments)
        }
    });
    h = h.autoSet();
    var v = function(t, e) {
        v._$implement(n._$dump(), {
            statics: !0
        });
        n._$clear();
        if("string" == typeof t && 0 == t.trim().indexOf("<")) {
            var i = document.createElement("div");
            i.innerHTML = t;
            var r = v(i.childNodes);
            return r
        }
        return new a(t, e)
    };
    v._$extend = h._$bind(v);
    v._$extend({
        _$signal: "_uid",
        _$instances: {},
        _$handlers: [],
        _$fragment: function() {},
        _$implement: function(t, e, i) {
            i = i || {};
            h.call(a.prototype, t, i.statics ? this._transport(e) : e)
        }.autoSet(),
        _transport: function(t) {
            return function() {
                var e = s.call(arguments);
                e.unshift(this[0]);
                var i = t.apply(this, e);
                if(!p.call(this, i)) return i;
                this._$forEach(function(i, n) {
                    if(0 !== n) {
                        e[0] = i;
                        t.apply(this, e)
                    }
                });
                return this
            }
        },
        _merge: function(t, e, i) {
            for(var n = t.length || 0, r = 0; void 0 !== e[r];) {
                var a = e[r++];
                if(!i || i.call(t, a)) t[n++] = a
            }
            t.length = n;
            return t
        },
        _toArray: function(t) {
            return v._merge([], t)
        },
        _contains: c.contains ? function(t, e) {
            return t === e || (9 == t.nodeType ? t[l] : t).contains(e)
        } : c.compareDocumentPosition ? function(t, e) {
            return e && !!(16 & t.compareDocumentPosition(e))
        } : function(t, e) {
            for(; e = e.parentNode;)
                if(e === t) return !0;
            return !1
        },
        _$cloneNode: function(t, e) {
            e = !!e;
            var i, n, r = t.cloneNode(e);
            if(e) {
                n = nes.all("*", t);
                n.push(t);
                i = nes.all("*", r);
                i.push(r)
            } else {
                n = [t];
                i = [r]
            }
            for(_i = i.length; _i--;) b.fixture.clone(i[_i], n[_i]);
            return r
        },
        _delegateHandlers: {},
        _cleanSelector: nes._cleanSelector,
        _$uniqueSort: nes._uniqueSort,
        _$matches: nes.matches,
        _$fn: a.prototype,
        _$uid: nes._getUid
    });
    var y = /^(?:click|dblclick|contextmenu|DOMMouseScroll|mouse(?:\w+))$/,
        b = {
            insertor: {
                top: function(t, e) {
                    t.insertBefore(e, t.firstChild)
                },
                bottom: function(t, e) {
                    t.appendChild(e)
                },
                before: function(t, e) {
                    var i = t.parentNode;
                    if(i) i.insertBefore(e, t)
                },
                after: function(t, e) {
                    var i = t.parentNode;
                    if(i) i.insertBefore(e, t.nextSibling)
                }
            },
            fixProps: {
                input: "checked",
                option: "selected",
                textarea: "value",
                script: "text"
            },
            fixture: {
                clone: function(t, e) {
                    var i;
                    if(1 === t.nodeType) {
                        if(t.clearAttributes) {
                            t.clearAttributes();
                            t.mergeAttributes(e)
                        }
                        i = t.nodeName.toLowerCase();
                        if(_prop = b.fixProps[i]) t[_prop] = e[_prop];
                        t.removeAttribute(v._$signal);
                        t.removeAttribute("id")
                    }
                },
                event: function(e) {
                    var i = e.type,
                        n = e.button;
                    e.__fixed = !0;
                    e.target = e.target || e.srcElement || document;
                    e.metaKey = !!e.metaKey;
                    if(3 === e.target.nodeType) e.target = e.target.parentNode;
                    if(y.test(i)) {
                        e.pageX = t._$pageX(e);
                        e.pageY = t._$pageY(e);
                        if("mouseover" === i || "mouseout" === i) {
                            for(var r = e.relatedTarget || e[("mouseover" == i ? "from" : "to") + "Element"]; r && 3 == r.nodeType;) r = r.parentNode;
                            e.relatedTarget = r
                        }
                    }
                    e.which = null != e.charCode ? e.charCode : e.keyCode;
                    if(!e.which && void 0 !== n) e.which = 1 & n ? 1 : 2 & n ? 3 : 4 & n ? 2 : 0;
                    if(!e.preventDefault) e.preventDefault = function() {
                        this.returnValue = !1;
                        return this
                    };
                    if(!e.stopPropagation) e.stopPropagation = function() {
                        this.cancelBubble = !0;
                        return this
                    }
                }
            }
        },
        x = function(t) {
            var e = v._$matches;
            return function(i, n) {
                var r = v([]);
                if("boolean" == typeof i) {
                    n = i;
                    i = null
                }
                this._$forEach(function(a) {
                    for(var s = a[t]; s;) {
                        if(1 === s.nodeType && (!i || e(s, i))) {
                            r._$add(s);
                            if(!n) break
                        }
                        s = s[t]
                    }
                });
                return r
            }
        };
    v._$implement({
        _$style: function(t, i) {
            if(!t) throw Error("缺少css样式名");
            if(void 0 === i) return e._$getStyle(this[0], t);
            else return this._$forEach(function(n) {
                e._$setStyle(n, t, i)
            })
        }.splitProcess(!0).autoSet(),
        _$attr: function(t, i) {
            if(!t) throw Error("缺少属性名");
            if(void 0 === i) return e._$attr(this[0], t);
            else return this._$forEach(function(n) {
                e._$attr(n, t, i)
            })
        }.splitProcess(!0).autoSet(),
        _$forEach: function(t) {
            i._$forEach(this, t);
            return this
        },
        _$filter: function(t) {
            var e = [],
                i = "string" == typeof t;
            this._$forEach(function(n, r) {
                var a = i ? v._$matches(n, t) : t.call(this, n, r);
                if(a) e.push(n)
            });
            return v(e)
        },
        _$map: function(t) {
            var e = [],
                i = !1;
            this._$forEach(function(n, r) {
                var a = t.call(this, n, r);
                if(!_(a)) i = !0;
                e.push(a)
            });
            return i ? e : v([])._$add(e)
        },
        _$sort: function() {
            var t = this._$get();
            v._$uniqueSort(t);
            return v(t)
        },
        _$add: function(t) {
            if(t) {
                if(t.tagName || "number" != typeof t.length || t === window) t = [t];
                v._merge(this, t, function(t) {
                    if(!_(t)) return !1;
                    var e = v._$uid(t);
                    if(this._signs[e]) return !1;
                    else {
                        this._signs[e] = 1;
                        return !0
                    }
                });
                return this
            }
        },
        _$get: function(t, e) {
            if("number" != typeof t) return v._toArray(this);
            else return e ? v(this[t]) : this[t]
        },
        _$last: function(t) {
            return t ? v(this[this.length - 1]) : this[this.length - 1]
        },
        _$first: function(t) {
            return t ? v(this[0]) : this[0]
        },
        _$matches: function(t) {
            return v._$matches(this[0], t)
        },
        _$parent: x("parentNode"),
        _$prev: x("previousSibling"),
        _$next: x("nextSibling"),
        _$children: function(t, e) {
            var i = v([]);
            if("boolean" == typeof t) {
                e = t;
                t = null
            }
            this._$forEach(function(n) {
                var a = e ? r._$all(t || "*", n) : t ? v(n.childNodes)._$filter(t) : v(n.childNodes);
                i._$add(a)
            });
            return i
        },
        _$siblings: function(t) {
            return this._$prev(t, !0)._$add(this._$next(t, !0))
        },
        _$insert: function(t, e) {
            e = e && e.toLowerCase() || "bottom";
            if(!b.insertor[e]) e = "bottom";
            var i = v(t)[0],
                n = b.insertor[e];
            if(!i) throw Error("The Element to be inserted is not exist");
            return this._$forEach(function(t, e) {
                n(t, 0 === e ? i : v._$cloneNode(i, !0))
            })
        },
        _$insert2: function(t, e) {
            v(t)._$insert(this, e);
            return this
        },
        _$clone: function(t) {
            return this._$map(function(e) {
                return v._$cloneNode(e, t)
            })
        },
        _$text: function(t) {
            if(void 0 === t) {
                if(!this[0]) throw Error("内部节点为空，无法完成get操作");
                return this[0][d]
            }
            return this._$forEach(function(e) {
                e[d] = t
            })
        },
        _$html: function(t) {
            if(void 0 === t) {
                if(!this[0]) throw Error("内部节点为空，无法完成get操作");
                return this[0].innerHTML
            }
            return this._$forEach(function(e) {
                e.innerHTML = t
            })
        },
        _$val: function(t) {
            if(void 0 === t) {
                if(!this[0]) throw Error("内部节点为空，无法完成get操作");
                return this[0].value
            }
            return this._$forEach(function(e) {
                e.value = t
            })
        },
        _delegate: function(e, i, n) {
            i = v._cleanSelector(i);
            return this._$forEach(function(r) {
                var a = v._$uid(r),
                    s = v._delegateHandlers[a] || (v._delegateHandlers[a] = {}),
                    o = s[e] || (s[e] = {}),
                    l = o[i] || (o[i] = []),
                    c = function(t) {
                        var e;
                        if(e = f(i, t.target || t.srcElement, r)) n.apply(e, arguments)
                    };
                c._raw = n;
                l.push(c);
                t._$addEvent(r, e, c)
            })
        },
        _undelegate: function(e, i, n) {
            i = v._cleanSelector(i);
            return this._$forEach(function(r) {
                var a, s, o, l = v._$uid(r);
                if((a = v._delegateHandlers[l]) && (s = a[e]) && (o = s[i])) {
                    for(var c = o.length; c--;) {
                        var u = o[c];
                        if(!n || u._raw === n) {
                            t._$delEvent(r, e, u);
                            o.splice(c, 1)
                        }
                    }
                    if(!o.length) delete s[i]
                }
            })
        },
        _$on: function(e, i, n) {
            if(void 0 === e) throw Error("缺少事件名参数");
            if("function" == typeof i) {
                n = i;
                i = null
            }
            var r = e.indexOf(" ");
            if(~r) {
                i = e.slice(r + 1);
                e = e.slice(0, r)
            }
            if(!n) throw Error("缺少回调函数");
            else {
                var a = n,
                    n = function(t) {
                        b.fixture.event(t);
                        a.apply(this, arguments)
                    };
                a.real = n
            }
            if(i) return this._delegate(e, i, n);
            else return this._$forEach(function(i) {
                t._$addEvent(i, e, n)
            })
        }.splitProcess().autoSet(),
        _$off: function(e, i, n) {
            if("function" == typeof i) {
                n = i;
                i = null
            }
            var r;
            if(e && ~(r = e.indexOf(" "))) {
                i = e.slice(r + 1);
                e = e.slice(0, r)
            }
            if(n) n = n.real || n;
            if(i) return this._undelegate(e, i, n);
            else return this._$forEach(function(i) {
                var r, a = v._$uid(i),
                    s = v._delegateHandlers[a];
                if(!e) {
                    if(s) delete v._delegateHandlers[a];
                    t._$clearEvent(i, e)
                } else {
                    if(s) r = s[e];
                    if(!n) {
                        if(r) delete s[e];
                        t._$clearEvent(i, e)
                    } else t._$delEvent(i, e, n)
                }
            })
        }.splitProcess().autoSet(),
        _$trigger: function(e, i) {
            if("string" != typeof e) throw Error("事件类型参数错误");
            this._$forEach(function(n) {
                t._$dispatchEvent(n, e, i)
            });
            return this
        }.splitProcess().autoSet(),
        splice: function() {
            throw Error("don't use the NodeList#splice")
        }
    });
    g.reset();
    if(!0) nej.$ = v;
    return v
}, 6, 3, 4, 132, 456);
I$(97, function(t) {
    return t
}, 266);
I$(52, function(t, e, i, n, r, a, s) {
    var o;
    s._$$Module = t._$klass();
    o = s._$$Module._$extend(r._$$ModuleAbstract);
    o.__doBuild = function() {
        this.__super()
    };
    o.__onHide = function() {
        this.__super();
        this.__doClearComponentExDsp();
        this.__doClearDomEvent()
    };
    o.$ = function(t) {
        return n(t, this.__body)
    };
    o.__getElement = function(t) {
        var i = this.__body && e._$getByClassName(this.__body, t);
        return i && i[0]
    };
    o.__redirect = function(t) {
        var t = t || "/m/dashboard/";
        this.__dispatcher._$redirect(t)
    };
    o.__showLoading = function(t) {
        t.value = '<span class="u-load"></span>'
    };
    o.__showEmpty = function(t, e) {
        e = e || "没有数据！";
        t.value = '<div class="u-msg"><i class="u-icn u-icn-warm"></i>' + e + "</div>"
    };
    o.__showTableLoading = function(t) {
        t.innerHTML = '<span class="u-load"></span>'
    };
    o.__showTableEmpty = function(t, e) {
        e = e || "没有数据！";
        t.innerHTML = '<div class="u-msg"><i class="u-icn u-icn-warm"></i>' + e + "</div>"
    };
    o.__showSuccess = function(t, e, i, n) {
        t = t || "操作成功！";
        this.__feedback = a._$$Feedback._$allocate({
            clazz: "m-confirm-ok",
            message: t,
            onhide: e,
            time: i,
            mask: n || !1
        })
    };
    o.__showFailed = function(t, e, i) {
        t = t || "操作失败！";
        this.__feedback = a._$$Feedback._$allocate({
            clazz: "m-confirm-err",
            message: t,
            onhide: e,
            time: i
        })
    };
    o.__showWarn = function(t, e, i) {
        t = t || "操作失败！";
        this.__feedback = a._$$Feedback._$allocate({
            clazz: "m-confirm-warm",
            message: t,
            onhide: e,
            time: i
        })
    };
    return s
}, 1, 3, 6, 97, 47, 12);
I$(126, function(t, e, i, n, r, a, s) {
    function o(t, e, i) {
        return function(n) {
            i._$dispatchEvent(t, n);
            e(n)
        }
    }
    a._$$CockpitCache = t._$klass();
    s = a._$$CockpitCache._$extend(r._$$Cache);
    s.__doLoadList = function(t) {
        var e = t.onload,
            n = t.data || {};
        i._$request("/api/cockpits/", {
            type: "json",
            data: n,
            onload: function(t) {
                e(200 == t.code ? t.result : null)
            }
        })
    };
    s.__doDeleteItem = function(t) {
        var e = t.onload,
            n = t.data || {};
        i._$request("/api/cockpit/{id}/", {
            method: "delete",
            param: n,
            onload: function(t) {
                e(200 == t.code ? t.result : null)
            }
        })
    };
    s._$getCockpit = function(t) {
        var e = t.data,
            n = this;
        return new Promise(function(t, r) {
            i._$request("/api/cockpit/" + e.id, {
                type: "json",
                method: "get",
                onload: o("getcockpit", t, n),
                onerror: o("getcockpit", r, n)
            })
        })
    };
    s._$addCockpit = function(t) {
        var e = t.data,
            n = this;
        return new Promise(function(t, r) {
            i._$request("/api/cockpit/", {
                type: "json",
                method: "post",
                param: e,
                onload: o("addcockpit", t, n),
                onerror: o("addcockpit", r, n)
            })
        })
    };
    s._$updateCockpit = function(t) {
        var e = t.data,
            n = this;
        return new Promise(function(t, r) {
            i._$request("/api/cockpit/" + e.id, {
                type: "json",
                method: "put",
                param: e,
                onload: o("update", t, n),
                onerror: o("update", r, n)
            })
        })
    };
    s._$getFolders = function(t) {
        var e = this;
        return new Promise(function(t, n) {
            i._$request("/api/cockpit/getDashList", {
                type: "json",
                method: "get",
                onload: o("getFolders", t, e),
                onerror: o("getFolders", n, e)
            })
        })
    };
    return a
}, 1, 4, 137, 139, 138);
I$(423, '<div class="m-side-controller f-fl" id="j-side-controller-btn">\n    <div class="controller" r-class="\'z-hide\':!show" on-click="{show = !show}">\n        <i class="u-icn u-icn-hidesd"></i><i class="u-icn u-icn-showsd"></i>\n    </div>\n</div>\n');
I$(225, function(t, e) {
    var i = Regular.dom,
        n = Regular.extend({
            name: "side-controller",
            template: e,
            data: {
                show: !0
            },
            config: function(e) {
                this.eSide = document.querySelector(".g-sd");
                e.LEFT = parseInt(t.currentStyle(this.eSide).left);
                this.eGMN = document.querySelector(".g-mn");
                this.$watch("show", function(n) {
                    var r = t.currentStyle(this.eSide);
                    i.addClass(this.eSide, "g-sd-an");
                    i.addClass(this.eGMN, "g-mn-an");
                    e.sdStyle = {
                        width: parseInt(r.width)
                    };
                    if(n) this.sideShow();
                    else this.sideHide();
                    setTimeout(function() {
                        i.delClass(this.eSide, "g-sd-an");
                        i.delClass(this.eGMN, "g-mn-an")
                    }.bind(this), 300)
                })
            },
            sideShow: function() {
                var t = this.data;
                this.eSide.style["left"] = t.LEFT + "px";
                this.eGMN.style["left"] = t.sdStyle.width + t.LEFT + "px";
                i.delClass(this.eSide, "g-sd-no")
            },
            sideHide: function() {
                var t = this.data;
                this.eSide.style["left"] = -(t.sdStyle.width - t.LEFT) + "px";
                this.eGMN.style["left"] = t.LEFT + "px";
                i.addClass(this.eSide, "g-sd-no")
            }
        });
    return n
}, 7, 423);
I$(49, function(t, e, i) {
    function n() {
        var t = document.querySelector("#j-side-controller");
        if(t)(new i).$inject(t, "top")
    }
    var r = 3;
    return {
        initSideController: n,
        cacheDash: new e._$$DashBoardCache,
        LEVEL_MAX: r
    }
}, 7, 53, 225);
I$(461, '{#if level== 1}\n  <li title="全选">\n    <label>\n      <input type="checkbox" r-model={all} on-change={this.allChange(all, $event)}/>\n      <i class="icon u-icn icon1 u-icn-openfolder"></i>\n      <span>全选</span>\n    </label>\n  </li>\n{/if}\n{#list dashBoard as x}\n  <li class="level-{level}" title={x.name} >\n    <label>\n      <input type="checkbox" r-model={x.checked} on-change={this.folderChange(x, $event)} />\n      <i class="icon u-icn icon1 u-icn-openfolder"></i>\n      <span>{x.name}</span>\n    </label>\n  </li>\n  {#if x.folders && x.folders.length > 0}\n    <r-list-dashboards dashBoard={x.folders} all={all} on-chooseChange={this.chooseChange()} level={level+1} on-parentSignal={this.setParent()} >\n    </r-list-dashboards >\n  {/if}\n  {#list x.dashboards as dash}\n    <li title={dash.name} class="dash level-{level+1}" id={dash.id}>\n      <label>\n        <input type="checkbox" r-model={dash.checked} on-change={this.dashChange(dash, x, $event)} />\n        <i class="u-icn icon1 u-icn-report3"></i>\n        <span>{dash.name}</span>\n      </label>\n    </li>\n  {/list}\n{/list}\n\n\n \n\n');
I$(280, function(t, e, i) {
    var n = (e.cacheDash, ReDnd.Dropable, Regular.extend({
        name: "r-list-dashboards",
        data: {
            type: 1
        },
        template: i,
        config: function(t) {},
        init: function(t) {},
        folderChoose: function(t, e) {
            t.dashboards.forEach(function(t) {
                t.checked = e
            });
            if(t.folders && t.folders.length > 0) {
                var i = this;
                t.folders.forEach(function(t) {
                    t.checked = e;
                    i.folderChoose(t, e)
                })
            }
        },
        folderChange: function(t, e) {
            t.checked = e.target.checked;
            var i = t.checked;
            this.folderChoose(t, i);
            this.$emit("chooseChange");
            this.$emit("parentSignal")
        },
        dashChange: function(t, e, i) {
            t.checked = i.target.checked;
            this.$emit("chooseChange");
            this.$emit("parentSignal")
        },
        setParent: function(t) {
            this.$emit("parentSignal")
        },
        chooseChange: function() {
            this.$emit("chooseChange")
        },
        allChange: function(t, e) {
            this.data.all = e.target.checked;
            var i = this.data.all,
                n = this;
            this.data.dashBoard.forEach(function(t) {
                t.checked = i;
                n.folderChoose(t, i)
            });
            this.$emit("chooseChange")
        }
    }));
    return n
}, 7, 49, 461);
I$(90, function(t, e, i, n, r, a, s, o, l) {
    a._$toggle = function() {
        var t = function(t, i) {
            var n = e._$get(t.element),
                r = t.clazz,
                a = {
                    event: i,
                    clazz: r,
                    target: n,
                    source: e._$get(t.source)
                };
            t.onbeforetoggle.call(null, a);
            if(!a.stopped) {
                if(e._$hasClassName(n, r)) {
                    a.toggled = !1;
                    e._$delClassName(n, r)
                } else {
                    a.toggled = !0;
                    e._$addClassName(n, r)
                }
                t.ontoggle.call(null, a)
            }
        };
        return function(r, a) {
            r = e._$get(r);
            if(r) {
                var s = {
                    ontoggle: o,
                    onbeforetoggle: o,
                    clazz: "js-toggle",
                    source: e._$id(r),
                    element: r.parentNode
                };
                if(i._$isString(a)) {
                    var l = e._$get(a);
                    l ? s.element = l : s.clazz = a
                } else {
                    i._$fetch(s, a);
                    s.element = e._$get(s.element)
                }
                s.element = e._$id(s.element);
                n._$addEvent(r, "click", t._$bind(null, s))
            }
        }
    }();
    r._$merge(a);
    if(!0) t.copy(t.P("nej.e"), a);
    return a
}, 129, 3, 4, 6, 132);
I$(48, function(t, e, i, n, r, a, s) {
    var o = {};
    a = window.Validator;
    o._$$FormModule = t._$klass();
    var l = o._$$FormModule._$extend(s._$$Module);
    l.__onRefresh = function(t) {
        this.__doClear();
        this.__doClearComponentExDsp();
        this.__doClearDomEvent();
        this.__super(t);
        var e = t.rules;
        if(e) this.__validator = new a(e);
        if(this.__body) this.__form = this.__body.getElementsByTagName("form")[0];
        this.__error = {}
    };
    l.__get = function(t) {
        return this.__form && this.__form.elements[t]
    };
    l.__setValue = function(t, i) {
        if(e._$isObject(t)) {
            var n = t;
            for(var r in n)
                if(n.hasOwnProperty(r)) this.__setValue(r, n[r])
        } else this.__get(t).value = i
    };
    l.__getValue = function(t) {
        if(Array.isArray(t)) {
            for(var e, i = {}, n = 0, r = t.length; n < r; n++) {
                e = t[n];
                i[e] = this.__getValue(e)
            }
            return i
        } else {
            var a = this.__get(t);
            return a && a.value.trim()
        }
    };
    l.__checkValidity = function(t, i) {
        if(e._$isString(t)) i = i || this.__getValue(t);
        return this.__validator && this.__validator.validate(t, i)
    };
    l.__disableSubmit = function(t) {
        t = t || this.__get("submit");
        if(t) {
            t.disabled = !0;
            i._$addClassName(t, "z-dis")
        }
    };
    l.__enableSubmit = function(t) {
        t = t || this.__get("submit");
        if(t) {
            t.disabled = !1;
            i._$delClassName(t, "z-dis")
        }
    };
    l.__hasError = function() {
        for(var t in this.__error)
            if(this.__error.hasOwnProperty(t) && this.__error[t]) return !0;
        return !1
    };
    l.__showError = function(t, e) {
        var i = this.__get(t),
            n = i.parentNode;
        if(this.__error[t]) this.__hideError(t);
        this.__error[t] = r._$$Error._$allocate({
            parent: n,
            message: e
        })
    };
    l.__hideError = function(t) {
        var e = this.__error[t];
        if(e) {
            e._$recycle();
            delete this.__error[t]
        }
    };
    l.__doClear = function() {
        if(this.__error) {
            for(var t in this.__error)
                if(this.__error.hasOwnProperty(t)) {
                    this.__error[t]._$recycle();
                    delete this.__error[t]
                }
            delete this.__error
        }
    };
    l.__onHide = function() {
        this.__doClear();
        delete this.__validator;
        delete this.__form;
        this.__super()
    };
    return o
}, 1, 4, 3, 90, 135, 76, 52);
I$(410, '<div class="u-search u-search-1">\n    <div>\n        <label for="keywords" on-click={menu2show = !menu2show}>\n            {tip[index]}\n            <i class="sel"></i>\n            <div class="u-filter" on-clickouter={[menu2show = false]} r-hide={!menu2show}>\n                <ul class="u-list">\n                    <li on-click={index=0}>{tip[0]}</li>\n                    <li on-click={index=1}>{tip[1]}</li>\n                </ul>\n            </div>\n        </label>\n        <input id="keywords" ref=\'search\' r-model=\'search\' placeholder="输入关键字搜索">\n        <i class="u-icn u-icn-clear j-clear" r-hide={!search} on-click={this.clear()}></i>\n    </div>\n</div>\n');
I$(221, function(t, e) {
    var i = Regular.extend({
        name: "r-search",
        template: e,
        data: {
            type: 0
        },
        config: function(t) {
            if(0 == t.type) t.tip = ["报表", "文件夹"];
            else if(1 == t.type) t.tip = ["仪表盘", "文件夹"];
            t.index = 0;
            this.$watch("search", function(t, e) {
                this.checkInput(t)
            })
        },
        init: function() {
            this.$refs.search, this.data
        },
        checkInput: function(t) {
            var e = this.data;
            clearTimeout(this.tid);
            this.tid = setTimeout(function() {
                this.clearList();
                e.value = t;
                if("" != e.value) {
                    if(1 === e.index) this.searchFolder();
                    else this.search();
                    this.$update()
                } else {
                    this.$update();
                    this.$emit("searchend")
                }
            }.bind(this), 200)
        },
        clear: function() {
            this.data.search = "";
            this.clearList();
            this.$update();
            this.$emit("searchend")
        },
        clearList: function() {
            function t(i) {
                i.forEach(function(i) {
                    i.unchecked = !1;
                    if(1 == e.alawayopen) i.open = !0;
                    else i.open = !1;
                    if(0 == e.type) reports = i.reports;
                    else if(1 == e.type) reports = i.dashboards;
                    if(reports && reports.length) reports.forEach(function(t) {
                        t.unchecked = !1
                    });
                    if(i.folders && i.folders.length) t(i.folders)
                }.bind(this))
            }
            var e = this.data;
            t(e.list)
        },
        searchFolder: function() {
            function t(i) {
                var r = !1;
                i.forEach(function(i) {
                    var a = !1;
                    e = i.name.toLowerCase().indexOf(n.toLowerCase());
                    if(e === -1)
                        if(i.folders && i.folders.length) {
                            a = t(i.folders, n);
                            if(a) {
                                i.open = !0;
                                r = !0
                            } else i.unchecked = !0
                        } else i.unchecked = !0;
                    else r = !0
                }.bind(this));
                return r
            }
            var e, i = this.data,
                n = i.value;
            t(i.list)
        },
        search: function() {
            function t(a) {
                var s = !1;
                a.forEach(function(a) {
                    var o = !1,
                        l = !1;
                    if(a.folders && a.folders.length) {
                        l = t(a.folders);
                        if(l) a.open = !0
                    }
                    if(0 == n.type) e = a.reports;
                    else if(1 == n.type) e = a.dashboards;
                    if(e && e.length) e.forEach(function(t) {
                        if(0 == n.type) i = t.title.toLowerCase().indexOf(r.toLowerCase());
                        else if(1 == n.type) i = t.name.toLowerCase().indexOf(r.toLowerCase());
                        if(i === -1) t.unchecked = !0;
                        else {
                            o = !0;
                            a.open = !0
                        }
                    });
                    if(!o && !l) a.unchecked = !0;
                    else s = !0
                }.bind(this));
                return s
            }
            var e, i, n = this.data,
                r = n.value;
            t(n.list)
        }
    });
    return i
}, 7, 410);
I$(351, '<mask show={show && !disableMask} clazz=\'m-window-invisible\' z-index={zIndex}  on-click={this._clickouter()}></mask>\n<div ref=overlay   class="m-overlay {clazz} {placement}" style=\'z-index: {zIndex+1}\'   r-anim="on:enter; class: {animateIn} animated; on:leave; class: {animateOut} animated">\n<div class="m-popover {placement}">\n<div class="arrow"></div>\n<h3 class="popover-title" r-hide={!title}>{#inc title}</h3>\n<div class="popover-content">\n{#include this.$body}\n</div>\n</div>\n</div>\'');
I$(178, function(t, e, i) {
    var n = e.extend({
        name: "overlay-popover",
        template: i,
        data: {
            animateIn: "flipInX",
            animateOut: "flipOutX",
            autoClose: !0,
            gap: 0
        }
    });
    return n
}, 7, 203, 351, 171);
I$(287, '{#if !ready}\n  <div style=\'text-align:center;vertical-align:middle;width:100%;\'>\n    <span class=\'u-load\' style=\'display:inline-block;vertical-align:middle;margin:8px\'></span> <span>正在获取数据... </span>\n  </div>\n{#else}\n<div class="m-cachemail m-cachemail-1">\n  <div class="col col-2">\n    <form class="m-form" onsubmit="return false;">\n      <div class="formrow" >\n        <label>接收者</label>\n        <div class="formcnt" >\n          <span class="u-txtwrap" ref="receiverList">\n              <input type="text" class="u-txt" placeholder="输入邮箱地址，以分号间隔" ref="emails" style="display:none;"/>\n          </span>\n        </div>\n      </div>\n    </form>\n  </div>\n\n  <div class="col col-1 u-txtwrap" ref="dashboardIds">\n    <ul class="ulreplace" ref="group">\n        <r-list-dashboards dashBoard={dashBoard} all={all} on-chooseChange={this.chooseChange()} level={1} on-parentSignal={this.updateAll()}></r-list-dashboards >\n    </ul>\n  </div>\n  \n</div>\n{/if}');
if("undefined" != typeof exports) Validator = require("./validator.js");
var rules = [{
    field: "receiverList",
    rules: [{
        type: function(t) {
            return t.length && t.length > 0
        },
        message: "收件人不能为空"
    }],
    node: "receiverList"
}, {
    field: "dashboardIds",
    rules: [{
        type: function(t) {
            return t.length && t.length > 0
        },
        message: "仪表盘的选择不能为空"
    }],
    node: "dashboardIds"
}];
if("undefined" == typeof exports) {
    if("object" != typeof window.bigvizValidateRule) window.bigvizValidateRule = {};
    bigvizValidateRule.cockpit = rules
} else;
I$(127, function(t, e, n, r, a, s, o, l, c, u, d) {
    var s = window.bigvizValidateRule.cockpit,
        h = o.cache,
        f = c._$$CockpitCache._$allocate(),
        p = r.extend({
            name: "send-cockpit",
            $body: n,
            data: {
                title: "发布到驾驶舱",
                className: "m-window-modal-2 m-window-sendcockpit",
                autoRecycleRequest: !1,
                rules: s,
                width: 570
            },
            init: function() {
                var t = this.data;
                this.supr(t)
            },
            config: function(t) {
                this.supr(t);
                this.data.ready = !1;
                var e = this.data.regularMail = {};
                e.dashboardIds = [];
                e.receiverList = [];
                this.data.all = !1;
                this._getDashboards();
                this.$on("confirm", function(t) {
                    if(t.accept) this.save();
                    else this.destroy()
                })
            },
            detectData: function(t) {
                this.keyCheckValidity(t);
                return !this.hasError()
            },
            save: function() {
                var t = this,
                    i = (this.data, this.gatherData());
                i.projectId = this.data.projectId;
                if(this.detectData(i)) {
                    i.projectId = currentProjectId;
                    if(this.data.id) {
                        i.id = this.data.id;
                        f._$updateCockpit({
                            data: i
                        }).then(function(i) {
                            if(200 == i.code) {
                                e.message(i.message || "更新成功！", "ok");
                                t.$emit("save");
                                t.destroy()
                            } else if(760 == i.code) t.error(i);
                            else e.message(i.message || "更新失败！", "err")
                        })
                    } else f._$addCockpit({
                        data: i
                    }).then(function(i) {
                        if(200 == i.code) {
                            e.message(i.message || "发布成功！", "ok");
                            t.$emit("save");
                            t.destroy()
                        } else if(760 == i.code) t.error(i);
                        else e.message(i.message || "发布失败！", "err")
                    })
                }
            },
            error: function(t) {
                var e = t.result,
                    i = "";
                for(var n in e) {
                    var r = e[n];
                    i += "<p>" + n + "：无 ";
                    r.forEach(function(t) {
                        i += t + " "
                    });
                    i += "权限</p>"
                }
                new d({
                    data: {
                        message: t.message || "数据权限不足，请至少为接收者开启阅览权限！",
                        msg: i,
                        cockpit: !0
                    }
                }).show()
            },
            gatherData: function() {
                this.gatherDashboardIds();
                this.getReceiverList();
                var t = {},
                    e = this.data.regularMail;
                t.dashboardIds = e.dashboardIds;
                t.receiverList = e.receiverList;
                return t
            },
            gatherDashboardIds: function() {
                for(var t, e = [], i = this.data.dashBoard, n = 0; n < i.length; n++) {
                    t = i[n];
                    this.__gatherDashboardIds(t, e)
                }
                this.data.regularMail.dashboardIds = e
            },
            __gatherDashboardIds: function(t, e) {
                var i, n, r = t.dashboards;
                if(r && r.length > 0)
                    for(i = 0; i < r.length; i++) {
                        n = r[i];
                        if(n.checked) e.push(n.id)
                    }
                var a = t.folders;
                if(a && a.length > 0)
                    for(i = 0; i < a.length; i++) {
                        n = a[i];
                        this.__gatherDashboardIds(n, e)
                    }
            },
            getReceiverList: function() {
                var t = [];
                t = this.__emailsInput._$getEmails();
                this.data.regularMail.receiverList = t;
                return t
            },
            _getDashboards: function() {
                var t = this,
                    i = this.data;
                h._$getFolders({
                    data: {
                        projectId: currentProjectId,
                        type: 1
                    }
                }).then(function(n) {
                    if(200 == n.code) {
                        i.dashBoard = n.result.list.filter(function(t) {
                            return t.id > 0
                        });
                        if(i.id) f._$getCockpit({
                            data: {
                                id: i.id
                            }
                        }).then(function(e) {
                            if(200 == e.code) {
                                i.regularMail.dashboardIds = e.result.dashboardIds;
                                i.regularMail.receiverList = e.result.receiverList;
                                t.initFolder();
                                i.ready = !0;
                                t.$update();
                                t.__doEmail()
                            }
                        });
                        else {
                            if(i.dashboardId) i.regularMail.dashboardIds.push(i.dashboardId);
                            t.initFolder();
                            i.ready = !0;
                            t.$update();
                            t.__doEmail();
                            if(i.dashboardId) t.scrollToItem(i.dashboardId)
                        }
                    } else e.message(n.message || "获取仪表盘列表失败！", "err")
                })
            },
            scrollToItem: function(t) {
                var e = this.$refs.group,
                    i = e.querySelector('[id^="' + t + '"]'),
                    n = e.scrollTop,
                    r = i.offsetTop;
                if(i) {
                    var a = r - e.offsetHeight;
                    if(a + 30 > n) e.scrollTop = a + 40;
                    else if(n > r) e.scrollTop = r - 10;
                    if(i) return !0;
                    else return
                }
            },
            initFolder: function() {
                for(var t, e = this.data.dashBoard, i = this.data.regularMail.dashboardIds, n = 0; n < e.length; n++) {
                    t = e[n];
                    this.__initFolders(t, i)
                }
                this.updateAll()
            },
            __initFolders: function(t, e) {
                var i, n, r, a = t.dashboards;
                if(a && a.length > 0)
                    for(i = 0; i < a.length; i++) {
                        n = a[i];
                        r = e.some(function(t) {
                            return t == n.id
                        });
                        n.checked = r
                    }
                var s = t.folders;
                if(s && s.length > 0)
                    for(i = 0; i < s.length; i++) {
                        n = s[i];
                        this.__initFolders(n, e)
                    }
            },
            updateAll: function() {
                var t, e, i = this.data.dashBoard,
                    n = !0;
                if(i && i.length > 0)
                    for(var r = 0; r < i.length; r++) {
                        t = i[r];
                        e = this.getFolderChecked(t);
                        t.checked = e;
                        if(!e) n = !1
                    }
                this.data.all = n;
                this.$update()
            },
            getFolderChecked: function(t) {
                var e, i, n, r = !0,
                    a = t.dashboards;
                if(a && a.length > 0)
                    for(e = 0; e < a.length; e++) {
                        i = a[e];
                        if(!i.checked) r = !1
                    }
                var s = t.folders;
                if(s && s.length > 0)
                    for(e = 0; e < s.length; e++) {
                        i = s[e];
                        n = this.getFolderChecked(i);
                        i.checked = n;
                        if(!n) r = !1
                    }
                if(!(a && 0 != a.length || s && 0 != s.length)) r = t.checked;
                return r
            },
            __doEmail: function() {
                this.data;
                this.__userCache = l._$$User._$allocate({
                    onCheckUserStatus: this.__cbCheckUserStatus._$bind(this)
                });
                this.__emailsInput = u._$$Emails._$allocate({
                    binder: this.$refs.emails,
                    onfocus: this.hideError._$bind(this, "receiverList"),
                    onblur: this.__checkEmails._$bind(this),
                    onchange: this.__checkEmails._$bind(this)
                });
                this.initEmail()
            },
            initEmail: function() {
                this.__emailsInput._$clearEmail();
                var t = this.data.regularMail.receiverList;
                for(i = 0; i < t.length; i++) this.__emailsInput._$add(t[i])
            },
            __checkEmails: function() {
                this.getReceiverList();
                var t = this.validate("receiverList");
                if(t) {
                    var e = this.getReceiverList();
                    e = e.filter(function(t) {
                        return isNaN(parseInt(t))
                    });
                    if(e.length > 0) this.__userCache._$checkUserStatus({
                        emails: e
                    })
                }
            },
            __cbCheckUserStatus: function(i) {
                if(200 !== i.code) e.message(i.message || "该用户邮件不在系统中！", "err");
                else {
                    var n = i.result,
                        r = this.getReceiverList();
                    if(!this.$refs) return;
                    var a = t._$getByClassName(this.$refs.receiverList, "j-email");
                    a = a.filter(function(t, e) {
                        return isNaN(parseInt(r[e]))
                    });
                    r = r.filter(function(t) {
                        return isNaN(parseInt(t))
                    });
                    var s = [];
                    n.forEach(function(i, n) {
                        if(0 == i) s.push(e.infoWithNoEmail(r[n]));
                        if(1 != i && 2 != i) t._$addClassName(a[n].parentNode, "email-error")
                    });
                    if(s.length) this.showError("receiverList", this.$refs.receiverList, s.join(" , "))
                }
            },
            chooseChange: function() {
                this.hideError("dashboardIds")
            }
        }).implement(a.Error).implement(a.RegularMailError);
    return p
}, 3, 7, 287, 185, 257, 288, 55, 9, 126, 102, 146, 280);
I$(229, '<div class="u-drag-bar u-drag-bar-r" ref=barR></div>\n<!-- <div class="u-drag-bar u-drag-bar-l" ref=barL></div> -->\n');
I$(57, function(t, e, i) {
    var n = Regular.dom,
        r = Regular.extend({
            name: "drag-move",
            template: e,
            data: {},
            config: function(t) {
                t.original = [];
                t.minW = t.minW || 220;
                t.maxW = t.maxW || document.body.offsetWidth / 2 - 40;
                t.direction = t.direction || "horizontal"
            },
            init: function() {
                n.on(this.$refs.barR, "mousedown", this.bindAsEventListener(this, this.dragStart))
            },
            bindAsEventListener: function(t, e) {
                return function(i) {
                    return e.apply(t, [i || window.event])
                }
            },
            dragStart: function(e) {
                if(2 !== e.button) {
                    var i = this.data;
                    if(!this.obj) this.obj = e.origin.parentNode;
                    var n = t.currentStyle(this.obj);
                    i.original = [parseInt(n.width), parseInt(n.height), parseInt(n.left), parseInt(n.top)];
                    this.doBand()
                }
            },
            dragging: function(t) {
                var e = this.data;
                this[e.direction](t)
            },
            dragEnd: function(t) {
                this.rmBand()
            },
            doBand: function() {
                if(!this.isBand) {
                    this.isBand = !0;
                    this.draggingBand = this.dragging.bind(this);
                    this.dragEndBand = this.dragEnd.bind(this);
                    n.on(document, "mousemove", this.draggingBand);
                    n.on(document, "mouseup", this.dragEndBand)
                }
            },
            rmBand: function() {
                this.isBand = !1;
                n.off(document, "mousemove", this.draggingBand);
                n.off(document, "mouseup", this.dragEndBand)
            },
            css: function(t, e) {
                for(var i in e) t.style[i] = e[i]
            },
            horizontal: function(t) {
                var e, i = this.data,
                    n = i.original[2];
                if(t.pageX - i.original[2] <= i.minW) {
                    this.css(this.obj, {
                        left: n + "px",
                        width: i.minW + "px"
                    });
                    e = i.minW
                } else if(t.pageX - i.original[2] >= i.maxW) {
                    this.css(this.obj, {
                        left: n + "px",
                        width: i.maxW + "px"
                    });
                    e = i.maxW
                } else {
                    this.css(this.obj, {
                        left: n + "px",
                        width: t.pageX - i.original[2] + "px"
                    });
                    e = t.pageX - i.original[2]
                }
                this.$emit("dragMove", {
                    width: e,
                    left: n
                })
            },
            vertical: function(t) {}
        });
    return r
}, 7, 229, 58);
if("undefined" != typeof exports) var constants = require("../../../server/common/constant.js");
if("undefined" != typeof exports) Validator = require("./validator.js");
var updateDataConnectionStep1 = [{
        field: "name",
        rules: [{
            type: "isRequired",
            message: "数据源名称不能为空"
        }, {
            type: "isLength",
            range: {
                min: 0,
                max: 100
            },
            message: "请将数据源名称长度限制在100字以内"
        }]
    }, {
        field: "server",
        rules: [{
            type: "isRequired",
            message: "服务器不能为空"
        }, {
            type: "isLength",
            range: {
                min: 0,
                max: 100
            },
            message: "请将服务器长度限制在100字以内"
        }]
    }, {
        field: "port",
        rules: [{
            type: "isRequired",
            message: "端口不能为空"
        }, {
            type: "isInt",
            message: "请将端口设置为数值"
        }]
    }, {
        field: "database",
        rules: [{
            type: "isRequired",
            message: "数据库不能为空"
        }, {
            type: "isLength",
            range: {
                min: 0,
                max: 100
            },
            message: "请将数据库长度限制在100字以内"
        }]
    }, {
        field: "userName",
        rules: [{
            type: "isRequired",
            message: "用户名不能为空"
        }, {
            type: "isLength",
            range: {
                min: 0,
                max: 50
            },
            message: "请将用户名长度限制在50字以内"
        }]
    }],
    updateDataConnectionStep2 = [{
        field: "config",
        rules: [{
            type: function(t) {
                return !(t && t.length > 2e3)
            },
            message: "请将配置长度限制在2000字以内"
        }]
    }, {
        field: "wideTableMeta",
        rules: [{
            type: function(t) {
                return !(t && t.length > 2e3)
            },
            message: "请将宽表元信息长度限制在2000字以内"
        }]
    }],
    addDatasourceRule = [{
        field: "projectId",
        rules: [{
            type: "isRequired",
            message: "项目ID不能为空"
        }, {
            type: "isInt",
            message: "项目id必须为整型"
        }]
    }, {
        field: "type",
        rules: [{
            type: "isRequired",
            message: "类型不能为空"
        }, {
            type: "isInt",
            message: "类型必须为整型"
        }]
    }, {
        field: "name",
        rules: [{
            type: "isRequired",
            message: "数据源名称不能为空"
        }, {
            type: "isLength",
            range: {
                min: 0,
                max: 100
            },
            message: "请将数据源名称长度限制在100字以内"
        }]
    }, {
        field: "server",
        rules: [{
            type: "isRequired",
            message: "服务器不能为空"
        }, {
            type: "isLength",
            range: {
                min: 0,
                max: 100
            },
            message: "请将服务器长度限制在100字以内"
        }]
    }, {
        field: "port",
        rules: [{
            type: "isRequired",
            message: "端口不能为空"
        }, {
            type: "isLength",
            range: {
                min: 0,
                max: 10
            },
            message: "请将端口长度限制在10字以内"
        }]
    }, {
        field: "database",
        rules: [{
            type: "isRequired",
            message: "数据库不能为空"
        }, {
            type: "isLength",
            range: {
                min: 0,
                max: 100
            },
            message: "请将数据库长度限制在10字以内"
        }]
    }, {
        field: "userName",
        rules: [{
            type: "isRequired",
            message: "用户名不能为空"
        }, {
            type: "isLength",
            range: {
                min: 0,
                max: 50
            },
            message: "请将用户名长度限制在50字以内"
        }]
    }],
    dataConnectionMySqlRule = [{
        field: "name",
        rules: [{
            type: "isRequired",
            message: "数据源名称不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 40
            },
            message: "请将数据源名称长度限制在40字以内"
        }]
    }, {
        field: "server",
        rules: [{
            type: "isRequired",
            message: "服务器不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 100
            },
            message: "请将服务器长度限制在100字以内"
        }]
    }, {
        field: "port",
        rules: [{
            type: "isRequired",
            message: "端口不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 10
            },
            message: "请将端口长度限制在10字以内"
        }]
    }, {
        field: "userName",
        rules: [{
            type: "isRequired",
            message: "用户名不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 50
            },
            message: "请将用户名长度限制在50字以内"
        }]
    }, {
        field: "password",
        rules: [{
            type: "isRequired",
            message: "密码不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 128
            },
            message: "请将密码名称长度限制在128字以内"
        }]
    }, {
        field: "location",
        rules: [{
            type: "isRequired",
            message: "服务器所在地不能为空"
        }]
    }],
    dataConnectionOracleRule = [{
        field: "name",
        rules: [{
            type: "isRequired",
            message: "数据源名称不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 40
            },
            message: "请将数据源名称长度限制在40字以内"
        }]
    }, {
        field: "server",
        rules: [{
            type: "isRequired",
            message: "服务器不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 100
            },
            message: "请将服务器长度限制在100字以内"
        }]
    }, {
        field: "port",
        rules: [{
            type: "isRequired",
            message: "端口不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 10
            },
            message: "请将端口长度限制在10字以内"
        }]
    }, {
        field: "userName",
        rules: [{
            type: "isRequired",
            message: "用户名不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 50
            },
            message: "请将用户名长度限制在50字以内"
        }]
    }, {
        field: "password",
        rules: [{
            type: "isRequired",
            message: "密码不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 128
            },
            message: "请将密码名称长度限制在128字以内"
        }]
    }, {
        field: "SID",
        rules: [{
            type: "isRequired",
            message: "SID不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 128
            },
            message: "请将SID名称长度限制在128字以内"
        }]
    }, {
        field: "location",
        rules: [{
            type: "isRequired",
            message: "服务器所在地不能为空"
        }]
    }],
    dataConnectionHiveRule = [{
        field: "name",
        rules: [{
            type: "isRequired",
            message: "数据源名称不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 40
            },
            message: "请将数据源名称长度限制在40字以内"
        }]
    }, {
        field: "server",
        rules: [{
            type: "isRequired",
            message: "服务器不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 100
            },
            message: "请将服务器长度限制在100字以内"
        }]
    }, {
        field: "port",
        rules: [{
            type: "isRequired",
            message: "端口不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 10
            },
            message: "请将端口长度限制在10字以内"
        }]
    }, {
        field: "authType",
        rules: [{
            type: "isRequired",
            message: "认证方式不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 50
            },
            message: "请将认证方式长度限制在50字以内"
        }]
    }, {
        field: "userName",
        rules: [{
            type: "isLength",
            range: {
                min: 0,
                max: 50
            },
            message: "请将用户名长度限制在50字以内"
        }]
    }, {
        field: "principal",
        rules: [{
            type: "isRequired",
            message: "数据库principal不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 128
            },
            message: "请将数据库principal名称长度限制在128字以内"
        }]
    }, {
        field: "initSql",
        rules: [{
            type: "isLength",
            range: {
                min: 0,
                max: 2e4
            },
            message: "请将数据库initSql名称长度限制在20000字以内"
        }]
    }, {
        field: "location",
        rules: [{
            type: "isRequired",
            message: "服务器所在地不能为空"
        }]
    }],
    dataConnectionHiveNoneRule = [{
        field: "name",
        rules: [{
            type: "isRequired",
            message: "数据源名称不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 40
            },
            message: "请将数据源名称长度限制在40字以内"
        }]
    }, {
        field: "server",
        rules: [{
            type: "isRequired",
            message: "服务器不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 100
            },
            message: "请将服务器长度限制在100字以内"
        }]
    }, {
        field: "port",
        rules: [{
            type: "isRequired",
            message: "端口不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 10
            },
            message: "请将端口长度限制在10字以内"
        }]
    }, {
        field: "authType",
        rules: [{
            type: "isRequired",
            message: "认证方式不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 50
            },
            message: "请将认证方式长度限制在50字以内"
        }]
    }, {
        field: "userName",
        rules: [{
            type: "isLength",
            range: {
                min: 0,
                max: 50
            },
            message: "请将用户名长度限制在50字以内"
        }]
    }, {
        field: "initSql",
        rules: [{
            type: "isLength",
            range: {
                min: 0,
                max: 2e4
            },
            message: "请将数据库initSql名称长度限制在20000字以内"
        }]
    }, {
        field: "location",
        rules: [{
            type: "isRequired",
            message: "服务器所在地不能为空"
        }]
    }],
    dataConnectionExcelRule = [{
        field: "name",
        rules: [{
            type: "isRequired",
            message: "数据源名称不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 40
            },
            message: "请将数据源名称长度限制在40字以内"
        }]
    }],
    dataConnectionKylinRule = [{
        field: "name",
        rules: [{
            type: "isRequired",
            message: "数据源名称不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 40
            },
            message: "请将数据源名称长度限制在40字以内"
        }]
    }, {
        field: "server",
        rules: [{
            type: "isRequired",
            message: "地址不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 100
            },
            message: "请将地址长度限制在100字以内"
        }]
    }, {
        field: "port",
        rules: [{
            type: function(t) {
                if(!t || regInt.test(t)) return !0;
                else return !1
            },
            message: "端口参数必须为整数"
        }]
    }, {
        field: "userName",
        rules: [{
            type: "isRequired",
            message: "用户名不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 50
            },
            message: "请将用户名长度限制在50字以内"
        }]
    }, {
        field: "password",
        rules: [{
            type: "isRequired",
            message: "密码不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 128
            },
            message: "请将密码名称长度限制在128字以内"
        }]
    }, {
        field: "projectName",
        rules: [{
            type: "isRequired",
            message: "项目不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 128
            },
            message: "请将项目名称长度限制在128字以内"
        }]
    }, {
        field: "location",
        rules: [{
            type: "isRequired",
            message: "服务器所在地不能为空"
        }]
    }],
    dataConnectionCheetahRule = [{
        field: "name",
        rules: [{
            type: "isRequired",
            message: "数据源名称不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 40
            },
            message: "请将数据源名称长度限制在40字以内"
        }]
    }, {
        field: "server",
        rules: [{
            type: "isRequired",
            message: "查询节点地址不能为空"
        }, {
            type: "isLength",
            range: {
                min: 0,
                max: 100
            },
            message: "请将查询节点地址长度限制在100字以内"
        }]
    }, {
        field: "port",
        rules: [{
            type: "isRequired",
            message: "查询节点端口不能为空"
        }, {
            type: "isInt",
            message: "请将查询节点端口设置为数值"
        }]
    }, {
        field: "coordinatorHost",
        rules: [{
            type: "isRequired",
            message: "协同节点地址不能为空"
        }, {
            type: "isLength",
            range: {
                min: 0,
                max: 100
            },
            message: "请将协同节点地址长度限制在100字以内"
        }]
    }, {
        field: "coordinatorPort",
        rules: [{
            type: "isRequired",
            message: "协同节点端口不能为空"
        }, {
            type: "isInt",
            message: "请将协同节点端口设置为数值"
        }]
    }, {
        field: "indexHost",
        rules: [{
            type: "isRequired",
            message: "索引节点地址不能为空"
        }, {
            type: "isLength",
            range: {
                min: 0,
                max: 100
            },
            message: "请将索引节点地址长度限制在100字以内"
        }]
    }, {
        field: "indexPort",
        rules: [{
            type: "isRequired",
            message: "索引节点端口不能为空"
        }, {
            type: "isInt",
            message: "请将索引节点端口设置为数值"
        }]
    }, {
        field: "location",
        rules: [{
            type: "isRequired",
            message: "服务器所在地不能为空"
        }]
    }],
    dataConnectionMonetdbRule = [{
        field: "name",
        rules: [{
            type: "isRequired",
            message: "数据源名称不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 40
            },
            message: "请将数据源名称长度限制在40字以内"
        }]
    }, {
        field: "server",
        rules: [{
            type: "isRequired",
            message: "地址不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 100
            },
            message: "请将地址长度限制在100字以内"
        }]
    }, {
        field: "port",
        rules: [{
            type: "isRequired",
            message: "端口不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 10
            },
            message: "请将端口长度限制在10字以内"
        }]
    }, {
        field: "userName",
        rules: [{
            type: "isRequired",
            message: "用户名不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 50
            },
            message: "请将用户名长度限制在50字以内"
        }]
    }, {
        field: "password",
        rules: [{
            type: "isRequired",
            message: "密码不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 128
            },
            message: "请将密码名称长度限制在128字以内"
        }]
    }, {
        field: "DB",
        rules: [{
            type: "isRequired",
            message: "数据库不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 128
            },
            message: "请将数据库名词长度限制在128字以内"
        }]
    }, {
        field: "location",
        rules: [{
            type: "isRequired",
            message: "服务器所在地不能为空"
        }]
    }],
    dataConnectionAdditionRule = [{
        field: "name",
        rules: [{
            type: "isRequired",
            message: "数据源名称不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 40
            },
            message: "请将数据源名称长度限制在40字以内"
        }]
    }],
    dataConnectionImpalaRule = [{
        field: "name",
        rules: [{
            type: "isRequired",
            message: "数据源名称不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 40
            },
            message: "请将数据源名称长度限制在40字以内"
        }]
    }, {
        field: "authType",
        rules: [{
            type: "isRequired",
            message: "认证方式不能为空"
        }, {
            type: "isLength",
            range: {
                min: 1,
                max: 50
            },
            message: "请将认证方式长度限制在50字以内"
        }]
    }, {
        field: "userName",
        rules: [{
            type: "isLength",
            range: {
                min: 0,
                max: 50
            },
            message: "请将用户名长度限制在50字以内"
        }]
    }, {
        field: "initSql",
        rules: [{
            type: "isLength",
            range: {
                min: 0,
                max: 2e4
            },
            message: "请将数据库initSql名称长度限制在20000字以内"
        }]
    }, {
        field: "location",
        rules: [{
            type: "isRequired",
            message: "服务器所在地不能为空"
        }]
    }, {
        field: "jdbcUrl",
        rules: [{
            type: "isRequired",
            message: "JDBC连接不能为空"
        }]
    }];
var updateDataConnectionStep2 = [{
    field: "config",
    rules: [{
        type: function(t) {
            return !(t && t.length > 2e3)
        },
        message: "请将配置长度限制在2000字以内"
    }]
}, {
    field: "wideTableMeta",
    rules: [{
        type: function(t) {
            return !(t && t.length > 2e3)
        },
        message: "请将宽表元信息长度限制在2000字以内"
    }]
}];
var addDatasourceRule = [{
    field: "projectId",
    rules: [{
        type: "isRequired",
        message: "项目ID不能为空"
    }, {
        type: "isInt",
        message: "项目id必须为整型"
    }]
}, {
    field: "type",
    rules: [{
        type: "isRequired",
        message: "类型不能为空"
    }, {
        type: "isInt",
        message: "类型必须为整型"
    }]
}, {
    field: "name",
    rules: [{
        type: "isRequired",
        message: "数据源名称不能为空"
    }, {
        type: "isLength",
        range: {
            min: 0,
            max: 100
        },
        message: "请将数据源名称长度限制在100字以内"
    }]
}, {
    field: "server",
    rules: [{
        type: "isRequired",
        message: "服务器不能为空"
    }, {
        type: "isLength",
        range: {
            min: 0,
            max: 100
        },
        message: "请将服务器长度限制在100字以内"
    }]
}, {
    field: "port",
    rules: [{
        type: "isRequired",
        message: "端口不能为空"
    }, {
        type: "isLength",
        range: {
            min: 0,
            max: 10
        },
        message: "请将端口长度限制在10字以内"
    }]
}, {
    field: "database",
    rules: [{
        type: "isRequired",
        message: "数据库不能为空"
    }, {
        type: "isLength",
        range: {
            min: 0,
            max: 100
        },
        message: "请将数据库长度限制在10字以内"
    }]
}, {
    field: "userName",
    rules: [{
        type: "isRequired",
        message: "用户名不能为空"
    }, {
        type: "isLength",
        range: {
            min: 0,
            max: 50
        },
        message: "请将用户名长度限制在50字以内"
    }]
}];
var dataConnectionMySqlRule = [{
    field: "name",
    rules: [{
        type: "isRequired",
        message: "数据源名称不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 40
        },
        message: "请将数据源名称长度限制在40字以内"
    }]
}, {
    field: "server",
    rules: [{
        type: "isRequired",
        message: "服务器不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 100
        },
        message: "请将服务器长度限制在100字以内"
    }]
}, {
    field: "port",
    rules: [{
        type: "isRequired",
        message: "端口不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 10
        },
        message: "请将端口长度限制在10字以内"
    }]
}, {
    field: "userName",
    rules: [{
        type: "isRequired",
        message: "用户名不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 50
        },
        message: "请将用户名长度限制在50字以内"
    }]
}, {
    field: "password",
    rules: [{
        type: "isRequired",
        message: "密码不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 128
        },
        message: "请将密码名称长度限制在128字以内"
    }]
}, {
    field: "location",
    rules: [{
        type: "isRequired",
        message: "服务器所在地不能为空"
    }]
}];
var dataConnectionOracleRule = [{
    field: "name",
    rules: [{
        type: "isRequired",
        message: "数据源名称不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 40
        },
        message: "请将数据源名称长度限制在40字以内"
    }]
}, {
    field: "server",
    rules: [{
        type: "isRequired",
        message: "服务器不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 100
        },
        message: "请将服务器长度限制在100字以内"
    }]
}, {
    field: "port",
    rules: [{
        type: "isRequired",
        message: "端口不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 10
        },
        message: "请将端口长度限制在10字以内"
    }]
}, {
    field: "userName",
    rules: [{
        type: "isRequired",
        message: "用户名不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 50
        },
        message: "请将用户名长度限制在50字以内"
    }]
}, {
    field: "password",
    rules: [{
        type: "isRequired",
        message: "密码不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 128
        },
        message: "请将密码名称长度限制在128字以内"
    }]
}, {
    field: "SID",
    rules: [{
        type: "isRequired",
        message: "SID不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 128
        },
        message: "请将SID名称长度限制在128字以内"
    }]
}, {
    field: "location",
    rules: [{
        type: "isRequired",
        message: "服务器所在地不能为空"
    }]
}];
var dataConnectionHiveRule = [{
    field: "name",
    rules: [{
        type: "isRequired",
        message: "数据源名称不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 40
        },
        message: "请将数据源名称长度限制在40字以内"
    }]
}, {
    field: "server",
    rules: [{
        type: "isRequired",
        message: "服务器不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 100
        },
        message: "请将服务器长度限制在100字以内"
    }]
}, {
    field: "port",
    rules: [{
        type: "isRequired",
        message: "端口不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 10
        },
        message: "请将端口长度限制在10字以内"
    }]
}, {
    field: "authType",
    rules: [{
        type: "isRequired",
        message: "认证方式不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 50
        },
        message: "请将认证方式长度限制在50字以内"
    }]
}, {
    field: "userName",
    rules: [{
        type: "isLength",
        range: {
            min: 0,
            max: 50
        },
        message: "请将用户名长度限制在50字以内"
    }]
}, {
    field: "principal",
    rules: [{
        type: "isRequired",
        message: "数据库principal不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 128
        },
        message: "请将数据库principal名称长度限制在128字以内"
    }]
}, {
    field: "initSql",
    rules: [{
        type: "isLength",
        range: {
            min: 0,
            max: 2e4
        },
        message: "请将数据库initSql名称长度限制在20000字以内"
    }]
}, {
    field: "location",
    rules: [{
        type: "isRequired",
        message: "服务器所在地不能为空"
    }]
}];
var dataConnectionHiveNoneRule = [{
    field: "name",
    rules: [{
        type: "isRequired",
        message: "数据源名称不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 40
        },
        message: "请将数据源名称长度限制在40字以内"
    }]
}, {
    field: "server",
    rules: [{
        type: "isRequired",
        message: "服务器不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 100
        },
        message: "请将服务器长度限制在100字以内"
    }]
}, {
    field: "port",
    rules: [{
        type: "isRequired",
        message: "端口不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 10
        },
        message: "请将端口长度限制在10字以内"
    }]
}, {
    field: "authType",
    rules: [{
        type: "isRequired",
        message: "认证方式不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 50
        },
        message: "请将认证方式长度限制在50字以内"
    }]
}, {
    field: "userName",
    rules: [{
        type: "isLength",
        range: {
            min: 0,
            max: 50
        },
        message: "请将用户名长度限制在50字以内"
    }]
}, {
    field: "initSql",
    rules: [{
        type: "isLength",
        range: {
            min: 0,
            max: 2e4
        },
        message: "请将数据库initSql名称长度限制在20000字以内"
    }]
}, {
    field: "location",
    rules: [{
        type: "isRequired",
        message: "服务器所在地不能为空"
    }]
}];
var dataConnectionExcelRule = [{
    field: "name",
    rules: [{
        type: "isRequired",
        message: "数据源名称不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 40
        },
        message: "请将数据源名称长度限制在40字以内"
    }]
}];
var dataConnectionKylinRule = [{
    field: "name",
    rules: [{
        type: "isRequired",
        message: "数据源名称不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 40
        },
        message: "请将数据源名称长度限制在40字以内"
    }]
}, {
    field: "server",
    rules: [{
        type: "isRequired",
        message: "地址不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 100
        },
        message: "请将地址长度限制在100字以内"
    }]
}, {
    field: "port",
    rules: [{
        type: function(t) {
            if(!t || regInt.test(t)) return !0;
            else return !1
        },
        message: "端口参数必须为整数"
    }]
}, {
    field: "userName",
    rules: [{
        type: "isRequired",
        message: "用户名不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 50
        },
        message: "请将用户名长度限制在50字以内"
    }]
}, {
    field: "password",
    rules: [{
        type: "isRequired",
        message: "密码不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 128
        },
        message: "请将密码名称长度限制在128字以内"
    }]
}, {
    field: "projectName",
    rules: [{
        type: "isRequired",
        message: "项目不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 128
        },
        message: "请将项目名称长度限制在128字以内"
    }]
}, {
    field: "location",
    rules: [{
        type: "isRequired",
        message: "服务器所在地不能为空"
    }]
}];
var dataConnectionCheetahRule = [{
    field: "name",
    rules: [{
        type: "isRequired",
        message: "数据源名称不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 40
        },
        message: "请将数据源名称长度限制在40字以内"
    }]
}, {
    field: "server",
    rules: [{
        type: "isRequired",
        message: "查询节点地址不能为空"
    }, {
        type: "isLength",
        range: {
            min: 0,
            max: 100
        },
        message: "请将查询节点地址长度限制在100字以内"
    }]
}, {
    field: "port",
    rules: [{
        type: "isRequired",
        message: "查询节点端口不能为空"
    }, {
        type: "isInt",
        message: "请将查询节点端口设置为数值"
    }]
}, {
    field: "coordinatorHost",
    rules: [{
        type: "isRequired",
        message: "协同节点地址不能为空"
    }, {
        type: "isLength",
        range: {
            min: 0,
            max: 100
        },
        message: "请将协同节点地址长度限制在100字以内"
    }]
}, {
    field: "coordinatorPort",
    rules: [{
        type: "isRequired",
        message: "协同节点端口不能为空"
    }, {
        type: "isInt",
        message: "请将协同节点端口设置为数值"
    }]
}, {
    field: "indexHost",
    rules: [{
        type: "isRequired",
        message: "索引节点地址不能为空"
    }, {
        type: "isLength",
        range: {
            min: 0,
            max: 100
        },
        message: "请将索引节点地址长度限制在100字以内"
    }]
}, {
    field: "indexPort",
    rules: [{
        type: "isRequired",
        message: "索引节点端口不能为空"
    }, {
        type: "isInt",
        message: "请将索引节点端口设置为数值"
    }]
}, {
    field: "location",
    rules: [{
        type: "isRequired",
        message: "服务器所在地不能为空"
    }]
}];
var dataConnectionMonetdbRule = [{
    field: "name",
    rules: [{
        type: "isRequired",
        message: "数据源名称不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 40
        },
        message: "请将数据源名称长度限制在40字以内"
    }]
}, {
    field: "server",
    rules: [{
        type: "isRequired",
        message: "地址不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 100
        },
        message: "请将地址长度限制在100字以内"
    }]
}, {
    field: "port",
    rules: [{
        type: "isRequired",
        message: "端口不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 10
        },
        message: "请将端口长度限制在10字以内"
    }]
}, {
    field: "userName",
    rules: [{
        type: "isRequired",
        message: "用户名不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 50
        },
        message: "请将用户名长度限制在50字以内"
    }]
}, {
    field: "password",
    rules: [{
        type: "isRequired",
        message: "密码不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 128
        },
        message: "请将密码名称长度限制在128字以内"
    }]
}, {
    field: "DB",
    rules: [{
        type: "isRequired",
        message: "数据库不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 128
        },
        message: "请将数据库名词长度限制在128字以内"
    }]
}, {
    field: "location",
    rules: [{
        type: "isRequired",
        message: "服务器所在地不能为空"
    }]
}];
var dataConnectionAdditionRule = [{
    field: "name",
    rules: [{
        type: "isRequired",
        message: "数据源名称不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 40
        },
        message: "请将数据源名称长度限制在40字以内"
    }]
}];
var dataConnectionImpalaRule = [{
    field: "name",
    rules: [{
        type: "isRequired",
        message: "数据源名称不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 40
        },
        message: "请将数据源名称长度限制在40字以内"
    }]
}, {
    field: "authType",
    rules: [{
        type: "isRequired",
        message: "认证方式不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 50
        },
        message: "请将认证方式长度限制在50字以内"
    }]
}, {
    field: "userName",
    rules: [{
        type: "isLength",
        range: {
            min: 0,
            max: 50
        },
        message: "请将用户名长度限制在50字以内"
    }]
}, {
    field: "initSql",
    rules: [{
        type: "isLength",
        range: {
            min: 0,
            max: 2e4
        },
        message: "请将数据库initSql名称长度限制在20000字以内"
    }]
}, {
    field: "location",
    rules: [{
        type: "isRequired",
        message: "服务器所在地不能为空"
    }]
}, {
    field: "jdbcUrl",
    rules: [{
        type: "isRequired",
        message: "JDBC连接不能为空"
    }]
}];
if("undefined" == typeof exports) {
    if("object" != typeof window.bigvizValidateRule) window.bigvizValidateRule = {};
    bigvizValidateRule.updateDataConnectionStep1 = updateDataConnectionStep1;
    bigvizValidateRule.updateDataConnectionStep2 = updateDataConnectionStep2;
    bigvizValidateRule.addDatasourceRule = addDatasourceRule;
    bigvizValidateRule.dataConnectionMySqlRule = dataConnectionMySqlRule;
    bigvizValidateRule.dataConnectionOracleRule = dataConnectionOracleRule;
    bigvizValidateRule.dataConnectionHiveRule = dataConnectionHiveRule;
    bigvizValidateRule.dataConnectionHiveNoneRule = dataConnectionHiveNoneRule;
    bigvizValidateRule.dataConnectionExcelRule = dataConnectionExcelRule;
    bigvizValidateRule.dataConnectionKylinRule = dataConnectionKylinRule;
    bigvizValidateRule.dataConnectionCheetahRule = dataConnectionCheetahRule;
    bigvizValidateRule.dataConnectionMonetdbRule = dataConnectionMonetdbRule;
    bigvizValidateRule.dataConnectionAdditionRule = dataConnectionAdditionRule;
    bigvizValidateRule.dataConnectionImpalaRule = dataConnectionImpalaRule
} else {
    exports.updateDataConnectionStep1 = updateDataConnectionStep1;
    exports.updateDataConnectionStep2 = updateDataConnectionStep2;
    exports.addDatasourceRule = addDatasourceRule;
    exports.dataConnectionMySqlRule = dataConnectionMySqlRule;
    exports.dataConnectionOracleRule = dataConnectionOracleRule;
    exports.dataConnectionHiveRule = dataConnectionHiveRule;
    exports.dataConnectionHiveNoneRule = dataConnectionHiveNoneRule;
    exports.dataConnectionExcelRule = dataConnectionExcelRule;
    exports.dataConnectionKylinRule = dataConnectionKylinRule;
    exports.dataConnectionCheetahRule = dataConnectionCheetahRule;
    exports.dataConnectionMonetdbRule = dataConnectionMonetdbRule;
    exports.dataConnectionAdditionRule = dataConnectionAdditionRule;
    exports.dataConnectionImpalaRule = dataConnectionImpalaRule
}
I$(62, function(t, e, i, n, r, a) {
    var s = {};
    s._$$DataConnection = e._$klass();
    var o = s._$$DataConnection._$extend(a._$$Cache);
    o.__doLoadList = function(t) {
        var e = t.onload,
            i = t.data || {};
        n._$request("/api/dataConnections/", {
            type: "json",
            data: i,
            onload: function(t) {
                e(200 == t.code ? t.result : null)
            }
        })
    };
    o.__doDeleteItem = function(e) {
        var i = e.onload,
            r = {
                    id: e.data.id
                } || {};
        n._$request("/api/dataConnection/{id}/", {
            method: "delete",
            param: r,
            onload: function(e) {
                if(200 != e.code) t.message(e.message || "删除失败!", "err");
                i(200 == e.code ? e.result : null)
            }
        })
    };
    o._$getDataConnectionList = function(t) {
        var e = t.data || {};
        n._$request("/api/dataConnections/", {
            method: "get",
            type: "json",
            data: e,
            onload: this._$dispatchEvent._$bind(this, "getDataConnectionList"),
            onerror: this._$dispatchEvent._$bind(this, "getDataConnectionList")
        })
    };
    o._$getDataConnection = function(t) {
        var e = t.data;
        n._$request("/api/dataConnection/{id}/", {
            method: "get",
            type: "json",
            param: e,
            onload: this._$dispatchEvent._$bind(this, "getDataConnection"),
            onerror: this._$dispatchEvent._$bind(this, "getDataConnection")
        })
    };
    o._$getReportDataSource = function(t) {
        var e = t.data;
        n._$request("/api/reportDataSource/{id}/", {
            method: "get",
            type: "json",
            param: e,
            onload: this._$dispatchEvent._$bind(this, "getReportDataSource"),
            onerror: this._$dispatchEvent._$bind(this, "getReportDataSource")
        })
    };
    o._$updateReportDataSource = function(t, e) {
        var i = t.data;
        n._$request("/api/reportDataSource/" + e + "/", {
            type: "json",
            method: "put",
            param: i,
            onload: this._$dispatchEvent._$bind(this, "updateReportDataSource"),
            onerror: this._$dispatchEvent._$bind(this, "updateReportDataSource")
        })
    };
    o._$addDataConnection = function(t) {
        var e = t.data;
        n._$request("/api/dataConnection/", {
            type: "json",
            method: "post",
            param: e,
            onload: this._$dispatchEvent._$bind(this, "addDataConnection"),
            onerror: this._$dispatchEvent._$bind(this, "addDataConnection")
        })
    };
    o._$updateDataConnection = function(t, e) {
        var i = t.data;
        n._$request("/api/dataConnection/" + e + "/", {
            type: "json",
            method: "put",
            param: i,
            onload: this._$dispatchEvent._$bind(this, "updateDataConnection"),
            onerror: this._$dispatchEvent._$bind(this, "updateDataConnection")
        })
    };
    o._$getDataBaseList = function(t) {
        var e = t.data,
            i = this._$dispatchEvent._$bind(this, "getDataBaseList");
        n._$request("/api/databases/", {
            type: "json",
            method: "get",
            param: e,
            onload: i,
            onerror: i
        })
    };
    o._$doDataConnectionCheck = function(t) {
        var e = t.data,
            i = this._$dispatchEvent._$bind(this, "doDataConnectionCheck");
        n._$request("/api/dataConnection/check", {
            type: "json",
            method: "get",
            param: e,
            onload: i,
            onerror: i
        })
    };
    o._$doDataConnectionTest = function(t) {
        var e = t.data,
            i = this._$dispatchEvent._$bind(this, "doDataConnectionTest");
        n._$request("/api/dataConnection/test", {
            type: "json",
            method: "post",
            param: e,
            onload: i,
            onerror: i
        })
    };
    o._$doAddPermission = function(t) {
        var e = t.data,
            i = this._$dispatchEvent._$bind(this, "doAddPermission");
        n._$request("/api/dataConnection/getAddPermission", {
            type: "json",
            method: "get",
            param: e,
            onload: i,
            onerror: i
        })
    };
    o._$getCopyName = function(t) {
        var e = this._$dispatchEvent._$bind(this, "getCopyName");
        n._$request("/api/dataConnection/getCopyName", {
            type: "json",
            method: "get",
            param: t,
            onload: e,
            onerror: e
        })
    };
    o._$copy = function(t) {
        var e = this._$dispatchEvent._$bind(this, "copy");
        n._$request("/api/dataConnection/copy", {
            type: "json",
            method: "post",
            param: t,
            onload: e,
            onerror: e
        })
    };
    o._$fileUpload = function(t) {
        t.action = "/api/dataConnection/upload";
        r._$upload(t, {
            type: "json",
            onload: this._$dispatchEvent._$bind(this, "onfileupload"),
            onerror: this._$dispatchEvent._$bind(this, "onfileupload")
        })
    };
    o._$filesUpload = function(t) {
        t.action = "/api/dataConnection/uploads";
        r._$upload(t, {
            type: "json",
            onload: this._$dispatchEvent._$bind(this, "onfilesupload"),
            onerror: this._$dispatchEvent._$bind(this, "onfilesupload")
        })
    };
    o._$checkExist = function(t) {
        var e = this._$dispatchEvent._$bind(this, "checkExist");
        n._$request("/api/dataConnection/checkExist", {
            type: "json",
            method: "post",
            param: t,
            onload: e,
            onerror: e
        })
    };
    o._$flush = function(t) {
        return new Promise(function(e, i) {
            n._$request("/api/dataConnection/updateFlushTimeByDataConnection", {
                type: "json",
                method: "GET",
                param: t,
                onload: e,
                onerror: i
            })
        })
    };
    return s
}, 7, 1, 4, 137, 139, 138);
I$(232, '<div class="m-modal-influence">\n\t{#list infolist as info by info_index}\n\t\t<div>\n\t\t\t<div class="line">\n\t\t\t\t<span>{info.note}</span>\n\t\t\t\t<div class ="btn" on-click={this.showDetails(info_index)}>查看详情<span class="u-icn " r-class={{\'u-icn-arr2\': !info.open, \'u-icn-arr2-flip\': info.open}}></span></div>\n\t\t\t</div>\n\t\t\t{#if info.open}\n\t\t\t\t<div class="line line-1">{info.message}</div>\n\t\t\t{/if}\n\t\t</div>\t\t\t\n\t{/list}\t\n</div>');
I$(64, function(t, e, i) {
    var n = i.extend({
        name: "pim-password-modal",
        $body: e,
        data: {
            confirmText: "应用",
            autoRecycleRequest: !1,
            title: "提示"
        },
        config: function(t) {
            this.supr(t);
            this.$on("confirm", function(t) {
                if(t.accept) this.save();
                else this.destroy()
            })
        },
        init: function() {
            this.supr()
        },
        save: function() {
            this.$emit("save");
            this.destroy()
        },
        showDetails: function(t) {
            var e = this.data.infolist;
            e[t].open = !e[t].open;
            this.$update()
        }
    });
    return n
}, 7, 232, 185);
I$(71, function(t) {
    var e = t.DS_TYPE,
        i = /^(?:[-+]?(?:0|[1-9][0-9]*))$/;
    return {
        DS_TYPE: e,
        regInt: i
    }
}, 136);
I$(239, '<div class="formrow" >\n<label class="tal" style="padding-top:20px;">缓存设置</label>\n</div>\n<div class="formrow">\n<label>数据更新频率：</label>\n<div class="formcnt">\n<span class="u-txtwrap">\n<select class="u-txt" name="frequency" r-model=\'frequency\'>\n<option value=4 >每天</option>\n<option value=3>每小时</option>\n<option value=2>每分钟</option>\n<option value=1>每秒</option>\n</select>\n</span>\n</div>\n</div>\n<div class="formrow">\n<label>更新开始时间：</label>\n<div class="formcnt">\n<datepick-1 ref=datepick1></datepick-1>\n</div>\n</div>\n{#if type == 1 && did !== undefined}\n<div class="formrow">\n<label></label>\n<div class="formcnt">\n<div class="u-btn u-btn-1" on-click={this.flush()}>手动刷新数据</div>\n</div>\n</div>\n{/if}');
I$(434, '<div class="m-datepick">\n    <div class="u-txt u-txt-h1 datepick-txt" on-click={this.dateShow()} r-class={{\'z-act\':dateShow==true}} ref="datepickIpt">\n        <div class="date">{from} {#if isHMS}{h}:{m}:{s}{/if}</div>\n        <div class="u-icn u-icn-date2 icn-date"></div>\n    </div>\n    <div class="date-box" r-hide="dshow !== true" on-clickouter={[dshow=false]}>\n        <div>\n            <div class="wrap wrap1">\n                <div class="box" ref="datepick1"></div>\n                {#if isHMS}\n                <div class="hms">\n                    <!-- <input class="checkbox" type="checkbox" r-model="isCheckHMS" /> -->\n                    <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" {#if !isCheckHMS}disabled{/if} on-blur={this.blur(\'h\')} r-model="h|hour" />:\n                    <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" {#if !isCheckHMS}disabled{/if} on-blur={this.blur(\'m\')}  r-model="m|time60" />:\n                    <input type="text" class="u-txt u-txt-h1 u-txt-d1 ipt" {#if !isCheckHMS}disabled{/if} on-blur={this.blur(\'s\')}  r-model="s|time60" />\n                </div>\n                {/if}\n            </div>\n        </div>\n        <div class="close u-icn u-icn-close" on-click={this.dateHide()}></div>\n    </div>\n</div>\n');
I$(240, function(t, e, i, n) {
    var r = Regular.extend({
        data: {
            isHMS: !0,
            isCheckHMS: !0,
            h: "00",
            m: "00",
            s: "00"
        },
        template: i,
        name: "datepick-1",
        config: function(e) {
            e.dateShow = !1;
            e.dshow = !1;
            e.newDay = t._$format(new Date, "yyyy-MM-dd");
            e.from = e.newDay
        },
        init: function() {
            this.data
        },
        update: function() {
            this.$update()
        },
        getData: function() {
            var t = this.data;
            if(t.isHMS && t.isCheckHMS) return t.from + " " + t.h + ":" + t.m + ":" + t.s;
            else return t.from
        },
        blur: function(t) {
            var e = this.data;
            if(0 === e[t].length) e[t] = "00";
            if(1 === e[t].length) e[t] = "0" + e[t]
        },
        dateShow: function() {
            var t = this.data;
            t.dshow = !0;
            this.allocateDate()
        },
        dateHide: function() {
            this.data.dshow = !1
        },
        allocateDate: function() {
            var e = this,
                i = this.data;
            this.recycleDate();
            i.dateShow = !0;
            i.options = {
                parent: this.$refs.datepick1,
                clazz: "datepick",
                date: i.from,
                maskDate: i.newDay,
                onchange: function(n) {
                    i.from = t._$format(n, "yyyy-MM-dd");
                    e.$update()
                }
            };
            i.datepick = n._$$DatePick._$allocate(i.options)
        },
        recycleDate: function() {
            var t = this.data;
            t.dateShow = !1;
            if(t.datepick) t.datepick._$recycle();
            this.$update()
        }
    }).filter({
        time60: {
            set: function(t) {
                var e = "00";
                if(isNaN(t)) return e;
                if(3 == t.length) t = t.substr(0, 2);
                if(+t > 59 || +t < 0) t = e;
                return t
            },
            get: function(t) {
                return t
            }
        },
        hour: {
            set: function(t) {
                var e = "00";
                if(isNaN(t)) return e;
                if(3 == t.length) t = t.substr(0, 2);
                if(+t > 23 || +t < 0) t = e;
                return t
            },
            get: function(t) {
                return t
            }
        }
    });
    return r
}, 4, 7, 434, 373);
I$(74, function(t, e, i, n, r) {
    var a = new n._$$DataConnection,
        s = Regular.extend({
            data: {
                type: 0
            },
            template: i,
            config: function(e) {
                e.frequency = e.frequency || 4;
                e.flushStartTime = e.flushStartTime || t._$format(new Date, "yyyy-MM-dd")
            },
            init: function() {
                var t = this.data,
                    e = this.$refs.datepick1,
                    i = this.format(t.flushStartTime);
                e.data.from = i.from;
                e.data.h = i.h;
                e.data.m = i.m;
                e.data.s = i.s;
                e.update()
            },
            format: function(t) {
                var e = t.split(" "),
                    i = (e[1] || "00:00:00").split(":");
                return {
                    from: e[0],
                    h: i[0],
                    m: i[1],
                    s: i[2]
                }
            },
            flush: function() {
                var t = this.data;
                a._$flush({
                    dataConnectionId: t.did
                }).then(function(t) {
                    if(200 === t.code) e.message("刷新成功", "ok");
                    else e.message(t.message)
                })
            },
            getData: function() {
                var t = this.data;
                return {
                    frequency: t.frequency,
                    flushStartTime: this.$refs.datepick1.getData()
                }
            }
        });
    return s
}, 4, 7, 239, 62, 240);
I$(364, '<div class="m-field">\n  <div class="col-1">\n    <form class="m-form">\n      <div class="formrow">\n        <label>名称</label>\n        <div class="formcnt">\n          <span class="u-txtwrap" ref="name">            \n            <input type="text" class="u-txt" on-change={this.changeName("name")} on-focus={this.hideError("name")} placeholder="请输入名称" r-model={name} ref="nameInput"/>\n          </span>\n        </div>\n      </div>\n      <div class="formrow">\n        <label>表达式</label>\n        <div class="formcnt">\n          <span class="u-txtwrap u-code-input" ref="expression">           \n            <div class="u-txt u-txt-area expshow" ref="showexpression" on-scroll={this.scrollBar1($event)} >\n            </div> \n            <dropable-report name=\'field\' on-toucheddrop={this.drop(\'field\',$event)} on-touchedenter={this.dragenter(\'field\')} on-touchedleave={this.dragleave()}>\n              <textarea class="u-txt u-txt-area expinput u-code-input" rows="5" spellcheck="false" ref="expressionInput"  on-focus={this.hideError("expression")} r-model={expression} on-input={this.expreInput()} on-scroll={this.scrollBar($event)} ></textarea>\n            </dropable-report>\n          </span> \n        </div>\n      </div>\n    </form>\n  </div>\n  \n  <div class="col-2">\n    <field-expression on-syntax={this.enterSyntax($event)}></field-expression>\n  </div>\n</div>');
if("undefined" != typeof exports) Validator = require("./validator.js");
var rules = [{
    field: "name",
    rules: [{
        type: function(t) {
            return t.length < 40
        },
        message: "名称长度不能大于40"
    }, {
        type: function(t) {
            return !!t
        },
        message: "名称不可以为空"
    }],
    node: "name"
}, {
    field: "expression",
    rules: [{
        type: function(t) {
            return !!t
        },
        message: "表达式不可以为空"
    }],
    node: "expression"
}];
if("undefined" == typeof exports) {
    if("object" != typeof window.bigvizValidateRule) window.bigvizValidateRule = {};
    bigvizValidateRule.field = rules
} else;
I$(525, '<div class="m-note">\n    <div class="col-1 ">\n        <div class="search">\n            <input type="text" placeholder="输入关键字搜索" ref=\'search\' on-input={this.enter()}/>\n            <i class="u-icn u-icn-search" de-click={this.enter()}></i>\n        </div>\n        <div class="expname">\n            {#list function_list as exp}\n            <div class="fun" r-class={{ \'z-crt\':showIndex==exp_index}} on-click={showIndex=exp_index} title={exp.name} r-hide={exp.isHide} de-dblclick={this.doubleClick(exp)}>{exp.name}</div>\n            {/list}\n            <div class="noout" r-hide={!isAllHide}>没有符合的结果</div>\n        </div>\n    </div>\n  <div class="col-2">\n    <div class="expdes">\n      <div class="tit" title={function_list[showIndex].expression}>{function_list[showIndex].expression}</div>\n      <div class="des">{function_list[showIndex].description}</div>\n      <div class="example"><span>示例: </span>{function_list[showIndex].example}</div>\n    </div>\n  </div>\n    <div class="col2bt">\n        {# if deployType === \'online\'}\n            <a href="/index/manual/o/p4/4411.html" target="_blank">帮助中心</a>\n        {# elseif deployType === \'netease\' }\n            <a href="/index/manual/n/p4/4411.html" target="_blank">帮助中心</a>\n        {# elseif deployType === \'private\' }\n            <a href="/index/manual/p/p4/4411.html" target="_blank">帮助中心</a>\n        {/if}\n    </div>\n</div>\n');
I$(366, function(t, e) {
    var i = (Regular.dom, Regular.extend({
        name: "field-expression",
        template: t,
        data: {
            showIndex: 0,
            isAllHide: !1,
            function_list: e.FUNCTION_LIST
        },
        config: function(t) {
            this.supr(t);
            t.function_list.forEach(function(t) {
                t.isHide = !1
            });
            t.deployType = window.deployType
        },
        enter: function() {
            var t = this.$refs.search.value;
            t = t.toLowerCase();
            this.data.isAllHide = !0;
            var e = this;
            this.data.function_list.forEach(function(i, n) {
                if(i.name.toLowerCase().indexOf(t) !== -1 || i.description.toLowerCase().indexOf(t) !== -1 || i.expression.toLowerCase().indexOf(t) !== -1) {
                    i.isHide = !1;
                    e.data.isAllHide = !1
                } else i.isHide = !0
            })
        },
        doubleClick: function(t) {
            this.$emit("syntax", t.syntax)
        }
    }));
    return i
}, 525, 136);
I$(174, function(t, e) {
    var i = ReDnd.util,
        n = Regular.dom,
        r = document.compareDocumentPosition ? function(t, e) {
            if(!t.compareDocumentPosition || !e.compareDocumentPosition) return 0;
            else return 4 & t.compareDocumentPosition(e) ? -1 : t === e ? 0 : 1
        } : function(t, e) {
            if(!t.sourceIndex || !e.sourceIndex) return 0;
            else return t.sourceIndex - e.sourceIndex
        };
    ReDnd.Dropable.extend({
        name: "dropable-report",
        config: function(t) {
            this.supr(t);
            this.drags = [];
            this.$on("add_drag", function(t) {
                var e = this;
                this.addDrag(t);
                t.$on("$destroy", function() {
                    e.delDrag(t)
                })
            })
        },
        init: function() {
            this.supr();
            var t = this.data,
                e = [],
                r = [],
                a = t.range || 8;
            this.$on("dragenter", function() {
                var t = this.drags,
                    n = this.offset;
                e = [];
                t.forEach(function(t) {
                    e.push(i.getDimension(t.node))
                });
                r = e.map(function(t) {
                    return {
                        left: t.left - n.left - a,
                        top: t.top - n.top - a,
                        width: t.width + 2 * a,
                        height: t.height + 2 * a
                    }
                });
                this.$emit("touchedenter")
            });
            this.$on("dragmove", function(t) {
                var e = (this.offset, this.drags),
                    i = this.getInRanges(t.position, r);
                t.touchedInfo = i;
                if(i) {
                    this.computePostion(i, t.drag);
                    var a = i.injectAt;
                    if(void 0 != a) {
                        var s = e[a < 0 ? 0 : a].node,
                            o = a === -1 ? "dragable-before" : "dragable-after";
                        this.releaseTouch();
                        if(!n.hasClass(s, o)) n.addClass(s, o);
                        else;
                    }
                } else this.releaseTouch();
                this.$emit("touchedmove", t)
            });
            this.$on("dragleave", function() {
                this.releaseTouch();
                this.$emit("touchedleave")
            });
            this.$on("dragdrop", function(t) {
                var e = (this.offset, this.drags, this.getInRanges(t.position, r));
                t.touchedInfo = e;
                if(e) this.computePostion(e, t.drag, t.position);
                else e = {
                    drag: t.drag,
                    drop: t.drop
                };
                this.releaseTouch();
                this.$emit("toucheddrop", t)
            })
        },
        releaseTouch: function() {
            var t = this.drags;
            t.forEach(function(t) {
                var e = t.node,
                    i = e.className;
                e.className = i.replace(/\s*dragable-(after|before)\s*/g, "")
            })
        },
        getInRanges: function(t, e) {
            var n, r, a = this.data.direct,
                s = e.length,
                o = i.getInRanges(t, e);
            if(o || !s) return o;
            else if("y" === a) {
                if(t.top < e[0].top) {
                    n = -1;
                    r = 0
                }
                if(t.top > e[e.length - 1].top) r = n = s - 1
            } else {
                if(t.left < e[0].left) {
                    n = -1;
                    r = 0
                }
                if(t.left > e[e.length - 1].left) r = n = s - 1
            }
            return null != r ? {
                injectAt: n,
                index: r
            } : null
        },
        computePostion: function(t, e, i) {
            var n = this.data,
                r = t.dimension,
                a = (t.touched, t.index),
                s = n.direct,
                o = this.drags.indexOf(e);
            t.selfIndex = o;
            if(null != t.injectAt) return t;
            if(!/^(x|y)$/.test(s)) s = "x";
            var l, c = 1 * r.width / 2,
                u = 1 * r.width / 2,
                d = 1 * r.height / 2,
                h = 1 * r.height / 2;
            if("x" === s)
                if(r.left > u) l = a;
                else if(r.left < c) l = a - 1;
            if("y" === s)
                if(r.top > h) l = a;
                else if(r.top < d) l = a - 1;
            t.injectAt = l
        },
        addDrag: function(t) {
            var e = this.drags;
            e.push(t);
            setTimeout(function() {
                e.sort(function(t, e) {
                    return r(t.node, e.node)
                })
            })
        },
        delDrag: function(t) {
            for(var e = this.drags, i = e.length; i--;)
                if(e[i] === t) return e.splice(i, 1)
        }
    })
}, 7, 173);
I$(184, function(t, e, i, n, r, a, s, o, l, c, u, d) {
    var h, f = (a.cache, a.getFieldType, a.recombineField),
        p = a.getAlias2IdMap,
        _ = a.getId2AliasMap,
        m = a.filterCalculateArray,
        g = a.recombineOtherField,
        v = Regular.dom,
        d = window.bigvizValidateRule.field,
        y = l.extend({
            name: "field-modal",
            $body: s,
            data: {
                inputDetect: !0,
                autoRecycleRequest: !1,
                rules: d
            },
            config: function(t) {
                r.ENV.showField = !0;
                t.schemaList = t.schemaList.filter(function(t) {
                    return !t.ignore
                });
                if(t.fieldId) {
                    var e = t.id2aliasMap = _(t.schemaList),
                        i = ExpressionAnalyzer.id2alias(e)(t.expression, "<此位置字段丢失>");
                    t.expression = i ? i : "<发送错误>";
                    t.name = t.name ? t.name : ""
                } else {
                    t.expression = "";
                    t.name = ""
                }
                this.supr(t);
                this.$on("confirm", function(t) {
                    if(t.accept) this.save();
                    else this.destroy()
                })
            },
            destroy: function() {
                r.ENV.showField = !1;
                this.$emit("updateByfield");
                this.supr();
                Regular.dom.delClass(document.body, "z-helper")
            },
            init: function() {
                this.supr();
                var t = this.$refs.nameInput;
                if(t) {
                    var e = this;
                    setTimeout(function() {
                        t.focus();
                        t.select();
                        v.on(t, "keypress", function(t) {
                            if(13 === t.which) {
                                t.preventDefault();
                                this.confirm(!0);
                                return !1
                            }
                        }.bind(e))
                    }, 0)
                }
                this.$watch("expression", function(t, e) {
                    if(void 0 != e) this.inputExpression("expression")
                });
                var e = this;
                setTimeout(function() {
                    e.expreInput()
                }, 0);
                if(this.data.fromReport) Regular.dom.addClass(document.body, "z-helper")
            },
            gatherData: function() {
                return {
                    name: this.data.name,
                    expression: this.data.expression
                }
            },
            doCompileField: function() {
                var t = this.gatherData(),
                    e = this.data.schemaList,
                    i = f(e),
                    n = p(e);
                h = ExpressionAnalyzer.analyzer();
                this.data.fieldData = h(i, n)(t.expression);
                if("g?" === this.data.fieldData.granularity) this.data.fieldData.granularity = "g0";
                if(this.data.fieldData.valid && this.data.fieldId) this.detectCalculateExpr(e, i)
            },
            detectCalculateExpr: function(t, e) {
                var i = this.data.fieldId,
                    n = m(e).filter(function(t) {
                        return t.fieldId != i
                    });
                h = ExpressionAnalyzer.analyzer();
                for(var r, a, s = p(t), o = {
                    produced: this.data.produced,
                    expr: ExpressionAnalyzer.alias2id(s)(this.data.expression),
                    fieldId: this.data.fieldId
                }, l = g(e, o), c = 0; c < n.length; c++) {
                    r = n[c];
                    a = h(l)(r.expr);
                    if(!a.valid) {
                        a.message = "会导致名字为" + r.alias + "字段出错";
                        this.data.fieldData = a;
                        return
                    }
                }
            },
            save: function() {
                this.changeName("name");
                this.blurExpression("expression");
                if(!this.hasError()) {
                    var e = this.data.fieldData;
                    if(e.valid) {
                        if("Measure" == this.data.role && ("Date" == e.type || "DateTime" == e.type || "Time" == e.type)) {
                            t.message("日期类型不能转换添加为度量", "err");
                            return
                        }
                        var i = p(this.data.schemaList);
                        this.data.expression = ExpressionAnalyzer.alias2id(i)(this.data.expression);
                        var n, r = this.data.role;
                        if("Dimension" == this.data.role) n = "Discrete";
                        else n = "Continuous";
                        var a = {
                            role: this.data.role,
                            fieldData: this.data.fieldData,
                            name: this.data.name,
                            expression: this.data.expression,
                            interpretation: n,
                            $type: r
                        };
                        if(this.data.fieldId) {
                            a.oldAlias = this.data.oldAlias;
                            a.fieldId = this.data.fieldId
                        }
                        this.$emit("save", a);
                        this.destroy()
                    } else this.showError("expression", this.getNode("expression"), e.message || "表达式错误")
                }
            },
            changeName: function(t) {
                var e = this.validate(t);
                if(e) {
                    for(var i, n, r = this.data[t], a = (this.data.role.toLowerCase(), this.data.schemaList), s = 0; s < a.length; s++) {
                        n = a[s];
                        if(n.alias === r) {
                            i = n;
                            break
                        }
                    }
                    if(i && r !== this.data.oldAlias) {
                        this.showError(t, this.getNode(t), r + "标题已存在！");
                        return !1
                    }
                }
                return e
            },
            blurExpression: function(t) {
                var e = this.validate(t);
                if(e) {
                    this.doCompileField();
                    var i = this.data.fieldData;
                    if(i.valid)
                        if("Dimension" !== this.data.role || "g1" !== i.granularity) return !0;
                        else {
                            var n = "Dimension" === this.data.role ? "该字段不能用于维度" : "该字段不能用于度量";
                            this.showError(t, this.getNode(t), i.message || n);
                            return !1
                        }
                    else {
                        this.showError(t, this.getNode(t), i.message || "表达式错误");
                        return !1
                    }
                }
                return e
            },
            inputExpression: function(t) {
                if(this.detectTimer) clearInterval(this.detectTimer);
                this.hideError(t);
                var e = this;
                this.detectTimer = setTimeout(function() {
                    e.blurExpression(t)
                }, 1e3)
            },
            enterSyntax: function(t) {
                var e = this.$refs.expressionInput;
                if("number" == typeof e.selectionStart && "number" == typeof e.selectionEnd) {
                    var i = e.selectionStart,
                        n = e.selectionEnd,
                        r = i,
                        a = e.value;
                    e.value = a.substring(0, i) + t + a.substring(n, a.length);
                    if(t.indexOf("(") !== -1) {
                        var s = t.split("(");
                        r += s[0].length + 1;
                        e.selectionStart = r;
                        var o = 3;
                        if(s[1].indexOf(",") !== -1) {
                            var l = s[1].split(",");
                            o = l[0].length
                        } else {
                            var l = s[1].split(")");
                            o = l[0].length
                        }
                        e.selectionEnd = r + o
                    } else {
                        r += t.length;
                        e.selectionStart = e.selectionEnd = r
                    }
                } else e.value += t;
                this.data.expression = e.value;
                this.expreInput()
            },
            expreInput: function() {
                var t = this.data.expression;
                h = ExpressionAnalyzer.analyzer();
                this.data.showList = ExpressionAnalyzer.getTokens(t);
                this.$refs.showexpression.innerHTML = this.renderHtml(this.data.showList);
                this.scrollBar()
            },
            scrollBar: function(t) {
                var e = this.$refs.expressionInput,
                    i = this.$refs.showexpression,
                    n = e.scrollTop,
                    r = e.scrollLeft;
                e.scrollTop = n;
                e.scrollLeft = r;
                i.scrollTop = n;
                i.scrollLeft = r
            },
            scrollBar1: function() {
                var t = this.$refs.expressionInput,
                    e = this.$refs.showexpression,
                    i = e.scrollTop,
                    n = e.scrollLeft;
                t.scrollTop = i;
                t.scrollLeft = n;
                e.scrollTop = i;
                e.scrollLeft = n
            },
            renderHtml: function(t) {
                var i = t.map(function(t) {
                    var i = t[0],
                        n = t[2],
                        r = e._$escape(n);
                    r = r.indexOf("<br/>") != -1 ? n : r;
                    return "<span class='tok-" + i + "'>" + r + "</span>"
                });
                return i.join("") + "&nbsp"
            },
            drop: function(t, e) {
                var i = e.drag,
                    n = i.data.key,
                    r = n.alias,
                    a = r.split("]");
                this.enterSyntax("[" + a.join("]]") + "]")
            },
            dragenter: function(t) {
                this.hideError("expression");
                var e = this.data.showList;
                if(e && e.length > 0) e = this.compileShowList(e);
                else e = [
                    ["boundary", "", ""]
                ];
                this.$refs.showexpression.innerHTML = this.renderHtml(e);
                this.scrollBar()
            },
            compileShowList: function(t) {
                var e = this.$refs.expressionInput,
                    i = [],
                    n = e.selectionStart,
                    r = e.selectionEnd;
                if("number" == typeof n && "number" == typeof r)
                    if(n == r) this.insertBoundary(t, n, i);
                    else if(n < r) this.insertZone(t, n, r, i);
                    else i = t.push(["boundary", "", ""]);
                else i = t.push(["boundary", "", ""]);
                return i
            },
            insertBoundary: function(t, e, i) {
                for(var n, r, a, s = 0, o = t.length; s < o; s++) {
                    a = t[s];
                    n = a[2];
                    r = n.length;
                    if(0 == e) {
                        i.push(["boundary", "", ""]);
                        e--
                    }
                    if(r < e) i.push(a);
                    else if(r == e) i.push(a);
                    else if(r > e)
                        if(e <= 0) i.push(a);
                        else {
                            var l = [
                                [a[0], n.slice(0, e), n.slice(0, e)],
                                [a[0], n.slice(e), n.slice(e)]
                            ];
                            this.insertBoundary(l, e, i)
                        }
                    e -= r
                }
                if(0 == e) {
                    i.push(["boundary", "", ""]);
                    e--
                }
            },
            insertZone: function(t, e, i, n) {
                for(var r, a, s, o, l, c = 0, u = 0; u < t.length; u++) {
                    a = t[u];
                    r = a[2].length;
                    l = c + r;
                    if(c < e && l <= e || c >= i && l > i) n.push(a);
                    else if(e <= c)
                        if(i < l) {
                            s = i - c;
                            var d = [
                                [a[0] + " tok-zone", a[1].slice(0, s), a[2].slice(0, s)],
                                [a[0], a[1].slice(s), a[2].slice(s)]
                            ];
                            n.push(d[0]);
                            n.push(d[1])
                        } else {
                            a[0] = a[0] + " tok-zone";
                            n.push(a)
                        }
                    else if(e > c)
                        if(i < l) {
                            s = e - c;
                            o = i - c;
                            var d = [
                                [a[0], a[1].slice(0, s), a[2].slice(0, s)],
                                [a[0] + " tok-zone", a[1].slice(s, o), a[2].slice(s, o)],
                                [a[0], a[1].slice(o), a[2].slice(o)]
                            ];
                            n.push(d[0]);
                            n.push(d[1]);
                            n.push(d[2])
                        } else {
                            s = e - c;
                            var d = [
                                [a[0], a[1].slice(0, s), a[2].slice(0, s)],
                                [a[0] + " tok-zone", a[1].slice(s), a[2].slice(s)]
                            ];
                            n.push(d[0]);
                            n.push(d[1])
                        }
                    c += r
                }
            },
            dragleave: function() {
                this.expreInput()
            }
        }).implement(u.Error);
    return y
}, 7, 4, 3, 6, 136, 34, 364, 175, 185, 135, 257, 365, 366, 174);
I$(355, "<div class=\"m-mfilter\">\n  <div class='col-1'>\n  <tab ref=tab>\n    {#if this.isRangeDate(pill)}\n    <tab.pane title='时间范围' selected  >\n      <date-filter1 date={filter.date} pill={pill} ref=date ></date-filter1>\n    </tab.pane>\n    {#else}\n    <tab.pane title='列表筛选'  selected>\n    <!-- select={select} unselect={unselect} mode={@(mode)} exclude={@(exclude)} ignoreEmpty={@(ignoreEmpty)} -->\n      <text-search filter={@(filter)} context={context}  pill={pill}  ref=list auto={auto}  ></text-search>\n    </tab.pane>\n    {/if}\n    <tab.pane title='文本筛选' >\n      <text-filter match ={filter.match} context={context} pill={pill}  ref=text ></text-filter>\n    </tab.pane>\n    <tab.pane title='条件筛选' >\n    <!-- measures={measures} -->\n      <condition-filter condition={filter.condition} context={context} pill={pill} auto={auto}  ref=condition ></condition-filter>\n    </tab.pane>\n    <tab.pane title='高级筛选' >\n    <!-- measures={measures}  -->\n      <advanced-filter top={filter.top} context={context}  ref=advanced ></advanced-filter>\n    </tab.pane>\n  </tab>\n  </div>\n  <div class='col-2 m-finfo'>\n    <h3>筛选汇总</h3>\n    <div class=\"finfo_content\">\n      <ul>\n        <li  ><span class='finfo_left'>所选字段:</span> <p class='finfo_right'> {pill|ptext}</p></li>\n\n        {#if this.isRangeDate(pill) }\n        <li r-class=\"'z-active': this.isTab('时间范围')\"><span class='finfo_left'>时间范围:</span><p class='finfo_right' r-html={this.$refs.date.info()}></p></li>\n        {#else }\n        <li r-class=\"'z-active': this.isTab('列表筛选')\" ><span class='finfo_left'>列表筛选:</span><p class='finfo_right' r-html={this.$refs.list.info()}></p></li>\n        {/if}\n        <li r-class=\"'z-active': this.isTab('文本筛选')\" ><span class='finfo_left'>文本筛选:</span><p class='finfo_right' r-html={this.$refs.text.info()}></p></li>\n        <li r-class=\"'z-active': this.isTab('条件筛选')\" ><span class='finfo_left'>条件筛选:</span><p class='finfo_right' r-html={this.$refs.condition.info()}></p></li>\n        <li r-class=\"'z-active': this.isTab('高级筛选')\"><span class='finfo_left'>高级筛选:</span><p class='finfo_right' r-html={this.$refs.advanced.info()}></p></li>\n       </ul>\n    </div>\n  </div>\n</div>\n");
I$(531, '\n<div class="m-tab2 {@(className)}">\n  <header class="tab_head">\n      <h2 class="u-tt" r-hide={@(!title)}>{title}</h2>\n      <ul>{#inc @(this.$body)}</ul>\n  </header>\n  {#if @(autoClean)}\n  <div class="tab_content" >\n    {#inc selected.$body}\n  </div>\n  {#else}\n  {#list panes as pane}\n  <div class=\'tab_content\'\n  r-hide={selected!==pane}\n  r-anim=\'on:enter;class:animated fadeIn; \'\n  >{#inc pane.$body}</div>\n  {/list}\n  {/if}\n</div>\n');
I$(356, function(t, e, i) {
    var n = Regular.extend({
            name: "tab",
            template: e,
            config: function(t) {
                t.panes = []
            },
            select: function(t) {
                this.data.selected = this.data.panes[t];
                this.$update()
            }
        }),
        r = '<li role="presentation" class={this.$outer.data.selected==this? "z-crt":""} on-click={this.pick()}>      <a href={href || "javascript:;"}>{#inc title}</a>    </li>';
    n.Pane = Regular.extend({
        name: "tab.pane",
        template: r,
        config: function(t) {
            if(t.selected) this.pick();
            if(this.$outer instanceof n) this.$outer.data.panes.push(this)
        },
        pick: function() {
            var t = this.$outer;
            if(t) {
                var e = t.data.selected;
                if(e !== this) {
                    t.$update("selected", this);
                    if(e) e.$emit("deactive");
                    this.$emit("active")
                }
            }
        }
    });
    return n
}, 7, 531, 171);
I$(386, "\n<div class=\"m-tsearch\">\n\n<div class=\"switch\">\n  <label><input type=\"radio\" r-model='mode' name='mode' value='list'> 列表</label>\n  <label><input type=\"radio\"  r-model='mode' name='mode' value='manual'> 手动</label> </div>\n\n<div class='list sec' r-hide={mode!=='list'}>\n\n  <div class='affectMenu'>\n  <div r-hide={ filter && filter.priority||context.dataConnectionId }  class=\"m-tgmenu m-tgmenu-{affectMode} \" on-click={this.changeAffectMode(affectMode)} title={affectMessage[affectMode || 0]}>\n    <div class='piece'></div>\n    <div class='piece'></div>\n    <div class='piece'></div>\n  </div>\n  <div  class=\"m-tgmenu\" on-click={this.changeDesc(!filter.desc)} title={filter.desc?\"降序(点击切换为升序)\":\"升序(点击切换为降序)\"} >\n    <span class=\"u-icn u-icn-{filter.desc? 'dasc': 'asc'}\" ></span>\n  </div>\n  </div>\n  <div class=\"m-search\" >\n    <div class=\"search\" >\n      <span class='u-icn-search u-icn'></span>\n      <input placeholder=\"输入关键词搜索\"  ref='search' class='u-ipt-search'> \n      <i class=\"u-icn u-icn-close\" r-hide={!value} de-click={this.enter(false)} r-anim='on:enter;class:animated fadeIn;on:leave;class:animated fadeOut'></i>\n    </div>\n    <div class=\"u-filter u-filter-search\">\n      <ul class=\"list u-list\" >\n      {#if value}\n        <li r-hide={!suggests||!suggests.length} class='checkall' ><label> <input  disabled={pickMode === '3'} type=\"checkbox\" r-model={checkAllSuggests}> 全选</label> </li>\n        {#list suggests as item by item_index}\n        <li class={item_index === index? 'z-act': ''} de-click={this.focus(item_index)} ><label><input disabled={pickMode === '3'} type=\"checkbox\" r-model={item.selected}> {item.text === null? 'null': item.text}</label></li>\n        {#else}\n        <li class='z-act'>抱歉，没有符合的搜索结果</li>\n        {/list}\n      {/if}\n      </ul>\n    </div>\n  </div>\n  <!-- 修改为一次绑定， 因为列表项是不变的 -->\n\n  {#if ready !== 1}\n    <div style='text-align:center;vertical-align:middle ;height: 280px'>\n      {#if ready === 0}\n      <span class='u-load' style='display:inline-block;vertical-align:middle;margin:8px'></span> <span>正在读取列表... </span>\n      <p style='margin-top: 6px'>\n      若耗时过长，请在数据库中对此字段创建索引\n      </p>\n      {#elseif ready === -1}\n      <p style='line-height: 48px;'><span class=\"u-icn u-icn-warm u-error\"></span>加载列表错误</p>\n      {/if}\n    </div>\n  {#else}\n  {/if}\n  <ul class=\"result u-list\" r-hide={ready!==1} style=\"height: 280px;\" ref='list'>\n    <li class='placeholder' style=\"height: {preHeight}px\"></li>\n    {#list curList as item by item_index}\n      <li r-class={{'rmline':pickMode==2 && !!item.selected}}><label><input disabled={pickMode==='3'} type=\"checkbox\" checked={!!item.selected} on-change={this.toggle(item,$event)}><b>\n       {item.text === null? 'null': item.text} </b></label></li>\n    {/list}\n    <li class='placeholder' style=\"height: {nextHeight}px\"></li>\n  </ul>\n\n  <p class='binfo'>\n\n    <label><input type=\"radio\" r-model={pickMode} value='3'><b>使用全部</b></label>\n    <label><input type=\"radio\" r-model={pickMode} value='1'><b>包含</b></label>\n    <label><input type=\"radio\" r-model={pickMode} value='2'><b>排除</b></label>\n    <div class='needContext f-fr'>\n    <!-- <a class='clear' on-click={this.clearSelect()} href=\"\">清除</a>    -->\n    </div>\n  </p>\n  <p class='binfo2'> 共{fullsearchs == undefined? '未知': fullsearchs.length}个结果</p>\n</div>\n\n<div class='sec manual' r-hide={mode!=='manual'}>\n  <div class=\"m-search m-search-manual\">\n    <div class=\"search\">\n      <input placeholder=\"输入您要添加的项, 并回车确认\" r-model={manualValue} on-enter={this.addField(manualValue)} > \n      <span class='icns' r-hide={!manualValue} >\n        <i class=\"u-icn u-icn-addfield\" on-click={this.addField(manualValue)} ></i>\n        <i class=\"u-icn u-icn-close\" on-click={manualValue = ''}></i>\n      </span>\n    </div>\n  </div>\n  <ul class=\"result u-list \" r-class=\"'u-list-rm': exclude\" style=\"height: 280px;\">\n    {#list manualList as item by item_index}\n      <li><b>{item}</b><span class=\"u-icn u-icn-close\" title=\"删除\" on-click={manualList.splice(item_index,1)}></span></li>\n    {/list}\n  </ul>\n  <p class=\"binfo\">\n    <label><input type=\"checkbox\" r-model='exclude' disabled={!manualList.length}><b>排除</b></label>\n  </p>\n</div>\n</div>\n");
I$(196, function(t, e, i, n, r, a) {
    var s = r.cache,
        o = new i._$$DataModelCache,
        l = 26,
        c = Regular.dom,
        u = 0,
        d = a.PICK_MODE;
    n.extend({
        name: "text-search",
        computed: {
            pickall: t.createAllComputed("fullsearchs", "selected"),
            checkAllSuggests: t.createAllComputed("suggests", "selected")
        },
        data: {
            interval: 200,
            offset: 0
        },
        template: e,
        config: function(t) {
            this.supr(t);
            var e = t.context;
            t.schema = e.schema;
            t.ignoreEmpty = !0;
            var i = t.filter,
                n = (t.mode = i.mode || "list", i.select),
                r = t.pill,
                a = i.unselect;
            t.exclude = !!i.unselect;
            t.affectMode = i.affectMode;
            t.affectMessage = {
                0: "显示完整列表",
                1: "受上下文及层级筛选器影响",
                2: "受全部筛选器影响"
            };
            t.type = this._getPillType(r);
            t.manualList = [];
            var s = !0;
            if(Array.isArray(a)) {
                t.pickMode = d.EXCLUDE;
                t.filterFn = function(t) {
                    return a.indexOf(t) !== -1
                }
            } else {
                if(Array.isArray(n)) t.pickMode = d.CONTAIN;
                else t.pickMode = d.ALL;
                t.filterFn = function(t) {
                    return null == n || n.indexOf(t) !== -1
                }
            }
            this.$watch("mode", function(e) {
                if("list" === e) this._fetchList();
                else if("manual" === e)
                    if(s) t.manualList = n || a || [];
                s = !1
            }, {});
            this.$watch("pickMode", function(t, e) {
                this.handlePickMode(e !== d.ALL && t !== d.ALL)
            }, {
                sync: !0
            })
        },
        init: function() {
            this.supr();
            var t = this.$refs.list;
            c.on(t, "scroll", this._checkList.bind(this));
            this.$watch("affectMode", this.handleAffectMode, {
                sync: !0
            })
        },
        handleAffectMode: function(t) {
            var e = this.getDimensionFilters(t),
                i = this.data.preAffect;
            if(!i || i.dimensionLength !== e.length) this._fetchList(e)
        },
        handlePickMode: function(t) {
            var e = this.data;
            if(e.fullsearchs && !t) e.fullsearchs.forEach(function(t) {
                t.selected = e.pickMode === d.ALL
            })
        },
        getContextDimensions: function() {
            var t = this.data.context,
                e = this.data.pill,
                i = r.findLevel(t.schema.levels, e.fieldId),
                n = t.filters || [];
            return n.filter(function(t) {
                if("Dimension" !== t.role) return !1;
                if(t.filter && t.fieldId !== e.fieldId) {
                    if(t.filter.priority >= 1) return !0;
                    if(i) {
                        var n = i.pathes.indexOf(t.fieldId);
                        return ~n && n < i.index
                    }
                }
            }).map(this._wrapDimenensionFilter)
        },
        getDimensionFilters: function(t) {
            if(!t) return [];
            if(1 === t) return this.getContextDimensions();
            if(2 === t) {
                var e = this.data.context,
                    i = this.data.pill,
                    n = e.filters || [];
                return n.filter(function(t) {
                    return t.filter && t.fieldId !== i.fieldId && "Dimension" === t.role
                }).map(this._wrapDimenensionFilter)
            }
        },
        _wrapDimenensionFilter: function(e) {
            var i = t.extend({}, e),
                n = i.filter || n;
            delete i.filter;
            return {
                dimension: i,
                filter: n,
                priority: n.priority
            }
        },
        changeAffectMode: function() {
            var t = this.data,
                e = t.affectMode;
            if("number" != typeof e) t.affectMode = 1;
            else t.affectMode = (t.affectMode + 1) % 3
        },
        _getPillType: function(e) {
            var i = e.dataType;
            if(t.isDate(i))
                if(!/\-/.test(e.mapFunction)) i = "Whole";
                else i = "DateTime";
            return i
        },
        _fetchList: function(e) {
            var i = this.data,
                n = i.qid = u++,
                a = this,
                l = this.data.context;
            i.ready = 0;
            var i = this.data;
            i.pill.filter;
            if(i.affectMode) e = e || this.getDimensionFilters(i.affectMode);
            else e = [];
            i.preAffect = {
                mode: i.affectMode,
                dimensionLength: e.length
            };
            var c;
            if(l.dataConnectionId) c = o._$getDimensionMembers({
                dataType: i.pill.convertType || i.pill.dataType,
                desc: i.filter.desc,
                dataConnectionId: l.dataConnectionId,
                config: l.config,
                pill: r.fixPill(i.pill)
            }, !0);
            else c = s._$getDimensionMembers({
                dataType: i.pill.convertType || i.pill.dataType,
                desc: i.filter.desc,
                reportId: r.query.rid,
                dimensions: [r.fixPill(i.pill)],
                filter: {
                    dimensions: e
                }
            });
            c.then(function(e) {
                if(n === i.qid) {
                    var r = e.result;
                    i.ready = !0;
                    if(200 == e.code) {
                        i.ready = 1;
                        i.fullsearchs = (r || []).map(function(t) {
                            var e = {
                                text: t[0]
                            };
                            if(i.filterFn(e.text)) e.selected = !0;
                            return e
                        })
                    } else if(750 === e.code) {
                        i.ready = -1;
                        t.messageDetail(e)
                    } else {
                        i.ready = -1;
                        t.message(e.message || "获取维度成员列表失败！", "err")
                    }
                    a._optimismFullsearchs();
                    a.handlePickMode(!0);
                    a.$update()
                }
            })["catch"](function(e) {
                i.ready = -1;
                i.fullsearchs = [];
                a._optimismFullsearchs();
                t.message("获取维度成员列表失败！", "err");
                a.$update()
            })
        },
        createSuggestion: function(t) {
            var e = this.data;
            if(!t) return this.$update("suggests", []);
            t = t.toLowerCase();
            e.suggests = e.fullsearchs.filter(function(e) {
                if(e.text) {
                    var i = String(e.text).toLowerCase();
                    if(~i.indexOf(t)) return !0;
                    else return
                }
            }).slice(0, 100);
            this.$update()
        },
        toggle: function(t, e) {
            t.selected = e.target.checked
        },
        enter: function(t) {
            var e = this.data;
            if(t !== !1) {
                var i = e.index,
                    n = e.suggests[i];
                if(n) {
                    n.selected = !n.selected;
                    this.$update()
                }
            } else {
                e.value = "";
                this.$refs.search.value = e.value
            }
        },
        info: function() {
            var t = this.data;
            if("list" === t.mode)
                if(t.pickMode === d.ALL || !t.fullsearchs) return "无";
                else {
                    var e = t.fullsearchs.reduce(function(t, e) {
                        if(e.selected) t++;
                        return t
                    }, 0);
                    return("1" === t.pickMode ? "选择" : "排除") + "<b>" + e + "</b>项 (共" + t.fullsearchs.length + "项)"
                }
            else {
                var e = t.manualList.length;
                if(this._validEmptyValue()) return "无";
                else return "手动<b>" + (t.exclude ? "排除" : "选择") + e + "</b>项"
            }
        },
        gatherData: function() {
            var e = this.data,
                i = e.fullsearchs,
                n = {
                    mode: e.mode,
                    affectMode: e.affectMode,
                    desc: e.filter.desc
                };
            if("list" === e.mode) {
                if(!i) return n;
                i.length;
                if(e.pickMode === d.ALL) return n;
                n[e.pickMode === d.CONTAIN ? "select" : "unselect"] = i.reduce(function(t, e) {
                    if(e.selected) t.push(e.text);
                    return t
                }, []);
                return n
            } else if(e.exclude || this._validEmptyValue()) return t.extend(n, {
                unselect: e.manualList,
                exclude: e.exclude
            });
            else return t.extend(n, {
                    select: e.manualList,
                    exclude: e.exclude
                })
        },
        mapStateToData: function() {},
        addField: function(e) {
            var i = this.data,
                n = i.type;
            if(/Whole|Decimal/.test(n)) {
                e = parseFloat(e, 10);
                if(isNaN(e)) return t.message("不合法的数字输入", "err")
            }
            if(t.isDate(n)) {
                e = new Date(e);
                if("Invalid Date" == e) return t.message("不合法的日期输入", "err");
                e = Regular.filter("format").get(e, "yyyy-MM-dd HH:mm:ss")
            }
            var r = i.manualList;
            if("" !== e && void 0 != e) {
                e = "" + e;
                if(r.indexOf(e) !== -1) return t.message(e + "已经存在", "err");
                this.data.manualList.push(e);
                this.data.manualValue = ""
            }
        },
        _checkList: function(t) {
            var e = this.$refs.list,
                i = e.scrollTop,
                n = this.data,
                r = (n.fullsearchs, n.offset),
                a = parseInt(i / l, 10);
            if(a > r + 8) n.offset = a;
            if(a < r + 5) {
                n.offset -= 5;
                if(n.offset > a) n.offset = a;
                if(n.offset < 0) n.offset = 0
            }
            if(r !== n.offset) {
                this._optimismFullsearchs();
                this.$update()
            }
        },
        _optimismFullsearchs: function() {
            var t = this.data,
                e = t.fullsearchs;
            if(e && e.length) {
                var i = e.length,
                    n = t.offset || (t.offset = 0);
                t.curList = e.slice(t.offset, t.offset + 20);
                t.preHeight = n * l;
                if(i < n + 10) t.nextHeight = 0;
                t.nextHeight = (i - n - 20) * l;
                if(t.nextHeight < 0) t.nextHeight = 0
            } else {
                t.curList = [];
                t.preHeight = 0;
                t.nextHeight = 0
            }
        },
        changeDesc: function(t) {
            this.data.filter.desc = t;
            this._fetchList()
        },
        _validEmptyValue: function() {
            var t = this.data;
            return t.ignoreEmpty && !t.exclude && (!t.manualList || 0 === t.manualList.length)
        }
    })
}, 7, 386, 63, 195, 34, 136);
I$(519, '\n<div class="m-filteritem">\n<measure-select measure = {measure} measures={measures}></measure-select>\n\n{#if measure.code !==400}\n<div class="line" >\n  <div class="u-area u-area-right">\n\n  {#if loading || message}\n\n  <div style=\'text-align:center;vertical-align:middle\'>\n\n  {#if message}\n    <span class="u-icn u-icn-warm"></span> <span>{message}</span>\n  {#else}\n    <span class=\'u-load\' style=\'display:inline-block;vertical-align:middle;margin:8px\'></span> <span>正在读取范围... </span>\n  {/if}\n\n  </div>\n\n  {#else}\n    {#if range}\n    <div class="left">\n      <p>\n        最大值:\n        <input type="text" value={range.max} disabled></p>\n      <p>\n        最小值:\n        <input type="text" value={range.min} disabled></p>\n    </div>\n    {#else}\n    <div class="left">\n      <a class="u-btn u-btn-1" on-click={this.fetchMaxAndMin()}>加载范围</a>\n    </div>\n    {/if}\n  {/if}\n  </div>\n</div>\n<div  class=\'line\'>\n  <select class="u-txt u-txt-s1 u-txt-s2" r-model=\'comparator\' >\n    {#list @(Object.keys(COMPARATOR_NAMES)) as opt}\n    <option value={@(opt)}>{@(COMPARATOR_NAMES[opt])}</option>\n      {/list}\n  </select>\n  <input type="text" class=\'u-txt u-txt-h1 {error? "u-txt-err": ""}\' placeholder="请输入数字" r-model=\'value\'  > <span class=\'u-error\' r-hide={!error}>{error.message}</span>\n</div>\n{/if}\n</div>\n');
I$(520, "<div class=\"line\">\n  按照\n  <select class=\"u-txt u-txt-s1\" r-model='field' >\n    {#list measures as mea by 1}\n    <option value={mea.field }>{mea.alias}</option>\n    {/list}\n  </select>\n  的\n  <select class=\"u-txt u-txt-s1\" r-model='aggregator' ref='aggregator' >\n    {#list aggregators as agg by 1}\n    <option value={agg} >{AGGREGATOR_NAMES[agg]}</option>\n    {/list}\n  </select>\n\n</div>\n");
I$(387, '{#if measures.length}\n<div class="line">\n  按照\n  <select class="u-txt u-txt-s1 u-txt-s2" r-model={measure.alias} >\n    {#list measures as mea by mea_index}\n    <option value={mea.alias }>{mea.alias}</option>\n    {/list}\n  </select>\n  {#if measure.granularity !== \'g1\'}\n  的\n  <select class="u-txt u-txt-s1 u-txt-s2" r-model={measure.aggregator} ref=aggregator >\n    {#list aggregators as agg by agg_index}\n    <option value={agg} >{this.consts.AGGREGATOR_NAMES[agg]}</option>\n    {/list}\n  </select>\n  {/if}\n\n</div>\n{#else}\n<select class="u-txt u-txt-s1 u-txt-s2" disabled ><option value="">度量列表为空</option></select>\n{/if}\n');
I$(197, function(t, e, i, n, r, a, s) {
    var o = n.actions,
        l = (s.cache, Regular.extend({
            name: "measure-select",
            template: e,
            data: {
                act: o
            },
            config: function(e) {
                e.measure = e.measure || {
                        $type: "Measure"
                    };
                this.$watch("measures", function(t) {
                    if(0 === t.length) e.measure.code = 400;
                    t = e.measures = t.filter(function(t) {
                        return t.fieldId !== -12 && t.fieldId !== -13 && t.fieldId !== -11
                    });
                    if(t && t.length)
                        if(!e.measure.alias) e.measure.alias = t[0].alias
                });
                this.$watch("measure.alias", function(i) {
                    var n = this.getMeasureSchema(i);
                    e.measure = t.assign({}, n, {
                        aggregator: e.measure.aggregator
                    });
                    if("g1" !== e.measure.granularity) {
                        var r = this.data.aggregators = Regular.filter("aggregator").get(e.measure.dataType) || [],
                            a = e.measure.aggregator;
                        if(r.indexOf(a) === -1) e.measure.aggregator = r[0];
                        setTimeout(function() {
                            this.$refs.aggregator.value = e.measure.aggregator
                        }.bind(this), 2)
                    } else delete e.measure.aggregator
                })
            },
            getMeasureSchema: function(t) {
                return this.data.measures.filter(function(e) {
                    return e.alias === t
                })[0]
            }
        }));
    return l
}, 7, 387, 44, 35, 175, 136, 34);
I$(357, function(t, e, i, n, r, a, s, o, l) {
    var c = r.actions,
        n = o.cache,
        u = new l._$$DataModelCache,
        d = Regular.extend({
            name: "condition-filter",
            toparea: i,
            template: e,
            data: {
                COMPARATOR_NAMES: s.COMPARATOR_NAMES,
                act: c
            },
            config: function(e) {
                var i = e.context,
                    n = i.schema;
                e.measures = n && n.measures || [];
                var r = e.condition;
                if(r) {
                    e.measure = t.clone(r.measure);
                    e.comparator = r.comparator;
                    e.value = r.value
                } else e.measure = {
                    $type: "Measure"
                };
                var a = this;
                this.$watch(["measure.alias", "measure.aggregator"], function() {
                    a.data.range = null;
                    a.data.message = null;
                    if(s.status.autoplay) a.fetchMaxAndMin()
                });
                this.$watch("value", function(t) {
                    t = ("" + t).trim();
                    var i = void 0 != t && "" !== t && !s.R_NUMBER.test(t);
                    e.error = i ? {
                        message: "请输入合法数字!"
                    } : void 0
                })
            },
            fetchMaxAndMin: function() {
                if(this.fetchTimer) clearTimeout(this.fetchTimer);
                var t = this.data.context;
                this.fetchTimer = setTimeout(function() {
                    var e = this.data;
                    e.measure;
                    e.loading = !0;
                    var i;
                    if(t.dataConnectionId) i = u._$getMeasureRange({
                        dataConnectionId: t.dataConnectionId,
                        config: t.config,
                        dimensions: [o.fixPill(this.data.pill)],
                        measure: o.fixPill(e.measure)
                    }, !0);
                    else i = n._$getMeasureRange({
                        reportId: o.query.rid,
                        dimensions: [o.fixPill(this.data.pill)],
                        measure: o.fixPill(e.measure)
                    });
                    i.then(function(t) {
                        e.loading = !1;
                        if(200 === t.code) {
                            var i = t.result;
                            this.data.message = null;
                            this.data.range = {
                                min: i.min,
                                max: i.max
                            }
                        } else {
                            this.data.message = t.message || "获取范围出错";
                            this.data.range = null
                        }
                        this.$update()
                    }.bind(this), 100);
                    this.$update()
                }.bind(this))
            },
            info: function() {
                var t = this.data;
                return o.INFO_MAP["condition"](t)
            },
            changeValue: function(t) {
                t.target.value
            },
            gatherData: function() {
                var t = this.data;
                if(void 0 !== t.value && "" + t.value) {
                    var e = parseFloat(t.value, 10),
                        i = {
                            $type: "Limit",
                            measure: t.measure,
                            value: e,
                            comparator: t.comparator
                        };
                    return i
                }
            }
        });
    return d
}, 7, 519, 520, 44, 35, 175, 136, 34, 63, 197);
I$(521, '<div class="m-filteritem">\n    <div class="line" >\n        <select class="u-txt u-txt-h1 u-txt-s1 u-txt-s2" r-model=\'operator\'>\n            <option value="AND">包含以下所有条件</option>\n            <option value="OR">包含以下任一条件</option>\n        </select>\n    </div>\n    {#list options as option}\n    <div class="line">\n        <select class="u-txt u-txt-h1 u-txt-s1 u-txt-s2" r-model=\'option.type\'>\n            <option value="Contains">包含</option>\n            <option value="StartWith">开头是</option>\n            <option value="EndWith">结尾是</option>\n            <option value="Without">不包含</option>\n            <option value="IsJust">等于</option>\n        </select>\n        <input type="text" class=\'u-txt u-txt-h1 \' r-model=\'option.value\'>\n        <i class="u-icn u-icn-del" r-hide={options.length == 1} on-click={this.delete(option_index)}></i>\n    </div>\n    {/list}\n    {#if options.length < MAX_LENGTH}\n    <div class="line">\n        <button type="button" class="u-btn u-btn-1 u-btn-s1" on-click={this.add()}>添加</button>\n    </div>\n    {/if}\n</div>\n');
I$(358, function(t, e, i, n, r, a) {
    var s = (i.actions, Regular.extend({
        name: "text-filter",
        template: e,
        data: {
            MAX_LENGTH: 8
        },
        config: function(e) {
            var i = e.match;
            e.options = [{
                type: "Contains",
                value: ""
            }];
            e.operator = "AND";
            if(i)
                if("Logic" === i.$type) {
                    e.operator = i.operator;
                    e.options = i.leaf
                } else e.options = [{
                    type: i.$type,
                    value: i[t.lowerStart(i.$type)]
                }]
        },
        info: function() {
            var t = this.data;
            return a.INFO_MAP["text"](t)
        },
        gatherData: function() {
            var e, i, n = this.data;
            i = n.options.filter(function(e) {
                if(e.value && e.type) {
                    t.extend(e, {
                        $type: "Leaf"
                    });
                    return !0
                }
            });
            if(i.length > 1) e = {
                $type: "Logic",
                operator: n.operator,
                leaf: i
            };
            else if(1 === i.length && i[0].value && i[0].type) {
                e = {
                    $type: i[0].type
                };
                e[t.lowerStart(i[0].type)] = i[0].value
            }
            return e
        },
        add: function() {
            var t = this.data;
            t.options.push({
                type: "Contains",
                value: ""
            })
        },
        delete: function(t) {
            var e = this.data;
            e.options.splice(t, 1)
        }
    }));
    return s
}, 7, 521, 35, 175, 136, 34);
I$(522, '\n<div class="m-filteritem">\n\n  <measure-select measure = {measure} measures={context.schema.measures}></measure-select>\n  {#if measure.code !==400}\n  <div  class=\'line\'>\n    <select class="u-txt u-txt-s1 u-txt-s2" r-model=\'asc\' disabled={measure.code===400} >\n      <option value="0" > 最大 </option>\n      <option value="1" > 最小 </option>\n    </select>\n    <input type="text" class=\'u-ipt u-txt u-txt-h1\' disabled={measure.code===400} placeholder="请输入数字" r-model={count|num}> 个\n  </div>\n  {/if}\n</div>\n');
I$(359, function(t, e, i, n, r, a, s) {
    var o = (n.actions, i.extend({
        name: "advanced-filter",
        template: e,
        config: function(e) {
            var i = e.top;
            if(i && i.by) {
                e.count = i.count;
                e.asc = i.asc ? "1" : "0";
                e.measure = t.clone(i.by.measure)
            } else e.measure = {
                $type: "Measure"
            }
        },
        info: function() {
            var t = this.data;
            return s.INFO_MAP["advanced"](t)
        },
        gatherData: function() {
            var t = this.data;
            if(t.count) {
                var e = t.measure;
                if(e) var i = {
                    count: parseFloat(t.count, 10),
                    asc: "1" === t.asc,
                    by: {
                        $type: "Measure",
                        measure: e
                    }
                };
                return i
            }
        }
    }).implement(r.Redux));
    return o
}, 7, 522, 357, 35, 175, 136, 34);
I$(181, function(t, e, i, n, r) {
    var a = r.extend({
        name: "filter-modal",
        $body: i,
        data: {
            autoClose: !1
        },
        config: function(t) {
            this.supr(t);
            this.$on("confirm", function(t) {
                if(t.accept) this.save();
                else this.destroy()
            });
            var i = t.context,
                n = i.schema,
                r = t.pill,
                a = i.filters = t.filters || n.filters || [],
                s = e.findPill(a, r),
                o = s !== -1 && a[s].filter || {};
            t.filter = o;
            if(!t.auto && void 0 === o.mode) o.mode = "manual"
        },
        init: function() {
            var t = this.data;
            t.showAt = t.showAt || document.getElementById("filter-anchor");
            this.supr()
        },
        info: function() {
            var t = this.$refs,
                e = [t[t.date ? "date" : "list"].info()],
                i = t.match.info();
            if("无" !== i) e.push(i);
            var n = t.top.info();
            if("无" !== n) e.push(n);
            var r = t.condition.info();
            if("无" !== r) e.push(r);
            return e.join(" 且 ")
        },
        gatherData: function() {
            var e = {
                $type: "DiscreteDimensionFilter",
                match: this.$refs.text.gatherData(),
                top: this.$refs.advanced.gatherData(),
                condition: this.$refs.condition.gatherData(),
                date: this.$refs.date && this.$refs.date.gatherData()
            };
            if(this.$refs.list) t.extend(e, this.$refs.list.gatherData());
            return e
        },
        save: function() {
            var e = this.gatherData(),
                i = {
                    pill: this.data.pill,
                    query: e
                },
                n = this.$refs.condition.data.error;
            if(!n) {
                this.$emit("save", i);
                this.destroy()
            } else {
                t.message(n.message);
                this.$refs.tab.select(2)
            }
        },
        isRangeDate: t.isRangeDate,
        isTab: function(t) {
            var e = this.$refs.tab;
            if(e && e.data.selected) return e.data.selected.data.title === t
        }
    });
    return a
}, 7, 34, 355, 175, 185, 356, 196, 357, 358, 359, 360);
I$(353, "<div class='m-mfilter2'>\n\n  <div class=\"u-radios\">\n    <label><input type=\"radio\" value='all' r-model='mode'><b>范围</b></label>\n    <label><input type=\"radio\" value='min' r-model='mode' ><b>至少</b></label>\n    <label><input type=\"radio\" value='max' r-model='mode' ><b>至多</b></label>\n  </div>\n  <div class=\"u-rangeinput\">\n    <input ref=min  value={vmin} on-change='change:min' on-enter='change:min' disabled={mode=='max'} > \n    <input ref=max  value={vmax} on-change='change:max' on-enter='change:max' disabled={mode=='min'} >\n  </div>\n  <div style='text-align:center;vertical-align:middle'>\n    <div r-hide={!message}>\n      <span class=\"u-icn u-icn-warm\"></span> <span>{message}</span> \n    </div>\n    <div r-hide={!loading}>\n      <span class='u-load' style='display:inline-block;vertical-align:middle;margin:8px'></span> <span>正在读取范围... </span>\n    </div>\n    {#if max ==null && min == null && !auto && !loading && !message}\n    <a class=\"u-btn u-btn-1\" on-click={this.fetchMaxAndMin()}>加载范围</a>\n    {/if}\n  </div>\n  {#if max!=null && min !=null}\n  <div>\n  <range max={max} min={min} vmin={vmin} vmax={vmax} mode={mode} ></range>\n  </div>\n  {/if}\n</div>\n  ");
I$(182, function(t, e, i, n, r, a, s) {
    var o = (n.actions, s.cache),
        l = (ReDnd.util, Regular.util),
        c = i.extend({
            name: "modal-filter2",
            data: {
                width: 280
            },
            $body: e,
            config: function(t) {
                this.supr(t);
                l.extend(t, {
                    mode: "all"
                });
                n.getState().current, t.info || (t.info = {});
                if(t.auto) this.fetchMaxAndMin();
                else;
                this.$on({
                    "change:min": this.changeValue.bind(this, "min"),
                    "change:max": this.changeValue.bind(this, "max"),
                    confirm: function(t) {
                        if(t.accept) this.save();
                        else this.destroy()
                    }
                })
            },
            fetchMaxAndMin: function() {
                var t = this.data;
                t.loading = !0;
                var e = n.getState().current,
                    i = this;
                o._$getMeasureRange({
                    reportId: s.query.rid,
                    dimensions: s.getDimensions(e).map(s.fixPill),
                    measure: s.fixPill(t.pill)
                }).then(function(e) {
                    t.loading = !1;
                    var i = e.result;
                    if(200 == e.code) {
                        t.message = null;
                        t.max = i.max;
                        t.min = i.min;
                        this.fixMaxAndMin()
                    } else t.message = e.message || "获取范围出错";
                    this.$update()
                }.bind(this)).catch(function(e) {
                    t.loading = !1;
                    t.message = e.message || "获取范围出错";
                    i.$update()
                })
            },
            fixMaxAndMin: function() {
                var t = this.data;
                if(null == t.vmin || t.vmin < t.min || t.vmin > t.max) t.vmin = t.min;
                if(null == t.vmax || t.vmax > t.max || t.vmax < t.vmin) t.vmax = t.max
            },
            init: function() {
                var t = this.data;
                t.showAt = t.showAt || document.getElementById("filter-anchor");
                setTimeout(function() {
                    this.$refs.min.focus()
                }.bind(this), 100);
                this.supr()
            },
            changeValue: function(t, e) {
                var i = this.data,
                    n = parseFloat(e.target.value, 10),
                    r = isNaN(n),
                    a = null != i.min && null != i.max;
                e.target.blur();
                if("min" === t) {
                    if(r) n = i.vmin;
                    else if(a) n = Math.max(Math.min(i.vmax, n), i.min)
                } else if(r) n = i.vmax;
                else if(a) n = Math.min(Math.max(i.vmin, n), i.max);
                i["v" + t] = n;
                e.target.value = n
            },
            mapStateToData: function(e, i, n) {
                var r, a = e.filters || [],
                    s = t.ptext(i.pill);
                a.some(function(e, n) {
                    if("Continuous" === e.interpretation) {
                        var a = t.ptext(e);
                        if(a === s) {
                            r = e.filter;
                            i.index = n
                        }
                    }
                });
                i.info;
                if(r && r.limit) {
                    var o = r.limit,
                        l = i.vmin = o.minBound,
                        c = i.vmax = o.maxBound;
                    if(null == l)
                        if(null != c) i.mode = "max";
                    if(null == c)
                        if(null != l) i.mode = "min"
                }
            },
            save: function() {
                var e = this.data,
                    i = e.mode;
                if("max" !== i && "number" != typeof e.vmin) {
                    this.$refs.min.focus();
                    return t.message("最小值必须是数字")
                }
                if("min" !== i && "number" != typeof e.vmax) {
                    this.$refs.max.focus();
                    return t.message("最大值必须是数字")
                }
                if("max" !== i && "min" !== i && e.vmin > e.vmax) return t.message("最大值不能小于最小值");
                var n = {
                    pill: e.pill,
                    query: {
                        $type: "ContinuousDimensionFilter",
                        limit: {
                            $type: "Limit",
                            minBound: "max" === i ? null : +e.vmin,
                            maxBound: "min" === i ? null : +e.vmax
                        }
                    }
                };
                this.$emit("save", n);
                this.destroy()
            }
        }).implement(r.Redux);
    return c
}, 7, 353, 185, 35, 175, 136, 34, 354, 173);
I$(352, '\n<div class="m-mapfunction">\n<!-- <h3>请选择一种方式以对<strong>[{pill.alias}]</strong>进行筛选</h3> -->\n<ul class="u-list u-list-mf">\n  <li class=\'icn-date  {selected==null? "z-sel": ""}\' on-dblclick={this.pick(null)} on-click={selected = null}>日期范围</li>\n  {#list SHOW_FUNC as func by func_index}\n    <li on-click={selected=func} on-dblclick={this.pick(func)} class=\'{selected===func? "z-sel": ""} icn-num\'>{mapFunctions[func]}</li>\n  {/list}\n  <li class="icn-num z-more" r-hide={showMore} on-click={showMore=!showMore} >更多<i class="u-icn u-icn-arr2"></i></li>\n  {#if showMore}\n  {#list EXPAND_FUNC as func by func_index}\n    <li on-click={selected=func} on-dblclick={this.pick(func)} class=\'{selected===func? "z-sel": ""} icn-num\'>{mapFunctions[func]}</li>\n  {/list}\n  <li class="u-split"></li>\n  {#list MORE_FUNC as func by func_index}\n    <li on-click={selected=func} on-dblclick={this.pick(func)} class=\'{selected===func? "z-sel": ""} icn-num\'>{mapFunctions[func]}</li>\n  {/list}\n  {/if}\n</ul>\n</div>\n\n');
I$(179, function(t, e, i, n, r, a, s) {
    var o = e.DATE_FUNC_NAMES,
        l = e.CONTINUOUS_FUNC,
        c = (Object.keys(o).filter(function(t) {
            return l.indexOf(t) === -1
        }), {
            showFilterModal: function(a) {
                function s(s) {
                    var o, l = {
                        data: {
                            title: '<span class="u-icn u-icn-set"></span> 筛选器',
                            pill: i.creator(s, "filters"),
                            auto: !!e.status.autoplay
                        }
                    };
                    t.extend(l.data, a);
                    if("Continuous" === s.interpretation) o = new r(l);
                    else o = new n(l);
                    o.show();
                    return new Promise(function(t, e) {
                        o.$on("save", function(e) {
                            t(e)
                        })
                    })
                }
                var o = a.pill,
                    l = a.force;
                if(t.isDate(o) && !o.mapFunction && !l) return c.showYearFunctionModal(o).then(function(e) {
                    return s(t.dset(o, e, "mapFunction", !0))
                });
                else return s(o)
            },
            showSortModal: function() {},
            showYearFunctionModal: function(t) {
                return new Promise(function(i, n) {
                    new a({
                        $body: s,
                        events: {
                            confirm: function(t) {
                                var e = this.data;
                                if(t.accept) i(e.selected);
                                this.destroy()
                            }
                        },
                        data: {
                            title: "请选择一种日期筛选方式",
                            SHOW_FUNC: e.SHOW_FUNC,
                            MORE_FUNC: e.MORE_FUNC,
                            EXPAND_FUNC: e.EXPAND_FUNC,
                            mapFunctions: e.DATE_FUNC_NAMES,
                            pill: t,
                            confirmText: "进入筛选"
                        },
                        pick: function(t) {
                            this.data.selected = t;
                            this.confirm({
                                accept: !0
                            })
                        }
                    }).show()
                })
            }
        });
    return c
}, 7, 136, 34, 181, 182, 185, 352);
I$(401, "<dropable\n  direct=y name={area}\n  on-dragdrop={ this.drop(area, $event) } >\n<div class=\"group group-{area}\"  ref=group >\n\n  <!-- 普通pill列表 -->\n  <div class='m-schemaList'>\n  <ul class=\"list list-item\" >\n    {#list pillMap as pills by pills_index}\n      <li class='u-bitem { closer[pills_key] ? \"icn-arrow-r\" : \"icn-arrow-d\" } {pills_key!=-1?\"\":\"icn-fx\"} u-bitem-pl u-bitem-top'\n          on-click={ this.toggleFolder(pills_key) } title={this.getTableName(pills_key, area)} >\n          {this.getTableName(pills_key, area) }\n      </li>\n      {#if !closer[pills_key]}\n      {#list pills as pill}\n      <dragable-report target={@( this.defaultTarget(this.getTarget(pill)) )} key={pill} handle='.handle' disabled={provider.disabled} >\n        <pill-base pill={pill} area={area}  isolate=1 selected={this.$outer.data.selected===(pill.alias)} provider ={provider}  modeType={modeType} dataConnectionId={dataConnectionId} type={type} config={config} filters={filters} on-click={this.pick( (pill.alias)) } errorlist={errorlist} on-updateByfield={this.doUpdateByfield()}/>\n      </dragable-report>\n      {/list}\n      {/if}\n    {/list}\n  </ul>\n  <!-- level 列表 -->\n  {#list levels as level }\n  <dropable-report direct=y name={'level`' + level.name}\n     on-toucheddrop={this.drop('level`' + level.name,$event)}  >\n   <ul class=\"list list-item\" >\n      <li class='u-bitem u-bitem-level icn-level u-bitem-pl u-bitem-top'\n          on-click={ this.toggleFolder(level.name) } title={level.name + '(层级)'} >\n         {level.name}(层级) <i class='u-icn u-icn-del' title='取消层级' on-click={this.delLevel(level_index)}></i>\n      </li>\n      {#if !closer[level.name]}\n      {#list level.pathes as pill}\n        <dragable-report target={@( this.defaultTarget(target) )} key={pill} handle='.handle' >\n          <pill-base pill={pill} area='level'   isolate=1 selected={this.$outer.data.selected===(pill.alias)} provider ={provider} modeType={modeType} dataConnectionId={dataConnectionId} type={type} config={config} filters={filters}\n            on-click={this.pick( (pill.alias)) }\n            on-del={this.delFromLevel(level_index, pill_index)}\n            />\n        </dragable-report>\n      {/list}\n      {/if}\n  </ul>\n  </dropable-report>\n  {/list}\n\n  {#if record }\n  <dragable-report\n    disabled = {provider.disabled}\n    target={@( this.defaultTarget1(this.consts.TARGET_MVALUE) )}\n    key={record} >\n    <pill-base pill={record} pull-left  isolate=1 provider ={provider}/>\n  </dragable-report>\n  {/if}\n  <!-- 度量维度列表 -->\n  {#if mValueOrName }\n  <dragable-report\n    disabled = {provider.disabled}\n    target={@( this.defaultTarget1(this.consts.TARGET_MVALUE) )}\n    key={mValueOrName} >\n    <pill-base pill={mValueOrName} pull-left  isolate=1 provider ={provider} dataConnectionId={dataConnectionId}/>\n  </dragable-report>\n  {/if}\n\n\n  </div>\n</div>\n</dropable>\n");
I$(204, function(t, e, i, n, r, a, s) {
    Regular.dom;
    return Regular.extend({
        name: "schema-manager",
        template: "{#include this.$body}",
        data: {
            consts: i
        },
        config: function(t) {
            var e = this,
                i = t.provider;
            if(!i) throw Error("必须传入一个实现getSchema与dispatch的Provider对象");
            var n = i.dispatch;
            i.dispatch = function(t) {
                n.call(i, t);
                if("ADD_DICTIONARY" === t.type) setTimeout(function() {
                    e.pick(t.payload.alias, !0);
                    n({
                        action: "NONE"
                    })
                }, 100)
            };
            i.notify = function() {
                e.replaceSchema(i.getSchema())
            };
            i.disabled = this.data.disabled;
            this.configMeasure()
        },
        init: function() {
            this.data.provider.notify()
        },
        pick: function(t, e) {
            function i(e) {
                return t === e.alias
            }
            var n = this.data,
                r = n.schema;
            if(n.selected !== t || e) {
                n.selected = t;
                if(e) {
                    var a;
                    if(r && r.dimension && r.measure) {
                        if(r.dimension.filter(i).length) a = "dimension";
                        if(r.measure.filter(i).length) a = "measure"
                    }
                    if(a) this.$emit("pick:" + a, t, e)
                }
            } else n.selected = null
        },
        replaceSchema: function(t) {
            var i = this.data,
                n = t.levels;
            i.schema = t;
            var r, a = i.dimension = t.dimension.slice(),
                s = i.measure = t.measure,
                o = i.dimensionMap = {},
                l = i.measureMap = {},
                c = t.tableMap,
                u = this;
            if(n) r = i.reducedLevels = n.reduce(function(t, e) {
                t.push({
                    name: e.name,
                    pathes: (e.pathes || []).reduce(function(t, e) {
                        var i = u._findAndPopByFieldId(e, a);
                        if(i) t.push(i);
                        return t
                    }, [])
                });
                return t
            }, []);
            [s, a].forEach(function(t, i) {
                t.sort(function(t, i) {
                    return e.byAlphabet(t.alias, i.alias)
                });
                var n = 0 === i ? l : o;
                t.forEach(function(t, e) {
                    var i = t.tableId === -2 || t.tableId === -4 ? -1 : t.tableId;
                    (n[i] || (n[i] = [])).push(t)
                })
            });
            this.$emit("replace", {
                dimensionMap: o,
                measureMap: l,
                tableMap: c,
                levels: r
            })
        },
        _findAndPopByFieldId: function(t, e) {
            for(var i = e.length; i--;) {
                var n = e[i];
                if(n.fieldId == t) {
                    e.splice(i, 1);
                    return n
                }
            }
        },
        configMeasure: function() {
            var t = this.data;
            t.mname = i.mname;
            t.mvalue = i.mvalue
        }
    })
}, 401, 7, 136, 177, 34, 185, 178);
I$(380, "<li on-dblclick={this.doubleClickPill(pill)} class=\"j-item u-bitem u-bitem-{pill.interpretation==='Continuous'?'2': '1'} {pill.ignore?'z-ignore':''} {pill.hidden?'z-hidden':''}\" \n  r-class='\"z-act\": selected,\"u-bitem-pl\": pullLeft,\"z-err\": this.isError(pill), \"z-disabled\": provider.disabled'  \n  on-contextmenu='toggle'  \n  title={!pill.indexed ? pill.alias : pill.alias + \"(带索引)\"} >\n  <span class='txt handle' on-click='click' ><i r-hide={!pill.indexed} class=\"protect\">●</i> <i class=\"u-icn u-icn-{(pill.geoRole&&pill.geoRole!='None'?'geo':pill.convertedType||pill.dataType || 'number')|lowercase} \" on-click={this.dateTypeMenu($event)}></i><b class=\"j-text\">{pill|ptext:2}</b> </span>\n\n  <div class=\"menu\" r-hide={ENV.showField} >\n    <i on-click='toggle' ref=i r-hide={(pill.fieldId < 0 && pill.fieldId != -11) || provider.disabled || (dataConnectionId && pill.fieldId == -11)  }></i>\n    {#if show && (pill.fieldId>0 || (pill.fieldId == -11 && !dataConnectionId) ) }\n      <overlay clazz='m-overlay-base'  show position={position} animateIn='fadeIn' animateOut='fadeOut' >\n\n      <ul class=\"u-menu u-menu-sm u-menu-overlay u-menu-sel u-menu-pillbase\"  on-clickouter={show=false} >   \n\n        <li r-hide={pill.produced == \"Generated\"} on-click={this.changeAlias(pill)} >重命名</li>\n        <li r-hide={pill.produced == \"Generated\"} on-click={this.copyPill(pill)} >复制字段</li>\n        \n        {#if pill.tableId !== -4}\n\n          {#if !pill.expr && modeType=='dataModel' && !provider.disabled && pill.fieldId != -12 && pill.fieldId != -13 && pill.fieldId != -15 && (!pill.geoRole || pill.geoRole == 'None')}\n           {#if type==4 || type==10}\n           <li class='popover'>转换数据类型<span class=\"u-icn u-icn-arrow-r arrowr\"></span>\n           <ul class=\"u-list-1\" on-clickouter={[dataTypeShow=false]} >\n              <li class=\"{pill.dataType=='DateTime'?'z-dis':''}\" on-click={this.changeDataType('DateTime',pill)}><i class=\"u-icn u-icn-date\"></i>转换为日期</li>\n              <li class=\"{pill.dataType=='Whole'?'z-dis':''}\" on-click={this.changeDataType('Whole',pill)}><i class=\"u-icn u-icn-whole\"></i>转换为整数</li>\n              <li class=\"{pill.dataType=='Decimal'?'z-dis':''}\" on-click={this.changeDataType('Decimal',pill)}><i class=\"u-icn u-icn-decimal\"></i>转换为小数</li>\n              <li class=\"{pill.dataType=='String'?'z-dis':''}\" on-click={this.changeDataType('String',pill)}><i class=\"u-icn u-icn-str\"></i>转换为字符串</li>\n           </ul>\n           </li>\n           {#else}\n           {#if pill.dataType=='Whole' && !pill.expr}\n           <li class='popover'>转换数据类型<span class=\"u-icn u-icn-arrow-r arrowr\"></span>\n           <ul class=\"u-list-1\" on-clickouter={[dataTypeShow=false]}>\n              <li class=\"{pill.convertedType=='DateTime'?'z-dis':''}\" on-click={this.changeDataType('DateTime',pill)}><i class=\"u-icn u-icn-date\"></i>转换为日期</li>\n              <li class=\"{pill.convertedType!='DateTime'?'z-dis':''}\" on-click={this.changeDataType('Whole',pill)}><i class=\"u-icn u-icn-whole\"></i>还原为数字</li>\n           </ul>\n           </li>\n           {#elseif pill.dataType=='String' && (type==0 || type==1) && !pill.expr}\n           <li class='popover'>转换数据类型<span class=\"u-icn u-icn-arrow-r arrowr\"></span>\n           <ul class=\"u-list-1\" on-clickouter={[dataTypeShow=false]} >\n              <li on-click={this.changeDataType('DateTime',pill)}><i class=\"u-icn u-icn-date\"></i>\n              {#if (pill.convertedType === \"DateTime\") || (pill.convertedType === \"Date\")}\n              编辑日期类型\n              {#else}\n              转换为日期\n                {/if}\n              </li>\n              <li class=\"{ pill.convertedType == 'DateTime' || pill.convertedType == 'Date' ?'':'z-dis'}\" on-click={this.changeDataType('String',pill)}><i class=\"u-icn u-icn-str\"></i>还原为字符串</li>\n          </ul>\n          </li>\n          {#else}\n          <li class='popover z-disabled'>转换数据类型<span class=\"u-icn u-icn-arrow-r arrowr\"></span></li>\n          {/if}\n        {/if}\n          \n        {#elseif modeType=='report'}\n\n\n          {#if (type==4 || type==10) && !pill.expr}\n           <li class='popover'>转换数据类型<span class=\"u-icn u-icn-arrow-r arrowr\"></span>\n           <ul class=\"u-list-1\" on-clickouter={[dataTypeShow=false]}>\n              <li class=\"{(pill.convertedType ? pill.convertedType=='DateTime':pill.dataType=='DateTime') ?'z-dis':''}\" on-click={this.changeDataType('DateTime',pill, true)}><i class=\"u-icn u-icn-date\"></i>转换为日期</li>\n              <li class=\"{(pill.convertedType ? pill.convertedType=='Whole':pill.dataType=='Whole')?'z-dis':''}\" on-click={this.changeDataType('Whole',pill, true)}><i class=\"u-icn u-icn-whole\"></i>转换为整数</li>\n              <li class=\"{(pill.convertedType ? pill.convertedType=='Decimal':pill.dataType=='Decimal')?'z-dis':''}\" on-click={this.changeDataType('Decimal',pill, true)}><i class=\"u-icn u-icn-decimal\"></i>转换为小数</li>\n              <li class=\"{(pill.convertedType ? pill.convertedType=='String':pill.dataType=='String')?'z-dis':''}\" on-click={this.changeDataType('String',pill, true)}><i class=\"u-icn u-icn-str\"></i>转换为字符串</li>\n           </ul>\n           </li>\n           {#else}\n           {#if pill.dataType=='Whole' && !pill.expr}\n           <li class='popover'>转换数据类型<span class=\"u-icn u-icn-arrow-r arrowr\"></span>\n           <ul class=\"u-list-1\" on-clickouter={[dataTypeShow=false]}>\n              <li class=\"{pill.convertedType=='DateTime'?'z-dis':''}\" on-click={this.changeDataType('DateTime',pill, true)}><i class=\"u-icn u-icn-date\"></i>转换为日期</li>\n              <li class=\"{pill.convertedType!='DateTime'?'z-dis':''}\" on-click={this.changeDataType('Whole',pill, true)}><i class=\"u-icn u-icn-whole\"></i>还原为数字</li>\n           </ul>\n           </li>\n           {#elseif pill.dataType=='String' && (type==0 || type==1) && !pill.expr}\n           <li class='popover'>转换数据类型<span class=\"u-icn u-icn-arrow-r arrowr\"></span>\n           <ul class=\"u-list-1\" on-clickouter={[dataTypeShow=false]}>\n              <li on-click={this.changeDataType('DateTime',pill, true)}><i class=\"u-icn u-icn-date\"></i>\n              {#if (pill.convertedType === \"DateTime\") || (pill.convertedType === \"Date\")}\n              编辑日期类型\n              {#else}\n              转换为日期\n                {/if}\n              </li>\n              <li class=\"{ pill.convertedType == 'DateTime' || pill.convertedType == 'Date' ?'':'z-dis'}\" on-click={this.changeDataType('String',pill, true)}><i class=\"u-icn u-icn-str\"></i>还原为字符串</li>\n          </ul>\n          </li>\n            {#else}\n            <li class='popover z-disabled'>转换数据类型<span class=\"u-icn u-icn-arrow-r arrowr\"></span></li>\n          {/if}\n          {/if}\n\n          {/if}\n\n        {/if}\n         <li r-hide={pill.role !== 'Dimension' || pill.tableId === -1 || pill.tableId === -2 || pill.tableId === -4 ||(dataConnectionId && pill.fieldId == -11)} on-click={this.onDictionary(pill)} style='background-color: {this.hasDictionary(pill) ? \"#f2f2f2\" : \"\"};'>数据字典</li>\n          <li r-hide={true || pill.role !== 'Measure' || (pill.dataType !== 'Whole' && pill.dataType !== 'Decimal' && pill.dataType !== \"String\")} on-click={this.onFormat(pill)} >数据格式</li>\n       <li r-hide={pill.produced == \"Generated\" || pill.tableId !== -1 && pill.tableId !== -2 && pill.tableId !== -4 } on-click={this.editField(pill)} >编辑</li>\n      {#if pill.role === 'Dimension'}\n        {#if area === 'level'}\n          <li  r-hide={pill.produced == \"Generated\"} on-click='del' >移出层级</li>\n        {#else}\n          <li r-hide={pill.produced == \"Generated\"} on-click={this.createLevel(pill)} >创建层级</li>\n          <li r-hide={pill.produced == \"Generated\"} on-click={this.addToLevel(pill)} >加入层级</li>\n        {/if}\n      {/if}\n        <li r-hide={pill.produced == \"Generated\" ||  pill.tableId !== -1 && pill.tableId !== -2 && pill.tableId !== -4} on-click={this.deleteField(pill)} >删除</li>\n\n        <li r-hide={pill.fieldId === -11 || pill.role !== 'Dimension' || pill.tableId === -1 || pill.tableId === -2 || pill.tableId === -4 } on-click={this.onCreateGroup(pill)}>创建组</li>\n\n        <li r-hide={true || pill.role !== 'Measure' || (pill.dataType !== 'Whole' && pill.dataType !== 'Decimal' && pill.dataType !== \"String\")} on-click={this.onFormat(pill)} >数据格式</li>\n\n        {#if (pill.interpretation === 'Continuous' && pill.produced !== 'Generated') && !(pill.granularity === \"g1\" && pill.tableId === -1)}\n        <li class='split'></li>\n        {#list (pill.dataType|aggregator) as agg }\n          <li class={agg===pill.aggregator&&'z-sel'} on-click={this.changeAggregator( agg)}><i class=\"u-icn u-icn-ok\"></i>{this.consts.AGGREGATOR_NAMES[agg]}</li>\n        {/list}\n        {/if}\n        <li r-hide={pill.tableId === -4 || pill.produced == \"Generated\" || this.isDate(pill) || (pill.granularity === \"g1\" && pill.tableId === -1)} on-click={this.changeRole(pill)}>转换为{pill.role==='Dimension'?'度量':'维度'}</li>   \n      </ul>\n      </overlay>\n\n\n    {/if}\n  </div>\n\n  {#if modeType=='dataModel' && !provider.disabled && pill.fieldId != -12 && pill.fieldId != -13 && pill.fieldId != -15}\n  <div class=\"u-icn {pill.ignore? 'u-icn-eye2': 'u-icn-eye3'} menu-ignore\" on-click={this.changeIgnore(pill)} title=\"{pill.ignore? '已忽略': '忽略列'}\"></div>\n  {/if}\n</li>\n\n     \n");
I$(180, function(t, e, i) {
    var n = Regular.dom,
        r = {
            data: {
                autoClose: !0,
                title: "来自有数的提示"
            },
            show: function() {
                this.supr();
                var t = this.$refs.input;
                if(t) {
                    t.focus();
                    t.select();
                    n.on(t, "keypress", function(t) {
                        if(13 === t.which) {
                            t.preventDefault();
                            this.confirm(!0)
                        }
                    }.bind(this))
                }
                return new Promise(function(t, e) {
                    this.data.resolve = t;
                    this.data.reject = e
                }.bind(this))
            }
        },
        a = e.extend({
            name: "confirm",
            events: {
                confirm: function(t) {
                    if(!t.accept) return this.destroy();
                    this.data.resolve({
                        accept: !!t.accept,
                        close: this.destroy.bind(this)
                    })
                }
            },
            $body: '<div class="m-remind"><p class="message"><span class="u-icn u-icn-info" ></span> {message}</p></div>'
        }).implement(r),
        s = e.extend({
            name: "prompt",
            events: {
                confirm: function(t) {
                    if(!t.accept) return this.destroy();
                    this.data.resolve({
                        accept: t.accept,
                        value: !t.accept ? null : this.data.value,
                        close: this.destroy.bind(this)
                    })
                }
            },
            $body: '<div class="m-remind"><p class="message"><span class="u-icn u-icn-info" ></span> {message}</p><input type="text" ref=input r-model={value} /></div>'
        }).implement(r),
        o = s.extend({
            name: "prompt",
            $body: '<form><h3 class="winlab">{message||"重命名" }:</h3><span class="u-txtwrap"><input type="text" class="u-txt j-value" r-model="value" name="name" placeholder="请输入..." autocomplete="off" ref=input ></span> </form>'
        }),
        l = {
            alert: function(e, i) {
                return Remind.confirm(e, t.extend({
                    hideCancel: !0
                }, i)).show()
            },
            Rename: o,
            Confirm: a,
            Prompt: s,
            confirm: function(e, i) {
                return new a({
                    data: t.extend({
                        message: e
                    }, i)
                }).show()
            }
        };
    ["Prompt", "Rename"].forEach(function(e) {
        l[e.toLowerCase()] = function(i, n, r) {
            return new l[e]({
                data: t.extend({
                    message: i,
                    value: n
                }, r)
            }).show()
        }
    });
    return l
}, 7, 185, 34);
I$(545, '{#if !ready}\n  <div style=\'text-align:center;vertical-align:middle;width:514px;\'>\n    <span class=\'u-load\' style=\'display:inline-block;vertical-align:middle;margin:8px\'></span> <span>正在读取列表... </span>\n  </div>\n{#else}\n  <div class="m-search" style="border:1px solid #ddd;">\n    <div class="search" >\n      <span class=\'u-icn-search u-icn\'></span>\n      <input placeholder="输入关键词搜索"  r-model={search} class=\'u-ipt-search\' on-input={this.searchInput()}> \n      <i class="u-icn u-icn-close" r-hide={!search} de-click={this.clearSearch()} r-anim=\'on:enter;class:animated fadeIn;on:leave;class:animated fadeOut\' ></i>\n    </div>\n  </div>\n  <table border="1">\n    <tr>\n      <td class="tdf">原名</td>\n      <td class="tdf">别名</td>\n    </tr>\n  </table>\n  <div class="scrollbar" ref=scroll >\n    <div style="height:{preHeight}px;">\n    </div>  \n    <table border="1" >         \n      {#list optAliasMembers as member by member_index}\n        <tr>\n          <td>\n            <span class="dt" title={member_key}>{member_key}</span>\n          </td>\n          <td>\n            <input class="dt" title={optAliasMembers[member_key]} r-model={optAliasMembers[member_key]}  style=\'background-color: {optAliasMembers[member_key] !== member_key ? "#f2f2f2" : ""};\' on-blur={this.onBlur(member_key)} on-focus={this.onFocus(member_key)} on-input={this.onInput(member_key)}  />\n          </td>\n        </tr>\n      {/list}\n    </table>\n    <div style="height:{nextHeight}px;">\n    </div>\n  </div>\n\n{/if}');
I$(546, '<button type="button" on-click={this.deleteAlias(true)} class="u-btn u-btn-2 u-btn-s1">{confirmText||\'清除别名\'}</button> \n<button r-hide={hideCancel} type="button" on-click={this.confirm(false)} class="u-btn u-btn-2 u-btn-s1 btnright">{cancelText||\'取消\'}</button>\n<button type="button" on-click={this.confirm(true)} class="u-btn u-btn-1 u-btn-s1 btnright">{confirmText||\'确定\'}</button>');
I$(381, function(t, e, i, n, r, a, s, o, l, c) {
    var u = i.cache,
        d = (i.mergeDictionaryData, Regular.dom),
        h = 31,
        f = o.extend({
            name: "dictionary-modal",
            $body: n,
            $foot: r,
            data: {
                title: "数据字典",
                className: "m-dictionary",
                offset: 0,
                showNumber: 20,
                autoRecycleRequest: !1
            },
            config: function(t) {
                this.supr(t);
                this.data._cacheModel = s._$$DataModelCache._$allocate();
                var e = this;
                this.data._cacheModel._$addEvent("ongetdimensionmembers", function(t) {
                    e.onGetDimensionMembers(t)
                });
                this.initData();
                this.$on("confirm", function(t) {
                    if(t.accept) this.save();
                    else {
                        this.cancleGetDimension();
                        this.destroy()
                    }
                })
            },
            init: function(t) {
                this.supr(t);
                if(this.$refs.scroll) d.on(this.$refs.scroll, "scroll", this._scrollList.bind(this))
            },
            cancleGetDimension: function() {
                if(this.cachePromise && this.cachePromise.request && this.requestRun) e._$abort(this.cachePromise.request)
            },
            initData: function() {
                var e = this.data;
                this.data.ready = !1;
                if("Generated" == this.data.pill.produced) {
                    var n = this.measureNameInit();
                    this.updateMembers(n)
                } else {
                    var r = this,
                        a = this.data.pill,
                        s = this.data.dictPill;
                    if(s) {
                        this.data.alias = s.alias;
                        this.data.granularity = s.granularity;
                        this.data.dataType = s.dataType;
                        this.data.fieldId = s.fieldId;
                        this.data.dict = s.dict
                    } else {
                        this.data.alias = this.getSingleName(a.alias);
                        this.data.granularity = a.granularity;
                        this.data.dataType = "String"
                    }
                    this.data.refId = a.fieldId;
                    this.data.refType = a.dataType;
                    if(e.dataConnectionId) {
                        var e = {
                            dataConnectionId: e.dataConnectionId,
                            pill: a,
                            config: e.config
                        };
                        this.data._cacheModel._$getDimensionMembers(e)
                    } else {
                        this.cachePromise = u._$getDimensionMembers({
                            reportId: i.query.rid,
                            dimensions: [i.fixPill(a)]
                        });
                        this.requestRun = !0;
                        this.cachePromise.then(function(e) {
                            r.requestRun = !1;
                            if(200 == e.code) {
                                var i = e.result.map(function(t) {
                                    return t[0]
                                });
                                r.updateMembers(i)
                            } else t.message("获取维度成员列表失败！", "err")
                        })["catch"](function(t) {})
                    }
                }
            },
            getSingleName: function(t) {
                t += "_别名";
                for(var e = l.getState().current, i = e.dimension.concat(e.measure), n = 0, r = i.length; n < r; n++)
                    if(i[n].alias == t) return this.getSingleName(t);
                return t
            },
            measureNameInit: function() {
                var e, n, r = this.data.provider.getSchema(),
                    s = [],
                    o = {};
                if(this.data.dataConnectionId);
                else {
                    var c = l.getState().current,
                        u = i.formatQuery(c),
                        d = (c.schemaOptions, a.getMeasureNameMembers(u));
                    d.forEach(function(i) {
                        e = a.getDefaultDisplayName(u, i);
                        n = t.pid(i);
                        s.push(e);
                        o[e] = n
                    })
                }
                this.data.dict = r.schemaOptions && r.schemaOptions.dict ? r.schemaOptions.dict : {};
                this.data.pidsMap = o;
                return s
            },
            onGetDimensionMembers: function(e) {
                if(200 == e.code) {
                    var i = e.result.map(function(t) {
                        return t[0]
                    });
                    this.updateMembers(i)
                } else if(750 === e.code) t.messageDetail(e);
                else t.message("获取维度成员列表失败！", "err")
            },
            _mergeDictionaryData: function() {
                if(this.data.dict) {
                    var t = this.data.dimensionMembers,
                        e = this.data.dict;
                    if("Generated" == this.data.pill.produced) {
                        var i = this.data.pidsMap;
                        for(var n in t) {
                            var r = i[n];
                            if(r in e) t[n] = e[r]
                        }
                    } else
                        for(var n in t)
                            if(n in e) t[n] = e[n]
                }
            },
            updateMembers: function(t) {
                this.data.ready = !0;
                var e = {};
                t.forEach(function(t, i) {
                    e[t] = t
                });
                this.data.dimensionMembers = e;
                this._mergeDictionaryData();
                this._filterMembers();
                this._optimizMembers();
                this.$update();
                if(this.$refs.scroll) d.on(this.$refs.scroll, "scroll", this._scrollList.bind(this))
            },
            _filterMembers: function() {
                var e = this.data.search;
                if(e) {
                    e = String(e).toLowerCase();
                    var i = {},
                        n = this.data.dimensionMembers;
                    for(var r in n)
                        if(~r.toLowerCase().indexOf(e)) i[r] = n[r];
                    this.data.searchMembers = i
                } else this.data.searchMembers = t.extend(this.data.dimensionMembers)
            },
            _optimizMembers: function() {
                var t = this.data.offset,
                    e = this.data.showNumber,
                    i = {},
                    n = this.data.searchMembers,
                    r = 0;
                for(var a in n) {
                    if(r >= t && r < e + t) i[a] = n[a];
                    r++
                }
                this.data.optAliasMembers = i;
                this.data.preHeight = t * h;
                var s = r - t - e;
                this.data.nextHeight = s > 0 ? s * h : 0
            },
            _scrollList: function(t) {
                if(this.data.preKey) this.onBlur(this.data.preKey);
                var e = this.$refs.scroll,
                    i = e.scrollTop,
                    n = this.data.offset,
                    r = parseInt(i / h, 10);
                if(r > n + 10) this.data.offset = r;
                if(r < n + 5) {
                    this.data.offset -= 5;
                    if(this.data.offset > r) this.data.offset = r;
                    if(this.data.offset < 0) this.data.offset = 0
                }
                if(n !== this.data.offset) {
                    this._optimizMembers();
                    this.$update()
                }
            },
            _synchroData: function() {
                var t = this.data.dimensionMembers,
                    e = this.data.optAliasMembers,
                    i = this.data.searchMembers;
                for(var n in e) {
                    t[n] = e[n];
                    i[n] = e[n]
                }
            },
            gatherData: function() {
                this._synchroData();
                var t = this.data.dimensionMembers,
                    e = {};
                if("Generated" == this.data.pill.produced) {
                    var i = this.data.pidsMap;
                    for(var n in t)
                        if(n != t[n] && t[n]) e[i[n]] = t[n]
                } else
                    for(var n in t)
                        if(n != t[n] && t[n]) e[n] = t[n]; return e
            },
            save: function() {
                if(this.data.preKey) this.onBlur(this.data.preKey);
                if(!this.data.isDelay) {
                    var t = this.gatherData(),
                        e = {
                            dict: t,
                            refId: this.data.refId,
                            produced: "DataDict",
                            $type: "Dimension",
                            role: "Dimension",
                            alias: this.data.alias,
                            tableId: -2,
                            granularity: this.data.granularity,
                            dataType: this.data.dataType,
                            interpretation: "Discrete",
                            refType: this.data.refType
                        };
                    if(this.data.fieldId) e.fieldId = this.data.fieldId;
                    if("Generated" == this.data.pill.produced) this.saveMeasureAction(t);
                    else this.saveAction(e)
                } else this.data.isDelay = !1
            },
            saveMeasureAction: function(t) {
                var e = {
                    pill: this.data.pill,
                    dict: t
                };
                this.$emit("action", {
                    type: "ADD_DICTIONARY_MEASURE",
                    payload: e
                });
                this.destroy()
            },
            saveAction: function(e) {
                var n = !1;
                for(var r in e.dict) n = !0;
                var a = this,
                    s = this.data;
                if(s.dictPill)
                    if(n) {
                        a.$emit("action", {
                            type: "EDIT_DICTIONARY",
                            payload: e
                        });
                        a.destroy()
                    } else {
                        if(this.__confirm) this.__confirm._$recycle();
                        var o = this.data.dictPill;
                        a.$update("show", !1);
                        this.__confirm = c._$$Confirm._$allocate({
                            content: "没有修改别名，删除原创建的数据字典: “" + this.data.alias + "”吗?",
                            onSubmit: function() {
                                a.$emit("action", {
                                    type: "DELETE_FIELD",
                                    payload: o
                                });
                                a.destroy()
                            }._$bind(this)
                        })
                    }
                else if(n) u._$getPillId(i.query.rid).then(function(i) {
                    if(200 === i.code) {
                        e.fieldId = i.result;
                        a.$emit("action", {
                            type: "ADD_DICTIONARY",
                            payload: e
                        });
                        a.destroy()
                    } else t.message(i && i.message || "获取唯一的fieldId失败", "err")
                });
                else t.message("没有修改别名，不能创建数据字典！", "warm")
            },
            onBlur: function(e) {
                var i = !1,
                    n = this.data.optAliasMembers[e],
                    r = this.data.dimensionMembers;
                for(var a in r)
                    if(e !== a && r[a] == n) i = !0;
                if(i) {
                    t.message("该名称已存在，请输入其他名称！", "warm");
                    this.data.optAliasMembers[e] = r[e];
                    var s = this;
                    this.data.isDelay = !0;
                    setTimeout(function() {
                        s.data.isDelay = !1
                    }, 2e3)
                }
                delete this.data.preKey;
                this._synchroData()
            },
            onFocus: function(t) {
                this.data.preKey = t
            },
            deleteAlias: function() {
                var t, e = this.data.dimensionMembers;
                for(t in e) e[t] = t;
                var i = this.data.optAliasMembers;
                for(var t in i) i[t] = t;
                var n = this.data.searchMembers;
                for(t in n) n[t] = t
            },
            onInput: function(e) {
                var i = this.data.optAliasMembers[e];
                if(i && i.length > 40) {
                    t.message("名称长度限制在40个字内！", "warm");
                    this.data.optAliasMembers[e] = i.slice(0, 40)
                }
            },
            searchInput: function() {
                this._filterMembers();
                this._optimizMembers()
            },
            clearSearch: function() {
                this.data.search = "";
                this.searchInput()
            }
        });
    return f
}, 7, 139, 34, 545, 546, 176, 63, 185, 35, 54);
I$(550, '<div class="row" r-hide={pill.produced == "Generated"}>\n\t<label>字段名称</label>\n\t<input type="text" placeholder="请输入名称"  r-model={alias} />\n</div>\n<div class="row" ref="context">\n\t{#if mbReady !== 1}\n      <div style=\'text-align:center;vertical-align:middle\'>\n        {#if mbReady === 0}\n        <span class=\'u-load\' style=\'display:inline-block;vertical-align:middle;margin:8px\'></span> <span>正在读取列表... </span>\n        {#elseif mbReady === -1}\n        <p style=\'line-height: 48px;\'><span class="u-icn u-icn-warm u-error"></span>加载列表错误</p>\n        {/if}\n      </div>\n    {#else}\n    \t<div class="scrollbar" ref=scroll >\n\t\t    <div style="height:{preHeight}px;">\n\t\t    </div>   \n\t\t    <ul>\n\t\t    \t{#list optMembers as member by member_index}\n\t\t\t      \t{#if member && member[1] && member[1].list}\n\t\t\t      \t\t<dropable-group direct=y name={\'group_\' + member[0]} on-toucheddrop={this.dropToGroup(member[0], $event)}  >\n\t\t\t      \t\t<li class= "item parent u-bitem " r-class={{\'z-choose\': this.detectChoose(member).choosed, \'u-bitem-1\': !member[1].create}} title={member[0]} on-mouseup={this.itemClick(member, $event)} on-click={this.clickOpen(member, $event)}>\n\t\t\t      \t\t\t<i class="u-icn u-icn-group icn"></i>\n\t\t\t      \t\t\t{#if member[1].create }\n\t\t\t      \t\t\t\t<span class="u-txtwrap">\n\t\t\t      \t\t\t\t\t<input type="text" class="u-txt" placeholder="请输入文件夹名称" autocomplete="off" ref="nameInput" value={member[0]} on-click={this.inputClick($event)} on-mouseup={this.folderMouseDown($event)} on-focus={this.hideError("groupName")} />\n\t\t\t      \t\t\t\t</span>\n\t\t\t\t\t\t\t  \t<i class="u-icn u-icn-gou namebtn namebtn-ok" on-click={this.clickOk(member[0], $event)} on-mouseup={this.folderMouseDown($event)}></i>\n\t\t\t\t\t\t\t  \t<i class="u-icn u-icn-close namebtn namebtn-close" on-click={this.clickCancle(member[0], $event)} on-mouseup={this.folderMouseDown($event)}></i>\n\t\t\t      \t\t\t{#else}\n\t\t\t      \t\t\t\t<div class="ctx">{member[0] + (member[1].list.length > 0 ? "" : "<空组>")}</div>\n\t\t\t      \t\t\t\t<div class="menu" on-click={this.menuClick(member, $event)} on-mouseup={this.folderMouseDown($event)}><i></i></div>\n\t\t\t      \t\t\t{/if}\n\t\t\t      \t\t</li>\n\t\t\t      \t\t</dropable-group>\n\t\t\t      \t\t\t\t\t      \t\t\n\t\t\t      \t\t{#if member[1].open}\n\t\t\t      \t\t\t{#if member[1].list.length > 0}\n\t\t\t      \t\t\t\t<dropable-group direct=y name={\'group_item_\' + member[0]} on-toucheddrop={this.dropToGroup(member[0], $event)}  >\n\t\t\t\t      \t\t{#list member[1].list as item by item_index}\n\t\t\t\t      \t\t\t<dragable-group key={item} groupsStatus={groupsStatus} handle=\'.handle\' on-dragend={this.dragendGroup(item, $event)} target=\'group\'>\n\t\t\t\t      \t\t\t<li class="item child u-bitem u-bitem-1" r-class={{\'z-choose\': this.detectChoose(item).choosed}} title={item} on-mouseup={this.itemClick(item, $event)}>\n\t\t\t\t      \t\t\t\t<i class="icn">●</i>\n\t\t\t\t      \t\t\t\t<div class="ctx ctx-1">{item === null? \'null\': item}</div>\n\t\t\t\t      \t\t\t\t<div class="menu" on-click={this.menuClick(item, $event)} ><i></i></div>\n\t\t\t\t      \t\t\t</li>\n\t\t\t\t      \t\t\t</dragable-group>\n\t\t\t\t      \t\t{/list}\n\t\t\t      \t\t\t\t</dropable-group>\n\t\t\t      \t\t\t{/if}\n\t\t\t      \t\t{/if}\n\t\t\t      \t{#else}\n\t\t\t      \t\t<!-- <dropable-group-item direct=y name=\'group\' on-toucheddrop={this.drop($event)}  > -->\n\t\t\t      \t\t<dragable-group key={member} groupsStatus={groupsStatus}  handle=\'.handle\'  target=\'group\'>\n\t\t\t      \t\t<li class="item u-bitem u-bitem-1 " r-class={{\'z-choose\': this.detectChoose(member).choosed}} title={member} on-mouseup={this.itemClick(member, $event)}><i class="icn">●</i><div class="ctx">{member === null? \'null\': member}</div><div class="menu" on-click={this.menuClick(member, $event)} ><i></i></div></li>\n\t\t\t      \t\t</dragable-group>\n\t\t\t      \t\t<!-- </dropable-group-item> -->\n\t\t\t      \t{/if}\n\t\t\t      {/list}\n\t\t\t      <!-- </dropable-group-item> -->\n\t\t    </ul>\n\t\t    <div style="height:{nextHeight}px;">\n\t\t    </div>\n\t\t</div>\n    {/if}\n</div>');
I$(551, '<button type="button" on-click={this.onCreateGroup()} class="u-btn u-btn-1 u-btn-s1 btn" r-class={{\'z-dis\':this.hasChooseGroup() || this.hasCreateGroup()}}>{confirmText||\'新建组\'}</button>\n<!-- <button type="button" on-click={this.resetGroup()} class="u-btn u-btn-5 u-btn-s1 btn">重置</button>  -->\n<button type="button" on-click={this.confirm(true)} class="u-btn u-btn-1 u-btn-s1 btnright">{confirmText||\'确定\'}</button>\n<button r-hide={hideCancel} type="button" on-click={this.confirm(false)} class="u-btn u-btn-2 u-btn-s1 btnright">{cancelText||\'取消\'}</button>\n');
I$(647, '<ul>\n\t{#list groupNames as name}\n\t\t<li r-class={{"z-sel": selectName === name}} title={name} on-click={this.selectName(name)}>{name}</li>\n\t{/list}\n</ul>');
I$(552, function(t, e, i) {
    var n = i.extend({
        name: "to-group-modal",
        $body: e,
        data: {
            className: "m-groupNames"
        },
        config: function(t) {
            this.supr(t);
            if(t.groupNames && t.groupNames.length > 0) t.selectName = t.groupNames[0];
            this.$on("confirm", function(t) {
                if(t.accept) this.save();
                else this.destroy()
            })
        },
        save: function() {
            var e = this.data,
                i = e.selectName;
            if(!i) t.message("没有选中组名！", "warm");
            else {
                this.$emit("save", i);
                this.destroy()
            }
        },
        selectName: function(t) {
            this.data.selectName = t;
            this.$update()
        }
    });
    return n
}, 7, 647, 185);
I$(553, function(t, e) {
    var i = Regular.dom,
        n = ReDnd.Dragable.extend({
            name: "dragable-group",
            getPlaceholder: function(t, e) {
                var i = e.key;
                t = document.createElement("div");
                t.className = "u-item u-item-drag u-item-item";
                var n = document.createElement("h6");
                t.style.width = "172px";
                Regular.dom.text(n, i);
                t.appendChild(n);
                return t
            },
            validate: function(t) {
                var e = this.data.groupsStatus,
                    i = t.split("_"),
                    n = i.slice(1).join("_"),
                    r = i.slice(2).join("_");
                return t.indexOf("group") !== -1 && (e[n] || e[r])
            },
            config: function(t) {
                this.supr(t);
                this.$on({
                    dragstart: function() {
                        i.addClass(document.body, "z-drag")
                    },
                    dragend: function() {
                        i.delClass(document.body, "z-drag")
                    }
                });
                this.$on("dragend", function() {
                    if(n.to) i.delClass(n.to, "dropable-active")
                });
                this.$on("dragmove", function(t) {
                    var r = this.placeholder;
                    if(r) {
                        var a = t.drag,
                            s = a.drop;
                        if(!t.drop) {
                            if(s && e.TARGET_PILL.test(s.data.name)) i.addClass(r, "u-item-invalid");
                            if(n.to) i.delClass(n.to, "dropable-active")
                        } else {
                            i.delClass(r, "u-item-invalid");
                            var o = t.drop.node;
                            if(o) {
                                if(n.to) i.delClass(n.to, "dropable-active");
                                n.to = o;
                                i.addClass(o, "dropable-active")
                            }
                        }
                    }
                })
            }
        })
}, 7, 136, 35, 173);
I$(554, function(t, e) {
    var i = ReDnd.util,
        n = Regular.dom,
        r = document.compareDocumentPosition ? function(t, e) {
            if(!t.compareDocumentPosition || !e.compareDocumentPosition) return 0;
            else return 4 & t.compareDocumentPosition(e) ? -1 : t === e ? 0 : 1
        } : function(t, e) {
            if(!t.sourceIndex || !e.sourceIndex) return 0;
            else return t.sourceIndex - e.sourceIndex
        };
    ReDnd.Dropable.extend({
        name: "dropable-group",
        config: function(t) {
            this.supr(t);
            this.drags = [];
            this.$on("add_drag", function(t) {
                var e = this;
                this.addDrag(t);
                t.$on("$destroy", function() {
                    e.delDrag(t)
                })
            })
        },
        init: function() {
            this.supr();
            var t = this.data,
                e = [],
                r = [],
                a = t.range || 8;
            this.$on("dragenter", function() {
                var t = this.drags,
                    n = this.offset;
                e = [];
                t.forEach(function(t) {
                    e.push(i.getDimension(t.node))
                });
                r = e.map(function(t) {
                    return {
                        left: t.left - n.left - a,
                        top: t.top - n.top - a,
                        width: t.width + 2 * a,
                        height: t.height + 2 * a
                    }
                })
            });
            this.$on("dragmove", function(t) {
                var e = (this.offset, this.drags),
                    i = this.getInRanges(t.position, r);
                t.touchedInfo = i;
                if(i) {
                    this.computePostion(i, t.drag);
                    var a, s = i.injectAt;
                    if(void 0 != s) {
                        var o = e[s < 0 ? 0 : s].node;
                        a = s === -1 ? "dragable-up" : "dragable-up"
                    } else if("number" == typeof i.injectTo) {
                        var o = e[i.injectTo].node;
                        a = "dragable-current"
                    }
                    if(a) {
                        this.releaseTouch();
                        if(!n.hasClass(o, a)) n.addClass(o, a)
                    }
                } else this.releaseTouch();
                this.$emit("touchedmove", t)
            });
            this.$on("dragleave", this.releaseTouch.bind(this));
            this.$on("dragdrop", function(t) {
                var e = (this.offset, this.drags, this.getInRanges(t.position, r));
                t.touchedInfo = e;
                if(e) this.computePostion(e, t.drag, t.position);
                else e = {
                    drag: t.drag,
                    drop: t.drop
                };
                this.releaseTouch();
                this.$emit("toucheddrop", t)
            })
        },
        releaseTouch: function() {
            var t = this.drags;
            t.forEach(function(t) {
                var e = t.node,
                    i = e.className;
                e.className = i.replace(/\s*dragable-(up|current)\s*/g, "")
            })
        },
        getInRanges: function(t, e) {
            var n, r, a = this.data.direct,
                s = e.length,
                o = i.getInRanges(t, e);
            if(o || !s) return o;
            else if("y" === a) {
                if(t.top < e[0].top) {
                    n = -1;
                    r = 0
                }
                if(t.top > e[e.length - 1].top) r = n = s - 1
            } else {
                if(t.left < e[0].left) {
                    n = -1;
                    r = 0
                }
                if(t.left > e[e.length - 1].left) r = n = s - 1
            }
            return null != r ? {
                injectAt: n,
                index: r
            } : null
        },
        computePostion: function(t, e, i) {
            var n = this.data,
                r = t.dimension,
                a = (t.touched, t.index),
                s = n.direct,
                o = this.drags.indexOf(e);
            t.selfIndex = o;
            if(null != t.injectAt) return t;
            if(!/^(x|y)$/.test(s)) s = "x";
            var l, c, u = 1 * r.width / 2,
                d = 1 * r.width / 2,
                h = 1 * r.height / 2,
                f = 1 * r.height / 2;
            if("x" === s)
                if(r.left > d) l = a;
                else if(r.left < u) l = a - 1;
            if("y" === s)
                if(r.top > f) l = a;
                else if(r.top < h) l = a - 1;
            t.injectAt = -1;
            t.injectTo = c
        },
        addDrag: function(t) {
            var e = this.drags;
            e.push(t);
            setTimeout(function() {
                e.sort(function(t, e) {
                    return r(t.node, e.node)
                })
            })
        },
        delDrag: function(t) {
            for(var e = this.drags, i = e.length; i--;)
                if(e[i] === t) return e.splice(i, 1)
        }
    })
}, 7, 173);
I$(382, function(t, e, i, n, r, a, s, o, l, c, u, d) {
    var h = i.cache,
        f = Regular.dom,
        p = /^\(\d+\)/i,
        _ = 31,
        m = o.extend({
            name: "group-modal",
            $body: n,
            $foot: r,
            data: {
                title: "创建组",
                className: "m-group",
                offset: 0,
                showNumber: 20,
                autoRecycleRequest: !1
            },
            config: function(e) {
                this.supr(e);
                this.data._cacheModel = s._$$DataModelCache._$allocate();
                var i = this;
                this.data._cacheModel._$addEvent("ongetdimensionmembers", function(t) {
                    i.onGetDimensionMembers(t)
                });
                this.initData();
                this.$on("confirm", function(t) {
                    if(t.accept) this.save();
                    else this.destroy()
                });
                var n = this.data.groupPill,
                    r = n && n.fieldId;
                this.$watch("alias", function(e) {
                    if(this.__checkSameName(e, r)) t.message("该名字已经被使用，请重新命名！", "warm")
                }.bind(this))
            },
            init: function(t) {
                this.supr(t);
                i.toggleContextMenu()
            },
            initData: function() {
                var e = this.data;
                e.mbReady = 0;
                e.chooseList = [];
                var n = e.provider.getSchema();
                e.schemaList = n["dimension"].concat(n["measure"]);
                if("Generated" == e.pill.produced && !e.dataConnectionId) {
                    var r = this.measureNameInit(n);
                    this.initMembers(r)
                } else {
                    var a = e.pill,
                        s = e.groupPill;
                    if(s) {
                        e.alias = s.alias;
                        e.granularity = s.granularity;
                        e.dataType = s.dataType;
                        e.fieldId = s.fieldId;
                        e.groupsStatus = this.makeGroupStatus(s.groups)
                    } else {
                        e.alias = this.createGroupAlias(a.alias, 1);
                        e.groupsStatus = this.makeGroupStatus({});
                        e.granularity = a.granularity;
                        e.dataType = "String"
                    }
                    e.refId = a.fieldId;
                    e.refType = a.dataType;
                    if(e.dataConnectionId) {
                        var o = {
                            dataConnectionId: e.dataConnectionId,
                            pill: a,
                            config: e.config
                        };
                        e._cacheModel._$getDimensionMembers(o)
                    } else {
                        this.cachePromise = h._$getDimensionMembers({
                            reportId: i.query.rid,
                            dimensions: [i.fixPill(a)]
                        });
                        var l = this;
                        this.cachePromise.then(function(i) {
                            if(200 == i.code) {
                                var n = i.result.map(function(t) {
                                    return t[0]
                                });
                                l.initMembers(n)
                            } else {
                                e.mbReady = -1;
                                t.message("获取维度成员列表失败！", "err");
                                l.$update()
                            }
                        })["catch"](function(t) {})
                    }
                }
            },
            save: function() {
                if(!this.hasCreateGroup()) {
                    var e, i = this.data.groupsStatus;
                    for(var n in i)
                        if(i[n].create) {
                            e = n;
                            break
                        }
                    if(this.validate("groupName", e)) {
                        var r = this.data;
                        if(r.alias) {
                            if(r.alias && r.alias.length > 40) {
                                t.message("组名称的长度不可以超过40个字符！", "warm");
                                return
                            }
                            i = r.groupsStatus;
                            var a = {};
                            for(var n in i) a[n] = i[n].list;
                            if(!this.__checkSameName(r.alias, r.fieldId))
                                if("Generated" == r.pill.produced) this.saveMeasureAction(a);
                                else {
                                    var s = {
                                        groups: a,
                                        refId: r.refId,
                                        refType: r.refType,
                                        produced: "Grouping",
                                        $type: "Dimension",
                                        role: "Dimension",
                                        alias: r.alias,
                                        tableId: -4,
                                        granularity: r.granularity,
                                        dataType: r.dataType,
                                        interpretation: "Discrete"
                                    };
                                    if(r.fieldId) s.fieldId = r.fieldId;
                                    this.saveAction(s)
                                }
                            else t.message("该名字已经被使用，请重新命名！", "warm")
                        } else t.message("组名称不可以为空！", "warm")
                    }
                } else t.message("有组需要确定", "warm")
            },
            saveMeasureAction: function(t) {
                var e = this.data,
                    i = {},
                    n = e.pidsMap;
                for(var r in t) i[r] = t[r].map(function(t) {
                    return n[t]
                });
                var a = {
                    pill: e.pill,
                    groups: i
                };
                this.$emit("action", {
                    type: "ADD_GROUP_MEASURE",
                    payload: a
                });
                this.destroy()
            },
            destroy: function() {
                this.supr();
                i.toggleContextMenu(!0)
            },
            saveAction: function(e) {
                var n = this.data;
                if(n.fieldId) {
                    this.$emit("action", {
                        type: "EDIT_GROUP",
                        payload: e
                    });
                    this.destroy()
                } else {
                    var r = this;
                    h._$getPillId(i.query.rid).then(function(i) {
                        if(200 === i.code) {
                            e.fieldId = i.result;
                            r.$emit("action", {
                                type: "ADD_GROUP",
                                payload: e
                            });
                            r.destroy()
                        } else t.message(i && i.message || "获取唯一的fieldId失败", "err")
                    })
                }
            },
            makeGroupStatus: function(t) {
                var e, i = {};
                for(e in t) i[e] = {
                    list: t[e],
                    open: !0
                };
                return i
            },
            createGroupAlias: function(t, e) {
                var i = t + "(组" + e + ")";
                if(this.__checkSameName(i)) return this.createGroupAlias(t, e + 1);
                else return i
            },
            __checkSameName: function(t, e) {
                var i = this.data.schemaList;
                return i.some(function(i) {
                    return i.fieldId !== e && i.alias === t
                })
            },
            measureNameInit: function(e) {
                var n, r, s = {},
                    o = [],
                    c = {},
                    u = l.getState().current,
                    d = i.formatQuery(u),
                    h = a.getMeasureNameMembers(d);
                h.forEach(function(e) {
                    n = a.getDefaultDisplayName(d, e);
                    r = t.pid(e);
                    o.push(n);
                    s[n] = r;
                    c[r] = n
                });
                var f, p = e.schemaOptions && e.schemaOptions.groups ? e.schemaOptions.groups : {},
                    _ = {};
                for(var m in p) {
                    f = [];
                    p[m].forEach(function(t) {
                        if(c[t]) f.push(c[t])
                    });
                    _[m] = f
                }
                this.data.groupsStatus = this.makeGroupStatus(_);
                this.data.pidsMap = s;
                this.data.showsMap = c;
                return o
            },
            onGetDimensionMembers: function(e) {
                var i = this.data;
                if(200 == e.code) {
                    var n = e.result.map(function(t) {
                        return t[0]
                    });
                    this.initMembers(n)
                } else if(750 === e.code) {
                    i.mbReady = -1;
                    t.messageDetail(json);
                    this.$update()
                } else {
                    ata.mbReady = -1;
                    t.message("获取维度成员列表失败！", "err");
                    this.$update()
                }
            },
            _scrollList: function(t) {
                var e = this.$refs.scroll,
                    i = e.scrollTop,
                    n = this.data.offset,
                    r = parseInt(i / _, 10);
                if(r > n + 10) this.data.offset = r;
                if(r < n + 5) {
                    this.data.offset -= 5;
                    if(this.data.offset > r) this.data.offset = r;
                    if(this.data.offset < 0) this.data.offset = 0
                }
                if(n !== this.data.offset) {
                    this._optimizMembers();
                    this.$update()
                }
            },
            _optimizMembers: function() {
                var t, e = this,
                    i = this.data,
                    n = i.offset,
                    r = i.showNumber,
                    a = i.dimensionMembersGroups,
                    s = [],
                    o = 0,
                    l = 0;
                a.forEach(function(i) {
                    l += e.stringCheck(i) ? 1 : i[1].open ? i[1].list.length + 1 : 1;
                    if(!(n + r <= o)) {
                        if(e.stringCheck(i)) {
                            t = 1;
                            if(n <= o && o < r + n) s.push(i)
                        } else {
                            var a = i[1].list;
                            t = 1 + (i[1].open ? a.length : 0);
                            if(n >= t + o && n > o);
                            else if(n > o && n < t + o) {
                                r += n - o;
                                n = o;
                                r += r >= t ? 0 : t - r;
                                s.push(i)
                            } else if(n <= o)
                                if(n + r <= o);
                                else if(n + r > o) {
                                    r += n + r >= o + t ? 0 : o + t - n - r;
                                    s.push(i)
                                } else if(n + r <= o);
                        }
                        o += t
                    }
                });
                i.optMembers = s;
                i.preHeight = n * _;
                var c = l - n - r;
                i.nextHeight = c > 0 ? c * _ : 0
            },
            initMembers: function(t) {
                var e = this.data;
                e.mbReady = 1;
                e.dimensionMembers = t;
                this.makeGroupList();
                this._optimizMembers();
                this.$update();
                if(this.$refs.scroll) f.on(this.$refs.scroll, "scroll", this._scrollList.bind(this))
            },
            makeGroupList: function() {
                var t, e, i = this.data,
                    n = i.groupsStatus,
                    r = i.dimensionMembers,
                    a = [],
                    s = {};
                for(t in n)
                    if(n[t].list && 0 == n[t].list.length) a.push([t, n[t]]);
                r.forEach(function(i) {
                    e = !1;
                    for(t in n) {
                        e = n[t].list.some(function(t) {
                            return t === i
                        });
                        if(e) break
                    }
                    if(e) {
                        if(!s[t]) {
                            s[t] = n[t];
                            a.push([t, n[t]])
                        }
                    } else a.push(i)
                });
                i.dimensionMembersGroups = a;
                return a
            },
            resetGroup: function() {
                this.data.groupsStatus = {};
                this.makeGroupList();
                this.data.chooseList = [];
                this._optimizMembers();
                this.$update()
            },
            createGroup: function(t, e, i) {
                var n = this.data;
                if(n.groupsStatus[t]) e.forEach(function(e) {
                    var i = n.groupsStatus[t].list.some(function(t) {
                        return t === e
                    });
                    if(!i) n.groupsStatus[t].list.push(e)
                });
                else n.groupsStatus[t] = {
                    list: e,
                    open: !0,
                    create: i
                }
            },
            clickOpen: function(t, e) {
                e.preventDefault();
                var i = this.data;
                i.groupsStatus[t[0]].open = !i.groupsStatus[t[0]].open;
                this.makeGroupList();
                this._optimizMembers();
                this.$update()
            },
            folderMouseDown: function(t) {
                if(1 === t.which) {
                    t.preventDefault();
                    e._$stopBubble(t.event)
                }
            },
            chooseItemOne: function(t) {
                this.data.chooseList = [];
                this.chooseItem(t)
            },
            chooseItemRegion: function(t) {
                var e = this,
                    i = this.data,
                    n = i.chooseList;
                if(0 === n.length) this.chooseItem(t);
                else {
                    var r = i.dimensionMembersGroups,
                        a = n[0],
                        s = e.stringCheck(t) ? [t, 1] : [t[0], 2],
                        o = [];
                    r.forEach(function(t) {
                        if(e.stringCheck(t)) o.push([t, 1]);
                        else {
                            var i = [
                                [t[0], 2]
                            ].concat(t[1].list.map(function(t) {
                                return [t, 1]
                            }));
                            o = o.concat(i)
                        }
                    });
                    i.chooseList = this.__regionChoose(a, s, o)
                }
                this.$update()
            },
            __regionChoose: function(t, e, i) {
                var n = [t],
                    r = !1,
                    a = !1;
                i.some(function(i) {
                    if(i[0] === t[0] && i[1] === t[1] || i[0] === e[0] && i[1] === e[1])
                        if(r) a = !0;
                        else if(!a) r = !0;
                    if(r && !a)
                        if(i[0] !== t[0] || i[1] !== t[1]) n.push(i);
                    if(r && a) {
                        if(i[0] !== t[0] || i[1] !== t[1]) n.push(i);
                        return !0
                    }
                });
                return n
            },
            chooseItem: function(t) {
                var e, i, n = this.data;
                if(this.stringCheck(t)) {
                    e = t;
                    i = 1
                } else {
                    e = t[0];
                    i = 2
                }
                var r = this.detectChoose(t);
                if(r.choosed) n.chooseList.splice(r.place, 1);
                else n.chooseList.push([e, i]);
                this.$update()
            },
            itemClick: function(t, e) {
                if(!this.hasCreateGroup()) {
                    var n = i.shortcut.pressed("shift"),
                        r = i.shortcut.pressed("ctrl") || i.shortcut.pressed("command");
                    if(1 === e.which)
                        if(!n && !r) this.chooseItemOne(t);
                        else {
                            if(n && !r) this.chooseItemRegion(t);
                            if(!n && r) this.chooseItem(t)
                        }
                    else if(3 === e.which) {
                        if(!n && !r)
                            if(this.__checkItemInChoose(t));
                            else this.chooseItemOne(t);
                        else if(n && !r)
                            if(this.__checkItemInChoose(t));
                            else this.chooseItemOne(t);
                        else if(!n && r);
                        this.doMenuPop(e)
                    }
                }
            },
            menuClick: function(t, n) {
                if(n) e._$stopBubble(n.event);
                if(!this.hasCreateGroup()) {
                    var r = i.shortcut.pressed("shift"),
                        a = i.shortcut.pressed("ctrl") || i.shortcut.pressed("command");
                    if(!r && !a)
                        if(this.__checkItemInChoose(t));
                        else this.chooseItemOne(t);
                    else if(r && !a)
                        if(this.__checkItemInChoose(t));
                        else this.chooseItemOne(t);
                    else if(!r && a);
                    this.doMenuPop(n)
                }
            },
            __checkItemInChoose: function(t) {
                var e, i, n = this.data.chooseList;
                if(this.stringCheck(t)) {
                    e = 1;
                    i = t
                } else {
                    e = 2;
                    i = t[0]
                }
                return n.some(function(t) {
                    return t[0] == i && t[1] == e
                })
            },
            doMenuPop: function(t) {
                var e = {
                    menus: this.createGroupMenu(),
                    position: {
                        left: t.pageX,
                        top: t.pageY
                    }
                };
                if(e.menus.length) new c({
                    data: e
                }).$on("menu", function(t) {})
            },
            createGroupMenu: function() {
                var t = [],
                    e = this.data,
                    i = e.chooseList,
                    n = e.groupsStatus;
                if(0 === i.length) return [];
                var r, a;
                r = i.some(function(t) {
                    return 2 === t[1]
                });
                if(!r) a = i.some(function(t) {
                    var e;
                    for(var i in n) {
                        e = n[i].list.some(function(e) {
                            return e === t[0]
                        });
                        if(e) break
                    }
                    return !e
                });
                if(!r) {
                    t.push({
                        text: "新建组",
                        clicked: this.onCreateGroup.bind(this)
                    });
                    if(Object.keys(n).length > 0) t.push({
                        text: "添加到",
                        clicked: this.onAddToGroup.bind(this)
                    });
                    if(!a) t.push({
                        text: "移除",
                        clicked: this.onRemoveFromGroup.bind(this)
                    })
                }
                if(1 == i.length && 2 === i[0][1]) t.push({
                    text: "重命名",
                    clicked: this.onRenameGroup.bind(this)
                });
                var s = i.some(function(t) {
                    if(2 === t[1]) return !1;
                    var e = !1;
                    for(var i in n) {
                        e = n[i].list.some(function(e) {
                            return e === t[0]
                        });
                        if(e) break
                    }
                    return !e
                });
                if(!s && r) t.push({
                    text: "取消分组",
                    clicked: this.onCancleGroup.bind(this)
                });
                return t
            },
            onCancleGroup: function() {
                this.__setGroupNameStatus();
                this.__removeFromGroup(!0);
                this.updateGroupName();
                this.makeGroupList();
                this.data.chooseList = [];
                this._optimizMembers();
                this.$update()
            },
            onCreateGroup: function() {
                if(!this.hasCreateGroup())
                    if(!this.hasChooseGroup()) {
                        var t = this.data,
                            e = t.chooseList.map(function(t) {
                                return t[0]
                            }),
                            i = this.__getGroupName(e);
                        if(0 == e.length) this.createGroup(i, e, !0);
                        else {
                            this.__setGroupNameStatus();
                            this.__removeFromGroup();
                            t.chooseList = [];
                            this.createGroup(i, e, !0);
                            this.updateGroupName()
                        }
                        this.makeGroupList();
                        this._optimizMembers();
                        this.$update();
                        this.selectNameInput()
                    }
            },
            __setGroupNameStatus: function() {
                var t = this.data,
                    e = t.groupsStatus;
                for(var i in e) {
                    var n = e[i].list;
                    e[i].reName = this.__needUpdateName(n, i)
                }
            },
            __getGroupName: function(t) {
                var e = this.__getGroupNamePrefix(t);
                return this.__getAutoName(e, 0)
            },
            __getGroupNamePrefix: function(t) {
                var e, i = t.length;
                if(0 === i) e = "无内容";
                else if(1 === i) e = t[0] + "";
                else if(2 === i) e = t[0] + "，" + t[1];
                else if(i >= 3) e = t[0] + "等共" + i + "项";
                return e
            },
            updateGroupName: function() {
                var t, e, i, n = this.data,
                    r = n.groupsStatus;
                for(var a in r) {
                    t = r[a].reName;
                    if(!t) {
                        i = r[a].list;
                        if(this.__needUpdateName(i, a)) {
                            e = this.__getGroupName(i);
                            this.__renameGroup(a, e)
                        }
                    }
                }
            },
            __needUpdateName: function(t, e) {
                var i = this.__getGroupNamePrefix(t),
                    n = !0;
                if(e === i) n = !1;
                else if(0 === e.indexOf(i)) {
                    var r = e.slice(i.length);
                    if(p.test(r)) n = !1
                }
                return n
            },
            __getAutoName: function(t, e) {
                var i = t + (0 == e ? "" : "(" + e + ")");
                if(this.__checkhasGroupName(i)) return this.__getAutoName(t, e + 1);
                else return i
            },
            __checkhasGroupName: function(t) {
                var e = this.data,
                    i = e.groupsStatus;
                if(i[t]) return !0;
                else return !1
            },
            onAddToGroup: function() {
                var t = (this.data, {
                    data: {
                        title: "添加到组",
                        groupNames: Object.keys(this.data.groupsStatus)
                    }
                });
                new d(t).toggle().$on("save", function(t) {
                    this.__addToGroup(t)
                }.bind(this))
            },
            __addToGroup: function(t) {
                var e = this.data,
                    i = e.chooseList.map(function(t) {
                        return t[0]
                    });
                this.__setGroupNameStatus();
                this.__removeFromGroup();
                this.createGroup(t, i, !1);
                e.chooseList = [];
                this.updateGroupName();
                this.makeGroupList();
                this._optimizMembers();
                this.$update()
            },
            onRemoveFromGroup: function() {
                this.__setGroupNameStatus();
                this.__removeFromGroup();
                this.updateGroupName();
                this.makeGroupList();
                this.data.chooseList = [];
                this._optimizMembers();
                this.$update()
            },
            __removeFromGroup: function(t) {
                var e = this.data,
                    i = e.groupsStatus;
                e.chooseList.forEach(function(n) {
                    if(2 === n[1])
                        if(t) delete e.groupsStatus[n[0]];
                        else i[n[0]].list = [];
                    else if(1 === n[1])
                        for(var r in i) {
                            var a = i[r].list.filter(function(t) {
                                return t !== n[0]
                            });
                            i[r].list = a
                        }
                })
            },
            onRenameGroup: function() {
                var t = this.data;
                t.reNameFlag = !0;
                var e = t.chooseList[0][0],
                    i = t.groupsStatus;
                for(var n in i)
                    if(n === e) {
                        i[n].create = !0;
                        break
                    }
                this.makeGroupList();
                this.data.chooseList = [];
                this._optimizMembers();
                this.$update();
                this.selectNameInput()
            },
            selectNameInput: function() {
                var t = this;
                setTimeout(function() {
                    var e = t.$refs.nameInput;
                    if(e) {
                        e.focus();
                        e.select();
                        f.on(e, "keypress", function(t) {
                            if(13 === t.which) {
                                t.preventDefault();
                                var e, i = this.data.groupsStatus;
                                for(var n in i)
                                    if(i[n].create) {
                                        e = n;
                                        break
                                    }
                                this.clickOk(e)
                            }
                        }.bind(t))
                    }
                }, 2)
            },
            __renameGroup: function(t, e) {
                if(t !== e) {
                    var i = this.data,
                        n = i.groupsStatus[t];
                    delete i.groupsStatus[t];
                    i.groupsStatus[e] = n;
                    this.makeGroupList();
                    i.chooseList = [];
                    this._optimizMembers();
                    this.$update()
                }
            },
            detectChoose: function(t) {
                var e, i, n = this.data.chooseList;
                if(this.stringCheck(t)) {
                    e = t;
                    i = 1
                } else {
                    e = t[0];
                    i = 2
                }
                var r = -1,
                    a = n.some(function(t, n) {
                        if(t[0] === e && t[1] == i) {
                            r = n;
                            return !0
                        }
                    });
                return {
                    choosed: a,
                    place: r
                }
            },
            clickOk: function(t, i) {
                if(i) e._$stopBubble(i.event);
                if(this.validate("groupName", t)) {
                    var n = this.data;
                    n.reNameFlag = !1;
                    var r = this.$refs.nameInput.value,
                        a = n.groupsStatus;
                    if(t !== r) {
                        a[r] = a[t];
                        delete a[t]
                    }
                    for(var s in a) a[s].create = !1;
                    this.makeGroupList();
                    this._optimizMembers();
                    this.$update()
                }
            },
            clickCancle: function(t, i) {
                if(i) e._$stopBubble(i.event);
                var n = this.data;
                if(n.reNameFlag) this.__cancleRename(t);
                else this.__cancleGroup(t)
            },
            __cancleRename: function(t) {
                var e = this.data;
                e.reNameFlag = !1;
                var i = e.groupsStatus;
                for(var n in i) i[n].create = !1;
                this.makeGroupList();
                this._optimizMembers();
                this.$update()
            },
            __cancleGroup: function(t) {
                var e = this.data,
                    i = e.groupsStatus;
                for(var n in i)
                    if(t === n) delete i[n];
                this.makeGroupList();
                this._optimizMembers();
                this.$update()
            },
            hasChooseGroup: function() {
                return this.data.chooseList.some(function(t) {
                    return 2 === t[1]
                })
            },
            hasCreateGroup: function() {
                var t = this.data,
                    e = t.groupsStatus,
                    i = !1;
                for(var n in e)
                    if(e[n].create) {
                        i = !0;
                        break
                    }
                return i
            },
            inputClick: function(t) {
                t.preventDefault()
            },
            validate: function(t, e) {
                var i = this.$refs.nameInput;
                if(i) {
                    var n = i.parentNode,
                        r = i.value;
                    if(!r || !r.length) {
                        this.showError(t, n, "组名不能为空");
                        return !1
                    } else if(r.length > 40) {
                        this.showError(t, n, "组名长度不能超过40个字符");
                        return !1
                    } else if(e !== r)
                        if(this.__checkhasGroupName(r)) {
                            this.showError(t, n, "组名不可以重名");
                            return !1
                        }
                }
                return !0
            },
            stringCheck: function(t) {
                if(!t || "string" == typeof t) return !0
            },
            dropToGroup: function(t, e) {
                if(!this.__checkDropGroupHas(e.drag.data.key, e)) {
                    var i = this.data,
                        n = i.chooseList;
                    i.chooseList = [];
                    i.chooseList.push([e.drag.data.key, 1]);
                    this.__addToGroup(t);
                    i.chooseList = n
                }
            },
            dragendGroup: function(t, e) {
                if(!e.drop)
                    if(!this.__checkDropGroupHas(t, e)) {
                        var i = this.data,
                            n = i.chooseList;
                        i.chooseList = [];
                        i.chooseList.push([t, 1]);
                        this.onRemoveFromGroup();
                        i.chooseList = n
                    }
            },
            __checkDropGroupHas: function(t, e) {
                if(e.drop) {
                    var i = e.drop.node.children;
                    if(i && i.length > 0)
                        for(var n, r = 0; r < i.length; r++) {
                            n = i[r].title;
                            if(t === n) return !0
                        }
                }
                return !1
            }
        }).implement(u.ErrorPop);
    return m
}, 7, 6, 34, 550, 551, 176, 63, 185, 35, 217, 257, 552, 553, 554);
I$(547, '<div class="m-format">\n  <h2>设置数据格式: </h2>\n  <form>\n    <div class="trow">\n      <input type="radio" value="auto" r-model={type} />\n      <span>自动设置</span>\n    </div>\n    <div class="trow">\n      <input type="radio" checked value="num" r-model={type}/>\n      <span>数值</span>\n    </div>\n    <div class="rowin" r-class={{\'z-dis\':type!=="num"}}>\n      <div class="trow">\n        <lable><span>小数位</span></lable>\n        <div class="rowcombine">\n          <input  class="inicon" type="text" r-model={decimalPlace} disabled={auto || type!=="num"} />\n          <div class="bticon">\n            <div class="bt add" on-click={this.doDecimalPlace("num", 1)}></div>\n            <div class="bt sub" on-click={this.doDecimalPlace("num", -1)}></div>\n          </div>          \n        </div>\n        \n      </div>\n      <div class="trow">\n        <lable><span>单位</span></lable>\n        <select class="inicon" r-model={unit} disabled={auto || type!=="num"}>\n          <option value=\'none\' selected>无</option>\n          <option value=\'K\'>K</option>\n          <option value=\'M\'>M</option>\n          <option value=\'B\'>B</option>\n          <option value=\'G\'>G</option>\n          <option value=\'万\'>万</option>\n          <option value=\'百万\'>百万</option>\n          <option value=\'千万\'>千万</option>\n          <option value=\'亿\'>亿</option>\n          <option value=\'百亿\'>百亿</option>\n        </select>\n      </div>\n      <div class="trow">\n        <lable><span>千位符</span></lable>\n        <input type="checkbox" r-model={thousandSeparator} disabled={auto || type!=="num"}/>        \n      </div>\n      <div class="trow">\n        <lable><span>货币单位</span></lable>\n        <select class="inicon" r-model={currency} disabled={auto || type!=="num"}>\n          <option value="none">无</option>\n          <option value="人民币">人民币</option>\n          <option value="美元">美元</option>\n          <option value="欧元">欧元</option>\n          <option value="港币">港币</option>\n          <option value="英镑">英镑</option>\n          <option value="台币">台币</option>\n          <option value="其他" selected>其他</option>            \n        </select>\n        <input class="currency inicon" type="text" r-model={currency1} disabled={(auto) || (currency === "none"||currency === "人民币"||currency === "美元"||currency === "欧元"||currency === "港币"||currency === "英镑"||currency === "台币")} on-input={this.currencyInput()}/>\n      </div>\n    </div>\n    <div class="trow">\n      <input type="radio" value="percent" r-model={type} />\n      <span>百分比</span>\n    </div>\n    <div class="rowin" r-class={{\'z-dis\':type!=="percent"}}>\n      <div class="trow">\n        <lable><span>小数位</span></lable>\n        <div class="rowcombine">\n          <input class="inicon" type="text" r-model={decimalPlace1} disabled={auto|| type!=="percent"}  />\n          <div class="bticon">\n            <div class="bt add" on-click={this.doDecimalPlace("percent", 1)}></div>\n            <div class="bt sub" on-click={this.doDecimalPlace("percent", -1)}></div>\n          </div>\n        </div>\n        \n      </div>\n    </div>\n  </form>\n  \n</div>');
I$(383, function(t, e, i, n) {
    var r = 20,
        a = n.extend({
            name: "format-modal",
            $body: e,
            data: {
                autoClose: !0,
                autoRecycleRequest: !1
            },
            config: function(t) {
                this.mergeData(t);
                this.supr(t);
                this.$on("confirm", function(t) {
                    if(t.accept) this.save()
                });
                this.$watch("decimalPlace", function(e) {
                    var i = parseInt(e);
                    if(isNaN(i)) i = 0;
                    if(i > r) i = r;
                    if(i < 0) i = 0;
                    t.decimalPlace = i
                });
                this.$watch("decimalPlace1", function(e) {
                    var i = parseInt(e);
                    if(isNaN(i)) i = 0;
                    if(i > r) i = r;
                    if(i < 0) i = 0;
                    t.decimalPlace1 = i
                })
            },
            mergeData: function(t) {
                if(t["format"]) {
                    for(var e in t.format) t[e] = t.format[e];
                    if("percent" == t.type) {
                        t.decimalPlace1 = t.decimalPlace ? t.decimalPlace : 0;
                        t.decimalPlace = 0
                    } else {
                        t.decimalPlace = t.decimalPlace ? t.decimalPlace : 0;
                        t.decimalPlace1 = 0;
                        var i = t.currency;
                        if("none" !== i && "人民币" !== i && "美元" !== i && "欧元" !== i && "港币" !== i && "英镑" !== i && "台币" !== i) {
                            t.currency1 = i;
                            t.currency = "其他"
                        }
                    }
                } else {
                    t.type = "auto";
                    t.currency = "none";
                    t.decimalPlace = 0;
                    t.decimalPlace1 = 0
                }
            },
            gatherData: function() {
                var t;
                if("auto" == this.data.type) t = void 0;
                else {
                    t = {};
                    t.type = this.data.type;
                    if("num" === this.data.type) {
                        t.decimalPlace = this.data.decimalPlace;
                        if(this.data.unit) t.unit = this.data.unit;
                        t.thousandSeparator = !!this.data.thousandSeparator;
                        if("其他" === this.data.currency) t.currency = this.data.currency1;
                        else t.currency = this.data.currency
                    } else if("percent" === this.data.type) t.decimalPlace = this.data.decimalPlace1;
                    else t = void 0
                }
                return t
            },
            save: function() {
                var t = this.gatherData();
                this.$emit("save", t)
            },
            doDecimalPlace: function(t, e) {
                if("auto" !== this.data.type) {
                    var i, n;
                    if("num" === this.data.type && "num" === t) {
                        i = parseInt(this.data.decimalPlace) + e;
                        n = i < 0 ? 0 : i > r ? r : i;
                        this.data.decimalPlace = n
                    } else if("percent" === this.data.type && "percent" === t) {
                        i = parseInt(this.data.decimalPlace1) + e;
                        n = i < 0 ? 0 : i > r ? r : i;
                        this.data.decimalPlace1 = n
                    }
                }
            },
            currencyInput: function() {
                var e = this.data.currency1;
                if(e && e.length > 40) {
                    t.message("货币单位长度限制在40个字内！", "warm");
                    this.data.currency1 = e.slice(0, 40)
                }
            }
        }).implement(i.Redux);
    return a
}, 7, 547, 175, 185);
I$(548, '<div class="m-convert">\n    <div class="m-convert-title m-convert-field">请选择当前数据的格式</div>\n    <div class="m-convert-input m-convert-field">\n        <label for="m-convert-date">日期格式</label>\n        <select name="date" id="m-convert-date" r-model={date}>\n            <option value="userDefined">自定义格式</option>\n            <option selected value="YYYY-MM-DD">YYYY-MM-DD</option>\n            <option value="YYYY-MON-DD">YYYY-MON-DD</option>\n            <option value="YYYY-MONTH-DD">YYYY-MONTH-DD</option>\n            <option value="MM-DD-YYYY">MM-DD-YYYY</option>\n            <option value="MON-DD-YYYY">MON-DD-YYYY</option>\n            <option value="MONTH-DD-YYYY">MONTH-DD-YYYY</option>\n            <option value="DD-MM-YYYY">DD-MM-YYYY</option>\n            <option value="DD-MON-YYYY">DD-MON-YYYY</option>\n            <option value="DD-MONTH-YYYY">DD-MONTH-YYYY</option>\n            <option value="YYYY/MM/DD">YYYY/MM/DD</option>\n            <option value="YYYY/MON/DD">YYYY/MON/DD</option>\n            <option value="YYYY/MONTH/DD">YYYY/MONTH/DD</option>\n            <option value="MM/DD/YYYY">MM/DD/YYYY</option>\n            <option value="MON/DD/YYYY">MON/DD/YYYY</option>\n            <option value="MONTH/DD/YYYY">MONTH/DD/YYYY</option>\n            <option value="DD/MM/YYYY">DD/MM/YYYY</option>\n            <option value="DD/MON/YYYY">DD/MON/YYYY</option>\n            <option value="DD/MONTH/YYYY">DD/MONTH/YYYY</option>\n        </select>\n        <input type="text" style={ date === \'userDefined\' ? null : \'display:none\'} \n        r-model={userDefinedDate}/>\n    </div>\n    <div class="m-convert-input m-convert-field" >\n        <label for="m-convert-time">时间格式</label>\n        <select name="time" id="m-convert-time" r-model={time}>\n            <option selected value="">无</option>\n            <option value="HH:MI:SS">HH:MI:SS</option>\n            <option value="AM HH:MI:SS">AM HH:MI:SS</option>\n        </select>\n    </div>\n</div>\n');
I$(384, function(t, e, i) {
    var n = i.extend({
        name: "modal-convert",
        $body: e,
        data: {
            date: "YYYY-MM-DD",
            time: "",
            userDefinedDate: ""
        },
        save: function() {
            if("userDefined" === this.data.date) return {
                date: this.data.userDefinedDate,
                time: this.data.time,
                userDefined: !0
            };
            if("" === this.data.time) this.data.time = null;
            return {
                date: this.data.date,
                time: this.data.time
            }
        }
    });
    return n
}, 7, 548, 185);
I$(192, function(t, e, i, n, r, a, s, o, l, c, u, d, h, n, f) {
    var p = r.cache,
        _ = (i.MAX_DATA_COUNT, d.actions, r.getAlias2IdMap),
        m = (r.getId2AliasMap, Regular.dom),
        g = Regular.extend({
            name: "pill-base",
            template: e,
            config: function(t) {
                var e = t.provider;
                this.$on("toggle", function(i) {
                    i.preventDefault();
                    if(!e || !e.disabled) {
                        t.show = !t.show;
                        t.position = {
                            left: i.pageX,
                            top: i.pageY
                        }
                    }
                });
                if(1 != t.pill.status && (t.pill.fieldId == -12 || t.pill.fieldId == -13 || t.pill.fieldId == -15)) t.pill.status = 2;
                t.ENV = i.ENV
            },
            doubleClickPill: function(t) {
                var e = reflex.addToSheet.addToSheetForOnePill || function() {},
                    i = d.getState().current,
                    n = r.formatQuery(i),
                    a = e(n, t);
                console.log(a);
                var s = this.data.provider;
                s.dispatch({
                    type: "ADD_TO_SHEET",
                    payload: {
                        pill: t,
                        query: a
                    }
                })
            },
            changeAlias: function(e) {
                var r = this.data.provider;
                n.rename(null, e.alias, {
                    title: "重命名" + e.alias + (e.field ? " (原名: " + e.field + ")" : ""),
                    showAt: Regular.dom.element(this)
                }).then(function(n) {
                    var a = n.value;
                    if(a && a !== e.alias) {
                        a = a.trim();
                        if(a.length > 40) return t.message("字段名称不能超过40个字符");
                        var s = !1,
                            o = r.getSchema(),
                            l = o.dimension.concat(o.measure),
                            s = l.some(function(t) {
                                return t.alias === a
                            });
                        if(!s || a === i.mvalue.alias || a === i.mname.alias) r.dispatch({
                            type: "CHANGE_ALIAS",
                            payload: {
                                alias: a,
                                pill: e
                            }
                        });
                        else t.message("已存在字段使用此名称，请重新命名", "err")
                    }
                });
                this.data.show = !1
            },
            changeRole: function(t) {
                var e, i;
                if("Measure" === t.role) {
                    i = "dimension";
                    e = "measure"
                } else {
                    e = "dimension";
                    i = "measure"
                }
                this.data.show = !1;
                return this.data.provider.dispatch({
                    type: "MOVE_PILL",
                    payload: {
                        pid: r.pid(t),
                        target: i,
                        from: e,
                        injectAt: -1,
                        selfIndex: -1,
                        pill: t
                    }
                })
            },
            changeAggregator: function(t) {
                var e = this.data.pill,
                    i = e.role.toLowerCase();
                this.data.show = !1;
                this.data.provider.dispatch({
                    type: "CHANGE_AGGREGATOR",
                    payload: {
                        index: this.getIndex(i),
                        pill: e,
                        area: i,
                        aggregator: t
                    }
                })
            },
            getIndex: function(e) {
                var i = this.data.provider,
                    n = i.getSchema(),
                    r = n[e],
                    a = this.data.pill.alias,
                    s = t.indexOf(r, function(t) {
                        return t.alias === a
                    });
                return s
            },
            copyPill: function(e) {
                var i, n = this.data.provider.getSchema(),
                    a = n["dimension"].concat(n["measure"]),
                    s = this,
                    o = 1,
                    l = "",
                    c = e.alias.split("]");
                i = "[" + c.join("]]") + "]";
                var u, d = _(a),
                    i = ExpressionAnalyzer.alias2id(d)(i),
                    h = e.role,
                    f = {
                        granularity: e.granularity,
                        valid: !0,
                        type: e.dataType
                    };
                if("Dimension" == e.role) u = "Discrete";
                else if("String" == f.type || "Boolean" == f.type) u = "Discrete";
                else u = "Continuous";
                for(var m = 0, g = a.length; m < g; m++) {
                    var v = a[m],
                        y = v.alias,
                        b = e.alias;
                    reg = /\(([0-9]+)\)$/;
                    if(y.replace(reg, "") === b.replace(reg, "")) {
                        var x = reg.exec(y);
                        if(x && parseInt(x[1]) >= o) o = parseInt(x[1]) + 1
                    }
                }
                l += b.replace(reg, "") + "(" + o + ")";
                var $ = {
                    role: e.role,
                    fieldData: f,
                    name: l,
                    expression: i,
                    interpretation: u,
                    $type: h
                };
                p._$getPillId(r.query.rid).then(function(e) {
                    if(200 === e.code) {
                        $.fieldId = e.result;
                        s.data.provider.dispatch({
                            type: "ADD_FIELD",
                            payload: $
                        });
                        s.parent = s.$parent;
                        setTimeout(s.pick._$bind(s, l), 0)
                    } else t.message(e && e.message || "获取唯一的fieldId失败", "warm")
                });
                this.data.show = !1
            },
            deleteField: function(t) {
                return this.data.provider.dispatch({
                    type: "DELETE_FIELD",
                    payload: t
                })
            },
            pick: function(t) {
                if(this.parent && this.parent.pick) {
                    this.parent.pick(t, !0);
                    this.parent.$update()
                }
            },
            addToLevel: function(e) {
                var i = this.data.provider,
                    n = i.getSchema(),
                    r = n.levels;
                if(!r.length) return t.message("没有可用的层级， 请先创建层级");
                this.data.show = !1;
                new u({
                    data: {
                        title: "请选择层级",
                        levels: r,
                        showAt: Regular.dom.element(this),
                        autoRecycleRequest: !1,
                        autoClose: !0
                    },
                    $body: " <span>层级</span>:          <select class='u-txt u-txt-s1' r-model='levelName' >          {#list levels as level}          <option value={level.name}>{level.name}</option>          {/list}        </select>"
                }).toggle().$on("confirm", function(t) {
                    if(t.accept) {
                        var n = this.data.levelName,
                            a = r.filter(function(t) {
                                return t.name === n
                            })[0],
                            s = a.pathes.slice();
                        s.push(e.fieldId);
                        return i.dispatch({
                            type: "EDIT_LEVEL",
                            payload: {
                                name: n,
                                pathes: s
                            }
                        })
                    }
                })
            },
            createLevel: function(e) {
                var i = this.data.provider,
                    r = i.getSchema(),
                    a = r.levels;
                this.data.show = !1;
                n.rename("层级名称", null, {
                    title: "创建层级",
                    showAt: Regular.dom.element(this)
                }).then(function(n) {
                    if(!n.accept) return n.close();
                    var r = n.value;
                    if(!r) return t.message("层级名称不能为空");
                    if(a.some(function(t) {
                            return t.name === r
                        })) return t.message("已经存在名为[" + r + "]的层级");
                    i.dispatch({
                        type: "CREATE_LEVEL",
                        payload: {
                            name: r,
                            pathes: [e.fieldId]
                        }
                    });
                    n.close()
                })
            },
            editField: function(e) {
                var n = this.data,
                    r = n.provider.getSchema();
                if(e.tableId == -1) {
                    if(i.ENV.showField) {
                        t.message("请先完成当前操作！", "warm");
                        return
                    }
                    var a = e.role,
                        l = "编辑计算字段 (" + ("Dimension" === a ? "维度" : "度量") + ")",
                        c = {
                            data: {
                                title: l,
                                role: a,
                                name: e.alias,
                                oldAlias: e.alias,
                                expression: e.expr,
                                fieldId: e.fieldId,
                                produced: e.produced,
                                schemaList: r.dimension.concat(r.measure),
                                fromReport: this.data.dataConnectionId ? !1 : !0,
                                className: this.data.dataConnectionId ? "m-window-field" : "m-window-field m-window-field-1"
                            }
                        };
                    i.ENV.showField = !0;
                    this.$emit("updateByfield");
                    new s(c).toggle().$on("save", function(t) {
                        n.provider.dispatch({
                            type: "EDIT_FIELD",
                            payload: t
                        })
                    }).$on("updateByfield", function() {
                        this.$emit("updateByfield")
                    }.bind(this))
                } else if(e.tableId == -2 && e.dict) {
                    var u, d = r.dimension;
                    d.some(function(t) {
                        if(t.fieldId === e.refId) {
                            u = t;
                            return !0
                        }
                    });
                    var h = i.mname;
                    if(h.fieldId === e.refId) u = h;
                    if(u) {
                        var c = {
                            data: {
                                dictPill: e,
                                pill: u,
                                dataConnectionId: this.data.dataConnectionId,
                                config: n.config,
                                provider: n.provider,
                                title: "数据字典(" + e.alias + ")"
                            }
                        };
                        new o(c).toggle().$on("action", n.provider.dispatch.bind(n.provider))
                    } else t.message("没有找到和它相关的维度！", "err")
                }
                if(e.tableId == -4 && e.groups) this.__editGroup(e);
                this.data.show = !1
            },
            onDictionary: function(e) {
                var i = this.data,
                    n = this.hasDictionary(e),
                    r = this.data.provider;
                if(!n)
                    if("Decimal" != e.dataType && "Date" != e.dataType && "DateTime" != e.dataType && "Time" != e.dataType && ("TimestampToDatetime" !== e.convert || "Decimal" != e.convertedType && "Date" != e.convertedType && "DateTime" != e.convertedType && "Time" != e.convertedType)) {
                        var r = this.data.provider,
                            a = {
                                data: {
                                    pill: e,
                                    dataConnectionId: i.dataConnectionId,
                                    config: i.config,
                                    provider: r,
                                    title: "数据字典(" + e.alias + ")"
                                }
                            };
                        new o(a).toggle().$on("action", function(t) {
                            r.dispatch(t)
                        });
                        this.data.show = !1
                    } else t.message("此类型不能使用数据字典！", "warm");
                else {
                    var s = n.alias;
                    t.message("已创建数据字典字段: " + s, "warm");
                    this.$emit("confirm", s)
                }
            },
            onCreateGroup: function(e) {
                var i = e.dataType,
                    n = e.convertedType;
                if("Decimal" != i && "Date" != i && "DateTime" != i && "Time" != i && ("TimestampToDatetime" !== e.convert || "Decimal" != n && "Date" != n && "DateTime" != n && "Time" != n)) {
                    var r = this.data,
                        a = r.provider,
                        s = {
                            data: {
                                pill: e,
                                dataConnectionId: r.dataConnectionId,
                                config: r.config,
                                provider: a,
                                title: "创建组(" + e.alias + ")"
                            }
                        };
                    new l(s).toggle().$on("action", function(t) {
                        a.dispatch(t)
                    });
                    this.data.show = !1
                } else t.message("此类型不能创建组！", "warm")
            },
            __editGroup: function(e) {
                var n, r = this.data,
                    a = r.provider.getSchema();
                a.dimension.some(function(t) {
                    if(t.fieldId === e.refId) {
                        n = t;
                        return !0
                    }
                });
                var s = i.mname;
                if(s.fieldId === e.refId) n = s;
                if(n) {
                    var o = r.provider,
                        c = {
                            data: {
                                groupPill: e,
                                pill: n,
                                dataConnectionId: r.dataConnectionId,
                                config: r.config,
                                provider: o,
                                title: "编辑组(" + n.alias + ")"
                            }
                        };
                    new l(c).toggle().$on("action", function(t) {
                        o.dispatch(t)
                    })
                } else t.message("没有找到和它相关的维度！", "err")
            },
            getContextDimensions: function() {
                var e = d.getState().current,
                    i = this.data.pill;
                return e.filters.filter(function(t) {
                    return t.filter && t.filter.priority >= 1 && t !== i
                }).map(function(e) {
                    var i = t.extend({}, e),
                        n = i.filter;
                    delete i.filter;
                    return {
                        dimension: i,
                        filter: n,
                        priority: n.priority
                    }
                })
            },
            hasDictionary: function(t) {
                var e, i = this.data.provider,
                    e = !1,
                    n = i.getSchema(),
                    r = n.dimension.concat(n.measure);
                r.some(function(i) {
                    if(i.refId == t.fieldId && i.dict) {
                        e = i;
                        return !0
                    }
                });
                return e
            },
            onFormat: function(t) {
                var e = this.data.provider,
                    i = t.default && t.default.format,
                    n = {
                        data: {
                            title: "数据格式",
                            format: i
                        }
                    },
                    r = new c(n);
                r.toggle().$on("save", function(i) {
                    e.dispatch({
                        type: "DO_FORMAT",
                        payload: {
                            fieldId: t.fieldId,
                            format: i
                        }
                    })
                })
            },
            dateTypeMenu: function(t) {
                var e = this.data;
                e.dataTypeShow = e.dataTypeShow ? !1 : !0;
                var i = t.event.currentTarget;
                if(t.event.clientY + 220 > document.documentElement.offsetHeight) m.addClass(i.parentNode.parentNode, "menu-reverse");
                else m.delClass(i.parentNode.parentNode, "menu-reverse");
                this.$update()
            },
            dateFormatMap: ["YYYY-MM-DD", "YYYY-MON-DD", "YYYY-MONTH-DD", "MM-DD-YYYY", "MON-DD-YYYY", "MONTH-DD-YYYY", "DD-MM-YYYY", "DD-MON-YYYY", "DD-MONTH-YYYY", "YYYY/MM/DD", "YYYY/MON/DD", "YYYY/MONTH/DD", "MM/DD/YYYY", "MON/DD/YYYY", "MONTH/DD/YYYY", "DD/MM/YYYY", "DD/MON/YYYY", "DD/MONTH/YYYY"],
            changeDataType: function(e, i, n) {
                var r = this.data.provider,
                    a = this,
                    s = this.data;
                if("DateTime" != e || "Measure" != i.role) {
                    if(4 == s.type || 10 == s.type) r.dispatch({
                        type: "CHANGE_DATATYPE_EXCEL",
                        payload: {
                            dataType: e,
                            pill: i
                        }
                    });
                    else if(0 == s.type || 1 == s.type)
                        if("String" === i.dataType && "DateTime" === e) {
                            var s = {
                                title: i.alias ? "选择日期格式：（" + i.alias + ")" : "选择日期格式",
                                autoClose: "true",
                                width: 450
                            };
                            if(i.convertArg) {
                                var o = i.convertArg.date,
                                    l = i.convertArg.time;
                                if(null === l) l = "";
                                s.date = o;
                                s.time = l;
                                if(this.dateFormatMap.indexOf(s.date) < 0) {
                                    s.userDefinedDate = o;
                                    s.date = "userDefined"
                                }
                            }
                            new f({
                                data: s
                            }).$on("confirm", function(t) {
                                if(t.accept) {
                                    var n, s = "DateParse",
                                        o = this.save();
                                    if(!o.time) n = "Date";
                                    else n = e;
                                    r.dispatch({
                                        type: "CHANGE_DATATYPE_MYSQL",
                                        payload: {
                                            toDateTime: !0,
                                            convertedType: n,
                                            convert: s,
                                            convertArg: o,
                                            pill: i
                                        }
                                    })
                                }
                                a.$update()
                            }).show()
                        } else if("Whole" === i.dataType && "DateTime" === e) r.dispatch({
                            type: "CHANGE_DATATYPE_MYSQL",
                            payload: {
                                toDateTime: !0,
                                convert: "TimestampToDatetime",
                                convertedType: e,
                                pill: i
                            }
                        });
                        else r.dispatch({
                                type: "CHANGE_DATATYPE_MYSQL",
                                payload: {
                                    toDateTime: !1,
                                    convertedType: e,
                                    pill: i
                                }
                            });
                    else r.dispatch({
                            type: "CHANGE_DATATYPE_OTHERS",
                            payload: {
                                convertedType: e,
                                pill: i
                            }
                        });
                    s.dataTypeShow = !1
                } else t.message("度量不能转日期类型", "err")
            },
            changeDataTypeInReport: function(t, e) {
                this.data.provider
            },
            changeIgnore: function(t) {
                var e = this.data;
                if(t.ignore) t.ignore = !1;
                else {
                    var i = e.provider.getSchema(),
                        n = i.dimension.concat(i.measure),
                        a = r.changePillIgnore(t, n, e.filters, 2);
                    if(a) t.ignore = !0
                }
            },
            isError: function(t) {
                var e;
                if(this.data.errorlist && this.data.errorlist.length > 0) this.data.errorlist.some(function(i) {
                    if(i == t.fieldId) {
                        e = !0;
                        return !0
                    }
                });
                return e
            }
        }).use("$timeout");
    return g
}, 7, 380, 136, 180, 34, 203, 184, 381, 382, 383, 185, 35, 54, 180, 384);
I$(205, function(t, e, i, n, r, a, s, o, l) {
    Regular.dom;
    return Regular.extend({
        name: "schema-dropable",
        template: t,
        data: {
            consts: r
        },
        config: function(t) {
            t.closer = {};
            e.extend(t, {
                area: "dimension"
            });
            if("schema-manager" === this.$outer.name) {
                this.$outer.$on("replace", this._replaceSchema.bind(this));
                this.$outer.$on("pick:" + t.area, this.scrollToPill.bind(this));
                t.provider = this.$outer.data.provider
            }
            if("dimension" === t.area) t.target = t.target || /measure|level/;
            else t.target = t.target || /dimension/;
            t.geoTarget = /row|column|showme/
        },
        getTarget: function(t) {
            return t.fieldId === -13 || t.fieldId === -12 ? this.data.geoTarget : this.data.target
        },
        init: function() {
            this.data;
            this.$on("dragend", function(t) {
                var e = t.drag;
                if(null === t.drop) {
                    var i = e.data.key,
                        n = s.pid(i);
                    if(i._type) return;
                    actions.delPill({
                        pill: i,
                        pid: n,
                        from: e.drop.data.name
                    })
                }
            })
        },
        drop: function(t, i) {
            var n = (this.data, i.drag),
                a = n.drop,
                s = n.data.key,
                o = i.touchedInfo,
                l = (r.pinfos, e.pid(s)),
                c = {
                    pid: l,
                    target: t,
                    from: a && a.data.name,
                    pill: s
                };
            if(!o) {
                if(a === i.drop) return;
                c.injectAt = null;
                c.selfIndex = -1;
                return this.movePill(c)
            } else {
                if(o.selfIndex !== -1 && o.selfIndex === o.injectAt || o.selfIndex === o.injectAt + 1) return;
                c.injectAt = o.injectAt;
                c.selfIndex = o.selfIndex;
                this.movePill(c)
            }
        },
        movePill: function(t) {
            var i = t.pill,
                n = this.data,
                a = t.target,
                o = n.provider.getSchema().levels;
            if(!r.LEVEL_AREA.test(a))
                if("filters" === t.target && "filters" !== t.from && "Generated" !== i.produced) common.showFilterModal({
                    pill: i
                }).then(function(e) {
                    e.injectAt = t.injectAt;
                    n.provider.dispatch({
                        type: "SAVE_FILTER",
                        payload: e
                    })
                });
                else n.provider.dispatch({
                    type: "MOVE_PILL",
                    payload: t
                });
            else {
                var l = a.split("`")[1],
                    c = e.indexOf(o, function(t) {
                        return t.name === l
                    });
                if(r.LEVEL_AREA.test(t.from)) var u = t.from.split("`")[1],
                    d = e.indexOf(o, function(t) {
                        return t.name === u
                    }),
                    h = o[d].pathes.slice();
                var f = d === c ? h : o[c].pathes.slice();
                s.injectPillToList(i.fieldId, f, t.injectAt, h);
                var p = {
                    name: l,
                    pathes: f
                };
                if(Array.isArray(h) && d !== c) n.provider.dispatch({
                    type: "EDIT_LEVELS",
                    payload: [p, {
                        name: u,
                        pathes: h
                    }]
                });
                else n.provider.dispatch({
                    type: "EDIT_LEVEL",
                    payload: p
                })
            }
        },
        delLevel: function(t) {
            this.data.provider.dispatch({
                type: "DEL_LEVEL",
                payload: {
                    index: t
                }
            })
        },
        delFromLevel: function(t, e) {
            var i = this.data.provider;
            i.dispatch({
                type: "DEL_FROM_LEVEL",
                payload: {
                    index: t,
                    pillIndex: e
                }
            })
        },
        scrollToPill: function(t) {
            var e = this.$refs.group,
                i = e.querySelector('[title^="' + t + '"]'),
                n = e.scrollTop,
                r = i.offsetTop;
            if(i) {
                var a = r - e.offsetHeight;
                if(a + 30 > n) e.scrollTop = a + 40;
                else if(n > r) e.scrollTop = r - 10;
                if(i) return !0;
                else return
            }
        },
        pick: function(t, e) {
            if(t) {
                this.data;
                if(this.$outer) this.$outer.pick(t, e)
            }
        },
        addField: function(t) {
            if(!r.ENV.showField) {
                var i = "添加计算字段 (" + ("Dimension" === t ? "维度" : "度量") + ")",
                    n = this.data;
                store.dispatch(function(r, a) {
                    var o = {
                            data: {
                                title: i,
                                role: t,
                                className: "m-window-field"
                            }
                        },
                        l = new FieldModal(o);
                    l.toggle().$on("save", function(t) {
                        cache._$getPillId(s.query.rid).then(function(i) {
                            if(200 === i.code) {
                                t.fieldId = i.result;
                                n.dispatch({
                                    type: "ADD_FIELD",
                                    payload: t
                                })
                            } else e.message(i && i.message || "获取唯一的fieldId失败", "warm")
                        })
                    })
                })
            } else e.message("请先完成当前操作！", "warm")
        },
        toggleFolder: function(t) {
            var e = this.data.closer;
            e[t] = !e[t]
        },
        defaultTarget: function(t) {
            var e = this;
            return function(i) {
                if(r.ENV.dimensionTargetArea)
                    if("dimension" === e.data.area) return t === e.data.getTarget ? !1 : r.ENV.dimensionTargetArea.test(i);
                    else return !1;
                if(t == e.data.geoTarget) return r.ENV.showField ? !1 : t.test(i);
                else return(r.ENV.showField ? /field/ : t).test(i)
            }
        },
        defaultTarget1: function(t) {
            return function(e) {
                return r.ENV.showField ? !1 : t.test(e)
            }
        },
        getTableName: function(t, e) {
            var i = this.data.tableMap;
            if(i) return i[t] || (t == -1 || t == -2 || t == -3 || t == -4 ? "dimension" == e ? "自定义维度" : t == -3 ? "地理信息" : "自定义度量" : "未知数据表")
        },
        _replaceSchema: function(t) {
            var e = this.data;
            e.tableMap = t.tableMap;
            if("dimension" === e.area) {
                e.pillMap = t.dimensionMap;
                e.name = e.name || "dimension";
                e.levels = t.levels;
                e.mValueOrName = r.mname
            } else {
                e.pillMap = t.measureMap;
                e.name = e.name || "measure";
                e.mValueOrName = r.mvalue;
                e.record = r.record
            }
            this.$update()
        },
        doUpdateByfield: function() {
            this.$update()
        }
    })
}, 401, 7, 174, 176, 136, 177, 34, 185, 178, 192);
var setTimeRules = [{
    field: "hour",
    rules: [{
        type: "isRequired",
        message: "抽取时间小时数不能为空"
    }, {
        type: function(t) {
            return /^[0-1][0-9]$|^2[0-3]$|^[0-9]$/.test(t)
        },
        message: "输入有效的小时数"
    }]
}, {
    field: "minute",
    rules: [{
        type: "isRequired",
        message: "抽取时间分钟数不能为空"
    }, {
        type: function(t) {
            return /^[0-5][0-9]$|^[0-9]$/.test(t)
        },
        message: "输入有效的分钟数"
    }]
}, {
    field: "value",
    rules: [{
        type: function(t) {
            return /^[0-9](\.[0-9]+)?$|^[1-9][0-9]+(\.[0-9]+)?$/.test(t)
        },
        message: "输入有效的数字"
    }]
}, {
    field: "emails",
    rules: [{
        type: function(t) {
            return t.length && t.length > 0
        },
        message: "邮件列表不能为空"
    }]
}, {
    field: "phones",
    rules: [{
        type: function(t) {
            console.log(t);
            return t.length && t.length > 0
        },
        message: "手机号码不能为空"
    }]
}];
if("undefined" == typeof exports) {
    if("object" != typeof window.bigvizValidateRule) window.bigvizValidateRule = {};
    bigvizValidateRule.setTime = setTimeRules
} else exports.setTime = setTimeRules;
if("undefined" != typeof exports) Validator = require("./validator.js");
var rules = [{
    field: "name",
    rules: [{
        type: "isFilled",
        message: "文件夹名不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 40
        },
        message: "请将文件夹名长度限制在40字以内"
    }]
}];
if("undefined" == typeof exports) {
    if("object" != typeof window.bigvizValidateRule) window.bigvizValidateRule = {};
    bigvizValidateRule.report = rules
} else exports.report = rules;
I$(235, '<textarea name="jst" id="jst-window">\n<form>\n\t<h3 class="winlab">${lab|escape}:</h3>\n\t<span class="u-txtwrap">\n\t<input type="text" class="u-txt j-value" value="${name|escape}" name="name" placeholder="${placeholder|escape}" autocomplete="off">\n\t</span> \n</form>\n</textarea>');
I$(69, function(t, e, i, n, r, a, s, o, l, c, u) {
    var d = {};
    o = window.Validator;
    s = window.bigvizValidateRule.report;
    d._$$PopupFolder = t._$klass();
    var h = d._$$PopupFolder._$extend(c._$$Popup);
    h.__initXGui = function() {
        r._$parseUITemplate(u);
        return function() {
            this.__super()
        }
    }();
    h.__initNode = function() {
        this.__super();
        this.__flag = e._$getByClassName(this.__body, "j-flag")[0]
    };
    h.__reset = function(t) {
        this.__super(t);
        var i = t.data;
        this.__name = i.name || "";
        a._$render(this.__flag, "jst-window", i);
        var n = e._$getByClassName(this.__body, "j-value")[0];
        this.__doInitDomEvent([
            [n, "blur", this.__onBlurName._$bind(this)],
            [n, "focus", this.__hideError._$bind(this, "name")],
            [n, "keydown", this.__onBodyKeydown._$bind(this)]
        ]);
        if(s) this.__validator = new o(s);
        this.__submit = t.onSubmit;
        this.__form = this.__body.getElementsByTagName("form")[0];
        this.__input = e._$getByClassName(this.__body, "j-value")[0];
        this.__focus()
    };
    h.__focus = function(t) {
        this.__input.focus();
        if(this.__name) {
            this.__input.value = "";
            this.__input.value = this.__name
        }
    };
    h.__onBlurName = function(t) {
        this.__validate("name")
    };
    h.__onBodyKeydown = function(t) {
        if(13 == t.keyCode) i._$stop(t)
    };
    h.__onSubmit = function() {
        var t = this.__input.value.trim(),
            e = this.__validate("name");
        if(e) {
            this.__submit(t);
            this._$close()
        }
    };
    return d
}, 1, 3, 6, 4, 14, 15, 234, 76, 7, 140, 235);
I$(245, '<textarea name=\'jst\' id=\'jst-base-template\'>\n<div class="m-dataModel f-cb">\n    <div class="xres">\n        <h2 class="j-table-h2">事实表</h2>\n        <!-- Oracle新增数据库列表 -->\n        <div class="j-blag j-table-database"></div>\n        <div class="j-dataConnection-box"></div>\n        <div class="u-search f-cb">\n            <label for="config-sch"><i class="u-icn u-icn-search2"></i></label>\n            <input id="config-sch" placeholder="输入关键字搜索">\n        </div>\n        <div class="tab-box j-flag">\n            <div class="tab-mask">\n                <div class="tab-load-svg"></div>\n                <div class="tab-load-bg"></div>\n            </div>\n        </div>\n        <h2 class="sql-ttl">\n            <div>自定义SQL视图</div>\n            <div class="u-icn u-icn-down" data-action="slidesql"></div>\n            {if edit}<div class="sql  icon u-icn u-icn-add3" id="create-sql" title="自定义SQL视图"></div>{/if}\n        </h2>\n        <div class="sql-box j-flag"></div>\n    </div>\n    <div class="xcnt">\n        <div class="xbcfg"><div class="xcfg m-map j-flag"></div></div>\n        <div class="xtab j-flag"></div>\n    </div>\n    <div class="xlst j-flag" style="display:none;"></div>\n    <div class="xlad" id="join-loading" style="display:none;">\n        <span class="u-load"></span>\n    </div>\n</div>\n</textarea>\n\n\n<textarea name="jst" id="jst-table-recources">\n    {list result as x}\n    {if !x.tableExprId}\n    <div class="tab-itm {if x.hasFilter}z-sel{/if}">\n        {if x.hasFilter}\n        <div class="info">\n            <div class="u-icn u-icn-info"></div>\n            <div class="infos">\n                <p class="wrd">存在数据权限，若需要管控数据请使用此表关联</p>\n            </div>\n        </div>\n        {/if}\n        <div {if edit}data-dg="true" data-type="0" data-name="${x.name|escape}"{/if} class="nme f-ellipsis {if x.tableExprId}nme-expr{/if}" title="${x.name|escape}" {if x.tableExprId}data-exprid="${x.tableExprId}"{/if} {if x.color}data-color="${x.color}"{/if}>${x.shortName|escape}</div>\n        {if x.tableExprId}\n        <div class="u-icn u-icn-del" data-action="delsql" data-name="${x.name|escape}" {if x.tableExprId}data-exprid="${x.tableExprId}"{/if}></div>\n        <div class="u-icn u-icn-edit" data-action="editsql" data-name="${x.name|escape}" {if x.tableExprId}data-exprid="${x.tableExprId}"{/if}></div>\n        {/if}\n        <div class="eye u-icn u-icn-eye3" data-action="eye" data-name="${x.name|escape}" {if x.tableExprId}data-exprid="${x.tableExprId}"{/if}></div>\n    </div>\n    {/if}\n    {/list}\n</textarea>\n<textarea name="jst" id="jst-table-sql">\n    {list result as x}\n    {if x.tableExprId}\n    <div class="tab-itm {if x.hasFilter}z-sel{/if}">\n        {if x.hasFilter}\n        <div class="u-icn u-icn-info info">\n            <div class="infos">\n                <p class="wrd">存在数据权限，若需要管控数据请使用此表关联</p>\n            </div>\n        </div>\n        {/if}\n        <div {if edit}data-dg="true" data-type="0" data-name="${x.name|escape}"{/if} class="nme f-ellipsis {if x.tableExprId}nme-expr{/if}" title="${x.name|escape}" {if x.tableExprId}data-exprid="${x.tableExprId}"{/if} {if x.color}data-color="${x.color}"{/if}>${x.shortName}</div>\n        {if x.tableExprId}\n        <div class="u-icn u-icn-del" data-action="delsql" data-name="${x.name|escape}" {if x.tableExprId}data-exprid="${x.tableExprId}"{/if}></div>\n        <div class="u-icn u-icn-edit" data-action="editsql" data-name="${x.name|escape}" {if x.tableExprId}data-exprid="${x.tableExprId}"{/if}></div>\n        {/if}\n        <div class="eye u-icn u-icn-eye3" data-action="eye" data-name="${x.name|escape}" {if x.tableExprId}data-exprid="${x.tableExprId}"{/if}></div>\n    </div>\n    {/if}\n    {/list}\n</textarea>\n\n<textarea name="jst" id="jst-empty-config">\n<div class="m-blank m-blank-1">\n    {if edit}\n    <span class="icon icon-arrow"></span>\n    <p>请将表格拖入工作区</p>\n    {else}\n    <p>没有数据</p>\n    {/if}\n</div>\n</textarea>\n\n<textarea name="jst" id="jst-create-node">\n{if edit}\n<div class="box">\n    <div class="item {if num==0}z-err{/if} js-item" data-tableid="${tableId}" id="table-${tableId}" title="${tableName}">\n        <h6 class="j-card" data-color="${color}" data-de="true" data-dg="true" data-action="select" data-type="1" data-name="${tableName}" {if tableExprId}data-exprid="${tableExprId}"{/if} data-tableid="${tableId}" title="${shortName}" id="table-drag-${tableId}" {if fusionTableName}data-uuid="${fusionTableName}"{/if} {if dataConnectionId}data-cid="${dataConnectionId}"{/if}>${shortName}</h6>\n        {if type==4 && mtype != 1}\n        <i class="u-icn u-icn-set" data-action="setexcel" data-tableid="${tableId}" data-name="${tableName}"></i>\n        {/if}\n        <i class="u-icn u-icn-close" data-action="del" data-tableid="${tableId}"></i>\n        <span class="opt" data-action="edit" data-tableid="${tableId}"><b class="num num-${tableId}">${num}</b><i class="u-icn u-icn-edit"></i><i class="u-icn u-icn-add"></i></span>\n        {if color}\n        <span class="u-corner u-corner-right" style="border-color:${color} ${color} transparent transparent;"></span>\n        {/if}\n    </div>\n    <div class="wrap wrap-${tableId}"></div>\n</div>\n{else}\n<div class="box">\n    <div class="item {if num==0}z-err{/if} js-item" title="${tableName}" data-color="${color}">\n        <h6 class="j-card" data-color="${color}" title="${tableName}">${tableName}</h6>\n        <span class="opt"><b class="num num-${tableId}">${num}</b><i class="u-icn u-icn-add"></i></span>\n        {if color}\n        <span class="u-corner u-corner-right" style="border-color:${color} ${color} transparent transparent;"></span>\n        {/if}\n    </div>\n    <div class="wrap wrap-${tableId}"></div>\n</div>\n{/if}\n</textarea>\n\n<textarea name="jst" id="jst-resource-preview">\n<div class="resPrev f-ellipsis">${name}</div>\n</textarea>\n\n<textarea name="jst" id="jst-oracle-database">\n<select class="database-select j-database-select">\n    {list result as x}\n    <option value="${x.name}" {if !!x.selected}selected=selected{/if}>${x.name}</option>\n    {/list}\n</select>\n</textarea>\n');
I$(246, function(t, e, i, n, r, a, s, o, l, c) {
    l._$$Module = t._$klass();
    c = l._$$Module._$extend(r._$$EventTarget);
    var u, d = function() {
        return {
            rootFlag: u || !1
        }
    }();
    c._$getGlobalObj = function() {
        return d
    };
    c.__reset = function(t) {
        this.__super(t);
        this.__parent = t.options.parent;
        this.__edit = t.options.edit;
        this.__new = t.options.new;
        this.__cid = t.options.cid;
        this.__mid = t.options.mid;
        this.__mtype = t.options.mtype;
        this.__type = t.options.type;
        this.__mbox = t.options.mbox;
        this.__sbox = t.options.sbox;
        this.__rbox = t.options.rbox;
        this.__wbox = t.options.wbox;
        this.__lbox = t.options.lbox;
        this.__dataConnectionType = t.options.dataConnectionType;
        this.__dataConnectionId = t.options.dataConnectionId;
        this.__fusionId = t.options.fusionId;
        this.__frontConfig = t.options.frontConfig;
        this.__lightId = -1;
        this.__globalObj = this._$getGlobalObj()
    };
    c.__createTree = function(t, i, r) {
        var a = this;
        if(1 == r) e._$clearChildren(i);
        var s = this.__createNode(t);
        i.insertAdjacentHTML("beforeEnd", s);
        var o = function(t) {
            n._$forEach(a.__frontConfig, function(n, r) {
                if(n.leftTableId == t) {
                    var s = a.__createNode(n),
                        l = e._$getByClassName(i, "wrap-" + t)[0];
                    if(l) l.insertAdjacentHTML("beforeEnd", s);
                    o(n.tableId)
                }
            })
        };
        o(t.tableId)
    };
    c.__createNode = function(t) {
        if(t.join) t.num = t.join.conditions.length;
        if(1 == this.__type)
            if(t.tableExprId) t.shortName = t.tableName;
            else t.shortName = t.tableName.split(".")[1];
        else t.shortName = t.tableName;
        if(1 == this.__mtype) t.mtype = 1;
        var e = s._$get("jst-create-node", t);
        return e
    };
    c.__setTreeNodesError = function(t, i) {
        var r = e._$getByClassName(i, "js-item");
        n._$forEach(r, function(i) {
            var r = i.getAttribute("title");
            n._$forEach(t, function(t) {
                if(r == t) e._$addClassName(i, "z-err2")
            })
        })
    };
    c.__deleteLogic = function(t, i, r) {
        if(r) {
            var a = +e._$dataset(t, "tableid"),
                o = this.__getChildIds(a),
                l = this.__getFusionConfig(),
                c = [];
            n._$forEach(l, function(t) {
                if(t.tableId != a && o.indexOf(t.tableId) < 0) c.push(t)
            });
            var u = {
                fusionId: this.__fusionId,
                dataConnectionId: this.__dataConnectionId,
                config: c
            };
            this.__cache._$changeFusion(u, {
                type: "remove",
                deElement: t
            })
        } else {
            e._$remove(t.parentNode.parentNode);
            var a = +e._$dataset(t, "tableid"),
                o = this.__getChildIds(a);
            n._$forIn(o, function(t) {
                if(t == this.__lightId) this.__selectTables()
            }._$bind(this));
            if(a == this.__lightId) this.__selectTables();
            this.__dataHandle(a, 1);
            if(0 == a) {
                this.__globalObj.rootFlag = !1;
                s._$render(this.__rbox, "jst-empty-config", {
                    edit: this.__edit
                })
            }
        }
        if(!i) this.__onChange(this.__frontConfig)
    };
    c.__getChildIds = function(t) {
        var e = this,
            i = [],
            r = function(t) {
                n._$forEach(e.__frontConfig, function(e, n) {
                    if(e.leftTableId == t) {
                        i.push(e.tableId);
                        r(e.tableId)
                    }
                })
            };
        r(t);
        return i
    };
    c.__dataHandle = function(t, e) {
        var i = this,
            r = [];
        this.__getNodeData(t).sign = !0;
        var a = function(t) {
            n._$forEach(i.__frontConfig, function(e, i) {
                if(e.leftTableId == t) {
                    e.sign = !0;
                    a(e.tableId)
                }
            })
        };
        a(t);
        for(var s = this.__frontConfig.length, o = s; o > 0; o--)
            if(this.__frontConfig[o - 1].sign) {
                r.unshift(this.__frontConfig[o - 1]);
                this.__frontConfig.splice(o - 1, 1)
            }
        if(0 == e) {
            n._$forEach(r, function(t, e) {
                if(t.sign) delete t.sign
            });
            this.__frontConfig = this.__frontConfig.concat(r)
        }
    };
    c.__getNodeData = function(t) {
        var e = {};
        n._$forEach(this.__frontConfig, function(i, n) {
            if(i.tableId == t) e = i
        });
        return e
    };
    c.__getUuid = function() {
        for(var t = [], e = "0123456789abcdef", i = 0; i < 36; i++) t[i] = e.substr(Math.floor(16 * Math.random()), 1);
        t[14] = "4";
        t[19] = e.substr(3 & t[19] | 8, 1);
        t[8] = t[13] = t[18] = t[23] = "-";
        var n = "a" + t.join("").replace(/-/g, "");
        return n
    };
    c.__getFusionConfig = function() {
        for(var t = this.__frontConfig, e = [], i = 0, n = t.length; i < n; i++) e.push({
            dataConnectionId: t[i].dataConnectionId,
            tableName: t[i].tableName,
            tableId: t[i].tableId,
            fusionTableName: t[i].fusionTableName || this.__getUuid(),
            dataConnectionId: t[i].dataConnectionId,
            table: {
                tableName: t[i].tableName,
                tableId: t[i].tableId,
                tableExprId: t[i].tableExprId
            }
        });
        return e
    };
    return l
}, 1, 3, 6, 4, 19, 14, 15, 7);
I$(247, function(t, e, i, n, r, a, s, o, l, c, u, d) {
    u._$$Dragger = t._$klass();
    d = u._$$Dragger._$extend(l._$$Module);
    d.__reset = function(t) {
        this.__super(t);
        this.__tableId = t.tableId;
        this.__doInitDomEvent([
            [document, "mouseup", this.__onDragEnd._$bind(this)],
            [document, "mousemove", this.__onDragging._$bind(this)],
            [this.__mbox, "mousedown", this.__onDragStart._$bind(this)],
            [this.__sbox, "mousedown", this.__onDragStart._$bind(this)],
            [this.__rbox, "mousedown", this.__onDragStart._$bind(this)]
        ]);
        this.__cache = c._$$DataModelCache._$allocate({
            ongettablesjoin: this.__cbGetTablesJoin._$bind(this),
            onchangefusion: this.__cbChangeFusion._$bind(this)
        });
        this.__joinLoading = e._$get("join-loading");
        this.__colorMsg = {}
    };
    d.__destroy = function() {
        e._$remove(this.__dragPreview, !1);
        delete this.__dragPreview;
        this.__super()
    };
    d.__onDragStart = function(t) {
        i._$stopDefault(t);
        if(!this.__offset) {
            this.__startEle = i._$getElement(t, "d:dg");
            if(this.__startEle) {
                if(!this.__dragPreview) {
                    e._$create("div", "m-drag-preview m-map m-map-1", document.body);
                    this.__dragPreview = e._$getByClassName(document.body, "m-drag-preview")[0]
                }
                this.__moveType = +e._$dataset(this.__startEle, "type");
                if(0 == this.__moveType) e._$addClassName(this.__startEle, "z-sel");
                else e._$addClassName(this.__startEle.parentNode, "z-sel");
                this.__startName = e._$dataset(this.__startEle, "name");
                this.__startId = +e._$dataset(this.__startEle, "tableid");
                this.__startExprId = +e._$dataset(this.__startEle, "exprid");
                this.__startUuid = this.__getUuid();
                if(0 == this.__moveType) s._$render(this.__dragPreview, "jst-resource-preview", {
                    name: this.__startName
                });
                else if(1 == this.__moveType) this.__createTree(this.__getNodeData(this.__startId), this.__dragPreview, !0);
                this.__offset = {
                    x: i._$clientX(t),
                    y: i._$clientY(t)
                };
                this.__dragPreview.style.left = this.__offset.x - this.__startEle.offsetWidth / 2 + "px";
                this.__dragPreview.style.top = this.__offset.y - this.__startEle.offsetHeight / 2 + "px";
                e._$setStyle(this.__dragPreview, "display", "block");
                document.body.style.cursor = "-webkit-grabbing";
                document.body.style.cursor = "-moz-grabbing"
            }
        }
    };
    d.__onDragging = function(t) {
        if(this.__offset) {
            i._$stop(t);
            e._$setStyle(this.__dragPreview, "visibility", "visible");
            var n = {
                    x: i._$clientX(t),
                    y: i._$clientY(t)
                },
                r = n.x - this.__offset.x,
                a = n.y - this.__offset.y,
                s = parseInt(e._$getStyle(this.__dragPreview, "top")) || 0,
                o = parseInt(e._$getStyle(this.__dragPreview, "left")) || 0,
                l = {
                    top: s + a,
                    left: o + r
                };
            this.__offset = n;
            this.__setPosition(l, this.__dragPreview);
            var c = i._$getElement(t, "c:m-map");
            if(c) {
                e._$addClassName(this.__rbox, "xcfg-hover");
                var u = this.__adsorbentTable();
                if(u) {
                    this.__delMoveLight();
                    this.__cloneEle = u.parentNode;
                    e._$addClassName(this.__cloneEle, "z-on")
                }
            } else {
                e._$delClassName(this.__rbox, "xcfg-hover");
                this.__delMoveLight()
            }
            if(0 == this.__moveType) {
                if(e._$hasClassName(this.__startEle, "z-sel")) {
                    e._$delClassName(this.__startEle, "z-sel");
                    e._$addClassName(this.__startEle, "z-off")
                }
            } else {
                if(e._$hasClassName(this.__startEle.parentNode, "z-sel")) {
                    e._$delClassName(this.__startEle.parentNode, "z-sel");
                    e._$addClassName(this.__startEle.parentNode, "z-off")
                }
                if(c) e._$delClassName(this.__dragPreview, "m-map-error");
                else e._$addClassName(this.__dragPreview, "m-map-error")
            }
            this.__setScroll(t)
        }
    };
    d.__onDragEnd = function(t) {
        e._$delClassName(this.__rbox, "xcfg-hover");
        if(this.__offset) {
            delete this.__offset;
            if(0 == this.__moveType) {
                e._$delClassName(this.__startEle, "z-sel");
                e._$delClassName(this.__startEle, "z-off")
            } else {
                e._$delClassName(this.__startEle.parentNode, "z-sel");
                e._$delClassName(this.__startEle.parentNode, "z-off")
            }
            if(0 == this.__globalObj.rootFlag) {
                var r = i._$getElement(t, "c:m-map");
                if(r) {
                    this.__rbox.innerHTML = "";
                    var a = {
                            edit: !0,
                            tableId: 0,
                            tableName: this.__startName,
                            fusionTableName: this.__startUuid,
                            type: this.__type,
                            tableExprId: this.__startExprId,
                            color: this.__colorMsg.current,
                            dataConnectionId: this.__cid
                        },
                        s = this.__createNode(a);
                    this.__rbox.insertAdjacentHTML("beforeEnd", s);
                    this.__frontConfig.push(a);
                    this.__globalObj.rootFlag = !0;
                    if(1 != this.__mtype) this.__onChange();
                    else {
                        var l = this.__getFusionConfig(),
                            c = {
                                fusionId: this.__fusionId,
                                dataConnectionId: this.__dataConnectionId,
                                config: l
                            };
                        this.__cache._$changeFusion(c, {
                            type: "addRoot"
                        })
                    }
                }
            } else {
                var r = i._$getElement(t, "c:m-map");
                if(r) {
                    this.__endEle = this.__adsorbentTable();
                    if(this.__endEle) {
                        if(this.__cloneEle) e._$delClassName(this.__cloneEle, "z-on");
                        if(this.__endEle != this.__startEle) {
                            this.__endId = +e._$dataset(this.__endEle, "tableid");
                            this.__endName = e._$dataset(this.__endEle, "name");
                            this.__endExprId = +e._$dataset(this.__endEle, "exprid");
                            var u = this.__getChildIds(this.__startId),
                                d = n._$forIn(u, function(t) {
                                    return this.__endId == t
                                }._$bind(this));
                            if(n._$isNumber(d)) {
                                o.message("不能移动到子节点");
                                var h = !0
                            }
                            if(!h)
                                if(1 == this.__mtype) {
                                    var f = {
                                        tableName: this.__startName,
                                        tableId: this.__tableId + 1,
                                        fusionTableName: this.__startUuid,
                                        leftTableId: this.__endId,
                                        edit: this.__edit,
                                        type: this.__type,
                                        tableExprId: this.__startExprId,
                                        color: this.__colorMsg.current,
                                        dataConnectionId: this.__cid
                                    };
                                    if(0 == this.__moveType) this.__frontConfig.push(f);
                                    var l = this.__getFusionConfig(),
                                        c = {
                                            fusionId: this.__fusionId,
                                            dataConnectionId: this.__dataConnectionId,
                                            config: l
                                        };
                                    this.__cache._$changeFusion(c, {
                                        type: "addJoin"
                                    })
                                } else {
                                    e._$setStyle(this.__joinLoading, "display", "block");
                                    var f = {
                                        left: {
                                            tableName: this.__endName,
                                            tableExprId: this.__endExprId
                                        },
                                        right: {
                                            tableName: this.__startName,
                                            tableExprId: this.__startExprId
                                        },
                                        leftTableId: this.__endId
                                    };
                                    if(4 == this.__type) f.parameters = this.__parameters;
                                    this.__cache._$getTablesJoin(f, this.__cid)
                                }
                        }
                    }
                } else if(1 == this.__moveType)
                    if(1 == this.__mtype) this.__deleteLogic(this.__startEle, !0, !0);
                    else this.__deleteLogic(this.__startEle)
            }
            e._$setStyle(this.__dragPreview, "display", "none");
            e._$setStyle(this.__dragPreview, "visibility", "hidden");
            this.__clearScroll();
            document.body.style.cursor = ""
        }
    };
    d.__cbChangeFusion = function(t, i) {
        var n = t.type;
        if(200 == i.code) {
            var r = e._$getByClassName(this.__rbox, "j-card");
            switch(n) {
                case "addRoot":
                    this.__onChange();
                    break;
                case "addJoin":
                    e._$setStyle(this.__joinLoading, "display", "block");
                    if(0 == this.__moveType) this.__frontConfig.pop();
                    var a = {
                        left: {
                            tableName: this.__endName,
                            fusionTableName: e._$dataset(this.__endEle, "uuid"),
                            dataConnectionId: e._$dataset(this.__endEle, "cid"),
                            table: {
                                tableName: this.__endName,
                                tableExprId: this.__endExprId,
                                tableId: this.__endId
                            }
                        },
                        right: {
                            tableName: this.__startName,
                            fusionTableName: this.__startUuid,
                            dataConnectionId: this.__cid,
                            table: {
                                tableName: this.__startName,
                                tableExprId: this.__startExprId,
                                tableId: r.length
                            }
                        },
                        leftTableId: this.__endId,
                        fusionId: this.__fusionId
                    };
                    a.parameters = this.__parameters;
                    this.__cache._$getTablesJoin(a, this.__dataConnectionId);
                    break;
                case "remove":
                    this.__deleteLogic(this.__startEle)
            }
        } else {
            o.message(i.message || "修改数据库失败");
            var r = e._$getByClassName(this.__rbox, "j-card");
            switch(n) {
                case "addRoot":
                    this.__deleteLogic(r[0], !0);
                    break;
                case "addJoin":
                    break;
                case "remove":
            }
        }
    };
    d.__getNewestCard = function() {
        e._$getByClassName(this.__rbox, "j-card")
    };
    d.__setPosition = function(t, e) {
        var i = e.style;
        i.top = t.top + "px";
        i.left = t.left + "px"
    };
    d.__cbGetTablesJoin = function(t) {
        e._$setStyle(this.__joinLoading, "display", "none");
        if(200 == t.code) {
            var n = this.__endEle.parentNode.nextElementSibling || this.__endEle.parentNode.nextSibling;
            if(t.result.conditions && t.result.conditions.length > 0) var r = t.result.conditions.length;
            else var r = 0;
            if(0 == this.__moveType) {
                this.__tableId++;
                var a = {
                        tableName: this.__startName,
                        tableId: this.__tableId,
                        fusionTableName: this.__startUuid,
                        leftTableId: this.__endId,
                        num: r,
                        join: t.result,
                        edit: this.__edit,
                        type: this.__type,
                        tableExprId: this.__startExprId,
                        color: this.__colorMsg.current,
                        dataConnectionId: this.__cid
                    },
                    s = this.__createNode(a);
                n.insertAdjacentHTML("beforeEnd", s);
                this.__frontConfig.push(a);
                var l = e._$getByClassName(n, "opt");
                i._$dispatchEvent(l[l.length - 1], "click")
            } else if(1 == this.__moveType) {
                e._$remove(this.__startEle.parentNode.parentNode);
                var c = this.__getNodeData(this.__startId);
                this.__createTree(c, n, !1);
                var u = e._$getByClassName(n, "num-" + this.__startId)[0];
                if(u)
                    if(0 == r) e._$addClassName(u.parentNode.parentNode, "z-err");
                    else {
                        e._$delClassName(u.parentNode.parentNode, "z-err");
                        u.innerText = r
                    }
                c.leftTableId = this.__endId;
                c.join = t.result
            }
            this.__onChange()
        } else o.message(t.message || "操作失败！")
    };
    d.__onChange = function() {
        this._$dispatchEvent("onchange", this.__frontConfig)
    };
    d.__setScroll = function(t) {
        var e = this,
            i = function(t) {
                if(!e.__scrollTimer)
                    if("up" == t) e.__scrollTimer = setInterval(function() {
                        document.body.scrollTop -= 5
                    });
                    else if("down" == t) e.__scrollTimer = setInterval(function() {
                        document.body.scrollTop += 5
                    })
            };
        if(t.clientY < 100) i("up");
        else if(t.clientY > window.innerHeight) i("down");
        else this.__clearScroll()
    };
    d.__clearScroll = function() {
        if(this.__scrollTimer) {
            clearInterval(this.__scrollTimer);
            delete this.__scrollTimer
        }
    };
    d.__delMoveLight = function() {
        var t = e._$getByClassName(this.__rbox, "js-item");
        t.forEach(function(t) {
            e._$delClassName(t, "z-on")
        })
    };
    d.__adsorbentTable = function() {
        var t, i = e._$getByClassName(this.__rbox, "js-item"),
            n = {
                left: this.__rbox.scrollLeft,
                top: this.__rbox.scrollTop
            },
            r = e._$offset(this.__dragPreview),
            a = [];
        i.forEach(function(t) {
            var i = +e._$dataset(t, "tableid"),
                s = e._$offset(t),
                o = Math.abs(s.x - n.left - r.x),
                l = Math.abs(s.y - n.top - r.y);
            a.push({
                tableId: i,
                diffXY: o * o + l * l
            })
        });
        a.sort(function(t, e) {
            return t.diffXY - e.diffXY
        });
        if(a[0]) t = e._$get("table-drag-" + a[0].tableId);
        return t
    };
    return u
}, 1, 3, 6, 4, 19, 14, 15, 7, 246, 63);
I$(435, ".#<uispace>{z-index:200;box-shadow:0 2px 0 0 #ddd;}\n.#<uispace> .ttl{background:#fff;z-index:10;}\n.#<uispace> .fprt{border-top:1px solid #ededed;border-bottom:1px solid #ededed;position:relative;z-index:10;background:#fff;}\n.#<uispace> .fprt .itm{float:left;width:25%;cursor:pointer;}\n.#<uispace> .fprt .itm:last-child .wap{border-right:0;}\n.#<uispace> .fprt .wap{border-right:1px solid #ededed;}\n.#<uispace> .fprt .inner{border:3px solid #fff;}\n.#<uispace> .fprt .js-selected .inner{border:3px solid #ededed;}\n.#<uispace> .fprt .img{width:48px;height:30px;margin:10px auto 8px;background:#fff url('/res/img/tableRelat.png') no-repeat;}\n.#<uispace> .fprt .img-01{background-position:0 0;}\n.#<uispace> .fprt .img-02{background-position:0 -38px;}\n.#<uispace> .fprt .img-03{background-position:0 -77px;}\n.#<uispace> .fprt .img-04{background-position:0 -116px;}\n.#<uispace> .fprt .img-05{background-position:-52px -116px;}\n.#<uispace> .fprt .img-06{background-position:-52px -77px;}\n.#<uispace> .fprt .txt{text-align:center;margin-bottom:8px;}\n.#<uispace> .sprt{border-bottom:1px solid #ededed;background:#fafafa;height:36px;line-height:36px;position:relative;z-index:10;}\n.#<uispace> .sprt .itm{float:left;width:50%;}\n.#<uispace> .sprt .nme{padding-left:20px;}\n.#<uispace> .tprt{padding:20px 0;max-height:300px;overflow-y:auto;overflow-x:hidden;}\n.#<uispace> .tprt .pbx{margin-bottom:10px;}\n.#<uispace> .tprt .trm{float:left;width:50%;}\n.#<uispace> .tprt .trm .switcher{float:left;position:relative;padding-left:20px;}\n.#<uispace> .tprt .trm .switcher h2{position: relative;height:28px;line-height: 28px;min-width: 160px;padding: 0 24px 0 12px;border: 1px solid #ddd;border-radius: 2px;cursor:default;width:151px;word-wrap:break-word;overflow:hidden;}\n.#<uispace> .tprt .trm .switcher h2:after{position: absolute;right: 12px;top: 50%;margin-top: -3px;content: \"\";border-style: solid solid dashed;border-width: 6px 4px 0;border-color: #333 transparent;}\n.#<uispace> .tprt .trm .tri{float:left;margin:7px 16px;}\n.#<uispace> .tprt .trm .equ{margin-left:27px;margin-right:9px;}\n.#<uispace> .tprt .trm .del{cursor:pointer;}\n.#<uispace> .tprt .add{margin-left:20px;cursor:pointer;}\n.#<uispace> .u-menu{min-width:198px;width:198px;z-index:5;max-height:350px;top:0;}\n.#<uispace> .left-menu{}\n.#<uispace> .right-menu{}\n.#<uispace> .u-search{margin:10px 10px 5px;}\n.#<uispace> .u-menu li{position:relative;cursor:default;padding-left:30px;}\n.#<uispace> .u-menu li .u-icn{position:absolute;left:10px;top:9px;}\n\n\n\n\n\n");
I$(436, '<textarea name="txt" id="#<subTxt>">\n<div class="m-card">\n    <div class="ttl">\n        <span class="mtx">关联</span>\n        <span class="close u-icn u-icn-close"></span>\n    </div>\n    <div class="zcnt" id="table-join-wrap">\n\n    </div>\n</div>\n</textarea>\n<textarea name="jst" id="#<seedversion>">\n</textarea>\n<textarea name="jst" id="jst-table-join">\n<div class="fprt f-cb">\n    <div class="itm {if method==\'inner\'}js-selected{/if}" data-action="method" data-method="inner">\n        <div class="wap">\n            <div class="inner">\n                <div class="img img-01"></div>\n                <div class="txt">内部</div>\n            </div>\n        </div>\n    </div>\n    <div class="itm {if method==\'left\'}js-selected{/if}" data-action="method" data-method="left">\n        <div class="wap">\n            <div class="inner">\n                <div class="img img-02"></div>\n                <div class="txt">左侧</div>\n            </div>\n        </div>\n    </div>\n    {if type==4}\n    <div class="itm">\n        <div class="wap">\n            <div class="inner">\n                <div class="img img-06"></div>\n                <div class="txt">右侧</div>\n            </div>\n        </div>\n    </div>\n    {else}\n    <div class="itm {if method==\'right\'}js-selected{/if}" data-action="method" data-method="right">\n        <div class="wap">\n            <div class="inner">\n                <div class="img img-03"></div>\n                <div class="txt">右侧</div>\n            </div>\n        </div>\n    </div>\n    {/if}\n    {if type==1}\n    <div class="itm {if method==\'outer\'}js-selected{/if}" data-action="method" data-method="outer">\n        <div class="wap">\n            <div class="inner">\n                <div class="img img-04"></div>\n                <div class="txt">完全外部</div>\n            </div>\n        </div>\n    </div>\n    {else}\n    <div class="itm">\n        <div class="wap">\n            <div class="inner">\n                <div class="img img-05"></div>\n                <div class="txt">完全外部</div>\n            </div>\n        </div>\n    </div>\n    {/if}\n</div>\n<div class="sprt f-cb">\n    <div class="itm f-ellipsis"><span class="nme" title="${leftTableName}">${leftTableName}</span></div>\n    <div class="itm f-ellipsis"><span class="nme" title="${rightTableName}">${rightTableName}</span></div>\n</div>\n<div class="tprt f-cb" id="condition-box">\n    {if conditions.length > 0}\n    {list conditions as x}\n    <div class="pbx f-cb js-pbx">\n        <div class="trm">\n            <div class="switcher">\n                <h2 class="js-slag" data-action="show" data-mold="left">${x.left}</h2>\n            </div>\n            <div class="tri equ">=</div>\n        </div>\n        <div class="trm">\n            <div class="switcher">\n                <h2 class="js-slag" data-action="show" data-mold="right">${x.right}</h2>\n            </div>\n            <div class="tri del u-icn u-icn-del" data-action="del"></div>\n        </div>\n    </div>\n    {/list}\n    {else}\n    <div class="pbx f-cb js-pbx">\n        <div class="trm">\n            <div class="switcher">\n                <h2 class="js-slag" data-action="show" data-mold="left"></h2>\n            </div><div class="tri equ">=</div>\n        </div>\n        <div class="trm">\n            <div class="switcher">\n                <h2 class="js-slag" data-action="show" data-mold="right"></h2>\n            </div><div class="tri del u-icn u-icn-del" data-action="del"></div>\n        </div>\n    </div>\n    {/if}\n    <div class="add u-icn u-icn-add" data-action="add"></div>\n</div>\n<ul class="u-menu left-menu" data-action="menu">\n    <div class="u-search f-cb">\n        <label><i class="u-icn u-icn-search2"></i></label>\n        <input placeholder="输入关键字搜索" data-action="sch">\n    </div>\n</ul>\n<ul class="u-menu right-menu" data-action="menu">\n    <div class="u-search f-cb">\n        <label><i class="u-icn u-icn-search2"></i></label>\n        <input placeholder="输入关键字搜索" data-action="sch">\n    </div>\n</ul>\n</textarea>\n<textarea name="jst" id="jst-add-item">\n    <div class="pbx f-cb js-pbx">\n        <div class="trm">\n            <div class="switcher">\n                <h2 class="js-slag" data-action="show" data-mold="left"></h2>\n            </div><div class="tri equ">=</div>\n        </div>\n        <div class="trm">\n            <div class="switcher">\n                <h2 class="js-slag" data-action="show" data-mold="right"></h2>\n            </div><div class="tri del u-icn u-icn-del" data-action="del"></div>\n        </div>\n    </div>\n</textarea>\n');
I$(437, function(t, e, i, n, r, a, s, o, l, c) {
    a._$$MyCard = t._$klass();
    c = a._$$MyCard._$extend(n._$$CardWrapper);
    c.__reset = function(t) {
        if(!t.parent) t.parent = document.body;
        this.__supReset(t);
        var n = e._$getByClassName(this.__body, "close")[0];
        if(n) i._$addEvent(n, "click", this._$close._$bind(this));
        if(t.node) {
            this.__node = t.node;
            this.__detalx = t.detalx || 0;
            this.__detaly = t.detaly || 0;
            this.__scroll = t.scroll || {
                    left: 0,
                    top: 0
                };
            var a = parseInt(this.__node.clientWidth),
                s = parseInt(this.__node.clientHeight),
                o = e._$offset(this.__node),
                l = o.x,
                c = o.y,
                u = {
                    top: c + s + this.__detaly - this.__scroll.top,
                    left: l - a + this.__detalx - this.__scroll.left
                };
            this._$setPosition(u)
        }
        if(1 == t.mask) {
            this.__mask = r._$$Mask._$allocate({
                parent: document.body
            });
            this.__doInitDomEvent([
                [document, "click", this.__doMask._$bind(this)]
            ])
        }
    };
    c._$close = function() {
        this._$hide();
        this._$recycle();
        if(this.__mask) this.__mask = this.__mask._$recycle()
    };
    c._$setPosition = function(t) {
        var e = this.__body.parentNode.style;
        e.top = t.top + "px";
        e.left = t.left + "px"
    };
    c.__doMask = function() {
        if(this.__mask) this.__mask = this.__mask._$recycle()
    };
    return a
}, 1, 3, 6, 532, 145);
I$(248, function(t, e, i, n, r, a, s, o, l, c, u, d, h) {
    d._$$JoinCard = t._$klass();
    h = d._$$JoinCard._$extend(c._$$MyCard);
    var f = e._$pushCSSText(r),
        p = s._$parseUITemplate(a),
        _ = p["subTxt"],
        m = (p["seedversion"], s._$addNodeTemplate(s._$getTextTemplate(_)));
    h.__reset = function(t) {
        this.__super(t);
        this.__mid = t.options.mid;
        this.__cid = t.options.cid;
        this.__type = t.options.type;
        this.__mtype = t.options.mtype;
        this.__frontConfig = t.options.frontConfig;
        if(4 == this.__type) {
            this.__parameters = t.parameters;
            this.__excelArr = this.__parameters.option
        }
        this.__tableId = t.tableId;
        if(1 == this.__mtype) {
            var i = this.__getByTableId(this.__tableId),
                n = i.leftTableId,
                r = this.__getByTableId(n);
            this.__leftCid = r.dataConnectionId;
            this.__rightCid = i.dataConnectionId
        } else this.__leftCid = this.__rightCid = this.__cid;
        for(var a = 0, s = this.__frontConfig.length; a < s; a++) {
            this.__frontConfig.len
        }
        this.__node = t.node;
        this.__cache = u._$$DataModelCache._$allocate({
            ongettableschema: this.__cbGetTableSchema._$bind(this),
            ongettableschema2: this.__cbGetTableSchema2._$bind(this)
        });
        this.__getTableInfo();
        var l = {
            leftTableName: this.__leftTableName,
            rightTableName: this.__rightTableName
        };
        NEJ.X(l, this.__joinData);
        l.type = this.__type;
        o._$render("table-join-wrap", "jst-table-join", l);
        this.__leftMenu = e._$getByClassName(this.__body, "left-menu")[0];
        this.__rightMenu = e._$getByClassName(this.__body, "right-menu")[0];
        if(1 == this.__mtype) {
            this.__cache._$getTableSchema({
                tableName: this.__leftTableName,
                parameters: this.__parameters,
                tableExprId: this.__leftItemData.tableExprId
            }, this.__leftCid);
            this.__cache._$getTableSchema2({
                tableName: this.__rightTableName,
                parameters: this.__parameters,
                tableExprId: this.__itemData.tableExprId
            }, this.__rightCid)
        } else {
            this.__cache._$getTableSchema({
                tableName: this.__leftTableName,
                parameters: this.__parameters,
                tableExprId: this.__leftItemData.tableExprId
            }, this.__leftCid);
            this.__cache._$getTableSchema2({
                tableName: this.__rightTableName,
                parameters: this.__parameters,
                tableExprId: this.__itemData.tableExprId
            }, this.__rightCid)
        }
        this.__conditionBox = e._$get("condition-box");
        this.__addBtn = e._$getByClassName(this.__body, "add")[0];
        this.__doInitDomEvent([
            [this.__body, "click", this.__doAction._$bind(this)]
        ])
    };
    h.__getByTableId = function(t) {
        for(var e = 0, i = this.__frontConfig.length; e < i; e++) {
            var n = this.__frontConfig[e];
            if(n.tableId == t) return n
        }
        return null
    };
    h.__destroy = function(t) {
        this.__super(t)
    };
    h.__initXGui = function() {
        this.__seed_css = f;
        this.__seed_html = m
    };
    h.__initNode = function() {
        this.__super()
    };
    h.__getTableInfo = function() {
        var t = this;
        n._$forIn(t.__frontConfig, function(e, i) {
            if(e.tableId == t.__tableId) {
                t.__itemData = e;
                t.__rightTableName = e.tableName;
                t.__leftTableId = e.leftTableId;
                t.__joinData = e.join;
                return !0
            }
        });
        n._$forIn(t.__frontConfig, function(e, i) {
            if(e.tableId == t.__leftTableId) {
                t.__leftTableName = e.tableName;
                t.__leftItemData = e;
                return !0
            }
        })
    };
    h.__cbGetTableSchema = function(t) {
        this.__handleSchema(t, 0)
    };
    h.__cbGetTableSchema2 = function(t) {
        this.__handleSchema(t, 1)
    };
    h.__handleSchema = function(t, e) {
        if(200 == t.code && t.result) {
            var i = t.result,
                n = i.fields,
                r = i.indexes,
                a = n.map(function(t) {
                    return {
                        field: t
                    }
                });
            if(r) r.forEach(function(t, e) {
                if(t.columnNames && 1 == t.columnNames.length) {
                    var i = t.columnNames[0];
                    a.some(function(t, e) {
                        if(t.field == i) {
                            t.protect = !0;
                            return !0
                        }
                    })
                }
            });
            var s = [];
            a.forEach(function(t, e) {
                var i = '<li data-action="column" data-name="' + t.field + '" class="f-ellipsis" title="' + t.field + '">';
                if(t.protect) i += '<div class="u-icn u-icn-protect" title="已建立索引"></div>';
                i += t.field + "</li>";
                s.push(i)
            });
            var o = s.join("");
            if(0 == e) var c = this.__leftMenu;
            else var c = this.__rightMenu;
            c.insertAdjacentHTML("beforeEnd", o)
        } else l.message("获取数据失败")
    };
    h.__doAction = function(t) {
        var r = i._$getElement(t, "d:action"),
            a = e._$dataset(r, "action");
        if(a) {
            i._$stop(t);
            switch(a) {
                case "method":
                    var s = e._$getChildren(r.parentNode);
                    n._$forIn(s, function(t) {
                        if(e._$hasClassName(t, "js-selected")) {
                            e._$delClassName(t, "js-selected");
                            return !0
                        }
                    });
                    e._$addClassName(r, "js-selected");
                    var l = e._$dataset(r, "method");
                    this.__joinData.method = l;
                    this._$dispatchEvent("onchange", this.__frontConfig);
                    break;
                case "add":
                    var c = o._$get("jst-add-item", {});
                    r.insertAdjacentHTML("beforeBegin", c);
                    e._$setStyle(this.__addBtn, "display", "none");
                    break;
                case "show":
                    var u = e._$dataset(r, "mold"),
                        d = e._$offset(r, this.__body),
                        h = this.__conditionBox.scrollTop,
                        f = d.y + r.clientHeight - h + "px",
                        p = d.x - 1 + "px";
                    if("left" == u) {
                        e._$setStyle(this.__rightMenu, "display", "none");
                        e._$setStyle(this.__leftMenu, "top", f);
                        e._$setStyle(this.__leftMenu, "left", p);
                        e._$setStyle(this.__leftMenu, "display", "block")
                    } else if("right" == u) {
                        e._$setStyle(this.__leftMenu, "display", "none");
                        e._$setStyle(this.__rightMenu, "top", f);
                        e._$setStyle(this.__rightMenu, "left", p);
                        e._$setStyle(this.__rightMenu, "display", "block")
                    }
                    this.__showElement = r;
                    break;
                case "column":
                    var _ = e._$dataset(r, "name");
                    this.__showElement.innerText = _;
                    e._$setStyle(this.__leftMenu, "display", "none");
                    e._$setStyle(this.__rightMenu, "display", "none");
                    this.__getColumns();
                    this._$dispatchEvent("onchange", this.__frontConfig);
                    break;
                case "del":
                    e._$setStyle(this.__leftMenu, "display", "none");
                    e._$setStyle(this.__rightMenu, "display", "none");
                    this.__pbxList = e._$getByClassName(this.__body, "js-pbx");
                    e._$remove(r.parentNode.parentNode);
                    this.__getColumns();
                    this._$dispatchEvent("onchange", this.__frontConfig);
                    break;
                case "sch":
                    i._$clearEvent(r, "keyup");
                    i._$addEvent(r, "keyup", this.__doSearch._$bind(this, r))
            }
        } else {
            e._$setStyle(this.__leftMenu, "display", "none");
            e._$setStyle(this.__rightMenu, "display", "none")
        }
    };
    h.__getColumns = function() {
        var t = this,
            i = [],
            r = !1;
        this.__pbxList = e._$getByClassName(this.__body, "js-pbx");
        n._$forEach(t.__pbxList, function(n, a) {
            var s = e._$getByClassName(n, "js-slag"),
                o = s[0].innerText,
                l = s[1].innerText;
            if("" != o && "" != l) {
                var c = {
                    left: o,
                    op: "=",
                    right: l,
                    leftTableId: t.__leftTableId
                };
                i.push(c)
            } else r = !0
        });
        if(0 == r) e._$setStyle(this.__addBtn, "display", "block");
        this.__joinData.conditions = i;
        var a = i.length;
        this.__itemData.num = a;
        if(0 == a) e._$addClassName(this.__node.parentNode, "z-err");
        else {
            e._$delClassName(this.__node.parentNode, "z-err");
            var s = e._$getChildren(this.__node)[0];
            if(s) s.innerText = a
        }
    };
    h.__onScroll = function(t) {
        if(this.__showElement) {
            var i = e._$offset(this.__showElement, this.__body),
                n = this.__conditionBox.scrollTop,
                r = i.y + this.__showElement.clientHeight - n;
            e._$setStyle(this.__leftMenu, "top", r + "px");
            e._$setStyle(this.__rightMenu, "top", r + "px");
            if(r < 0) e._$setStyle(this.__body, "overflow", "hidden");
            else e._$setStyle(this.__body, "overflow", "visible")
        }
    };
    h.__doSearch = function(t) {
        var i = t.value,
            r = t.parentNode.parentNode,
            a = r.getElementsByTagName("li");
        n._$forEach(a, function(t, n) {
            var r = t.innerText;
            if(r.indexOf(i) != -1) e._$setStyle(t, "display", "block");
            else e._$setStyle(t, "display", "none")
        })
    };
    return d
}, 1, 3, 6, 4, 435, 436, 14, 15, 7, 437, 63);
I$(438, ".#<uispace>{z-index:200;box-shadow:0 2px 0 0 #ddd;width:300px;}\n.#<uispace> .ttl{background:#fff;z-index:10;border-bottom:1px solid #e6e6e6;}\n.#<uispace> .wrp{margin:10px 40px;}\n.#<uispace> .ln{display:block;margin:20px 0;vertical-align: middle;}\n.#<uispace> .ln input{vertical-align: middle;margin-right:3px;}");
I$(439, '<textarea name="txt" id="#<subTxt>">\n<div class="m-card">\n    <div class="ttl">\n        <span class="mtx">设置字段名称</span>\n        <span class="close u-icn u-icn-close"></span>\n    </div>\n    <div class="zcnt" id="set-field-wrap">\n\n    </div>\n</div>\n</textarea>\n<textarea name="jst" id="#<seedversion>">\n</textarea>\n\n<textarea name="jst" id="jst-set-field">\n<div class="wrp">\n    <label class="ln"><input type="radio" name="withHeader" value="true" data-action="field" {if withHeader==true}checked=checked{/if}>将第一行作为字段名称</label>\n    <label class="ln"><input type="radio" name="withHeader" value="false" data-action="field" {if withHeader==false}checked=checked{/if}>自动生成字段名称</label>\n</div>\n</textarea>');
I$(249, function(t, e, i, n, r, a, s, o, l, c, u) {
    c._$$ExcelCard = t._$klass();
    u = c._$$ExcelCard._$extend(l._$$MyCard);
    var d = e._$pushCSSText(r),
        h = s._$parseUITemplate(a),
        f = h["subTxt"],
        p = (h["seedversion"], s._$addNodeTemplate(s._$getTextTemplate(f)));
    u.__reset = function(t) {
        this.__super(t);
        this.__type = t.options.type;
        this.__frontConfig = t.options.frontConfig;
        this.__parameters = t.parameters;
        this.__excelArr = this.__parameters.options;
        this.__tableId = t.tableId;
        this.__tableName = t.tableName;
        this.__node = t.node;
        var e = {
            withHeader: !0
        };
        n._$forIn(this.__excelArr, function(t, i) {
            if(t.table == this.__tableName) {
                e = t;
                return !0
            }
        }._$bind(this));
        o._$render("set-field-wrap", "jst-set-field", e);
        this.__doInitDomEvent([
            [this.__body, "click", this.__doAction._$bind(this)]
        ])
    };
    u.__destroy = function(t) {
        this.__super(t)
    };
    u.__initXGui = function() {
        this.__seed_css = d;
        this.__seed_html = p
    };
    u.__initNode = function() {
        this.__super()
    };
    u.__doAction = function(t) {
        var r = i._$getElement(t, "d:action"),
            a = e._$dataset(r, "action");
        if(a) switch(a) {
            case "field":
                var s = "",
                    o = {},
                    l = !0;
                n._$forIn(this.__excelArr, function(t, e) {
                    if(t.table == this.__tableName) {
                        _jstData = t;
                        s = e;
                        o = t;
                        l = t.withHeader;
                        return !0
                    }
                }._$bind(this));
                var c = r.value;
                if(0 == l && "true" == c) {
                    if(n._$isNumber(s)) this.__excelArr.splice(s, 1);
                    this.__changeConfig()
                } else if(1 == l && "false" == c) {
                    if(n._$isNumber(s)) o.withHeader = !1;
                    else {
                        var u = {
                            table: this.__tableName,
                            withHeader: !1
                        };
                        this.__excelArr.push(u)
                    }
                    this.__changeConfig()
                }
        }
    };
    u.__changeConfig = function() {
        var t = this,
            i = [];
        n._$forEach(this.__frontConfig, function(t, e) {
            if(t.tableName == this.__tableName) i.push(t)
        }._$bind(this));
        n._$forEach(i, function(e, i) {
            var r = e.tableId;
            n._$forEach(t.__frontConfig, function(t, e) {
                if(t.leftTableId && t.leftTableId == r)
                    if(t.join) t.join.conditions = [];
                if(t.tableId == r)
                    if(t.join) t.join.conditions = []
            })
        });
        n._$forEach(t.__frontConfig, function(t, i) {
            if(t.join)
                if(!t.join.conditions || 0 == t.join.conditions.length) {
                    var n = e._$get("table-" + t.tableId);
                    e._$addClassName(n, "z-err")
                }
        });
        this._$dispatchEvent("onchange", this.__frontConfig)
    };
    return c
}, 1, 3, 6, 4, 438, 439, 14, 15, 437);
I$(442, '\n<div class="m-widetable">\n    <div class="table-title">\n        <span>设置数据模型</span>\n        <div class="u-icn u-icn-report2" on-click={this.changeMode()} title="切换视图" r-hide={metaloading}></div>\n        <div class="loading" r-hide={!metaloading}><img src="/res/img/sm-loading.gif"/></div>\n    </div>\n    <a class="table-filter" href=\'#\' on-click={this.showFilterList($event)}>\n       <span class="u-icn-filter u-icn"></span>模型筛选器({filters.length || 0}个) \n    </a>\n    <div class="wcont table-area" r-hide={mode!==\'table\'}>\n        <div class="t-load" r-hide={!loading}><span class="u-load"></span></div>\n        {#if !meta || (!!meta && !meta.length)}\n        <div class="u-msg"><i class="u-icn u-icn-warm"></i>没有数据</div>\n        {#else}\n        <table class="table">\n            <thead>\n            <tr>\n                <th>\n                    <div class="txt-wrap">\n                        <div class="txt txt-order">序号</div>\n                        <div class="hr" data-resize="true"></div>\n                    </div>\n                </th>\n                {#list meta as item by item_index}\n                <th r-class={{\'z-ignore\':item.hidden}} r-class={{\'z-sel\':(seltables && seltables[0].alias==item.tableId)}} on-click={this.selectTable(item)}>\n                    <div class="wrap">\n                        <div class="menu-left">\n                            {#if type==4}\n                                {#if item.dataType === "DateTime"}\n                                <i class="u-icn u-icn-date"></i>\n                                {#elseif item.dataType === "Whole" || item.dataType === "Decimal"}\n                                <i class="u-icn u-icn-num"></i>\n                                {#elseif item.dataType === "String"}\n                                <i class="u-icn u-icn-str"></i>\n                                {/if}\n                            {#elseif type === 0 || type === 1}\n                                {#if item.convertedType === \'DateTime\'}\n                                <i class="u-icn u-icn-datetime"></i>\n                                {#elseif item.convertedType === \'Date\'}\n                                <i class="u-icn u-icn-date"></i>\n                                {#elseif item.convertedType === "String"}\n                                <i class="u-icn u-icn-str"></i>\n                                {#elseif item.dataType === "Whole"}\n                                    {#if item.convert === "TimestampToDatetime"}\n                                    <i class="u-icn u-icn-date"></i>\n                                    {#else}\n                                    <i class="u-icn u-icn-num"></i>\n                                    {/if}\n                                {#elseif item.dataType === "Decimal"}\n                                <i class="u-icn u-icn-num"></i>\n                                {#elseif item.dataType === "String"}\n                                <i class="u-icn u-icn-str"></i>\n                                {/if}\n                            {#else}\n                                {#if item.dataType === "Whole"}\n                                {#if item.convert === "TimestampToDatetime"}\n                                <i class="u-icn u-icn-date"></i>\n                                {#else}\n                                <i class="u-icn u-icn-num"></i>\n                                {/if}\n                                {#elseif item.dataType === "Decimal"}\n                                <i class="u-icn u-icn-num"></i>\n                                {#elseif item.dataType === "String"}\n                                <i class="u-icn u-icn-str"></i>\n                                {#elseif item.dataType === \'DateTime\'}\n                                <i class="u-icn u-icn-date"></i>\n                                {/if}\n                            {/if}\n                        </div>\n                        <div class="txt" title={item.alias}>{item.alias}</div>\n                        <div class="hr" data-resize="true"></div>\n                    </div>\n                </th>\n                {/list}\n            </tr>\n            </thead>\n            <tbody r-hide={dataMode!==\'manual\'}>\n                <div class="refresh">\n                    <div class="tip">关联表格过多导致加载速度降低</div>\n                    <div class="u-btn u-btn-1" on-click={this.getData()}>刷新预览</div>\n                </div>\n            </tbody>\n            <tbody r-hide={dataMode!==\'auto\'}>\n                {#if !data || (!!data && !data.length)}\n                <div class="u-msg"><i class="u-icn u-icn-warm"></i>没有数据</div>\n                {#else}\n                {#list data as item by item_index}\n                <tr>\n                    <td><div class="txt txt-order">{item_index}</div></td>\n                    {#list item as col by col_index}\n                    {#if meta[col_index].status==2}\n                    <td class="z-ignore"><div class="txt">{col}</div></td>\n                    {#else}\n                    <td r-class={{\'z-sel\':(seltables && seltables[0].alias==meta[col_index].tableId)}}><div class="txt">{col === null? \'null\': col}</div></td>\n                    {/if}\n                    {/list}\n                </tr>\n                {/list}\n                {/if}\n            </tbody>\n        </table>\n        {/if}\n    </div>\n\n    <div class="wcont view-area" r-hide={mode!==\'view\'}>\n        <schema-manager isolate provider={provider} disabled={disabled} ref=schemaManager>\n            <div class="m-nav4">\n                <div class="area">\n                    <div class="head" style="border-right:0;">\n                        <div class="tt">\n                            <h4>维度</h4>\n                            <span class="u-icn u-icn-addfield"  title="新建计算维度" on-click={this.addField("Dimension")} r-hide={disabled}></span>\n                            <span class="u-icn u-icn-eye3 ignore-btn" on-click={!!imshow1?imshow1=false:imshow1=true} r-hide={disabled}></span>\n                            <div class="u-menu u-menu-ignore {!!imshow1?\'z-show\':\'\'}" on-clickouter={[imshow1=false]}>\n                                <li on-click={this.changeIgnoreAll("Dimension",1)}><i class="u-icn u-icn-eye3"></i>全部可见</li>\n                                <li on-click={this.changeIgnoreAll("Dimension",2)}><i class="u-icn u-icn-eye2"></i>全部忽略</li>\n                            </div>\n                            <span class="u-icn u-icn-geo map-btn" ref=mapBtn on-click={this.getMapList($event)} r-hide={disabled}></span>\n                            <div class="m-search">\n                                <div class="search">\n                                    <i class="u-icn u-icn-search"></i>\n                                    <input placeholder="输入关键词搜索" r-model={searchDimension}>\n                                    <i class="u-icn u-icn-clear" on-click={this.clearSearch(\'Dimension\')} r-hide={!searchDimension}></i>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <schema-dropable area=\'dimension\' modeType="dataModel" dataConnectionId={cid} type={type} config={config} filters={filters} errorlist={errorlist} ref=schemaDropableDimension> </schema-dropable>\n                </div>\n\n                <div class="area">\n                    <div class="head">\n                        <div class="tt">\n                            <h4>度量</h4>\n                            <span class="u-icn u-icn-addfield" title="新建计算度量" on-click={this.addField("Measure")} r-hide={disabled}></span>\n                            <span class="u-icn u-icn-eye3 ignore-btn" on-click={!!imshow2?imshow2=false:imshow2=true} r-hide={disabled}></span>\n                            <div class="u-menu u-menu-ignore {!!imshow2?\'z-show\':\'\'}" on-clickouter={[imshow2=false]}>\n                                <li on-click={this.changeIgnoreAll("Measure",1)}><i class="u-icn u-icn-eye3"></i>全部可见</li>\n                                <li on-click={this.changeIgnoreAll("Measure",2)}><i class="u-icn u-icn-eye2"></i>全部忽略</li>\n                            </div>\n                            <div class="m-search">\n                                <div class="search">\n                                    <i class="u-icn u-icn-search"></i>\n                                    <input placeholder="输入关键词搜索" r-model={searchMeasure}>\n                                    <i class="u-icn u-icn-clear" on-click={this.clearSearch(\'Measure\')} r-hide={!searchMeasure}></i>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <schema-dropable area=\'measure\' modeType="dataModel" dataConnectionId={cid} type={type} config={config} filters={filters} errorlist={errorlist} ref=schemaDropableMeasure> </schema-dropable>\n                </div>\n            </div>\n        </schema-manager>\n    </div>\n\n</div>');
I$(592, "\n<div class='m-modelFilter'>\n  <div class='action'>\n    <div class=\"u-btn f-fr u-btn-1 u-btn-s1\" ref='add' on-click={this.edit()}><span class=\"u-icn u-icn-add\"></span>添加</div>\n  </div>\n  <div class='m-table m-table-1'>\n  <table >\n    <thead>\n      <tr>\n        <th style='width:48px'>名称</th>\n        <th>详细信息</th>\n        <th>操作</th>\n      </tr>\n    </thead>\n    <tbody>\n      {#list filters as filter}\n      <tr >\n        <td style='width:48px'>{filter.pill|ptext}</td>\n        <td title={infoMap.all(filter.filter)|delTag} r-html={infoMap.all(filter.filter)} class='m-finfoHilight'></td>\n        <td>\n          <a class=\"u-icn-active u-icn-edit\" href='javascript:;' on-click={this.edit(filter)} title='编辑'></a>\n          <a class=\"u-icn-active u-icn-del\" \n            on-click={filters.splice(filter_index,1)}\n           href='javascript:;' title='删除'></a>\n        </td>\n      </tr>\n      {/list}\n    </tbody>\n  </table>\n  </div>\n</div>");
I$(712, "<div class=\"m-pillSelect\">\n  <div class=\"m-search\" >\n  <div class=\"search\">\n    <span class='u-icn-search u-icn'></span>\n    <input placeholder=\"输入关键词搜索\"  r-model='search' class='u-ipt-search'> \n  </div>\n  </div>\n  <div class=\"m-schemaList\">\n  <ul class=\"list list-item\">\n{#list searched as pill by pill_index}\n<li class=\"u-bitem u-bitem-{pill.interpretation==='Continuous'?'2': '1'} {selected === pill?'z-act':''}\" \n  title={ pill.alias } on-dblclick={this.pick(pill)} on-click={selected=pill} >\n  <span class='txt handle' > <i class=\"u-icn u-icn-{(pill.convertedType||pill.dataType || 'number')|lowercase} \" ></i><b>{pill|ptext:2}</b> </span>\n</li>\n{/list}\n  </ul>\n  </div>\n</div>");
I$(593, function(t, e, i, n, r, a) {
    var s = (Regular.dom, n.extend({
        name: "pill-select",
        data: {
            className: "m-window-pselect",
            autoClose: !0,
            title: "筛选器列表"
        },
        $body: i,
        config: function(t) {
            this.supr(t);
            var e = this.data.schema;
            t.fields = (e.dimensions || []).filter(function(t) {
                return !t.ignore
            });
            t.searched = t.fields;
            this.$watch("search", function(e) {
                if("string" == typeof e) t.searched = this.filter(e)
            })
        },
        filter: function(t) {
            var e = this.data.fields;
            return e.filter(function(e) {
                return e.alias.indexOf(t) !== -1
            })
        },
        pick: function(t) {
            this.confirm(!0)
        }
    }));
    return s
}, 7, 31, 712, 185, 181, 34);
I$(444, function(t, e, i, n, r, a, s) {
    var o = (Regular.dom, n.extend({
        name: "modal-flist",
        data: {
            className: "m-window-flist",
            autoClose: !0,
            title: "筛选器",
            infoMap: s.infoMap2,
            width: 640
        },
        $body: i,
        config: function(t) {
            this.supr(t);
            var e = this.data.schema;
            if(!t.filters) t.filters = [];
            t.fields = e.dimensions || []
        },
        edit: function(e, i) {
            var n, r = this.data.schema,
                o = this,
                l = this.data.filters;
            if(e) n = t.extend({
                filter: e.filter
            }, e.pill);
            var c = {
                areaType: "DATA_MODEL",
                filters: s.foldFilters(l),
                pill: n,
                context: {
                    schema: r,
                    dataConnectionId: this.data.dataConnectionId,
                    config: this.data.config
                }
            };
            if(!n) new a({
                data: {
                    schema: this.data.schema,
                    noMask: !0
                }
            }).show().$on("confirm", function(e) {
                if(e.accept && this.data.selected) {
                    var n = this.data.selected,
                        r = t.indexOf(l, function(e) {
                            return t.pid(n) === t.pid(e)
                        });
                    if(~r) c.pill = t.extend({
                        filter: l[r].filter
                    }, n);
                    else c.pill = n;
                    o.showFilter(c, i)
                }
            });
            else {
                c.force = !0;
                this.showFilter(c)
            }
        },
        showFilter: function(e) {
            var i = this.data,
                n = e.pill,
                a = this;
            r.showFilterModal(e).then(function(e) {
                var r = n ? t.indexOf(i.filters, function(e) {
                    if(t.pid(e.pill) === t.pid(n)) return !0
                }) : -1;
                if(~r) i.filters[r].filter = e.query;
                else i.filters.push({
                    $type: "dimension" === n.role.toLowerCase() ? "DFilter" : "MFilter",
                    pill: e.pill,
                    filter: e.query,
                    priority: 3
                });
                a.$update()
            })
        }
    }));
    return o
}, 7, 31, 592, 185, 179, 593, 34);
I$(594, "\n<div class='m-modelFilter m-maplist'>\n  <div class='action'>\n    <div class=\"u-btn f-fr u-btn-1 u-btn-s1\" ref='add' on-click={this.edit()}><span class=\"u-icn u-icn-add\" style=\"margin-right:2px;\"></span>添加</div>\n  </div>\n  <div class='m-table2'>\n  <table >\n    <thead>\n      <tr>\n        <th style='width:140px'>国家/地区</th>\n        <th>省/市/自治区</th>\n        <th>城市</th>\n        <th>操作</th>\n      </tr>\n    </thead>\n    <tbody>\n      {#list schema.geoConfig.list as item by item_index}\n      <tr >\n        <td style='width:140px'>{helper.getMapText(item.country,schema)}</td>\n        <td>{helper.getMapText(item.province,schema)}</td>\n        <td>{helper.getMapText(item.city,schema)}</td>\n        <td>\n          <a class=\"u-icn-active u-icn-edit\" href='javascript:;' on-click={this.edit(item)} title='编辑' style=\"margin-right:3px;\"></a>\n          <a class=\"u-icn-active u-icn-del\" on-click={schema.geoConfig.list.splice(item_index,1)} href='javascript:;' title='删除'></a>\n        </td>\n      </tr>\n      {/list}\n    </tbody>\n  </table>\n  </div>\n</div>");
I$(713, '\n<div class="m-mapdetail f-cb">\n  <div class="f-fl config-box">\n    <p class="ttl">选择映射表</p>\n    <div class="content">\n\n      <map-area pickMode=\'country\' geoDetail={geoDetail} schema={schema} active={active} errorcount={countryError} options={options} on-active={this.getActive($event)} on-typechange={this.typeChange($event)} ref=areacountry></map-area>\n      <map-area pickMode=\'province\' geoDetail={geoDetail} schema={schema} active={active} errorcount={provinceError} options={options} on-active={this.getActive($event)} on-typechange={this.typeChange($event)} ref=areaprovince></map-area>\n      <map-area pickMode=\'city\' geoDetail={geoDetail} schema={schema} active={active} errorcount={cityError} options={options} on-active={this.getActive($event)} on-typechange={this.typeChange($event)} ref=areacity></map-area>\n\n    </div>\n    <div class="mesg">若某层级的多数项出错，可修改其父级别选项以纠正错误</div>\n\n  </div>\n\n  <div class="f-fl map-box" r-class={{\'z-show\':geoDetail[active].$type==\'Field\'}} ref=mapBox>\n    <div class="loading" r-hide={ready!=0}><span class="u-load"></span></div>\n    <div class="ttl">{this.consts.geoConfig[active]}</div>\n    <table border="1">\n        <tr>\n          <td class="tdf">数据</td>\n          <td class="tdf">定位</td>\n        </tr>\n      </table>\n      <div class="scrollbar" ref=list r-hide={!geoDetail[active].fieldConfig.fieldId}>\n        <div class=\'placeholder\' style="height: {preHeight}px"></div>\n        <table border="1" >         \n          {#list curList as item by item_index}\n            <map-mapping active={active} mapping={item} options={options} geoDetail={geoDetail} on-errorcount={this._getErrorCount()} mapBox={this.$refs.mapBox} scrollbar={this.$refs.list}></map-mapping>\n          {/list}\n        </table>\n        <div class=\'placeholder\' style="height: {nextHeight}px"></div>\n    </div>\n\n  </div>\n  \n\n</div>\n\n');
I$(791, '<div class="blk f-cb">\n  <div class="area">\n    {this.consts.geoConfig[pickMode]}\n    {#if errorcount > 0}\n    <div class="wrong" on-click={this.emitActive()}><div class="u-icn u-icn-info"></div>{errorcount}个项错误</div>\n    {/if}\n  </div>\n  <div class="action">\n    <select class="f-fl select" r-model={type}>\n      {#list typelist as item}\n      <option value={item.type}  {#if type==item.type}selected{/if}>{item.text}</option>\n      {/list}\n    </select>\n    <div class="f-fl switcher" ref=switcher>\n      <h2 class="" title={text} {#if type!=\'None\'}on-click={this.toggle($event)}{/if}>{text}</h2>\n    </div>\n    {#if type==\'Field\'}\n    <div class="f-fl pview" r-class={{\'js-selected\':active==pickMode}} on-click={this.emitActive()}>\n      <div class="u-icn u-icn-eye3"></div>\n    </div>\n    {/if}\n  </div>\n</div>  \n\n\n{#if showOver}\n<overlay show={showOver}  target={target} placement=\'bottom\' gap=\'-1\' container={this.$refs.switcher} animateIn=\'fadeIn\' animateOut=\'fadeOut\' ref=overlay>\n  <ul class="u-menu u-menu-sm u-menu-overlay u-menu-sel u-menu-list" on-clickouter={[showOver=false]} ref=search>\n    <div class="u-search f-cb">        \n      <label><i class="u-icn u-icn-search2"></i></label>\n      <input placeholder="输入关键字搜索" r-model={searchKey} on-input={this.search($event)}/>\n    </div>\n    <div class="list">\n      {#if type==\'Fixed\'}\n        {#list fullmaps as item}\n        <li de-click={this.changeFieldConfig(item)} class="j-text j-item f-ellipsis" title="{item.name}">{item.name}</li>\n        {/list}\n      {#elseif type==\'Field\'}\n        {#list dimensions as item}\n          <li de-click={this.changeFieldConfig(item)} class="j-text j-item f-ellipsis" title="{item.alias}">{item.alias}</li>\n        {/list}\n      {/if}\n    </div>\n  </ul>\n</overlay >\n{/if}');
I$(714, function(t, e, i, n, r, a) {
    var s = (Regular.dom, new n._$$DataModelCache),
        o = Regular.extend({
            name: "map-area",
            template: i,
            config: function(t) {
                var e = this;
                this.supr(t);
                t.geoLevel = t.geoDetail[t.pickMode];
                t.type = t.geoLevel.$type;
                this._getText();
                if("Fixed" == t.geoLevel.$type) this._getFullMaps();
                this.levelimit();
                this.$watch("type", function(i) {
                    switch(i) {
                        case "None":
                            t.geoLevel.$type = "None";
                            delete t.geoLevel.fieldConfig;
                            e.typeChange();
                            break;
                        case "Fixed":
                            e._getFullMaps("changeType");
                            break;
                        case "Field":
                            t.geoLevel.$type = "Field";
                            t.geoLevel.fieldConfig = {
                                matching: []
                            };
                            e.typeChange()
                    }
                }, {
                    sync: !0
                });
                this.$watch("showOver", function(e) {
                    t.searchKey = ""
                }, {
                    sync: !0
                })
            },
            typeChange: function() {
                this.data;
                this._getText();
                this.levelimit();
                this.emitActive();
                this.$emit("typechange")
            },
            toggle: function(t) {
                var e = this.data;
                t.preventDefault();
                if("Field" == e.geoLevel.$type) this.fetchDimensions();
                e.showOver = !e.showOver;
                e.target = t.target
            },
            _getFullMaps: function(t) {
                var i = this,
                    n = this.data,
                    r = a.geoConfigState(n.geoDetail),
                    o = e.extend({
                        level: n.pickMode,
                        geoConfig: r
                    }, n.options);
                s._$getGeoList(o).then(function(r) {
                    if(200 == r.code) {
                        n.fullmaps = r.result;
                        if("changeType" == t) {
                            n.geoLevel.$type = "Fixed";
                            if(n.fullmaps && n.fullmaps[0]) n.geoLevel.fieldConfig = {
                                fixed: n.fullmaps[0]
                            };
                            else n.geoLevel.fieldConfig = {};
                            i.typeChange()
                        }
                    } else e.message(r.message || "获取数据失败！", "err");
                    i.$update()
                })
            },
            _getText: function() {
                var t = this.data;
                t.text = a.getMapText(t.geoLevel, t.schema)
            },
            changeFieldConfig: function(t) {
                var e = this.data;
                if("Fixed" == e.type) e.geoLevel.fieldConfig.fixed = {
                    id: t.id,
                    name: t.name
                };
                else e.geoLevel.fieldConfig.fieldId = t.fieldId;
                this._getText();
                this.emitActive();
                e.showOver = !1;
                this.$update()
            },
            emitActive: function() {
                var t = this.data;
                t.active = t.pickMode;
                this.$emit("active", t.active)
            },
            search: function() {
                var t = this.data;
                a.domSearch(t.searchKey, this.$refs.search)
            },
            levelimit: function() {
                var t = this.data;
                t.typelist = [{
                    type: "None",
                    text: "空"
                }, {
                    type: "Fixed",
                    text: "确定位置"
                }, {
                    type: "Field",
                    text: "选择维度"
                }];
                var e = [{
                    type: "None",
                    text: "空"
                }, {
                    type: "Field",
                    text: "选择维度"
                }];
                if("province" == t.pickMode)
                    if("None" == t.geoDetail["country"].$type || "Field" == t.geoDetail["country"].$type) {
                        t.typelist = e;
                        if("Fixed" == t.geoLevel.$type) {
                            t.geoLevel.$type = "None";
                            delete t.geoLevel.fieldConfig;
                            this._getText()
                        }
                    }
                if("city" == t.pickMode) t.typelist = e
            },
            fetchDimensions: function() {
                var t = this.data;
                t.dimensions = t.schema.dimensions.slice(0);
                var e = function(e) {
                    if("Field" == e.$type) {
                        var i = e.fieldConfig.fieldId;
                        if(i) t.dimensions = t.dimensions.filter(function(t) {
                            return t.fieldId != i
                        })
                    }
                };
                e(t.geoDetail.country);
                e(t.geoDetail.province);
                e(t.geoDetail.city);
                if("country" == t.pickMode) {
                    var i = t.geoDetail.province,
                        n = t.geoDetail.city,
                        r = this.findFather(i, "province");
                    if(!r) var r = this.findFather(n, "city")
                } else if("province" == t.pickMode) var n = t.geoDetail.city,
                    r = this.findFather(n, "city");
                if(r) t.dimensions = t.dimensions.filter(function(t) {
                    return t.fieldId == r
                })
            },
            findFather: function(t, e) {
                var i, n = this.data;
                if("Field" == t.$type) {
                    var r = t.fieldConfig.fieldId,
                        a = n.schema.geoConfig && n.schema.geoConfig.list;
                    if(a) a.some(function(t) {
                        var a = t[e];
                        if("Field" == a.$type && a.fieldConfig && a.fieldConfig.fieldId == r)
                            if("Field" == t[n.pickMode].$type && t[n.pickMode].fieldConfig) {
                                i = t[n.pickMode].fieldConfig.fieldId;
                                return !0
                            }
                    })
                }
                return i
            }
        });
    return o
}, 6, 7, 791, 63, 136, 443, 203);
I$(792, '<tr>\n  <td>\n    <span class="dt">\n      {mapping.data[mapping.data.length-1]} {#if mapping.data.length > 1}<span class="path" title={mapping.data.slice(0,mapping.data.length-1).join(\'-\')}>（{mapping.data.slice(0,mapping.data.length-1).join(\'-\')}）</span>{/if}\n    </span>\n  </td>\n  <td>\n    <span class="dt" title={mapping.position.name} r-class={{\'z-err\':mapping.position.type==1}} on-click={this.showList($event)}>{mapping.position.name}</span>\n  </td>\n</tr>\n\n{#if showOver}\n<overlay show={showOver}  target={target} placement=\'bottom\' container={mapBox} gap={gap} animateIn=\'fadeIn\' animateOut=\'fadeOut\' ref=overlay>\n  <ul class="u-menu u-menu-sm u-menu-overlay u-menu-sel u-menu-list" on-clickouter={[showOver=false]} style="width:192px;" ref=search>\n    <div class="u-search f-cb">        \n      <label><i class="u-icn u-icn-search2"></i></label>\n      <input placeholder="输入关键字搜索" r-model={searchKey} on-input={this.search($event)}/>\n    </div>\n    <div class="list" style="height:250px;">\n\t  {#list fullmaps as item}\n      <li de-click={this.changeFieldConfig(item)} class="j-text j-item f-ellipsis" title="{item.name}">{item.name}</li>\n\t  {/list}\n    </div>\n  </ul>\n</overlay >\n{/if}');
I$(715, function(t, e, i, n, r, a, s) {
    var o = (Regular.dom, new r._$$DataModelCache),
        l = Regular.extend({
            name: "map-mapping",
            template: n,
            config: function(t) {
                this.supr(t);
                this.$watch("showOver", function(i) {
                    if(t.showOver) e._$addEvent(t.scrollbar, "scroll", this.overlayhidden.bind(this));
                    else e._$clearEvent(t.scrollbar, "scroll");
                    t.searchKey = ""
                }, {
                    sync: !0
                })
            },
            overlayhidden: function() {
                var t = this.data;
                if(this.$refs && this.$refs.overlay) {
                    t.showOver = !1;
                    this.$update()
                }
            },
            showList: function(e) {
                var n = this,
                    r = this.data;
                e.preventDefault();
                r.showOver = !r.showOver;
                r.target = e.target;
                var a = r.gap = 0,
                    l = t._$getByClassName(document.body, "m-mapdetail")[0];
                if(l) {
                    var c = t._$getByClassName(l, "scrollbar")[0];
                    if(c) {
                        a = c.scrollTop;
                        r.gap = 4 - a
                    }
                }
                var u = s.geoConfigState(r.geoDetail),
                    d = i.extend({
                        level: r.active,
                        data: r.mapping.data,
                        geoConfig: u
                    }, r.options);
                o._$getGeoList(d).then(function(t) {
                    if(200 == t.code) {
                        r.fullmaps = t.result;
                        n.$update()
                    } else i.message(t.message || "获取数据失败！", "err")
                })
            },
            changeFieldConfig: function(t) {
                var e = this.data,
                    i = e.mapping;
                if(!e.geoDetail[e.active].fieldConfig.matching) e.geoDetail[e.active].fieldConfig.matching = [];
                var n = e.geoDetail[e.active].fieldConfig.matching,
                    r = n.some(function(e) {
                        if(JSON.stringify(e.k) == JSON.stringify(i.data)) {
                            e.v = t.id;
                            return !0
                        }
                    });
                if(!r) n.push({
                    k: i.data,
                    v: t.id
                });
                i.position.name = t.name;
                i.position.type = 0;
                e.showOver = !1;
                this.$emit("errorcount")
            },
            search: function() {
                var t = this.data;
                s.domSearch(t.searchKey, this.$refs.search)
            }
        });
    return l
}, 3, 6, 7, 792, 63, 136, 443, 203);
I$(595, function(t, e, i, n, r, a, s) {
    var o = Regular.dom,
        l = new r._$$DataModelCache,
        c = 34,
        u = a.extend({
            name: "map-detail",
            data: {
                autoClose: !1,
                title: "地理位置",
                width: 810,
                className: "m-modal-mapdetail",
                offset: 0
            },
            $body: n,
            config: function(t) {
                this.supr(t);
                if(t.geoDetail);
                else t.geoDetail = {
                    country: {
                        $type: "None"
                    },
                    province: {
                        $type: "None"
                    },
                    city: {
                        $type: "None"
                    },
                    id: t.schema.geoConfig.maxId + 1
                };
                t.options = {
                    schema: t.schema,
                    config: t.config,
                    dataConnectionId: t.dataConnectionId
                };
                this.getActive("country")
            },
            init: function() {
                this.supr();
                var t = this.$refs.list;
                o.on(t, "scroll", this._checkList.bind(this));
                this.$refs.winbd.style.overflow = "visible"
            },
            autoMatch: function() {
                var t = this.data,
                    e = t.schema.dimensions;
                e.forEach(function(e) {
                    if("country" == e.alias || "国家" == e.alias || "地区" == e.alias) t.geoDetail.country = {
                        $type: "Field",
                        fieldConfig: {
                            fieldId: e.fieldId,
                            matching: []
                        }
                    };
                    if("province" == e.alias || "省" == e.alias || "市" == e.alias || "自治区" == e.alias) t.geoDetail.province = {
                        $type: "Field",
                        fieldConfig: {
                            fieldId: e.fieldId,
                            matching: []
                        }
                    };
                    if("city" == e.alias || "城市" == e.alias) t.geoDetail.city = {
                        $type: "Field",
                        fieldConfig: {
                            fieldId: e.fieldId,
                            matching: []
                        }
                    }
                })
            },
            getActive: function(t) {
                var e = this.data;
                e.active = t;
                this._fetchlist();
                this._getErrorCount()
            },
            _fetchlist: function() {
                var t = this,
                    n = this.data;
                if("Field" == n.geoDetail[n.active].$type && n.geoDetail[n.active].fieldConfig && n.geoDetail[n.active].fieldConfig.fieldId) {
                    var r = s.geoConfigState(n.geoDetail),
                        a = i.extend({
                            level: n.active,
                            geoConfig: r
                        }, n.options);
                    if(0 == n.ready && n.mappingPromise) e._$abort(n.mappingPromise.request);
                    n.ready = 0;
                    n.mappingPromise = l._$getGeoMapping(a);
                    n.mappingPromise.then(function(e) {
                        n.ready = 1;
                        if(200 == e.code) {
                            n.fullsearchs = e.result;
                            t._optimismFullsearchs();
                            t.$update()
                        } else {
                            if(750 === e.code) {
                                i.messageDetail(e);
                                return
                            }
                            i.message(e.message || "获取数据失败！", "err")
                        }
                    })
                }
            },
            _checkList: function(t) {
                var e = this.$refs.list,
                    i = e.scrollTop,
                    n = this.data,
                    r = (n.fullsearchs, n.offset),
                    a = parseInt(i / c, 10);
                if(a > r + 8) n.offset = a;
                if(a < r + 5) {
                    n.offset -= 5;
                    if(n.offset > a) n.offset = a;
                    if(n.offset < 0) n.offset = 0
                }
                if(r !== n.offset) {
                    this._optimismFullsearchs();
                    this.$update()
                }
            },
            _optimismFullsearchs: function() {
                var t = this.data,
                    e = t.fullsearchs;
                if(e && e.length) {
                    var i = e.length,
                        n = t.offset || (t.offset = 0);
                    t.curList = e.slice(t.offset, t.offset + 20);
                    t.preHeight = n * c;
                    if(i < n + 10) t.nextHeight = 0;
                    t.nextHeight = (i - n - 20) * c;
                    if(t.nextHeight < 0) t.nextHeight = 0
                } else {
                    t.curList = [];
                    t.preHeight = 0;
                    t.nextHeight = 0
                }
            },
            _getErrorCount: function() {
                var t = this,
                    n = this.data,
                    r = s.geoConfigState(n.geoDetail);
                if(n.errorPromise) e._$abort(n.errorPromise.request);
                n.errorPromise = l._$getGeoErrorCount(i.extend({
                    geoConfig: r
                }, n.options));
                n.errorPromise.then(function(e) {
                    if(200 == e.code) {
                        n.countryError = e.result.country;
                        n.provinceError = e.result.province;
                        n.cityError = e.result.city;
                        t.$refs.areacountry.$update();
                        t.$refs.areaprovince.$update();
                        t.$refs.areacity.$update()
                    } else if(750 === e.code) {
                        i.messageDetail(e);
                        return
                    }
                })
            },
            typeChange: function() {
                this.data;
                this.$refs.areacountry.levelimit();
                this.$refs.areaprovince.levelimit();
                this.$refs.areacity.levelimit();
                this.$refs.areacountry.$update();
                this.$refs.areaprovince.$update();
                this.$refs.areacity.$update()
            }
        });
    return u
}, 3, 215, 7, 713, 63, 185, 443, 714, 715);
I$(445, function(t, e, i, n, r) {
    var a = (Regular.dom, i.extend({
        name: "map-list",
        data: {
            autoClose: !0,
            title: "地理位置列表",
            width: 570
        },
        $body: e,
        config: function(t) {
            this.supr(t);
            t.helper = n;
            if(!t.schema.geoConfig) t.schema.geoConfig = {
                list: [],
                maxId: 0
            };
            else this.fixGeo()
        },
        fixGeo: function() {
            var t = this.data,
                e = function(e) {
                    if("Field" == e.$type) {
                        var i = e.fieldConfig.fieldId,
                            n = !1;
                        t.schema.dimensions.some(function(t) {
                            if(t.fieldId == i) {
                                n = !0;
                                return !0
                            }
                        })
                    }
                    return n
                },
                i = function(t) {
                    t.$type = "None";
                    delete t.fieldConfig
                };
            t.schema.geoConfig.list.forEach(function(t) {
                if("Field" == t.country.$type && !e(t.country)) i(t.country);
                if("Field" == t.province.$type && !e(t.province)) i(t.province);
                if("Field" == t.city.$type && !e(t.city)) i(t.city)
            })
        },
        edit: function(e) {
            var i = this,
                n = this.data;
            new r({
                data: {
                    schema: n.schema,
                    dataConnectionId: n.cid,
                    config: n.config,
                    geoDetail: e
                }
            }).show().$on("confirm", function(e) {
                if(e.accept) {
                    var n = this.data.geoDetail,
                        r = i.checkGeoDetail(n);
                    if(r) {
                        if(n.id > i.data.schema.geoConfig.maxId) {
                            i.data.schema.geoConfig.list.push(this.data.geoDetail);
                            i.data.schema.geoConfig.maxId = n.id
                        }
                        this.data.show = !1
                    } else t.message("请先选择维度", "err")
                } else this.data.show = !1;
                i.$update()
            })
        },
        checkGeoDetail: function(t) {
            var e = (this.data, !0),
                i = function(t) {
                    if("Field" == t.$type && t.fieldConfig && !t.fieldConfig.fieldId) e = !1
                };
            i(t.country);
            i(t.province);
            i(t.city);
            return e
        }
    }));
    return a
}, 7, 594, 185, 443, 595);
I$(250, function(t, e, i, n, r, a, s, o, l, c) {
    var u = (Regular.dom, new i._$$DataModelCache),
        d = s.cache,
        h = Regular.extend({
            name: "data-model",
            template: e,
            config: function(t) {
                this.supr(t);
                t.mode = "view";
                t.meta = [];
                t.data = [];
                t.tables = [];
                t.dataMode = "auto";
                t.loading = !1;
                t.disabled = t.edit ? !1 : !0;
                t.filters = t.filters || [];
                if(t.savedSchema) {
                    var e = t.savedSchema.dimensions || [],
                        i = t.savedSchema.measures || [];
                    t.savedMeta = e.concat(i);
                    t.levels = t.savedSchema.levels || [];
                    t.schemaOptions = t.savedSchema.schemaOptions || {}
                } else {
                    t.savedMeta = [];
                    t.levels = [];
                    t.schemaOptions = {}
                }
                this.getSchema();
                t.provider = this._getProvider();
                this.$watch("searchDimension", function() {
                    this.search("Dimension")
                });
                this.$watch("searchMeasure", function() {
                    this.search("Measure")
                });
                if(1 == this.data.mtype) this.data.type = "fusion"
            },
            init: function() {
                var t = 3,
                    e = location.hash.match(/&kind=(\d)/);
                if(e && e[1] == t) this.$refs.mapBtn.click()
            },
            render: function() {
                this.getSchema()
            },
            showFilterList: function(t) {
                var e = this;
                new o({
                    data: {
                        showAt: t.target,
                        schema: this.data.savedSchema,
                        dataConnectionId: this.data.cid,
                        config: this.data.config,
                        filters: (this.data.filters || []).slice()
                    }
                }).show().$on("confirm", function(t) {
                    if(t.accept) {
                        e.data.filters = this.data.filters;
                        e.$update()
                    }
                });
                return !1
            },
            onSaveFilters: function(t) {
                this.data.filters = t.filters
            },
            changeMode: function() {
                var t = this.data,
                    e = this;
                if(1 == t.mtype)
                    if(t.new) {
                        if(!t.config || t.config && 0 == t.config.length) {
                            if("table" == t.mode) t.mode = "view";
                            else t.mode = "table";
                            this.$update();
                            return
                        }
                        if("table" == t.mode) {
                            t.mode = "view";
                            this.$update()
                        }
                        if(this.__modal) this.__modal.destroy();
                        this.__modal = new c({
                            data: {
                                title: "温馨提示",
                                autoClose: !1
                            },
                            $body: "<div>预览宽表需要先进行数据抽取，是否立即进行？</div>"
                        }).show().$on("confirm", function(t) {
                            if(t.accept) {
                                e.onGetData();
                                this.data.show = !1
                            } else this.destroy()
                        })
                    } else {
                        if("table" == t.mode) t.mode = "view";
                        else {
                            t.mode = "table";
                            this.getDataMode()
                        }
                        this.$update()
                    }
                else {
                    if("table" == t.mode) t.mode = "view";
                    else {
                        t.mode = "table";
                        this.getDataMode()
                    }
                    this.$update()
                }
            },
            getSchema: function() {
                var e = this,
                    i = this.data;
                if(i.config && (!i.config || i.config.length)) {
                    var n = {};
                    i.config.forEach(function(t) {
                        n[t.tableId] = t.tableName
                    });
                    i.tableMap = n;
                    var r = {
                        dataConnectionId: i.cid,
                        config: i.config,
                        fusionId: i.fusionId
                    };
                    if(4 == i.type) r.parameters = i.parameters;
                    i.loading = !0;
                    i.metaloading = !0;
                    this.$update();
                    u._$getWideTableMeta(r).then(function(n) {
                        i.loading = !1;
                        i.metaloading = !1;
                        e.$update();
                        if(200 == n.code) {
                            var r = i.schema = n.result;
                            i.meta = r.dimensions.concat(r.measures);
                            e.merge();
                            e.detectGeographyInfo(i.savedSchema.dimensions, i.savedSchema.measures);
                            e.renameAlias();
                            i.tables = e.arrRedundantMerge(i.meta, "tableAlias", "cols");
                            if(1 != e.data.mtype) e.getDataMode();
                            e.detectErrorList(i.savedSchema.dimensions, i.savedSchema.measures);
                            i.provider.notifyProvider()
                        } else t.message(n.message || "请求返回失败！", "err");
                        e.$update()
                    })
                } else {
                    i.meta = [];
                    i.savedMeta = [];
                    if(i.provider) i.provider.notifyProvider();
                    this.$update()
                }
            },
            detectErrorList: function(t, e) {
                var i = t.concat(e),
                    n = s.detectField(i);
                this.data.errorlist = n
            },
            getDataMode: function() {
                var t = this.data,
                    e = (t.meta, t.tables);
                if(e.length < 3) this.getData();
                else t.dataMode = "manual";
                this.$update()
            },
            pick: function() {},
            getData: function() {
                var e = this,
                    i = this.data;
                i.dataMode = "auto";
                var n = {
                    dataConnectionId: i.cid,
                    config: i.config,
                    pivotSchema: i.schema
                };
                if(1 == i.mtype) n.fusionId = i.fusionId;
                if(4 == i.type) n.parameters = i.parameters;
                i.loading = !0;
                u._$getWideTableData(n).then(function(n) {
                    i.loading = !1;
                    e.$update();
                    if(200 == n.code) i.data = n.result;
                    else if(750 === i.code) t.messageDetail(n);
                    else if(1 != e.data.mtype) t.message(n.message || "请求返回失败！", "err");
                    else {
                        t.message("数据模型数据抽取未完成", "warm");
                        e.data.mode = "view";
                        e.$update()
                    }
                    e.$update()
                }).catch(function(e) {
                    t.message(e && e.message || "请求超时", "err")
                })
            },
            merge: function() {
                var t = this.data,
                    e = [];
                t.savedMeta.forEach(function(t) {
                    if(t.tableId == -1 || t.tableId == -2 || t.tableId == -3 || t.tableId == -4) e.push(t)
                });
                t.meta.forEach(function(e) {
                    t.savedMeta.forEach(function(t) {
                        if(e.fieldId == t.fieldId) {
                            e.$type = t.$type;
                            e.ignore = t.ignore;
                            e.convert = t.convert;
                            e.convertedType = t.convertedType;
                            e.alias = t.alias;
                            e.dataType = t.dataType;
                            e.granularity = t.granularity;
                            e.interpretation = t.interpretation;
                            e.aggregator = t.aggregator;
                            e.role = t.role;
                            e.tableId = t.tableId;
                            e.tableName = t.tableName;
                            e.default = t.default;
                            e.dict = t.dict;
                            e.geoRole = t.geoRole;
                            e.convertArg = t.convertArg
                        }
                    })
                });
                t.savedMeta = t.meta;
                t.savedMeta = t.savedMeta.concat(e);
                this.dispersed()
            },
            dispersed: function() {
                var t = this.data,
                    e = [],
                    i = [];
                t.savedMeta.forEach(function(t) {
                    if("Dimension" == t.$type) e.push(t);
                    else if("Measure" == t.$type) i.push(t)
                });
                t.savedSchema = {
                    dimensions: e,
                    measures: i,
                    levels: t.levels,
                    schemaOptions: t.schemaOptions,
                    geoConfig: t.savedSchema.geoConfig
                };
                if(t.schema && t.schema.extra) t.savedSchema.extra = t.schema.extra
            },
            renameAlias: function() {
                var t = this.data,
                    e = t.savedMeta,
                    i = {};
                e.forEach(function(n, r) {
                    for(var a = 0; a < r && n.alias !== e[a].alias; a++);
                    if(a < r) {
                        if(!i[n.alias]) i[n.alias] = 1;
                        else i[n.alias]++;
                        if(n.tableName === e[a].tableName) n.alias = n.alias + "" + i[n.alias];
                        else n.alias = n.alias + "(" + t.tableMap[n.tableId] + ")"
                    }
                })
            },
            arrRedundantMerge: function(t, e) {
                var i = arguments,
                    n = i[i.length - 1],
                    r = {};
                t.forEach(function(t) {
                    var a = t[e];
                    if(!r[a]) {
                        r[a] = {};
                        for(var s = 1; s < i.length - 1; s++) r[a][i[s]] = t[i[s]];
                        r[a][n] = []
                    }
                    r[a][n].push(t)
                });
                var a = [];
                for(var e in r) a.push(r[e]);
                return a
            },
            selectTable: function(t) {
                var e = this.data;
                if(e.seltables && e.seltables.length && e.seltables[0].alias == t.tableId) e.seltables = [];
                else e.seltables = [{
                    alias: t.tableId
                }];
                this.$emit("change", e.seltables);
                this.$update()
            },
            getPivotSchema: function() {
                this.dispersed();
                return this.data.savedSchema
            },
            getFilter: function() {
                return this.data.filters
            },
            _getProvider: function() {
                var e, i = this,
                    n = this.data;
                return e = {
                    getSchema: function() {
                        i.dispersed();
                        if(!n.savedSchema) return {
                            dimension: [],
                            measure: [],
                            tableMap: {},
                            levels: [],
                            schemaOptions: {}
                        };
                        else return {
                            dimension: n.savedSchema.dimensions,
                            measure: n.savedSchema.measures,
                            tableMap: n.tableMap,
                            levels: n.levels,
                            schemaOptions: n.schemaOptions
                        }
                    },
                    dispatch: function(r) {
                        var a = r.type,
                            o = r.payload;
                        switch(a) {
                            case "MOVE_PILL":
                                var l = i.findPill(o.pill.fieldId);
                                if("measure" == o.target) {
                                    if(t.isDate(l)) {
                                        t.message("日期类型无法转换为度量", "err");
                                        return
                                    }
                                    l.$type = "Measure";
                                    l.role = "Measure";
                                    l.interpretation = "Continuous";
                                    if(/Whole|Decimal/.test(l.dataType)) l.aggregator = "SUM";
                                    if("String" === l.dataType) l.aggregator = "CNTD";
                                    if("g1" === l.granularity) delete l.aggregator
                                } else if("dimension" == o.target) {
                                    l.$type = "Dimension";
                                    l.role = "Dimension";
                                    l.interpretation = "Discrete";
                                    delete l.aggregator
                                }
                                break;
                            case "CHANGE_ALIAS":
                                var l = i.findPill(o.pill.fieldId);
                                l.alias = o.alias;
                                break;
                            case "CREATE_LEVEL":
                                var c = n.levels;
                                c.push(o);
                                break;
                            case "EDIT_LEVEL":
                                var c = n.levels,
                                    u = i.findLevel(o.name);
                                n.levels[u] = o;
                                break;
                            case "EDIT_LEVELS":
                                var c = n.levels;
                                o.forEach(function(t) {
                                    var e = i.findLevel(t.name);
                                    n.levels[e] = t
                                });
                                break;
                            case "DEL_FROM_LEVEL":
                                n.levels[o.index].pathes.splice(o.pillIndex, 1);
                                break;
                            case "DEL_LEVEL":
                                n.levels.splice(o.index, 1);
                                break;
                            case "DO_FORMAT":
                                var l = i.findPill(o.fieldId);
                                l.default = {
                                    format: o.format
                                };
                                break;
                            case "ADD_DICTIONARY":
                                n.savedMeta.push(o);
                                break;
                            case "ADD_DICTIONARY_MEASURE":
                                n.schemaOptions.dict = o.dict;
                                break;
                            case "DELETE_FIELD":
                                n.savedMeta.some(function(t, e) {
                                    if(t.fieldId === o.fieldId) {
                                        n.savedMeta.splice(e, 1);
                                        return !0
                                    }
                                });
                                break;
                            case "EDIT_DICTIONARY":
                                var l = i.findPill(o.fieldId);
                                l.dict = o.dict;
                                break;
                            case "CHANGE_AGGREGATOR":
                                var l = i.findPill(o.pill.fieldId);
                                l.aggregator = o.aggregator;
                                break;
                            case "EDIT_FIELD":
                                var h, l = i.findPill(o.fieldId),
                                    a = o.fieldData.type;
                                if("g0" === o.fieldData.granularity)
                                    if("String" === a || "DateTime" === a || "Date" === a || "Time" === a) h = "CNTD";
                                    else if("Whole" === a || "Decimal" === a) h = "SUM";
                                l.expr = o.expression;
                                l.alias = o.name;
                                l.dataType = o.fieldData.type;
                                l.granularity = o.fieldData.granularity;
                                l.aggregator = h;
                                break;
                            case "ADD_FIELD":
                                d._$getPillId(s.query.rid).then(function(e) {
                                    if(200 === e.code) {
                                        o.fieldId = e.result;
                                        var r = {
                                            $type: o.$type,
                                            expr: o.expression,
                                            alias: o.name,
                                            dataType: o.fieldData.type,
                                            granularity: o.fieldData.granularity,
                                            tableId: -1,
                                            role: o.role,
                                            produced: "Calculated",
                                            interpretation: "Dimension" == o.role ? "Discrete" : "Continuous",
                                            fieldId: o.fieldId
                                        };
                                        if("g0" === r.granularity) {
                                            if("String" === r.dataType || "DateTime" === r.dataType || "Date" === r.dataType || "Time" === r.dataType) r.aggregator = "CNTD";
                                            else if("Whole" === r.dataType || "Decimal" === r.dataType) r.aggregator = "SUM"
                                        } else;
                                        n.savedMeta.push(r);
                                        n.provider.notifyProvider();
                                        var a = o.role.toLowerCase();
                                        i.$refs.schemaManager.$emit("pick:" + a, o.name, !0)
                                    } else t.message(e && e.message || "获取唯一的fieldId失败", "warm")
                                });
                                break;
                            case "CHANGE_DATATYPE_EXCEL":
                                o.pill.dataType = o.dataType;
                                break;
                            case "CHANGE_DATATYPE_MYSQL":
                                var l = o.pill;
                                l.convertedType = o.convertedType;
                                if("String" === l.dataType && o.convertArg) {
                                    l.convert = o.convert;
                                    l.convertArg = o.convertArg
                                } else if(l.dataType === o.convertedType) {
                                    if(l.convert) delete l.convert;
                                    if(l.convertArg) delete l.convertArg;
                                    delete l.convertedType
                                }
                                break;
                            case "CHANGE_DATATYPE_OTHERS":
                                o.pill.convertedType = o.convertedType;
                                break;
                            case "ADD_GROUP":
                                n.savedMeta.push(o);
                                break;
                            case "EDIT_GROUP":
                                var l = i.findPill(o.fieldId);
                                l.groups = o.groups
                        }
                        var f = s.detectField(n.savedMeta);
                        n.errorlist = f;
                        e.notifyProvider()
                    },
                    notifyProvider: function() {
                        i.checkFilter(e.getSchema());
                        e.notify()
                    },
                    notify: function() {
                        throw Error("notify接口需要由schemaManager实现!")
                    }
                }
            },
            detectGeographyInfo: function(e, i) {
                var r, a = e.some(function(t) {
                        return t.geoRole && "None" != t.geoRole
                    }),
                    r = i.some(function(t) {
                        return t.fieldId == -12 || t.fieldId == -13
                    }),
                    s = this.data;
                if(a) {
                    if(!r) {
                        s.savedMeta.push(t.extend({
                            tableId: -3,
                            tableName: "地理信息"
                        }, n.longitude));
                        s.savedMeta.push(t.extend({
                            tableId: -3,
                            tableName: "地理信息"
                        }, n.latitude))
                    }
                } else if(r) s.savedMeta = s.savedMeta.filter(function(t) {
                    return t.fieldId != -12 && t.fieldId != -13
                })
            },
            checkFilter: function(t) {
                var e = this.data.filters;
                if(Array.isArray(e))
                    for(var i = e.length; i--;) {
                        var n = e[i],
                            r = n.pill;
                        if(!r || !this.findPillInList(r, t["Dimension" === r.role ? "dimension" : "measure"])) e.splice(i, 1)
                    }
            },
            findPillInList: function(t, e) {
                return e.some(function(e) {
                    return t.fieldId === e.fieldId
                })
            },
            findPill: function(t) {
                var e, i = this.data;
                i.savedMeta.some(function(i) {
                    if(t == i.fieldId) {
                        e = i;
                        return !0
                    }
                });
                return e
            },
            findLevel: function(t) {
                var e, i = this.data;
                i.levels.some(function(i, n) {
                    if(i.name == t) {
                        e = n;
                        return !0
                    }
                });
                return e
            },
            addField: function(e) {
                if(!n.ENV.showField) {
                    var i = this.data,
                        r = "添加计算字段 (" + ("Dimension" === e ? "维度" : "度量") + ")",
                        o = this.data.provider.getSchema(),
                        l = {
                            data: {
                                title: r,
                                role: e,
                                schemaList: o.dimension.concat(o.measure),
                                className: "m-window-field"
                            }
                        },
                        c = new a(l);
                    c.toggle().$on("save", function(e) {
                        d._$getPillId(s.query.rid).then(function(n) {
                            if(200 === n.code) {
                                e.fieldId = n.result;
                                var r = {
                                    $type: e.$type,
                                    expr: e.expression,
                                    alias: e.name,
                                    dataType: e.fieldData.type,
                                    granularity: e.fieldData.granularity,
                                    tableId: -1,
                                    role: e.role,
                                    produced: "Calculated",
                                    interpretation: "Dimension" == e.role ? "Discrete" : "Continuous",
                                    fieldId: e.fieldId
                                };
                                if("g0" === r.granularity) {
                                    if("String" === r.dataType || "DateTime" === r.dataType || "Date" === r.dataType || "Time" === r.dataType) r.aggregator = "CNTD";
                                    else if("Whole" === r.dataType || "Decimal" === r.dataType) r.aggregator = "SUM"
                                } else;
                                i.savedMeta.push(r);
                                i.provider.notifyProvider()
                            } else t.message(n && n.message || "获取唯一的fieldId失败", "warm")
                        })
                    }).$on("updateByfield", function() {
                        this.$update()
                    }.bind(this))
                } else t.message("请先完成当前操作！", "warm")
            },
            changeIgnoreAll: function(t, e) {
                var i = this.data;
                i.savedMeta.forEach(function(n) {
                    if(n.$type == t)
                        if(1 == e) n.ignore = !1;
                        else if(2 == e) {
                            var r = s.changePillIgnore(n, i.savedMeta, i.filters, 1);
                            if(r) n.ignore = !0
                        }
                });
                i.imshow1 = !1;
                i.imshow2 = !1
            },
            search: function(t) {
                var e = this.data;
                if("Dimension" == t) {
                    var i = e.searchDimension;
                    r.domSearch(i, this.$refs.schemaDropableDimension.$refs.group)
                } else if("Measure" == t) {
                    var i = e.searchMeasure;
                    r.domSearch(i, this.$refs.schemaDropableMeasure.$refs.group)
                }
            },
            clearSearch: function(t) {
                var e = this.data;
                if("Dimension" == t) e.searchDimension = "";
                else if("Measure" == t) e.searchMeasure = ""
            },
            getMapList: function(e) {
                var i = this,
                    n = this.data;
                new l({
                    data: {
                        showAt: e.target,
                        schema: t.extend({}, n.savedSchema),
                        cid: n.cid,
                        config: n.config
                    }
                }).show().$on("confirm", function(t) {
                    if(t.accept) {
                        i.data.savedSchema = this.data.schema;
                        i.changeGeoRole();
                        i.detectGeographyInfo(n.savedSchema.dimensions, n.savedSchema.measures);
                        i.detectErrorList(n.savedSchema.dimensions, n.savedSchema.measures);
                        i.renameAlias();
                        i.data.provider.notify();
                        i.$update()
                    }
                })
            },
            changeGeoRole: function() {
                var t = this.data,
                    e = t.savedSchema.geoConfig.list,
                    i = t.savedSchema.dimensions,
                    n = function(t, e) {
                        if("Field" == t[e].$type) {
                            var n = t[e].fieldConfig.fieldId;
                            i.some(function(t) {
                                if(t.fieldId == n) {
                                    if("country" == e) t.geoRole = "Country";
                                    if("province" == e) t.geoRole = "Province";
                                    if("city" == e) t.geoRole = "City"
                                }
                            })
                        }
                    };
                i.forEach(function(t) {
                    t.geoRole = "None";
                });
                e.forEach(function(t) {
                    n(t, "country");
                    n(t, "province");
                    n(t, "city")
                })
            }
        });
    return h
}, 7, 442, 63, 136, 443, 184, 34, 444, 445, 185, 204, 205);
I$(440, ".#<uispace>{}\n.#<uispace> .winbd{height:340px;}\n.#<uispace> .winbd .u-load{margin:20px auto;}");
I$(441, '<textarea name="txt" id="#<subTxt>">\n<div class="winbd">\n    <span class="u-load"></span>\n</div>\n<div class="zft"></div>\n</textarea>\n<textarea name="jst" id="#<seedversion>">\n</textarea>\n\n\n<textarea name="jst" id="jst-window-table-list">\n<div class="m-widetable m-widetable-1">\n    <table>\n        <thead>\n        <tr>\n            <th>\n                <span class="right-line" data-resize="true">&nbsp;</span>\n                <div class="txt txt-order" data-index="0">序号</div>\n            </th>\n            {list meta as x}\n            <th>\n                <span class="right-line" data-resize="true" data-index="${x_index+1}">&nbsp;</span>\n                <div class="wrap">\n                    <div class="txt" title="${x|escape}">${x|escape}</div>\n                </div>\n            </th>\n            {/list}\n        </tr>\n        </thead>\n        <tbody>\n        {list data as x}\n        <tr>\n            <td><div class="txt txt-order txt-0">${x_index}</div></td>\n            {list x as y}\n            <td><div class="txt txt-${y_index+1}" title="${y|escape}">${y|escape}</div></td>\n            {/list}\n        </tr>\n        {/list}\n        </tbody>\n    </table>\n</div>\n</textarea>\n\n<textarea name="jst" id="jst-window-message">\n<div class="u-msg"><i class="u-icn u-icn-warm"></i>${msg}</div>\n</textarea>\n\n');
I$(251, function(t, e, i, n, r, a, s, o, l, c, u, d, h) {
    d._$$TableWin = t._$klass();
    h = d._$$TableWin._$extend(c._$$MyWindow);
    var f = e._$pushCSSText(r),
        p = s._$parseUITemplate(a),
        _ = p["subTxt"],
        m = (p["seedversion"], s._$addNodeTemplate(s._$getTextTemplate(_)));
    h.__init = function(t) {
        this.__super(t);
        this.__cache = u._$$DataModelCache._$allocate({
            ongettabledatas: this.__cbGetTableDatas._$bind(this)
        })
    };
    h.__reset = function(t) {
        t.title = t.title || "查看单表";
        t.clazz = "w-win-1";
        t.mask = "w-mask";
        this.__super(t);
        this.__cid = t.options.cid;
        this.__cache._$getTableDatas(t.param, this.__cid)
    };
    h.__destroy = function(t) {
        this.__super(t)
    };
    h.__initXGui = function() {
        this.__seed_css = f;
        this.__seed_html = m
    };
    h.__initNode = function() {
        this.__super();
        this.__winbd = e._$getByClassName(this.__body, "winbd")[0]
    };
    h.__cbGetTableDatas = function(t) {
        if(200 == t.code)
            if(t.result && t.result.meta && t.result.meta.length > 0) o._$render(this.__winbd, "jst-window-table-list", t.result);
            else o._$render(this.__winbd, "jst-window-message", {
                msg: "没有数据"
            });
        else o._$render(this.__winbd, "jst-window-message", {
            msg: t.message || "获取数据失败"
        })
    };
    return d
}, 1, 3, 6, 4, 440, 441, 14, 15, 7, 159, 63);
I$(446, '<div class="m-field">\n    <div class="col-1">\n        <form class="m-form" style="padding-top:20px;">\n            <div class="formrow">\n                <label>视图名称</label>\n                <div class="formcnt">\n                    <span class="u-txtwrap" ref="name">\n                      <input type="text" class="u-txt" placeholder="请输入视图名称" r-model={name} on-change={this.validate("name")} on-focus={this.hideError("name")}/>\n                    </span>\n                </div>\n            </div>\n            <div class="formrow">\n                <label>SQL语句</label>\n                <div class="formcnt">\n                    <span class="u-txtwrap" ref="query">\n                      <textarea class="u-txt u-txt-area u-code-input" rows="5" spellcheck="false" r-model={query} on-focus={this.hideError("query")} on-change={this.checkQuery("query")}>{query}</textarea>\n                    </span>\n                    <div class="info"><span class="u-icn u-icn-info"></span>SQL里不能存在同名字段</div>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>');
if("undefined" != typeof exports) Validator = require("./validator.js");
var rules = [{
    field: "name",
    rules: [{
        type: function(t) {
            if(!t) return !0;
            else return t.length < 40
        },
        message: "视图名称长度不能大于40"
    }, {
        type: function(t) {
            return !!t
        },
        message: "视图名称不可以为空"
    }],
    node: "name"
}, {
    field: "query",
    rules: [{
        type: function(t) {
            return !!t
        },
        message: "SQL语句不可以为空"
    }],
    node: "query"
}];
if("undefined" == typeof exports) {
    if("object" != typeof window.bigvizValidateRule) window.bigvizValidateRule = {};
    bigvizValidateRule.sql = rules
} else;
I$(252, function(t, e, i, n, r, a, s) {
    var a = (Regular.dom, window.bigvizValidateRule.sql),
        o = n.extend({
            name: "modal-sql",
            $body: i,
            data: {
                autoClose: !1,
                title: "自定义SQL视图",
                rules: a,
                autoRecycleRequest: !1,
                width: 707,
                className: "m-window-sql"
            },
            init: function() {
                this.supr()
            },
            config: function(t) {
                this.supr(t);
                var t = this.data;
                t.query = t.tableExpr;
                t.id = t.tableExprId;
                if(t.id) t.oldName = t.name;
                this.$on("confirm", function(t) {
                    if(t.accept) this.save();
                    else this.destroy()
                }.bind(this));
                t.cache = s._$$DataModelCache._$allocate({
                    ongettableschema: this.cbGetTableSchema._$bind(this),
                    ongettableschema2: this.cbGetTableSchema2._$bind(this)
                })
            },
            show: function() {
                this.supr()
            },
            save: function() {
                var t = this.data;
                this.checkName();
                var e = this.validate("query");
                if(e) t.cache._$getTableSchema2({
                    tableExpr: t.query
                }, t.cid)
            },
            keydown: function(t) {
                if(13 === t.event.keyCode) this.save()
            },
            checkName: function() {
                var t = this,
                    e = this.data;
                this.validate("name");
                var i = e.name;
                if(e.id) var n = e.tableList.filter(function(t) {
                    return t.name != e.oldName
                });
                else var n = e.tableList;
                n.some(function(e) {
                    if(e.name == i) {
                        t.showError("name", t.getNode("name"), "视图名称不能重名");
                        return !0
                    }
                })
            },
            checkQuery: function(t) {
                var e = this.data,
                    i = this.validate(t);
                if(i) e.cache._$getTableSchema({
                    tableExpr: e.query
                }, e.cid)
            },
            cbGetTableSchema: function(e) {
                this.data;
                if(200 == e.code) {
                    this.hideError("query");
                    if(this.hasError()) return
                } else t.messageDetail(e)
            },
            cbGetTableSchema2: function(e) {
                var i = this.data;
                if(200 == e.code) {
                    this.hideError("query");
                    if(this.hasError()) return;
                    var n = {
                        id: i.id,
                        name: i.name,
                        query: i.query
                    };
                    this.$emit("change", n);
                    this.destroy()
                } else t.messageDetail(e)
            }
        }).implement(r.Error);
    return o
}, 7, 34, 446, 185, 257, 447, 63);
I$(448, '<h2 class="f-cb connection-tt">\n    <div class="f-fl">选择关联表格</div>\n    <div class="add-connection icon u-icn u-icn-add3" on-click={this.cbAdd($event)} title="添加" ref=addBtn></div>\n</h2>\n<ul class="m-connection-table f-pr" ref=box>\n    {#list connections as item by item_index}\n        <li class="item" r-class={{\'z-select\': item == selConnect}} de-click={this.selectConnect($event, item)}>\n            <span class="u-corner" style="border-color:{item.color} transparent transparent {item.color};"></span>\n            <select on-change={this.cbChangeConnection($event, item_index)}>\n                {#list connectList as connectItem}\n                    <option value="{connectItem.name}" {#if item.name == connectItem.name}selected="selected"{/if}>{connectItem.name}</option>\n                {/list}\n            </select>\n            {#if item.type == 1 || item.type == 12}\n            <select on-change={this.cbChangeDatabase($event, item_index)}>\n                {#list item.db as dbItem}\n                    <option value="{dbItem.name}" {#if item.dbName == dbItem.name}selected="selected"{/if}>{dbItem.name}</option>\n                {/list}\n            </select>\n            {/if}\n            <span class="u-icn u-icn-close" on-click={this.delConnections(item_index)}></span>\n        </li>\n    {/list}\n</ul>');
I$(253, function(t, e, i, n, r, a) {
    var s = Regular.dom,
        o = Regular.extend({
            name: "connection-database",
            template: i,
            data: {
                connections: [],
                selConnect: {},
                colorMap: {},
                colorId: {},
                dataModels: [],
                count: 0,
                canSend: !0
            },
            config: function(t) {
                this.supr(t);
                this.cache = n._$$DataModelCache._$allocate({
                    ongetdatabase: this.cbGetDataBaseCallBack._$bind(this),
                    onchangefusion: this.cbChageFusion._$bind(this)
                });
                t.connections = [];
                this.$watch("connectList", function(t, e) {
                    var i = this.data;
                    if(e) {
                        for(var n = 0, r = i.connectList.length; n < r; n++) i.connectList[n].dataConnectionId = i.connectList[n].id;
                        if(!i.dataModels.length) this.cbAdd();
                        else {
                            this.initConnections();
                            this.initColor();
                            this.onDataChange({
                                type: "initColor",
                                payload: this.data
                            });
                            for(var n = 0, r = i.connections.length; n < r; n++) {
                                var a = i.connections[n],
                                    s = this.getColor(n);
                                a.color = s;
                                a.db = [];
                                this.cbGetDatabase(a, {
                                    connect: a,
                                    hasOne: !0
                                })
                            }
                            this.$update()
                        }
                    }
                })
            },
            init: function() {
                this.data;
                s.addClass(this.$refs.addBtn, "disabled")
            },
            selectConnect: function(t, e) {
                if(this.data.selConnect !== e)
                    if(!s.hasClass(t.target, "u-icn-close")) {
                        this.data.selConnect = e;
                        if((1 == e.type || 12 == e.type) && !e.dbName) this.cbGetDatabase(e, {
                            dataConnectionId: e.dataConnectionId
                        });
                        else this.onDataChange({
                            cid: e.dataConnectionId,
                            type: "getTable",
                            payload: this.data,
                            dataBaseName: e.dbName
                        })
                    }
            },
            cbAdd: function(e) {
                if(this.data.edit) {
                    if(e) {
                        var i = e.target;
                        if(s.hasClass(i, "disabled")) return;
                        s.addClass(i, "disabled")
                    }
                    var n = this.data,
                        r = t.deepClone(n.connectList[0]);
                    r.color = "";
                    r.db = [];
                    r.dbName = "";
                    this.data.selConnect = r;
                    n.connections.unshift(r);
                    this.cbGetDatabase(r, {
                        dataConnectionId: r.dataConnectionId,
                        new: !0
                    });
                    this.$update()
                }
            },
            hasSame: function(t) {
                for(var e = 0, i = this.data.connections, n = t.dataConnectionId + encodeURIComponent(t.dbName), r = 0, a = i.length; r < a; r++) {
                    var s = i[r].dataConnectionId + encodeURIComponent(i[r].dbName);
                    if(n === s) e++
                }
                return e > 1
            },
            isInWorkSpace: function(t) {
                for(var e = this.data.dataModels, i = t && t.color, n = 0, r = e.length; n < r; n++)
                    if(i == e[n].color) return !0;
                return !1
            },
            cbGetDatabase: function(t, e) {
                var i = this.data;
                if(1 == t.type || 12 == t.type) {
                    e.dataConnectionId = t.dataConnectionId;
                    e.databaseName = t.dbName;
                    this.cache._$getDataBaseWithId({
                        dataConnectionId: t.dataConnectionId,
                        type: t.type,
                        otherData: e
                    })
                } else {
                    if(e.hasOne) {
                        i.count++;
                        if(i.count == i.connections.length) i.selConnect = e.connect
                    }
                    this.cbGetTaleList(t, e)
                }
            },
            cbGetTaleList: function(t, e) {
                if(!t.defaultColor) this.setColor(t);
                else delete t.defaultColor;
                s.delClass(this.$refs.addBtn, "disabled");
                this.onDataChange({
                    type: "getTable",
                    payload: this.data,
                    cid: t.dataConnectionId,
                    dataBaseName: t.dbName
                })
            },
            onCheckFusionChange: function(t) {
                var i = (t.newItem, t.oldItem),
                    n = i.tableId,
                    r = this.data,
                    a = this.getChildIds(n),
                    s = this.getFusionConfig(),
                    o = [];
                e._$forEach(s, function(t) {
                    if(t.tableId != n && a.indexOf(t.tableId) < 0) o.push(t)
                });
                var l = {
                    fusionId: r.fusionId,
                    dataConnectionId: r.fusionConnectionId,
                    config: o
                };
                this.cache._$changeFusion(l, t);
            },
            cbChageFusion: function(e, i) {
                if(200 == i.code) this.doChangeFusion(e);
                else t.message(i.message || "操作失败")
            },
            doChangeFusion: function(t) {
                if("changeConnect" == t.type) this.onConnectOk(t.oldItem, t.newItem, t.index, t.actionType);
                else if("changeDatabase" == t.type) this.onDatabaseOk(t.oldItem, t.dbName, t.actionType);
                this.$update()
            },
            cbChangeConnection: function(e, i) {
                var n = e.target.value,
                    a = t.deepClone(this.getConnect("name", n)),
                    s = this.data.connections[i],
                    o = this;
                if(this.data.edit && !this.hasSame(s) && this.isInWorkSpace(s)) {
                    if(this.__modal) this.__modal.destroy();
                    this.__modal = new r({
                        data: {
                            title: "温馨提示",
                            autoClose: !1
                        },
                        $body: "<div>右侧关联区域内已存在该数据源下的表格，此更改将导致表格被删除，是否确认更改？</div>"
                    }).show().$on("confirm", function(t) {
                        if(t.accept) {
                            o.onCheckFusionChange({
                                type: "changeConnect",
                                newItem: a,
                                oldItem: s,
                                index: i,
                                actionType: "delWorkConnect"
                            });
                            this.data.show = !1
                        } else {
                            e.target.value = s.name;
                            this.destroy()
                        }
                    })
                } else o.onConnectOk(s, a, i)
            },
            onConnectOk: function(e, i, n, r) {
                this.cbDealColor(e);
                i.color = e.color;
                i.db = [];
                i.dbName = "";
                this.data.connections[n] = i;
                this.data.selConnect = i;
                if(r) {
                    this.data.delConnect = t.deepClone(e);
                    this.onDataChange({
                        type: "delWorkConnect",
                        payload: this.data
                    })
                }
                this.onDataChange({
                    type: "clearTable",
                    payload: this.data
                });
                this.cbGetDatabase(i, {
                    data: e
                });
                this.$update()
            },
            cbChangeDatabase: function(t, e) {
                var i = t.target.value,
                    n = this.data.connections[e],
                    a = this;
                if(this.data.edit && !this.hasSame(n) && this.isInWorkSpace(n)) {
                    if(this.__modal) this.__modal.destroy();
                    this.__modal = new r({
                        data: {
                            title: "温馨提示",
                            autoClose: !1
                        },
                        $body: "<div>数据项在工作区有数据，改变会导致工作区表被删除，是否继续？</div>"
                    }).show().$on("confirm", function(e) {
                        this.data;
                        if(e.accept) {
                            a.onCheckFusionChange({
                                type: "changeDatabase",
                                oldItem: n,
                                dbName: i,
                                actionType: "delWorkConnect"
                            });
                            this.data.show = !1
                        } else {
                            t.target.value = n.dbName;
                            this.destroy()
                        }
                    })
                } else a.onDatabaseOk(n, i)
            },
            onDatabaseOk: function(e, i, n) {
                if(n) {
                    this.data.delConnect = t.deepClone(e);
                    this.onDataChange({
                        type: "delWorkConnect",
                        payload: this.data
                    })
                }
                this.cbDealColor(e);
                e.dbName = i;
                this.setColor(e);
                this.onDataChange({
                    cid: e.dataConnectionId,
                    type: "getTable",
                    payload: this.data,
                    dataBaseName: i
                })
            },
            cbDealColor: function(t) {
                var e = t.dataConnectionId + encodeURIComponent(t.dbName),
                    i = this.data,
                    n = t.color,
                    r = i.colorMap,
                    a = i.colorId;
                if(1 == r[n]) {
                    delete a[e];
                    r[n] = 0
                } else r[n]--
            },
            getConnect: function(t, e) {
                for(var i = 0, n = this.data.connectList.length; i < n; i++) {
                    var r = this.data.connectList[i];
                    if(r[t] == e) return r
                }
            },
            cbGetDataBaseCallBack: function(e, i) {
                var n = this.data,
                    r = e.dataConnectionId,
                    a = n.connections;
                if(this.__modal) this.__modal.destroy();
                if(200 == i.code) {
                    if(e.hasOne) {
                        n.count++;
                        e.connect.db = i.result;
                        if(n.count == n.connections.length) n.selConnect = e.connect;
                        this.cbGetTaleList(e.connect);
                        this.$update()
                    } else
                        for(var s = 0, o = a.length; s < o; s++)
                            if(a[s].dataConnectionId == r) {
                                a[s].db = i.result;
                                a[s].dbName = i.result[0] && i.result[0].name || "";
                                this.cbGetTaleList(a[s]);
                                this.$update();
                                return
                            }
                } else t.message(i.message || "获取数据库列表失败！")
            },
            delConnections: function(e) {
                var i = this.data.connections,
                    n = this;
                if(1 !== i.length) {
                    var a = i[e];
                    a.color;
                    if(!this.hasSame(a) && this.isInWorkSpace(a)) {
                        if(this.__modal) this.__modal.destroy();
                        this.__modal = new r({
                            data: {
                                title: "温馨提示",
                                autoClose: !1
                            },
                            $body: "<div>数据项在工作区有数据，改变会导致工作区表被删除，是否继续？</div>"
                        }).show().$on("confirm", function(t) {
                            this.data;
                            if(t.accept) n.onDelConnectOk(a, e, "delWorkConnect");
                            this.destroy()
                        })
                    } else n.onDelConnectOk(a, e)
                } else t.message("请至少保留一个数据源！")
            },
            onDelConnectOk: function(e, i, n) {
                var r = this.data.connections,
                    a = !1;
                if(e === this.data.selConnect) a = !0;
                this.cbDealColor(e);
                r.splice(i, 1);
                if(n) this.data.delConnect = t.deepClone(e);
                if(a) this.data.selConnect = r[0];
                this.$update();
                if(a) {
                    if(n) this.onDataChange({
                        type: "delWorkConnect",
                        payload: this.data
                    });
                    this.onDataChange({
                        type: "getTable",
                        payload: this.data
                    })
                } else if(n) this.onDataChange({
                    type: "delWorkConnect",
                    payload: this.data
                })
            },
            setColor: function(t) {
                var e = ["#e74c3c", "#53a4f5", "#13c3a9", "#ffd400", "#6f60aa", "#f391a9", "#000000"],
                    i = "" + t.dataConnectionId + encodeURIComponent(t.dbName),
                    n = this.data.colorMap,
                    r = this.data.colorId;
                if(!r[i]) {
                    for(var a = 0; a < 7; a++) {
                        var s = e[a];
                        if(!n[s]) {
                            n[s] = 1;
                            r[i] = t.color = s;
                            this.$update();
                            return
                        }
                    }
                    t.color = "rgb(" + parseInt(255 * Math.random()) + ", " + parseInt(255 * Math.random()) + ", " + parseInt(255 * Math.random()) + ")";
                    r[i] = t.color;
                    this.$update()
                } else {
                    t.color = r[i];
                    n[t.color]++;
                    this.$update()
                }
            },
            initConnections: function() {
                for(var e = this.data, i = 0, n = e.dataModels.length; i < n; i++) {
                    var r = e.dataModels[i].table.tableName.split(".");
                    if(r.length > 1) r = r[0];
                    else r = "";
                    for(var a = e.dataModels[i].dataConnectionId, s = 0, o = e.connectList.length; s < o; s++) {
                        var l = e.connectList[s].dataConnectionId;
                        if(a == l) {
                            e.connections[i] = t.deepClone(e.connectList[s]);
                            e.connections[i].dbName = r;
                            break
                        }
                    }
                }
                for(var c = [], i = 0, n = e.connections.length; i < n; i++) {
                    for(var u = !0, d = e.connections[i].dataConnectionId + encodeURIComponent(e.connections[i].dbName), s = 0, o = c.length; s < o; s++) {
                        var h = c[s].dataConnectionId + encodeURIComponent(c[s].dbName);
                        if(d == h) {
                            u = !1;
                            break
                        }
                    }
                    if(u) c.push(e.connections[i])
                }
                e.connections = c
            },
            initColor: function() {
                var t = this.data,
                    e = this.pConfigs;
                t.colorId = {};
                t.colorMap = {};
                for(var i = 0, n = t.connections.length; i < n; i++) {
                    var r = t.connections[i],
                        a = this.getColor(i),
                        s = "" + r.dataConnectionId + encodeURIComponent(r.dbName);
                    r.color = a;
                    r.defaultColor = !0;
                    t.colorId[s] = a;
                    t.colorMap[a] = 1;
                    for(var o = 0, l = e.length; o < l; o++) {
                        var c = e[o].table.tableName.split(".");
                        if(c.length > 1) c = c[0];
                        else c = "";
                        var u = "" + e[o].dataConnectionId + encodeURIComponent(c);
                        if(s == u) {
                            e[o].color = r.color;
                            t.dataModels[o].color = r.color
                        }
                    }
                }
            },
            focusItem: function(t) {
                for(var e, i = this.data, n = 0, r = i.connections.length; n < r; n++) {
                    var a = i.connections[n],
                        s = a.dataConnectionId + encodeURIComponent(a.dbName);
                    if(s == t) {
                        e = a;
                        break
                    }
                }
                i.selConnect = e;
                this.$update();
                this.onDataChange({
                    type: "getTable",
                    payload: this.data
                });
                this.scrollToItem(e, n)
            },
            scrollToItem: function(t, e) {
                var i = this.$refs.box,
                    n = i.children[e];
                if(n) i.scrollTop = n.offsetHeight + n.offsetTop - i.clientHeight + 10
            },
            getColor: function(t) {
                var e = ["#e74c3c", "#53a4f5", "#13c3a9", "#ffd400", "#6f60aa", "#f391a9", "#000000"];
                if(t < 7) return e[t];
                else return "rgb(" + parseInt(255 * Math.random()) + ", " + parseInt(255 * Math.random()) + ", " + parseInt(255 * Math.random()) + ")"
            },
            getFusionConfig: function() {
                for(var t = this.data.dataModels, e = [], i = 0, n = t.length; i < n; i++) e.push({
                    tableName: t[i].tableName,
                    tableId: t[i].tableId,
                    fusionTableName: t[i].fusionTableName,
                    dataConnectionId: t[i].dataConnectionId,
                    table: {
                        tableName: t[i].tableName,
                        tableId: t[i].tableId,
                        tableExprId: t[i].tableExprId
                    }
                });
                return e
            },
            getChildIds: function(t) {
                var i = this,
                    n = [],
                    r = function(t) {
                        e._$forEach(i.data.dataModels, function(e, i) {
                            if(e.leftTableId == t) {
                                n.push(e.tableId);
                                r(e.tableId)
                            }
                        })
                    };
                r(t);
                return n
            }
        });
    return o
}, 7, 4, 448, 63, 185);
I$(79, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f, p, _, m, g, v, y, b) {
    y._$$Base = t._$klass();
    b = y._$$Base._$extend(c._$$Module);
    a._$parseUITemplate(o);
    b.__reset = function(t) {
        this.__options = t.options;
        s._$render(this.__options.parent, "jst-base-template", this.__options);
        var n = e._$getByClassName(this.__options.parent, "j-flag");
        this.__options.mbox = n[0];
        this.__options.sbox = n[1];
        this.__options.rbox = n[2];
        this.__options.wbox = n[3];
        this.__options.lbox = n[4];
        e._$setStyle(document.body, "overflow-y", "hidden");
        this.__super(t);
        this.__cbSave = t.cbSave;
        this.__cache = u._$$DataModelCache._$allocate({
            ongetconfig: this.__cbGetConfig._$bind(this),
            ongettables: this.__cbGetTables._$bind(this),
            ongetdatabase: this.__cbGetDataBase._$bind(this),
            oncreatesql: this.__cbCreateSql._$bind(this),
            ondelsql: this.__cbDelSql._$bind(this),
            onchecktables: this.__cbCheckTables._$bind(this),
            ongetconnectlist: this.__cbGetDataConnections._$bind(this),
            ongetfusionid: this.__cbGetFusionId._$bind(this),
            onchangefusion: this.__cbChangeFusion._$bind(this)
        });
        this.__getConfigPromise = this.__cache._$getConfig(this.__mid);
        if(1 === this.__mtype) {
            var r = e._$getByClassName(this.__options.parent, "j-table-h2")[0],
                a = e._$getByClassName(this.__options.parent, "j-table-database")[0];
            r.style.display = "none";
            a.style.display = "none";
            if(this.__new) l.message("极速数据模型无法使用Top筛选器", "warm")
        } else if(1 == this.__type || 12 == this.__type) this.__cache._$getDataBase({
            dataConnectionId: this.__cid,
            type: this.__type
        });
        else this.__getTableList();
        var o = this;
        this.__sch = e._$get("config-sch");
        this.__doInitDomEvent([
            [document, "click", this.__doDocument._$bind(this)],
            [this.__sch, "keyup", this.__doSearch._$bind(this)],
            [this.__parent, "click", this.__doAction._$bind(this)],
            ["create-sql", "click", function(t) {
                i._$stop(t);
                o.__showSQL({})
            }]
        ])
    };
    b.__cbGetDataConnections = function(t) {
        function e(t) {
            for(var e in t) return !1;
            return !0
        }
        var i = this;
        if(200 == t.code) {
            for(var n = t.result.list, r = [], a = 0, s = n.length; a < s; a++) {
                var o = n[a].type,
                    c = [0, 1, 2, 4, 6, 11, 12, 13];
                if(c.indexOf(o) >= 0) r.push(l.deepClone(n[a]))
            }
            if(1 == i.__mtype) {
                this.__connectList = r;
                if(this.__connectDatabase) {
                    if(!e(r)) this.__connectDatabase.data.connectList = this.__connectList;
                    else this.__connectDatabase.data.connectList = [];
                    this.__connectDatabase.$update()
                }
            }
        } else l.message(t.message || "获取数据源列表错误！")
    };
    b.__cbGetFusionId = function(t) {
        if(200 == t.code) {
            this.__fusionId = t.result;
            this.__options.fusionId = t.result;
            if(this.__dragger) this.__dragger.__fusionId = t.result;
            if(this.__connectDatabase) this.__connectDatabase.data.fusionId = t.result;
            if(this.__dataModel) this.__dataModel.data.fusionId = t.result
        } else l.message("获取FusionId失败！")
    };
    b.__cbChangeFusion = function(t, i) {
        var n = t.type;
        if(200 == i.code) {
            e._$getByClassName(this.__rbox, "j-card");
            switch(n) {
                case "addRoot":
                    break;
                case "addJoin":
                    break;
                case "remove":
                    this.__deleteLogic(t.deElement)
            }
        } else {
            l.message(i.message || "修改数据库失败");
            e._$getByClassName(this.__rbox, "j-card");
            switch(n) {
                case "addRoot":
                    break;
                case "addJoin":
                    break;
                case "remove":
            }
        }
    };
    b.__cbDataChange = function(t) {
        var i = t.payload,
            n = i.selConnect;
        this.__dragger.__colorMsg = this.__colorMsg = {
            current: void 0,
            colorMap: i.colorMap,
            colorId: i.colorId
        };
        this.__options.cid = n.dataConnectionId;
        this.__dragger.__cid = this.__cid = n.dataConnectionId;
        this.__dragger.__type = n.type;
        this.__colorMsg.current = n.color;
        if(n.dbName) this.__databaseName = n.dbName;
        else this.__databaseName = "";
        switch(t.type) {
            case "initColor":
                this.__createTree(this.__frontConfig[0], this.__rbox, !0);
                break;
            case "clearTable":
                this.__sbox.innerHTML = "";
                this.__mbox.innerHTML = '<div class="tab-mask"><div class="tab-load-svg"></div><div class="tab-load-bg"></div></div>';
                break;
            case "getTable":
                if(n.dataConnectionId == t.cid && t.dataBaseName == n.dbName) this.__getTableList(t.cid, t.dataBaseName);
                break;
            case "delWorkConnect":
                for(var r = e._$getByClassName(this.__rbox, "j-card"), a = 0, s = r.length; a < s; a++) {
                    var o = e._$dataset(r[a], "color");
                    if(o == i.delConnect.color) {
                        this.__deleteLogic(r[a]);
                        break
                    }
                }
        }
    };
    b.__destroy = function() {
        if(this.__tableWin) this.__tableWin._$recycle();
        e._$setStyle(document.body, "overflow-y", "auto");
        this.__super()
    };
    b.__cbCheckTables = function(t) {
        if(200 == t.code) {
            if(t.result.length > 0) this.__setTreeNodesError(t.result, this.__rbox)
        } else l.message(t.message || "检测表错误失败！")
    };
    b.__cbGetConfig = function(t) {
        var i = this;
        if(200 == t.code) {
            this.__dataConnectionId = t.result.dataConnectionId;
            this.__options.dataConnectionId = this.__dataConnectionId;
            this.__dataConnectionType = this.__dataConnectionType;
            this.__options.dataConnectionType = this.dataConnectionType;
            this.__backConfig = t.result.config;
            this.__frontConfig = [];
            this.__globalObj.rootFlag = !1;
            this.__tableId = 0;
            if(1 == this.__mtype) {
                this.__cache._$getFusionId(this.__mid);
                var r = e._$getByClassName(this.__options.parent, "j-dataConnection-box")[0];
                if(this.__connectDatabase) this.__connectDatabase.destroy;
                this.__connectDatabase = new v({
                    data: {
                        fusionId: this.__fusionId,
                        fusionConnectionId: this.__dataConnectionId,
                        connectList: [],
                        dataModels: t.result.config,
                        edit: this.__edit
                    },
                    pConfigs: this.__frontConfig,
                    onDataChange: this.__cbDataChange._$bind(this)
                }).$inject(r);
                this.__cache._$getConnectList({
                    projectId: currentProjectId,
                    offset: 0,
                    limit: 0,
                    total: !0
                });
                e._$addClassName(this.__mbox, "long2")
            }
            if(this.__backConfig && this.__backConfig.length > 0) {
                this.__globalObj.rootFlag = !0;
                this.__backToFront();
                this.__createTree(this.__frontConfig[0], this.__rbox, !0);
                this.__tableId = this.__frontConfig[0].tableId;
                n._$forEach(this.__frontConfig, function(t, e) {
                    if(t.tableId > this.__tableId) this.__tableId = t.tableId
                }._$bind(this));
                if(1 != this.__mtype) this.__cache._$checkTables({
                    dataConnectionId: this.__cid,
                    config: this.__frontConfig
                });
                else;
            } else s._$render(this.__rbox, "jst-empty-config", {
                edit: this.__edit
            });
            this.__options.frontConfig = this.__frontConfig;
            if(this.__dragger) this.__dragger = this.__dragger._$recycle();
            var a = {
                options: this.__options,
                tableId: this.__tableId,
                onchange: this.__onChange._$bind(this)
            };
            this.__dragger = h._$$Dragger._$allocate(a);
            var o = e._$get("dataModel-title"),
                c = e._$getByClassName(document, "j-dataModel-title")[0];
            if(o) o.value = t.result.name;
            if(c) c.innerText = t.result.name;
            this.__parameters = {};
            if(t.result.parameters) {
                this.__parameters = t.result.parameters;
                if(!this.__parameters.options) this.__parameters.options = []
            }
            this.__schema = t.result.pivotSchema;
            this.__filter = t.result.filter;
            this.__allocateDataModel()
        } else if(401 == t.code) {
            l.message(t.message || "获取数据源详细失败！");
            setTimeout(function() {
                i._$dispatchEvent("onerror")
            }, 2e3)
        } else l.message(t.message || "获取数据源详细失败！")
    };
    b.__backToFront = function() {
        var t = this;
        n._$forEach(t.__backConfig, function(e, i) {
            if(1 == t.__mtype) {
                var n = {
                    dataConnectionId: e.dataConnectionId,
                    tableName: e.tableName,
                    tableId: e.tableId,
                    fusionTableName: e.fusionTableName,
                    edit: t.__edit,
                    type: t.__type,
                    tableExprId: e.tableExprId || e.table && e.table.tableExprId,
                    table: {
                        tableName: e.tableName,
                        tableExprId: e.tableExprId,
                        tableId: e.tableId
                    }
                };
                if(e.join) {
                    n.leftTableId = e.join.conditions[0].leftTableId;
                    n.num = e.join.conditions.length;
                    n.join = e.join
                }
            } else if(e.join) var n = {
                tableName: e.tableName,
                tableId: e.tableId,
                leftTableId: e.join.conditions[0].leftTableId,
                num: e.join.conditions.length,
                join: e.join,
                edit: t.__edit,
                type: t.__type,
                tableExprId: e.tableExprId
            };
            else var n = {
                    tableName: e.tableName,
                    tableId: e.tableId,
                    edit: t.__edit,
                    type: t.__type,
                    tableExprId: e.tableExprId
                };
            t.__frontConfig.push(n)
        })
    };
    b.__cbGetTables = function(t) {
        var i = this;
        if(200 == t.code) {
            t.edit = this.__edit;
            this.__tableList = t.result;
            n._$forEach(t.result, function(t, e) {
                if(1 == i.__type)
                    if(t.tableExprId) t.shortName = t.name;
                    else t.shortName = t.name.split(".")[1];
                else t.shortName = t.name;
                t.editable = i.__edit;
                t.color = i.__color
            });
            s._$render(this.__mbox, "jst-table-recources", t);
            s._$render(this.__sbox, "jst-table-sql", t);
            this.__resList = e._$getByClassName(this.__mbox, "tab-itm")
        } else {
            if(750 === t.code) {
                l.messageDetail(t);
                return
            }
            l.message(t.message || "获取数据失败")
        }
    };
    b.__cbGetDataBase = function(t) {
        var n = this;
        if(200 == t.code) {
            var r = e._$getByClassName(this.__options.parent, "j-blag")[0],
                a = t.result;
            this.__getConfigPromise.then(function(o) {
                if(200 == o.code) {
                    var l = o.result.config;
                    if(l && l.length > 0) {
                        var c = l[0].tableName.split(".")[0];
                        a.some(function(t) {
                            if(t.name == c) {
                                t.selected = !0;
                                return !0
                            }
                        })
                    } else a[0].selected = !0;
                    s._$render(r, "jst-oracle-database", t);
                    n.__dataBaseSelect = e._$getByClassName(document.body, "j-database-select")[0];
                    i._$addEvent(n.__dataBaseSelect, "change", n.__dataBaseChange._$bind(n));
                    n.__dataBaseChange()
                }
            })
        } else {
            if(750 === t.code) {
                l.messageDetail(t);
                return
            }
            l.message(t.message || "获取数据失败")
        }
    };
    b.__getTableItem = function(t) {
        var e;
        this.__tableList.some(function(i) {
            if(i.tableExprId == t) {
                e = i;
                return !0
            }
        });
        return e
    };
    b.__dataBaseChange = function() {
        this.__databaseName = this.__dataBaseSelect.value;
        this.__getTableList()
    };
    b.__getTableList = function(t, e) {
        var i = {
            dataConnectionId: t || this.__cid
        };
        if(1 == this.__mtype) {
            if(e) i.database = e;
            this.__cache._$getTables(i)
        } else {
            if(this.__databaseName) i.database = this.__databaseName;
            this.__cache._$getTables(i)
        }
    };
    b.__allocateDataModel = function() {
        var t = this,
            i = this.__wideReform(),
            r = 1 == this.__mtype ? this.__dataConnectionId : this.__cid,
            a = (1 == this.__mtype ? 8 : this.__type, {
                cid: r,
                mid: this.__mid,
                mtype: this.__mtype,
                fusionId: this.__fusionId,
                new: this.__new,
                config: i,
                edit: this.__edit,
                type: this.__type,
                parameters: this.__parameters,
                savedSchema: this.__schema,
                filters: "string" == typeof this.__filter ? JSON.parse(this.__filter) : this.__filter
            });
        this.__dataModel = new _({
            data: a,
            onGetData: this.__cbSave._$bind(this)
        }).$inject(this.__wbox).$on("change", function(i) {
            if(i && i.length) t.__lightId = i[0].alias;
            else t.__lightId = -1;
            var r = e._$getByClassName(t.__rbox, "js-item");
            n._$forIn(r, function(i) {
                var n = e._$getChildren(i)[0],
                    r = +e._$dataset(n, "tableid");
                if(t.__lightId == r) e._$addClassName(i, "z-sel2");
                else e._$delClassName(i, "z-sel2")
            })
        })
    };
    b.__wideReform = function() {
        var t = this.__frontConfig.slice(),
            e = [];
        n._$forEach(t, function(t, i) {
            if(i > 0)
                if(!t.join.conditions || 0 == t.join.conditions.length) {
                    e = e.concat(this.__getChildIds(t.tableId));
                    e.push(t.tableId)
                }
        }._$bind(this));
        for(var i = t.length, r = i; r > 0; r--) n._$forIn(e, function(e, i) {
            if(t[r - 1].tableId == e) {
                t.splice(r - 1, 1);
                return !0
            }
        });
        var a = [];
        if(1 == this.__mtype) n._$forEach(t, function(t, e) {
            if(t.join) var i = {
                tableName: t.tableName,
                tableId: t.tableId,
                fusionTableName: t.fusionTableName,
                dataConnectionId: t.dataConnectionId,
                join: t.join,
                table: {
                    tableName: t.tableName,
                    tableId: t.tableId,
                    fusionTableName: t.fusionTableName,
                    tableExprId: t.tableExprId
                }
            };
            else var i = {
                tableName: t.tableName,
                tableId: t.tableId,
                fusionTableName: t.fusionTableName,
                dataConnectionId: t.dataConnectionId,
                table: {
                    tableName: t.tableName,
                    tableId: t.tableId,
                    fusionTableName: t.fusionTableName,
                    tableExprId: t.tableExprId
                }
            };
            a.push(i)
        });
        else n._$forEach(t, function(t, e) {
            if(t.join) var i = {
                tableName: t.tableName,
                tableId: t.tableId,
                join: t.join,
                tableExprId: t.tableExprId
            };
            else var i = {
                tableName: t.tableName,
                tableId: t.tableId,
                tableExprId: t.tableExprId
            };
            a.push(i)
        });
        return a
    };
    b.__doSearch = function() {
        var t = this.__sch.value.trim();
        n._$forEach(this.__resList, function(i, n) {
            var r = i.innerText;
            if(r.toLowerCase().indexOf(t.toLowerCase()) != -1) e._$setStyle(i, "display", "block");
            else e._$setStyle(i, "display", "none")
        })
    };
    b.__doAction = function(t) {
        var r = i._$getElement(t, "d:action"),
            a = e._$dataset(r, "action");
        if(a) {
            i._$stop(t);
            switch(a) {
                case "eye":
                    var s = e._$dataset(r, "name"),
                        o = +e._$dataset(r, "exprid"),
                        l = {
                            tableName: s,
                            limit: 50
                        };
                    if(4 == this.__type) l.parameters = this.__parameters;
                    if(o) l.tableExprId = o;
                    var c = {
                        title: s,
                        options: this.__options,
                        param: l
                    };
                    this.__tableWin = m._$$TableWin._$allocate(c);
                    this.__tableWin._$show();
                    var u = r.parentNode,
                        d = e._$getByClassName(this.__parent, "tab-itm");
                    n._$forEach(d, function(t, i) {
                        e._$delClassName(t, "js-selected")
                    });
                    e._$addClassName(u, "js-selected");
                    break;
                case "editsql":
                    var h = +e._$dataset(r, "exprid"),
                        _ = this.__getTableItem(h);
                    this.__showSQL(_);
                    break;
                case "delsql":
                    var h = +e._$dataset(r, "exprid");
                    this.__cache._$delSql(h);
                    break;
                case "slidesql":
                    if(!e._$hasClassName(r, "close")) {
                        e._$addClassName(r, "close");
                        e._$addClassName(this.__sbox, "f-dn");
                        e._$addClassName(this.__mbox, "long")
                    } else {
                        e._$delClassName(r, "close");
                        e._$delClassName(this.__sbox, "f-dn");
                        e._$delClassName(this.__mbox, "long")
                    }
                    break;
                case "del":
                    if(1 == this.__mtype) this.__deleteLogic(r, !0, !0);
                    else this.__deleteLogic(r);
                    break;
                case "edit":
                    var g = +e._$dataset(r, "tableid"),
                        v = {
                            left: this.__rbox.scrollLeft,
                            top: this.__rbox.scrollTop
                        };
                    this.__mypt = {
                        options: this.__options,
                        parent: document.body,
                        parameters: this.__parameters,
                        tableId: g,
                        mask: !0,
                        node: r,
                        detalx: -234,
                        detaly: 4,
                        scroll: v,
                        onchange: this.__onChange._$bind(this)
                    };
                    if(this.__joinCard) this.__joinCard = this.__joinCard._$recycle();
                    this.__joinCard = f._$$JoinCard._$allocate(this.__mypt);
                    break;
                case "select":
                    if(1 == this.__mtype) {
                        var y = e._$dataset(r, "cid"),
                            b = e._$dataset(r, "name") || "";
                        b = b.split(".");
                        b = b.length > 1 ? b[0] : "";
                        var x = y + encodeURIComponent(b);
                        if(this.__connectDatabase) this.__connectDatabase.focusItem(x)
                    }
                    var u = r.parentNode,
                        $ = e._$getByClassName(this.__rbox, "js-item");
                    if(e._$hasClassName(u, "z-sel2")) e._$delClassName(u, "z-sel2");
                    else {
                        n._$forEach($, function(t) {
                            e._$delClassName(t, "z-sel2")
                        });
                        e._$addClassName(u, "z-sel2")
                    }
                    this.__selectTables();
                    break;
                case "setexcel":
                    var g = +e._$dataset(r, "tableid"),
                        w = e._$dataset(r, "name"),
                        v = {
                            left: this.__rbox.scrollLeft,
                            top: this.__rbox.scrollTop
                        };
                    this.__expt = {
                        options: this.__options,
                        parent: document.body,
                        parameters: this.__parameters,
                        tableId: g,
                        tableName: w,
                        mask: !0,
                        node: r,
                        detalx: -151,
                        detaly: 6,
                        scroll: v,
                        onchange: this.__onChange._$bind(this)
                    };
                    if(this.__excelCard) this.__excelCard = this.__excelCard._$recycle();
                    this.__excelCard = p._$$ExcelCard._$allocate(this.__expt)
            }
        }
    };
    b.__doDocument = function(t) {
        var r = i._$getElement(t, "c:m-widetable-1");
        if(!r) {
            e._$setStyle(this.__lbox, "display", "none");
            var a = e._$getByClassName(this.__mbox, "tab-itm");
            n._$forEach(a, function(t, i) {
                e._$delClassName(t, "js-selected")
            })
        }
    };
    b.__onChange = function() {
        if(this.__connectDatabase) this.__connectDatabase.data.dataModels = l.deepClone(this.__frontConfig);
        this.__dataModel.data.config = this.__wideReform();
        this.__dataModel.render()
    };
    b.__selectTables = function() {
        var t = e._$getByClassName(this.__rbox, "js-item"),
            i = [];
        n._$forEach(t, function(t, n) {
            if(e._$hasClassName(t, "z-sel2")) {
                var r = e._$getChildren(t)[0],
                    a = e._$dataset(r, "name"),
                    s = +e._$dataset(r, "tableid");
                i.push({
                    name: a,
                    alias: s
                })
            }
        });
        this.__dataModel.data.seltables = i;
        this.__dataModel.$update();
        if(i.length > 0) {
            var r = e._$getByClassName(this.__wbox, "table-area")[0];
            if(r) {
                var a = e._$getByClassName(r, "z-sel");
                if(a && a.length) r.scrollLeft = a[0].offsetLeft
            }
            this.__lightId = i[0].alias
        } else this.__lightId = -1
    };
    b._$getFrontConfig = function() {
        return this.__frontConfig
    };
    b._$getPivotSchema = function() {
        return this.__dataModel.getPivotSchema()
    };
    b._$getFilter = function() {
        return this.__dataModel.getFilter()
    };
    b._$getParameters = function() {
        return this.__parameters
    };
    b.__showSQL = function(t) {
        var e = this;
        t.cid = this.__cid;
        t.tableList = this.__tableList;
        t.edit = this.__edit;
        t = l.extend({}, t);
        new g({
            data: t
        }).$on("change", function(t) {
            t.dataConnectionId = e.__cid;
            t.projectId = window.currentProjectId;
            e.__cache._$createSql(t)
        }).show()
    };
    b.__cbCreateSql = function(t) {
        if(200 == t.code) this.__getTableList();
        else l.message(t.message || "操作失败", "err")
    };
    b.__cbDelSql = function(t) {
        if(200 == t.code) this.__getTableList();
        else l.message(t.message || "删除失败", "err")
    };
    return y
}, 1, 3, 6, 4, 142, 14, 15, 245, 7, 246, 63, 136, 247, 248, 249, 250, 251, 252, 253);
I$(244, '<form class="m-form m-form-1" style="margin:20px 60px 300px;">\n    <div class="formrow ">\n        <label><span class="clr-red">*</span>CUBE:</label>\n        <div class="formcnt">\n              <span class="u-txtwrap">\n                    <select class="u-txt" r-model={database} on-change={this.onChange()}>\n                        {#list databases as item by item_index}\n                        <option value={item.name} {#if database==item.name}selected=selected{/if}>{item.name}</option>\n                        {/list}\n                    </select>\n                    <div class="projectinfo">\n                        <span class="u-icn u-icn-rarr"></span>\n                    </div>\n              </span>\n        </div>\n    </div>\n</form>\n\n<div class="m-cubeinfo">\n    <div class="title">\n        <span>Cube:</span>\n        <span>{name}</span>\n    </div>\n    <div>\n        <h4>维度：</h4>\n        <ul class="dim">\n            {#list dimensions as item by item_index}\n            <li>{item.field}</li>\n            {/list}\n        </ul>\n    </div>\n    <div>\n        <h4>度量</h4>\n        <ul class="mes">\n            {#list measures as item by item_index}\n            <li>{item.field}</li>\n            {/list}\n        </ul>\n    </div>\n</div>\n\n<div class="m-cubeinfo m-cubeinfo-1" r-hide={loading!==true}>\n    <div class="loading">\n        <span class="u-load"></span>\n    </div>\n</div>');
I$(81, function(t, e, i, n) {
    var r = (Regular.dom, new n._$$DataModelCache),
        a = Regular.extend({
            name: "kylin",
            template: i,
            config: function(t) {
                this.supr(t);
                t.loading = !0;
                t.cache = n._$$DataModelCache._$allocate({
                    ongetconfig: this.cbGetConfig._$bind(this),
                    ongetdatabases: this.cbGetDataBases._$bind(this)
                });
                t.cache._$getConfig(t.mid)
            },
            cbGetConfig: function(i) {
                var n = this.data;
                if(200 == i.code) {
                    var r = i.result;
                    n.parameters = r.parameters;
                    if(r.parameters && r.parameters.database) {
                        n.database = r.parameters.database;
                        this.$update()
                    }
                    n.cache._$getDataBases({
                        dataConnectionId: n.cid
                    });
                    var a = t._$get("dataModel-title"),
                        s = t._$getByClassName(document, "j-dataModel-title")[0];
                    if(a) a.value = i.result.name;
                    if(s) s.innerText = i.result.name
                } else e.message(i.message || "获取数据失败")
            },
            cbGetDataBases: function(t) {
                var i = this.data;
                if(200 == t.code) {
                    i.databases = t.result;
                    if(!i.database) i.database = i.databases[0].name;
                    this.onChange();
                    this.$update()
                } else {
                    if(750 === t.code) {
                        e.messageDetail(t);
                        return
                    }
                    e.message(t.message || "获取数据失败")
                }
            },
            _getMeta: function() {
                var t = this,
                    i = this.data;
                if(i.databases && i.databases.length) {
                    i.loading = !0;
                    this.$update();
                    i.parameters.database = i.database;
                    r._$getWideTableMeta({
                        dataConnectionId: i.cid,
                        parameters: {
                            database: i.database
                        },
                        type: 5
                    }).then(function(n) {
                        i.loading = !1;
                        if(200 == n.code) {
                            var r = n.result;
                            i.dimensions = r.dimensions;
                            i.measures = r.measures;
                            t.$update()
                        } else e.message("请求返回失败！", "err");
                        t.$update()
                    })
                }
            },
            onChange: function() {
                this._getMeta()
            },
            _$getOptions: function() {
                var t = this.data;
                return {
                    parameters: t.parameters,
                    type: 5,
                    dataConnectionId: t.cid
                }
            }
        });
    return a
}, 3, 7, 244, 63);
I$(93, function(t, e, i, n, r, a) {
    r._$$Role = t._$klass();
    a = r._$$Role._$extend(n._$$Cache);
    a.__doLoadList = function(t) {
        var e = t.onload,
            n = t.data || {};
        i._$request("/api/roles/", {
            type: "json",
            data: n,
            onload: function(t) {
                e(200 == t.code ? t.result : null)
            }
        })
    };
    a.__doDeleteItem = function(t) {
        var e = t.onload,
            n = t.data || {};
        i._$request("/api/role/{id}/", {
            method: "delete",
            param: n,
            onload: function(t) {
                e(200 == t.code ? t.result : null)
            }
        })
    };
    a._$getRoleList = function(t) {
        var e = t.data || {};
        e.offset = 0;
        e.limit = 1e3;
        i._$request("/api/roles/", {
            type: "json",
            data: e,
            onload: this._$dispatchEvent._$bind(this, "getRoleList"),
            onerror: this._$dispatchEvent._$bind(this, "getRoleList")
        })
    };
    a._$getRole = function(t) {
        var e = t.data;
        i._$request("/api/role/{id}/", {
            type: "json",
            param: e,
            onload: this._$dispatchEvent._$bind(this, "getRole"),
            onerror: this._$dispatchEvent._$bind(this, "getRole")
        })
    };
    a._$addRole = function(t) {
        var e = t.data;
        i._$request("/api/role/", {
            type: "json",
            method: "post",
            param: e,
            onload: this._$dispatchEvent._$bind(this, "addRole"),
            onerror: this._$dispatchEvent._$bind(this, "addRole")
        })
    };
    a._$updateRole = function(t) {
        var e = t.data;
        i._$request("/api/role/{id}/", {
            type: "json",
            method: "put",
            param: e,
            onload: this._$dispatchEvent._$bind(this, "updateRole"),
            onerror: this._$dispatchEvent._$bind(this, "updateRole")
        })
    };
    a._$checkRole = function(t) {
        var e = t.data;
        i._$request("/api/role/check/", {
            type: "json",
            method: "get",
            param: e,
            onload: this._$dispatchEvent._$bind(this, "checkRole"),
            onerror: this._$dispatchEvent._$bind(this, "checkRole")
        })
    };
    a._$getResourceList = function(t) {
        var e = t.data;
        i._$request("/api/resources/", {
            type: "json",
            param: e,
            onload: this._$dispatchEvent._$bind(this, "getResourceList"),
            onerror: this._$dispatchEvent._$bind(this, "getResourceList")
        })
    };
    return r
}, 1, 4, 137, 138);
I$(450, '<div class="permission">\n  <div class="fixsd">\n    <div class="hd">\n      <i class="u-icn u-icn-del btn" on-click={this.deletePermission()}></i>\n      <i class="u-icn u-icn-edit btn" r-hide={!edit} on-click={this.editPermission()}></i>\n      <div>编辑权限内容</div>      \n    </div>\n    <div class="cont">\n      <detail-permission showDetails={showDetails} edit={edit} type={type} on-deleteOne={this.onDeleteOne($event)} on-deletField={this.onDeleteField($event)}>\n      </detail-permission>\n    </div>\n  </div>\n\n  <div class="autosd" r-hide={edit}  r-anim=\'on:enter;class:animated fadein;on:leave;class:animated fadeOut\'>\n      <div class="sdin">\n        {#if type == 1}\n          <!-- 只有oracle -->\n          <div class="col">\n            <div class="tit">数据库</div>\n            <ul>\n              {#list databases as db }\n                <li on-click={this.clickSelect(\'selectDatabase\', db)} style=\'background-color:{db === selectData.selectDatabase ? "#c2c2c2" : ""};\'>\n                  <i class="icon" r-class={{\'z-sel\':db.hasSelect}}></i>\n                  <span title={db.name}>{db.name}</span>\n                </li>\n              {/list}\n            </ul>            \n          </div>\n        {/if}\n        <div class="col">\n          <div class="tit">表</div>\n          <ul>\n            {#list tables as tb}\n              <li on-click={this.clickSelect(\'selectTable\', tb)} style=\'background-color:{tb === selectData.selectTable ? "#c2c2c2" : ""};\'>\n                <i class="icon" r-class={{\'z-sel\':tb.hasSelect}}></i>\n                <span title={tb.name}>{tb.name}</span>\n              </li>\n            {/list}\n          </ul>            \n        </div>\n        <div class="col">\n          <div class="tit">字段</div>\n          <ul>\n            {#list fields as fd }\n              <li on-click={this.clickSelect(\'selectField\', fd)} style=\'background-color:{fd === selectData.selectField ? "#c2c2c2" : ""};\'>\n                <i class="icon" r-class={{\'z-sel\':fd.hasSelect}}></i>\n                <span title={fd.name}>{fd.name}</span>\n              </li>\n            {/list}\n          </ul>            \n        </div>\n        <div class="col col-1">\n          <div class="tit">项</div>\n          <div r-hide={!selectData.selectField}>\n            <div class="switcher">\n              <label>\n                <input type="radio" value="manual" r-model={model} on-click={this.modelClick()}/>手动筛选\n              </label>\n              <label>\n                <input type="radio" value="list" r-model={model} on-click={this.modelClick()}/>在列表中选择\n              </label>\n            </div>\n            {#if model=="manual"}\n              <manual-permission select={select} type ={type} selectData={selectData} on-deleteMembers={this.deleteAllSelect()} on-addMember={this.addManualMenber()}>\n              </manual-permission>            \n            {#else}\n              <list-permission select={select} id={id} selectData={selectData} update={update}>\n              </list-permission>\n            {/if}\n            <div class="ft">\n              <input type="checkbox" value="unselect" r-model={filterType|isSelect} />\n              <span>排除</span>\n              <button type="button" class="u-btn u-btn-1 u-btn-s1" on-click={this.doApply()}>应用</button>\n            </div>\n          </div>\n          \n\n        </div>\n\n      </div>\n  </div>\n</div>\n');
I$(596, '<div class="m-manual-per" r-hide={!selectData.selectField}>\n  <div class="m-search" style="border:1px solid #ddd;">\n    <div class="search" >\n      <input placeholder="输入名称添加"  r-model={search} class=\'u-ipt-search\' style="padding:0 50px 0 10px;"> \n      <i class="u-icn u-icn-add" r-hide={!search} de-click={this.addEnter()} r-anim=\'on:enter;class:animated fadeIn;on:leave;class:animated fadeOut\' style="right:26px;top:6px;"></i>\n      <i class="u-icn u-icn-close " r-hide={!search} de-click={this.clearEnter()} r-anim=\'on:enter;class:animated fadeIn;on:leave;class:animated fadeOut\'></i>\n    </div>\n  </div>\n  <ul style="max-height:241px;border:1px solid #aaa;" r-hide={!select.length}>\n    {#list select as member by member_index}\n      <li>\n        <span>{member}</span>\n        <i class="u-icn u-icn-close" de-click={this.deleteMember(member,member_index)}></i>\n      </li>\n    {/list}\n  </ul>\n</div>\n');
I$(451, function(t, e) {
    var i = (Regular.dom, Regular.extend({
        name: "manual-permission",
        template: e,
        config: function(t) {
            this.supr(t)
        },
        deleteMember: function(t, e) {
            this.data.select.splice(e, 1);
            if(0 == this.data.select.length) this.$emit("deleteMembers")
        },
        addEnter: function() {
            var e = !1,
                i = this.data.search;
            this.data.select.forEach(function(t) {
                if(i == t) e = !0
            });
            if(e) t.message("该项已经存在，请勿重复添加！", "warm");
            else {
                this.data.select.push(this.data.search);
                this.data.search = ""
            }
        },
        clearEnter: function() {
            this.data.search = ""
        }
    }));
    return i
}, 7, 596);
I$(597, '<div class="m-manual-per" r-hide={!selectData.selectField}>\n  {#if !ready}\n    <div style=\'text-align:center;vertical-align:middle;\'>\n      <span class=\'u-load\' style=\'display:inline-block;vertical-align:middle;margin:8px\'></span> <span>正在读取列表... </span>\n    </div>\n  {#else}\n    <div class="m-search" style="border:1px solid #ddd;">\n      <div class="search" >\n        <span class=\'u-icn-search u-icn\'></span>\n        <input placeholder="输入关键词搜索"  r-model={search} class=\'u-ipt-search\' on-input={this.searchInput()}> \n        <i class="u-icn u-icn-close" r-hide={!search} de-click={this.clearSearch()} r-anim=\'on:enter;class:animated fadeIn;on:leave;class:animated fadeOut\'></i>\n      </div>\n    </div>\n    <div class="scrollbar" ref=scroll >\n      <div style="height:{preHeight}px;">\n      </div>  \n      <ul style="overflow-y:hidden;max-height:10000px;">\n        {#list optMembers as member by member_index}\n          <li>\n            <input  type="checkbox" r-model={member[0]|mergeSelect:member[0]}  />\n            <span class="dt">{member[0]}</span>\n          </li>\n        {/list}\n      </ul>\n      <div style="height:{nextHeight}px;">\n      </div>\n    </div>\n  {/if}\n</div>\n');
I$(452, function(t, e, i) {
    var n = Regular.dom,
        r = 40,
        a = Regular.extend({
            name: "list-permission",
            template: e,
            data: {
                offset: 0,
                showNumber: 20
            },
            config: function(t) {
                this.supr(t);
                this.data.ready = !1;
                this.data.select = this.data.select ? this.data.select : [];
                this.data._cacheModel = i._$$DataModelCache._$allocate();
                var e = this;
                this.data._cacheModel._$addEvent("ongetdimensionmembers", function(t) {
                    e.onGetDimensionMembers(t)
                });
                this.doGetMembers();
                this.$watch("update", function() {
                    this.data.ready = !1;
                    this.data.select = this.data.select ? this.data.select : [];
                    this.doGetMembers()
                })
            },
            doGetMembers: function() {
                var t = this.data.selectData;
                if(t && t.selectTable.name && t.selectField.name) {
                    var e;
                    if(1 == this.data.type) e = t.selectDatabase.name + "." + t.selectTable.name;
                    else e = t.selectTable.name;
                    var i = {
                        dataConnectionId: this.data.id,
                        tableName: e,
                        fieldName: t.selectField.name
                    };
                    this.data._cacheModel._$getDimensionMembers(i)
                }
            },
            onGetDimensionMembers: function(e) {
                if(200 == e.code) this.updateMembers(e.result);
                else if(750 === e.code) t.messageDetail(e);
                else t.message(e.message || "获取数据模型表数据失败！")
            },
            updateMembers: function(t) {
                this.data.ready = !0;
                this.data.list = t.map(function(t, e) {
                    return [t[0], !1]
                });
                this._filterMembers();
                this._optimizMembers();
                this.$update();
                this.$refs ? n.on(this.$refs.scroll, "scroll", this._scrollList.bind(this)) : ""
            },
            _filterMembers: function() {
                var t = this.data.search;
                if(t) {
                    var e = [];
                    this.data.list.forEach(function(i) {
                        var n = i[0] + "";
                        if(n.indexOf(t) != -1) e.push(i)
                    });
                    this.data.searchMembers = e
                } else this.data.searchMembers = this.data.list
            },
            _optimizMembers: function() {
                var t = this.data.offset,
                    e = this.data.showNumber;
                this.data.searchMembers;
                this.data.optMembers = this.data.searchMembers.slice(t, t + e);
                var i = this.data.searchMembers.length;
                this.data.preHeight = t * r;
                var n = i - t - e;
                this.data.nextHeight = n > 0 ? n * r : 0
            },
            _scrollList: function(t) {
                var e = this.$refs.scroll,
                    i = e.scrollTop,
                    n = this.data.offset,
                    a = parseInt(i / r, 10);
                if(a > n + 10) this.data.offset = a;
                if(a < n + 5) {
                    this.data.offset -= 5;
                    if(this.data.offset > a) this.data.offset = a;
                    if(this.data.offset < 0) this.data.offset = 0
                }
                if(n != this.data.offset) {
                    this._optimizMembers();
                    this.$update()
                }
            },
            searchInput: function() {
                this._filterMembers();
                this._optimizMembers();
                this.$update()
            },
            clearSearch: function() {
                this.data.search = "";
                this._filterMembers();
                this._optimizMembers();
                this.$update()
            }
        }).filter({
            mergeSelect: {
                get: function(t) {
                    var e = this.data.select;
                    return e.some(function(e) {
                        return e == t
                    })
                },
                set: function(t, e) {
                    var i = this.data.select;
                    if(!t) {
                        var n, r = i.some(function(t, i) {
                            n = i;
                            return t == e
                        });
                        if(r) i.splice(n, 1)
                    } else i.push(e);
                    return e
                }
            }
        });
    return a
}, 7, 597, 63);
I$(598, '<div class="m-perdetail">\n  {#list showDetails as member by member_index}\n    <div class="row ">\n      <i class="u-icn u-icn-addfolder folder" on-click={this.openFolder(member)}></i>\n      <span title={member_key} >{member_key}</span>\n<!--       <i class="u-icn u-icn-del btn btn-1 z-hide" r-hide={!edit} on-click={this.deletePermission()}></i>\n      <i class="u-icn u-icn-edit btn btn-1 z-hide" r-hide={!edit} on-click={this.editPermission()}></i> -->\n      \n    </div>\n    <div r-hide={member.hide} >\n      {#list member.value as item by item_index}\n        <div class="row row-1">\n          <i class="u-icn u-icn-addfolder folder" on-click={this.openFolder(item)}></i>\n          <span title={item_key}>{item_key}</span>\n           <i class="u-icn u-icn-del btn btn-1 z-hide" r-hide={type == 1} on-click={this.deletField(item_key)}></i>\n<!--          <i class="u-icn u-icn-edit btn btn-1 z-hide" r-hide={!edit} on-click={this.editPermission()}></i> -->\n        </div>\n        <div r-hide={item.hide} >\n          {#if item.select && item.select.length}\n             {#list item.select as select}\n              <div class="row row-2">\n                <i class="u-icn u-icn-plain"></i>\n                <span style=\'text-decoration: {item.filterType=="unselect"? "line-through":""};\' title={select}>{select}</span>\n                <i class="u-icn u-icn-del btn btn-1 z-hide"  on-click={this.deleteOne(item_index, select_index)}></i>\n           <!--      <i class="u-icn u-icn-edit btn btn-1 z-hide" r-hide={true} on-click={this.editPermission(item_index, select_index)}></i> -->\n              </div>\n            {/list}      \n          {#else}        \n            {#list item.value as field by field_index}\n              <div class="row row-2">\n                <i class="u-icn u-icn-addfolder folder" on-click={this.openFolder(field)}></i>\n                <span title={field_key}>{field_key}</span>\n                 <i class="u-icn u-icn-del btn btn-1 z-hide" on-click={this.deletField(field_key)}></i>\n<!--                <i class="u-icn u-icn-edit btn btn-1 z-hide" r-hide={!edit} on-click={this.editPermission()}></i> -->\n              </div>\n              <div r-hide={field.hide} >\n                {#list field.select as select}\n                  <div class="row row-3">\n                    <i class="u-icn u-icn-plain"></i>\n                    <span style=\'text-decoration: {field.filterType=="unselect"? "line-through":""};\' title={select}>{select}</span>\n                    <i class="u-icn u-icn-del btn btn-1 z-hide" on-click={this.deleteOne(field_index, select_index)}></i>\n           <!--          <i class="u-icn u-icn-edit btn btn-1 z-hide" r-hide={true} on-click={this.editPermission(field_index, select_index)}></i> -->\n                  </div>\n                {/list}\n              </div>              \n            {/list} \n          {/if}\n        </div>        \n      {/list}\n    </div>\n  {/list}\n</div>\n');
I$(453, function(t) {
    var e = (Regular.dom, Regular.extend({
        name: "detail-permission",
        template: t,
        config: function(t) {
            this.supr(t)
        },
        openFolder: function(t) {
            t.hide = !t.hide
        },
        deleteOne: function(t, e) {
            this.$emit("deleteOne", {
                index: t,
                mbIndex: e
            })
        },
        deletField: function(t) {
            this.$emit("deletField", t)
        }
    }));
    return e
}, 598);
I$(263, function(t, e, i, n) {
    var r = i.extend({
        name: "permission-modal",
        $body: e,
        data: {
            autoClose: !0,
            title: "权限管理",
            className: "m-permission",
            autoRecycleRequest: !1
        },
        config: function(t) {
            this.supr(t);
            this.data._cacheModel = n._$$DataModelCache._$allocate();
            var e = this;
            this.data._cacheModel._$addEvent("ongettables", function(t) {
                e.onGetTables(t)
            });
            this.data._cacheModel._$addEvent("ongettableschema", function(t) {
                e.onGetTablesSchema(t)
            });
            this.data._cacheModel._$addEvent("ongetdatabase", function(t) {
                e.onGetDatabases(t)
            });
            this.data.selectData = {};
            this.data.model = "manual";
            this.data.filterType = "select";
            this.data.details = this.data.details ? this.data.details : [];
            this.data.select = [];
            if(this.data.details && this.data.details.length > 0) {
                this.data.edit = !0;
                this.changeDetails()
            } else {
                this.data.edit = !1;
                this.initEditDatas()
            }
            this.$on("confirm", function(t) {
                if(t.accept) this.save();
                else this.data.autoClose = !0
            });
            this.$watch("select", function(t) {
                this.gatherData();
                this.deleteAllSelect()
            });
            this.$watch("model", function(t) {})
        },
        modelClick: function() {
            this.changeModel()
        },
        initEditDatas: function() {
            if(1 == this.data.type) this.doGetDatabases();
            else this.doGetTables()
        },
        doGetDatabases: function() {
            this.data._cacheModel._$getDataBase({
                dataConnectionId: this.data.id
            })
        },
        onGetDatabases: function(e) {
            if(200 == e.code) {
                var i = e.result;
                this.data.databases = i;
                this.updateSel();
                this.$update()
            } else {
                if(750 === e.code) {
                    t.messageDetail(e);
                    return
                }
                t.message(e.message, "err")
            }
        },
        doGetTables: function() {
            delete this.data.tables;
            delete this.data.fields;
            delete this.data.selectData.selectField;
            delete this.data.selectData.selectTable;
            var t = this.data.select.length;
            this.data.select.splice(0, t);
            this.data.model = "manual";
            if(1 == this.data.type) {
                var e = this.data.selectData.selectDatabase.name;
                this.data._cacheModel._$getTables({
                    dataConnectionId: this.data.id,
                    database: e
                })
            } else this.data._cacheModel._$getTables({
                dataConnectionId: this.data.id
            })
        },
        onGetTables: function(e) {
            if(200 == e.code) {
                var i = e.result;
                if(1 == this.data.type) i.forEach(function(t) {
                    var e = t.name.split(".");
                    t.name = e[1]
                });
                this.data.tables = i;
                this.updateSel();
                this.$update()
            } else {
                if(750 === e.code) {
                    t.messageDetail(e);
                    return
                }
                t.message(e.message, "err")
            }
        },
        doGetFields: function() {
            delete this.data.fields;
            delete this.data.selectData.selectField;
            var t = this.data.select.length;
            this.data.select.splice(0, t);
            this.data.model = "manual";
            var e;
            if(1 == this.data.type) e = this.data.selectData.selectDatabase.name + "." + this.data.selectData.selectTable.name;
            else e = this.data.selectData.selectTable.name;
            var i = {
                name: e
            };
            this.data._cacheModel._$getTableSchema(i, this.data.id);
        },
        onGetTablesSchema: function(e) {
            if(200 == e.code) {
                this.data.fields = e.result.fields.map(function(t) {
                    return {
                        name: t
                    }
                });
                this.updateSel();
                this.$update()
            } else t.message(e.message, "err")
        },
        changeModel: function() {
            var t = this.data.details,
                e = !1;
            if(t && t.length > 0) {
                var i, n = this.data.selectData,
                    r = this;
                e = t.some(function(t) {
                    i = t.tableName.split(".");
                    if(i.length > 1) {
                        if(i[0] != n.selectDatabase.name || i[1] != n.selectTable.name) return !1
                    } else if(i[0] != n.selectTable.name) return !1;
                    if(t.field != n.selectField.name) return !1;
                    if(r.data.model != t.model) return !1;
                    r.data.select = t.select.slice();
                    r.data.filterType = t.filterType;
                    return !0
                })
            }
            if(!e) {
                var a = this.data.select.length;
                this.data.select.splice(0, a)
            }
        },
        doGetSelect: function() {
            var t = this.data.details,
                e = !1;
            if(t && t.length > 0) {
                var i, n = this.data.selectData,
                    r = this;
                e = t.some(function(t) {
                    i = t.tableName.split(".");
                    if(i.length > 1) {
                        if(i[0] != n.selectDatabase.name || i[1] != n.selectTable.name) return !1
                    } else if(i[0] != n.selectTable.name) return !1;
                    if(t.field != n.selectField.name) return !1;
                    var e = r.data.model;
                    r.data.select = t.select.slice();
                    r.data.filterType = t.filterType;
                    r.data.model = t.model;
                    if("list" == e && "list" == t.model) r.data.update = !r.data.update;
                    return !0
                })
            }
            if(!e) {
                var a = this.data.select.length;
                this.data.select.splice(0, a);
                this.data.model = "manual"
            }
        },
        clickSelect: function(t, e) {
            this.gatherData();
            this.data.selectData[t] = e;
            switch(t) {
                case "selectDatabase":
                    this.doGetTables();
                    break;
                case "selectTable":
                    this.doGetFields();
                    break;
                case "selectField":
                    this.doGetSelect()
            }
        },
        gatherData: function() {
            var t = this.data.select,
                e = this.data.selectData;
            if(e.selectTable && e.selectField) {
                var i = 1 == this.data.type ? e.selectDatabase.name + "." + e.selectTable.name : e.selectTable.name,
                    n = e.selectField.name,
                    r = this.data.model;
                if(i && n && r) {
                    var a;
                    this.data.details.some(function(t, e) {
                        if(t.tableName == i && t.field == n) a = e + 1
                    });
                    if(a) {
                        if(t && t.length > 0) {
                            this.data.details[a - 1].select = t.slice();
                            this.data.details[a - 1].filterType = this.data.filterType
                        }
                    } else if(t && t.length > 0) {
                        var s = {};
                        s.tableName = i;
                        s.field = n;
                        s.model = r;
                        s.dataType = "String";
                        s.select = t.slice();
                        s.filterType = this.data.filterType;
                        this.data.details.push(s)
                    }
                    this.updateSel()
                }
            }
        },
        doApply: function() {
            this.gatherData();
            this.deleteAllSelect();
            this.changeDetails()
        },
        deleteAllSelect: function() {
            var t = this.data.select,
                e = this.data.selectData;
            if(e.selectTable && e.selectField) {
                var i = 1 == this.data.type ? e.selectDatabase.name + "." + e.selectTable.name : e.selectTable.name,
                    n = e.selectField.name,
                    r = this.data.model;
                if(i && n && r) {
                    var a;
                    this.data.details.some(function(t, e) {
                        if(t.tableName == i && t.field == n) a = e + 1
                    });
                    if(a && t && 0 == t.length) this.data.details.splice(a - 1, 1);
                    this.updateSel()
                }
            }
        },
        changeDetails: function() {
            for(var t, e, i, n, r, a = this.data.details, s = {}, o = 0; o < a.length; o++) {
                var l = a[o];
                i = l.field;
                e = l.tableName;
                n = l.select;
                r = l.filterType;
                var c = e.split(".");
                if(2 == c.length) {
                    t = c[0];
                    e = c[1];
                    if(!s[t]) s[t] = {};
                    if(!s[t].value) s[t].value = {};
                    var u = s[t].value;
                    if(!u[e]) u[e] = {};
                    if(!u[e].value) u[e].value = {};
                    var d = u[e].value
                } else {
                    if(!s[e]) s[e] = {};
                    if(!s[e].value) s[e].value = {};
                    var d = s[e].value
                }
                if(!d[i]) d[i] = {};
                if(!d[i].select) {
                    d[i].select = n.slice();
                    d[i].filterType = r;
                    d[i].index = o
                } else console.log("errr")
            }
            this.data.showDetails = s
        },
        editPermission: function() {
            this.data.edit = !1;
            this.initEditDatas()
        },
        deletePermission: function() {
            this.data.details = [];
            if(1 == this.data.type) delete this.data.tables;
            delete this.data.fields;
            var t = this.data.select.length;
            this.data.select.splice(0, t);
            this.data.selectData = {};
            this.changeDetails();
            this.updateSel()
        },
        save: function() {
            this.gatherData();
            this.deleteAllSelect();
            this.$emit("save", this.data.details)
        },
        onDeleteOne: function(t) {
            var e = t.index,
                i = t.mbIndex,
                n = this.data.details[e];
            n.select.splice(i, 1);
            if(0 == n.select.length) this.data.details.splice(e, 1);
            if(1 == this.data.type) delete this.data.tables;
            delete this.data.fields;
            var r = this.data.select.length;
            this.data.select.splice(0, r);
            this.data.selectData = {};
            this.changeDetails();
            this.updateSel()
        },
        onDeleteField: function(t) {
            var e = this.data.details;
            this.data.details = e.filter(function(e) {
                return e.field != t
            });
            if(1 == this.data.type) delete this.data.tables;
            delete this.data.fields;
            var i = this.data.select.length;
            this.data.select.splice(0, i);
            this.data.selectData = {};
            this.changeDetails();
            this.updateSel()
        },
        onEdit: function(t) {},
        updateSel: function() {
            var t, e, i = this.data.details,
                n = this.data.selectData;
            if(1 == this.data.type) {
                if(this.data.databases && this.data.databases.length > 0) this.data.databases.forEach(function(t) {
                    t.hasSelect = !1;
                    var e;
                    i.some(function(i) {
                        e = i.tableName.split(".")[0];
                        if(e == t.name) {
                            t.hasSelect = !0;
                            return !0
                        }
                    })
                });
                if(this.data.tables && this.data.tables.length > 0) this.data.tables.forEach(function(t) {
                    t.hasSelect = !1;
                    var r;
                    i.some(function(i) {
                        r = i.tableName.split(".")[1];
                        e = i.tableName.split(".")[0];
                        if(r == t.name && n.selectDatabase.name == e) {
                            t.hasSelect = !0;
                            return !0
                        }
                    })
                });
                if(this.data.fields && this.data.fields.length > 0) this.data.fields.forEach(function(r) {
                    r.hasSelect = !1;
                    var a;
                    i.some(function(i) {
                        a = i.field;
                        t = i.tableName.split(".")[1];
                        e = i.tableName.split(".")[0];
                        if(a == r.name && n.selectDatabase.name == e && n.selectTable.name == t) {
                            r.hasSelect = !0;
                            return !0
                        }
                    })
                })
            } else {
                if(this.data.tables && this.data.tables.length > 0) this.data.tables.forEach(function(t) {
                    t.hasSelect = !1;
                    var e;
                    i.some(function(i) {
                        e = i.tableName;
                        if(e == t.name) {
                            t.hasSelect = !0;
                            return !0
                        }
                    })
                });
                if(this.data.fields && this.data.fields.length > 0) this.data.fields.forEach(function(e) {
                    e.hasSelect = !1;
                    var r;
                    i.some(function(i) {
                        r = i.field;
                        t = i.tableName;
                        if(r == e.name && n.selectTable.name == t) {
                            e.hasSelect = !0;
                            return !0
                        }
                    })
                })
            }
        }
    }).filter({
        isSelect: {
            get: function(t) {
                return "unselect" == t
            },
            set: function(t) {
                return t ? "unselect" : "select"
            }
        }
    });
    return r
}, 7, 450, 185, 63, 451, 452, 453);
I$(264, '\ufeff<meta charset="utf-8"/>\n<!-- @TEMPLATE -->\n<textarea name="ntp" id="#<rt>">\n\t<div class="m-tab" style="display:none;">\n\t\t<div class="tabempty j-empty" style="display:none;">没有任何权限！</div>\n\t\t<div class="tablist z-has3 j-flag" style="display:none;">\n\t\t\t<ul>\n\t\t\t\t<li data-index="0" class="j-tab z-crt" style="display:none;">数据连接</li>\n\t\t\t\t<li data-index="1" class="j-tab" style="display:none;">数据模型</li>\n\t\t\t\t<li data-index="2" class="j-tab" style="display:none;">报表</li>\n\t\t\t\t<li data-index="3" class="j-tab" style="display:none;">仪表盘</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class="tabcnt j-flag" style="display:none;">\n\t\t\t<div class="m-table2">\n\t\t\t\t<table>\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr class="navbg">\n\t\t\t\t\t\t\t<th>功能</th>\n\t\t\t\t\t\t\t<th>启用</th>\n\t\t\t\t\t\t\t<th> </th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t</table>\n\t\t\t\t<div>\n\t\t\t\t\t<div class="tabcntin j-tabcontent" style="display:none;">\n\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t<tbody class="j-table" data-index="0"></tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tabcntin j-tabcontent" style="display:none;">\n\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t<tbody class="j-table" data-index="1"></tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tabcntin j-tabcontent" style="display:none;">\n\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t<tbody class="j-table" data-index="2"></tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tabcntin j-tabcontent" style="display:none;">\n\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t<tbody class="j-table" data-index="3"></tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<table>\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr class="navbg">\n\t\t\t\t\t\t\t<th>资源</th>\n\t\t\t\t\t\t\t<th>编辑</th>\n\t\t\t\t\t\t\t<th>预览</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t</table>\n\t\t\t\t<div class="scroll">\n\t\t\t\t\t<div class="tabcntin j-tabcontent" style="display:none;">\n\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t<tbody class="j-table" data-index="4"></tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tabcntin j-tabcontent" style="display:none;">\n\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t<tbody class="j-table" data-index="5"></tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tabcntin j-tabcontent" style="display:none;">\n\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t<tbody class="j-table" data-index="6"></tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tabcntin j-tabcontent" style="display:none;">\n\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t<tbody class="j-table" data-index="7"></tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</textarea>\n<!-- 功能权限 parentId == -1 && projectId == -1-->\n<textarea name="jst" id="#<ritf>">\n\t{var all = true}\n\t{list resources as x}\n\t\t{var isGlobal = !!(x.parentId == -1 && x.projectId == -1)}\n\t\t{if isGlobal}\n\t\t\t<tr>\n\t\t\t\t<td title="${(x.name)|escape}">${(x.name)|escape}</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type="checkbox" class="j-input j-editable j-data" value="${x.id}" data-category="${x.category}" data-type="${x.type}" {if x.permission==3}checked{/if} {if !!disabled}disabled{/if}>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t{if x.type != 1}\n\t\t\t\t\t<input type="checkbox" class="j-input j-readable j-data" value="${x.id}" data-category="${x.category}" data-type="${x.type}" {if x.permission!=1}checked{/if} {if !!disabled}disabled{/if}>\n\t\t\t\t\t{/if}\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t{else}\n\t\t{/if}\n\t{/list}\n</textarea>\n<!-- 资源权限 -->\n<textarea name="jst" id="#<rits>">\n\t{var all = true}\n\t{list resources as x}\n\t\t{var isGlobal = !!(x.parentId == -1 && x.projectId == -1)}\n\t\t{if isGlobal}\n\t\t{else}\n\t\t\t{if all && ((x.children && x.children.length>0) || x.category == 3)}\n\t\t\t\t<tr>\n\t\t\t\t\t<td title="全选">全选</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input type="checkbox" class="j-input j-editable j-all j-res" {if !!disabled}disabled{/if}>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input type="checkbox" class="j-input j-readable j-all j-res" {if !!disabled}disabled{/if}>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t{var all = false}\n\t\t\t{/if}\n\t\t\t{if x.children && x.children.length>0}\n\t\t\t<!-- category != 3 -->\n\t\t\t\t<tr class="parent">\n\t\t\t\t\t<td title="${(x.name)|escape}">\n\t\t\t\t\t\t{if x.category == 3}\n\t\t\t\t\t\t\t<i class="u-icn u-icn-auth icon"></i>\n\t\t\t\t\t\t{else}\n\t\t\t\t\t\t\t<i class="u-icn u-icn-openfolder icon"></i>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t${(x.name)|escape}\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t{if x.category == 1 || x.category ==2}\n\t\t\t\t\t\t<input type="checkbox" class="j-input j-editable j-parent j-res" value="${x.id}" data-category="${x.category}" data-type="${x.type}" {if x.permission==3}checked{/if} {if !!disabled}disabled{/if}>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t{if x.category == 1 || x.category ==2}\n\t\t\t\t\t\t<input type="checkbox" class="j-input j-readable j-parent j-res" value="${x.id}" data-category="${x.category}" data-type="${x.type}" {if x.permission!=1}checked{/if} {if !!disabled}disabled{/if}>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t{else}\n\t\t\t<!-- category == 3 -->\n\t\t\t\t{if !x.children}\n\t\t\t\t\t<tr class="child">\n\t\t\t\t\t\t<td title="${(x.name)|escape}">\n\t\t\t\t\t\t\t<i class="u-icn u-icn-back icon icon-1 j-dtpEdit" value="${x.id}"  data-datasourcetype="${x.datasourceType}" href="javascript:;"></i>\t\n\t\t\t\t\t\t\t${(x.name)|escape}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input type="checkbox" class="j-input j-editable j-child j-data j-res" value="${x.id}" data-datasourcetype="${x.datasourceType}" data-category="${x.category}" data-type="${x.type}" {if x.permission==3}checked{/if} {if !!disabled}disabled{/if}>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input type="checkbox" class="j-input j-readable j-child j-data j-res"  value="${x.id}" data-datasourcetype="${x.datasourceType}" data-category="${x.category}" data-type="${x.type}" {if x.permission!=1}checked{/if} {if !!disabled}disabled{/if}>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t{/if}\n\t\t\t{/if}\n\t\t\t{if x.children && x.children.length>0}\n\t\t\t\t{var children = x.children}\n\t\t\t\t{list children as y}\n\t\t\t\t\t<tr class="child">\n\t\t\t\t\t\t<td title="${(y.name)|escape}">${(y.name)|escape}</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input type="checkbox" class="j-input j-editable j-child j-data j-res" data-parentid="${y.parentId}" value="${y.id}" data-category="${y.category}" data-type="${y.type}" {if y.permission==3}checked{/if} {if !!disabled}disabled{/if}>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t{if y.type == 0}\n\t\t\t\t\t\t\t<input type="checkbox" class="j-input j-readable j-child j-data j-res" data-parentid="${y.parentId}" value="${y.id}" data-category="${y.category}" data-type="${y.type}" {if y.permission!=1}checked{/if} {if !!disabled}disabled{/if}>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t{/list}\n\t\t\t{/if}\n\t\t{/if}\n\t{/list}\n</textarea>');
I$(454, '{#if all}\n\t<tr>\n\t\t<td title="全选">全选</td>\n\t\t<td>\n\t\t\t<input type="checkbox" r-model={allPermission.editSelected} disabled={disabled} on-click={this.allClick(3, $event)}>\n\t\t</td>\n\t\t<td>\n\t\t\t<input type="checkbox" r-model={allPermission.readSelected} disabled={disabled} on-click={this.allClick(2, $event)}>\n\t\t</td>\n\t</tr>\n{/if}\n{#list resources as x}\n\t<!-- 光是文件夹也要罗列 -->\n\t{#if (x.parentId == -1 && x.projectId == -1)}\n\t{#else}\n\t\t<r-permission-folder folder={x} disabled={disabled} index={1} on-folderClick={this.folderClickSignal($event)} resources={resources} >\n\t\t</r-permission-folder>\n\t{/if}\t\n{/list}');
I$(599, '<tr class="parent ">\n\t<td style="padding-left:{index*20+20}px;"  title={folder.name} >\n\t\t<i class="u-icn u-icn-openfolder icon"></i>\n\t\t{folder.name}\n\t</td>\n\t<td>\n\t\t<input type="checkbox" class="j-input j-all j-editable" r-model={folder.editSelected} disabled={disabled || (folder.editDisabled && index!=1)}  on-click={this.folderClick(3, $event)}>\n\t</td>\n\t<td>\n\t\t<input type="checkbox" class="j-input j-all j-readable" r-model={folder.readSelected} disabled={disabled || (folder.readDisabled && index!=1)}   on-click={this.folderClick(2, $event)}>\n\t</td>\n</tr>\n{#if folder.children && folder.children.length>0}\n\t{#list folder.children as child}\n\t\t{#if child.isFolder}\n\t\t\t<r-permission-folder folder={child} disabled={disabled} index={index+1} resources={resources}>\n\t\t\t</r-permission-folder>\n\t\t{#else}\n\t\t\t<tr class="child">\n\t\t\t\t<td style="padding-left:{(index+1)*20+20}px;" title="{child.name}">{child.name}</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type="checkbox" class="j-input" r-model={child.editSelected} disabled={disabled || child.editDisabled} on-click={this.itemClick(3, $event, child)} >\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<input type="checkbox" class="j-input" r-model={child.readSelected} disabled={disabled || child.readDisabled} on-click={this.itemClick(2, $event, child)} >\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t{/if}\n\t\t\n\t{/list}\n{/if}');
I$(455, function(t, e) {
    var i = Regular.extend({
        name: "r-permission-folder",
        template: e,
        config: function(t) {},
        init: function(t) {},
        setItemPermission: function(t, e, i, n) {
            t.permission = e;
            if(3 == e) {
                t.editSelected = !0;
                t.readSelected = !0;
                if(!i)
                    if(n) {
                        t.editDisabled = !0;
                        t.readDisabled = !0
                    } else {
                        t.editDisabled = !1;
                        t.readDisabled = !1
                    }
            } else if(2 == e) {
                t.editSelected = !1;
                t.readSelected = !0;
                if(!i)
                    if(n) {
                        t.editDisabled = !1;
                        t.readDisabled = !0
                    } else {
                        t.editDisabled = !1;
                        t.readDisabled = !1
                    }
            } else {
                t.editSelected = !1;
                t.readSelected = !1;
                if(!i) {
                    t.editDisabled = !1;
                    t.readDisabled = !1
                }
            }
        },
        setFolderPermission: function(t, e, i, n) {
            this.setItemPermission(t, e, i, n);
            if(t.children && t.children.length > 0)
                for(var r = 0; r < t.children.length; r++) {
                    var a = t.children[r];
                    if(a.children && a.children.length > 0) this.setFolderPermission(a, e, i, !0);
                    else this.setItemPermission(a, e, i, !0)
                }
        },
        folderClick: function(t, e) {
            var i = e.target.checked,
                n = i ? t : parseInt(t) - 1;
            this.setItemPermission(this.data.folder, n, !0, !1);
            for(var r, a = this.data.folder.children, s = 0; s < a.length; s++) {
                r = a[s];
                if(r.parentId == -1 && r.projectId == -1);
                else this.setFolderPermission(r, n, !1, !0)
            }
            if(!i) this.$emit("folderClick", n)
        },
        itemClick: function(t, e, i) {
            var n = e.target.checked,
                r = n ? t : parseInt(t) - 1;
            i.permission = r;
            this.setItemPermission(i, r, !0, !1);
            this.$update()
        }
    });
    return i
}, 7, 599);
I$(265, function(t, e, i, n) {
    var r = Regular.extend({
        name: "r-list-permission",
        template: i,
        config: function(t) {
            this.data.all = this.data.resources.some(function(t) {
                return t.children
            });
            this.data.allPermission = {};
            this.initData()
        },
        init: function(t) {},
        initData: function() {
            for(var t = this.data.resources, e = 0; e < t.length; e++) {
                var i = t[e];
                if(i.parentId == -1 && i.projectId == -1);
                else this.__setInitFolder(i)
            }
        },
        __setChild: function(t, e, i, n) {
            this.setItemPermission(t, e, i, n);
            if(t.isFolder)
                for(var r = 0; r < t.children.length; r++) {
                    var a = t.children[r];
                    this.__setChild(a, e, i, n)
                }
        },
        __setChild2: function(t, e, i, n) {
            if(t.permission > e) {
                e = t.permission;
                t.editSelected = !0;
                t.readSelected = !0;
                t.editDisabled = !1;
                t.readDisabled = !0
            } else this.setItemPermission(t, e, i, n);
            if(t.isFolder)
                for(var r = 0; r < t.children.length; r++) {
                    var a = t.children[r];
                    this.__setChild2(a, e, i, n)
                }
        },
        __setInitFolder: function(t) {
            if(t.isFolder && 3 == t.permission) {
                var e = t.permission;
                this.setItemPermission(t, e, !0);
                for(var i = 0; i < t.children.length; i++) {
                    var n = t.children[i];
                    this.__setChild(n, e, !1, !0)
                }
            } else if(t.isFolder && 2 == t.permission) {
                var e = t.permission;
                this.setItemPermission(t, e, !0);
                for(var i = 0; i < t.children.length; i++) {
                    var n = t.children[i];
                    this.__setChild2(n, e, !1, !0)
                }
            } else {
                var e = t.permission;
                this.setItemPermission(t, e, !0);
                for(var i = 0; i < t.children.length; i++) {
                    var n = t.children[i];
                    if(n.isFolder) this.__setInitFolder(n);
                    else this.setItemPermission(n, n.permission, !0)
                }
            }
        },
        _$getData: function() {
            for(var t = [], e = this.data.resources, i = 0; i < e.length; i++) {
                var n = e[i];
                if(n.parentId == -1 && n.projectId == -1);
                else this.__getData(n, t, 1)
            }
            return t
        },
        __makeData: function(t) {
            var e = {};
            e.id = t.id;
            e.permission = t.permission;
            e.resourceCategory = t.category;
            e.resourceType = t.type;
            e.isFolder = t.isFolder;
            return e
        },
        __getData: function(t, e, i) {
            if(t.permission > i) {
                e.push(this.__makeData(t));
                i = t.permission
            }
            if(t.children && t.children.length > 0)
                for(var n = 0; n < t.children.length; n++) {
                    var r = t.children[n];
                    this.__getData(r, e, t.permission)
                }
        },
        setFolderPermission: function(t, e, i, n) {
            this.setItemPermission(t, e, i, n);
            if(t.children && t.children.length > 0)
                for(var r = 0; r < t.children.length; r++) {
                    var a = t.children[r];
                    if(a.children && a.children.length > 0) this.setFolderPermission(a, e, i, !0);
                    else {
                        a.permission = e;
                        this.setItemPermission(a, e, i, !0)
                    }
                }
        },
        setItemPermission: function(t, e, i, n) {
            t.permission = e;
            if(3 == e) {
                t.editSelected = !0;
                t.readSelected = !0;
                if(!i)
                    if(n) {
                        t.editDisabled = !0;
                        t.readDisabled = !0
                    } else {
                        t.editDisabled = !1;
                        t.readDisabled = !1
                    }
            } else if(2 == e) {
                t.editSelected = !1;
                t.readSelected = !0;
                if(!i)
                    if(n) {
                        t.editDisabled = !1;
                        t.readDisabled = !0
                    } else {
                        t.editDisabled = !1;
                        t.readDisabled = !1
                    }
            } else {
                t.editSelected = !1;
                t.readSelected = !1;
                if(!i) {
                    t.editDisabled = !1;
                    t.readDisabled = !1
                }
            }
        },
        allClick: function(t, e) {
            var i = e.target.checked,
                n = i ? t : parseInt(t) - 1;
            this.setItemPermission(this.data.allPermission, n, !1, !1);
            for(var r, a = this.data.resources, s = 0; s < a.length; s++) {
                r = a[s];
                if(r.parentId == -1 && r.projectId == -1);
                else this.setFolderPermission(r, n, !1, !1)
            }
            this.$update()
        },
        folderClickSignal: function(t) {
            if(this.data.allPermission.permission > t) this.setItemPermission(this.data.allPermission, t, !1, !1)
        }
    });
    return r
}, 7, 6, 454, 455);
I$(94, function(t, e, i, n, r, a, s, o, l, c, u, d, h, f, p, _) {
    var m, g, v, y, b, x, $, w, k;
    p._$$ResourceForm = t._$klass();
    _ = p._$$ResourceForm._$extend(r._$$Abstract);
    var S = a._$parseUITemplate(h),
        C = S["rt"],
        T = S["ritf"],
        E = S["rits"];
    _.__initXGui = function() {
        return function() {
            this.__seed_html = C
        }
    }();
    _.__initNode = function() {
        this.__super();
        var t = e._$getByClassName(this.__body, "j-flag");
        m = t[0];
        g = t[1];
        v = e._$getByClassName(m, "j-tab");
        y = e._$getByClassName(this.__body, "j-tabcontent");
        b = e._$getByClassName(this.__body, "j-table");
        _empty = e._$getByClassName(this.__body, "j-empty")[0];
        i._$addEvent(m, "click", this.__onTabClick._$bind(this));
        i._$addEvent(g, "click", this.__onCntClick._$bind(this));
        i._$addEvent(b[4], "click", this.__onDataConnectionClick._$bind(this))
    };
    _.__reset = function(t) {
        this.__super(t);
        this.__disabled = !!t.disabled;
        this.__permissions = t.permissions || [];
        w = l._$$Role._$allocate();
        w._$addEvent("getResourceList", this.__onGetResourceList._$bind(this));
        w._$getResourceList({
            data: {
                projectId: currentProjectId
            }
        });
        this._cacheDBProtection = new c._$$DBProtection
    };
    _.__showEmpty = function() {
        _empty.style.display = "";
        this.__body.style.display = "";
        m.style.display = "none";
        g.style.display = "none"
    };
    _.__getCategorys = function(t) {
        var e = [];
        n._$forEach(t, function(t) {
            n._$forEach(t, function(t) {
                if(t.permission && 1 != t.permission) {
                    var i = t.category;
                    if(n._$indexOf(e, i) == -1) e.push(t.category)
                }
                if(t.children && t.children.length > 0) n._$forEach(t.children, function(t) {
                    if(t.permission && 1 != t.permission) {
                        var i = t.category;
                        if(n._$indexOf(e, i) == -1) e.push(t.category)
                    }
                })
            })
        });
        return e.sort(function(t, e) {
            return t - e
        })
    };
    _.__resetTab = function() {
        var t = 0;
        t = this.__categorys[0];
        n._$forEach(this.__categorys, function(t) {
            var e;
            3 == t ? e = 0 : "";
            4 == t ? e = 1 : "";
            1 == t ? e = 2 : "";
            2 == t ? e = 3 : "";
            y[e].style.display = "";
            y[e + 4].style.display = "";
            v[e].style.display = ""
        });
        var i = this.__categorys.length;
        e._$delClassName(m, "z-has" + k);
        e._$addClassName(m, "z-has" + i);
        k = i;
        var r = t;
        switch(t) {
            case 3:
                r = 0;
                break;
            case 4:
                r = 1;
                break;
            case 1:
                r = 2;
                break;
            case 2:
                r = 3
        }
        this.__switchTab(r);
        this.__body.style.display = "";
        m.style.display = "";
        g.style.display = ""
    };
    _.__onCntClickForRD = function(t) {
        var n = !1,
            r = i._$getElement(t, "c:j-table"),
            a = (i._$getElement(t, "c:j-input"), e._$dataset(r, "index"));
        if(6 == a || 7 == a) n = !0;
        return n
    };
    _.__onCntClick = function(t) {
        if(x) {
            var r = i._$getElement(t, "c:j-table"),
                a = i._$getElement(t, "c:j-input");
            if(r && a)
                if(!this.__onCntClickForRD(t)) {
                    var s = e._$dataset(r, "index"),
                        o = !0,
                        l = !0,
                        c = function(t) {
                            if(e._$hasClassName(t, "j-child") && e._$hasClassName(t, "j-readable") && !t.checked) l = !1;
                            if(e._$hasClassName(t, "j-child") && e._$hasClassName(t, "j-editable") && !t.checked) o = !1
                        },
                        u = function() {
                            n._$forEach(x[s], function(t, i, n) {
                                if(e._$hasClassName(t, "j-all") && e._$hasClassName(t, "j-editable")) t.checked = o;
                                if(e._$hasClassName(t, "j-all") && e._$hasClassName(t, "j-readable")) t.checked = l
                            })
                        },
                        d = function() {
                            var t = e._$dataset(a, "parentid"),
                                i = [];
                            n._$forEach(x[s], function(n, r, a) {
                                if(e._$dataset(n, "parentid") == t || n.value == t) i.push(n)
                            });
                            var r = !0,
                                o = !0;
                            n._$forEach(i, function(t, i, n) {
                                if(e._$hasClassName(t, "j-child")) {
                                    if(e._$hasClassName(t, "j-editable") && !t.checked) r = !1;
                                    if(e._$hasClassName(t, "j-readable") && !t.checked) o = !1
                                }
                            });
                            n._$forEach(i, function(t, i, n) {
                                if(e._$hasClassName(t, "j-parent") && e._$hasClassName(t, "j-editable")) t.checked = r;
                                if(e._$hasClassName(t, "j-parent") && e._$hasClassName(t, "j-readable")) t.checked = o
                            })
                        },
                        h = function(t, i) {
                            if(e._$hasClassName(t, "j-data")) {
                                var n = e._$dataset(t, "category");
                                if(1 == n || 2 == n) t.disabled = i
                            }
                        };
                    if(e._$hasClassName(a, "j-all"))
                        if(e._$hasClassName(a, "j-editable"))
                            if(a.checked) n._$forEach(x[s], function(t, e, i) {
                                t.checked = !0;
                                h(t, !0)
                            });
                            else n._$forEach(x[s], function(t, i, n) {
                                if(e._$hasClassName(t, "j-editable")) {
                                    t.checked = !1;
                                    h(t, !1)
                                }
                            });
                        else if(a.checked) n._$forEach(x[s], function(t, i, n) {
                            if(e._$hasClassName(t, "j-readable")) {
                                t.checked = !0;
                                h(t, !0)
                            }
                        });
                        else n._$forEach(x[s], function(t, e, i) {
                                t.checked = !1;
                                h(t, !1)
                            });
                    if(e._$hasClassName(a, "j-parent")) {
                        if(e._$hasClassName(a, "j-editable"))
                            if(a.checked) n._$forEach(x[s], function(t, i, n) {
                                if(e._$dataset(t, "parentid") == a.value || t.value == a.value) {
                                    t.checked = !0;
                                    h(t, !0)
                                }
                                c(t)
                            });
                            else n._$forEach(x[s], function(t, i, n) {
                                if(e._$dataset(t, "parentid") == a.value && e._$hasClassName(t, "j-editable")) {
                                    t.checked = !1;
                                    h(t, !1)
                                }
                                c(t)
                            });
                        else if(a.checked) n._$forEach(x[s], function(t, i, n) {
                            if(e._$dataset(t, "parentid") == a.value && e._$hasClassName(t, "j-readable")) {
                                t.checked = !0;
                                h(t, !0)
                            }
                            c(t)
                        });
                        else n._$forEach(x[s], function(t, i, n) {
                                if(e._$dataset(t, "parentid") == a.value || t.value == a.value) {
                                    t.checked = !1;
                                    h(t, !1)
                                }
                                c(t)
                            });
                        u()
                    }
                    if(e._$hasClassName(a, "j-data")) {
                        if(e._$hasClassName(a, "j-editable"))
                            if(a.checked) n._$forEach($[s], function(t, e, i) {
                                if(a.value == t.value) t.checked = !0;
                                c(t)
                            });
                            else n._$forEach($[s], function(t, e, i) {
                                c(t)
                            });
                        else if(a.checked) n._$forEach($[s], function(t, e, i) {
                            c(t)
                        });
                        else n._$forEach($[s], function(t, e, i) {
                                if(a.value == t.value) t.checked = !1;
                                c(t)
                            });
                        var f = e._$dataset(a, "category");
                        if(1 != f && 2 != f) {
                            if(e._$hasClassName(a, "j-child")) d();
                            u()
                        }
                    }
                }
        }
    };
    _.__onTabClick = function(t) {
        var n = i._$getElement(t, "d:index");
        if(n) {
            var r = e._$dataset(n, "index");
            this.__switchTab(r)
        }
    };
    _.__getDetails = function(t) {
        var e, i = this.__dataConnection;
        i.some(function(i) {
            if(i.id == t.id && t.type == i.datasourceType && i.details) {
                e = i.details;
                return !0
            }
        });
        return e
    };
    _.__setDetails = function(t, e) {
        var i = this.__dataConnection;
        return i.some(function(i) {
            if(i.id == t.id && t.type == i.datasourceType) {
                i.details = e;
                return !0
            }
        })
    };
    _.__onDataConnectionClick = function(t) {
        var i = t.target;
        if(e._$hasClassName(i, "j-dtpEdit")) {
            var n = i.getAttribute("value"),
                r = e._$dataset(i, "datasourcetype"),
                a = (e._$getByClassName(t.currentTarget, "j-editable"), this.__getDetails({
                    id: n,
                    type: r
                }));
            if(5 != r) {
                var s = {
                        data: {
                            id: n,
                            details: a,
                            type: r
                        }
                    },
                    l = this,
                    c = new d(s);
                c.toggle().$on("save", function(t) {
                    l.__setDetails({
                        id: n,
                        type: r
                    }, t);
                    l.__onDBProtection(t, n)
                })
            } else o._$message("Kylin类型数据源暂不支持数据权限设置！", "warm")
        }
    };
    _.__onDBProtection = function(t, e) {
        var i = t.map(function(t) {
            return {
                field: t.field,
                tableName: t.tableName
            }
        });
        if(0 != window.dbProtection) this._cacheDBProtection._$dbprotection({
            fields: i,
            dataConnectionId: e
        }).then(function(t) {
            if(200 == t.code) {
                var e = t.result,
                    i = e.tables;
                if(i && i.length > 0) {
                    var n = i.join("、"),
                        r = {
                            data: {
                                title: "提示",
                                hasNote: !0,
                                hideCancel: !0,
                                autoClose: !0,
                                sql: e.sql,
                                prompt: n + "数据量过大，建议您联系数据库管理员在数据库中建立索引"
                            }
                        };
                    new u(r).toggle()
                }
            } else if(750 === t.code) o.messageDetail(t);
            else o._$message(t.message || "数据库保护查询失败！", "err")
        })
    };
    _.__switchTab = function(t) {
        var i = t || 0;
        n._$forEach(y, function(t, n, r) {
            if(i == n || i == n - 4) {
                e._$addClassName(v[n], "z-crt");
                t.style.display = ""
            } else {
                e._$delClassName(v[n], "z-crt");
                t.style.display = "none"
            }
        })
    };
    _.__mergePermissionRD = function(t) {
        if(this.__permissions)
            for(var e = 0; e < t.length; e++) {
                var i = t[e];
                i.permission = 1;
                n._$forEach(this.__permissions, function(t, e, n) {
                    if(t.id == i.id && t.resourceCategory == i.category && t.resourceType == i.type) i.permission = t.permission
                }._$bind(this));
                if(i.children && i.children.length > 0) this.__mergePermissionRD(i.children)
            }
    }, _.__onGetResourceList = function(t) {
        var i = t && t.code;
        if(200 == i) {
            var r = t && t.result;
            r = [r[3], r[4], r[1], r[2]];
            this.__dataConnection = r[0];
            if(this.__permissions) this.__dataConnection.forEach(function(t) {
                n._$forEach(this.__permissions, function(e, i, n) {
                    if(e.id == t.id && e.resourceCategory == t.category && e.details) t.details = e.details
                })
            }._$bind(this));
            n._$forEach(r, function(t, e, i) {
                if(!(e > 1)) n._$forEach(t, function(t, e, i) {
                    t.permission = 1;
                    if(this.__permissions && !t.children) n._$forEach(this.__permissions, function(e, i, n) {
                        if(e.id == t.id && e.resourceCategory == t.category) t.permission = e.permission
                    }._$bind(this));
                    if(t.children && t.children.length > 0) n._$forEach(t.children, function(t, e, i) {
                        t.permission = 1;
                        if(this.__permissions) n._$forEach(this.__permissions, function(e, i, n) {
                            if(e.id == t.id && e.resourceCategory == t.category) t.permission = e.permission
                        }._$bind(this))
                    }._$bind(this));
                    if(this.__permissions && t.children && t.children.length > 0) {
                        t.permission = 3;
                        for(var r, a = 0; a < t.children.length; a++) {
                            var r = t.children[a];
                            if(3 != r.permission) {
                                t.permission = 2;
                                break
                            }
                        }
                        for(var r, a = 0; a < t.children.length; a++) {
                            var r = t.children[a];
                            if(1 == r.permission) {
                                t.permission = 1;
                                break
                            }
                        }
                    }
                }._$bind(this))
            }._$bind(this));
            this.__mergePermissionRD(r[2], this.permission);
            this.__mergePermissionRD(r[3], this.permission);
            if(200 == i) {
                if(this.__disabled) {
                    this.__categorys = this.__getCategorys(r);
                    if(0 == this.__categorys.length) {
                        this.__showEmpty();
                        return
                    }
                } else this.__categorys = [3, 4, 1, 2];
                this.__resetTab();
                s._$render(b[0], T, {
                    resources: r[0],
                    disabled: this.__disabled
                });
                s._$render(b[1], T, {
                    resources: r[1],
                    disabled: this.__disabled
                });
                s._$render(b[2], T, {
                    resources: r[2],
                    disabled: this.__disabled
                });
                s._$render(b[3], T, {
                    resources: r[3],
                    disabled: this.__disabled
                });
                s._$render(b[4], E, {
                    resources: r[0],
                    disabled: this.__disabled
                });
                s._$render(b[5], E, {
                    resources: r[1],
                    disabled: this.__disabled
                });
                this.__rglReport = new f({
                    data: {
                        resources: r[2],
                        disabled: this.__disabled
                    }
                }).$inject(b[6]);
                this.__rglDashboard = new f({
                    data: {
                        resources: r[3],
                        disabled: this.__disabled
                    }
                }).$inject(b[7]);
                x = [];
                $ = [];
                n._$forEach(b, function(t, i, n) {
                    var r = e._$getByClassName(t, "j-res"),
                        a = e._$getByClassName(t, "j-data");
                    x.push(r);
                    $.push(a)
                })
            }
        } else o._$message(t.message || "获取权限资源列表的回调错误！", "err")
    };
    _._$getData = function() {
        var t = e._$getByClassName(g, "j-data"),
            i = [],
            r = [];
        n._$forEach(t, function(t, n, a) {
            if(e._$hasClassName(t, "j-editable")) i.push(t);
            else r.push(t)
        });
        var a = [],
            s = this;
        n._$forEach(i, function(t, i, n) {
            var r = {};
            r.id = t.value;
            r.permission = t.checked ? 3 : 1;
            r.resourceCategory = e._$dataset(t, "category");
            r.resourceType = e._$dataset(t, "type");
            if(3 == r.resourceCategory) {
                var o = e._$dataset(t, "datasourcetype");
                r.details = s.__getDetails({
                    id: r.id,
                    type: o
                })
            }
            a.push(r)
        });
        n._$forEach(r, function(t, i, r) {
            var s = e._$dataset(t, "category");
            n._$forEach(a, function(e, i, n) {
                var r = e.resourceCategory;
                if(t.value == e.id && s == r)
                    if(t.checked && 1 == e.permission) e.permission = 2
            })
        });
        var o = a.filter(function(t) {
            return 3 == t.permission || 2 == t.permission
        });
        o = o.concat(this.__rglReport._$getData());
        o = o.concat(this.__rglDashboard._$getData());
        return o
    };
    _.__recycleUi = function() {
        this.__body.style.display = "none";
        _empty.style.display = "none";
        m.style.display = "none";
        g.style.display = "none";
        n._$forEach(v, function(t) {
            t.style.display = "none"
        });
        n._$forEach(y, function(t) {
            t.style.display = "none"
        })
    };
    _.__destroy = function() {
        o._$recycleWindow();
        this.__super();
        this.__recycleUi();
        b[6].innerHTML = "";
        b[7].innerHTML = "";
        delete this.__rglReport;
        delete this.__rglDashboard
    };
    return p
}, 1, 3, 6, 4, 142, 14, 15, 7, 93, 210, 82, 263, 264, 265);
I$(98, function(t, e, i, n, r, a) {
    r._$$UserRole = t._$klass();
    a = r._$$UserRole._$extend(n._$$Cache);
    a.__doLoadList = function(t) {
        var e = t.onload,
            n = t.data || {};
        i._$request("/api/users/", {
            type: "json",
            data: n,
            onload: function(t) {
                e(200 == t.code ? t.result : null)
            }
        })
    };
    a.__doDeleteItem = function(t) {
        var e = t.onload,
            n = t.data || {};
        i._$request("/api/userRole/0/", {
            method: "delete",
            param: n,
            onload: function(t) {
                e(200 == t.code ? t.result : null)
            }
        })
    };
    a._$deleteAll = function(t) {
        return new Promise(function(e, n) {
            i._$request("/api/userRole/deleteAll", {
                method: "POST",
                type: "json",
                data: t,
                onload: function(t) {
                    if(t && 200 === t.code) e(t);
                    else n(t)
                },
                onerror: n
            })
        })
    };
    a._$getUserRole = function(t) {
        var e = t && t.data;
        i._$request("/api/userRole/0/", {
            method: "get",
            type: "json",
            param: e,
            onload: this._$dispatchEvent._$bind(this, "getUserRole"),
            onerror: this._$dispatchEvent._$bind(this, "getUserRole")
        })
    };
    a._$addUserRole = function(t) {
        var e = t && t.data;
        i._$request("/api/userRole/", {
            method: "post",
            type: "json",
            param: e,
            onload: this._$dispatchEvent._$bind(this, "addUserRole"),
            onerror: this._$dispatchEvent._$bind(this, "addUserRole")
        })
    };
    a._$updateUserRole = function(t) {
        var e = t && t.data;
        i._$request("/api/userRole/0/", {
            method: "put",
            type: "json",
            param: e,
            onload: this._$dispatchEvent._$bind(this, "updateUserRole"),
            onerror: this._$dispatchEvent._$bind(this, "updateUserRole")
        })
    };
    return r
}, 1, 4, 137, 138);
I$(107, function(t, e, i, n, r, a) {
    r._$$RegularMail = t._$klass();
    a = r._$$RegularMail._$extend(n._$$Cache);
    a._$send = function(t) {
        var e = t;
        i._$request("/api/regularMail/send", {
            method: "post",
            type: "json",
            data: e || {},
            onload: this._$dispatchEvent._$bind(this, "send"),
            onerror: this._$dispatchEvent._$bind(this, "send")
        })
    };
    return r
}, 1, 4, 137, 138);
I$(277, '{#if !ready}\n  <div style=\'text-align:center;vertical-align:middle;width:514px;\'>\n    <span class=\'u-load\' style=\'display:inline-block;vertical-align:middle;margin:8px\'></span> <span>正在获取数据... </span>\n  </div>\n{#else}\n<div class="m-cachemail">\n  <div class="col col-1 u-txtwrap" ref="dashboardIds">\n    <label class="lbhd">仪表盘</label>\n    <ul class="ulreplace" ref="group">\n        <r-list-dashboards dashBoard={dashBoard} all={all} on-chooseChange={this.chooseChange()} level={1} on-parentSignal={this.updateAll()}></r-list-dashboards >\n    </ul>\n  </div>\n  <div class="col col-2">\n    <form class="m-form" onsubmit="return false;">\n      <div class="formrow" >\n        <label>邮件名称：</label>\n        <div class="formcnt" >\n          <span class="u-txtwrap" ref="title">\n              <input type="text" class="u-txt"  r-model={regularMail.title} on-blur={this.validate("title")} on-focus={this.hideError("title")} />\n          </span>\n        </div>\n      </div>\n      <div class="formrow" >\n        <label>收件人：</label>\n        <div class="formcnt" >\n          <span class="u-txtwrap" ref="receiverList">\n              <input type="text" class="u-txt" r-model={userStatus.email} r-hide={userStatus.permission==1}  placeholder="输入邮箱地址或@角色名称，以分号间隔" ref="emails" {#if userStatus.permission==2}disabled{/if} />\n          </span>\n        </div>\n      </div>\n      <div class="formrow" >\n        <label>频率：</label>\n        <div class="formcnt">\n          <span class="u-txtwrap" ref="frequency">\n            <select r-model={regularMail.frequency} class="u-txt" >\n              <option value="1" >每天</option>\n              <option value="2" >每周</option>\n              <option value="3" >每月</option>\n            </select>\n          </span>\n        </div>\n      </div>\n      <div class="formrow">\n        <label>日期：</label>\n        <div class="formcnt" >\n          <span class="u-txtwrap" ref="date" on-clickouter={this.setDateShow("outer")}>\n            <div class="u-txt selectIcon" on-click={this.setDateShow()} style=\'background-color: {regularMail.frequency==1 ? "#e2e2e2" : ""};\' >{regularMail.date|toString}</div>\n            <ul class="ulreplace ulrep" r-hide={regularMail.frequency!=2 || !dateShow} >\n              <li>\n                <input type="checkbox" r-model={regularMail.dateMap[0]|isChecked:regularMail.dateMap[0]}>\n                <span>周一</span>\n              </li>\n              <li>\n                <input type="checkbox" r-model={regularMail.dateMap[1]|isChecked:regularMail.dateMap[1]}>\n                <span>周二</span>\n              </li>\n              <li>\n                <input type="checkbox" r-model={regularMail.dateMap[2]|isChecked:regularMail.dateMap[2]}>\n                <span>周三</span>\n              </li>\n              <li>\n                <input type="checkbox" r-model={regularMail.dateMap[3]|isChecked:regularMail.dateMap[3]}>\n                <span>周四</span>\n              </li>\n              <li>\n                <input type="checkbox" r-model={regularMail.dateMap[4]|isChecked:regularMail.dateMap[4]}>\n                <span>周五</span>\n              </li>\n              <li>\n                <input type="checkbox" r-model={regularMail.dateMap[5]|isChecked:regularMail.dateMap[5]}>\n                <span>周六</span>\n              </li>\n              <li>\n                <input type="checkbox" r-model={regularMail.dateMap[6]|isChecked:regularMail.dateMap[6]}>\n                <span>周日</span>\n              </li>\n            </ul>\n            <ul class="ulreplace ulrep" r-hide={regularMail.frequency!=3 || !dateShow} >\n              {#list regularMail.monthMap as mon}\n                <li>\n                  <input type="checkbox" r-model={mon|isChecked:mon}>\n                  <span>{mon|toMonth}</span>\n                </li>\n              {/list}              \n            </ul>\n          </span>\n        </div>\n      </div>\n      <div class="formrow">\n        <label>时间：</label>\n        <div class="formcnt" >\n          <span class="u-txtwrap" ref="time">\n            <input type="text" class="u-txt u-txt-h1" r-model={regularMail.hour} on-input={this.checkHour("hour", 23)} on-change={this.checkChangeHour("hour", 23)}/>&nbsp;:&nbsp;&nbsp;\n            <input type="text" class="u-txt u-txt-h1" r-model={regularMail.minute} on-input={this.checkHour("minute", 59)} on-change={this.checkChangeHour("minute", 59)}/>\n          </span>\n        </div>\n      </div>\n      <div class="formrow">\n      <label>数据：</label>\n      <div class="formcnt">\n        <span class="u-txtwrap">\n          <div class="cash">\n            <input type="radio" r-model={regularMail.cache} value="1" /><span>使用缓存数据</span>\n          </div>\n          <div  class="cash">\n            <input type="radio" r-model={regularMail.cache} value="0" /><span>使用实时数据</span>\n          </div>\n        </span>\n      </div>\n    </div>\n    </form>\n  </div>\n</div>\n{/if}');
I$(278, '<button type="button" on-click={this.confirm(true)} class="u-btn u-btn-1 u-btn-s1 ">{confirmText||\'确定\'}</button>\n<button r-hide={hideCancel} type="button" on-click={this.confirm(false)} class="u-btn u-btn-2 u-btn-s1 ">{cancelText||\'取消\'}</button>\n<button type="button" on-click={this.save(true)} class="u-btn u-btn-2 u-btn-s1">{confirmText||\'立即发送\'}</button> ');
if("undefined" != typeof exports) Validator = require("./validator.js");
var rules = [{
    field: "title",
    rules: [{
        type: "isFilled",
        message: "邮件名称不能为空"
    }, {
        type: "isLength",
        range: {
            min: 1,
            max: 40
        },
        message: "请将项目名称长度限制在40字以内"
    }],
    node: "title"
}, {
    field: "receiverList",
    rules: [{
        type: function(t) {
            return t.length && t.length > 0
        },
        message: "收件人不能为空"
    }],
    node: "receiverList"
}, {
    field: "frequency",
    rules: [{
        type: function(t) {
            return !!t
        },
        message: "频率不能为空"
    }],
    node: "frequency"
}, {
    field: "date",
    rules: [{
        type: function(t) {
            return t.length && t.length > 0
        },
        message: "日期不能为空"
    }],
    node: "date"
}, {
    field: "time",
    rules: [{
        type: "isFilled",
        message: "时间不能为空"
    }],
    node: "time"
}, {
    field: "dashboardIds",
    rules: [{
        type: function(t) {
            return t.length && t.length > 0
        },
        message: "仪表盘的选择不能为空"
    }],
    node: "dashboardIds"
}];
if("undefined" == typeof exports) {
    if("object" != typeof window.bigvizValidateRule) window.bigvizValidateRule = {};
    bigvizValidateRule.regularMail = rules
} else;
I$(108, function(t, e, n, r, a, s, o, l, c, u, d, h, f, p) {
    var f = window.bigvizValidateRule.regularMail,
        _ = a.extend({
            name: "regularmail-modal",
            $body: n,
            $foot: r,
            data: {
                autoRecycleRequest: !1,
                title: "定时邮件",
                rules: f
            },
            config: function(t) {
                this.supr(t);
                this.data.ready = !1;
                this.initData();
                this.initCache();
                this.getDashBoards();
                this.$on("confirm", function(t) {
                    if(t.accept) this.save();
                    else this.destroy()
                });
                this.$watch("regularMail.frequency", function(t, e) {
                    if(e) {
                        this.data.regularMail.date = [];
                        this.hideError("date")
                    }
                });
                this.$watch("regularMail.title", function(t) {
                    if(t) this.hideError("title")
                });
                this.$watch("regularMail.date", function(t) {
                    if(t.length > 0) this.hideError("date")
                })
            },
            init: function() {
                this.supr()
            },
            initData: function(t) {
                if(t) {
                    var e = this.data.regularMail = t;
                    this.initFolder();
                    var i = e.time.split(":");
                    e.hour = i[0];
                    e.minute = i[1];
                    e.dateMap = ["1", "2", "3", "4", "5", "6", "7"];
                    e.monthMap = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32"]
                } else if(!this.data.id) {
                    var e = this.data.regularMail = {};
                    e.dashboardIds = [];
                    e.receiverList = [];
                    e.frequency = 1;
                    e.date = [];
                    e.hour = "00";
                    e.minute = "00";
                    e.cache = 1;
                    e.dateMap = ["1", "2", "3", "4", "5", "6", "7"];
                    e.monthMap = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32"]
                }
                this.data.all = !1
            },
            __initFolders: function(t, e) {
                var i, n, r, a = t.dashboards;
                if(a && a.length > 0)
                    for(i = 0; i < a.length; i++) {
                        n = a[i];
                        r = e.some(function(t) {
                            return t == n.id
                        });
                        n.checked = r
                    }
                var s = t.folders;
                if(s && s.length > 0)
                    for(i = 0; i < s.length; i++) {
                        n = s[i];
                        this.__initFolders(n, e)
                    }
            },
            initFolder: function() {
                for(var t, e = this.data.dashBoard, i = this.data.regularMail.dashboardIds, n = 0; n < e.length; n++) {
                    t = e[n];
                    this.__initFolders(t, i)
                }
                this.updateAll()
            },
            initEmail: function() {
                if(1 == this.data.userStatus.permission && this.__emailsInput) {
                    this.__emailsInput._$clearEmail();
                    var t = this.data.regularMail.receiverList;
                    for(i = 0; i < t.length; i++) this.__emailsInput._$add(t[i])
                }
            },
            gatherData: function() {
                this.gatherDashboardIds();
                this.getReceiverList();
                var t = {},
                    e = this.data.regularMail;
                t.dashboardIds = e.dashboardIds;
                t.title = e.title;
                t.frequency = e.frequency;
                t.date = e.date;
                t.time = e.hour + ":" + e.minute;
                t.cache = e.cache;
                t.receiverList = e.receiverList;
                return t
            },
            getReceiverList: function() {
                var t = [];
                if(1 == this.data.userStatus.permission && this.__emailsInput) t = this.__emailsInput._$getEmails();
                else t.push(this.data.userStatus.email);
                this.data.regularMail.receiverList = t;
                return t
            },
            __gatherDashboardIds: function(t, e) {
                var i, n, r = t.dashboards;
                if(r && r.length > 0)
                    for(i = 0; i < r.length; i++) {
                        n = r[i];
                        if(n.checked) e.push(n.id)
                    }
                var a = t.folders;
                if(a && a.length > 0)
                    for(i = 0; i < a.length; i++) {
                        n = a[i];
                        this.__gatherDashboardIds(n, e)
                    }
            },
            gatherDashboardIds: function() {
                for(var t, e = [], i = this.data.dashBoard, n = 0; n < i.length; n++) {
                    t = i[n];
                    this.__gatherDashboardIds(t, e)
                }
                this.data.regularMail.dashboardIds = e
            },
            detectData: function(t) {
                if(1 != t.frequency) this.keyCheckValidity(t);
                else this.keyCheckValidity(t, ["date"]);
                return !this.hasError()
            },
            save: function(e) {
                var i = this.gatherData();
                i.projectId = this.data.projectId;
                if(this.detectData(i)) {
                    i.projectId = currentProjectId;
                    if(e) {
                        this.__mailCache._$send(i);
                        t.message("正在准备邮件，3分钟内发送", "warm")
                    } else if(this.data.id) {
                        i.id = this.data.id;
                        this.__cache._$updateRegularMail({
                            data: i
                        })
                    } else this.__cache._$addRegularMail({
                        data: i
                    })
                }
            },
            initCache: function() {
                var t = this;
                this.__cache = l._$$DashBoardCache._$allocate();
                this.__cache._$addEvent("getFolders", function(e) {
                    t.__cbGetFolders(e)
                });
                this.__cache._$addEvent("getUserStatus", function(e) {
                    t.__cbGetUserStatus(e)
                });
                this.__cache._$addEvent("getRegularMail", function(e) {
                    t.__cbGetRegularMail(e)
                });
                this.__cache._$addEvent("addRegularMail", function(e) {
                    t.__cbAddRegularMail(e)
                });
                this.__cache._$addEvent("updateRegularMail", function(e) {
                    t.__cbUpdateRegularMail(e)
                });
                this.__mailCache = u._$$RegularMail._$allocate();
                this.__mailCache._$addEvent("send", function(e) {
                    t.__cbSend(e)
                })
            },
            getDashBoards: function() {
                this.data.ready = !1;
                this.__cache._$getFolders({
                    data: {
                        projectId: currentProjectId,
                        type: 1
                    }
                })
            },
            __cbGetFolders: function(e) {
                if(200 == e.code) {
                    this.data.dashBoard = e.result.list;
                    this.__cache._$getUserStatus({
                        data: {
                            projectId: currentProjectId
                        }
                    })
                } else t.message(e.message || "获取仪表盘列表失败！", "err")
            },
            __cbGetUserStatus: function(e) {
                if(200 == e.code) {
                    this.data.userStatus = e.result;
                    if(this.data.id) this.__cache._$getRegularMail({
                        data: {
                            id: this.data.id
                        }
                    });
                    else {
                        if(this.data.dashboardId) {
                            this.data.regularMail.dashboardIds.push(this.data.dashboardId);
                            this.initFolder()
                        }
                        this.data.ready = !0;
                        this.$update();
                        this.__doEmail();
                        if(this.data.dashboardId) this.scrollToItem(this.data.dashboardId)
                    }
                } else t.message(e.message || "获取用户状态失败！", "err")
            },
            scrollToItem: function(t) {
                var e = this.$refs.group,
                    i = e.querySelector('[id^="' + t + '"]'),
                    n = e.scrollTop,
                    r = i.offsetTop;
                if(i) {
                    var a = r - e.offsetHeight;
                    if(a + 30 > n) e.scrollTop = a + 40;
                    else if(n > r) e.scrollTop = r - 10;
                    if(i) return !0;
                    else return
                }
            },
            __doEmail: function() {
                if(1 == this.data.userStatus.permission) {
                    this.__userCache = c._$$User._$allocate({
                        onCheckUserStatus: this.__cbCheckUserStatus._$bind(this)
                    });
                    this.__emailsInput = d._$$Emails._$allocate({
                        isCheckRole: !0,
                        binder: this.$refs.emails,
                        onfocus: this.hideError._$bind(this, "receiverList"),
                        onblur: this.__checkEmails._$bind(this),
                        onchange: this.__checkEmails._$bind(this)
                    });
                    this.initEmail()
                }
            },
            destroy: function() {
                this.__emailsInput && this.__emailsInput.__destroy();
                this.supr()
            },
            __checkEmails: function() {
                this.getReceiverList();
                var t = this.validate("receiverList");
                if(t) {
                    var e = this.getReceiverList();
                    e = e.filter(function(t) {
                        return isNaN(parseInt(t))
                    });
                    if(e.length > 0) this.__userCache._$checkUserStatus({
                        emails: e
                    })
                }
            },
            __cbCheckUserStatus: function(i) {
                if(200 !== i.code) t.message(i.message || "该用户邮件不在系统中！", "err");
                else {
                    var n = i.result,
                        r = this.getReceiverList(),
                        a = e._$getByClassName(this.$refs.receiverList, "j-email");
                    a = a.filter(function(t, e) {
                        return isNaN(parseInt(r[e]))
                    });
                    r = r.filter(function(t) {
                        return isNaN(parseInt(t))
                    });
                    var s = [];
                    n.forEach(function(i, n) {
                        if(0 == i) s.push(t.infoWithNoEmail(r[n]));
                        if(1 != i && 2 != i) e._$addClassName(a[n].parentNode, "email-error")
                    });
                    if(s.length) this.showError("receiverList", this.$refs.receiverList, s.join(" , "))
                }
            },
            __cbGetRegularMail: function(e) {
                if(200 == e.code) {
                    this.initData(e.result);
                    this.data.ready = !0;
                    this.$update();
                    this.__doEmail()
                } else t.message(e.message || "获取定时邮件详情失败!", "err")
            },
            __cbAddRegularMail: function(e) {
                if(200 == e.code) {
                    t.message(e.message || "新增定时邮件成功！", "ok");
                    this.$emit("save");
                    this.destroy()
                } else t.message(e.message || "添加定时邮件失败！", "err")
            },
            __cbUpdateRegularMail: function(e) {
                if(200 == e.code) {
                    t.message(e.message || "更新定时邮件成功！", "ok");
                    this.$emit("save");
                    this.destroy()
                } else t.message(e.message || "更新定时邮件失败！", "err")
            },
            setDateShow: function(t) {
                if(t) this.data.dateShow = !1;
                else this.data.dateShow = !this.data.dateShow
            },
            checkHour: function(t, e) {
                var i = this.data.regularMail[t],
                    n = "00";
                if(i.length > 2) i = n;
                var r = /^\d*$/;
                if(!r.test(i)) i = n;
                else if(i > e) i = n;
                this.data.regularMail[t] = i
            },
            checkChangeHour: function(t, e) {
                var i = this.data.regularMail[t],
                    n = "00";
                if("" == i.trim()) i = n;
                else if(1 == i.length) i = "0" + i;
                this.data.regularMail[t] = i
            },
            __cbSend: function(e) {
                if(200 == e.code);
                else t.message(e.message || "发送失败！", "err")
            },
            chooseChange: function() {
                this.hideError("dashboardIds")
            },
            getFolderChecked: function(t) {
                var e, i, n, r = !0,
                    a = t.dashboards;
                if(a && a.length > 0)
                    for(e = 0; e < a.length; e++) {
                        i = a[e];
                        if(!i.checked) r = !1
                    }
                var s = t.folders;
                if(s && s.length > 0)
                    for(e = 0; e < s.length; e++) {
                        i = s[e];
                        n = this.getFolderChecked(i);
                        i.checked = n;
                        if(!n) r = !1
                    }
                if(!(a && 0 != a.length || s && 0 != s.length)) r = t.checked;
                return r
            },
            updateAll: function() {
                var t, e, i = this.data.dashBoard,
                    n = !0;
                if(i && i.length > 0)
                    for(var r = 0; r < i.length; r++) {
                        t = i[r];
                        e = this.getFolderChecked(t);
                        t.checked = e;
                        if(!e) n = !1
                    }
                this.data.all = n;
                this.$update()
            }
        }).filter({
            isChecked: {
                get: function(t) {
                    var e = this.data.regularMail.date;
                    return e.some(function(e) {
                        return e == t
                    })
                },
                set: function(t, e) {
                    var i = this.data.regularMail.date;
                    if(!t) {
                        var n, r = i.some(function(t, i) {
                            n = i;
                            return t == e
                        });
                        if(r) i.splice(n, 1)
                    } else {
                        i.push(e);
                        i.sort()
                    }
                    return e
                }
            },
            toString: {
                get: function(t) {
                    var e = this.data.regularMail.frequency,
                        i = [];
                    if(2 == e) i = t.map(function(t) {
                        switch(t + "") {
                            case "1":
                                return "周一";
                            case "2":
                                return "周二";
                            case "3":
                                return "周三";
                            case "4":
                                return "周四";
                            case "5":
                                return "周五";
                            case "6":
                                return "周六";
                            case "7":
                                return "周日"
                        }
                    });
                    else if(3 == e) i = t.map(function(t) {
                        if(32 == t) return "最后一天";
                        else return t
                    });
                    return i.join(";")
                },
                set: function(t) {
                    return t
                }
            },
            toMonth: {
                get: function(t) {
                    return 32 == t ? "最后一天" : t
                },
                set: function(t) {
                    return t
                }
            }
        }).implement(h.Error).implement(h.RegularMailError);
    return _
}, 7, 3, 277, 278, 185, 135, 177, 53, 9, 107, 102, 257, 279, 280);
I$(411, '<div class="head">\n\t<h2>{titleName}</h2>\n\t<span class="menu menu-click">\n\t\t{#if addPermission === 3 }\n\t\t\t{#if sorting}\n\t\t\t<a href="javascript:;" class="u-btn u-btn-sort" on-click={this.sortDone()}>完成排序</a>\n\t\t\t{#else}\n\t\t\t<i class="icon u-icn u-icn-add3 icon-clr"  title="新建{titleName}" on-click={this.addReportWhole()}></i>\n\t\t\t<i class="icon u-icn u-icn-more" title="更多操作" on-click={menu1Show = !menu1Show}></i>\n\t\t\t<ul class="u-menu u-menu-auto u-menu-right u-menu-sm" on-clickouter={[menu1Show = false]} r-hide={!menu1Show}>\n\t\t\t\t<li on-click={this.addFolder()}><i class="u-icn u-icn-add4"></i>新建文件夹</li>\n\t\t\t\t{#if sortable }\n\t\t\t\t<li on-click={this.sort()}><i class="u-icn u-icn-move" title="排序"></i>手动排序</li>\n\t\t\t\t{/if}\n\t\t\t</ul>\n\t\t\t{/if}\n\t\t{/if}\n\t</span>\n</div>\n');
I$(578, "{#if subtitle}\n    <h2>{subtitle}</h2>\n{/if}\n<div class=\"list-wrap\" id='list-wrap' ref=listwrap>\n    <r-folder-list folders={list} state={state} type={type} level=1 ref=folderList></r-folder-list>\n</div>\n{#if this.$rename}\n    {#inc this.$rename}\n{/if}\n");
I$(579, '<button type="button" on-click={this.newFolder()} class="u-btn u-btn-1 u-btn-s1 f-fl" style="max-width:85px;" r-class="\'z-dis\': state.currentLevel > LEVEL_MAX || state.pickedFolder.addPermission != 3 || state.pickedFolder.id == -1">新建文件夹</button>\n<button type="button" on-click={this.confirm(false)} class="u-btn u-btn-2 u-btn-s1 f-fr">{cancelText||"取消"}</button>\n<button type="button" on-click={this.confirm(true)} class="u-btn u-btn-1 u-btn-s1 f-fr">{confirmText|| "确定"}</button>\n');
I$(706, '<ul class="m-list-folder">\n\n{#if parentFolder && state.pickedFolder.id == parentFolder.id && state.add && state.currentLevel <= LEVEL_MAX}\n<li class="folder-input">\n  <i class="icon u-icn u-icn-openfolder icon1" title="文件夹"></i>\n  <span class="u-txtwrap">\n    <input type="text" ref=name r-model=name on-keydown={this.keydown($event)} class="u-txt" placeholder="请输入文件夹名称" autocomplete="off" on-focus={this.hideErr(\'name\')}>\n  </span>\n  <i class="icon u-icn u-icn-gou btn btn-gou j-btn-gou" on-click={this.addFolder()}></i>\n  <i class="icon u-icn u-icn-close btn btn-close" on-click={state.add = false}></i>\n</li>\n{/if}\n{#list folders as folder}\n\n{#if state.initFolder.id != -1}\n    {#if folder.id != -1 && folder.addPermission == 3}\n      <li >\n        <h4 class="{state.pickedFolder.id === folder.id ? \'z-crt j-autoScroll-1\':\'\'}" on-click={this.pick(folder)} title="{folder.name}">{folder.name}</h4>\n        <i class="icon u-icn u-icn-openfolder icon1" title="文件夹"></i>\n        <r-folder-list folders={folder.folders} type={type} state={state} parentFolder={folder} level={nextLevel}></r-folder-list>\n      </li>\n     {/if}\n{#else}\n    {#if folder.id == -1 || folder.addPermission == 3}\n      <li >\n        <h4 class="{state.pickedFolder.id === folder.id ? \'z-crt j-autoScroll-1\':\'\'}" on-click={this.pick(folder)} title="{folder.name}">{folder.name}</h4>\n        <i class="icon u-icn u-icn-openfolder icon1" title="文件夹"></i>\n        <r-folder-list folders={folder.folders} type={type} state={state} parentFolder={folder} level={nextLevel}></r-folder-list>\n      </li>\n     {/if}\n\n{/if}\n\n{/list}\n</ul>\n');
I$(580, function(t, e, i, n) {
    var r = i.cache,
        a = n.cacheDash,
        s = Regular.extend({
            name: "r-folder-list",
            template: e,
            data: {
                type: 0,
                ttt: 123
            },
            config: function(t) {
                t.errMsg = {};
                t.nextLevel = +t.level + 1;
                t.LEVEL_MAX = n.LEVEL_MAX;
                this.$watch("state.add", function(e) {
                    if(e && t.parentFolder && t.state.pickedFolder.id == t.parentFolder.id)
                        if(t.state.currentLevel > t.LEVEL_MAX + 1) t.state.add = !1;
                        else setTimeout(function() {
                            var t = this.$refs.name;
                            t.focus()
                        }.bind(this), 10)
                })
            },
            init: function() {},
            keydown: function(t) {
                clearTimeout(this.tid);
                this.tid = setTimeout(function() {
                    if(13 === t.event.keyCode) this.addFolder()
                }.bind(this), 10)
            },
            pick: function(t) {
                var e = this.data;
                e.state.pickedFolder = t;
                e.state.currentLevel = +e.level
            },
            addFolder: function() {
                var e = this.data;
                if(this.validate("name", e.name)) {
                    var i = {
                        name: e.name,
                        projectId: currentProjectId,
                        type: e.type,
                        parentId: e.parentFolder.id
                    };
                    if(0 == e.type) var n = r._$addFolder(i);
                    else var s = {
                            data: i
                        },
                        n = a._$addFolder(s);
                    n.then(function(e) {
                        if(200 == e.code) this.cbAdd(e.result);
                        else t.message(e.message)
                    }.bind(this), this.cbErr.bind(this))
                }
            },
            cbAdd: function(t) {
                var e = this.data,
                    i = t;
                e.folders = e.folders || [];
                e.folders.unshift(i);
                e.name = "";
                e.state.pickedFolder = i;
                e.state.currentLevel += 1;
                e.state.add = !1;
                this.$update()
            },
            validate: function(e, i) {
                var n = this.data,
                    r = this.$refs[e].parentNode;
                if(void 0 == i) i = "";
                i = i.trim();
                if(!i || !i.length) {
                    n.errMsg[e] = t.errMsg("文件夹名不能为空", r);
                    return !1
                } else if(i.length > 40) {
                    n.errMsg[e] = t.errMsg("文件夹名不能超过40个字符", r);
                    return !1
                }
                return !0
            },
            cbErr: function(e) {
                t.message(e.message)
            },
            hideErr: function(t) {
                var e = this.data,
                    i = e.errMsg[t];
                if(i) {
                    i._$recycle();
                    delete e.errMsg[t]
                }
            }
        });
    return s
}, 7, 706, 34, 49);
I$(412, function(t, e, i, n, r, a, s, o) {
    var l = (i.cache, s.extend({
        $body: r,
        $foot: a,
        data: {
            type: 0,
            title: "新建文件夹",
            autoClose: !1,
            autoRecycleRequest: !1,
            className: "m-window-modal-folderlist"
        },
        config: function(i) {
            this.supr(i);
            var r = [{
                folders: i.list,
                name: "全部文件夹",
                id: 0,
                open: !0,
                addPermission: 3
            }];
            i.list = r;
            i.state = i.state || {};
            var a = function() {
                if("新建文件夹" === this.type) return r[0];
                if(r[0].folders && 0 !== r[0].folders.length) return r[0].folders[0];
                else return r[0]
            }.bind(this)();
            i.state.pickedFolder = i.state.pickedFolder || a;
            i.state.initFolder = i.state.initFolder || t.assign({}, i.state.pickedFolder);
            i.state.currentLevel = i.state.currentLevel || 1;
            i.LEVEL_MAX = n.LEVEL_MAX;
            this.$watch("state.pickedFolder", function(t, e) {
                if(e && t.id !== e.id) i.state.add = !1
            });
            this.$on("confirm", function(n) {
                if(n.accept) {
                    if("新建文件夹" == this.type) {
                        var r = document.querySelector(".j-btn-gou");
                        if(r) e._$dispatchEvent(r, "click");
                        else {
                            if(this.cbOk) this.cbOk();
                            this.destroy()
                        }
                        return
                    }
                    if(!i.state.pickedFolder) {
                        t.message("请选择文件夹", "warm");
                        return
                    }
                    if(0 == i.state.pickedFolder.id) {
                        t.message("不能保存在‘全部文件夹’，请选择其他文件夹", "warm");
                        return
                    }
                    if(this.cbOk) this.cbOk(i.state.pickedFolder);
                    this.destroy()
                } else {
                    if(this.cbCancel) this.cbCancel();
                    this.destroy()
                }
            }.bind(this))
        },
        init: function() {
            this.supr()
        },
        autoScroll: function() {
            if(t) clearTimeout(t);
            var t = setTimeout(function() {
                var t = document.querySelector(".j-autoScroll-1");
                if(t) {
                    for(var e = t.parentNode, i = 0;
                        "list-wrap" !== e.id;) {
                        if("LI" == e.nodeName) i += e.offsetTop;
                        e = e.parentNode
                    }
                    var n = i - this.$refs.listwrap.scrollTop;
                    if(n < 0 || n > 288) this.$refs.listwrap.scrollTop = i - 160
                }
            }.bind(this), 100)
        },
        save: function() {},
        newFolder: function() {
            var e = this.data;
            if(!(e.state.currentLevel > e.LEVEL_MAX || 3 != e.state.pickedFolder.addPermission || e.state.pickedFolder.id == -1))
                if(e.state.pickedFolder)
                    if(e.state.pickedFolder.id != -1) {
                        e.state.add = !0;
                        this.autoScroll()
                    } else t.message("私有文件夹下不能新建文件夹", "warm");
                else t.message("在哪个文件下新建，请选择", "warm")
        }
    }));
    return l
}, 7, 6, 34, 49, 578, 579, 185, 580);
I$(581, '<!-- 添加搜索 -->\n<div class="u-search u-search-2">\n\t<label for="keywords"><i class="u-icn u-icn-search"></i></label>\n\t<input id=\'keywords\' placeholder="请输入关键字搜索" r-model=\'search\' ref=\'input\'>\n\t<i class="u-icn u-icn-clear" r-hide="{!search || search.length === 0}" on-click={this.clear()} ></i>\n</div>\n<div class="list-wrap">\n    <ul class="m-list-folder" r-class={ {"m-load":loading} }  ref=folderList>\n        <li class="u-load" r-hide={!loading}></li>\n        {#list list as model}\n        <li class="folder" on-click="{this.pick(model)}" r-hide={model.hide}>\n            <i class="icon u-icn u-icn-data icon1"></i>\n            <h4 title="{model.name}" {#if !model.available}style="color:#aaa;"{/if}>{model.name}</h4>\n        </li>\n        {/list}\n    </ul>\n\n</div>\n');
I$(413, function(t, e, i, n) {
    var r = e.cache,
        a = n.extend({
            $body: i,
            data: {
                title: "新建报表-选择数据模型",
                needFoot: !1,
                autoClose: !0,
                autoRecycleRequest: !1,
                className: "m-window-modal-folderlist m-window-modal-folderlist-1"
            },
            config: function(t) {
                this.supr(t);
                t.loading = !0;
                r._$getDataSourceList({
                    projectId: currentProjectId,
                    skip: 0,
                    limit: 0,
                    slim: !0
                }).then(function(e) {
                    if(200 == e.code) {
                        t.loading = !1;
                        t.list = e.result.list;
                        this.$update()
                    }
                }.bind(this), this.cbErr.bind(this));
                this.$on("confirm", function(t) {
                    if(!t.accept) {
                        if(this.cbCancel) this.cbCancel();
                        this.destroy()
                    }
                }.bind(this));
                this.$watch("search", function(t, e) {
                    this.checkInput(t)
                })
            },
            init: function() {
                this.supr();
                var t = this.$refs.input;
                if(t) setTimeout(function() {
                    t.focus()
                }, 10)
            },
            pick: function(e) {
                var i = this.data;
                if(e.available) r._$addReport({
                    dataModelId: e.id,
                    folderId: i.fid,
                    projectId: currentProjectId
                }).then(function(e) {
                    if(200 === e.code) window.location.href = "/report/edit?pid=" + currentProjectId + "&rid=" + e.result;
                    else t.message(e.message)
                }, this.cbErr.bind(this));
                else t.message("数据尚未准备完毕，不可新建报表", "ok")
            },
            cbErr: function(e) {
                t.message(e.message)
            },
            checkInput: function(t) {
                var e = this.data,
                    i = (e.search || "").toLowerCase();
                clearTimeout(this.tid);
                this.tid = setTimeout(function() {
                    if("" !== t && void 0 !== t) {
                        e.list.forEach(function(t) {
                            var e = (t.name || "").toLowerCase();
                            t.hide = !1;
                            var n = e.indexOf(i);
                            if(n == -1) t.hide = !0
                        });
                        this.$update()
                    } else {
                        this.clear();
                        this.$update()
                    }
                }.bind(this), 300)
            },
            clear: function() {
                var t = this.data;
                t.search = "";
                t.list.forEach(function(t) {
                    t.hide = !1
                });
                this.$refs.input.focus()
            }
        });
    return a
}, 7, 34, 581, 185);
I$(582, '<h3 class="winlab">文件夹名称:</h3>\n<span class="u-txtwrap">\n<input type="text" class="u-txt" r-model=name ref=name on-focus={this.hideErr(\'name\')} placeholder="{placeholder}" autocomplete="off">\n</span>\n');
I$(414, function(t, e, i, n, r) {
    var a = e.cache,
        s = i.cacheDash,
        o = r.extend({
            $body: n,
            data: {
                autoClose: !1,
                title: "新建文件夹",
                autoRecycleRequest: !1,
                placeholder: "",
                className: "m-window-modal-1",
                type: 0
            },
            config: function(t) {
                this.supr(t);
                t.errMsg = {};
                this.$watch("name", function(t) {
                    t = t.trim();
                    this.validate("name", t)
                });
                this.$on("confirm", function(t) {
                    if(t.accept) this.save();
                    else this.destroy()
                }.bind(this))
            },
            init: function() {
                this.supr();
                setTimeout(function() {
                    if(this.$refs.name) this.$refs.name.focus()
                }.bind(this), 100)
            },
            save: function() {
                var e = this.data;
                if(this.validate("name", e.name)) {
                    var i = {
                        name: e.name,
                        projectId: currentProjectId,
                        type: e.type,
                        parentId: e.fid
                    };
                    if(0 == e.type) var n = a._$addFolder(i);
                    else var r = {
                            data: i
                        },
                        n = s._$addFolder(r);
                    n.then(function(i) {
                        if(200 == i.code) {
                            var n = i.result;
                            this.cbAdd(n);
                            this.destroy()
                        } else e.errMsg["name"] = t.errMsg(i.message, this.$refs["name"].parentNode)
                    }.bind(this), this.cbErr.bind(this))
                }
            },
            hideErr: function(t) {
                var e = this.data,
                    i = e.errMsg[t];
                if(i) {
                    i._$recycle();
                    delete e.errMsg[t]
                }
            },
            cbErr: function(e) {
                t.message(e.message)
            },
            validate: function(e, i) {
                var n = this.data,
                    r = this.$refs[e].parentNode;
                if(!i || !i.length) {
                    n.errMsg[e] = t.errMsg("文件夹名不能为空", r);
                    return !1
                } else if(i.length > 40) {
                    n.errMsg[e] = t.errMsg("文件夹名不能超过40个字符", r);
                    return !1
                }
                return !0
            }
        });
    return o
}, 7, 34, 49, 582, 185);
I$(222, function(t, e, i, n, r) {
    var a = Regular.extend({
        name: "r-menu-1",
        template: e,
        config: function(t) {
            if(1 == t.type) t.titleName = "仪表盘";
            else if(0 == t.type) t.titleName = "报表"
        },
        init: function() {},
        addReportWhole: function() {
            var t = this.data;
            new i({
                data: {
                    title: "新建" + t.titleName + "-选择保存的文件夹",
                    list: this.data.list,
                    type: t.type
                },
                cbOk: this.pickFolderOK.bind(this),
                cbCancel: this.update.bind(this)
            }).show()
        },
        pickFolderOK: function(t) {
            var e = this.data;
            if(0 == e.type) new n({
                data: {
                    fid: t.id
                },
                cbCancel: this.update.bind(this)
            }).show();
            else if(1 == e.type) location.hash = "#/m/dashboard/config/?fid=" + t.id
        },
        update: function() {
            this.$update()
        },
        addFolder: function() {
            var t = this.data;
            t.menu1Show = !1;
            new i({
                data: {
                    title: "新建文件夹",
                    list: t.list,
                    type: t.type
                },
                type: "新建文件夹",
                cbOk: this.update.bind(this),
                cbCancel: this.update.bind(this)
            }).show()
        },
        sort: function() {
            var t = this.data;
            t.sorting = !0;
            t.menu1Show = !1;
            this.$emit("sort", {
                sorting: !0
            })
        },
        sortDone: function() {
            var t = this.data;
            t.sorting = !1;
            this.$emit("sort", {
                sorting: !1
            })
        }
    });
    return a
}, 7, 411, 412, 413, 414);
I$(584, '<div style="margin-top:20px;">\n\t<h3 class="winlab">{typeName}名称:</h3>\n\t<span class="u-txtwrap">\n\t    <input ref=rename type="text" class="u-txt" r-model="rename" autocomplete="off" on-focus={this.hideErr(\'rename\')} />\n\t</span>\n</div>\n');
I$(417, function(t, e, i, n, r) {
    var a = e.cache,
        s = i.cacheDash,
        o = r.extend({
            $rename: n,
            data: {
                type: 0,
                autoClose: !1,
                title: "复制报表",
                autoRecycleRequest: !1,
                className: "m-window-modal-folderlist"
            },
            config: function(e) {
                this.supr(e);
                if(0 == e.type) e.typeName = "报表";
                else e.typeName = "仪表盘";
                if(e.state.pickedFolder.id == -1)
                    if(!e.state.pickedReport.copyToPub) e.list = [e.state.pickedFolder];
                this.$off("confirm");
                this.$on("confirm", function(t) {
                    if(t.accept) this.save();
                    else {
                        if(this.cbCancel) this.cbCancel();
                        this.destroy()
                    }
                }.bind(this));
                if(0 == e.type) var i = a._$getCopyName({
                    reportId: e.state.pickedReport.id
                });
                else var i = s._$getCopyName({
                    dashboardId: e.state.pickedReport.id
                });
                i.then(function(t) {
                    if(200 === t.code) {
                        e.rename = t.result;
                        this.$update()
                    }
                }.bind(this), function(e) {
                    t.message(e.message)
                })
            },
            init: function() {
                this.supr();
                var t = this.$refs.rename;
                this.data;
                if(t) Regular.dom.on(t, "keydown", function(t) {
                    this.checkInput(t)
                }.bind(this));
                this.autoScroll()
            },
            checkInput: function(t) {
                if("13" == t.event.keyCode) {
                    t.preventDefault();
                    this.save()
                }
            },
            save: function() {
                var e, i, n = this.data,
                    r = n.state.pickedFolder,
                    o = n.state.pickedReport;
                if(r)
                    if(0 != r.id) {
                        if(this.validate("rename", n.rename)) {
                            if(0 == n.type) {
                                e = {
                                    reportId: o.id,
                                    folderId: r.id,
                                    title: n.rename
                                };
                                i = a._$copy(e)
                            } else {
                                e = {
                                    did: o.id,
                                    fid: r.id,
                                    name: n.rename
                                };
                                i = s._$copy(e)
                            }
                            i.then(function(e) {
                                if(200 == e.code) {
                                    e.result.copyPermission = 3;
                                    if(0 == n.type) r.reports.unshift(e.result);
                                    else r.dashboards.unshift(e.result);
                                    if(this.cbOk) this.cbOk(e.result);
                                    this.destroy()
                                } else t.message(e.message)
                            }.bind(this), this.cbErr.bind(this))
                        }
                    } else t.message("不能保存在‘全部文件夹’，请选择其他文件夹", "warm");
                else t.message("请选择文件夹", "warm")
            },
            validate: function(e, i) {
                var n = this.data;
                n.errMsg = n.errMsg || {};
                var r = this.$refs[e].parentNode;
                if(!i || !i.length) {
                    n.errMsg[e] = t.errMsg("报表名不能为空", r);
                    return !1
                } else if(i.length > 40) {
                    n.errMsg[e] = t.errMsg("报表名不能超过40个字符", r);
                    return !1
                }
                return !0
            },
            hideErr: function(t) {
                var e = this.data;
                e.errMsg = e.errMsg || {};
                var i = e.errMsg[t];
                if(i) {
                    i._$recycle();
                    delete e.errMsg[t]
                }
            },
            cbErr: function(e) {
                t.message(e.message)
            }
        });
    return o
}, 7, 34, 49, 584, 412);
I$(583, '<h3 class="winlab">重命名:</h3>\n<span class="u-txtwrap">\n<input type="text" class="u-txt" r-model=name ref=name on-focus={this.hideErr(\'name\')} placeholder="{placeholder}" autocomplete="off">\n</span>\n');
I$(416, function(t, e, i, n) {
    var r = (e.cache, n.extend({
        $body: i,
        data: {
            autoClose: !1,
            title: "重命名文件夹",
            autoRecycleRequest: !1,
            placeholder: "",
            className: "m-window-modal-1"
        },
        config: function(t) {
            this.supr(t);
            t.errMsg = {};
            this.$watch("name", function(t) {
                t = t.trim();
                this.validate("name", t)
            });
            this.$on("confirm", function(t) {
                if(t.accept) this.save();
                else this.destroy()
            }.bind(this))
        },
        init: function() {
            this.supr();
            setTimeout(function() {
                if(this.$refs.name) this.$refs.name.focus()
            }.bind(this), 100)
        },
        save: function() {
            var t = this.data;
            if(this.validate("name", t.name)) {
                this.callback(t.name);
                this.destroy()
            }
        },
        hideErr: function(t) {
            var e = this.data,
                i = e.errMsg[t];
            if(i) {
                i._$recycle();
                delete e.errMsg[t]
            }
        },
        validate: function(e, i) {
            var n = this.data,
                r = this.$refs[e].parentNode;
            if(!i.length) {
                n.errMsg[e] = t.errMsg("文件夹名不能为空", r);
                return !1
            } else if(i.length > 40) {
                n.errMsg[e] = t.errMsg("文件夹名不能超过40个字符", r);
                return !1
            }
            return !0
        }
    }));
    return r
}, 7, 34, 583, 185);
I$(585, "{msg}\n");
I$(418, function(t, e, i, n) {
    var r = (e.cache, n.extend({
        $body: i,
        data: {
            autoRecycleRequest: !1
        },
        config: function(t) {
            this.supr(t);
            this.$on("confirm", function(t) {
                if(t.accept) {
                    this.callback();
                    this.destroy()
                } else this.destroy()
            }.bind(this))
        },
        init: function() {
            this.supr();
            if(this.$refs.winbd) this.$refs.winbd.className += " wtxc"
        }
    }));
    return r
}, 7, 34, 585, 185);
I$(419, function(t, e) {
    function i(t) {
        t = "" + t;
        return t.length <= 1 ? "0" + t : t
    }
    var n = Regular.dom,
        r = "ontouchstart" in document,
        a = ReDnd.Dragable.extend({
            name: "dragable-item",
            getPlaceholder: function(t, e) {
                if(e.sorting) {
                    var i = e.key;
                    t = document.createElement("div");
                    t.className = "u-item u-item-drag u-item-" + (i.isFolder ? "folder" : "item");
                    var n = document.createElement("h6");
                    t.style.width = "150px";
                    n.innerHTML = i.isFolder ? i.name : i.title || i.name;
                    t.appendChild(n);
                    return t
                }
            },
            validate: function(t) {
                function e(t, i) {
                    for(var n, r = !0, a = 0; a < t.length; a++) {
                        n = t[a];
                        if(n.id == i) {
                            r = !1;
                            return r
                        }
                        if(n.folders && n.folders.length > 0) {
                            r = e(n.folders, i);
                            if(!r) return r
                        }
                    }
                    return r
                }
                if(!this.data.sorting) return !1;
                var i = this.data.key,
                    n = t.split("_");
                if(n[0] == -1 || i.id == -1 || i.folderId == -1) return !1;
                if(i.isFolder)
                    if(i.id == n[0] && "folder" == n[1] || "item" == n[1]) return !1;
                    else if(i.folders && i.folders.length > 0) return e(i.folders, n[0]);
                    else return !0;
                else if(i.id == n[0] && "item" == n[1]) return !1;
                else return !0
            },
            config: function(t) {
                this.supr(t);
                this.$on({
                    dragstart: function() {
                        n.addClass(document.body, "z-drag")
                    },
                    dragend: function() {
                        n.delClass(document.body, "z-drag")
                    }
                });
                this.$on("dragend", function() {
                    if(a.to) n.delClass(a.to, "dropable-active")
                });
                this.$on("dragmove", function(t) {
                    var i = this.placeholder;
                    if(i) {
                        var r = t.drag,
                            s = r.drop;
                        if(!t.drop) {
                            if(s && e.TARGET_PILL.test(s.data.name)) n.addClass(i, "u-item-invalid");
                            if(a.to) n.delClass(a.to, "dropable-active")
                        } else {
                            n.delClass(i, "u-item-invalid");
                            var o = t.drop.node;
                            if(o) {
                                if(a.to) n.delClass(a.to, "dropable-active");
                                a.to = o;
                                n.addClass(o, "dropable-active")
                            }
                        }
                    }
                })
            }
        });
    Regular.implement({
        mtype: function(t) {
            return t ? t.split(":")[0] : t
        },
        consts: e,
        isDate: t.isDate
    }).event("enter", function(t, e) {
        function i(t) {
            if(13 === t.which) {
                t.preventDefault();
                e(t)
            }
        }
        n.on(t, "keypress", i);
        return function() {
            n.off(t, "keypress", i)
        }
    });
    var s = {
            yyyy: function(t) {
                return t.getFullYear()
            },
            MM: function(t) {
                return i(t.getMonth() + 1)
            },
            dd: function(t) {
                return i(t.getDate())
            },
            HH: function(t) {
                return i(t.getHours())
            },
            mm: function(t) {
                return i(t.getMinutes())
            },
            ss: function(t) {
                return i(t.getSeconds())
            }
        },
        o = new RegExp(Object.keys(s).join("|"), "g");
    Regular.filter("format", function(t, e) {
        e = e || "yyyy-MM-dd HH:mm:ss";
        t = new Date(t);
        return e.replace(o, function(e) {
            return s[e] ? s[e](t) : ""
        })
    });
    Regular.filter({
        num: {
            set: function(t) {
                var t = parseFloat(t, 10);
                if(isNaN(t)) t = "";
                return t
            },
            get: function(t) {
                if("number" != typeof t) return "";
                else return "" + t
            }
        },
        null: function(t) {
            return null === t ? "null" : t
        },
        float: {
            set: function() {
                value = value.replace(/[^-\d\.]/g, "")
            },
            get: function(t) {
                return t
            }
        },
        ptext: t.ptext,
        pid: t.pid,
        aggregator: t.aggregator,
        upper: function(t) {
            return t && t.replace(/^(\w)/, function(t) {
                    return t.toUpperCase()
                })
        },
        lower: function(t) {
            return "string" == typeof t ? t.replace(/^(\w)/g, function(t) {
                return t.toLowerCase()
            }) : t
        },
        lowercase: function(t) {
            return "string" == typeof t ? t.replace(/[A-Z]/g, function(t) {
                return t.toLowerCase()
            }) : t
        }
    });
    Regular.event("clickouter", function() {
        var t = [],
            e = function(e) {
                if(t.length) t.forEach(function(t) {
                    if("function" == typeof t) t(e)
                })
            },
            i = function(t) {
                return function(e) {
                    return e !== t && !t.contains(e)
                }
            };
        return function(a, s) {
            function o(t) {
                if(l(t.target)) s(t)
            }
            var l = i(a),
                c = t.length;
            t.push(o);
            if(!c) setTimeout(function() {
                n.on(document, !r ? "mousedown" : "touchstart", e)
            }, 10);
            return function() {
                var i = t.indexOf(o);
                if(~i) t.splice(i, 1);
                if(!t.length) n.off(document, !r ? "mousedown" : "touchstart", e)
            }
        }
    }())
}, 7, 136, 35, 173);
I$(420, function(t, e) {
    var i = ReDnd.util,
        n = Regular.dom,
        r = document.compareDocumentPosition ? function(t, e) {
            if(!t.compareDocumentPosition || !e.compareDocumentPosition) return 0;
            else return 4 & t.compareDocumentPosition(e) ? -1 : t === e ? 0 : 1
        } : function(t, e) {
            if(!t.sourceIndex || !e.sourceIndex) return 0;
            else return t.sourceIndex - e.sourceIndex
        };
    ReDnd.Dropable.extend({
        name: "dropable-item",
        config: function(t) {
            this.supr(t);
            this.drags = [];
            this.$on("add_drag", function(t) {
                var e = this;
                this.addDrag(t);
                t.$on("$destroy", function() {
                    e.delDrag(t)
                })
            })
        },
        init: function() {
            this.supr();
            var t = this.data,
                e = [],
                r = [],
                a = t.range || 8;
            this.$on("dragenter", function() {
                var t = this.drags,
                    n = this.offset;
                e = [];
                t.forEach(function(t) {
                    e.push(i.getDimension(t.node))
                });
                r = e.map(function(t) {
                    return {
                        left: t.left - n.left - a,
                        top: t.top - n.top - a,
                        width: t.width + 2 * a,
                        height: t.height + 2 * a
                    }
                })
            });
            this.$on("dragmove", function(t) {
                var e = (this.offset, this.drags),
                    i = this.getInRanges(t.position, r);
                t.touchedInfo = i;
                if(i) {
                    this.computePostion(i, t.drag);
                    var a = i.injectAt;
                    if(void 0 != a) {
                        var s = e[a < 0 ? 0 : a].node,
                            o = a === -1 ? "dragable-top" : "dragable-bottom";
                        this.releaseTouch();
                        if(!n.hasClass(s, o)) n.addClass(s, o);
                        else;
                    }
                } else this.releaseTouch();
                this.$emit("touchedmove", t)
            });
            this.$on("dragleave", this.releaseTouch.bind(this));
            this.$on("dragdrop", function(t) {
                var e = (this.offset, this.drags, this.getInRanges(t.position, r));
                t.touchedInfo = e;
                if(e) this.computePostion(e, t.drag, t.position);
                else e = {
                    drag: t.drag,
                    drop: t.drop
                };
                this.releaseTouch();
                this.$emit("toucheddrop", t)
            })
        },
        releaseTouch: function() {
            var t = this.drags;
            t.forEach(function(t) {
                var e = t.node,
                    i = e.className;
                e.className = i.replace(/\s*dragable-(bottom|top|current)\s*/g, "")
            })
        },
        getInRanges: function(t, e) {
            var n, r, a = this.data.direct,
                s = e.length,
                o = i.getInRanges(t, e);
            if(o || !s) return o;
            else if("y" === a) {
                if(t.top < e[0].top) {
                    n = -1;
                    r = 0
                }
                if(t.top > e[e.length - 1].top) r = n = s - 1
            } else {
                if(t.left < e[0].left) {
                    n = -1;
                    r = 0
                }
                if(t.left > e[e.length - 1].left) r = n = s - 1
            }
            return null != r ? {
                injectAt: n,
                index: r
            } : null
        },
        computePostion: function(t, e, i) {
            var n = this.data,
                r = t.dimension,
                a = (t.touched, t.index),
                s = n.direct,
                o = this.drags.indexOf(e);
            t.selfIndex = o;
            if(null != t.injectAt) return t;
            if(!/^(x|y)$/.test(s)) s = "x";
            var l, c = 1 * r.width / 2,
                u = 1 * r.width / 2,
                d = 1 * r.height / 2,
                h = 1 * r.height / 2;
            if("x" === s)
                if(r.left > u) l = a;
                else if(r.left < c) l = a - 1;
                else injectTo = a;
            if("y" === s)
                if(r.top > h) l = a;
                else if(r.top < d) l = a - 1;
            t.injectAt = l
        },
        addDrag: function(t) {
            var e = this.drags;
            e.push(t);
            setTimeout(function() {
                e.sort(function(t, e) {
                    return r(t.node, e.node)
                })
            })
        },
        delDrag: function(t) {
            for(var e = this.drags, i = e.length; i--;)
                if(e[i] === t) return e.splice(i, 1)
        }
    })
}, 7, 173);
I$(421, function(t, e) {
    var i = ReDnd.util,
        n = Regular.dom,
        r = document.compareDocumentPosition ? function(t, e) {
            if(!t.compareDocumentPosition || !e.compareDocumentPosition) return 0;
            else return 4 & t.compareDocumentPosition(e) ? -1 : t === e ? 0 : 1
        } : function(t, e) {
            if(!t.sourceIndex || !e.sourceIndex) return 0;
            else return t.sourceIndex - e.sourceIndex
        };
    ReDnd.Dropable.extend({
        name: "dropable-folder",
        config: function(t) {
            this.supr(t);
            this.drags = [];
            this.$on("add_drag", function(t) {
                var e = this;
                this.addDrag(t);
                t.$on("$destroy", function() {
                    e.delDrag(t)
                })
            })
        },
        init: function() {
            this.supr();
            var t = this.data,
                e = [],
                r = [],
                a = t.range || 8;
            this.$on("dragenter", function() {
                var t = this.drags,
                    n = this.offset;
                e = [];
                t.forEach(function(t) {
                    e.push(i.getDimension(t.node))
                });
                r = e.map(function(t) {
                    return {
                        left: t.left - n.left - a,
                        top: t.top - n.top - a,
                        width: t.width + 2 * a,
                        height: t.height + 2 * a
                    }
                })
            });
            this.$on("dragmove", function(t) {
                var e = (this.offset, this.drags),
                    i = this.getInRanges(t.position, r);
                t.touchedInfo = i;
                if(i) {
                    this.computePostion(i, t.drag);
                    var a, s = i.injectAt;
                    if(void 0 != s) {
                        var o = e[s < 0 ? 0 : s].node;
                        a = s === -1 ? "dragable-top" : "dragable-bottom"
                    } else if("number" == typeof i.injectTo) {
                        var o = e[i.injectTo].node;
                        a = "dragable-current"
                    }
                    if(a) {
                        this.releaseTouch();
                        if(!n.hasClass(o, a)) n.addClass(o, a)
                    }
                } else this.releaseTouch();
                this.$emit("touchedmove", t)
            });
            this.$on("dragleave", this.releaseTouch.bind(this));
            this.$on("dragdrop", function(t) {
                var e = (this.offset, this.drags, this.getInRanges(t.position, r));
                t.touchedInfo = e;
                if(e) this.computePostion(e, t.drag, t.position);
                else e = {
                    drag: t.drag,
                    drop: t.drop
                };
                this.releaseTouch();
                this.$emit("toucheddrop", t)
            })
        },
        releaseTouch: function() {
            var t = this.drags;
            t.forEach(function(t) {
                var e = t.node,
                    i = e.className;
                e.className = i.replace(/\s*dragable-(bottom|top|current)\s*/g, "")
            })
        },
        getInRanges: function(t, e) {
            var n, r, a = this.data.direct,
                s = e.length,
                o = i.getInRanges(t, e);
            if(o || !s) return o;
            else if("y" === a) {
                if(t.top < e[0].top) {
                    n = -1;
                    r = 0
                }
                if(t.top > e[e.length - 1].top) r = n = s - 1
            } else {
                if(t.left < e[0].left) {
                    n = -1;
                    r = 0
                }
                if(t.left > e[e.length - 1].left) r = n = s - 1
            }
            return null != r ? {
                injectAt: n,
                index: r
            } : null
        },
        computePostion: function(t, e, i) {
            var n = this.data,
                r = t.dimension,
                a = (t.touched, t.index),
                s = n.direct,
                o = this.drags.indexOf(e);
            t.selfIndex = o;
            if(null != t.injectAt) return t;
            if(!/^(x|y)$/.test(s)) s = "x";
            var l, c, u = this.setLimitDis(r, e),
                d = u.xMin,
                h = u.xMax,
                f = u.yMin,
                p = u.yMax;
            if("x" === s)
                if(r.left > h) l = a;
                else if(r.left < d) l = a - 1;
                else c = a;
            if("y" === s)
                if(r.top > p) l = a;
                else if(r.top < f) l = a - 1;
                else c = a;
            t.injectAt = l;
            t.injectTo = c
        },
        setLimitDis: function(t, e) {
            var i, n, r, a, s = this.data.name.split("_"),
                o = e.data && e.data.key,
                l = o && o.isFolder,
                c = this.data.level;
            if("folder" == s[1] && s[2] + "" == "undefined" && !l) {
                i = 0;
                n = t.width;
                r = 0;
                a = t.height
            } else if("folder" == s[1] && 3 == c && l) {
                i = 1 * t.width / 2 + 3;
                n = 1 * t.width / 2;
                r = 1 * t.height / 2 + 3;
                a = 1 * t.height / 2
            } else {
                i = 1 * t.width / 3;
                n = 2 * t.width / 3;
                r = 1 * t.height / 3;
                a = 2 * t.height / 3
            }
            return {
                xMin: i,
                xMax: n,
                yMin: r,
                yMax: a
            }
        },
        addDrag: function(t) {
            var e = this.drags;
            e.push(t);
            setTimeout(function() {
                e.sort(function(t, e) {
                    return r(t.node, e.node)
                })
            })
        },
        delDrag: function(t) {
            for(var e = this.drags, i = e.length; i--;)
                if(e[i] === t) return e.splice(i, 1)
        }
    })
}, 7, 173);
I$(267, '<div class="m-window">\n  <div class="wrap">\n      <div class="window">\n        <div class="winhd">\n          <h2 class="wintt">提示框</h2>\n        </div>\n        <div class="winbd j-flag wtxc"></div>\n        <div class="winft">\n            <button type="button" class="u-btn u-btn-1 j-next">下一条</button>\n            <button type="button" class="u-btn u-btn-2 j-done">完成</button>\n        </div>\n        <span class="wincls u-icn u-icn-close j-close"></span>\n      </div>\n    </div>\n</div>  ');
I$(101, function(t, e, i, n, r, a, s, o, l, c) {
    var u;
    l._$$ConfirmAprrove = t._$klass();
    c = l._$$ConfirmAprrove._$extend(r._$$Abstract);
    c.__initXGui = function() {
        var t = a._$addNodeTemplate(o);
        return function() {
            this.__seed_html = t
        }
    }();
    c.__initNode = function() {
        this.__super();
        u = e._$getByClassName(this.__body, "j-flag");
        i._$addEvent(this.__body, "click", this.__onBodyClick._$bind(this))
    };
    c.__onBodyClick = function(t) {
        i._$stop(t);
        var e = i._$getElement(t, "c:j-next"),
            n = i._$getElement(t, "c:j-close"),
            r = i._$getElement(t, "c:j-done");
        if(!e)
            if(!r)
                if(!n);
                else this._$close();
            else this.__onDone();
        else this.__onNext()
    };
    c.__reset = function(t) {
        t.parent = document.body;
        this.__super(t);
        this.__content = t.content || "";
        this.__next = t.onNext || this._f;
        this.__done = t.onDone || this._f;
        this.__setContent()
    };
    c._f = function() {};
    c.__onNext = function() {
        this.__next();
        this._$close()
    };
    c.__onDone = function() {
        this.__done();
        this._$close()
    };
    c.__setContent = function() {
        if(this.__content) u[0].innerHTML = n._$escape(this.__content)
    };
    c._$close = function() {
        this._$recycle()
    };
    return l
}, 1, 3, 6, 4, 142, 14, 7, 267);
I$(282, "{#list folders as folder}\n    {#if folder.folders && folder.folders.length > 0}\n          <r-list folders={folder.folders}></r-list>\n    {/if}\n    {#list folder.reports as report}\n        <option value={report.id}>{report.title}</option>\n    {/list}\n{/list}\n");
I$(462, '<div class="m-nv-mask" on-click={this.clsMenu()}></div>\n');
I$(283, function(t, e) {
    var i = Regular.extend({
        name: "nav-mask",
        template: e,
        config: function(t) {},
        clsMenu: function() {
            var t = document.querySelector(".g-wap");
            if(t) {
                Regular.dom.addClass(t, "g-wap-nonv");
                this.destroy()
            }
        }
    });
    return i
}, 7, 462);